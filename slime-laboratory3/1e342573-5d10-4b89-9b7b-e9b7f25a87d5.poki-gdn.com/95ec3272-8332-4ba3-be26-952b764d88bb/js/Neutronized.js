!function(){"use strict";var t=function(){return function(){}}(),e=function(){return function(){}}(),n=function(){return function(n,i,r,o,a,s,l,u,c,h){this.a=new e,this.b=new e,this.flags=new t,this.dest=n,this.a.format=i,this.a.size=r,this.b.format=o,this.b.size=a,this.opcode=s,this.flags.simple=l,this.flags.horizontal=u,this.flags.fragonly=c,this.flags.matrix=h}}(),i=function(){function t(){}return Object.defineProperty(t,"map",{get:function(){return t._map||(t._map=new Array,t._map.mov=new n("vector","vector",4,"none",0,0,!0,null,null,null),t._map.add=new n("vector","vector",4,"vector",4,1,!0,null,null,null),t._map.sub=new n("vector","vector",4,"vector",4,2,!0,null,null,null),t._map.mul=new n("vector","vector",4,"vector",4,3,!0,null,null,null),t._map.div=new n("vector","vector",4,"vector",4,4,!0,null,null,null),t._map.rcp=new n("vector","vector",4,"none",0,5,!0,null,null,null),t._map.min=new n("vector","vector",4,"vector",4,6,!0,null,null,null),t._map.max=new n("vector","vector",4,"vector",4,7,!0,null,null,null),t._map.frc=new n("vector","vector",4,"none",0,8,!0,null,null,null),t._map.sqt=new n("vector","vector",4,"none",0,9,!0,null,null,null),t._map.rsq=new n("vector","vector",4,"none",0,10,!0,null,null,null),t._map.pow=new n("vector","vector",4,"vector",4,11,!0,null,null,null),t._map.log=new n("vector","vector",4,"none",0,12,!0,null,null,null),t._map.exp=new n("vector","vector",4,"none",0,13,!0,null,null,null),t._map.nrm=new n("vector","vector",4,"none",0,14,!0,null,null,null),t._map.sin=new n("vector","vector",4,"none",0,15,!0,null,null,null),t._map.cos=new n("vector","vector",4,"none",0,16,!0,null,null,null),t._map.crs=new n("vector","vector",4,"vector",4,17,!0,!0,null,null),t._map.dp3=new n("vector","vector",4,"vector",4,18,!0,!0,null,null),t._map.dp4=new n("vector","vector",4,"vector",4,19,!0,!0,null,null),t._map.abs=new n("vector","vector",4,"none",0,20,!0,null,null,null),t._map.neg=new n("vector","vector",4,"none",0,21,!0,null,null,null),t._map.sat=new n("vector","vector",4,"none",0,22,!0,null,null,null),t._map.ted=new n("vector","vector",4,"sampler",1,38,!0,null,!0,null),t._map.kil=new n("none","scalar",1,"none",0,39,!0,null,!0,null),t._map.tex=new n("vector","vector",4,"sampler",1,40,!0,null,!0,null),t._map.m33=new n("vector","matrix",3,"vector",3,23,!0,null,null,!0),t._map.m44=new n("vector","matrix",4,"vector",4,24,!0,null,null,!0),t._map.m43=new n("vector","matrix",3,"vector",4,25,!0,null,null,!0),t._map.ddx=new n("vector","vector",4,"none",0,26,!0,null,!0,null),t._map.ddy=new n("vector","vector",4,"none",0,27,!0,null,!0,null),t._map.sge=new n("vector","vector",4,"vector",4,41,!0,null,null,null),t._map.slt=new n("vector","vector",4,"vector",4,42,!0,null,null,null),t._map.sgn=new n("vector","vector",4,"vector",4,43,!0,null,null,null),t._map.seq=new n("vector","vector",4,"vector",4,44,!0,null,null,null),t._map.sne=new n("vector","vector",4,"vector",4,45,!0,null,null,null)),t._map},enumerable:!1,configurable:!0}),t}(),r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},a.apply(this,arguments)};function s(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}"function"==typeof SuppressedError&&SuppressedError;var l=function(t){function e(e,n,i){void 0===e&&(e=""),void 0===n&&(n=0),void 0===i&&(i="");var r=t.call(this,e)||this;return r._errorID=0,r._messsage="",r._name="",r._messsage=e,r._name=i,r._errorID=n,r}return o(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._messsage},set:function(t){this._messsage=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorID",{get:function(){return this._errorID},enumerable:!1,configurable:!0}),e}(Error),u=function(t){function e(e,n){return void 0===e&&(e=null),void 0===n&&(n=0),t.call(this,e||"An abstract method was called! Either an instance of an abstract export class was created,or an abstract method was not overridden by the subclass.",n)||this}return o(e,t),e}(l),c=function(){function t(t){this._iAllowedToPropagate=!0,this._iAllowedToImmediatlyPropagate=!0,this.type=t}return t.prototype.clone=function(){return new t(this.type)},t}(),h=function(t){function e(e,n,i){void 0===i&&(i=null);var r=t.call(this,e)||this;return r._asset=n,r._prevName=i||r._asset.name,r}return o(e,t),Object.defineProperty(e.prototype,"asset",{get:function(){return this._asset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prevName",{get:function(){return this._prevName},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._asset,this._prevName)},e.INVALIDATE="invalidate",e.CLEAR="clear",e.RENAME="rename",e.ENTER_FRAME="enterFrame",e.EXIT_FRAME="exitFrame",e.ASSET_CONFLICT_RESOLVED="assetConflictResolved",e.ASSET_COMPLETE="assetComplete",e.TEXTURE_SIZE_ERROR="textureSizeError",e}(c),p=function(){function t(t){void 0===t&&(t=null),this._listenerObjects={},this._t=t||this}return t.prototype.addEventListener=function(t,e){var n=this._listenerObjects[t];void 0===n&&(n=this._listenerObjects[t]=new d),n.addEventListener(e)},t.prototype.removeEventListener=function(t,e){var n=this._listenerObjects[t];n&&(n.removeEventListener(e),0==n.numListeners&&delete this._listenerObjects[t])},t.prototype.dispatchEvent=function(t,e){void 0===e&&(e=null);var n=this._listenerObjects[t.type];n&&(t.target=e||this._t,t.currentTarget=this._t,n.dispatchEvent(t))},t.prototype.hasEventListener=function(t,e){return void 0!==this._listenerObjects[t]&&(null!=e?-1!==this._listenerObjects[t].getEventListenerIndex(e):this._listenerObjects[t].numListeners>0)},t.prototype.removeAllEventListeners=function(){this._listenerObjects={}},t}(),d=function(){function t(){this._index=0,this._listeners=new Array,this.numListeners=0}return t.prototype.addEventListener=function(t){-1===this._listeners.indexOf(t)&&(this._listeners.push(t),this.numListeners++)},t.prototype.removeEventListener=function(t){var e=this._listeners.indexOf(t);-1!==e&&(this._listeners.splice(e,1),e<=this._index&&this._index--,this.numListeners--)},t.prototype.dispatchEvent=function(t){var e=this.numListeners;for(this._index=0;this._index<e&&this._index<this.numListeners&&(this._listeners[this._index](t),t._iAllowedToImmediatlyPropagate);this._index++);},t.prototype.getEventListenerIndex=function(t){return this._listeners.indexOf(t)},t}(),f=function(){function t(){}return Object.defineProperty(t,"Current",{get:function(){return this.id},enumerable:!1,configurable:!0}),t.Next=function(){return this.id++},t.id=0,t}(),_=function(t){function e(){var e=t.call(this)||this;return e._abstractionPool={},e.id=f.Next(),e}return o(e,t),Object.defineProperty(e.prototype,"adaptee",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adapter",{get:function(){return this._adapter||this},set:function(t){this._adapter=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){throw new u},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){var e=this._name;this._name=t,null==this._name&&(this._name="null"),this.dispatchEvent(new h(h.RENAME,this,e))},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.dispatchEvent(new h(h.INVALIDATE,this))},e.prototype.dispose=function(){throw new u},e.prototype.clone=function(){throw new u},e.prototype.clear=function(){this.dispatchEvent(new h(h.CLEAR,this))},Object.defineProperty(e.prototype,"assetNamespace",{get:function(){return this._namespace},set:function(t){this._namespace=t||e.DEFAULT_NAMESPACE},enumerable:!1,configurable:!0}),e.prototype.assetPathEquals=function(t,e){return this._name==t&&(!e||this._namespace==e)},e.prototype.isAsset=function(t){return this.assetType==t.assetType},e.prototype.resetAssetPath=function(t,n){void 0===n&&(n=null),this._name=t||"null",this._namespace=n||e.DEFAULT_NAMESPACE},e.prototype.getAbstraction=function(t){return this._abstractionPool[t.id]||(this._abstractionPool[t.id]=new(t.requestAbstraction(this))(this,t))},e.prototype.clearAbstraction=function(t){delete this._abstractionPool[t.id]},e.DEFAULT_NAMESPACE="default",e}(p),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._stopped=!1,e._loops=0,e._id=-1,e._isLooping=!1,e._isPlaying=!1,e._isDecoding=!1,e}return o(e,t),Object.defineProperty(e.prototype,"stopped",{get:function(){return this._stopped},enumerable:!1,configurable:!0}),e.prototype.isLooping=function(){return this._isLooping},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isDecoding=function(){return this._isDecoding},e.prototype.play=function(t,e,n,i,r){this._loops="number"==typeof n?n:n?1e3:0,this._id=i||-1},e.prototype.dispatchRestart=function(){this.dispatchEvent(e.RESTART_EVENT)},e.prototype.tryRestartLoop=function(){return this._loops--,!(this._loops<=0)&&(!!this.restart()||(this._loops=0,!1))},e.prototype.completeInternally=function(t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),n&&this.tryRestartLoop()||t&&this.dispatchEvent(e.COMPLETE_EVENT)},e.prototype.dispatchComplete=function(){this.dispatchEvent(e.COMPLETE_EVENT)},e.prototype.dispatchStop=function(t){void 0===t&&(t=!1),this.dispatchEvent(t?e.ERROR_EVENT:e.STOP_EVENT),this.owner=null,this._stopped=!0,this.removeAllEventListeners()},e.COMPLETE="complete",e.RESTART="restart",e.STOP="stop",e.ERROR="error",e.RESTART_EVENT=new c(e.RESTART),e.COMPLETE_EVENT=new c(e.COMPLETE),e.STOP_EVENT=new c(e.STOP),e.ERROR_EVENT=new c(e.ERROR),e}(p),m=function(t){function e(e,n,i){void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=1);var r=t.call(this)||this;return r._groupID=0,r._groupVolume=1,r._groupPan=0,r._startTime=0,r._groupID=e,r._groupVolume=n,r._groupPan=i,r._sourceOpenDelegate=function(t){return r._sourceOpen(t)},r._updateEndDelegate=function(t){return r._updateEnd(t)},r._audio=new Audio,r._audio.ontimeupdate=function(t){return r._onTimeUpdate(t)},r._updateSource(),r}return o(e,t),e.stopAllSounds=function(t){void 0===t&&(t=-1);var n=e._channels.length;if(t<0){for(var i=0;i<n;i++)e._channels[i].stop();e._channels.length=0}else{var r=[];for(i=0;i<n;i++)e._channels[i].groupID==t?e._channels[i].stop():r[r.length]=e._channels[i];e._channels=r}},e.setChannelGroupVolume=function(t,n){void 0===n&&(n=-1);var i=e._channels.length;if(n<0)for(var r=0;r<i;r++)e._channels[r].groupVolume=t;else for(r=0;r<i;r++)e._channels[r].groupID==n&&(e._channels[r].groupVolume=t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._audio.currentTime-this._startTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupID",{get:function(){return this._groupID},set:function(t){this._groupID=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupVolume",{get:function(){return this._groupVolume},set:function(t){this._groupVolume!=t&&(this._groupVolume=t,this._audio.volume=this._groupVolume*this._volume)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupPan",{get:function(){return this._groupPan},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume!=t&&(this._volume=t,this._audio.volume=this._volume)},enumerable:!1,configurable:!0}),e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isLooping=function(){return this._isLooping},e.prototype.isDecoding=function(){return!1},Object.defineProperty(e.prototype,"pan",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.restart=function(){return console.warn("[StreamingAudioChannel] Restart not implemented"),!1},e.prototype.play=function(e,n,i){void 0===n&&(n=0),void 0===i&&(i=!1),t.prototype.play.call(this,e,n,i,0),this._isPlaying=!0,(this._isLooping||this._isLooping!=this._loops>0)&&(this._isLooping=this._loops>0,this._sourceDirty=!0),this._sourceDirty&&this._updateSource(),this._buffer=e,this._offset=n,this._audio.volume=this._groupVolume*this._volume,this._isQueuing||this._isOpening||this._queueBuffer()},e.prototype.stopInternally=function(e){void 0===e&&(e=!1),this._audio.pause(),this._isPlaying=!1,this._isLooping=!1,t.prototype.completeInternally.call(this,e,e)},e.prototype.stop=function(){this.stopInternally(!1),this.dispatchStop(!1)},e.prototype._sourceOpen=function(t){if(this._isOpening=!1,this._mediaSource.activeSourceBuffers.length)return console.log("ERR: double sourceopen event called"),void this.dispatchStop(!0);this._sourceBuffer=this._mediaSource.addSourceBuffer("audio/mpeg"),this._sourceBuffer.addEventListener("updateend",this._updateEndDelegate),this._isPlaying&&this._queueBuffer()},e.prototype._queueBuffer=function(){this._isQueuing=!0,this._startTime=this._sourceBuffer.timestampOffset,this._sourceBuffer.appendBuffer(this._buffer)},e.prototype._updateEnd=function(t){this._isQueuing=!1,this._isLooping&&this._mediaSource.endOfStream(),this._duration=this._sourceBuffer.timestampOffset-this._startTime,this._audio.currentTime=this._startTime+this._offset,this._audio.play()},e.prototype._onTimeUpdate=function(t){!this._isLooping&&this._duration<this._audio.currentTime-this._startTime+.1&&this.stopInternally(!0)},e.prototype._updateSource=function(){this._mediaSource&&this._disposeSource(),this._isQueuing=!1,this._isOpening=!0,this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._sourceOpenDelegate),this._urlString=URL.createObjectURL(this._mediaSource),this._audio.src=this._urlString,this._audio.loop=this._isLooping,this._sourceDirty=!1},e.prototype._disposeSource=function(){this._isOpening||(this._sourceBuffer.timestampOffset&&this._sourceBuffer.remove(0,this._sourceBuffer.timestampOffset),this._sourceBuffer.removeEventListener("updateend",this._updateEndDelegate),this._mediaSource.removeSourceBuffer(this._sourceBuffer),delete this._sourceBuffer,this._sourceBuffer=null),this._mediaSource.removeEventListener("sourceopen",this._sourceOpenDelegate),URL.revokeObjectURL(this._urlString),delete this._mediaSource,this._mediaSource=null},e.maxChannels=4,e._channels=new Array,e}(g),y=function(t){function e(n,i,r){void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=1);var o=t.call(this)||this;return o._volume=1,o._pan=-1,o._groupID=0,o._groupVolume=1,o._groupPan=0,o._startTime=0,o._groupID=n,o._groupVolume=i,o._groupPan=r,o._audioCtx=e.getAudioContext(),o._usingNativePanner="function"==typeof o._audioCtx.createStereoPanner,o._gainNode=o._audioCtx.createGain(),o._gainNode.gain.value=o._groupVolume*o._volume,o._pannerNode=o._usingNativePanner?o._audioCtx.createStereoPanner():o._audioCtx.createPanner(),o.pan=0,o._gainNode.connect(o._pannerNode),o._pannerNode.connect(o._audioCtx.destination),o._onEndedDelegate=function(t){return o._onEnded(t)},o}return o(e,t),e.getOfflineContext=function(t,e,n){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=44100);var i=self.OfflineAudioContext||self.webkitOfflineAudioContext;return i?new i(t,e,n):null},e.getAudioContext=function(){var t=self.AudioContext||self.webkitAudioContext;return!e._audioCtx&&t&&(e._audioCtx=new t),e._audioCtx&&"suspended"==e._audioCtx.state&&e._audioCtx.resume(),e._audioCtx},e.stopAllSounds=function(t){void 0===t&&(t=-1);var n=e._channels.length;if(t<0){for(var i=0;i<n;i++)e._channels[i].stop();e._channels.length=0}else{var r=[];for(i=0;i<n;i++)e._channels[i].groupID==t?e._channels[i].stop():r[r.length]=e._channels[i];e._channels=r}},e.setChannelGroupVolume=function(t,n){void 0===n&&(n=-1);var i=e._channels.length;if(n<0)for(var r=0;r<i;r++)e._channels[r].groupVolume=t;else for(r=0;r<i;r++)e._channels[r].groupID==n&&(e._channels[r].groupVolume=t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._isDecoding?this._currentTime:this._audioCtx.currentTime-this._startTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupID",{get:function(){return this._groupID},set:function(t){this._groupID=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupVolume",{get:function(){return this._groupVolume},set:function(t){this._groupVolume!=t&&(this._groupVolume=t,this._gainNode.gain.value=this._groupVolume*this._volume)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupPan",{get:function(){return this._groupPan},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume!=t&&(this._volume=t,this._gainNode.gain.value=this._groupVolume*this._volume)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){if(this._pan!=t)if(this._pan=t,this._usingNativePanner)this._pannerNode.pan.value=this._pan;else{var e=this._pan*(Math.PI/2);this._pannerNode.setPosition(Math.sin(e),0,Math.cos(e))}},enumerable:!1,configurable:!0}),e.prototype.restart=function(){if(this._isPlaying=!1,this._stopped)throw"You can't restart channel that was fully stopped";var t=e._decodeCache[this._id];return!!t&&(this._isPlaying=!0,this.executeBuffer(t),this.dispatchRestart(),!0)},e.prototype.play=function(n,i,r,o,a){void 0===i&&(i=0),void 0===r&&(r=!1),void 0===o&&(o=0),0!==n.byteLength?(t.prototype.play.call(this,n,i,r,o,a),this._isLooping=this._loops>0,this._isPlaying=!0,this._currentTime=i,this._isDecoding=!0,e._decodeCache[o]?this.executeBuffer(e._decodeCache[o]):e._errorCache[o]?(this.stopInternally(!1),this.dispatchStop(!0)):this._decodeAndExecute(n,a)):console.warn("[WabAudioChannel] Input buffer is empty")},e.prototype.stopInternally=function(e){void 0===e&&(e=!0),this._isPlaying&&(this._isPlaying=!1,this._isLooping=!1,this._isDecoding=!1,this._source&&this._disposeSource(),t.prototype.completeInternally.call(this,e,e))},e.prototype.stop=function(){this.stopInternally(!1),this.dispatchStop(!1)},e.prototype._decodeAndExecute=function(t,n){var i=this,r=this._audioCtx;try{n&&n.sampleRate&&n.sampleRate!==this._audioCtx.sampleRate&&n.samplesCount&&(r=e.getOfflineContext(2,n.samplesCount+n.startOffset,n.sampleRate))}catch(t){console.warn("[WebAudioChannel] Error when try create Offline Context:",t.message,n)}var o=r.decodeAudioData(t.slice(0),(function(t){return i._onDecodeComplete(t,n)}),(function(t){return i._onError(t)}));o instanceof self.Promise&&o.catch((function(t){return i._onError(t)}))},e.prototype._onDecodeComplete=function(t,n){e._decodeCache[this._id]||(n&&n.startOffset>0&&(t=this.removeSilent(t,n.startOffset,n.samplesCount,n.sampleRate)),e._decodeCache[this._id]=t),t=e._decodeCache[this._id],this._isPlaying&&this.executeBuffer(t)},e.prototype.executeBuffer=function(t){this._source&&this._disposeSource(),this._isDecoding=!1,this._source=this._audioCtx.createBufferSource(),this._source.connect(this._gainNode),this._source.buffer=t,this._duration=t.duration,this._pan=0,this._startTime=this._audioCtx.currentTime-this._currentTime,this._source.onended=this._onEndedDelegate;try{var e=this._groupVolume,n=this._pan;this._groupVolume=-1,this._pan=-1,this.groupVolume=e,this.pan=n,this._source.start(this._audioCtx.currentTime,this._currentTime)}catch(t){console.warn("[WebAudioChannel] Error starting audio: "+t),this.dispatchStop(!0),this._disposeSource()}},e.prototype._onError=function(t){console.warn("[WebAudioChannel] Error with decoding audio data:",t),e._errorCache[this._id]=!0,this._isDecoding=!1,this.stopInternally(!1),this.dispatchStop(!0)},e.prototype._onEnded=function(t){this.stopInternally(!0)},e.prototype._disposeSource=function(){this._source.onended=null,this._source.stop(this._audioCtx.currentTime),this._source.disconnect(),this._source=null},e.prototype.removeSilent=function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),n=n||t.length,i=i||t.sampleRate,e=Math.ceil(t.sampleRate*e/i),n=t.sampleRate*n/i|0;for(var r=Math.min(t.length,n+e),o=this._audioCtx.createBuffer(t.numberOfChannels,n,t.sampleRate),a=0;a<t.numberOfChannels;a++)o.copyToChannel(t.getChannelData(a).subarray(e,r),a,0);return o},e.maxChannels=64,e._channels=new Array,e._decodeCache={},e._errorCache={},e}(g),A=y.getAudioContext();if(A&&"suspended"===A.state){var v=function(){A.resume();var t=A.createBuffer(1,1,22050),e=A.createBufferSource();e.buffer=t,e.connect(A.destination),e.start(),setTimeout((function(){"running"===A.state&&(document.removeEventListener("touchstart",v,!1),document.removeEventListener("touchend",v,!1))}),0)};document.addEventListener("touchstart",v,!1),document.addEventListener("touchend",v,!1)}var b=function(){function t(){this.position=0,this.length=0,this._mode=""}return t.prototype.writeByte=function(t){throw"Virtual method"},t.prototype.readByte=function(){throw"Virtual method"},t.prototype.writeUnsignedByte=function(t){throw"Virtual method"},t.prototype.readUnsignedByte=function(){throw"Virtual method"},t.prototype.writeUnsignedShort=function(t){throw"Virtual method"},t.prototype.readUnsignedShort=function(){throw"Virtual method"},t.prototype.writeUnsignedInt=function(t){throw"Virtual method"},t.prototype.readUnsignedInt=function(){throw"Virtual method"},t.prototype.writeFloat=function(t){throw"Virtual method"},t.prototype.toFloatBits=function(t){throw"Virtual method"},t.prototype.readFloat=function(t){throw"Virtual method"},t.prototype.fromFloatBits=function(t){throw"Virtual method"},t.prototype.getBytesAvailable=function(){throw new u("ByteArrayBase, getBytesAvailable() not implemented ")},t.prototype.toString=function(){return"[ByteArray] ( "+this._mode+" ) position="+this.position+" length="+this.length},t.prototype.compareEqual=function(t,e){(null==e||e>this.length-this.position)&&(e=this.length-this.position),e>t.length-t.position&&(e=t.length-t.position);for(var n=e,i=!0;i&&e>=4;)e-=4,this.readUnsignedInt()!=t.readUnsignedInt()&&(i=!1);for(;i&&e>=1;)e--,this.readUnsignedByte()!=t.readUnsignedByte()&&(i=!1);return this.position-=n-e,t.position-=n-e,i},t.prototype.writeBase64String=function(t){},t.prototype.dumpToConsole=function(){var t=this.position;this.position=0;function e(t,e){for(var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i="",r=0;r<e;r++)i=n[t>>(r<<2)&15]+i;return i}for(var n=0;n<this.length;n+=8){for(var i=e(n,4)+":",r=0;r<8&&n+r<this.length;r++)i+=" "+e(this.readUnsignedByte(),2);console.log(i)}this.position=t},t.prototype.readBase64String=function(e){return(null==e||e>this.length-this.position)&&(e=this.length-this.position),e>0?t.internalGetBase64String(e,this.readUnsignedByte,this):""},t.internalGetBase64String=function(e,n,i){for(var r,o,a,s,l,u,c,h="",p=t.Base64Key;e>=3;)s=(r=n.apply(i))>>2,l=(3&r)<<4|(o=n.apply(i))>>4,u=(15&o)<<2|(a=n.apply(i))>>6,c=63&a,h+=p.charAt(s)+p.charAt(l)+p.charAt(u)+p.charAt(c),e-=3;return 2==e?(s=(r=n.apply(i))>>2,l=(3&r)<<4|(o=n.apply(i))>>4,u=(15&o)<<2,h+=p.charAt(s)+p.charAt(l)+p.charAt(u)+"="):1==e&&(s=(r=n.apply(i))>>2,l=(3&r)<<4,h+=p.charAt(s)+p.charAt(l)+"=="),h},t.Base64Key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t}(),x=function(t){function e(e){void 0===e&&(e=4);var n=t.call(this)||this;return n._mode="Typed array",n.maxlength=Math.max(e+255&-256,4),n.arraybytes=new ArrayBuffer(n.maxlength),n.unalignedarraybytestemp=new ArrayBuffer(16),n}return o(e,t),e.prototype.ensureWriteableSpace=function(t){this.ensureSpace(t+this.position)},e.prototype.setArrayBuffer=function(t){this.ensureSpace(t.byteLength),this.length=t.byteLength;var e=new Int8Array(t);new Int8Array(this.arraybytes,0,this.length).set(e),this.position=0},e.prototype.writeArrayBuffer=function(t){this.ensureWriteableSpace(t.byteLength);var e=new Int8Array(t);new Int8Array(this.arraybytes,this.length,t.byteLength).set(e),this.length+=t.byteLength,this.position=this.length},e.prototype.writeByteArray=function(t){this.ensureWriteableSpace(t.length);var e=new Int8Array(t.arraybytes,0,t.length);new Int8Array(this.arraybytes,this.length,t.length).set(e),this.length+=t.length,this.position=this.length},e.prototype.getBytesAvailable=function(){return this.length-this.position},e.prototype.ensureSpace=function(t){if(t>this.maxlength){var e=t+255&-256,n=new ArrayBuffer(e),i=new Uint8Array(this.arraybytes,0,this.length);new Uint8Array(n,0,this.length).set(i),this.arraybytes=n,this.maxlength=e}},e.prototype.writeObject=function(t){console.log("writeObject not implemented yet in core/ByteArray")},e.prototype.readObject=function(){return console.log("readObject not implemented yet in core/ByteArray"),{}},e.prototype.writeByte=function(t){this.ensureWriteableSpace(1),new Int8Array(this.arraybytes)[this.position++]=~~t,this.position>this.length&&(this.length=this.position)},e.prototype.readByte=function(){if(this.position>=this.length)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;return new Int8Array(this.arraybytes)[this.position++]},e.prototype.readBytes=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),null==n&&(n=t.length),t.ensureWriteableSpace(e+n);var i=new Int8Array(t.arraybytes),r=new Int8Array(this.arraybytes);i.set(r.subarray(this.position,this.position+n),e),this.position+=n,n+e>t.length&&(t.length+=n+e-t.length)},e.prototype.writeUnsignedByte=function(t){this.ensureWriteableSpace(1),new Uint8Array(this.arraybytes)[this.position++]=255&t,this.position>this.length&&(this.length=this.position)},e.prototype.readUnsignedByte=function(){if(this.position>=this.length)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;return new Uint8Array(this.arraybytes)[this.position++]},e.prototype.writeUnsignedShort=function(t){if(this.ensureWriteableSpace(2),1&this.position){new Uint16Array(this.unalignedarraybytestemp,0,1)[0]=65535&t;var e=new Uint8Array(this.arraybytes,this.position,2),n=new Uint8Array(this.unalignedarraybytestemp,0,2);e.set(n)}else{new Uint16Array(this.arraybytes)[this.position>>1]=65535&t}this.position+=2,this.position>this.length&&(this.length=this.position)},e.prototype.readUTFBytes=function(t){for(var e="",n=this.position+t,i=new DataView(this.arraybytes);this.position<n;){var r=i.getUint8(this.position++);if(r<128){if(0==r)break;e+=String.fromCharCode(r)}else if(r<224)e+=String.fromCharCode((63&r)<<6|127&i.getUint8(this.position++));else if(r<240){var o=i.getUint8(this.position++);e+=String.fromCharCode((31&r)<<12|(127&o)<<6|127&i.getUint8(this.position++))}else{o=i.getUint8(this.position++);var a=i.getUint8(this.position++);e+=String.fromCharCode((15&r)<<18|(127&o)<<12|a<<6&127|127&i.getUint8(this.position++))}}return e},e.prototype.writeUTFBytes=function(t){var e=encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt("0x"+e))}));this.ensureWriteableSpace(4+e.length),this.writeInt(e.length);for(var n=0;n<e.length;n++)this.writeUnsignedByte(e.charCodeAt(n));if(e.length%4){var i=e.length%4;for(n=0;n<i;n++)this.writeUnsignedByte(0)}return e.length},e.prototype.readInt=function(){var t=new DataView(this.arraybytes).getInt32(this.position,!0);return this.position+=4,t},e.prototype.readShort=function(){var t=new DataView(this.arraybytes).getInt16(this.position,!0);return this.position+=2,t},e.prototype.readDouble=function(){var t=new DataView(this.arraybytes).getFloat64(this.position,!0);return this.position+=8,t},e.prototype.readUnsignedShort=function(){if(this.position>this.length+2)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;if(1&this.position){e=new Uint16Array(this.unalignedarraybytestemp,0,1);var t=new Uint8Array(this.arraybytes,this.position,2);return new Uint8Array(this.unalignedarraybytestemp,0,2).set(t),this.position+=2,e[0]}var e=new Uint16Array(this.arraybytes),n=this.position>>1;return this.position+=2,e[n]},e.prototype.writeUnsignedInt=function(t){if(this.ensureWriteableSpace(4),3&this.position){new Uint32Array(this.unalignedarraybytestemp,0,1)[0]=4294967295&t;var e=new Uint8Array(this.arraybytes,this.position,4),n=new Uint8Array(this.unalignedarraybytestemp,0,4);e.set(n)}else{new Uint32Array(this.arraybytes)[this.position>>2]=4294967295&t}this.position+=4,this.position>this.length&&(this.length=this.position)},e.prototype.writeInt=function(t){if(this.ensureWriteableSpace(4),3&this.position){new Int32Array(this.unalignedarraybytestemp,0,1)[0]=~~t;var e=new Uint8Array(this.arraybytes,this.position,4),n=new Uint8Array(this.unalignedarraybytestemp,0,4);e.set(n)}else{new Int32Array(this.arraybytes)[this.position>>2]=~~t}this.position+=4,this.position>this.length&&(this.length=this.position)},e.prototype.readUnsignedInt=function(){if(this.position>this.length+4)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;if(3&this.position){e=new Uint32Array(this.unalignedarraybytestemp,0,1);var t=new Uint8Array(this.arraybytes,this.position,4);return new Uint8Array(this.unalignedarraybytestemp,0,4).set(t),this.position+=4,e[0]}var e=new Uint32Array(this.arraybytes),n=this.position>>2;return this.position+=4,e[n]},e.prototype.writeFloat=function(t){if(this.ensureWriteableSpace(4),3&this.position){new Float32Array(this.unalignedarraybytestemp,0,1)[0]=t;var e=new Uint8Array(this.arraybytes,this.position,4),n=new Uint8Array(this.unalignedarraybytestemp,0,4);e.set(n)}else{new Float32Array(this.arraybytes)[this.position>>2]=t}this.position+=4,this.position>this.length&&(this.length=this.position)},e.prototype.readFloat=function(){if(this.position>this.length+4)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;if(3&this.position){e=new Float32Array(this.unalignedarraybytestemp,0,1);var t=new Uint8Array(this.arraybytes,this.position,4);return new Uint8Array(this.unalignedarraybytestemp,0,4).set(t),this.position+=4,e[0]}var e=new Float32Array(this.arraybytes),n=this.position>>2;return this.position+=4,e[n]},e}(b),C=function(){function t(){}return t.arrayBufferToBase64=function(t,e){for(var n="",i=new Uint8Array(t),r=i.byteLength,o=0;o<r;o++)n+=String.fromCharCode(i[o]);return"data:"+e+";base64,"+window.btoa(n)},t.arrayBufferToAudio=function(e,n){var i=t.arrayBufferToBase64(e,"audio/"+n),r=new Audio;return r.src=i,r},t.arrayBufferToImage=function(e){var n=t.arrayBufferToBase64(e,"image/png"),i=new Image;return i.src=n,i},t.byteArrayToImage=function(e){var n=t.arrayBufferToBase64(e.arraybytes,"image/png"),i=new Image;return i.src=n,i},t.byteArrayToAudio=function(e,n){var i=t.arrayBufferToBase64(e.arraybytes,"audio/"+n),r=new Audio;return r.src=i,r},t.blobToImage=function(t){var e=(window.URL||window.webkitURL).createObjectURL(t),n=new Image;return n.src=e,n},t.blobToAudio=function(t){var e=(window.URL||window.webkitURL).createObjectURL(t),n=new Audio;return n.src=e,n},t.toByteArray=function(t){var e=new x;return e.setArrayBuffer(t),e},t.toString=function(t,e){if(void 0===e&&(e=0),"string"==typeof t){var n=t;if(null!=n.substr)return n.substr(0,n.length)}if(t instanceof x){var i=t;return i.position=0,i.readUTFBytes(Math.min(i.getBytesAvailable(),e))}return null},t}(),I=function(t){function e(e,n,i){void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=1);var r=t.call(this)||this;return r._groupID=0,r._groupVolume=1,r._groupPan=0,r._startTime=0,r._groupID=e,r._groupVolume=n,r._groupPan=i,r._audio=new Audio,r._audio.ontimeupdate=function(t){return r._onTimeUpdate(t)},r}return o(e,t),e.stopAllSounds=function(t){void 0===t&&(t=-1);var n=e._channels.length;if(t<0){for(var i=0;i<n;i++)e._channels[i].stop();e._channels.length=0}else{var r=[];for(i=0;i<n;i++)e._channels[i].groupID==t?e._channels[i].stop():r[r.length]=e._channels[i];e._channels=r}},e.setChannelGroupVolume=function(t,n){void 0===n&&(n=-1);var i=e._channels.length;if(n<0)for(var r=0;r<i;r++)e._channels[r].groupVolume=t;else for(r=0;r<i;r++)e._channels[r].groupID==n&&(e._channels[r].groupVolume=t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._audio.currentTime-this._startTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pan",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupID",{get:function(){return this._groupID},set:function(t){this._groupID=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupVolume",{get:function(){return this._groupVolume},set:function(t){this._groupVolume!=t&&(this._groupVolume=t,this._audio.volume=this._groupVolume*this._volume)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupPan",{get:function(){return this._groupPan},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume!=t&&(this._volume=t,this._audio.volume=this._volume)},enumerable:!1,configurable:!0}),e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isLooping=function(){return this._isLooping},e.prototype.isDecoding=function(){return!1},e.prototype.restart=function(){if(this._isPlaying=!1,this._stopped)throw"You can't restart channel that was fully stopped";return!!this._audio&&(this._isPlaying=!0,this._audio.play(),this.dispatchRestart(),!0)},e.prototype.play=function(n,i,r,o){var a=this;void 0===i&&(i=0),void 0===r&&(r=!1),void 0===o&&(o=0),t.prototype.play.call(this,n,i,r,o),this._isPlaying=!0,this._isLooping=this._loops>0,this._audio.src=e._base64Cache[o]||(e._base64Cache[o]=C.arrayBufferToBase64(n,"audio/mp3"));var s=this._audio;this._audio.addEventListener("loadedmetadata",(function(){s.currentTime=i,s.play()}),!1),this._audio.addEventListener("error",(function(t){console.log("error in audio",t),a.dispatchStop(!0)}),!1),this._audio.addEventListener("canplay",(function(t){console.log("canplay in audio",t)}),!1),this._audio.addEventListener("canplaythrough",(function(t){console.log("canplaythrough in audio",t)}),!1),this._audio.addEventListener("abort",(function(t){console.log("abort in audio",t),a.dispatchStop(!0)}),!1),this._audio.addEventListener("loadstart",(function(t){console.log("loadstart in audio",t)}),!1),this._audio.addEventListener("suspend",(function(t){console.log("suspend in audio",t)}),!1)},e.prototype.stopInternally=function(e){void 0===e&&(e=!1),this._audio.pause(),this._isPlaying=!1,this._isLooping=!1,t.prototype.completeInternally.call(this,e,e)},e.prototype.stop=function(){this.stopInternally(!1),this.dispatchStop(!1)},e.prototype._onTimeUpdate=function(t){!this._isLooping&&this._audio.duration<this._audio.currentTime-this._startTime+.1&&this.stopInternally(!0)},e.maxChannels=4,e._channels=new Array,e._base64Cache={},e}(g),E=function(){function t(){}return t.setVolume=function(e,n){if(void 0===n&&(n=-1),n<0)for(var i=t._channelGroupVolumes.length,r=0;r<i;r++)t._channelGroupVolumes[r]=e;else t._channelGroupVolumes[n]=e;y.setChannelGroupVolume(e,n),m.setChannelGroupVolume(e,n),I.setChannelGroupVolume(e,n)},t.getVolume=function(e){return void 0===e&&(e=0),t._channelGroupVolumes[e]},t.setExternalSoundInterface=function(e){null!=e.startSound?null!=e.stopSound?t._externalSoundInterface=e:console.log("Could not set the externalSoundInterface, because it does not provide a 'stopSound' function"):console.log("Could not set the externalSoundInterface, because it does not provide a 'startSound' function")},t.getExternalSoundInterface=function(){return t._externalSoundInterface},t.stopAllSounds=function(){y.stopAllSounds(),m.stopAllSounds(),I.stopAllSounds()},t.getChannel=function(e,n){void 0===n&&(n=0);var i=e>5e7?m:y;t.isIE&&(i=I);for(var r=0;i._channels[r]&&i._channels[r].isPlaying();)r++;if(r==i.maxChannels){for(var o=void 0,a=i._channels.length,s=0;s<a;s++)if(!(o=i._channels[s]).isLooping()&&!o.isDecoding())return o.groupID=n,o.groupVolume=t._channelGroupVolumes[n],o.groupPan=t._channelGroupPanning[n],i._channels.push(i._channels.splice(s,1)[0]),o.stop(),o;return null}return i._channels[r]=new i(n,t._channelGroupVolumes[n],t._channelGroupPanning[n])},t.isIE=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),t._externalSoundInterface=null,t._channelGroupVolumes=[1],t._channelGroupPanning=[.5],t}(),w=function(t){function e(e,n){void 0===n&&(n=0);var i=t.call(this)||this;return i._volume=1,i._pan=0,i._audioChannels=[],i._channelsPlaying=0,i._data=e,i._channelGroup=n,i.onChannelCompleteStopError=i.onChannelCompleteStopError.bind(i),i}return o(e,t),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._channelsPlaying>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.detachChannel=function(t){t&&(t.removeEventListener(g.COMPLETE,this.onChannelCompleteStopError),t.removeEventListener(g.STOP,this.onChannelCompleteStopError),t.removeEventListener(g.ERROR,this.onChannelCompleteStopError))},e.prototype.attachChannel=function(t){t&&(t.owner=this,t.addEventListener(g.COMPLETE,this.onChannelCompleteStopError),t.addEventListener(g.STOP,this.onChannelCompleteStopError),t.addEventListener(g.ERROR,this.onChannelCompleteStopError))},e.prototype.onChannelCompleteStopError=function(t){var e=t.target,n=this._audioChannels.indexOf(e);n>=0&&(this.detachChannel(e),this._audioChannels.splice(n,1),this._channelsPlaying--),0===this._channelsPlaying&&this.stopInternal(!1)},Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan!=t&&(this._pan=t,this._audioChannel&&(this._audioChannel.pan=this._pan))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"channelGroup",{get:function(){return this._channelGroup},set:function(t){if(this._channelGroup!=t){this._channelGroup=t;for(var e=E.getVolume(t),n=0;n<this._audioChannels.length;n++)this._audioChannels[n].groupVolume=e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){if(this._volume!=t){this._volume=t,this._audioChannel&&(this._audioChannel.volume=this._volume);for(var e=0;e<this._audioChannels.length;e++)this._audioChannels[e].volume=this._volume}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._audioChannel?this._audioChannel.currentTime:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._audioChannel?this._audioChannel.duration:0},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.stop()},e.prototype.play=function(t,e){return void 0===e&&(e=!1),this._audioChannel=E.getChannel(this._data.size,this.channelGroup),this._audioChannel&&(this._channelsPlaying++,this._audioChannels.push(this._audioChannel),this._audioChannel.volume=this._volume,this.attachChannel(this._audioChannel),this._data.play(this._audioChannel,t,e,this.id)),this._audioChannel},e.prototype.stopInternal=function(t){void 0===t&&(t=!1);for(var e=0,n=this._audioChannels;e<n.length;e++){var i=n[e];(i.stopped||t)&&this.detachChannel(i),t&&i.stop()}this._channelsPlaying=0,this._audioChannels.length=0,this._audioChannel=null},e.prototype.stop=function(){this.stopInternal(!0)},e.prototype.clone=function(){var t=new e(this._data);return t.name=this.name,t},e.assetType="[asset WaveAudio]",e}(_),S=function(){function t(t,e){t instanceof Blob?this._blob=t:t instanceof x?this._buffer=t.arraybytes:ArrayBuffer.isView(t)?this._buffer=t.buffer:this._buffer=t,this.meta=e}return Object.defineProperty(t.prototype,"size",{get:function(){return this._buffer?this._buffer.byteLength:this._blob.size},enumerable:!1,configurable:!0}),t.prototype.play=function(t,e,n,i){var r=this;if(this._buffer)t.play(this._buffer,e,n,i,this.meta);else if(!this._loading){this._loading=!0;var o=new FileReader;o.onload=function(o){return r._blobConverted(o,t,e,n,i)},o.readAsArrayBuffer(this._blob)}},t.prototype._blobConverted=function(t,e,n,i,r){this._buffer=t.target.result,e.play(this._buffer,n,i,r,this.meta)},t}(),D=function(){function t(){}return t.float32ColorToARGB=function(t){return[(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t.f32_RGBA_To_f32_ARGB=function(t){return(255&t)<<24|(4278190080&t)>>>24<<16|(16711680&t)>>>16<<8|(65280&t)>>>8},t.f32_RGB_To_f32_ARGB=function(t){return(255&t)<<24|(4278190080&t)>>>24<<16|(16711680&t)>>>16<<8|(65280&t)>>>8},t.prototype.getAlphaFromF32RGBA=function(t){return 255&t},t.ARGBtoFloat32=function(t,e,n,i){return t<<24|e<<16|n<<8|i},t.componentToHex=function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},t.RGBToHexString=function(e){return"#"+t.componentToHex(e[1])+t.componentToHex(e[2])+t.componentToHex(e[3])},t.ARGBToHexString=function(e){return"#"+t.componentToHex(e[0])+t.componentToHex(e[1])+t.componentToHex(e[2])+t.componentToHex(e[3])},t.interpolateFloat32Color=function(t,e,n){var i=1-n;return((4278190080&t)>>>24)*i+((4278190080&e)>>>24)*n<<24|((16711680&t)>>>16)*i+((16711680&e)>>>16)*n<<16|((65280&t)>>>8)*i+((65280&e)>>>8)*n<<8|(255&t)*i+(255&e)*n},t}(),T=function(){function t(t,e,n,i,r,o,a,s){void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),this._isDirty=!1,t instanceof Float32Array?this._rawData=t:(this._rawData=new Float32Array(8),this.redMultiplier=Number(t),this.greenMultiplier=e,this.blueMultiplier=n,this.alphaMultiplier=i,this.redOffset=r,this.greenOffset=o,this.blueOffset=a,this.alphaOffset=s)}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isIdentity",{get:function(){return!this._isDirty},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this._rawData[0]*=t._rawData[0],this._rawData[1]*=t._rawData[1],this._rawData[2]*=t._rawData[2],this._rawData[3]*=t._rawData[3],this._rawData[4]+=t._rawData[4],this._rawData[5]+=t._rawData[5],this._rawData[6]+=t._rawData[6],this._rawData[7]+=t._rawData[7],this._isDirty=this._isDirty||t._isDirty},Object.defineProperty(t.prototype,"alphaMultiplier",{get:function(){return this._rawData[3]},set:function(t){this._rawData[3]=t,this._isDirty=this._isDirty||1!==t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alphaOffset",{get:function(){return this._rawData[7]},set:function(t){this._rawData[7]=t,this._isDirty=this._isDirty||0!==t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blueMultiplier",{get:function(){return this._rawData[2]},set:function(t){this._rawData[2]=t,this._isDirty=this._isDirty||1!==t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blueOffset",{get:function(){return this._rawData[6]},set:function(t){this._rawData[6]=t,this._isDirty=this._isDirty||0!==t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"greenMultiplier",{get:function(){return this._rawData[1]},set:function(t){this._rawData[1]=t,this._isDirty=this._isDirty||1!==t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"greenOffset",{get:function(){return this._rawData[5]},set:function(t){this._rawData[5]=t,this._isDirty=this._isDirty||0!==t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"redMultiplier",{get:function(){return this._rawData[0]},set:function(t){this._rawData[0]=t,this._isDirty=this._isDirty||1!==t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"redOffset",{get:function(){return this._rawData[4]},set:function(t){this._rawData[4]=t,this._isDirty=this._isDirty||0!==t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._rawData[4]<<16|this._rawData[5]<<8|this._rawData[6]},set:function(t){var e=D.float32ColorToARGB(t);this._rawData[4]=e[1],this._rawData[5]=e[2],this._rawData[6]=e[3],this._rawData[0]=0,this._rawData[1]=0,this._rawData[2]=0,this._isDirty=!0},enumerable:!1,configurable:!0}),t.prototype.copyRawDataFrom=function(t){var e=this._rawData;e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],this._isDirty=!0},t.prototype.clear=function(){this._rawData[0]=1,this._rawData[1]=1,this._rawData[2]=1,this._rawData[3]=1,this._rawData[4]=0,this._rawData[5]=0,this._rawData[6]=0,this._rawData[7]=0,this._isDirty=!1},t.prototype.clone=function(){var e=new t;return e.copyFrom(this),e},t.prototype.copyFrom=function(t){var e=t._rawData,n=this._rawData;n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],this._isDirty=t._isDirty},t.prototype.copyTo=function(t){t.copyFrom(this)},t.prototype.prepend=function(t){this._rawData[4]+=t._rawData[4]*this._rawData[0],this._rawData[5]+=t._rawData[5]*this._rawData[1],this._rawData[6]+=t._rawData[6]*this._rawData[2],this._rawData[7]+=t._rawData[7]*this._rawData[3],this.redMultiplier*=t.redMultiplier,this.greenMultiplier*=t.greenMultiplier,this.blueMultiplier*=t.blueMultiplier,this.alphaMultiplier*=t.alphaMultiplier,this._isDirty=this._isDirty||t._isDirty},t.prototype._isRenderable=function(){return 0!=this._rawData[3]||this._rawData[7]>0},t}(),P=function(t){function e(e,n){var i=t.call(this,e)||this;return i._transform=n,i}return o(e,t),Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._transform)},e.INVALIDATE_MATRIX3D="invalidateMatrix3D",e.INVALIDATE_COLOR_TRANSFORM="invalidateColorTransform",e}(c),B=function(t){function e(e,n){return void 0===e&&(e=null),void 0===n&&(n=0),t.call(this,e||"ArgumentError",n)||this}return o(e,t),e}(l),O=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._rawData=new Float32Array(2),this._rawData[0]=t,this._rawData[1]=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._rawData[0]},set:function(t){this._rawData[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._rawData[1]},set:function(t){this._rawData[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this._rawData[0]*this._rawData[0]+this._rawData[1]*this._rawData[1])},enumerable:!1,configurable:!0}),t.prototype.add=function(e){return new t(this._rawData[0]+e._rawData[0],this._rawData[1]+e._rawData[1])},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){this._rawData[0]=t._rawData[0],this._rawData[1]=t._rawData[1]},t.prototype.equals=function(t){return this._rawData[0]===t._rawData[0]&&this._rawData[1]==t._rawData[1]},t.prototype.normalize=function(t){void 0===t&&(t=1);var e=this.length;if((0!==this.x||0!==this.y)&&e){var n=t/e;this._rawData[0]*=n,this._rawData[1]*=n}},t.prototype.offset=function(t,e){this._rawData[0]+=t,this._rawData[1]+=e},t.prototype.setTo=function(t,e){this._rawData[0]=t,this._rawData[1]=e},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.toString=function(){return"[Point] (x="+this.x+", y="+this.y+")"},t.distance=function(t,e){var n=e.x-t.x,i=e.y-t.y;return 0===n?Math.abs(i):0===i?Math.abs(n):Math.sqrt(n*n+i*i)},t.interpolate=function(e,n,i){var r=1-i,o=e._rawData,a=n._rawData;return new t(o[0]*i+a[0]*r,o[1]*i+a[1]*r)},t.polar=function(e,n){return new t(e*Math.cos(n),e*Math.sin(n))},t}(),M=function(){function t(t,e,n,i,r,o){if(void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),this.rawData=new Float32Array(6),t instanceof Float32Array)this.copyRawDataFrom(t);else{var a=this.rawData;a[0]=Number(t),a[1]=e,a[2]=n,a[3]=i,a[4]=r,a[5]=o}}return Object.defineProperty(t.prototype,"a",{get:function(){return this.rawData[0]},set:function(t){this.rawData[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.rawData[1]},set:function(t){this.rawData[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"c",{get:function(){return this.rawData[2]},set:function(t){this.rawData[2]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"d",{get:function(){return this.rawData[3]},set:function(t){this.rawData[3]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tx",{get:function(){return this.rawData[4]},set:function(t){this.rawData[4]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ty",{get:function(){return this.rawData[5]},set:function(t){this.rawData[5]=t},enumerable:!1,configurable:!0}),t.prototype.copyRawDataFrom=function(t,e){void 0===e&&(e=0);var n=this.rawData;n[0]=t[e+0],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],n[4]=t[e+4],n[5]=t[e+5]},t.prototype.clone=function(){var e=this.rawData;return new t(e[0],e[1],e[2],e[3],e[4],e[5])},t.prototype.concat=function(t){var e=this.rawData,n=t.rawData,i=e[0]*n[0],r=0,o=0,a=e[3]*n[3],s=e[4]*n[0]+n[4],l=e[5]*n[3]+n[5];0===e[1]&&0===e[2]&&0===n[1]&&0===n[2]||(i+=e[1]*n[2],a+=e[2]*n[1],r+=e[0]*n[1]+e[1]*n[3],o+=e[2]*n[0]+e[3]*n[2],s+=e[5]*n[2],l+=e[4]*n[1]),e[0]=i,e[1]=r,e[2]=o,e[3]=a,e[4]=s,e[5]=l},t.prototype.copyColumnFrom=function(t,e){var n=this.rawData,i=e._rawData;if(t>2)throw"Column "+t+" out of bounds (2)";0==t?(n[0]=i[0],n[1]=i[1]):1==t?(n[2]=i[0],n[3]=i[1]):(n[4]=i[0],n[5]=i[1])},t.prototype.copyColumnTo=function(t,e){var n=this.rawData,i=e._rawData;if(t>2)throw new B("ArgumentError, Column "+t+" out of bounds [0, ..., 2]");0==t?(i[0]=n[0],i[1]=n[1],i[2]=0):1==t?(i[0]=n[2],i[1]=n[3],i[2]=0):(i[0]=n[4],i[1]=n[5],i[2]=1)},t.prototype.copyFrom=function(t){var e=this.rawData,n=t.rawData;e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5]},t.prototype.copyRowFrom=function(t,e){var n=this.rawData,i=e._rawData;if(t>2)throw new B("ArgumentError, Row "+t+" out of bounds [0, ..., 2]");0==t?(n[0]=i[0],n[2]=i[1],n[4]=i[2]):(n[1]=i[0],n[3]=i[1],n[5]=i[2])},t.prototype.copyRowTo=function(t,e){var n=this.rawData,i=e._rawData;if(t>2)throw new B("ArgumentError, Row "+t+" out of bounds [0, ..., 2]");0==t?(i[0]=n[0],i[1]=n[2],i[2]=n[4]):1==t?(i[0]=n[1],i[1]=n[3],i[2]=n[5]):(i[0]=0,i[1]=0,i[2]=1)},t.prototype.createBox=function(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0);var o=this.rawData;if(0!==n){var a=Math.cos(n),s=Math.sin(n);o[0]=a*t,o[1]=s*e,o[2]=-s*t,o[3]=a*e}else o[0]=t,o[1]=0,o[2]=0,o[3]=e;o[4]=i,o[5]=r},t.prototype.createGradientBox=function(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),this.createBox(t/1638.4,e/1638.4,n,i+t/2,r+e/2)},t.prototype.deltaTransformPoint=function(t){var e=this.rawData;return new O(t.x*e[0]+t.y*e[2],t.x*e[1]+t.y*e[3])},t.prototype.identity=function(){var t=this.rawData;t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0},t.prototype.invert=function(){var t=this.rawData,e=t[1],n=t[2],i=t[4],r=t[5];if(0===e&&0===n){var o=t[0]=1/t[0],a=t[3]=1/t[3];return t[1]=t[2]=0,t[4]=-o*i,void(t[5]=-a*r)}var s=t[0],l=t[3],u=s*l-e*n;if(0!==u){u=1/u;var c;c=t[0]=l*u,e=t[1]=-e*u,n=t[2]=-n*u,l=t[3]=s*u,t[4]=-(c*i+n*r),t[5]=-(e*i+l*r)}else this.identity()},t.prototype.multiply=function(e){var n=new t;return n.a=this.a*e.a+this.b*e.c,n.b=this.a*e.b+this.b*e.d,n.c=this.c*e.a+this.d*e.c,n.d=this.c*e.b+this.d*e.d,n.tx=this.tx*e.a+this.ty*e.c+e.tx,n.ty=this.tx*e.b+this.ty*e.d+e.ty,n},t.prototype.rotate=function(t){if(0!==t){var e=this.rawData,n=Math.cos(t),i=Math.sin(t),r=e[0],o=e[1],a=e[2],s=e[3],l=e[4],u=e[5];e[0]=r*n-o*i,e[1]=r*i+o*n,e[2]=a*n-s*i,e[3]=a*i+s*n,e[4]=l*n-u*i,e[5]=l*i+u*n}},t.prototype.scale=function(t,e){var n=this.rawData;1!==t&&(n[0]*=t,n[1]*=t,n[4]*=t),1!==e&&(n[2]*=e,n[3]*=e,n[5]*=e)},t.prototype.setTo=function(t,e,n,i,r,o){var a=this.rawData;a[0]=t,a[2]=e,a[1]=n,a[3]=i,a[4]=r,a[5]=o},t.prototype.toString=function(){return"[Matrix] (a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},t.prototype.transformPoint=function(t){var e=this.rawData;return new O(t.x*e[0]+t.y*e[2]+e[4],t.x*e[1]+t.y*e[3]+e[5])},t.prototype.translate=function(t,e){this.rawData[4]+=t,this.rawData[5]+=e},t}(),L=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),this._rawData=new Float32Array(4);var r=this._rawData;r[0]=t,r[1]=e,r[2]=n,r[3]=i}return Object.defineProperty(t.prototype,"x",{get:function(){return this._rawData[0]},set:function(t){this._rawData[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._rawData[1]},set:function(t){this._rawData[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._rawData[2]},set:function(t){this._rawData[2]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this._rawData[3]},set:function(t){this._rawData[3]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthSquared",{get:function(){var t=this._rawData;return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},enumerable:!1,configurable:!0}),t.prototype.add=function(e){var n=this._rawData,i=e._rawData;return new t(n[0]+i[0],n[1]+i[1],n[2]+i[2])},t.angleBetween=function(t,e){return Math.acos(t.dotProduct(e)/(t.length*e.length))},t.prototype.clone=function(){var e=this._rawData;return new t(e[0],e[1],e[2],e[3])},t.combine=function(e,n,i,r,o){var a=e._rawData,s=n._rawData;return(o=o||new t).setTo(a[0]*i+s[0]*r,a[1]*i+s[1]*r,a[2]*i+s[2]*r,1),o},t.prototype.copyFrom=function(t){var e=this._rawData,n=t._rawData;e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3]},t.prototype.crossProduct=function(e,n){void 0===n&&(n=null),null==n&&(n=new t);var i=this._rawData,r=e._rawData,o=n._rawData;return o[0]=i[1]*r[2]-i[2]*r[1],o[1]=i[2]*r[0]-i[0]*r[2],o[2]=i[0]*r[1]-i[1]*r[0],n},t.prototype.decrementBy=function(t){var e=this._rawData,n=t._rawData;e[0]-=n[0],e[1]-=n[1],e[2]-=n[2]},t.distance=function(t,e){var n=t._rawData,i=e._rawData,r=n[0]-i[0],o=n[1]-i[1],a=n[2]-i[2];return Math.sqrt(r*r+o*o+a*a)},t.prototype.dotProduct=function(t){var e=this._rawData,n=t._rawData;return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},t.prototype.equals=function(t,e){void 0===e&&(e=!1);var n=this._rawData,i=t._rawData;return n[0]==i[0]&&n[1]==i[1]&&n[2]==i[2]&&(!e||n[3]==i[3])},t.prototype.identity=function(){var t=this._rawData;t[0]=0,t[1]=0,t[2]=0,t[3]=1},t.prototype.incrementBy=function(t){var e=this._rawData,n=t._rawData;e[0]+=n[0],e[1]+=n[1],e[2]+=n[2]},t.prototype.nearEquals=function(t,e,n){void 0===n&&(n=!0);var i=this._rawData,r=t._rawData;return Math.abs(i[0]-r[0])<e&&Math.abs(i[1]-r[1])<e&&Math.abs(i[2]-r[2])<e&&(!n||Math.abs(i[3]-r[3])<e)},t.prototype.negate=function(){var t=this._rawData;t[0]=-t[0],t[1]=-t[1],t[2]=-t[2]},t.prototype.normalize=function(t){void 0===t&&(t=1);var e=this.length;if(e){var n=this._rawData,i=t/e;n[0]*=i,n[1]*=i,n[2]*=i}return e},t.prototype.project=function(){var t=this._rawData;t[0]/=t[3],t[1]/=t[3],t[2]/=t[3]},t.prototype.scaleBy=function(t){var e=this._rawData;e[0]*=t,e[1]*=t,e[2]*=t},t.prototype.setTo=function(t,e,n,i){void 0===i&&(i=1);var r=this._rawData;r[0]=t,r[1]=e,r[2]=n,r[3]=i},t.prototype.subtract=function(e){var n=this._rawData,i=e._rawData;return new t(n[0]-i[0],n[1]-i[1],n[2]-i[2])},t.prototype.toString=function(){var t=this._rawData;return"[Vector3D] (x:"+t[0]+" ,y:"+t[1]+", z"+t[2]+", w:"+t[3]+")"},t.X_AXIS=new t(1,0,0),t.Y_AXIS=new t(0,1,0),t.Z_AXIS=new t(0,0,1),t}(),R=function(){function t(t,e,n,i,r,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),this.x=t,this.y=e,this.z=n,this.width=i,this.height=r,this.depth=o}return Object.defineProperty(t.prototype,"back",{get:function(){return this.z+this.depth},set:function(t){this.depth=t-this.z},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomRightBack",{get:function(){return null==this._bottomRightBack&&(this._bottomRightBack=new L),this._bottomRightBack.x=this.x+this.width,this._bottomRightBack.y=this.y+this.height,this._bottomRightBack.z=this.z+this.depth,this._bottomRightBack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"front",{get:function(){return this.z},set:function(t){this.depth+=this.z-t,this.z=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return null==this._size&&(this._size=new L),this._size.x=this.width,this._size.y=this.height,this._size.z=this.depth,this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topLeftFront",{get:function(){return null==this._topLeftFront&&(this._topLeftFront=new L),this._topLeftFront.x=this.x,this._topLeftFront.y=this.y,this._topLeftFront.z=this.z,this._topLeftFront},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.width,this.height,this.depth)},t.prototype.contains=function(t,e,n){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e&&this.z<=n&&this.z+this.depth>=n},t.prototype.containsPoint=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y&&this.z<=t.z&&this.z+this.depth>=t.z},t.prototype.containsBox=function(t){return this.x<=t.x&&this.x+this.width>=t.x+t.width&&this.y<=t.y&&this.y+this.height>=t.y+t.height&&this.z<=t.z&&this.z+this.depth>=t.z+t.depth},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.width=t.width,this.height=t.height,this.depth=t.depth},t.prototype.equals=function(t){return this.x==t.x&&this.y==t.y&&this.z==t.z&&this.width==t.width&&this.height==t.height&&this.depth==t.depth},t.prototype.inflate=function(t,e,n){this.x-=t/2,this.y-=e/2,this.z-=n/2,this.width+=t/2,this.height+=e/2,this.depth+=n/2},t.prototype.inflatePoint=function(t){this.x-=t.x/2,this.y-=t.y/2,this.z-=t.z/2,this.width+=t.x/2,this.height+=t.y/2,this.depth+=t.z/2},t.prototype.intersection=function(e){if(this.intersects(e)){var n=new t;return this.x>e.x?(n.x=this.x,n.width=e.x-this.x+e.width,n.width>this.width&&(n.width=this.width)):(n.x=e.x,n.width=this.x-e.x+this.width,n.width>e.width&&(n.width=e.width)),this.y>e.y?(n.y=this.y,n.height=e.y-this.y+e.height,n.height>this.height&&(n.height=this.height)):(n.y=e.y,n.height=this.y-e.y+this.height,n.height>e.height&&(n.height=e.height)),this.z>e.z?(n.z=this.z,n.depth=e.z-this.z+e.depth,n.depth>this.depth&&(n.depth=this.depth)):(n.z=e.z,n.depth=this.z-e.z+this.depth,n.depth>e.depth&&(n.depth=e.depth)),n}return new t},t.prototype.intersects=function(t){return this.x+this.width>=t.x&&this.x<=t.x+t.width&&this.y+this.height>=t.y&&this.y<=t.y+t.height&&this.z+this.depth>=t.z&&this.z<=t.z+t.depth},t.prototype.rayIntersection=function(t,e,n){if(void 0===n&&(n=null),this.containsPoint(t))return 0;var i,r,o,a,s,l=this.width/2,u=this.height/2,c=this.depth/2,h=this.x+l,p=this.y+u,d=this.z+c,f=t.x-h,_=t.y-p,g=t.z-d,m=e.x,y=e.y,A=e.z;return m<0&&(a=(l-f)/m)>0&&(o=g+a*A,(r=_+a*y)>-u&&r<u&&o>-c&&o<c&&(n&&(n.x=1,n.y=0,n.z=0),s=!0)),!s&&m>0&&(a=(-l-f)/m)>0&&(o=g+a*A,(r=_+a*y)>-u&&r<u&&o>-c&&o<c&&(n&&(n.x=-1,n.y=0,n.z=0),s=!0)),!s&&y<0&&(a=(u-_)/y)>0&&(o=g+a*A,(i=f+a*m)>-l&&i<l&&o>-c&&o<c&&(n&&(n.x=0,n.y=1,n.z=0),s=!0)),!s&&y>0&&(a=(-u-_)/y)>0&&(o=g+a*A,(i=f+a*m)>-l&&i<l&&o>-c&&o<c&&(n&&(n.x=0,n.y=-1,n.z=0),s=!0)),!s&&A<0&&(a=(c-g)/A)>0&&(i=f+a*m,(r=_+a*y)>-u&&r<u&&i>-l&&i<l&&(n&&(n.x=0,n.y=0,n.z=1),s=!0)),!s&&A>0&&(a=(-c-g)/A)>0&&(i=f+a*m,(r=_+a*y)>-u&&r<u&&i>-l&&i<l&&(n&&(n.x=0,n.y=0,n.z=-1),s=!0)),s?a:-1},t.prototype.closestPointToPoint=function(t,e){var n;return void 0===e&&(e=null),null==e&&(e=new L),(n=t.x)<this.x&&(n=this.x),n>this.x+this.width&&(n=this.x+this.width),e.x=n,(n=t.y)<this.y+this.height&&(n=this.y+this.height),n>this.y&&(n=this.y),e.y=n,(n=t.z)<this.z&&(n=this.z),n>this.z+this.depth&&(n=this.z+this.depth),e.z=n,e},t.prototype.offset=function(t,e,n){this.x+=t,this.y+=e,this.z+=n},t.prototype.offsetPosition=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},t.prototype.identity=function(){this.x=0,this.y=0,this.z=0,this.width=0,this.height=0,this.depth=0},t.prototype.setTo=function(t,e,n,i,r,o){this.x=t,this.y=e,this.z=n,this.width=i,this.height=r,this.depth=o},t.prototype.toString=function(){return"[Box] (x="+this.x+", y="+this.y+", z="+this.z+", width="+this.width+", height="+this.height+", depth="+this.depth+")"},t.prototype.union=function(e,n){var i,r,o;return void 0===n&&(n=null),null==n&&(n=new t),null==e?(n.copyFrom(this),n):(this.x<e.x?(i=e.x-this.x+e.width,n.x=this.x,n.width=i<this.width?this.width:i):(i=this.x-e.x+this.width,n.x=e.x,n.width=i<e.width?e.width:i),this.y<e.y?(r=e.y-this.y+e.height,n.y=this.y,n.height=r<this.height?this.height:r):(r=this.y-e.y+this.height,n.y=e.y,n.height=r<e.height?e.height:r),this.z<e.z?(o=e.z-this.z+e.depth,n.z=this.z,n.depth=o<this.depth?this.depth:o):(o=this.z-e.z+this.depth,n.z=e.z,n.depth=o<e.depth?e.depth:o),n)},t}(),N=function(){function t(){}return t.RADIANS_TO_DEGREES=180/Math.PI,t.DEGREES_TO_RADIANS=Math.PI/180,t}(),F=function(){function t(){}return t.AXIS_ANGLE="axisAngle",t.EULER_ANGLES="eulerAngles",t.QUATERNION="quaternion",t}(),k=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=n,this.radius=i}return t.prototype.rayIntersection=function(t,e,n){if(this.containsPoint(t))return 0;var i,r=t.x-this.x,o=t.y-this.y,a=t.z-this.z,s=e.x,l=e.y,u=e.z,c=s*s+l*l+u*u,h=2*(r*s+o*l+a*u),p=h*h-4*c*(r*r+o*o+a*a-this.radius*this.radius);if(p>=0&&(i=(-h-Math.sqrt(p))/(2*c))>=0)return n.x=r+i*s,n.y=o+i*l,n.z=a+i*u,n.normalize(),i;return-1},t.prototype.containsPoint=function(t){var e=t.x-this.x,n=t.y-this.y,i=t.z-this.z;return Math.sqrt(e*e+n*n+i*i)<=this.radius},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.radius=t.radius},t.prototype.union=function(e,n){if(void 0===n&&(n=null),null==n&&(n=new t),null==e)return n.copyFrom(this),n;var i=e.x-this.x,r=e.y-this.y,o=e.z-this.z;return n.radius=(Math.sqrt(i*i+r*r+o*o)+e.radius+this.radius)/2,n.x=this.x+i/2,n.y=this.y+r/2,n.z=this.z+o/2,n},t.prototype.toString=function(){return"Sphere [x:"+this.x+", y:"+this.y+", z:"+this.z+", radius:"+this.radius+"]"},t}(),U=function(){function t(t){void 0===t&&(t=null),this._position=new L,this._positionDirty=!0,null!=t?this._rawData=t:(this._rawData=new Float32Array(16),this.identity())}return t.getAxisRotationMatrix=function(e,n,i,r,o){void 0===o&&(o=null),null==o&&(o=new t);var a,s,l=o._rawData,u=r*N.DEGREES_TO_RADIANS,c=Math.cos(u),h=Math.sin(u),p=1-c;return l[0]=c+e*e*p,l[5]=c+n*n*p,l[10]=c+i*i*p,a=e*n*p,s=i*h,l[1]=a+s,l[4]=a-s,a=e*i*p,s=n*h,l[8]=a+s,l[2]=a-s,a=n*i*p,s=e*h,l[9]=a-s,l[6]=a+s,l[3]=0,l[7]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,o.invalidatePosition(),o},t.getPointAtMatrix=function(e,n,i,r){var o;void 0===r&&(r=null),null==r&&(r=new t);var a=r._rawData,s=n.clone();s.normalize(),(o=i.clone()).normalize();var l=o.crossProduct(s);return l.normalize(),l.length<.05&&(l.x=o.y,l.y=o.x,l.z=0,l.normalize()),o=s.crossProduct(l),a[0]=l.x,a[1]=l.y,a[2]=l.z,a[3]=0,a[4]=o.x,a[5]=o.y,a[6]=o.z,a[7]=0,a[8]=s.x,a[9]=s.y,a[10]=s.z,a[11]=0,a[12]=l.dotProduct(e),a[13]=o.dotProduct(e),a[14]=s.dotProduct(e),a[15]=1,r.invalidatePosition(),r},t.getQuaternionMatrix=function(e,n){void 0===n&&(n=null),null==n&&(n=new t);var i=n._rawData,r=e.x,o=e.y,a=e.z,s=e.w,l=r*r,u=r*o,c=r*a,h=r*s,p=o*o,d=o*a,f=o*s,_=a*a,g=a*s;return i[0]=1-2*(p+_),i[1]=2*(u+g),i[2]=2*(c-f),i[4]=2*(u-g),i[5]=1-2*(l+_),i[6]=2*(d+h),i[8]=2*(c+f),i[9]=2*(d-h),i[10]=1-2*(l+p),i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,n.invalidatePosition(),n},t.compare=function(t,e){for(var n=t._rawData,i=e._rawData,r=0;r<16;++r)if(n[r]!=i[r])return!1;return!0},Object.defineProperty(t.prototype,"determinant",{get:function(){var t=this._rawData;return(t[0]*t[5]-t[4]*t[1])*(t[10]*t[15]-t[14]*t[11])-(t[0]*t[9]-t[8]*t[1])*(t[6]*t[15]-t[14]*t[7])+(t[0]*t[13]-t[12]*t[1])*(t[6]*t[11]-t[10]*t[7])+(t[4]*t[9]-t[8]*t[5])*(t[2]*t[15]-t[14]*t[3])-(t[4]*t[13]-t[12]*t[5])*(t[2]*t[11]-t[10]*t[3])+(t[8]*t[13]-t[12]*t[9])*(t[2]*t[7]-t[6]*t[3])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._positionDirty&&(this._positionDirty=!1,this._position.x=this._rawData[12],this._position.y=this._rawData[13],this._position.z=this._rawData[14]),this._position},enumerable:!1,configurable:!0}),t.prototype.append=function(t){var e=this._rawData,n=t._rawData,i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],_=e[12],g=e[13],m=e[14],y=e[15],A=n[0],v=n[1],b=n[2],x=n[3],C=n[4],I=n[5],E=n[6],w=n[7],S=n[8],D=n[9],T=n[10],P=n[11],B=n[12],O=n[13],M=n[14],L=n[15];e[0]=i*A+r*C+o*S+a*B,e[1]=i*v+r*I+o*D+a*O,e[2]=i*b+r*E+o*T+a*M,e[3]=i*x+r*w+o*P+a*L,e[4]=s*A+l*C+u*S+c*B,e[5]=s*v+l*I+u*D+c*O,e[6]=s*b+l*E+u*T+c*M,e[7]=s*x+l*w+u*P+c*L,e[8]=h*A+p*C+d*S+f*B,e[9]=h*v+p*I+d*D+f*O,e[10]=h*b+p*E+d*T+f*M,e[11]=h*x+p*w+d*P+f*L,e[12]=_*A+g*C+m*S+y*B,e[13]=_*v+g*I+m*D+y*O,e[14]=_*b+g*E+m*T+y*M,e[15]=_*x+g*w+m*P+y*L,this._positionDirty=!0},t.prototype.appendRotation=function(e,n){this.append(t.getAxisRotationMatrix(n.x,n.y,n.z,e,t._tempMatrix))},t.prototype.appendSkew=function(e,n,i){if(0!=e||0!=n||0!=i){var r=t._tempMatrix._rawData;r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=e,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=i,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this.append(t._tempMatrix)}},t.prototype.appendScale=function(e,n,i){if(1!=e||1!=n||1!=i){var r=t._tempMatrix._rawData;r[0]=e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=i,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this.append(t._tempMatrix)}},t.prototype.appendTranslation=function(t,e,n){var i=this._rawData,r=i[3],o=i[7],a=i[11],s=i[15];i[0]+=t*r,i[1]+=e*r,i[2]+=n*r,i[4]+=t*o,i[5]+=e*o,i[6]+=n*o,i[8]+=t*a,i[9]+=e*a,i[10]+=n*a,i[12]+=t*s,i[13]+=e*s,i[14]+=n*s,this._positionDirty=!0},t.prototype.clone=function(){var e=new t;return e.copyFrom(this),e},t.prototype.copyColumnFrom=function(t,e){if(t<0||t>3)throw new B("ArgumentError, Column "+t+" out of bounds [0, ..., 3]");var n=this._rawData,i=e._rawData;n[t*=4]=i[0],n[t+1]=i[1],n[t+2]=i[2],n[t+3]=i[3],this._positionDirty=!0},t.prototype.copyColumnTo=function(t,e,n){if(void 0===n&&(n=!1),t<0||t>3)throw new B("ArgumentError, Column "+t+" out of bounds [0, ..., 3]");t*=4;var i=this._rawData,r=e._rawData;n?(r[0]=-i[t],r[1]=-i[t+1],r[2]=-i[t+2],r[3]=-i[t+3]):(r[0]=i[t],r[1]=i[t+1],r[2]=i[t+2],r[3]=i[t+3])},t.prototype.copyFrom=function(t,e){void 0===e&&(e=!1);var n=t._rawData,i=this._rawData;i[0]=n[0],i[5]=n[5],i[10]=n[10],i[15]=n[15],e?(i[1]=n[4],i[2]=n[8],i[3]=n[12],i[4]=n[1],i[6]=n[9],i[7]=n[13],i[8]=n[2],i[9]=n[6],i[11]=n[14],i[12]=n[3],i[13]=n[7],i[14]=n[11]):(i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14]),this._positionDirty=!0},t.prototype.copyTo=function(t,e){void 0===e&&(e=!1),t.copyFrom(this,e)},t.prototype.copyRawDataFrom=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var i=this._rawData;i[0]=t[e+0],i[5]=t[e+5],i[10]=t[e+10],i[15]=t[e+15],n?(i[e+1]=t[4],i[e+2]=t[8],i[e+3]=t[12],i[e+4]=t[1],i[e+6]=t[9],i[e+7]=t[13],i[e+8]=t[2],i[e+9]=t[6],i[e+11]=t[14],i[e+12]=t[3],i[e+13]=t[7],i[e+14]=t[11]):(i[1]=t[e+1],i[2]=t[e+2],i[3]=t[e+3],i[4]=t[e+4],i[6]=t[e+6],i[7]=t[e+7],i[8]=t[e+8],i[9]=t[e+9],i[11]=t[e+11],i[12]=t[e+12],i[13]=t[e+13],i[14]=t[e+14]),this._positionDirty=!0},t.prototype.copyRawDataTo=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var i=this._rawData;t[e]=i[0],t[e+5]=i[5],t[e+10]=i[10],t[e+15]=i[15],n?(t[e+1]=i[4],t[e+2]=i[8],t[e+3]=i[12],t[e+4]=i[1],t[e+6]=i[9],t[e+7]=i[13],t[e+8]=i[2],t[e+9]=i[6],t[e+11]=i[14],t[e+12]=i[3],t[e+13]=i[7],t[e+14]=i[11]):(t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14])},t.prototype.copyRowFrom=function(t,e){if(t<0||t>3)throw new B("ArgumentError, Row "+t+" out of bounds [0, ..., 3]");var n=this._rawData,i=e._rawData;n[t]=i[0],n[t+4]=i[1],n[t+8]=i[2],n[t+12]=i[3],this._positionDirty=!0},t.prototype.copyRowTo=function(t,e,n){if(void 0===n&&(n=!1),t<0||t>3)throw new B("ArgumentError, Row "+t+" out of bounds [0, ..., 3]");var i=this._rawData,r=e._rawData;n?(r[0]=-i[t],r[1]=-i[t+4],r[2]=-i[t+8],r[3]=-i[t+12]):(r[0]=i[t],r[1]=i[t+4],r[2]=i[t+8],r[3]=i[t+12])},t.prototype.decompose=function(e){void 0===e&&(e="eulerAngles"),null==this._components&&(this._components=[new L,new L,new L,new L]);var n=t.COL_X;n.setTo(this._rawData[0],this._rawData[1],this._rawData[2]);var i=t.COL_Y;i.setTo(this._rawData[4],this._rawData[5],this._rawData[6]);var r=t.COL_Z;r.setTo(this._rawData[8],this._rawData[9],this._rawData[10]);var o=this._components[3],a=this._components[2];o.x=n.length,o.x&&n.scaleBy(1/o.x),a.x=n.dotProduct(i),L.combine(i,n,1,-a.x,i),o.y=i.length,o.y&&(i.scaleBy(1/o.y),a.x/=o.y),a.y=n.dotProduct(r),L.combine(r,n,1,-a.y,r),a.z=i.dotProduct(r),L.combine(r,i,1,-a.z,r),o.z=r.length,o.z&&(r.scaleBy(1/o.z),a.y/=o.z,a.z/=o.z),n.dotProduct(i.crossProduct(r))<0&&(o.z=-o.z,r.x=-r.x,r.y=-r.y,r.z=-r.z);var s=this._components[1];switch(e){case F.AXIS_ANGLE:s.w=Math.acos((n.x+i.y+r.z-1)/2);var l=Math.sqrt((i.z-r.y)*(i.z-r.y)+(r.x-n.z)*(r.x-n.z)+(n.y-i.x)*(n.y-i.x));s.x=l?(i.z-r.y)/l:0,s.y=l?(r.x-n.z)/l:0,s.z=l?(n.y-i.x)/l:0;break;case F.QUATERNION:var u=n.x+i.y+r.z;u>0?(s.w=Math.sqrt(1+u)/2,s.x=(i.z-r.y)/(4*s.w),s.y=(r.x-n.z)/(4*s.w),s.z=(n.y-i.x)/(4*s.w)):n.x>i.y&&n.x>r.z?(s.x=Math.sqrt(1+n.x-i.y-r.z)/2,s.w=(i.z-r.y)/(4*s.x),s.y=(n.y+i.x)/(4*s.x),s.z=(r.x+n.z)/(4*s.x)):i.y>r.z?(s.y=Math.sqrt(1+i.y-n.x-r.z)/2,s.x=(n.y+i.x)/(4*s.y),s.w=(r.x-n.z)/(4*s.y),s.z=(i.z+r.y)/(4*s.y)):(s.z=Math.sqrt(1+r.z-n.x-i.y)/2,s.x=(r.x+n.z)/(4*s.z),s.y=(i.z+r.y)/(4*s.z),s.w=(n.y-i.x)/(4*s.z));break;case F.EULER_ANGLES:s.y=Math.asin(-n.z),1!=n.z&&-1!=n.z?(s.x=Math.atan2(i.z,r.z),s.z=Math.atan2(n.y,n.x)):(s.z=0,s.x=Math.atan2(i.x,i.y))}return this._components[0].copyFrom(this.position),this._components},t.prototype.deltaTransformVector=function(t,e){void 0===e&&(e=null);var n=t.x,i=t.y,r=t.z;e||(e=new L);var o=this._rawData,a=e._rawData;return a[0]=n*o[0]+i*o[4]+r*o[8],a[1]=n*o[1]+i*o[5]+r*o[9],a[2]=n*o[2]+i*o[6]+r*o[10],a[3]=n*o[3]+i*o[7]+r*o[11],e},t.prototype.deltaTransformVectors=function(t,e){for(var n=this._rawData,i=n[0],r=n[1],o=n[2],a=n[4],s=n[5],l=n[6],u=n[8],c=n[9],h=n[10],p=0,d=t.length,f=0;f<d;f+=3){var _=t[f],g=t[f+1],m=t[f+2];e[p++]=i*_+a*g+u*m,e[p++]=r*_+s*g+c*m,e[p++]=o*_+l*g+h*m}},t.prototype.identity=function(){var t=this._rawData;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this._positionDirty=!0},t.prototype.invert=function(){var t=this.determinant,e=Math.abs(t)>1e-11,n=this._rawData;if(e){t=1/t;var i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],p=n[9],d=n[10],f=n[11],_=n[12],g=n[13],m=n[14],y=n[15];n[0]=t*(l*(d*y-m*f)-p*(u*y-m*c)+g*(u*f-d*c)),n[1]=-t*(r*(d*y-m*f)-p*(o*y-m*a)+g*(o*f-d*a)),n[2]=t*(r*(u*y-m*c)-l*(o*y-m*a)+g*(o*c-u*a)),n[3]=-t*(r*(u*f-d*c)-l*(o*f-d*a)+p*(o*c-u*a)),n[4]=-t*(s*(d*y-m*f)-h*(u*y-m*c)+_*(u*f-d*c)),n[5]=t*(i*(d*y-m*f)-h*(o*y-m*a)+_*(o*f-d*a)),n[6]=-t*(i*(u*y-m*c)-s*(o*y-m*a)+_*(o*c-u*a)),n[7]=t*(i*(u*f-d*c)-s*(o*f-d*a)+h*(o*c-u*a)),n[8]=t*(s*(p*y-g*f)-h*(l*y-g*c)+_*(l*f-p*c)),n[9]=-t*(i*(p*y-g*f)-h*(r*y-g*a)+_*(r*f-p*a)),n[10]=t*(i*(l*y-g*c)-s*(r*y-g*a)+_*(r*c-l*a)),n[11]=-t*(i*(l*f-p*c)-s*(r*f-p*a)+h*(r*c-l*a)),n[12]=-t*(s*(p*m-g*d)-h*(l*m-g*u)+_*(l*d-p*u)),n[13]=t*(i*(p*m-g*d)-h*(r*m-g*o)+_*(r*d-p*o)),n[14]=-t*(i*(l*m-g*u)-s*(r*m-g*o)+_*(r*u-l*o)),n[15]=t*(i*(l*d-p*u)-s*(r*d-p*o)+h*(r*u-l*o))}return this._positionDirty=!0,e},t.prototype.isIdentity=function(){var t=this._rawData;return 1==t[0]&&0==t[1]&&0==t[2]&&0==t[3]&&0==t[4]&&1==t[5]&&0==t[6]&&0==t[7]&&0==t[8]&&0==t[9]&&1==t[10]&&0==t[11]&&0==t[12]&&0==t[13]&&0==t[14]&&1==t[15]},t.prototype.prepend=function(t){var e=this._rawData,n=t._rawData,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],p=n[9],d=n[10],f=n[11],_=n[12],g=n[13],m=n[14],y=n[15],A=e[0],v=e[1],b=e[2],x=e[3],C=e[4],I=e[5],E=e[6],w=e[7],S=e[8],D=e[9],T=e[10],P=e[11],B=e[12],O=e[13],M=e[14],L=e[15];e[0]=i*A+r*C+o*S+a*B,e[1]=i*v+r*I+o*D+a*O,e[2]=i*b+r*E+o*T+a*M,e[3]=i*x+r*w+o*P+a*L,e[4]=s*A+l*C+u*S+c*B,e[5]=s*v+l*I+u*D+c*O,e[6]=s*b+l*E+u*T+c*M,e[7]=s*x+l*w+u*P+c*L,e[8]=h*A+p*C+d*S+f*B,e[9]=h*v+p*I+d*D+f*O,e[10]=h*b+p*E+d*T+f*M,e[11]=h*x+p*w+d*P+f*L,e[12]=_*A+g*C+m*S+y*B,e[13]=_*v+g*I+m*D+y*O,e[14]=_*b+g*E+m*T+y*M,e[15]=_*x+g*w+m*P+y*L,this._positionDirty=!0},t.prototype.prependRotation=function(e,n){this.prepend(t.getAxisRotationMatrix(n.x,n.y,n.z,e,t._tempMatrix))},t.prototype.prependScale=function(e,n,i){if(1!=e||1!=n||1!=i){var r=t._tempMatrix._rawData;r[0]=e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=i,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this.prepend(t._tempMatrix)}},t.prototype.prependTranslation=function(e,n,i){var r=t._tempMatrix._rawData;r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e,r[13]=n,r[14]=i,r[15]=1,this.prepend(t._tempMatrix)},t.prototype.recompose=function(e){var n=e[0]||this.position;this.identity();var i=e[3];!i||1==i.x&&1==i.y&&1==i.z||this.appendScale(i.x,i.y,i.z);var r,o,a=e[2];!a||0==a.x&&0==a.y&&0==a.z||this.appendSkew(a.x,a.y,a.z);var s=t._tempMatrix._rawData;s[12]=0,s[13]=0,s[14]=0,s[15]=0;var l=e[1];if(l){var u=-l.x;0!=u&&(r=Math.sin(u),o=Math.cos(u),s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=o,s[6]=-r,s[7]=0,s[8]=0,s[9]=r,s[10]=o,s[11]=0,this.append(t._tempMatrix)),0!=(u=-l.y)&&(r=Math.sin(u),o=Math.cos(u),s[0]=o,s[1]=0,s[2]=r,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=-r,s[9]=0,s[10]=o,s[11]=0,this.append(t._tempMatrix)),0!=(u=-l.z)&&(r=Math.sin(u),o=Math.cos(u),s[0]=o,s[1]=-r,s[2]=0,s[3]=0,s[4]=r,s[5]=o,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,this.append(t._tempMatrix))}return this._rawData[12]=n.x,this._rawData[13]=n.y,this._rawData[14]=n.z,e[0]&&(this._positionDirty=!0),this._rawData[15]=1,!0},t.prototype.reflect=function(t){var e=t.a,n=t.b,i=t.c,r=t.d,o=-2*e*n,a=-2*e*i,s=-2*n*i,l=this._rawData;l[0]=1-2*e*e,l[4]=o,l[8]=a,l[12]=-2*e*r,l[1]=o,l[5]=1-2*n*n,l[9]=s,l[13]=-2*n*r,l[2]=a,l[6]=s,l[10]=1-2*i*i,l[14]=-2*i*r,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this._positionDirty=!0},t.prototype.transformBox=function(t,e){if(void 0===e&&(e=null),null==t)throw new B("ArgumentError, box cannot be null");e||(e=new R);var n=t.width/2,i=t.height/2,r=t.depth/2,o=t.x+n,a=t.y+i,s=t.z+r,l=this._rawData[0],u=this._rawData[4],c=this._rawData[8],h=this._rawData[12],p=this._rawData[1],d=this._rawData[5],f=this._rawData[9],_=this._rawData[13],g=this._rawData[2],m=this._rawData[6],y=this._rawData[10],A=o*l+a*u+s*c+h,v=o*p+a*d+s*f+_,b=o*g+a*m+s*y+this._rawData[14],x=Math.max(Math.abs(n*l+i*u+r*c),Math.abs(-n*l+i*u+r*c),Math.abs(n*l-i*u+r*c),Math.abs(n*l+i*u-r*c)),C=Math.max(Math.abs(n*p+i*d+r*f),Math.abs(-n*p+i*d+r*f),Math.abs(n*p-i*d+r*f),Math.abs(n*p+i*d-r*f)),I=Math.max(Math.abs(n*g+i*m+r*y),Math.abs(-n*g+i*m+r*y),Math.abs(n*g-i*m+r*y),Math.abs(n*g+i*m-r*y));return e.width=2*x,e.height=2*C,e.depth=2*I,e.x=A-x,e.y=v-C,e.z=b-I,e},t.prototype.transformSphere=function(t,e){if(void 0===e&&(e=null),null==t)throw new B("ArgumentError, sphere cannot be null");var n=new R(t.x-t.radius,t.y-t.radius,t.z-t.radius,2*t.radius,2*t.radius,2*t.radius);return this.transformBox(n,n),e||(e=new k),e.x=n.x+n.width/2,e.y=n.y+n.height/2,e.z=n.z+n.depth/2,e.radius=Math.max(n.width,n.height,n.depth),e},t.prototype.transformVector=function(t,e){if(void 0===e&&(e=null),null==t)throw new B("ArgumentError, vector cannot be null");var n=t.x,i=t.y,r=t.z,o=t.w;e||(e=new L);var a=this._rawData,s=e._rawData;return s[0]=n*a[0]+i*a[4]+r*a[8]+o*a[12],s[1]=n*a[1]+i*a[5]+r*a[9]+o*a[13],s[2]=n*a[2]+i*a[6]+r*a[10]+o*a[14],s[3]=n*a[3]+i*a[7]+r*a[11]+o*a[15],e},t.prototype.transformVectors=function(t,e){for(var n=0,i=0,r=0,o=0,a=this._rawData;n+3<=t.length;)i=t[n],r=t[n+1],o=t[n+2],e[n]=i*a[0]+r*a[4]+o*a[8]+a[12],e[n+1]=i*a[1]+r*a[5]+o*a[9]+a[13],e[n+2]=i*a[2]+r*a[6]+o*a[10]+a[14],n+=3},t.prototype.transpose=function(){var e=this._rawData,n=t._tempMatrix._rawData;this.copyRawDataTo(n,0,!0),e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],this._positionDirty=!0},t.prototype.invalidatePosition=function(){this._positionDirty=!0},t.prototype.toFixed=function(t){var e=Math.pow(10,t);return"matrix3d("+Math.round(this._rawData[0]*e)/e+","+Math.round(this._rawData[1]*e)/e+","+Math.round(this._rawData[2]*e)/e+","+Math.round(this._rawData[3]*e)/e+","+Math.round(this._rawData[4]*e)/e+","+Math.round(this._rawData[5]*e)/e+","+Math.round(this._rawData[6]*e)/e+","+Math.round(this._rawData[7]*e)/e+","+Math.round(this._rawData[8]*e)/e+","+Math.round(this._rawData[9]*e)/e+","+Math.round(this._rawData[10]*e)/e+","+Math.round(this._rawData[11]*e)/e+","+Math.round(this._rawData[12]*e)/e+","+Math.round(this._rawData[13]*e)/e+","+Math.round(this._rawData[14]*e)/e+","+Math.round(this._rawData[15]*e)/e+")"},t.prototype.toString=function(){return"matrix3d("+Math.round(1e3*this._rawData[0])/1e3+","+Math.round(1e3*this._rawData[1])/1e3+","+Math.round(1e3*this._rawData[2])/1e3+","+Math.round(1e3*this._rawData[3])/1e3+","+Math.round(1e3*this._rawData[4])/1e3+","+Math.round(1e3*this._rawData[5])/1e3+","+Math.round(1e3*this._rawData[6])/1e3+","+Math.round(1e3*this._rawData[7])/1e3+","+Math.round(1e3*this._rawData[8])/1e3+","+Math.round(1e3*this._rawData[9])/1e3+","+Math.round(1e3*this._rawData[10])/1e3+","+Math.round(1e3*this._rawData[11])/1e3+","+Math.round(1e3*this._rawData[12])/1e3+","+Math.round(1e3*this._rawData[13])/1e3+","+Math.round(1e3*this._rawData[14])/1e3+","+Math.round(1e3*this._rawData[15])/1e3+")"},t.CALCULATION_MATRIX=new t,t._tempMatrix=new t,t.COL_X=new L,t.COL_Y=new L,t.COL_Z=new L,t}(),V=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._inverseMatrix3D=new U,n._matrix=null,n._rotation=new L,n._scale=new L(1,1,1),n._skew=new L,n._rawData=e||new Float32Array(24),n._matrix3D=new U(new Float32Array(n._rawData.buffer,0,16)),n._colorTransform=new T(new Float32Array(n._rawData.buffer,64,8)),null==e&&(n._matrix3D.identity(),n._colorTransform.clear()),n._components=new Array(4),n._components[1]=n._rotation,n._components[2]=n._skew,n._components[3]=n._scale,n.invalidateComponents(),n}return o(e,t),Object.defineProperty(e.prototype,"backVector",{get:function(){return this._backVector||(this._backVector=new L),this._matrix3D.copyColumnTo(2,this._backVector,!0),this._backVector},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorTransform",{get:function(){return this._colorTransform},set:function(t){if(t){var e=t._rawData,n=this._colorTransform._rawData;n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7]}else this._colorTransform.clear();this.invalidateColorTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inverseMatrix3D",{get:function(){return this._inverseMatrix3DDirty&&(this._inverseMatrix3DDirty=!1,this._inverseMatrix3D.copyFrom(this.matrix3D),this._inverseMatrix3D.invert()),this._inverseMatrix3D},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"downVector",{get:function(){return this._downVector||(this._downVector=new L),this._matrix3D.copyColumnTo(1,this._downVector,!0),this._downVector},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forwardVector",{get:function(){return this._forwardVector||(this._forwardVector=new L),this._matrix3D.copyColumnTo(2,this._forwardVector),this._forwardVector},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftVector",{get:function(){return this._leftVector||(this._leftVector=new L),this._matrix3D.copyColumnTo(0,this._backVector,!0),this._leftVector},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return this._matrix||(this._matrix=new M),this._matrix3DDirty&&this.updateMatrix3D(),this._matrix.a=this._matrix3D._rawData[0],this._matrix.b=this._matrix3D._rawData[1],this._matrix.c=this._matrix3D._rawData[4],this._matrix.d=this._matrix3D._rawData[5],this._matrix.tx=this._matrix3D._rawData[12],this._matrix.ty=this._matrix3D._rawData[13],this._matrix},set:function(t){t&&(this._matrix3D.identity(),this._matrix3D._rawData[0]=t.a,this._matrix3D._rawData[1]=t.b,this._matrix3D._rawData[4]=t.c,this._matrix3D._rawData[5]=t.d,this._matrix3D._rawData[12]=t.tx,this._matrix3D._rawData[13]=t.ty,this.invalidateComponents(),this._matrix3DDirty=!1,this._inverseMatrix3DDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrix3D",{get:function(){return this._matrix3DDirty&&this.updateMatrix3D(),this._matrix3D},set:function(t){if(t){var e=t._rawData,n=this._matrix3D._rawData;n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]}else this._matrix3D.identity();this.invalidateComponents(),this._matrix3DDirty=!1,this._inverseMatrix3DDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelBounds",{get:function(){return this._pixelBounds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._matrix3D.position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightVector",{get:function(){return this._rightVector||(this._rightVector=new L),this._matrix3D.copyColumnTo(0,this._rightVector),this._rightVector},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._componentsDirty&&this._updateComponents(),this._rotation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._componentsDirty&&this._updateComponents(),this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this._componentsDirty&&this._updateComponents(),this._skew},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"upVector",{get:function(){return this._upVector||(this._upVector=new L),this._matrix3D.copyColumnTo(1,this._upVector),this._upVector},enumerable:!1,configurable:!0}),e.prototype.append=function(t){console.log("append(".concat(t,") is not implemented yet in core/Transform"))},e.prototype.clearColorTransform=function(){this._colorTransform&&(this._colorTransform.clear(),this.invalidateColorTransform())},e.prototype.clearMatrix3D=function(){this._matrix3D.identity(),this.invalidateComponents()},e.prototype.clone=function(){var t=new e;return this.copyRawDataTo(t),t},e.prototype.copyRawDataTo=function(t){this._matrix3DDirty&&this.updateMatrix3D();var e=t._rawData,n=this._rawData;e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e[16]=n[16],e[17]=n[17],e[18]=n[18],e[19]=n[19],e[20]=n[20],e[21]=n[21],e[22]=n[22],e[23]=n[23],this.invalidateComponents(),this.invalidateColorTransform()},e.prototype.dispose=function(){},e.prototype.invalidateColorTransform=function(){this._invalidateColorTransform||(this._invalidateColorTransform=new P(P.INVALIDATE_COLOR_TRANSFORM,this)),this.dispatchEvent(this._invalidateColorTransform)},e.prototype.invalidateComponents=function(){this.invalidatePosition(),this._componentsDirty=!0},e.prototype.invalidateMatrix3D=function(){this._inverseMatrix3DDirty=!0,this._matrix3DDirty||(this._matrix3DDirty=!0,this._invalidateMatrix3D||(this._invalidateMatrix3D=new P(P.INVALIDATE_MATRIX3D,this)),this.dispatchEvent(this._invalidateMatrix3D))},e.prototype.invalidatePosition=function(){this._inverseMatrix3DDirty=!0,this._matrix3D.invalidatePosition(),this._invalidateMatrix3D||(this._invalidateMatrix3D=new P(P.INVALIDATE_MATRIX3D,this)),this.dispatchEvent(this._invalidateMatrix3D)},e.prototype.lookAt=function(t,e){void 0===e&&(e=null),null==e&&(e=L.Y_AXIS);var n=U.getPointAtMatrix(new L,t.subtract(this._matrix3D.position),e,U.CALCULATION_MATRIX).decompose()[1];this.rotateTo(n.x,n.y,n.z)},e.prototype.moveBackward=function(t){this.translateLocal(L.Z_AXIS,-t)},e.prototype.moveDown=function(t){this.translateLocal(L.Y_AXIS,-t)},e.prototype.moveForward=function(t){this.translateLocal(L.Z_AXIS,t)},e.prototype.moveLeft=function(t){this.translateLocal(L.X_AXIS,-t)},e.prototype.moveRight=function(t){this.translateLocal(L.X_AXIS,t)},e.prototype.moveTo=function(t,e,n){this._matrix3D._rawData[12]=t,this._matrix3D._rawData[13]=e,this._matrix3D._rawData[14]=n,this.invalidatePosition()},e.prototype.moveUp=function(t){this.translateLocal(L.Y_AXIS,t)},e.prototype.pitch=function(t){this.rotate(L.X_AXIS,t)},e.prototype.roll=function(t){this.rotate(L.Z_AXIS,t)},e.prototype.rotate=function(t,e){this.matrix3D.prependRotation(e,t),this.invalidateComponents()},e.prototype.rotateTo=function(t,e,n){this._componentsDirty&&this._updateComponents(),this._rotation.x=t,this._rotation.y=e,this._rotation.z=n,this.invalidateMatrix3D()},e.prototype.scaleTo=function(t,e,n){this._componentsDirty&&this._updateComponents(),this._scale.x=t,this._scale.y=e,this._scale.z=n,this.invalidateMatrix3D()},e.prototype.skewTo=function(t,e,n){this._componentsDirty&&this._updateComponents(),this._skew.x=t,this._skew.y=e,this._skew.z=n,this.invalidateMatrix3D()},e.prototype.translate=function(t,e){var n=t.x,i=t.y,r=t.z,o=e/Math.sqrt(n*n+i*i+r*r);this.matrix3D.appendTranslation(n*o,i*o,r*o),this.invalidatePosition()},e.prototype.translateLocal=function(t,e){var n=t.x,i=t.y,r=t.z,o=e/Math.sqrt(n*n+i*i+r*r);this.matrix3D.prependTranslation(n*o,i*o,r*o),this.invalidatePosition()},e.prototype.updateMatrix3D=function(){this._matrix3D.recompose(this._components),this._matrix3DDirty=!1},e.prototype.yaw=function(t){this.rotate(L.Y_AXIS,t)},e.prototype._updateComponents=function(){var t,e=this._matrix3D.decompose();t=e[1],this._rotation.x=t.x,this._rotation.y=t.y,this._rotation.z=t.z,t=e[2],this._skew.x=t.x,this._skew.y=t.y,this._skew.z=t.z,t=e[3],this._scale.x=t.x,this._scale.y=t.y,this._scale.z=t.z,this._componentsDirty=!1},e}(p),j=function(t){function e(e,n){return void 0===e&&(e=""),void 0===n&&(n=0),t.call(this,"PartialImplementationError - this function is in development. Required Dependency: "+e,n)||this}return o(e,t),e}(l),G=function(t){function e(e,n){return void 0===e&&(e=null),void 0===n&&(n=0),t.call(this,e||"RangeError",n)||this}return o(e,t),e}(l),Q=function(t){function e(e,n,i,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null);var o=t.call(this,e)||this;return o._url=n,o._content=i,o._assets=r,o}return o(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assets",{get:function(){return this._assets},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._url,this._content,this._assets)},e.LOADER_START="loaderStart",e.LOADER_COMPLETE="loaderComplete",e}(c),z=function(t){function e(e,n){void 0===n&&(n="");var i=t.call(this,e)||this;return i._message=n,i}return o(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._message)},e.PARSE_COMPLETE="parseComplete",e.PARSE_ERROR="parseError",e.READY_FOR_DEPENDENCIES="readyForDependencies",e}(c),H=function(t){function e(e,n){var i=t.call(this,e)||this;return i._projection=n,i}return o(e,t),Object.defineProperty(e.prototype,"projection",{get:function(){return this._projection},enumerable:!1,configurable:!0}),e.INVALIDATE_FRUSTUM_MATRIX3D="invalidateFrustumMatrix3D",e.INVALIDATE_VIEW_MATRIX3D="invalidateViewMatrix3D",e}(c),X=function(t){function e(e,n){var i=t.call(this,e)||this;return i._urlLoader=n,i}return o(e,t),Object.defineProperty(e.prototype,"urlLoader",{get:function(){return this._urlLoader},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._urlLoader)},e.HTTP_STATUS="httpStatus",e.LOAD_ERROR="loadError",e.LOAD_PROGRESS="loadProgress",e.LOAD_START="loadStart",e.LOAD_COMPLETE="loadComplete",e}(c),Y=function(){function t(){}return t.BACK=0,t.FRONT=1,t.IN=0,t.OUT=1,t.INTERSECT=2,t}(),q=function(){function t(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),this.a=e,this.b=n,this.c=i,this.d=r,this._iAlignment=0==e&&0==n?t.ALIGN_XY_AXIS:0==n&&0==i?t.ALIGN_YZ_AXIS:0==e&&0==i?t.ALIGN_XZ_AXIS:t.ALIGN_ANY}return t.prototype.fromPoints=function(e,n,i){var r=n.x-e.x,o=n.y-e.y,a=n.z-e.z,s=i.x-e.x,l=i.y-e.y,u=i.z-e.z;this.a=o*u-a*l,this.b=a*s-r*u,this.c=r*l-o*s,this.d=this.a*e.x+this.b*e.y+this.c*e.z,0==this.a&&0==this.b?this._iAlignment=t.ALIGN_XY_AXIS:0==this.b&&0==this.c?this._iAlignment=t.ALIGN_YZ_AXIS:0==this.a&&0==this.c?this._iAlignment=t.ALIGN_XZ_AXIS:this._iAlignment=t.ALIGN_ANY},t.prototype.fromNormalAndPoint=function(e,n){this.a=e.x,this.b=e.y,this.c=e.z,this.d=this.a*n.x+this.b*n.y+this.c*n.z,0==this.a&&0==this.b?this._iAlignment=t.ALIGN_XY_AXIS:0==this.b&&0==this.c?this._iAlignment=t.ALIGN_YZ_AXIS:0==this.a&&0==this.c?this._iAlignment=t.ALIGN_XZ_AXIS:this._iAlignment=t.ALIGN_ANY},t.prototype.normalize=function(){var t=1/Math.sqrt(this.a*this.a+this.b*this.b+this.c*this.c);return this.a*=t,this.b*=t,this.c*=t,this.d*=t,this},t.prototype.distance=function(e){return this._iAlignment==t.ALIGN_YZ_AXIS?this.a*e.x-this.d:this._iAlignment==t.ALIGN_XZ_AXIS?this.b*e.y-this.d:this._iAlignment==t.ALIGN_XY_AXIS?this.c*e.z-this.d:this.a*e.x+this.b*e.y+this.c*e.z-this.d},t.prototype.classifyPoint=function(e,n){return void 0===n&&(n=.01),this.d!=this.d?Y.FRONT:(i=this._iAlignment==t.ALIGN_YZ_AXIS?this.a*e.x-this.d:this._iAlignment==t.ALIGN_XZ_AXIS?this.b*e.y-this.d:this._iAlignment==t.ALIGN_XY_AXIS?this.c*e.z-this.d:this.a*e.x+this.b*e.y+this.c*e.z-this.d)<-n?Y.BACK:i>n?Y.FRONT:Y.INTERSECT;var i},t.prototype.toString=function(){return"Plane3D [a:"+this.a+", b:"+this.b+", c:"+this.c+", d:"+this.d+"]"},t.ALIGN_ANY=0,t.ALIGN_XY_AXIS=1,t.ALIGN_YZ_AXIS=2,t.ALIGN_XZ_AXIS=3,t}(),K=function(){function t(){}return t.initDistributions=function(){this._distributions=new Array,this._distributions[0]=new Array(.3082841,.4320919),this._distributions[1]=new Array(.3082841,.4320919,-.2274942,-.6640266),this._distributions[2]=new Array(.8742689,.0009265686,-.6864116,-.5536607,-.2325206,.7678371),this._distributions[3]=new Array(.3913446,-.7084417,-.7511101,-.5935929,-.2323436,.5320091,.8435315,.5035911),this._distributions[4]=new Array(.2122471,-.5771395,-.8543506,-.1763534,.5189021,.8323698,-.3616908,.5865368,.9523004,-.04948437),this._distributions[5]=new Array(.5791035,.3496495,.2959551,-.6006749,-.2419119,-.06879545,-.7403072,.6110353,-.04555973,.8059174,-.5275017,-.737129),this._distributions[6]=new Array(.06941478,.8519508,-.7441907,.2426432,.6439992,-.2405252,-.1007523,-.2327587,-.6427067,-.7248485,.8050759,.5492936,.3573822,-.8824506),this._distributions[7]=new Array(.8509863,.4452587,-.09507271,.2073005,.1706571,-.6434793,.8029777,-.2718274,-.4401725,.8196304,.2715359,.8598521,-.8121575,-.006447683,-.6486837,-.7237598),this._distributions[8]=new Array(.6951686,-.2680728,-.04933243,.3710589,.6592212,.3661054,-.01579228,-.6909603,-.3275101,-.1756866,.3811549,.9218544,-.216032,.9755028,-.7065172,.3355389,-.6579109,-.6798355),this._distributions[9]=new Array(.6181276,-.09790418,-.2537868,-.5570995,-.1964931,.3459414,.3474613,-.8885581,.5135743,.5753114,-.9549091,.1480672,-.8711916,-.4293123,-.6928071,.6190156,-.13369,.8892705,.0548224,-.1246777),this._distributions[10]=new Array(.4853027,-.5080479,-.1331675,-.506597,.139575,.01316885,.803486,-.07568797,.5240274,.4883182,-.4334005,.1207938,-.7794577,-.3985141,.1576432,-.9861221,-.3712867,.6959021,.1517378,.9847429,-.9762396,.1661073),this._distributions[11]=new Array(-.2790166,-.01252619,.3389016,.3921154,.2408341,-.313211,-.8151779,-.3898362,-.6347761,.3486495,.09471484,-.7722448,-.1385674,.6364574,.2456331,.9295807,-.3864306,-.8247881,.6111673,-.7164014,.8287669,.05466961,.837706,.5415626),this._distributions[12]=new Array(.056417,.3185693,-.8245888,.1882799,.8575996,.1136829,.1070375,.875332,.4076743,-.06000621,-.4311306,.7239349,.2677574,-.538472,-.08486642,-.2083647,-.888989,-.3906443,-.4768958,-.6664082,.09334993,-.9861541,.808736,-.455949,.5889823,.7660807),this._distributions[13]=new Array(-.2681346,-.3955857,-.1315102,-.8852947,-.5143692,.09551838,.4344836,-.546945,-.8620899,-.3813288,.1650431,.02034803,-.1543657,.3842218,-.828457,.5376903,-.6145,-.7818927,-.2639062,.8784655,.1912684,.9720125,.3135219,.5224229,.7850655,.4592297,.7465045,-.1368916),this._distributions[14]=new Array(.4241029,.695281,.150511,-.02304107,-.2482675,.9120338,.8057325,.2622084,-.2445909,.2765962,.8588713,-.1772072,.3117845,-.4385471,-.3923851,-.3298936,-.1751254,-.7405846,.6926506,-.684163,-.9304563,-.3254691,-.8533293,.1523024,.2510415,-.917345,-.6239773,-.7105472,-.6104624,.6041355),this._distributions[15]=new Array(.5844554,.06651045,.1343258,.6756578,.3799674,-.6301104,.5590436,.7940555,.09574714,.02262517,.8697868,.393301,.003945862,-.421735,.9043913,-.2432393,-.4844007,.7190998,-.3201078,.2972371,-.3852352,-.6341155,-.5413069,-.09223081,-.8468984,-.5126905,.004156174,-.8633173,-.9681889,-.03305046,-.846509,.4414353),this._distributions[16]=new Array(.4506488,.657668,.4621297,.07441051,-.2782125,.6201044,.9750003,.09110117,.1019436,.2986514,.03457398,.9631706,.542098,-.5505635,.8675668,.4938077,-.5414361,.2655292,-.7941836,.6003053,-.09847672,-.1001604,-.9316511,-.08572888,.07286467,-.611899,-.5232627,-.4082253,-.5481608,-.827938,-.1551939,-.9621193,.9220031,-.3315949),this._distributions[17]=new Array(.197908,-.4697656,-.4474689,-.3428435,.8529873,-.2228634,.6022478,-.5469642,.2545276,-.931133,-.1507547,-.7855865,-.07606658,.1011628,.3046715,.2785755,.4698432,-.1064076,.6831254,.4152522,.1374381,.8363233,-.2166121,.6682042,.5511393,.7996449,-.4278994,.28836,-.8875198,.2181732,-.8772842,-.2818254,-.7000262,.5762185,-.6062385,-.7439126),this._distributions[18]=new Array(.6645703,-.05678739,.5720971,.4533803,-.07660709,.08802763,.5163431,-.4426552,.1163455,-.3404382,-.4004807,-.5046007,.2932099,-.8201418,-.5322125,.03834766,-.1490209,-.8817304,-.8000439,-.3509448,.5260983,.8421043,.1197811,.6963812,.9498612,.3122156,-.9285746,.02120355,-.6670724,.7217396,.9155889,-.3510147,-.271941,.4727852,.318879,.1634057,-.2686755,.9253026),this._distributions[19]=new Array(.5064292,.422527,.8935515,-.06610427,.1199719,.175568,.403388,-.2003276,.1657927,.8154403,.9301245,.2929218,-.1644068,.6201534,.7113559,-.6589743,-.3364046,-.1799502,.02109996,-.392765,-.382213,.3219992,-.9201946,.1207967,-.726185,.4291916,-.7443482,-.2480059,-.5147594,.7418784,.1935272,-.7406143,-.3643523,-.5559214,-.7147766,-.6326278,-.2524151,-.9096627,.5161405,.7908453),this._distributions[20]=new Array(.7921003,-.3032096,.5992879,-.009052323,.2538549,-.1872749,.7053444,.3677175,.5417761,-.8170255,.9749611,.1210478,.1969143,-.6117041,-.1824499,-.4634196,-.1181338,-.8668742,-.3050112,-.1352596,-.4409327,-.7082354,-.03225285,.1171548,.3113096,.3250439,-.8166144,-.463995,-.01014475,.4715334,-.6868284,.05091889,-.4011163,.2717285,-.06756835,.8307694,-.7938535,.4352129,-.4663842,.7165329,.559729,.8093995),this._distributions[21]=new Array(.07832243,.426151,-.3856795,.5799953,.01970797,.06706189,.4822682,.3014512,-.1532982,.87485,-.4959527,.07888043,.260601,-.2304784,.4996209,.7167382,.585986,-.04265174,-.7679967,.5509416,-.9041753,.1802134,-.8407655,-.4442826,-.2058258,-.2636995,-.4984115,-.5928579,.2926032,-.7886473,-.06933882,-.621177,.578115,-.4813387,.8981777,-.3291056,.1942733,.9255584,.8084362,.5066984,.9920095,.03103104,-.2403206,-.9389018),this._distributions[22]=new Array(-.5691095,.1014316,-.7788262,.384012,-.8253665,-.1645582,-.1830993,.002997211,-.2555013,-.4177977,-.6640869,-.4794711,-.2351242,.5850121,.02436554,.2825883,.006061143,-.8200245,.1618791,-.3063331,-.3765897,-.7249815,.6092919,-.6769328,-.5956934,.6957655,.5383642,.4522677,-.1489165,.9125596,.4167473,.1335986,.1898309,.5874342,.2288171,.9624356,.7540846,-.07672304,.8986252,.2788797,.3555991,-.9262139,.8454325,-.4027667,.4945236,-.2935512),this._distributions[23]=new Array(-.4481403,-.3758374,-.8877251,.08739938,.05015831,-.1339983,-.4070427,-.8534173,.1019274,-.5503222,-.445998,.1997541,-.8686263,-.2788867,-.7695944,-.6033704,-.05515742,-.885711,-.7714347,.5790485,.3466263,-.8799297,.4487582,-.5321087,-.2461368,.6053771,-.05568117,.2457351,-.4668669,.8523816,.8103387,-.4255538,.4054182,-.175663,-.2802011,-.08920153,.2665959,.382935,.555679,.1621837,.105246,.8420411,.6921161,.6902903,.880946,.2483067,.9699264,-.1021767),this._distributions[24]=new Array(-.1703323,-.3119385,.2916039,-.2988263,-.008472982,-.9277695,-.7730271,-.3277904,.3440474,-.6815342,-.2910278,.03461745,-.6764899,-.657078,-.3505501,-.7311988,-.03478927,.3258755,-.6048835,.159423,.2035525,.02212214,.5116573,.2226856,.6664805,-.2500189,.7147882,-.6609634,.03030632,-.5763278,-.2516585,.6116219,-.9434413,-.0116792,.9061816,.2491155,.182867,.6076167,.286593,.9485695,-.5992439,.6970096,-.2082874,.9416641,.9880044,-.1541709,-.9122881,.331555,.7324886,.6725098),this._distributions[25]=new Array(.3869598,-.04974834,.7168844,-.0693711,-.07166742,.1725325,.4599592,.3232779,.5872094,-.4198674,.2442266,-.625667,.1254557,.4500048,-.2290154,-.1803567,.890583,.3373493,.1256081,.7853789,-.2676466,.5305805,-.7063224,.252168,-.3989835,.1189921,.09617215,-.2451447,.6302541,.6085876,.9380925,-.3234899,.5086241,-.8573482,.03576187,-.9876697,-.0876712,-.6365195,-.5276513,.823456,-.6935764,-.2240411,-.5212318,-.5383121,-.2116208,.9639363,-.9840096,.02743555,-.3991577,-.8994547,-.7830126,.614068),this._distributions[26]=new Array(-.8366601,.4464895,-.5917366,-.02073906,-.9845258,.1635625,-.3097973,.4379579,-.5478154,.7173221,-.1685888,.9261969,.01503595,.6046097,.4452421,.5449086,.0315687,.1944619,.3753404,.8688548,.4143643,.1396648,.8711032,.4304703,.7328773,.1461501,.6374492,-.3521495,.145613,-.1341466,.9040975,-.135123,-.7839059,-.5450199,-.516019,-.3320859,-.206158,-.4431106,-.9703014,-.2368356,-.2473119,-.0864351,.2130725,-.4604077,-.003726701,-.7122303,-.4072131,-.6833169,.1632999,-.9776646,.4686888,-.680495,-.2293511,-.9509777),this._distributions[27]=new Array(.107311,-.1311369,-.4194764,-.3148777,.6171439,-.2745973,.2796618,.1937153,-.09106886,.4180236,.6044006,.05577846,.02927299,-.6738263,-.2580845,.1179939,-.09023564,-.3830024,.3570953,-.5000587,.81591,-.5518309,.9300217,-.1257987,.4904627,-.8381903,-.3163182,-.8632009,.1137595,-.9875998,.8390043,.3538185,.2149114,.4993694,.5191584,.3833552,.5002763,.7061465,-.2567276,.9068756,-.5197366,.3467845,.03668867,.9734009,-.5347553,.66747,-.9028882,.1023768,-.8967977,.412834,-.5821944,.0426479,-.8032165,-.2397038,-.5597343,-.6358021),this._distributions[28]=new Array(-.6562496,-.1781036,-.9301494,.1185208,-.3861143,-.4153562,-.1560799,-.1099607,-.5587025,.395218,-.5322112,-.699701,-.5008639,.08726846,-.970524,-.1963461,-.813577,-.5185111,-.1644458,.298,-.3216791,.639982,.3315373,.3339162,.2383235,-.00105722,.1137828,.5450742,-.01899921,.8798413,.2849685,.8255596,.6974412,.2123175,.7588523,.5470437,.5102502,-.1687844,.5853448,.8033476,.2590716,-.5262504,.5607718,-.6342825,.8666443,-.1491841,.8341052,-.4935003,-.1568441,-.6634066,.2512113,-.8769391,-.2559827,-.9572457,-.01928852,-.3966542,-.750667,.6409678),this._distributions[29]=new Array(.3454786,-.04837726,.2649553,.2406852,.5599093,-.3839145,-.1111814,-.05502108,.7586042,-.05818377,.2519488,-.4665135,-.1264972,.2602723,-.08766216,-.3671907,.6428129,.3999204,-.6105871,-.1246869,-.4589451,-.7646643,-.03021116,-.7899352,-.6036922,-.4293956,-.2481938,.6534185,.102798,.6784465,-.6392644,.4821358,-.6789002,.1779133,-.9140783,-.1989647,-.9262617,.3381507,.4794891,-.8093274,.3959447,.668478,.9602883,.2272305,-.123672,.9210883,.2375148,.9523395,-.52898,.7973378,-.382433,.1228794,.695015,.6948439,.7530277,-.6458191,.8777987,-.3272956,.2318525,-.962768),this._distributions[30]=new Array(.4518921,-.1146195,.4720805,-.4238748,.3655423,.1806341,.1589939,-.23568,.7673324,-.5149941,.01163658,.09045836,.7010971,.1245747,.7518286,-.1855433,.4960719,.4601022,.2566979,-.6308268,-.0654714,-.5126389,-.1823319,-.1343282,-.1464312,.4883236,-.3858738,.203523,.1484799,.4432284,-.477109,-.116241,.2719092,.7208626,.9104174,.3578536,-.5956199,.7662588,-.6996251,.3678654,-.2514512,.9251933,.1275825,-.9478135,-.204608,-.8611552,.4264838,-.877443,.9854161,.05521112,.5912951,.7997434,.1140349,.982093,-.9324368,-.2094094,-.42436,-.6441524,-.6722705,-.3554261,-.7844236,.08587621),this._distributions[31]=new Array(-.4206714,-.5613642,-.8733016,-.3373051,-.1046226,-.2902999,-.1318562,-.8434365,.1145093,-.5962623,-.4965627,-.1873259,-.5011808,-.8546229,-.7165636,-.5743566,.1090901,.2017643,.3404809,-.220455,-.1989015,.2372122,-.4538706,.0979171,.4514146,-.572846,.2314168,-.8514503,-.4247236,.5650803,-.943347,.04514639,-.1309718,.5221877,-.7004157,.4561877,.6306441,.04448673,.4301621,.5766876,.1078042,.7245752,.3875354,.2794483,.702876,-.2924213,.7360667,-.6210318,.7486517,.6531103,.4898235,.8591025,.6549174,.3854057,-.2596106,.7916998,.9251194,-.05296265,-.5620695,.820877,-.01228026,.9937211,.9612103,.2628758)},t.getDistribution=function(t){return this._distributions||this.initDistributions(),t<1||t>32?null:this._distributions[t-1]},t}(),W=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this._rawData=new Float32Array(4);var r=this._rawData;r[0]=t,r[1]=e,r[2]=n,r[3]=i}return t.prototype.axCallPublicProperty=function(t,e){return null},t.prototype.axGetPublicProperty=function(t){return null},t.prototype.axSetPublicProperty=function(t){return null},Object.defineProperty(t.prototype,"height",{get:function(){return this._rawData[3]},set:function(t){this._rawData[3]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._rawData[2]},set:function(t){this._rawData[2]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._rawData[0]},set:function(t){this._rawData[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._rawData[1]},set:function(t){this._rawData[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this._rawData[1]+this._rawData[3]},set:function(t){this._rawData[3]=t-this._rawData[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return null==this._bottomRight&&(this._bottomRight=new O),this._bottomRight._rawData[0]=this._rawData[0]+this._rawData[2],this._bottomRight._rawData[1]=this._rawData[1]+this._rawData[3],this._bottomRight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._rawData[0]},set:function(t){this._rawData[2]+=this._rawData[0]-t,this._rawData[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._rawData[0]+this._rawData[2]},set:function(t){this._rawData[2]=t-this._rawData[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return null==this._size&&(this._size=new O),this._size._rawData[0]=this._rawData[2],this._size._rawData[1]=this._rawData[3],this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._rawData[1]},set:function(t){this._rawData[3]+=this._rawData[1]-t,this._rawData[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return null==this._topLeft&&(this._topLeft=new O),this._topLeft._rawData[0]=this._rawData[0],this._topLeft._rawData[1]=this._rawData[1],this._topLeft},enumerable:!1,configurable:!0}),t.prototype.clone=function(){var e=this._rawData;return new t(e[0],e[1],e[2],e[3])},t.prototype.contains=function(t,e){var n=this._rawData;return n[0]<=t&&n[0]+n[2]>=t&&n[1]<=e&&n[1]+n[3]>=e},t.prototype.containsPoint=function(t){var e=this._rawData,n=t._rawData;return e[0]<=n[0]&&e[0]+e[2]>=n[0]&&e[1]<=n[1]&&e[1]+e[3]>=n[1]},t.prototype.containsRect=function(t){var e=this._rawData,n=t._rawData;return e[0]<=n[0]&&e[0]+e[2]>=n[0]+n[2]&&e[1]<=n[1]&&e[1]+e[3]>=n[1]+n[3]},t.prototype.copyFrom=function(t){var e=this._rawData,n=t._rawData;e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3]},t.prototype.equals=function(t){var e=this._rawData,n=t._rawData;return e[0]==n[0]&&e[1]==n[1]&&e[2]==n[2]&&e[3]==n[3]},t.prototype.inflate=function(t,e){var n=this._rawData;n[0]-=t/2,n[1]-=e/2,n[2]+=t/2,n[3]+=e/2},t.prototype.inflatePoint=function(t){var e=this._rawData;e[0]-=t.x/2,e[1]-=t.y/2,e[2]+=t.x/2,e[3]+=t.y/2},t.prototype.intersection=function(e){var n=this._rawData,i=e._rawData;if(this.intersects(e)){var r=new t,o=r._rawData;return n[0]>i[0]?(o[0]=n[0],o[2]=i[0]-n[0]+i[2],o[2]>n[2]&&(o[2]=n[2])):(o[0]=i[0],o[2]=n[0]-i[0]+n[2],o[2]>i[2]&&(o[2]=i[2])),n[1]>i[1]?(o[1]=n[1],o[3]=i[1]-n[1]+i[3],o[3]>n[3]&&(o[3]=n[3])):(o[1]=i[1],o[3]=n[1]-i[1]+n[3],o[3]>i[3]&&(o[3]=i[3])),r}return new t},t.prototype.intersects=function(t){var e=this._rawData,n=t._rawData;return e[0]+e[2]>n[0]&&e[0]<n[0]+n[2]&&e[1]+e[3]>n[1]&&e[1]<n[1]+n[3]},t.prototype.isEmpty=function(){var t=this._rawData;return 0==t[0]&&0==t[1]&&0==t[2]&&0==t[3]},t.prototype.offset=function(t,e){this._rawData[0]+=t,this._rawData[1]+=e},t.prototype.offsetPoint=function(t){this._rawData[0]+=t.x,this._rawData[1]+=t.y},t.prototype.setEmpty=function(){var t=this._rawData;t[0]=0,t[1]=0,t[2]=0,t[3]=0},t.prototype.setTo=function(t,e,n,i){var r=this._rawData;r[0]=t,r[1]=e,r[2]=n,r[3]=i},t.prototype.toString=function(){return"[Rectangle] (x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},t.prototype.union=function(e){var n=this._rawData,i=e._rawData,r=new t,o=r._rawData;return n[0]<i[0]?(o[0]=n[0],o[2]=i[0]-n[0]+i[2],o[2]<n[2]&&(o[2]=n[2])):(o[0]=i[0],o[2]=n[0]-i[0]+n[2],o[2]<i[2]&&(o[2]=i[2])),n[1]<i[1]?(o[1]=n[1],o[3]=i[1]-n[1]+i[3],o[3]<n[3]&&(o[3]=n[3])):(o[1]=i[1],o[3]=n[1]-i[1]+n[3],o[3]<i[3]&&(o[3]=i[3])),r},t}(),J=function(t){function e(e,n){var i=t.call(this)||this;return i._invalid=!0,i._asset=e,i._pool=n,i._onClearDelegate=function(t){return i.onClear(t)},i._onInvalidateDelegate=function(t){return i.onInvalidate(t)},i._asset.addEventListener(h.CLEAR,i._onClearDelegate),i._asset.addEventListener(h.INVALIDATE,i._onInvalidateDelegate),i}return o(e,t),e.prototype.onClear=function(t){this._asset.removeEventListener(h.CLEAR,this._onClearDelegate),this._asset.removeEventListener(h.INVALIDATE,this._onInvalidateDelegate),this._asset.clearAbstraction(this._pool),this._pool=null,this._asset=null},e.prototype.onInvalidate=function(t){this._invalid=!0},e}(_),Z=function(){function t(t,e,n,i){this._assets=t,this.filter(e,n,i)}return Object.defineProperty(t.prototype,"currentAsset",{get:function(){return this._idx<this._filtered.length?this._filtered[this._idx]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numAssets",{get:function(){return this._filtered.length},enumerable:!1,configurable:!0}),t.prototype.next=function(){var t=null;return this._idx<this._filtered.length&&(t=this._filtered[this._idx]),this._idx++,t},t.prototype.reset=function(){this._idx=0},t.prototype.setIndex=function(t){this._idx=t},t.prototype.filter=function(t,e,n){if(t||e){var i=void 0,r=void 0;i=0,this._filtered=new Array;for(var o=this._assets.length,a=0;a<o;a++)r=this._assets[a],t&&r.adaptee.assetType!=t||e&&r.adaptee.assetNamespace!=e||(null==n||n(r))&&(this._filtered[i++]=r)}else this._filtered=this._assets},t}(),$=function(){function t(){}return t.FAVOR_OLD="favorOld",t.FAVOR_NEW="favorNew",t}(),tt=function(){function t(){}return t.prototype.resolveConflict=function(t,e,n,i){throw new u},t.prototype.create=function(){throw new u},t.prototype._pUpdateNames=function(t,e,n,i,r,o){var a=o===$.FAVOR_NEW?i:n,s=o===$.FAVOR_NEW?n:i,l=s.adaptee.name;r[a.adaptee.name]=a,r[e]=s,s.adaptee.resetAssetPath(e,t,!1),s.adaptee.dispatchEvent(new h(h.ASSET_CONFLICT_RESOLVED,s.adaptee,l))},t}(),et=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.resolveConflict=function(t,e,n,i){throw new l("Asset name collision while AssetLibrary.namingStrategy set to AssetLibrary.THROW_ERROR. Asset path: "+t.adaptee.assetNamespace+"."+t.adaptee.name)},e.prototype.create=function(){return new e},e}(tt),nt=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.resolveConflict=function(t,e,n,i){},e.prototype.create=function(){return new e},e}(tt),it=function(t){function e(e){void 0===e&&(e=".");var n=t.call(this)||this;return n._separator=e,n._next_suffix={},n}return o(e,t),e.prototype.resolveConflict=function(t,e,n,i){var r,o,a,s=t.adaptee.name;s.indexOf(this._separator)>=0?(o=s.substring(0,s.lastIndexOf(this._separator)),a=parseInt(s.substring(o.length-1)),isNaN(a)&&(o=s,a=0)):(o=s,a=0),0==a&&this._next_suffix.hasOwnProperty(o)&&(a=this._next_suffix[o]);do{a++,r=o.concat(this._separator,a.toString())}while(n.hasOwnProperty(r));this._next_suffix[o]=a,this._pUpdateNames(e.adaptee.assetNamespace,r,e,t,n,i)},e.prototype.create=function(){return new e(this._separator)},e}(tt),rt=function(){function t(t){}return t.APPEND_NUM_SUFFIX=new it,t.IGNORE=new nt,t.THROW_ERROR=new et,t}(),ot=function(){function t(){}return t.TEXT="text",t.VARIABLES="variables",t.BLOB="blob",t.ARRAY_BUFFER="arraybuffer",t.BINARY="binary",t}(),at=function(){function t(){}return t.POST="POST",t.GET="GET",t}(),st=function(){function t(t){void 0===t&&(t=null),this._variables=new Object,null!==t&&this.decode(t)}return t.prototype.decode=function(t){t=t.split("+").join(" ");for(var e,n=/[?&]?([^=]+)=([^&]*)/g;e=n.exec(t);)this._variables[decodeURIComponent(e[1])]=decodeURIComponent(e[2])},t.prototype.toString=function(){return""},Object.defineProperty(t.prototype,"variables",{get:function(){return this._variables},set:function(t){this._variables=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formData",{get:function(){var t=new FormData;for(var e in this._variables)t.append(e,this._variables[e]);return t},enumerable:!1,configurable:!0}),t}(),lt=function(t){function e(){var e=t.call(this)||this;return e._bytesLoaded=0,e._bytesTotal=0,e._dataFormat=ot.TEXT,e._loadError=!1,e}return o(e,t),Object.defineProperty(e.prototype,"url",{get:function(){return this._request?this._request.url:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataFormat",{get:function(){return this._dataFormat},set:function(t){this._dataFormat=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesLoaded",{get:function(){return this._bytesLoaded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesTotal",{get:function(){return this._bytesTotal},enumerable:!1,configurable:!0}),e.prototype.load=function(t){this._request=t,this.initXHR(),t.method===at.POST?this.postRequest(t):this.getRequest(t)},e.prototype.isSupported=function(){return null!=window},e.prototype.close=function(){this._XHR.abort(),this.disposeXHR()},e.prototype.dispose=function(){this._XHR&&this._XHR.abort(),this.disposeXHR()},e.prototype.setResponseType=function(t,e){switch(e){case ot.ARRAY_BUFFER:case ot.BLOB:case ot.TEXT:t.responseType=e;break;case ot.VARIABLES:t.responseType=ot.TEXT;break;case ot.BINARY:t.responseType=""}},e.prototype.getRequest=function(t){try{this._XHR.open(t.method,t.url,t.async),this.setResponseType(this._XHR,this._dataFormat),this._XHR.send()}catch(t){this.handleXmlHttpRequestException(t)}},e.prototype.postRequest=function(t){if(this._loadError=!1,this._XHR.open(t.method,t.url,t.async),null!=t.data)if(t.data instanceof st){var e=t.data;try{this._XHR.responseType="text",this._XHR.send(e.formData)}catch(t){this.handleXmlHttpRequestException(t)}}else this.setResponseType(this._XHR,this._dataFormat),t.data?this._XHR.send(t.data):this._XHR.send();else this._XHR.send()},e.prototype.handleXmlHttpRequestException=function(t){t.code},e.prototype.initXHR=function(){var t=this;this._XHR||(this._XHR=new XMLHttpRequest,this._XHR.onloadstart=function(e){return t.onLoadStart(e)},this._XHR.onprogress=function(e){return t.onProgress(e)},this._XHR.onabort=function(e){return t.onAbort(e)},this._XHR.onerror=function(e){return t.onLoadError(e)},this._XHR.onload=function(e){return t.onLoadComplete(e)},this._XHR.ontimeout=function(e){return t.onTimeOut(e)},this._XHR.onloadend=function(e){return t.onLoadEnd(e)},this._XHR.onreadystatechange=function(e){return t.onReadyStateChange(e)})},e.prototype.disposeXHR=function(){null!==this._XHR&&(this._XHR.onloadstart=null,this._XHR.onprogress=null,this._XHR.onabort=null,this._XHR.onerror=null,this._XHR.onload=null,this._XHR.ontimeout=null,this._XHR.onloadend=null,this._XHR=null)},e.prototype.decodeURLVariables=function(t){var e=new Object;t=t.split("+").join(" ");for(var n,i=/[?&]?([^=]+)=([^&]*)/g;n=i.exec(t);)e[decodeURIComponent(n[1])]=decodeURIComponent(n[2]);return e},e.prototype.onReadyStateChange=function(t){4==this._XHR.readyState&&(this._status=this._XHR.status,404==this._status&&(this._loadError=!0,this.dispatchEvent(this._loadErrorEvent||(this._loadErrorEvent=new X(X.LOAD_ERROR,this)))),this.dispatchEvent(this._statusEvent||(this._statusEvent=new X(X.HTTP_STATUS,this))))},e.prototype.onLoadEnd=function(t){this._loadError},e.prototype.onTimeOut=function(t){},e.prototype.onAbort=function(t){},e.prototype.onProgress=function(t){this._bytesTotal=t.total,this._bytesLoaded=t.loaded,this.dispatchEvent(this._progressEvent||(this._progressEvent=new X(X.LOAD_PROGRESS,this)))},e.prototype.onLoadStart=function(t){this.dispatchEvent(this._loadStartEvent||(this._loadStartEvent=new X(X.LOAD_START,this)))},e.prototype.onLoadComplete=function(t){if(!0!==this._loadError){switch(this._dataFormat){case ot.TEXT:this._data=this._XHR.responseText;break;case ot.VARIABLES:this._data=this.decodeURLVariables(this._XHR.responseText);break;case ot.BLOB:case ot.ARRAY_BUFFER:case ot.BINARY:this._data=this._XHR.response;break;default:this._data=this._XHR.responseText}this.dispatchEvent(this._loadCompleteEvent||(this._loadCompleteEvent=new X(X.LOAD_COMPLETE,this)))}},e.prototype.onLoadError=function(t){this._loadError=!0,this.dispatchEvent(this._loadErrorEvent||(this._loadErrorEvent=new X(X.LOAD_ERROR,this)))},e}(p),ut=function(){function t(t,e,n,i,r,o,a,s){void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===s&&(s=0),this._assets=[],this._dependencies=[],this._id=t,this._sub_id=s,this._request=e,this._data=n,this._parser=i,this._parentParser=r,this._retrieveAsRawData=o,this._suppressAssetEvents=a}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sub_id",{get:function(){return this._sub_id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"request",{get:function(){return this._request},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentParser",{get:function(){return this._parentParser},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"retrieveAsRawData",{get:function(){return this._retrieveAsRawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suppresAssetEvents",{get:function(){return this._suppressAssetEvents},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assets",{get:function(){return this._assets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dependencies",{get:function(){return this._dependencies},enumerable:!1,configurable:!0}),t.prototype.setData=function(t){this._data=t},t.prototype.setParser=function(t){this._parser=t},t.prototype.resolve=function(){this._parentParser&&this._parentParser.resolveDependency(this)},t.prototype.resolveFailure=function(){this._parentParser&&this._parentParser.resolveDependencyFailure(this)},t.prototype.resolveName=function(t){return this._parentParser?this._parentParser.resolveDependencyName(this,t):t.name},t}(),ct=function(){function t(e,n){void 0===e&&(e=!0),void 0===n&&(n=null),this._includeDependencies=e,this._dependencyBaseUrl=n||"",this._embeddedDataByUrl={},this._remappedUrls={},this._materialMode=t.UNDEFINED,this._externalAssetMode=t.PRELOADED}return Object.defineProperty(t.prototype,"includeDependencies",{get:function(){return this._includeDependencies},set:function(t){this._includeDependencies=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"materialMode",{get:function(){return this._materialMode},set:function(t){this._materialMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"externalAssetMode",{get:function(){return this._externalAssetMode},set:function(t){this._externalAssetMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dependencyBaseUrl",{get:function(){return this._dependencyBaseUrl},set:function(t){this._dependencyBaseUrl=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"overrideAbsolutePaths",{get:function(){return this._overrideAbsPath},set:function(t){this._overrideAbsPath=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"overrideFullURLs",{get:function(){return this._overrideFullUrls},set:function(t){this._overrideFullUrls=t},enumerable:!1,configurable:!0}),t.prototype.mapUrl=function(t,e){this._remappedUrls[t]=e},t.prototype.mapUrlToData=function(t,e){this._embeddedDataByUrl[t]=e},t.prototype._iHasDataForUrl=function(t){return this._embeddedDataByUrl.hasOwnProperty(t)},t.prototype._iGetDataForUrl=function(t){return this._embeddedDataByUrl[t]},t.prototype._iHasMappingForUrl=function(t){return this._remappedUrls.hasOwnProperty(t)},t.prototype._iGetRemappedUrl=function(t){return this._remappedUrls[t]},t.UNDEFINED=0,t.SINGLEPASS_MATERIALS=1,t.MULTIPASS_MATERIALS=2,t.ON_DEMAND="onDemand",t.PRELOADED="preloaded",t}(),ht=function(t){function e(e){void 0===e&&(e=0);var n=t.call(this)||this;return n._materialMode=e,n._stack=new Array,n._onReadyForDependenciesDelegate=function(t){return n._onReadyForDependencies(t)},n._onParseCompleteDelegate=function(t){return n._onParseComplete(t)},n._onParseErrorDelegate=function(t){return n._onParseError(t)},n._onLoadProgressDelegate=function(t){return n._onLoadProgress(t)},n._onLoadCompleteDelegate=function(t){return n._onLoadComplete(t)},n._onLoadErrorDelegate=function(t){return n._onLoadError(t)},n._onTextureSizeErrorDelegate=function(t){return n._onTextureSizeError(t)},n._onAssetCompleteDelegate=function(t){return n._onAssetComplete(t)},n}return o(e,t),e.enableParser=function(t){e._parsers.indexOf(t)<0&&e._parsers.push(t)},e.enableParsers=function(t){for(var n=0;n<t.length;n++)e.enableParser(t[n])},Object.defineProperty(e.prototype,"baseDependency",{get:function(){return this._baseDependency},enumerable:!1,configurable:!0}),e.prototype.load=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this._uri=t.url=t.url.replace(/\\/g,"/"),this._context=e,this._namespace=n,this.dispatchEvent(new Q(Q.LOADER_START,this._uri,null,null)),this._baseDependency=new ut("",t,null,i,null),this._retrieveDependency(this._baseDependency)},e.prototype.loadData=function(t,e,n,i,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),this._uri=i,this._context=n,this._namespace=i,this.dispatchEvent(new Q(Q.LOADER_START,this._uri,null,null)),this._baseDependency=new ut(e,null,t,r,null),this._retrieveDependency(this._baseDependency)},e.prototype._retrieveNext=function(t){if(void 0===t&&(t=null),this._currentDependency.dependencies.length){var e=this._currentDependency.dependencies.pop();this._stack.push(this._currentDependency),this._retrieveDependency(e)}else if(this._currentDependency.parser&&this._currentDependency.parser.parsingPaused)this._currentDependency.parser.resumeParsing();else if(this._stack&&this._stack.length){var n=this._currentDependency;this._currentDependency=this._stack.pop(),n.success&&n.resolve(),this._retrieveNext(t)}else this.dispatchEvent(new Q(Q.LOADER_COMPLETE,this._uri,this._baseDependency.parser.content,this._baseDependency.assets))},e.prototype._retrieveDependency=function(t){var e;this._context&&0!=this._context.materialMode&&(this._materialMode=this._context.materialMode),this._currentDependency=t,e=t.data,this._context&&t.request&&(this._context._iHasDataForUrl(t.request.url)?e=this._context._iGetDataForUrl(t.request.url):this._context.externalAssetMode!=ct.ON_DEMAND||"jpg"!=this.getSuffix(t.request.url)&&"png"!=this.getSuffix(t.request.url)||(e=t.request,t.parser||t.setParser(this.getParserFromSuffix(t.request.url)))),e?(e.constructor===Function&&(e=new e),t.setData(e),t.retrieveAsRawData?(t.resolve(),this._retrieveNext()):this._parseDependency(t)):(t.loader=new lt,this._addEventListeners(t.loader),t.request.url=this.resolveDependencyUrl(t),t.retrieveAsRawData?t.loader.dataFormat=ot.BINARY:(t.parser||t.setParser(this.getParserFromSuffix(t.request.url)),t.parser?t.loader.dataFormat=t.parser.dataFormat:t.loader.dataFormat=ot.BINARY),t.loader.load(t.request))},e.prototype._joinUrl=function(t,e){return"/"!=e.charAt(0)&&"\\"!=e.charAt(0)||(e=e.substr(1)),"."==e.charAt(0)&&(e=e.substr(2)),0==t.length?e:("/"!=t.charAt(t.length-1)&&"\\"!=t.charAt(t.length-1)||(t=t.substr(0,t.length-1)),t.concat("/",e))},e.prototype.resolveDependencyUrl=function(t){var e=t.request.url;if(this._context&&this._context._iHasMappingForUrl(e))return this._context._iGetRemappedUrl(e);if(e==this._uri)return e;var n,i=new RegExp("/^[a-zA-Z]{3,4}:///");if("/"==e.charAt(0))return this._context&&this._context.overrideAbsolutePaths?this._joinUrl(this._context.dependencyBaseUrl,e):e;if(i.test(e)&&this._context&&this._context.overrideFullURLs){var r=e.replace(i,"");return this._joinUrl(this._context.dependencyBaseUrl,r)}return this._context&&this._context.dependencyBaseUrl?(n=this._context.dependencyBaseUrl,this._joinUrl(n,e)):(n=this._uri.substring(0,this._uri.lastIndexOf("/")+1),this._joinUrl(n,e))},e.prototype._retrieveParserDependencies=function(){if(this._currentDependency){for(var t=this._currentDependency.parser.dependencies,e=t.length,n=0;n<e;n++)this._currentDependency.dependencies[n]=t[n];t.length=0,this._retrieveNext()}},e.prototype._resolveParserDependencies=function(){this._currentDependency.success=!0,this._currentDependency.parser&&this._currentDependency.parser.dependencies.length&&(!this._context||this._context.includeDependencies)?this._retrieveParserDependencies():this._retrieveNext()},e.prototype._onLoadError=function(t){if(!this.hasEventListener(X.LOAD_ERROR))throw new Error;this.dispatchEvent(t),this._currentDependency!=this._baseDependency?(this._currentDependency.resolveFailure(),this._retrieveNext()):this.dispose()},e.prototype._onParseError=function(t){if(!this.hasEventListener(z.PARSE_ERROR))throw new Error(t.message);this.dispatchEvent(t),this._retrieveNext()},e.prototype._onAssetComplete=function(t){this._currentDependency&&this._currentDependency.assets.push(t.asset),t.asset.resetAssetPath(t.asset.name,this._namespace),this._currentDependency.suppresAssetEvents||this.dispatchEvent(t)},e.prototype._onReadyForDependencies=function(t){this._context&&!this._context.includeDependencies?t.target.resumeParsing():this._retrieveParserDependencies()},e.prototype._onLoadProgress=function(t){this.dispatchEvent(t)},e.prototype._onLoadComplete=function(t){var e=t.urlLoader;this.dispatchEvent(t),this._removeEventListeners(e),this._currentDependency.setData(e.data),this._currentDependency.retrieveAsRawData?this._resolveParserDependencies():this._parseDependency(this._currentDependency)},e.prototype._onParseComplete=function(t){var e=t.target;e.removeEventListener(z.READY_FOR_DEPENDENCIES,this._onReadyForDependenciesDelegate),e.removeEventListener(z.PARSE_COMPLETE,this._onParseCompleteDelegate),e.removeEventListener(z.PARSE_ERROR,this._onParseErrorDelegate),e.removeEventListener(h.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate),e.removeEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),this._resolveParserDependencies()},e.prototype._onTextureSizeError=function(t){t.asset.name=this._currentDependency.resolveName(t.asset),this.dispatchEvent(t)},e.prototype._addEventListeners=function(t){t.addEventListener(X.LOAD_PROGRESS,this._onLoadProgressDelegate),t.addEventListener(X.LOAD_COMPLETE,this._onLoadCompleteDelegate),t.addEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate)},e.prototype._removeEventListeners=function(t){t.removeEventListener(X.LOAD_PROGRESS,this._onLoadProgressDelegate),t.removeEventListener(X.LOAD_COMPLETE,this._onLoadCompleteDelegate),t.removeEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate)},e.prototype.stop=function(){this.dispose()},e.prototype.dispose=function(){this._context=null,this._stack=null,this._currentDependency&&this._currentDependency.loader&&this._removeEventListeners(this._currentDependency.loader),this._currentDependency=null},e.prototype._getParserFromData=function(t){for(var n=e._parsers.length-1;n>=0;n--)if(e._parsers[n].supportsData(t))return new e._parsers[n];return null},e.prototype._parseDependency=function(t){var e=t.parser;if(e||t.setParser(e=this._getParserFromData(t.data)),e)e.addEventListener(z.READY_FOR_DEPENDENCIES,this._onReadyForDependenciesDelegate),e.addEventListener(z.PARSE_COMPLETE,this._onParseCompleteDelegate),e.addEventListener(z.PARSE_ERROR,this._onParseErrorDelegate),e.addEventListener(h.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate),e.addEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),t.request&&t.request.url&&(e.fileName=t.request.url),e.materialMode=this._materialMode,e.parseAsync(t.data);else{var n="No parser defined. To enable all parsers for auto-detection, use Parsers.enableAllBundled()";if(!this.hasEventListener(z.PARSE_ERROR))throw new Error(n);this.dispatchEvent(new z(z.PARSE_ERROR,n)),this._retrieveNext()}},e.prototype.getParserFromSuffix=function(t){for(var n=this.getSuffix(t),i=e._parsers.length-1;i>=0;i--){var r=e._parsers[i];if(r.supportsType(n))return new r}return null},e.prototype.getSuffix=function(t){var e=t.indexOf("?")>0?t.split("?")[0]:t;return e.substr(e.lastIndexOf(".")+1).toLowerCase()},e._parsers=new Array,e}(p),pt=function(t){function e(){var e,n=t.call(this)||this;return n._loaderSessionsGarbage=new Array,n._assets=new Array,n._assetDictionary=new Object,n._loaderSessions=new Array,n.conflictStrategy=rt.IGNORE.create(),n.conflictPrecedence=$.FAVOR_NEW,n._onAssetRenameDelegate=function(t){return n._onAssetRename(t)},n._onAssetConflictResolvedDelegate=function(t){return n._onAssetConflictResolved(t)},n._onLoaderStartDelegate=function(t){return n._onLoaderStart(t)},n._onLoaderCompleteDelegate=function(t){return n._onLoaderComplete(t)},n._onTextureSizeErrorDelegate=function(t){return n._onTextureSizeError(t)},n._onAssetCompleteDelegate=function(t){return n._onAssetComplete(t)},n._onLoadErrorDelegate=function(t){return n._onLoadError(t)},n._onParseErrorDelegate=function(t){return n._onParseError(t)},n._errorDelegateSelector=((e={})[X.LOAD_ERROR]=n._onLoadErrorDelegate,e[z.PARSE_ERROR]=n._onParseErrorDelegate,e),n}return o(e,t),e.prototype.addEventListener=function(e,n){if(e==X.LOAD_ERROR||e==z.PARSE_ERROR)for(var i=void 0;i<this._loaderSessions.length;i++)this._loaderSessions[i].addEventListener(e,this._errorDelegateSelector[e]);t.prototype.addEventListener.call(this,e,n)},e.prototype.removeEventListener=function(e,n){if(e==X.LOAD_ERROR||e==z.PARSE_ERROR)for(var i=void 0;i<this._loaderSessions.length;i++)this._loaderSessions[i].removeEventListener(e,this._errorDelegateSelector[e]);t.prototype.removeEventListener.call(this,e,n)},e.getInstance=function(t){return void 0===t&&(t="default"),t||(t="default"),e._iInstances.hasOwnProperty(t)||(e._iInstances[t]=new e),e._iInstances[t]},e.prototype.enableParser=function(t){ht.enableParser(t)},e.prototype.enableParsers=function(t){ht.enableParsers(t)},Object.defineProperty(e.prototype,"conflictStrategy",{get:function(){return this._strategy},set:function(t){if(!t)throw new l("namingStrategy must not be null. To ignore naming, use AssetLibrary.IGNORE");this._strategy=t.create()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conflictPrecedence",{get:function(){return this._strategyPreference},set:function(t){this._strategyPreference=t},enumerable:!1,configurable:!0}),e.prototype.createIterator=function(t,e,n){return void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),new Z(this._assets,t,e,n)},e.prototype.load=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this.getLoader().load(t,e,n,i)},e.prototype.loadData=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this.getLoader().loadData(t,"",e,n,i)},e.prototype.getLoader=function(){var t=new ht;return this._loaderSessions.push(t),t.addEventListener(Q.LOADER_START,this._onLoaderStartDelegate),t.addEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),t.addEventListener(h.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate),t.addEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),this.hasEventListener(X.LOAD_ERROR)&&t.addEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),this.hasEventListener(z.PARSE_ERROR)&&t.addEventListener(z.PARSE_ERROR,this._onParseErrorDelegate),t},e.prototype.stopLoader=function(t){var e=this._loaderSessions.indexOf(t);if(-1==e)throw new Error("loader is not an active session");this._loaderSessions.splice(e,1),this._killLoaderSession(t)},e.prototype.getAsset=function(t,e){return void 0===e&&(e=null),this._assetDictDirty&&this.rehashAssetDict(),null==e&&(e=_.DEFAULT_NAMESPACE),this._assetDictionary.hasOwnProperty(e)?this._assetDictionary[e][t.toString().toLowerCase()]:null},e.prototype.getAllAssets=function(){return this._assets},e.prototype.addAsset=function(t){if(!(this._assets.indexOf(t)>=0)){var e=this.getAsset(t.adaptee.name,t.adaptee.assetNamespace),n=t.adaptee.assetNamespace||_.DEFAULT_NAMESPACE;null!=e&&this._strategy.resolveConflict(t,e,this._assetDictionary[n],this._strategyPreference),this._assets.push(t),this._assetDictionary.hasOwnProperty(n)||(this._assetDictionary[n]=new Object),this._assetDictionary[n][t.adaptee.name.toString().toLowerCase()]=t,t.adaptee.addEventListener(h.RENAME,this._onAssetRenameDelegate),t.adaptee.addEventListener(h.ASSET_CONFLICT_RESOLVED,this._onAssetConflictResolvedDelegate)}},e.prototype.removeAsset=function(t,e){void 0===e&&(e=!0),this.removeAssetFromDict(t),t.adaptee.removeEventListener(h.RENAME,this._onAssetRenameDelegate),t.adaptee.removeEventListener(h.ASSET_CONFLICT_RESOLVED,this._onAssetConflictResolvedDelegate);var n=this._assets.indexOf(t);n>=0&&this._assets.splice(n,1),e&&t.dispose()},e.prototype.removeAssetByName=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!0);var i=this.getAsset(t,e);return i&&this.removeAsset(i,n),i},e.prototype.removeAllAssets=function(t){if(void 0===t&&(t=!0),t)for(var e=this._assets.length,n=0;n<e;n++)this._assets[n].dispose();this._assets.length=0,this.rehashAssetDict()},e.prototype.removeNamespaceAssets=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!0);var n,i=0,r=this._assets.concat();this._assets.length=0,null==t&&(t=_.DEFAULT_NAMESPACE);for(var o=r.length,a=0;a<o;a++)(n=r[a]).adaptee.assetNamespace==t?(e&&n.dispose(),this.removeAssetFromDict(n,!1)):this._assets[i++]=n;this._assetDictionary.hasOwnProperty(t)&&delete this._assetDictionary[t]},e.prototype.removeAssetFromDict=function(t,e){void 0===e&&(e=!0),this._assetDictDirty&&this.rehashAssetDict();var n=t.adaptee.assetNamespace;this._assetDictionary.hasOwnProperty(n)&&(this._assetDictionary[n].hasOwnProperty(t.adaptee.name.toString().toLowerCase())&&delete this._assetDictionary[n][t.adaptee.name.toString().toLowerCase()],e&&!Object.keys(this._assetDictionary[n]).length&&delete this._assetDictionary[n])},e.prototype.stop=function(){for(var t=this._loaderSessions.length,e=0;e<t;e++)this._killLoaderSession(this._loaderSessions[e]);this._loaderSessions=new Array},e.prototype.rehashAssetDict=function(){var t,e;this._assetDictionary={};for(var n=this._assets.length,i=0;i<n;i++)e=(t=this._assets[i]).adaptee.assetNamespace,this._assetDictionary.hasOwnProperty(e)||(this._assetDictionary[e]={}),this._assetDictionary[e][t.adaptee.name.toString().toLowerCase()]=t;this._assetDictDirty=!1},e.prototype._onLoadError=function(t){this.dispatchEvent(t)},e.prototype._onParseError=function(t){this.dispatchEvent(t)},e.prototype._onAssetComplete=function(t){this.addAsset(t.asset.adapter),this.dispatchEvent(t)},e.prototype._onTextureSizeError=function(t){this.dispatchEvent(t)},e.prototype._onLoaderStart=function(t){this.dispatchEvent(t)},e.prototype._onLoaderComplete=function(t){this.stopLoader(t.target),this.dispatchEvent(t)},e.prototype._killLoaderSession=function(t){t.removeEventListener(Q.LOADER_START,this._onLoaderStartDelegate),t.removeEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),t.removeEventListener(h.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate),t.removeEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),this.hasEventListener(X.LOAD_ERROR)&&t.removeEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),this.hasEventListener(z.PARSE_ERROR)&&t.removeEventListener(z.PARSE_ERROR,this._onParseErrorDelegate),t.stop()},e.prototype._onAssetRename=function(t){var e=t.target.adapter,n=this.getAsset(e.adaptee.assetNamespace,e.adaptee.name);if(null!=n)this._strategy.resolveConflict(e,n,this._assetDictionary[e.adaptee.assetNamespace],this._strategyPreference);else{var i=this._assetDictionary[t.asset.assetNamespace];if(null==i)return;i[t.prevName]=null,i[t.asset.name.toString().toLowerCase()]=t.asset}},e.prototype._onAssetConflictResolved=function(t){this.dispatchEvent(t.clone())},e._iInstances=new Object,e}(p),dt=function(){function t(){}return t.getBundle=function(t){return void 0===t&&(t="default"),pt.getInstance(t)},t.enableParser=function(t){ht.enableParser(t)},t.enableParsers=function(t){ht.enableParsers(t)},Object.defineProperty(t,"conflictStrategy",{get:function(){return t.getBundle().conflictStrategy},set:function(e){t.getBundle().conflictStrategy=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"conflictPrecedence",{get:function(){return t.getBundle().conflictPrecedence},set:function(e){t.getBundle().conflictPrecedence=e},enumerable:!1,configurable:!0}),t.createIterator=function(e,n,i){return void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),t.getBundle().createIterator(e,n,i)},t.load=function(e,n,i,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),t.getBundle().load(e,n,i,r)},t.loadData=function(e,n,i,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),t.getBundle().loadData(e,n,i,r)},t.stop=function(){t.getBundle().stop()},t.getLoader=function(){return t.getBundle().getLoader()},t.getAsset=function(e,n){return void 0===n&&(n=null),t.getBundle().getAsset(e,n)},t.getAllAssets=function(){return t.getBundle().getAllAssets()},t.addEventListener=function(e,n){t.getBundle().addEventListener(e,n)},t.removeEventListener=function(e,n){t.getBundle().removeEventListener(e,n)},t.addAsset=function(e){t.getBundle().addAsset(e)},t.removeAsset=function(e,n){void 0===n&&(n=!0),t.getBundle().removeAsset(e,n)},t.removeAssetByName=function(e,n,i){return void 0===n&&(n=null),void 0===i&&(i=!0),t.getBundle().removeAssetByName(e,n,i)},t.removeAllAssets=function(e){void 0===e&&(e=!0),t.getBundle().removeAllAssets(e)},t.removeNamespaceAssets=function(e,n){void 0===e&&(e=null),void 0===n&&(n=!0),t.getBundle().removeNamespaceAssets(e,n)},t}(),ft=function(){function t(t){void 0===t&&(t=null),this.method=at.GET,this.async=!0,this._url=t}return Object.defineProperty(t.prototype,"url",{get:function(){return this._url},set:function(t){this._url=t},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.data=null,this._url=null},t}();function _t(){return Date.now()}var gt,mt=function(){function t(t,e){var n=this;this._active=!1,this._argsArray=new Array,this._getTimer=_t,this.setCallback(t,e),this._rafUpdateFunction=function(){n._active&&n._tick()},this._argsArray.push(this._dt)}return t.prototype.setCallback=function(t,e){this._callback=t,this._callbackContext=e},t.prototype.start=function(){this._prevTime=this._getTimer(),this._active=!0,window&&(window.requestAnimationFrame?window.requestAnimationFrame(this._rafUpdateFunction):window.mozRequestAnimationFrame?window.requestAnimationFrame=window.mozRequestAnimationFrame:window.webkitRequestAnimationFrame?window.requestAnimationFrame=window.webkitRequestAnimationFrame:window.oRequestAnimationFrame&&(window.requestAnimationFrame=window.oRequestAnimationFrame))},t.prototype.stop=function(){this._active=!1},Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),t.prototype._tick=function(){this._currentTime=this._getTimer(),this._dt=this._currentTime-this._prevTime,this._argsArray[0]=this._dt,this._callback.apply(this._callbackContext,this._argsArray),this._active&&(window.requestAnimationFrame(this._rafUpdateFunction),this._prevTime=this._currentTime)},t}(),yt=function(t){function e(e){var n=t.call(this)||this;return n.materialMode=0,n._dataFormat=e,n._dependencies=new Array,n._onIntervalDelegate=function(t){return n._onInterval(t)},n._timer=new mt(n._onIntervalDelegate,n),n}return o(e,t),e.supportsType=function(t){throw new u},Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parsingFailure",{get:function(){return this._parsingFailure},set:function(t){this._parsingFailure=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parsingPaused",{get:function(){return this._parsingPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parsingComplete",{get:function(){return this._parsingComplete},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataFormat",{get:function(){return this._dataFormat},enumerable:!1,configurable:!0}),e.prototype.parseAsync=function(t,e){void 0===e&&(e=30),this._data=t,this.startParsing(e)},Object.defineProperty(e.prototype,"dependencies",{get:function(){return this._dependencies},enumerable:!1,configurable:!0}),e.prototype.resolveDependency=function(t){throw new u},e.prototype.resolveDependencyFailure=function(t){throw new u},e.prototype.resolveDependencyName=function(t,e){return e.name},e.prototype.resumeParsing=function(){this._parsingPaused=!1,this.hasTime()&&this.proceedParsing()},e.prototype.finalizeAsset=function(t,e){void 0===e&&(e=null),t.name=e||t.name||t.assetType,this.dispatchEvent(new h(h.ASSET_COMPLETE,t))},e.prototype.proceedParsing=function(){throw new u},e.prototype.dieWithError=function(t){void 0===t&&(t="Unknown parsing error"),this._parsingFailure=!0,this.dispatchEvent(new z(z.PARSE_ERROR,t))},e.prototype.addDependency=function(t,e,n,i,r,o,a){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=0);var s=new ut(t,e,i,n,this,r,o,a);return this._dependencies.push(s),s},e.prototype.pauseAndRetrieveDependencies=function(){this._parsingPaused=!0,this.dispatchEvent(new z(z.READY_FOR_DEPENDENCIES))},e.prototype.hasTime=function(){return this._isParsing=_t()-e._lastFrameTime<this._frameLimit,this._isParsing||this._timer.start(),this._isParsing},e.prototype._onInterval=function(t){e._lastFrameTime=_t(),this._isParsing=!0,this._timer.stop(),this.proceedParsing()},e.prototype.startParsing=function(t){this._frameLimit=t,this.hasTime()&&this.proceedParsing()},e.prototype.finishParsing=function(){this._parsingFailure||(this._parsingComplete=!0,this._isParsing=!1,this.dispatchEvent(new z(z.PARSE_COMPLETE)))},e.prototype.getTextData=function(){return C.toString(this._data)},e.prototype.getByteData=function(){return C.toByteArray(this._data)},e.prototype.getData=function(){return this._data},e._lastFrameTime=0,e}(p),At=function(t){function e(){return t.call(this,ot.BLOB)||this}return o(e,t),e.supportsType=function(t){return"wav"==(t=t.toLowerCase())||"mp3"==t||"ogg"==t},e.supportsData=function(t){if(!(t instanceof x))return!1;var n=t;return!!e.parseFileType(n)},e.prototype.startParsing=function(e){delete this._content,this._content=null,t.prototype.startParsing.call(this,e)},e.prototype.proceedParsing=function(){this._content=new w(new S(this.data)),this.finalizeAsset(this._content,this.fileName),this.finishParsing()},e.parseFileType=function(t){if(t.position=0,!(65504&~t.readUnsignedShort()))return"mp3";t.position=0;var e=t.readUnsignedByte(),n=t.readUnsignedByte(),i=t.readUnsignedByte();return 73===e&&68===n&&51===i||255===e&&251===n||255===e&&243===n&&130===i?"mp3":(t.position=0,"RIFF"==t.readUTFBytes(4)?"wav":(t.position=0,"OggS"==t.readUTFBytes(4)?"ogg":(t.position=0,null)))},e.processFilename=function(t){return t},e}(yt);!function(t){t[t.LEFT_HANDED=0]="LEFT_HANDED",t[t.RIGHT_HANDED=1]="RIGHT_HANDED"}(gt||(gt={}));var vt=function(t){function e(e){void 0===e&&(e=gt.LEFT_HANDED);var n=t.call(this)||this;return n._viewMatrix3D=new U,n._inverseViewMatrix3D=new U,n._frustumMatrix3D=new U,n._near=20,n._far=3e3,n._scale=1,n._ratio=1,n._originX=0,n._originY=0,n._frustumRect=new W,n._viewFrustumCorners=[],n._viewMatrix3DDirty=!0,n._inverseViewMatrix3DDirty=!0,n._frustumMatrix3DDirty=!0,n._viewFrustumCornersDirty=!0,n._viewFrustumPlanesDirty=!0,n._coordinateSystem=e,n._onInvalidateConcatenatedMatrix3DDelegate=function(t){return n._onInvalidateConcatenatedMatrix3D(t)},n}return o(e,t),Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform||(this.transform=new V),this._transform},set:function(t){this._transform!=t&&(this._transform&&this._transform.removeEventListener(P.INVALIDATE_MATRIX3D,this._onInvalidateConcatenatedMatrix3DDelegate),this._transform=t,this._transform&&this._transform.addEventListener(P.INVALIDATE_MATRIX3D,this._onInvalidateConcatenatedMatrix3DDelegate),this._invalidateViewMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinateSystem",{get:function(){return this._coordinateSystem},set:function(t){this._coordinateSystem!=t&&(this._coordinateSystem=t,this._invalidateFrustumMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._propertiesDirty&&this._updateProperties(),this._scale},set:function(t){this._scale!=t&&(this._scale=t,this._invalidateFrustumMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ratio",{get:function(){return this._propertiesDirty&&this._updateProperties(),this._ratio},set:function(t){this._ratio!=t&&(this._ratio=t,this._invalidateFrustumMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frustumMatrix3D",{get:function(){return this._frustumMatrix3DDirty&&this._updateFrustumMatrix3D(),this._frustumMatrix3D},set:function(t){this._frustumMatrix3D=t,this._invalidateViewMatrix3D(),this._invalidateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewFrustumCorners",{get:function(){if(this._viewFrustumCornersDirty){this._viewFrustumCornersDirty=!1,this._frustumMatrix3DDirty&&this._updateFrustumMatrix3D();var t=this._frustumRect.left,e=this._frustumRect.right,n=this._frustumRect.top,i=this._frustumRect.bottom;this._propertiesDirty&&this._updateProperties();var r=this._near,o=this._far,a=this._viewFrustumCorners;a[0]=a[9]=r*t,a[3]=a[6]=r*e,a[1]=a[4]=r*n,a[7]=a[10]=r*i,a[12]=a[21]=o*t,a[15]=a[18]=o*e,a[13]=a[16]=o*n,a[19]=a[22]=o*i,a[2]=a[5]=a[8]=a[11]=r,a[14]=a[17]=a[20]=a[23]=o,this._transform&&this._transform.matrix3D.transformVectors(a,a)}return this._viewFrustumCorners},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewFrustumPlanes",{get:function(){if(this._viewFrustumPlanesDirty){if(this._viewFrustumPlanesDirty=!1,!this._viewFrustumPlanes){this._viewFrustumPlanes=[];for(var t=0;t<6;++t)this._viewFrustumPlanes[t]=new q}var e=this.viewMatrix3D._rawData,n=void 0,i=e[0],r=e[4],o=e[8],a=e[12],s=e[1],l=e[5],u=e[9],c=e[13],h=e[2],p=e[6],d=e[10],f=e[14],_=e[3],g=e[7],m=e[11],y=e[15],A=void 0,v=void 0,b=void 0,x=void 0;x=this._viewFrustumPlanes[0],A=_+i,v=g+r,b=m+o,n=1/Math.sqrt(A*A+v*v+b*b),x.a=A*n,x.b=v*n,x.c=b*n,x.d=-(y+a)*n,x=this._viewFrustumPlanes[1],A=_-i,v=g-r,b=m-o,n=1/Math.sqrt(A*A+v*v+b*b),x.a=A*n,x.b=v*n,x.c=b*n,x.d=(a-y)*n,x=this._viewFrustumPlanes[2],A=_+s,v=g+l,b=m+u,n=1/Math.sqrt(A*A+v*v+b*b),x.a=A*n,x.b=v*n,x.c=b*n,x.d=-(y+c)*n,x=this._viewFrustumPlanes[3],A=_-s,v=g-l,b=m-u,n=1/Math.sqrt(A*A+v*v+b*b),x.a=A*n,x.b=v*n,x.c=b*n,x.d=(c-y)*n,x=this._viewFrustumPlanes[4],A=h,v=p,b=d,n=1/Math.sqrt(A*A+v*v+b*b),x.a=A*n,x.b=v*n,x.c=b*n,x.d=-f*n,x=this._viewFrustumPlanes[5],A=_-h,v=g-p,b=m-d,n=1/Math.sqrt(A*A+v*v+b*b),x.a=A*n,x.b=v*n,x.c=b*n,x.d=(f-y)*n}return this._viewFrustumPlanes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"near",{get:function(){return this._propertiesDirty&&this._updateProperties(),this._near},set:function(t){t!=this._near&&(this._near=t,this._invalidateFrustumMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"originX",{get:function(){return this._propertiesDirty&&this._updateProperties(),this._originX},set:function(t){this._originX!=t&&(this._originX=t,this._invalidateFrustumMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"originY",{get:function(){return this._propertiesDirty&&this._updateProperties(),this._originY},set:function(t){this._originY!=t&&(this._originY=t,this._invalidateFrustumMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"far",{get:function(){return this._propertiesDirty&&this._updateProperties(),this._far},set:function(t){t!=this._far&&(this._far=t,this._invalidateFrustumMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frustumRect",{get:function(){return this._frustumMatrix3DDirty&&this._updateFrustumMatrix3D(),this._frustumRect},enumerable:!1,configurable:!0}),e.prototype.project=function(t,e){throw new u},e.prototype.unproject=function(t,e,n,i){throw new u},Object.defineProperty(e.prototype,"viewMatrix3D",{get:function(){return this._viewMatrix3DDirty&&(this._viewMatrix3DDirty=!1,this._transform?(this._viewMatrix3D.copyFrom(this._transform.inverseMatrix3D),this._viewMatrix3D.append(this.frustumMatrix3D)):this._viewMatrix3D.copyFrom(this.frustumMatrix3D)),this._viewMatrix3D},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inverseViewMatrix3D",{get:function(){return this._inverseViewMatrix3DDirty&&(this._inverseViewMatrix3DDirty=!1,this._inverseViewMatrix3D.copyFrom(this.viewMatrix3D),this._inverseViewMatrix3D.invert()),this._inverseViewMatrix3D},enumerable:!1,configurable:!0}),e.prototype.clone=function(){throw new u},e.prototype._invalidateProperties=function(){this._propertiesDirty=!0},e.prototype._invalidateViewMatrix3D=function(){this._viewMatrix3DDirty=!0,this._inverseViewMatrix3DDirty=!0,this._viewFrustumCornersDirty=!0,this._viewFrustumPlanesDirty=!0,this.dispatchEvent(new H(H.INVALIDATE_VIEW_MATRIX3D,this))},e.prototype._invalidateFrustumMatrix3D=function(){this._propertiesDirty&&this._updateProperties(),this._frustumMatrix3DDirty=!0,this.dispatchEvent(new H(H.INVALIDATE_FRUSTUM_MATRIX3D,this)),this._invalidateViewMatrix3D()},e.prototype._updateFrustumMatrix3D=function(){this._frustumMatrix3DDirty=!1},e.prototype._updateProperties=function(){this._propertiesDirty=!1},e.prototype._onInvalidateConcatenatedMatrix3D=function(t){this._invalidateViewMatrix3D()},e}(p),bt=function(t){function e(e,n){void 0===e&&(e=1),void 0===n&&(n=gt.LEFT_HANDED);var i=t.call(this,n)||this;return i.scale=e,i}return o(e,t),e.prototype.project=function(t,e){void 0===e&&(e=null);var n=this.viewMatrix3D.transformVector(t,e);return n.y=-n.y,n.z=(n.z*(this._far-this._near)+this._far+this._near)/2,n.w=1,n},e.prototype.unproject=function(t,e,n,i){return void 0===i&&(i=null),null==i&&(i=new L),i.x=t*n,i.y=-e*n,i.z=(2*n-this._far-this._near)/(this._far-this._near),i.w=1,this.inverseViewMatrix3D.transformVector(i,i),i.w=1,i},e.prototype.clone=function(){var t=new e(this.scale,this._coordinateSystem);return t._near=this._near,t._far=this._far,t._coordinateSystem=this._coordinateSystem,t},e.prototype._updateFrustumMatrix3D=function(){t.prototype._updateFrustumMatrix3D.call(this);var e=this._frustumMatrix3D._rawData,n=this._scale,i=this._scale/this._ratio;this._frustumRect.left=.5*(this._originX-1)/i,this._frustumRect.top=.5*(this._originY-1)/n,this._frustumRect.right=this._frustumRect.left+1/i,this._frustumRect.bottom=this._frustumRect.top+1/n,e[0]=2*i,e[5]=2*n,e[12]=this._originX,e[13]=this._originY,e[10]=2/(this._far-this._near),e[14]=-(this._far+this._near)/(this._far-this._near),e[1]=e[2]=e[3]=e[4]=e[6]=e[7]=e[8]=e[9]=e[11]=0,e[15]=1,this._frustumMatrix3D.invalidatePosition()},e.prototype._updateProperties=function(){t.prototype._updateProperties.call(this);var e=this._frustumMatrix3D._rawData;this._near=-(e[14]+1)/e[10],this._far=-(e[14]-1)/e[10],this._originX=e[8],this._originY=e[9],this._scale=e[5]/2,this._ratio=.5*this._scale/e[0]},e}(vt),xt=function(t){function e(e,n){void 0===e&&(e=60),void 0===n&&(n=gt.LEFT_HANDED);var i=t.call(this,n)||this;return i.fieldOfView=e,i}return o(e,t),Object.defineProperty(e.prototype,"fieldOfView",{get:function(){return 360*Math.atan(.5/this.scale)/Math.PI},set:function(t){this.scale=.5/Math.tan(t*Math.PI/360)},enumerable:!1,configurable:!0}),e.prototype.project=function(t,e){void 0===e&&(e=null);var n=this.viewMatrix3D.transformVector(t,e);return n.x=n.x/n.w,n.y=-n.y/n.w,n.z=n.w,n.w=1,n},e.prototype.unproject=function(t,e,n,i){return void 0===i&&(i=null),null==i&&(i=new L),i.x=t*n,i.y=-e*n,i.z=(this._far+this._near)/(this._far-this._near)*n-2*this._far*this._near/(this._far-this._near),i.w=n,this.inverseViewMatrix3D.transformVector(i,i),i.w=1,i},e.prototype.clone=function(){var t=new e(this.fieldOfView,this._coordinateSystem);return t._near=this._near,t._far=this._far,t._coordinateSystem=this._coordinateSystem,t},e.prototype._updateFrustumMatrix3D=function(){t.prototype._updateFrustumMatrix3D.call(this);var e=this._frustumMatrix3D._rawData,n=this._scale,i=this._scale/this._ratio;this._frustumRect.left=.5*(this._originX-1)/i,this._frustumRect.top=.5*(this._originY-1)/n,this._frustumRect.right=this._frustumRect.left+1/i,this._frustumRect.bottom=this._frustumRect.top+1/n,e[0]=2*i,e[5]=2*n,e[8]=this._originX,e[9]=this._originY,e[10]=(this._far+this._near)/(this._far-this._near),e[11]=1,e[1]=e[2]=e[3]=e[4]=e[6]=e[7]=e[12]=e[13]=e[15]=0,e[14]=-2*this._far*this._near/(this._far-this._near),this._coordinateSystem==gt.RIGHT_HANDED&&(e[5]=-e[5]),this._frustumMatrix3D.invalidatePosition()},e.prototype._updateProperties=function(){t.prototype._updateProperties.call(this);var e=this._frustumMatrix3D._rawData;this._near=e[14]/(-1-e[10]),this._far=e[14]/(1-e[10]),this._scale=e[5]/2,this._ratio=.5*this._scale/e[0],this._originX=e[8],this._originY=e[9]},e}(vt),Ct=function(){function t(){}return t.setElementSize=function(t,e,n){t&&(t.style.width=e+"px",t.style.height=n+"px",t.width=e,t.height=n)},t.setElementWidth=function(t,e){t&&(t.style.width=e+"px",t.width=e)},t.setElementHeight=function(t,e){t&&(t.style.height=e+"px",t.height=e)},t.setElementX=function(t,e){t&&(t.style.position="absolute",t.style.left=e+"px")},t.setElementY=function(t,e){t&&(t.style.position="absolute",t.style.top=e+"px")},t.getElementVisibility=function(t){return!!t&&"visible"==t.style.visibility},t.setElementVisibility=function(t,e){t&&(t.style.visibility=e?"visible":"hidden")},t.setElementAlpha=function(t,e){t instanceof HTMLCanvasElement&&(t.getContext("2d").globalAlpha=e)},t.setElementPosition=function(t,e,n,i){void 0===i&&(i=!1),t&&(t.style.position=i?"absolute":"relative",t.style.left=e+"px",t.style.top=n+"px")},t}(),It={},Et=function(){function t(){}return t.breakpoint=function(){t.break()},t.throwPIROnKeyWordOnly=function(e,n){void 0===n&&(n=!0),t.keyword=n?e:null},t.throwPIR=function(e,n,i){if(this.LOG_PI_ERRORS_ONLY_ONCE){var r=e+n;if(It[r])return;It[r]=!0}if(t.logPIR("PartialImplementationError "+e,n,i),t.THROW_ERRORS){if(t.keyword)if(-1==(e+n+i).indexOf(t.keyword))return;throw new j(e+"."+n+": "+i)}},t.logPIR=function(e,n,i){if(void 0===i&&(i=""),t.LOG_PI_ERRORS){var r=e+"."+n;i&&(r+=": "+i),console.warn(r)}},t.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.ENABLE_LOG&&console.log(e)},t.THROW_ERRORS=!1,t.ENABLE_LOG=!0,t.LOG_PI_ERRORS=!0,t.LOG_PI_ERRORS_ONLY_ONCE=!0,t.keyword=null,t}(),wt=function(){function t(){}return t.getChildrenWithTag=function(t,e){var n=document.createDocumentFragment();if(t)for(var i=t.childNodes.length,r=0;r<i;r++){var o=t.childNodes[r];null!=o&&o.nodeName==e&&n.appendChild(o)}return n.childNodes},t.filterListByParam=function(t,e,n){var i=document.createDocumentFragment();if(t)for(var r=t.length,o=0;o<r;o++){var a=t[o];null!=a&&a.attributes.getNamedItem(e).value==n&&i.appendChild(a)}return i.childNodes},t.strToXml=function(t){return(new DOMParser).parseFromString(t,"text/xml")},t.nodeToString=function(t){return t?(new XMLSerializer).serializeToString(t):""},t.readAttributeValue=function(t,e){var n=t.attributes;if(null==n)return"";var i=n.getNamedItem(e);return i?i.value:""},t.writeAttributeValue=function(t,e,n){var i=document.createAttribute(e);i.value=n,i=t.attributes.setNamedItem(i),console.log("XmlUltils - writeAttributeValue() - name: "+i.name+", value: "+i.value)},t.hasAttribute=function(t,e){var n=t.attributes;return null!=n&&null!=n.getNamedItem(e)},t}();var St=function(){function t(){}return t.register=function(t){-1===this.serviceLibraries.indexOf(t)&&this.serviceLibraries.push(t)},t.init=function(){return(t=this.serviceLibraries.map((function(t){return t.init()})),e=t.map((function(t){return Promise.resolve(t).then((function(t){return{status:"fulfilled",value:t}}),(function(t){return{status:"rejected",reason:t}}))})),Promise.all(e)).then((function(){}));var t,e},t.serviceLibraries=[],t}(),Dt=function(t){function e(e,n,i,r,o,a){var s=t.call(this,e)||this;return s.storeName=n,s.propName=i,s.newValue=r,s.oldValue=o,s.store=a,s}return o(e,t),e}(c),Tt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._proxies=Object.create(null),e._lib=Object.create(null),e}return o(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e)},enumerable:!1,configurable:!0}),e.prototype.propertyChange=function(t,n,i,r,o){void 0===o&&(o=!1),o&&console.debug("[ConfigManager] Setters is deprecated, use 'set('".concat(t,"', '").concat(n,"', ").concat(r,") instead'")),this.dispatchEvent(new Dt(e.CHANGE_EVENT,t,n,i,r,this._lib[t]))},e.prototype.wrapObject=function(t,e){var n=this;return new Proxy(e,{set:function(e,i,r,o){return e[i]===r||(n.propertyChange(t,i,e[i],r,!0),e[i]=r),!0}})},e.prototype.getStoreRef=function(t){return this._proxies[t]},e.prototype.addStore=function(t,e){return t in this._lib?(Object.assign(this._lib[t],e),this._proxies[t]):this._proxies[t]=this.wrapObject(t,this._lib[t]=e)},e.prototype.set=function(t,e,n){var i;t in this._lib||this.addStore(t,{});var r="string"==typeof e?((i={})[e]=n,i):e,o=this._lib[t],a=!1;for(var s in r){var l=o[s],u=r[s];o[s]=u,a=a||u!==l,this.propertyChange(t,s,l,u,!1)}return a},e.prototype.get=function(t,e){var n;return null===(n=this._lib[t])||void 0===n?void 0:n[e]},e.prototype.serialize=function(){return JSON.stringify(this._lib)},e.prototype.deserialize=function(t,e){void 0===e&&(e=!0),t="string"==typeof t?JSON.parse(t):t;for(var n in t){var i=t[n];i&&"object"==typeof i&&t.hasOwnProperty(n)&&(e?this.addStore(n,i):this.set(n,i))}},e.deserialize=function(t,n){return void 0===n&&(n=!0),e.instance.deserialize(t,n)},e.CHANGE_EVENT="change",e}(p);console.debug("AwayJS - Core - 0.9.47"),ht.enableParser(At);var Pt,Bt,Ot,Mt,Lt,Rt,Nt,Ft,kt,Ut,Vt,jt,Gt,Qt,zt,Ht,Xt=function(){return function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.name="",this.version=0,this.native={},this.name=t,this.version=e,this.data=new x}}(),Yt=function(){return function(t,e){this.code=t,this.desc=e}}(),qt=function(){function t(){}return Object.defineProperty(t,"map",{get:function(){return t._map||(t._map={},t._map.va=new Yt(0,"vertex attribute"),t._map.fc=new Yt(1,"fragment constant"),t._map.vc=new Yt(1,"vertex constant"),t._map.ft=new Yt(2,"fragment temporary"),t._map.vt=new Yt(2,"vertex temporary"),t._map.vo=new Yt(3,"vertex output"),t._map.op=new Yt(3,"vertex output"),t._map.fd=new Yt(3,"fragment depth output"),t._map.fo=new Yt(3,"fragment output"),t._map.oc=new Yt(3,"fragment output"),t._map.v=new Yt(4,"varying"),t._map.vi=new Yt(4,"varying output"),t._map.fi=new Yt(4,"varying input"),t._map.fs=new Yt(5,"sampler"),t._map.vn=new Yt(15,"native"),t._map.fn=new Yt(15,"native")),t._map},enumerable:!1,configurable:!0}),t}(),Kt=function(){return function(t,e,n){this.shift=t,this.mask=e,this.value=n}}(),Wt=function(){function t(){}return Object.defineProperty(t,"map",{get:function(){return t._map||(t._map=new Array,t._map.rgba=new Kt(8,15,0),t._map.rg=new Kt(8,15,5),t._map.r=new Kt(8,15,4),t._map.compressed=new Kt(8,15,1),t._map.compressed_alpha=new Kt(8,15,2),t._map.dxt1=new Kt(8,15,1),t._map.dxt5=new Kt(8,15,2),t._map["2d"]=new Kt(12,15,0),t._map.cube=new Kt(12,15,1),t._map["3d"]=new Kt(12,15,2),t._map.centroid=new Kt(16,1,1),t._map.ignoresampler=new Kt(16,4,4),t._map.clamp=new Kt(20,15,0),t._map.repeat=new Kt(20,15,1),t._map.wrap=new Kt(20,15,1),t._map.nomip=new Kt(24,15,0),t._map.mipnone=new Kt(24,15,0),t._map.mipnearest=new Kt(24,15,1),t._map.miplinear=new Kt(24,15,2),t._map.nearest=new Kt(28,15,0),t._map.linear=new Kt(28,15,1)),t._map},enumerable:!1,configurable:!0}),t}(),Jt=function(){function t(){this.nativeInstructionLastRegister=65534,this.r={vertex:null,fragment:null},this.cur=new Xt}return t.prototype.assemble=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),n||(n=1),e&&this.addHeader(e,n);var i=t.replace(/[\f\n\r\v]+/g,"\n").split("\n");for(var r in i)this.processLine(i[r],+r);return this.r},t.prototype.processLine=function(t,e){var n=t.search("//");if(-1!=n&&(t=t.slice(0,n)),(t=t.replace(/^\s+|\s+$/g,"")).length>0){var r=t.search(/<.*>/g),o=null;-1!=r&&(o=t.slice(r).match(/([\w\.\-\+]+)/gi),t=t.slice(0,r));for(var a,s={},l=0;(a=t.indexOf("#native"))>0;){var u=a,c=(a=t.indexOf("native#",a))>-1?a+7:t.length;s["nat"+l]=t.substring(u+7,c-7),t=t.substring(0,u)+"nat"+l+t.substring(c),l++}var h=t.match(/([\w\.\+\[\]]+)/gi);if(!h||h.length<1)t.length>=3&&console.log("Warning: bad line "+e+": "+t);else switch(h[0]){case"part":this.addHeader(h[1],Number(h[2]));break;case"endpart":if(!this.cur)throw"Unexpected endpart";return this.cur.data.position=0,void(this.cur=null);default:if(!this.cur)return void console.log("Warning: bad line "+e+": "+t+" (Outside of any part definition)");if("comment"==this.cur.name)return;var p=i.map[h[0]];if(!p)throw"Bad opcode "+h[0]+" "+e+": "+t;this.emitOpcode(this.cur,p.opcode);var d=1;if(p.dest&&"none"!=p.dest){if(!this.emitDest(this.cur,h[d++],p.dest))throw"Bad destination register "+h[d-1]+" "+e+": "+t}else this.emitZeroDword(this.cur);if(p.a&&"none"!=p.a.format){if(!this.emitSource(this.cur,h[d++],p.a,s))throw"Bad source register "+h[d-1]+" "+e+": "+t}else this.emitZeroQword(this.cur);if(p.b&&"none"!=p.b.format){if("sampler"==p.b.format){if(!this.emitSampler(this.cur,h[d++],p.b,o))throw"Bad sampler register "+h[d-1]+" "+e+": "+t}else if(!this.emitSource(this.cur,h[d++],p.b,s))throw"Bad source register "+h[d-1]+" "+e+": "+t}else this.emitZeroQword(this.cur)}}},t.prototype.emitHeader=function(t){switch(t.data.writeUnsignedByte(160),t.data.writeUnsignedInt(t.version),t.version>=16&&t.data.writeUnsignedByte(0),t.data.writeUnsignedByte(161),t.name){case"fragment":t.data.writeUnsignedByte(1);break;case"vertex":t.data.writeUnsignedByte(0);break;case"cpu":t.data.writeUnsignedByte(2);break;default:t.data.writeUnsignedByte(255)}},t.prototype.emitOpcode=function(t,e){t.data.writeUnsignedInt(e)},t.prototype.emitZeroDword=function(t){t.data.writeUnsignedInt(0)},t.prototype.emitZeroQword=function(t){t.data.writeUnsignedInt(0),t.data.writeUnsignedInt(0)},t.prototype.emitDest=function(t,e,n){var i=e.match(/([fov]?[tpocidavs])(\d*)(\.[xyzw]{1,4})?/i);if(!qt.map[i[1]])return!1;var r={num:i[2]?i[2]:0,code:qt.map[i[1]].code,mask:this.stringToMask(i[3])};return t.data.writeUnsignedShort(r.num),t.data.writeUnsignedByte(r.mask),t.data.writeUnsignedByte(r.code),!0},t.prototype.stringToMask=function(t){if(!t)return 15;var e=0;return-1!=t.indexOf("x")&&(e|=1),-1!=t.indexOf("y")&&(e|=2),-1!=t.indexOf("z")&&(e|=4),-1!=t.indexOf("w")&&(e|=8),e},t.prototype.stringToSwizzle=function(t){if(!t)return 228;var e={x:0,y:1,z:2,w:3},n=0;if("."!=t.charAt(0))throw"Missing . for swizzle";return t.length>1&&(n|=e[t.charAt(1)]),t.length>2?n|=e[t.charAt(2)]<<2:n|=(3&n)<<2,t.length>3?n|=e[t.charAt(3)]<<4:n|=(12&n)<<2,t.length>4?n|=e[t.charAt(4)]<<6:n|=(48&n)<<2,n},t.prototype.emitSampler=function(t,e,n,i){var r=e.match(/fs(\d*)/i);if(!r||!r[1])return!1;t.data.writeUnsignedShort(parseInt(r[1])),t.data.writeUnsignedByte(0),t.data.writeUnsignedByte(0);for(var o=5,a=0,s=0;s<i.length;s++){var l=Wt.map[i[s].toLowerCase()];l?(a>>l.shift&l.mask&&console.log("Warning, duplicate sampler option"),a|=l.mask<<l.shift,o&=~(l.mask<<l.shift),o|=l.value<<l.shift):console.log("Warning, unknown sampler option: ",i[s])}return t.data.writeUnsignedInt(o),!0},t.prototype.emitSource=function(t,e,n,i){var r;i&&e in i&&(this.cur.native[this.nativeInstructionLastRegister]=i[e],e="".concat("vertex"===this.cur.name?"vn":"fn").concat(this.nativeInstructionLastRegister),this.nativeInstructionLastRegister--);var o=e.match(/vc\[(v[tcai])(\d+)\.([xyzw])([+-]\d+)?\](\.[xyzw]{1,4})?/i);if(o){if(!qt.map[o[1]])return!1;t.data.writeUnsignedShort(0|+o[2]),t.data.writeByte(0|+o[4]),t.data.writeUnsignedByte(this.stringToSwizzle(o[5])),t.data.writeUnsignedByte(1),t.data.writeUnsignedByte(qt.map[o[1]].code),t.data.writeUnsignedByte({x:0,y:1,z:2,w:3}[o[3]]),t.data.writeUnsignedByte(128)}else{if(r=e.match(/([fov]?[tpocidavsn])(\d*)(\.[xyzw]{1,4})?/i),!qt.map[r[1]])return!1;t.data.writeUnsignedShort(0|r[2]),t.data.writeUnsignedByte(0),t.data.writeUnsignedByte(this.stringToSwizzle(r[3])),t.data.writeUnsignedByte(qt.map[r[1]].code),t.data.writeUnsignedByte(0),t.data.writeUnsignedByte(0),t.data.writeUnsignedByte(0)}return!0},t.prototype.addHeader=function(t,e){if(void 0===e&&(e=1),null==this.r[t])this.r[t]=new Xt(t,e),this.emitHeader(this.r[t]);else if(this.r[t].version!=e)throw"Multiple versions for part "+t;this.cur=this.r[t]},t}(),Zt=function(){return function(){this.progid=0,this.version=0,this.type=""}}(),$t=function(){return function(){var t,e;this.regread=((t={})[0]=[],t[1]=[],t[4]=[],t[2]=[],t[3]=[],t[5]=[],t[15]=[],t),this.regwrite=((e={})[0]=[],e[1]=[],e[4]=[],e[2]=[],e[3]=[],e[5]=[],e[15]=[],e),this.hasindirect=!1,this.writedepth=!1,this.hasmatrix=!1,this.samplers=[],this.constants=0,this.tokens=[],this.header=new Zt,this.native={}}}(),te=function(){return function(t,e,n,i,r,o,a,s,l,u,c){this.s=t,this.flags=e,this.dest=n,this.a=i,this.b=r,this.matrixwidth=o,this.matrixheight=a,this.ndwm=s,this.scalar=l,this.dm=u,this.lod=c}}(),ee=function(){function t(t){}return t.lib=((Pt={})[24]="\n// agal lib fun: multiply matrix4 onto v\nvec4 mul_mat44 (int matIndex, vec4 v) {\n\treturn vec4(\n\t\tdot(v, vc[matIndex + 0]),\n\t\tdot(v, vc[matIndex + 1]),\n\t\tdot(v, vc[matIndex + 2]),\n\t\tdot(v, vc[matIndex + 3])\n\t);\n}\n",Pt),t.agal2glsllut=[new te("%dest = %cast(%a);\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(%a + %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new te("%dest = %cast(%a - %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new te("%dest = %cast(%a * %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new te("%dest = %cast(%a / %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new te("%dest = %cast(1.0) / %a;\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(min(%a,%b));\n",0,!0,!0,!0,null,null,null,null,null,null),new te("%dest = %cast(max(%a,%b));\n",0,!0,!0,!0,null,null,null,null,null,null),new te("%dest = %cast(fract(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(sqrt(abs(%a)));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(inversesqrt(abs(%a)));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(pow(abs(%a),%b));\n",0,!0,!0,!0,null,null,null,null,null,null),new te("%dest = %cast(log2(abs(%a)));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(exp2(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(normalize(vec3( %a ) ));\n",0,!0,!0,!1,null,null,!0,null,null,null),new te("%dest = %cast(sin(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(cos(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(cross(vec3(%a),vec3(%b)));\n",0,!0,!0,!0,null,null,!0,null,null,null),new te("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",0,!0,!0,!0,null,null,!0,null,null,null),new te("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",0,!0,!0,!0,null,null,!0,null,null,null),new te("%dest = %cast(abs(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(%a * -1.0);\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(clamp(%a,0.0,1.0));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",null,!0,!0,!0,3,3,!0,null,null,null),new te("%dest = %cast(mul_mat44(%ib,vec4(%a)));\n",null,!0,!0,!0,4,4,!0,null,null,null),new te("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,!0,!0,!0,4,3,!0,null,null,null),new te("%dest = %cast(dFdx(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(dFdy(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("if (float(%a)==float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new te("if (float(%a)!=float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new te("if (float(%a)>=float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new te("if (float(%a)<float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new te("} else {;\n",0,!1,!1,!1,null,null,null,null,null,null),new te("};\n",0,!1,!1,!1,null,null,null,null,null,null),new te(null,null,null,null,!1,null,null,null,null,null,null),new te(null,null,null,null,!1,null,null,null,null,null,null),new te(null,null,null,null,!1,null,null,null,null,null,null),new te(null,null,null,null,!1,null,null,null,null,null,null),new te("%dest = %cast(texture%texdimLod(%b,%texsize(%a)).%dm);\n",null,!0,!0,!0,null,null,null,null,!0,null),new te("if ( float(%a)<0.0 ) discard;\n",null,!1,!0,!1,null,null,null,!0,null,null),new te("%dest = %cast(texture%texdim(%b,%texsize(%a)%lod).%dm);\n",null,!0,!0,!0,null,null,!0,null,!0,!0),new te("%dest = %cast(greaterThanEqual(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null),new te("%dest = %cast(lessThan(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null),new te("%dest = %cast(sign(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new te("%dest = %cast(equal(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null),new te("%dest = %cast(notEqual(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null)],t}(),ne=function(){return function(){this.mask=0,this.regnum=0,this.regtype=0,this.dim=0,this.indexoffset=0,this.swizzle=0,this.lodbiad=0,this.readmode=0,this.special=0,this.wrap=0,this.filter=0,this.indexregtype=0,this.indexselect=0,this.indirectflag=0}}(),ie=function(){return function(){this.dest=new ne,this.opcode=0,this.a=new ne,this.b=new ne}}(),re=function(){function t(){}return t.prototype.decribeAGALPart=function(t){if(t instanceof x)return this.decribeAGALByteArray(t);var e=this.decribeAGALByteArray(t.data);return e.native=t.native,e},t.prototype.decribeAGALByteArray=function(t){var e=new Zt;if(160!=t.readUnsignedByte())throw"Bad AGAL: Missing 0xa0 magic byte.";if(e.version=t.readUnsignedInt(),e.version>=16&&(t.readUnsignedByte(),e.version>>=1),161!=t.readUnsignedByte())throw"Bad AGAL: Missing 0xa1 magic byte.";switch(e.progid=t.readUnsignedByte(),e.progid){case 1:e.type="fragment";break;case 0:e.type="vertex";break;case 2:e.type="cpu";break;default:e.type=""}for(var n=new $t,i=[];t.position<t.length;){var r=new ie;r.opcode=t.readUnsignedInt();var o=ee.agal2glsllut[r.opcode];if(!o)throw"Opcode not valid or not implemented yet: "+r.opcode;o.matrixheight&&(n.hasmatrix=!0),o.dest?(r.dest.regnum=t.readUnsignedShort(),r.dest.mask=t.readUnsignedByte(),r.dest.regtype=t.readUnsignedByte(),n.regwrite[r.dest.regtype][r.dest.regnum]|=r.dest.mask):(r.dest=null,t.readUnsignedInt()),o.a?this.readReg(r.a,1,n,t):(r.a=null,t.readUnsignedInt(),t.readUnsignedInt()),o.b?this.readReg(r.b,0|o.matrixheight,n,t):(r.b=null,t.readUnsignedInt(),t.readUnsignedInt()),i.push(r)}return n.header=e,n.tokens=i,n},t.prototype.readReg=function(t,e,n,i){if(t.regnum=i.readUnsignedShort(),t.indexoffset=i.readByte(),t.swizzle=i.readUnsignedByte(),t.regtype=i.readUnsignedByte(),n.regread[t.regtype][t.regnum]=15,5===t.regtype?(t.lodbiad=t.indexoffset,t.indexoffset=void 0,t.swizzle=void 0,t.readmode=i.readUnsignedByte(),t.dim=t.readmode>>4,t.readmode&=15,t.special=i.readUnsignedByte(),t.wrap=t.special>>4,t.special&=15,t.mipmap=i.readUnsignedByte(),t.filter=t.mipmap>>4,t.mipmap&=15,n.samplers[t.regnum]=t):(t.indexregtype=i.readUnsignedByte(),t.indexselect=i.readUnsignedByte(),t.indirectflag=i.readUnsignedByte()),t.indirectflag&&(n.hasindirect=!0),!t.indirectflag&&e)for(var r=0;r<e;r++)n.regread[t.regtype][t.regnum+r]=n.regread[t.regtype][t.regnum]},t}(),oe=Tt.instance.addStore("stage",{PREF_WEBGL_VERSION:2,USE_300_SHADERS_FOR_WEBGL2:!0,ENABLE_MULTISAMPLE_TEXTURE:!0,ENABLE_ANTIALIAS:!0,ENABLE_WEAK_REF:!0,PROFILE_CONTEXT_LOST:!1,ENABLE_UNLOAD_BITMAP:!0,MAX_BITMAP_UNLOAD_TASKS:10,MAX_BITMAP_UNLOAD_TASKS_ASYNC:50,ENABLE_UNLOAD_TEXTURE:!0,ENABLE_TEXTURE_POOLING:!1,ENABLE_UNLOAD_BUFFER:!0,MAX_BUFFER_POOL_SIZE:300,MAX_BUFFER_ALIVE_TIME:5e3,ENABLE_BUFFER_POOLING:!1,ENABLE_VAO:!0,ENABLE_UNIFORM_CACHE:!1,ENABLE_ASYNC_READ:!0,ENABLE_PARSER_NATIVE_BITMAP:!0,ENABLE_TEXTURE_REF_CLONE:!1,UNSAFE_USE_AUTOINDEXED_SAMPLER:!0,UNSAFE_USE_AUTOINDEXED_ATTRIBUTES:!0,UNSAFE_USE_SHADER_COMPOSER:!0,USE_NON_NATIVE_BLEND:!1}),ae=function(){function t(){this._usedLibs={},this._usedTemps={}}return t.prototype._linkLib=function(t){var e=this._usedLibs;return!e[t]&&ee.lib[t]?(e[t]=!0,this._header+="\n"+ee.lib[t]+"\n",!0):e[t]},t.prototype.parse=function(e,n,i){void 0===i&&(i=!1),i=oe.USE_300_SHADERS_FOR_WEBGL2&&i,this._usedTemps={},this._usedLibs={},this._header="",this._body="",this._header+=i?"#version 300 es\n":"#version 100\n",this._header+="precision "+n+" float;\n";var r=e.header.type[0],o=e.regread[1].length;o>0&&(this._header+="uniform vec4 "+r+"c["+o+"];\n");for(var a=0;a<e.regread[0].length;a++)e.regread[0][a]&&(this._header+=(i?"in":"attribute")+" vec4 va"+a+";\n");for(a=0;a<e.regread[4].length||a<e.regwrite[4].length;a++)(e.regread[4][a]||e.regwrite[4][a])&&(this._header+=i?("vertex"===e.header.type?"out":"in")+" vec4 vi"+a+";\n":"varying vec4 vi"+a+";\n");for(a=0;a<e.samplers.length;a++)e.samplers[a]&&(this._header+="uniform sampler"+t.SAMPLERS[3&e.samplers[a].dim]+" fs"+a+";\n");"vertex"==e.header.type?this._header+="vec4 outpos;\n":i&&(this._header+="out vec4 outColor;\n"),e.writedepth&&(this._header+="vec4 tmp_FragDepth;\n");var s=!1;this._body+="void main() {\n";for(a=0;a<e.tokens.length;a++){var l=e.tokens[a],u=ee.agal2glsllut[l.opcode],c=this._linkLib(l.opcode);if(-1==u.s.indexOf("dFdx")&&-1==u.s.indexOf("dFdy")||(s=!0),!u)throw"Opcode not valid or not implemented yet: ";for(var h=c?1:u.matrixheight||1,p=0;p<h;p++){var d="  "+u.s,f="",_="float",g="";if(l.dest){if(u.matrixheight&&!c){if(1&~(l.dest.mask>>p))continue;g=t.SWIZZLE[p],f=this.regtostring(l.dest.regtype,l.dest.regnum,e,r,i),f+="."+g}else if(f=this.regtostring(l.dest.regtype,l.dest.regnum,e,r,i),15!=l.dest.mask){var m=0;switch(g="",1&l.dest.mask&&(m++,g+="x"),2&l.dest.mask&&(m++,g+="y"),4&l.dest.mask&&(m++,g+="z"),8&l.dest.mask&&(m++,g+="w"),f+="."+g,m){case 1:_="float";break;case 2:_="vec2";break;case 3:_="vec3";break;default:throw"Unexpected destination mask"}}else _="vec4",g="xyzw";if(2==l.dest.regtype&&!this._usedTemps[l.dest.regnum]){var y=r+"t"+l.dest.regnum;"vec4"===_?f="vec4 "+y:d="    vec4 "+y+";\n"+d,this._usedTemps[l.dest.regnum]=!0}d=(d=(d=d.replace("%dest",f)).replace("%cast",_)).replace("%dm",g)}var A=15;if(!u.ndwm&&u.dest&&l.dest&&(A=l.dest.mask),l.a&&(d=(d=d.replace("%a",this.sourcetostring(l.a,0,A,u.scalar,e,r,i))).replace("%ia",""+l.a.regnum)),l.b&&(d=(d=d.replace("%b",this.sourcetostring(l.b,p,A,u.scalar,e,r,i))).replace("%ib",""+l.b.regnum),5==l.b.regtype)){var v=t.SAMPLERS[l.b.dim],b=["vec2","vec3","vec3"][l.b.dim];d=(d=(d=d.replace("%texdim",i?"":v)).replace("%texsize",b)).replace("%lod","")}this._body+=d}}return"vertex"==e.header.type&&(this._body+="  gl_Position = vec4(outpos.x, outpos.y, outpos.z*2.0 - outpos.w, outpos.w);\n"),s&&"fragment"==e.header.type&&(this._header="#extension GL_OES_standard_derivatives : enable\n"+this._header),e.writedepth&&(this._body+="  gl_FragDepth = clamp(tmp_FragDepth,0.0,1.0);\n"),this._body+="}\n",this._header+this._body},t.prototype.regtostring=function(t,e,n,i,r){switch(t){case 0:return"va"+e;case 1:return n.header.type[0]+"c["+e+"]";case 2:return i+"t"+e;case 3:return"vertex"==n.header.type?"outpos":r?"outColor":"gl_FragColor";case 4:return"vi"+e;case 5:return"fs"+e;case 15:if(void 0===n.native[e])throw"Native mapping not presented for register:"+e;return n.native[e];default:throw"Unknown register type"}},t.prototype.sourcetostring=function(e,n,i,r,o,a,s){var l,u=t.SWIZZLE;if(e.indirectflag){l="vcarrr[int("+this.regtostring(e.indexregtype,e.regnum,o,a,s)+"."+u[e.indexselect]+")";var c=n+e.indexoffset;c<0&&(l+=c.toString()),c>0&&(l+="+"+c.toString()),l+="]"}else l=this.regtostring(e.regtype,e.regnum+n,o,a,s);return 5==e.regtype||15==e.regtype?l:r?l+"."+u[3&e.swizzle]:(228==e.swizzle&&15==i||(l+=".",1&i&&(l+=u[3&e.swizzle]),2&i&&(l+=u[e.swizzle>>2&3]),4&i&&(l+=u[e.swizzle>>4&3]),8&i&&(l+=u[e.swizzle>>6&3])),l)},t.SWIZZLE=["x","y","z","w"],t.SAMPLERS=["2D","Cube","3D",""],t.maxvertexconstants=128,t.maxfragconstants=28,t.maxtemp=8,t.maxstreams=8,t.maxtextures=8,t}();!function(t){t[t.DESTINATION_ALPHA=0]="DESTINATION_ALPHA",t[t.DESTINATION_COLOR=1]="DESTINATION_COLOR",t[t.ONE=2]="ONE",t[t.ONE_MINUS_DESTINATION_ALPHA=3]="ONE_MINUS_DESTINATION_ALPHA",t[t.ONE_MINUS_DESTINATION_COLOR=4]="ONE_MINUS_DESTINATION_COLOR",t[t.ONE_MINUS_SOURCE_ALPHA=5]="ONE_MINUS_SOURCE_ALPHA",t[t.ONE_MINUS_SOURCE_COLOR=6]="ONE_MINUS_SOURCE_COLOR",t[t.SOURCE_ALPHA=7]="SOURCE_ALPHA",t[t.SOURCE_COLOR=8]="SOURCE_COLOR",t[t.ZERO=9]="ZERO"}(Bt||(Bt={})),function(t){t[t.ADD=0]="ADD",t[t.SUBTRACT=1]="SUBTRACT",t[t.REVERSE_SUBTRACT=2]="REVERSE_SUBTRACT",t[t.MIN=3]="MIN",t[t.MAX=4]="MAX"}(Ot||(Ot={})),function(t){t[t.COLOR=1]="COLOR",t[t.DEPTH=2]="DEPTH",t[t.STENCIL=4]="STENCIL",t[t.ALL=7]="ALL"}(Mt||(Mt={})),function(t){t[t.ALWAYS=0]="ALWAYS",t[t.EQUAL=1]="EQUAL",t[t.GREATER=2]="GREATER",t[t.GREATER_EQUAL=3]="GREATER_EQUAL",t[t.LESS=4]="LESS",t[t.LESS_EQUAL=5]="LESS_EQUAL",t[t.NEVER=6]="NEVER",t[t.NOT_EQUAL=7]="NOT_EQUAL"}(Lt||(Lt={})),function(t){t[t.TRIANGLES=0]="TRIANGLES",t[t.LINES=1]="LINES"}(Rt||(Rt={})),function(t){t[t.MIPLINEAR=0]="MIPLINEAR",t[t.MIPNEAREST=1]="MIPNEAREST",t[t.MIPNONE=2]="MIPNONE"}(Nt||(Nt={})),function(t){t[t.BASELINE=0]="BASELINE",t[t.BASELINE_CONSTRAINED=1]="BASELINE_CONSTRAINED",t[t.BASELINE_EXTENDED=2]="BASELINE_EXTENDED"}(Ft||(Ft={})),function(t){t[t.FRAGMENT=0]="FRAGMENT",t[t.SAMPLER=1]="SAMPLER",t[t.VERTEX=2]="VERTEX"}(kt||(kt={})),function(t){t[t.DECREMENT_SATURATE=0]="DECREMENT_SATURATE",t[t.DECREMENT_WRAP=1]="DECREMENT_WRAP",t[t.INCREMENT_SATURATE=2]="INCREMENT_SATURATE",t[t.INCREMENT_WRAP=3]="INCREMENT_WRAP",t[t.INVERT=4]="INVERT",t[t.KEEP=5]="KEEP",t[t.SET=6]="SET",t[t.ZERO=7]="ZERO"}(Ut||(Ut={})),function(t){t[t.LINEAR=0]="LINEAR",t[t.NEAREST=1]="NEAREST"}(Vt||(Vt={})),function(t){t[t.BGRA=0]="BGRA",t[t.BGRA_PACKED=1]="BGRA_PACKED",t[t.BGR_PACKED=2]="BGR_PACKED",t[t.COMPRESSED=3]="COMPRESSED",t[t.COMPRESSED_ALPHA=4]="COMPRESSED_ALPHA"}(jt||(jt={})),function(t){t[t.BACK=0]="BACK",t[t.FRONT=1]="FRONT",t[t.FRONT_AND_BACK=2]="FRONT_AND_BACK",t[t.NONE=3]="NONE"}(Gt||(Gt={})),function(t){t[t.FLOAT_1=0]="FLOAT_1",t[t.FLOAT_2=1]="FLOAT_2",t[t.FLOAT_3=2]="FLOAT_3",t[t.FLOAT_4=3]="FLOAT_4",t[t.BYTE_1=4]="BYTE_1",t[t.BYTE_2=5]="BYTE_2",t[t.BYTE_3=6]="BYTE_3",t[t.BYTE_4=7]="BYTE_4",t[t.UNSIGNED_BYTE_1=8]="UNSIGNED_BYTE_1",t[t.UNSIGNED_BYTE_2=9]="UNSIGNED_BYTE_2",t[t.UNSIGNED_BYTE_3=10]="UNSIGNED_BYTE_3",t[t.UNSIGNED_BYTE_4=11]="UNSIGNED_BYTE_4",t[t.SHORT_1=12]="SHORT_1",t[t.SHORT_2=13]="SHORT_2",t[t.SHORT_3=14]="SHORT_3",t[t.SHORT_4=15]="SHORT_4",t[t.UNSIGNED_SHORT_1=16]="UNSIGNED_SHORT_1",t[t.UNSIGNED_SHORT_2=17]="UNSIGNED_SHORT_2",t[t.UNSIGNED_SHORT_3=18]="UNSIGNED_SHORT_3",t[t.UNSIGNED_SHORT_4=19]="UNSIGNED_SHORT_4"}(Qt||(Qt={})),function(t){t[t.CLAMP=0]="CLAMP",t[t.REPEAT=1]="REPEAT"}(zt||(zt={})),function(t){t[t.AUTO=0]="AUTO",t[t.WEBGL=1]="WEBGL",t[t.FLASH=2]="FLASH",t[t.GLES=3]="GLES",t[t.NATIVE=4]="NATIVE",t[t.SOFTWARE=5]="SOFTWARE"}(Ht||(Ht={}));var se=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e=null),this.id=t,this.type=e,this.wrap=0,this.filter=0,this.mipfilter=0,this.boundedTexture=null,this._dirty=!0}return Object.defineProperty(t.prototype,"valid",{get:function(){return null!==this.type&&this.id>=0},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e,n){return this._dirty=this._dirty||t!=t||e!=e||n!=n,this.wrap=t,this.filter=e,this.mipfilter=n,this},t.prototype.equals=function(t){return this.type===t.type&&this.wrap===t.wrap&&this.filter===t.filter&&this.mipfilter===t.mipfilter},t.prototype.copyFrom=function(t){return this.type=t.type,this.wrap=t.wrap,this.filter=t.filter,this.mipfilter=t.mipfilter,this},t.prototype.dispose=function(){this.id=-1,this.type=null,this.wrap=0,this.filter=0,this.mipfilter=0},t}(),le=function(){return function(t,e,n){this.x=t,this.y=e,this.id=n}}(),ue=function(t){function e(e,n){var i=t.call(this,e)||this;return i._image=n,i}return o(e,t),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},enumerable:!1,configurable:!0}),e.INVALIDATE_MIPMAPS="invalidateMipmaps",e}(c),ce=function(t){function e(e,n){var i=t.call(this,e)||this;return i._stage=n,i}return o(e,t),Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._stage)},e.STAGE_ERROR="stageError",e.CONTEXT_CREATED="contextCreated",e.CONTEXT_DISPOSED="contextDisposed",e.CONTEXT_RECREATED="contextRecreated",e.INVALIDATE_SIZE="invalidateSize",e}(c),he=function(){function t(){}return t.getImageBuffer=function(t){var e=this.CANVAS||(this.CANVAS=document.createElement("canvas")),n=this.CONTEXT||(this.CONTEXT=e.getContext("2d",{willReadFrequently:!0}));return t instanceof HTMLImageElement?(e.width=t.naturalWidth,e.height=t.naturalHeight):(e.width=t.width,e.height=t.height),n.drawImage(t,0,0),n.getImageData(0,0,e.width,e.height).data},t.imageToBitmapImage2D=function(e,n,i){var r,o;void 0===i&&(i=!0),e instanceof HTMLImageElement?(r=e.naturalWidth,o=e.naturalHeight):(r=e.width,o=e.height);var a=n.createImage2D(r,o,!0,null,i);return a.addLazySymbol({needParse:!0,definition:{width:r,height:o,isPMA:!0,data:null},lazyParser:function(){return this.needParse=!1,this.definition.data=t.getImageBuffer(e),this.lazyParser=null,this}}),a},t.isImage2DValid=function(t){return null==t||this.isDimensionValid(t.width,t.powerOfTwo)&&this.isDimensionValid(t.height,t.powerOfTwo)},t.isHTMLImageElementValid=function(t){return null==t||this.isDimensionValid(t.width)&&this.isDimensionValid(t.height)},t.isDimensionValid=function(t,e){return void 0===e&&(e=!0),t>=1&&t<=this.MAX_SIZE&&(!e||this.isPowerOfTwo(t))},t.isPowerOfTwo=function(t){return!!t&&(t&-t)==t},t.getBestPowerOf2=function(t){for(var e=1;e<t;)e<<=1;return e>this.MAX_SIZE&&(e=this.MAX_SIZE),e},t.getDefaultImage2D=function(){return this._defaultImage2D||(this._defaultImage2D=this._defaultImage2DFactory())},t.getDefaultImageCube=function(){return this._defaultImageCube||(this._defaultImageCube=this._defaultImageCubeFactory())},t.getDefaultImageSampler=function(){return this._defaultImageSampler||(this._defaultImageSampler=this._defaultImageSamplerFactory())},t.registerDefaults=function(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),t&&(this._defaultImage2DFactory=t),e&&(this._defaultImageCubeFactory=e),n&&(this._defaultImageSamplerFactory=n),i&&(this._defaultFactory=i)},t.MAX_SIZE=8192,t}(),pe=function(t){function e(){var e=t.call(this)||this;return e._format="bgra",e._isDisposed=!1,e}return o(e,t),Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._isDisposed=!0,this.clear()},e.prototype.invalidateMipmaps=function(){this.dispatchEvent(new ue(ue.INVALIDATE_MIPMAPS,this))},e}(_),de=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.usages=0,i._invalidMipmaps=!0,i._invalidMapper=!0,i._stage=n,i._onInvalidateMipmapsDelegate=function(t){return i._onInvalidateMipmaps(t)},i._asset.addEventListener(ue.INVALIDATE_MIPMAPS,i._onInvalidateMipmapsDelegate),i}return o(e,t),e.prototype.getTexture=function(){return this._texture||(this._createTexture(),this._invalid=!0),this._texture},e.prototype.getType=function(){throw new u},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._texture&&(this._texture.dispose(),this._texture=null)},e.prototype.activate=function(t,e){void 0===e&&(e=null),e||(e=he.getDefaultImageSampler());var n=!(!e.mipmap||this._stage.globalDisableMipmap)&&e.mipmap;this._stage.setSamplerAt(t,e),this._stage.context.setTextureAt(t,this.getTexture()),!this._mipmap&&n&&(this._mipmap=!0,this._invalidMipmaps=!0),this._invalidMipmaps&&(this._invalidMipmaps=!1,n&&this._texture.generateMipmaps())},e.prototype._createTexture=function(){throw new u},e.prototype._onInvalidateMipmaps=function(t){this._invalidMipmaps=!0},e}(J),fe=function(t){function e(e,n,i){void 0===i&&(i=!0);var r=t.call(this)||this;return r._powerOfTwo=!0,r._rect=new W(0,0,Math.round(e),Math.round(n)),r._powerOfTwo=i,r._testDimensions(),r}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._rect.height},set:function(t){this._setSize(this._rect.width,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaChannel",{get:function(){return this._alphaChannel},set:function(t){this._alphaChannel=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rect",{get:function(){return this._rect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._rect.width},set:function(t){this._setSize(t,this._rect.height)},enumerable:!1,configurable:!0}),e.prototype._setSize=function(t,e){t=Math.round(t),e=Math.round(e),this._rect.width==t&&this._rect.height==e||(this.clear(),this._rect.width=t,this._rect.height=e,this._testDimensions())},e.prototype._testDimensions=function(){if(this._powerOfTwo&&(!he.isDimensionValid(this._rect.width)||!he.isDimensionValid(this._rect.height)))throw new Error("Invalid dimension: Width and height must be power of 2 and cannot exceed 2048")},Object.defineProperty(e.prototype,"powerOfTwo",{get:function(){return this._powerOfTwo},set:function(t){this._powerOfTwo!=t&&(this._powerOfTwo=t,this._testDimensions())},enumerable:!1,configurable:!0}),e.assetType="[image Image2D]",e}(pe),_e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getType=function(){return"2d"},e.prototype._createTexture=function(){this._texture=this._stage.context.createTexture(this._asset.width,this._asset.height,jt.BGRA,!0)},e}(de);function ge(t,e){return t.priority-e.priority}var me=function(){function t(){}return t.createManager=function(t){t=Object.assign({name:ye.name+":"+this.managers.length},t||{});var e=new ye(t);return this.managers.push(e),this.managers.sort(ge),e},t.executeAll=function(){for(var t=0,e=this.managers;t<e.length;t++){var n=e[t],i=n.execute();i&&console.debug("[UnloadService:".concat(n.name,", tick: ").concat(this.tick,"] unloaded:"),i)}this.tick++},t.clearAll=function(){for(var t=0,e=this.managers;t<e.length;t++){e[t].clear()}this.tick=0,this.managers.length=0},t.tick=0,t.managers=[],t}(),ye=function(){function t(e){var n;this._tasks=new Set,this.name=t.name,this.priority=0,this.keepAliveTime=1e4,this.exectuionTimeout=5e3,this.unloadTaskShift=1e3,this.maxUnloadTask=100,this._lastExecutionTime=0,this._lastCorrectedTime=-1,e&&(this.name=e.name||this.name,this.priority=null!==(n=e.priority)&&void 0!==n?n:this.priority,this.keepAliveTime=e.keepAliveTime||this.keepAliveTime,this.maxUnloadTask=e.maxUnloadTasks||this.maxUnloadTask,this.exectuionTimeout=e.exectionPeriod||this.exectuionTimeout)}return Object.defineProperty(t.prototype,"correctedTime",{get:function(){var e=performance.now();return(this._lastCorrectedTime<0||this._lastCorrectedTime-e>=t.MIN_QUANT)&&(e+=t.MIN_QUANT),this._lastCorrectedTime=e},enumerable:!1,configurable:!0}),t.prototype.addTask=function(t){return!(!t||this._tasks.has(t))&&(this._tasks.add(t),!0)},t.prototype.removeTask=function(t){return this._tasks.delete(t)},t.prototype.execute=function(t){if(void 0===t&&(t=!1),this._tasks.size){var e=this.correctedTime;if(!t){if(!this._lastExecutionTime)return void(this._lastExecutionTime=e);if(e-this._lastExecutionTime<this.exectuionTimeout)return}this._lastExecutionTime=e;for(var n=[],i=this._tasks.values(),r=0,o=this._tasks.size;r<o;r++){var a=i.next().value;if(a.canUnload&&e-a.lastUsedTime>(a.keepAliveTime||this.keepAliveTime)&&(a.unload(),n[n.length]=a,n.length>=this.maxUnloadTask)){this._lastExecutionTime-=this.exectuionTimeout-this.unloadTaskShift;break}}for(var s=0,l=n;s<l.length;s++){var u=l[s];this._tasks.delete(u)}return n.length}},t.prototype.clear=function(){this._tasks.clear()},t.MIN_QUANT=32,t}(),Ae=function(){function t(){}return t.ALPHA=8,t.BLUE=4,t.GREEN=2,t.RED=1,t}(),ve=function(){function t(t){this._x=t}return t.prototype.gen=function(){return this._x=16807*this._x%2147483647},t.prototype.genRange=function(t,e){return t+this.gen()%(e-t+1)},t}(),be=2147483647,xe=127773,Ce=256,Ie=255,Ee=4096,we=function(){function t(t){this.seed=0,t<=0&&(t=-t%(be-1)+1),t>be-1&&(t=be-1),this.seed=t}return t.prototype.next=function(){var t=this.seed%xe*16807-2836*(this.seed/xe|0);return t<=0&&(t+=be),t},t}();function Se(t){return t*t*(3-2*t)}function De(t,e,n){return e+t*(n-e)}var Te=function(){function t(t,e){this.gradient=t,this.lattice_selector=e}return t.prototype.noise2=function(t,e,n){var i=e[0]+Ee,r=0|i,o=r+1,a=i-(0|i),s=a-1,l=e[1]+Ee,u=0|l,c=u+1,h=l-(0|l),p=h-1;n&&(r>=n.wrap_x&&(r-=n.width),o>=n.wrap_x&&(o-=n.width),u>=n.wrap_y&&(u-=n.height),c>=n.wrap_y&&(c-=n.height)),r&=Ie,o&=Ie,u&=Ie,c&=Ie;var d=this.lattice_selector[r],f=this.lattice_selector[o],_=this.lattice_selector[d+u],g=this.lattice_selector[f+u],m=this.lattice_selector[d+c],y=this.lattice_selector[f+c],A=Se(a),v=Se(h),b=this.gradient[t][_],x=a*b[0]+h*b[1],C=this.gradient[t][g],I=De(A,x,s*C[0]+h*C[1]),E=this.gradient[t][m],w=a*E[0]+p*E[1],S=this.gradient[t][y],D=De(A,w,s*S[0]+p*S[1]);return De(v,I,D)},t.prototype.turbulence=function(t,e,n,i,r,o,a,s,l){void 0===l&&(l=null);var u=null;if(o){if(0!==n[0]){var c=Math.floor(s[0]*n[0])/s[0],h=Math.ceil(s[0]*n[0])/s[0];n[0]/c<h/n[0]?n[0]=c:n[0]=h}if(0!==n[1]){c=Math.floor(s[1]*n[1])/s[1],h=Math.ceil(s[1]*n[1])/s[1];n[1]/c<h/n[1]?n[1]=c:n[1]=h}var p=s[0]*n[0]+.5|0,d=s[1]*n[1]+.5|0;u={width:p,height:d,wrap_x:a[0]*n[0]|4096+p,wrap_y:a[1]*n[1]|4096+d}}for(var f=0,_=1,g=[0,0],m=0;m<i;m++){var y=l?l[m]:g,A=[(e[0]+y[0])*n[0]*_,(e[1]+y[1])*n[1]*_],v=this.noise2(t,A,u);f+=(r?v:Math.abs(v))/_,_*=2,u&&(u.width*=2,u.wrap_x=2*u.wrap_x-Ee,u.height*=2,u.wrap_y=2*u.wrap_y-Ee)}return f},t.fromSeed=function(e){for(var n,i=Array.from({length:514},(function(){return 0})),r=[],o=new we(e),a=0;a<4;a++){r[a]=Array.from({length:514},(function(){return[0,0]}));for(var s=0;s<Ce;s++){i[s]=s;for(var l=0;l<2;l++)e=o.next(),o.seed=e,r[a][s][l]=(e%512-Ce)/Ce;n=Math.sqrt(r[a][s][0]*r[a][s][0]+r[a][s][1]*r[a][s][1]),r[a][s][0]/=n,r[a][s][1]/=n}}for(s=255;s>=0;s--){a=i[s];e=o.next(),o.seed=e;l=e%Ce;i[s]=i[l],i[l]=a}for(s=0;s<258;s++){i[Ce+s]=i[s];for(a=0;a<4;a++)for(l=0;l<2;l++)r[a][Ce+s][l]=r[a][s][l]}return new t(r,i)},t}(),Pe=function(){function t(){}return t.drawBitmap=function(e,n,i,r,o,a,s,l,u,c,h){if(void 0===h&&(h=null),h||u!=r||c!=o){h||(h=new M).scale(u/r,c/o);var p=Math.sqrt(h.a*h.a+h.b*h.b),d=Math.sqrt(h.c*h.c+h.d*h.d),f=r*p,_=o*d;if(h.tx+=s,h.ty+=l,s=Math.floor(h.tx),l=Math.floor(h.ty),h.invert(),p>=1||d>=1)for(var g=new O,m=s;m<s+f;m++)for(var y=l;y<l+_;y++){g.x=m,g.y=y,g=h.transformPoint(g);var A=t.sampleBilinear(g.x,g.y,e,r,o);t.applyPixel32(a,u,c,m,y,A)}else{var v=new O,b=new O;for(m=s;m<s+f;m++)for(y=l;y<l+_;y++){v.x=m,v.y=y,v=h.transformPoint(v),b.x=m+1,b.y=y+1,b=h.transformPoint(b);A=t.sampleBox(v.x+n,v.y+i,b.x+n,b.y+i,e,r,o);t.applyPixel32(a,u,c,m,y,A)}}h.invert()}else for(m=s;m<s+r;m++)for(y=l;y<l+o;y++){A=t.sample(m-s+n,y-l+i,e,r,o);t.applyPixel32(a,u,c,m,y,A)}},t.applyPixel32=function(t,e,n,i,r,o){if(i=Math.floor(i),r=Math.floor(r),!(i<0||i>=e||r>=n||r<0)){var a=4*(i+r*e);t[a]=o[0],t[a+1]=o[1],t[a+2]=o[2],t[a+3]=o[3],t[a]=255&t[a],t[a+1]=255&t[a+1],t[a+2]=255&t[a+2],t[a+3]=255&t[a+3]}},t.sampleBilinear=function(e,n,i,r,o,a,s){void 0===a&&(a=1),void 0===s&&(s=1);var l=t.sample(e,n,i,r,o),u=t.sample(e+a,n,i,r,o),c=t.sample(e,n+s,i,r,o),h=t.sample(e+a,n+s,i,r,o),p=e;p-=Math.floor(p);var d=t.interpolateColor(l,u,p),f=t.interpolateColor(c,h,p),_=n;return _-=Math.floor(_),t.interpolateColor(d,f,_)},t.sample=function(t,e,n,i,r){t=Math.floor(t),e=Math.floor(e);var o=[0,0,0,0];if(t<0||t>=i||e<0||e>=r)return o;var a=4*(t+e*i);return o[0]=n[a],o[1]=n[a+1],o[2]=n[a+2],o[3]=n[a+3],o},t.sampleBox=function(e,n,i,r,o,a,s){var l,u,c,h,p=0,d=[0,0,0,0],f=Math.floor(n),_=Math.ceil(r);for(f=Math.max(Math.min(f,s-1),0),_=Math.max(Math.min(_,s-1),0),u=f;u<_;u++){h=1,u<n&&(h*=1-(n-u)),u>r&&(h*=1-(u-r));var g=Math.floor(e),m=Math.ceil(i);for(g=Math.max(Math.min(g,a-1),0),m=Math.max(Math.min(m,a-1),0),l=g;l<m;l++){c=h;var y=t.sample(l,u,o,a,s);l<e&&(c*=1-(e-l)),l>i&&(c*=1-(l-i)),d[0]+=y[0]*c,d[1]+=y[1]*c,d[2]+=y[2]*c,d[3]+=y[3]*c,p+=c}}return d[0]/=p,d[1]/=p,d[2]/=p,d[3]/=p,d[0]=255&d[0],d[1]=255&d[1],d[2]=255&d[2],d[3]=255&d[3],d},t.interpolateColor=function(t,e,n){var i=[];return i[0]=t[0]+(e[0]-t[0])*n,i[1]=t[1]+(e[1]-t[1])*n,i[2]=t[2]+(e[2]-t[2])*n,i[3]=t[3]+(e[3]-t[3])*n,i},t}(),Be="WeakRef"in window,Oe=!1;function Me(t,e){return void 0===e&&(e=!0),((e?4278190080&t:4278190080)|(255&t)<<16|65280&t|(16711680&t)>>16&255)>>>0}var Le=function(t){function e(n,i,r,o,a,s){void 0===r&&(r=!0),void 0===o&&(o=null),void 0===a&&(a=!0),void 0===s&&(s=null);var l=t.call(this,n,i,a)||this;return l._isSymbolSource=!1,l._isWeakRef=!1,l._unpackPMA=!0,l._locked=!1,l._floodStack=[],l._nestedBitmap=[],l.needUpload=!1,l.wasUpload=!1,l.isUnloaded=!1,l.lastUsedTime=0,s&&e.getManager(s),l._transparent=r,l._stage=s,null!=o&&l.fillRect(l._rect,o),l}return o(e,t),e.getManager=function(t){if(!oe.ENABLE_UNLOAD_BITMAP||!t)return null;if(this._unloadManager)return this._unloadManager;var e=t.context.hasFence;return this._unloadManager=me.createManager({name:"BitmapImage2D"+(e?"async":""),priority:0,maxUnloadTasks:e?oe.MAX_BITMAP_UNLOAD_TASKS_ASYNC:oe.MAX_BITMAP_UNLOAD_TASKS,exectionPeriod:100}),this._unloadManager},e.prototype.getDataInternal=function(t,e){if(void 0===t&&(t=!0),this.applySymbol(),this._data||!t&&!this._alphaChannel||(this._data=new Uint8ClampedArray(this.width*this.height*4)),this._alphaChannel){for(var n=this._alphaChannel,i=this._data,r=0;r<n.length;r++)n[r]<=1&&(i[4*r+0]=i[4*r+1]=i[4*r+2]=0),i[4*r+3]=n[r];this._alphaChannel=null,this._transparent=!0,this._unpackPMA=!1}return this._data},Object.defineProperty(e.prototype,"sourceBitmap",{get:function(){return this._sourceBitmap},enumerable:!1,configurable:!0}),e.prototype.invalidateGPU=function(){this.needUpload||(this.needUpload=!0,this.invalidate())},e.prototype.invalidate=function(){this._locked||t.prototype.invalidate.call(this)},Object.defineProperty(e.prototype,"canUnload",{get:function(){return!(this._sourceBitmap||this._nestedBitmap.length||this._locked||this._isSymbolSource)},enumerable:!1,configurable:!0}),e.prototype.unmarkToUnload=function(){var t;null===(t=e.getManager(this._stage))||void 0===t||t.removeTask(this)},e.prototype.markToUnload=function(){e.getManager(this._stage)&&(this._isSymbolSource||(this.lastUsedTime=e._unloadManager.correctedTime,e._unloadManager.addTask(this)))},e.prototype.unload=function(){this.lastUsedTime=-1,this.dispatchEvent(new h(e.UNLOAD_EVENT,this)),this.invalidateGPU()},e.prototype.addMipLevel=function(t){this._customMipLevels||(this._customMipLevels=[]),this._customMipLevels.push(t)},Object.defineProperty(e.prototype,"mipLevels",{get:function(){return this._customMipLevels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transparent",{get:function(){return this._transparent},set:function(t){this._transparent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unpackPMA",{get:function(){return this._unpackPMA&&this._transparent},enumerable:!1,configurable:!0}),e.prototype.addLazySymbol=function(t){this._lazySymbol=t,this._isSymbolSource=!0,this.invalidateGPU()},e.prototype.applySymbol=function(){return!!this._lazySymbol&&(this._lazySymbol.needParse&&this._lazySymbol.lazyParser(),this._data=this._lazySymbol.definition.data,this._unpackPMA=!this._lazySymbol.definition.isPMA,this._lazySymbol=null,!0)},e.prototype.useWeakRef=function(){Oe||(Oe=!0,(Be=Be&&oe.ENABLE_WEAK_REF)&&console.debug("[ImageBitmap2D Experemental] Use WeakRef for ImageBitmap2D")),Be&&!this._isWeakRef&&(this._isWeakRef=!0,this._finalizer||(this._finalizer=new FinalizationRegistry(this.onAdapterDropped.bind(this))),this.adapter=this._adapter)},e.prototype.unuseWeakRef=function(){this._isWeakRef&&(this._isWeakRef=!1,this._finalizer.unregister(this),this._weakRefAdapter=null,this.adapter=this._adapter)},Object.defineProperty(e.prototype,"isWeakRef",{get:function(){return this._isWeakRef},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adapter",{get:function(){return(this._weakRefAdapter?this._weakRefAdapter.deref():this._adapter)||this},set:function(t){this._isWeakRef?(this._finalizer.unregister(this),t?(this._weakRefAdapter=new WeakRef(t),this._finalizer.register(this,this.id,this)):this._weakRefAdapter=null,this._adapter=null):this._adapter=t},enumerable:!1,configurable:!0}),e.prototype.onAdapterDropped=function(t){console.debug("[ImageBitmap2D Experemental] Disposing adaptee, GC runs for:",t),this.dispose()},e.prototype.addNestedReference=function(t){this._sourceBitmap?this._sourceBitmap.addNestedReference(t):(this._nestedBitmap.push(t),t._sourceBitmap=this)},e.prototype.dropNestedReference=function(t){var e=this._nestedBitmap.indexOf(t);return e>-1&&!!this._nestedBitmap.splice(e,1)},e.prototype.dropAllReferences=function(t){if(void 0===t&&(t=!0),this._nestedBitmap.length){for(var e=0,n=this._nestedBitmap;e<n.length;e++){n[e].dropAllReferences(!1)}this._nestedBitmap.length=0}if(this._sourceBitmap){var i=this._sourceBitmap;this._sourceBitmap=null,t&&i.dropNestedReference(this),this.deepClone(i)}},e.prototype.deepClone=function(t){this.setPixels(this._rect,t.data),this.invalidateGPU()},e.prototype.copyTo=function(t){return oe.ENABLE_TEXTURE_REF_CLONE?this.addNestedReference(t):t.deepClone(this),t},e.prototype.clone=function(){var t=new e(this._rect.width,this._rect.height,this._transparent,null,this._powerOfTwo);return oe.ENABLE_TEXTURE_REF_CLONE?this.addNestedReference(t):t.deepClone(this),t},e.prototype.colorTransform=function(t,e){var n,i,r;this.dropAllReferences();var o=this.data;for(n=0;n<t.width;++n)for(i=0;i<t.height;++i)o[r=4*(n+t.x+(i+t.y)*this._rect.width)]=o[r]*e.redMultiplier+e.redOffset,o[r+1]=o[r+1]*e.greenMultiplier+e.greenOffset,o[r+2]=o[r+2]*e.blueMultiplier+e.blueOffset,o[r+3]=o[r+3]*e.alphaMultiplier+e.alphaOffset;this.invalidateGPU()},e.prototype.copyChannel=function(t,e,n,i,r){this.dropAllReferences();var o,a,s,l=t.data,u=this.data,c=Math.round(Math.log(i)/Math.log(2)),h=Math.round(Math.log(r)/Math.log(2)),p=Math.round(e.x),d=Math.round(e.y),f=Math.round(n.x),_=Math.round(n.y);for(o=0;o<e.width;++o)for(a=0;a<e.height;++a)s=4*(o+p+(a+d)*t.width),u[4*(o+f+(a+_)*this._rect.width)+h]=l[s+c];this.invalidateGPU()},e.prototype.merge=function(t,e,n,i,r,o,a){this.dropAllReferences();var s,l,u,c=this.getDataInternal(!0),h=t.data;for(i=~~i,r=~~r,o=~~o,a=~~a,s=0;s<e.width;++s)for(l=0;l<e.height;++l)c[u=4*(s+e.x+(l+e.y)*this.width)]=~~((h[u]*i+c[u]*(256-i))/256),c[u+1]=~~((h[u+1]*r+c[u+1]*(256-r))/256),c[u+2]=~~((h[u+2]*o+c[u+2]*(256-o))/256),c[u+3]=~~((h[u+3]*a+c[u+3]*(256-a))/256);this.invalidateGPU()},e.prototype.dispose=function(){var t;null===(t=e.getManager(this._stage))||void 0===t||t.removeTask(this),this._isWeakRef&&this._finalizer.unregister(this),this.dropAllReferences(),this._data=null,this._rect=null,this._transparent=null,this._locked=null,this._isDisposed=!0,this.clear()},e.prototype.getColorBoundsRect=function(t,e,n){void 0===n&&(n=!0);var i=new Uint32Array(this.getDataInternal(!0).buffer),r=this.rect;e=Me(e,this._transparent),t=Me(t,this._transparent);for(var o=r.width,a=r.height,s=0,l=0,u=!1,c=0;c<r.height;c++)for(var h=0;h<r.width;h++){var p=i[c*r.width+h];((p=(p&t)>>>0)===e&&n||p!==e&&!n)&&(u=!0,o=h<o?h:o,s=h>s?h:s,a=c<a?c:a,l=c>l?c:l)}return u?new W(o,a,s-o+1,l-a+1):new W(0,0,0,0)},e.prototype.hitTest=function(t,e,n,i,r){if(n instanceof O)return(this.getPixel32(n.x-t.x,n.y-t.y)>>24&255)>=e;if(n instanceof W){if((n=n.clone()).x-=t.x,n.y-=t.y,!this._rect.intersects(n))return!1;for(var o=n.y;o<n.bottom;o++)for(var a=n.x;a<n.right;a++){if((this.getPixel32(a,o)>>24&255)>=e)return!0}}else null!==n&&console.warn("[BitmapImage2D] HitTest not implemented for:",n.assetType);return!1},e.prototype.floodFill=function(t,e,n){this.dropAllReferences();var i=t,r=e;t|=0,e|=0;var o=new Uint32Array(this.getDataInternal(!0).buffer),a=this._rect.width,s=this._rect.height,l=this._floodStack;l.length=a*s*2;var u=o[t+e*a],c=D.float32ColorToARGB(n),h=c[0],p=c[1],d=c[2],f=c[3],_=((h=this._transparent?h:255)<<24|(f=f*h/255|0)<<16|(d=d*h/255|0)<<8|(p=p*h/255|0))>>>0;if(_!==u){var g,m,y=0,A=0;for(l[A++]=t,l[A++]=e;A>0;){if(A/2>o.length)throw"[BitmapImage2D] FloodFill bug, to many interation: ".concat(i,":").concat(r);for(e=l[--A],y=t=l[--A];y>=0&&o[e*a+y]===u;)y--;for(y++,g=m=!1;y<a&&o[e*a+y]===u;)o[e*a+y]=_,!g&&e>0&&o[(e-1)*a+y]===u?(l[A++]=y,l[A++]=e-1,g=!0):g&&e>0&&o[(e-1)*a+y]!==u&&(g=!1),!m&&e<s-1&&o[(e+1)*a+y]===u?(l[A++]=y,l[A++]=e+1,m=!0):m&&e<s-1&&o[(e+1)*a+y]!==u&&(m=!1),y++}this.invalidateGPU()}},e.prototype.noise=function(t,e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=255),void 0===i&&(i=7),void 0===r&&(r=!1);for(var o=new ve(t),a=this.width,s=this.height,l=this.getDataInternal(!0,!0),u=0;u<s;u++)for(var c=0;c<a;c++){var h=4*(c+u*a);if(r){var p=o.genRange(e,n);l[h]=0|p,l[h+1]=0|p,l[h+2]=0|p}else{var d=i&Ae.RED?o.genRange(e,n):0,f=i&Ae.GREEN?o.genRange(e,n):0,_=i&Ae.BLUE?o.genRange(e,n):0;l[h]=0|d,l[h+1]=0|f,l[h+2]=0|_}l[h+3]=i&Ae.ALPHA?o.genRange(e,n):255}this.invalidateGPU()},e.prototype.perlinNoise=function(t,e,n,i,r,o,a,s,l){void 0===a&&(a=7),void 0===s&&(s=!1),void 0===l&&(l=null);var u=this.width,c=this.height,h=this.getDataInternal(!0,!0),p=Te.fromSeed(i),d=null;if(l)if(d=[],"number"==typeof l[0])for(var f=0;f<l.length;f+=2)d[f/2]=[l[f+0],l[f+1]];else if(l[0]instanceof O)for(f=0;f<l.length;f+=2)d[f/2]=[l[f].x,l[f].y];for(var _=0;_<c;_++)for(var g=0;g<u;g++){var m=[0,0,0,0],y=4*(g+_*u);if(s)m[0]=p.turbulence(0,[g,_],[1/t,1/e],n,o,r,[0,0],[u,c],d),m[1]=m[2]=m[0],m[3]=1,8&a&&(m[3]=p.turbulence(1,[g,_],[1/t,1/e],n,o,r,[0,0],[u,c],d));else for(var A=0;A<4;A++)m[A]=3===A?1:-1,a&1<<A&&(m[A]=p.turbulence(A,[g,_],[1/t,1/e],n,o,r,[0,0],[u,c],d));for(f=0;f<4;f++){var v=0;v=o?(255*m[f]+255+.5)/2:255*m[f]+.5,h[y+f]=0|v,this._transparent||(h[y+3]=255)}}this.invalidateGPU()},e.prototype.drawBitmap=function(t,e,n,i,r,o){void 0===o&&(o=null),this.dropAllReferences(),Pe.drawBitmap(t,e,n,i,r,this.data,0,0,this._rect.width,this._rect.height,o),this.invalidateGPU()},e.prototype.fillRect=function(t,e){if(this.dropAllReferences(),!this._data)try{this._data=new Uint8ClampedArray(this.width*this.height*4)}catch(t){console.error(this.width,this.height)}var n=~~t.x,i=~~t.y,r=~~t.width,o=~~t.height,a=new Uint32Array(this._data.buffer),s=0;if(this._transparent){var l=D.float32ColorToARGB(e),u=l[0],c=l[1],h=l[2],p=l[3];s=D.ARGBtoFloat32(u,p*u/255|0,h*u/255|0,c*u/255|0)>>>0,this._unpackPMA=!1}else s=Me(16777215&e,!1);if(0==n&&0==i&&r==this._rect.width&&o==this._rect.height)a.fill(s);else{var d=void 0,f=void 0;for(d=0;d<o;++d)f=n+(d+i)*this._rect.width,a.fill(s,f,f+r)}this.invalidateGPU()},e.prototype.getPixel=function(t,e){if(!this._rect.contains(t,e))return 0;var n=4*(~~t+~~e*this._rect.width),i=this._data,r=i[n+0],o=i[n+1],a=i[n+2],s=i[n+3];return s?255*r/s<<16|255*o/s<<8|255*a/s:0},e.prototype.getPixel32=function(t,e){if(!this._rect.contains(t,e))return 0;var n=4*(~~t+~~e*this._rect.width),i=this.getDataInternal(!0),r=i[n++],o=i[n++],a=i[n++],s=i[n];return s?(s<<24|255*r/s<<16|255*o/s<<8|255*a/s)>>>0:0},e.prototype.getPixels=function(t){if(t.equals(this._rect))return this.getDataInternal(!0,!1);for(var e,n=this.getDataInternal(!0,!1),i=new Uint8ClampedArray(t.width*t.height*4),r=0|t.x,o=0|t.y,a=0|t.width,s=0|t.height,l=0;l<s;++l)e=r+(l+o)*this._rect.width,i.set(n.subarray(4*e,4*(e+a)),l*a*4);return i},e.prototype.getPixelData=function(t,e,n){var i=4*(t+e*this._rect.width),r=this.getDataInternal(!0);n[0]=r[i++],n[1]=r[i++],n[2]=r[i++],n[3]=r[i]},e.prototype.setPixelData=function(t,e,n){this.dropAllReferences();var i=4*(t+e*this._rect.width),r=this.getDataInternal(!0);r[i+0]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=this._transparent?n[3]:255,this.invalidateGPU()},e.prototype.lock=function(){this._locked||(this._locked=!0)},e.prototype.setArray=function(t,e){var n,i,r,o;this.dropAllReferences();var a=this.getDataInternal(!0);for(n=0;n<t.width;++n)for(i=0;i<t.height;++i)o=D.float32ColorToARGB(e[n+i*t.width]),a[(r=4*(n+t.x+(i+t.y)*this._rect.width))+0]=o[1],a[r+1]=o[2],a[r+2]=o[3],a[r+3]=this._transparent?o[0]:255;this.invalidateGPU()},e.prototype.setPixel=function(t,e,n){if(this._rect.contains(t,e)){this.dropAllReferences();var i=4*(~~t+~~e*this._rect.width),r=D.float32ColorToARGB(n),o=this.getDataInternal(!0);o[i+0]=r[1],o[i+1]=r[2],o[i+2]=r[3],o[i+3]=255,this.invalidateGPU()}},e.prototype.setPixelFromArray=function(t,e,n){this.dropAllReferences();var i=4*(t+e*this._rect.width),r=this.getDataInternal(!0);r[i+0]=n[1]*n[0]|0,r[i+1]=n[2]*n[0]|0,r[i+2]=n[3]*n[0]|0,r[i+3]=255*n[0]|0,this._unpackPMA=!1,this.invalidateGPU()},e.prototype.setPixel32=function(t,e,n){if(this._rect.contains(t,e)){this.dropAllReferences();var i=4*(~~t+~~e*this._rect.width),r=D.float32ColorToARGB(n),o=this.getDataInternal(!0),a=this._transparent?r[0]/255:1;o[i+0]=r[1]*a|0,o[i+1]=r[2]*a|0,o[i+2]=r[3]*a|0,o[i+3]=this._transparent?r[0]:255,this.invalidateGPU()}},e.prototype.setPixels=function(t,e){this.dropAllReferences();var n=this.getDataInternal(!0);if(t.equals(this._rect))n.set(e),this._unpackPMA=!1;else{for(var i=this._rect.width,r=t.width,o=0;o<t.height;++o)n.set(e.subarray(o*r*4,(o+1)*r*4),4*(t.x+(o+t.y)*i));console.warn("[BitmapImage2D] Mixed texture mode - array should be a PMA.",this.id)}this.invalidateGPU()},e.prototype.applyFilter=function(t,e,n,i){return!1},e.prototype.unlock=function(){this._locked&&(this._locked=!1,this.invalidate())},Object.defineProperty(e.prototype,"alphaChannel",{set:function(t){if(this.dropAllReferences(),t){if(t.length!==this.width*this.height)throw"error when trying to merge the alpha channel into the image.the length of the alpha channel should be 1/4 of the length of the imageData";if(this._data&&this.wasUpload){for(var e=this._alphaChannel,n=0;n<e.length;n++)this._data[4*n+3]=e[n];return this._unpackPMA=!1,void this.invalidateGPU()}this._alphaChannel=t,this._unpackPMA=!1}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.getDataInternal(!0)},enumerable:!1,configurable:!0}),e.prototype._setSize=function(e,n){this.dropAllReferences();var i=this.data;this._data=new Uint8ClampedArray(4*e*n);for(var r=this._rect.width<e?this._rect.width:e,o=this._rect.height<n?this._rect.height:n,a=0;a<o;++a)this._data.set(i.subarray(a*r*4,(a+1)*r*4),a*e*4);t.prototype._setSize.call(this,e,n)},e.prototype.getDebugCanvas=function(t){void 0===t&&(t=!1);var e=document.createElement("canvas"),n=e.getContext("2d");e.height=this.height,e.width=this.width;var i=this.getDataInternal(!0,!1),r=new ImageData(new Uint8ClampedArray(i),this.width,this.height);if(t)for(var o=0;o<r.data.length;o+=4){var a=r.data[o+3];r.data[o+0]=a,r.data[o+1]=a,r.data[o+2]=a}return n.putImageData(r,0,0),e},e.prototype.getDebugImage=function(t){void 0===t&&(t=!1);var e=this.getDebugCanvas(t).toDataURL("image/png"),n=document.createElement("a");n.href=e,n.download="SceneImage_"+this.id+(t?"_alpha":"_full"),n.click()},e.UNLOAD_EVENT="unload",e.assetType="[image BitmapImage2D]",e}(fe),Re=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.onUnload=function(){i._texture&&(i._texture.dispose(),i._texture=null,i._invalid=!0,i._asset.wasUpload=!1)},i._asset.addEventListener(Le.UNLOAD_EVENT,i.onUnload),i}return o(e,t),e.prototype.onClear=function(e){this._asset.removeEventListener(Le.UNLOAD_EVENT,this.onUnload),t.prototype.onClear.call(this,e)},e.prototype.getTexture=function(){var e=this._asset;if(e.isDisposed)throw"Illegal upload of disposed BitmapImage2D:"+e.id;var n=e.sourceBitmap;if(n)return n.getAbstraction(this._stage).getTexture();e.markToUnload(),t.prototype.getTexture.call(this);var i=e.getDataInternal(!1,!0),r=this._texture;if(e.needUpload&&i){r.uploadFromArray(new Uint8Array(i.buffer),0,e.unpackPMA),e.needUpload=!1,e.wasUpload=!0;var o=e.mipLevels;if(o&&o.length>0){for(var a=0;a<o.length;a++)r.uploadFromArray(new Uint8Array(o[a].data.buffer),a+1,e.transparent);this._mipmap=!0,this._invalidMipmaps=!1}else this._invalidMipmaps=!0}return this._invalid=!1,this._texture},e}(_e),Ne=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=t.call(this,1,1)||this;return i._specularSource=e,i._glossSource=n,i._output=new Le(1,1,!1,16777215),i._testSize(),i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularSource",{get:function(){return this._specularSource},set:function(t){this._specularSource!=t&&(this._specularSource=t,this.invalidate(),this._testSize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"glossSource",{get:function(){return this._glossSource},set:function(t){this._glossSource!=t&&(this._glossSource=t,this.invalidate(),this._testSize())},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this._specularSource,this._glossSource)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._rect=null,this._output.dispose()},Object.defineProperty(e.prototype,"data",{get:function(){var t=new O;return this._output.fillRect(this._rect,16777215),this._glossSource&&this._output.copyChannel(this._glossSource,this._rect,t,Ae.GREEN,Ae.GREEN),this._specularSource&&this._output.copyChannel(this._specularSource,this._rect,t,Ae.RED,Ae.RED),this._output.data},enumerable:!1,configurable:!0}),e.prototype._setSize=function(e,n){t.prototype._setSize.call(this,e,n),this._output._setSize(e,n)},e.prototype._testSize=function(){var t,e;this._specularSource?(t=this._specularSource.width,e=this._specularSource.height):this._glossSource?(t=this._glossSource.width,e=this._glossSource.height):(t=1,e=1),t!=this._output.width&&e!=this._output.height&&(this._output.dispose(),this._output=new Le(t,e,!1,16777215)),this._setSize(t,e)},e.assetType="[asset SpecularImage2D]",e}(fe),Fe=function(t){function e(e){var n=t.call(this)||this;return n._size=e,n._testDimensions(),n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size!=t&&this._setSize(this._size)},enumerable:!1,configurable:!0}),e.prototype._setSize=function(t){this._size!=t&&this.clear(),this._size=t,this._testDimensions()},e.prototype._testDimensions=function(){if(!he.isDimensionValid(this._size))throw new Error("Invalid dimension: Width and height must be power of 2 and cannot exceed 2048")},e.assetType="[image ImageCube]",e}(pe),ke=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getType=function(){return"cube"},e.prototype._createTexture=function(){this._texture=this._stage.context.createCubeTexture(this._asset.size,jt.BGRA,!1)},e}(de),Ue=function(t){function e(e,n,i){void 0===n&&(n=!0),void 0===i&&(i=null);var r=t.call(this,e)||this;r._data=new Array(6),r._locked=!1,r._transparent=n;for(var o=0;o<6;o++)r._data[o]=new Uint8ClampedArray(4*r._size*r._size),null!=i&&r.fillRect(o,new W(0,0,e,e),i);return r}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transparent",{get:function(){return this._transparent},set:function(t){this._transparent=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){for(var t=new e(this._size,this.transparent),n=0;n<6;n++)t.setPixels(n,new W(0,0,this._size,this._size),this.data[n]);return t},e.prototype.colorTransform=function(t,e,n){var i,r,o,a=this.data[t];for(i=0;i<e.width;++i)for(r=0;r<e.height;++r)a[o=4*(i+e.x+(r+e.y)*this._size)]=a[o]*n.redMultiplier+n.redOffset,a[o+1]=a[o+1]*n.greenMultiplier+n.greenOffset,a[o+2]=a[o+2]*n.blueMultiplier+n.blueOffset,a[o+3]=a[o+3]*n.alphaMultiplier+n.alphaOffset;this._locked||this.invalidate()},e.prototype.copyChannel=function(t,e,n,i,r,o){var a,s,l,u=e.data,c=this._data[t],h=Math.round(Math.log(r)/Math.log(2)),p=Math.round(Math.log(o)/Math.log(2)),d=Math.round(n.x),f=Math.round(n.y),_=Math.round(i.x),g=Math.round(i.y);for(a=0;a<n.width;++a)for(s=0;s<n.height;++s)l=4*(a+d+(s+f)*e.width),c[4*(a+_+(s+g)*this._size)+p]=u[l+h];this._locked||this.invalidate()},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0;e<6;e++)this._data[e]=null;this._transparent=null,this._locked=null},e.prototype.drawBitmap=function(t,e,n,i,r,o,a){void 0===a&&(a=null),Pe.drawBitmap(e,n,i,r,o,this.data[t],0,0,this._size,this._size,a),this._locked||this.invalidate()},e.prototype.fillRect=function(t,e,n){var i=new Uint32Array(this._data[t].buffer),r=~~e.x,o=~~e.y,a=~~e.width,s=~~e.height,l=this._transparent?4294967295&n:4278190080+(16777215&n);if(0==r&&0==o&&a==this._size&&s==this._size)i.fill(l);else{var u=void 0,c=void 0;for(u=0;u<s;++u)c=r+(u+o)*this._size,i.fill(l,c,c+a)}this._locked||this.invalidate()},e.prototype.getPixel=function(t,e,n){var i,r,o,a,s=4*(~~e+~~n*this._size),l=this.data[t];return i=l[s+0],r=l[s+1],o=l[s+2],(a=l[s+3])?255*i/a<<16|255*r/a<<8|255*o/a:0},e.prototype.getPixel32=function(t,e,n){var i,r,o,a,s=4*(~~e+~~n*this._size),l=this.data[t];return i=l[s++],r=l[s++],o=l[s++],(a=l[s])?a<<24|255*i/a<<16|255*r/a<<8|255*o/a:0},e.prototype.lock=function(){this._locked||(this._locked=!0)},e.prototype.setArray=function(t,e,n){var i,r,o,a,s=this.data[t];for(i=0;i<e.width;++i)for(r=0;r<e.height;++r)a=D.float32ColorToARGB(n[i+r*e.width]),s[(o=4*(i+e.x+(r+e.y)*this._size))+0]=a[1],s[o+1]=a[2],s[o+2]=a[3],s[o+3]=this._transparent?a[0]:255;this._locked||this.invalidate()},e.prototype.setPixel=function(t,e,n,i){var r=4*(~~e+~~n*this._size),o=D.float32ColorToARGB(i),a=this.data[t];a[r+0]=o[1],a[r+1]=o[2],a[r+2]=o[3],a[r+3]=255,this._locked||this.invalidate()},e.prototype.setPixel32=function(t,e,n,i){var r=4*(~~e+~~n*this._size),o=D.float32ColorToARGB(i),a=this.data[t];a[r+0]=o[1],a[r+1]=o[2],a[r+2]=o[3],a[r+3]=this._transparent?o[0]:255,this._locked||this.invalidate()},e.prototype.setPixels=function(t,e,n){if(0==e.x&&0==e.y&&e.width==this._size&&e.height==this._size)this._data[t].set(n);else{var i=void 0,r=this._size,o=e.width,a=this._data[t];for(i=0;i<e.height;++i)a.set(n.subarray(i*o*4,(i+1)*o*4),4*(e.x+(i+e.y)*r))}this._locked||this.invalidate()},e.prototype.unlock=function(){this._locked&&(this._locked=!1,this.invalidate())},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),e.prototype._setSize=function(e){for(var n=0;n<6;n++){var i=this.data[n];this._data[n]=new Uint8ClampedArray(4*e*e);for(var r=this._size<e?this._size:e;0<r;++n)this._data[n].set(i.subarray(0*r*4,1*r*4),0*e*4)}t.prototype._setSize.call(this,e)},e.assetType="[image BitmapImageCube]",e.posX=0,e.negX=1,e.posY=2,e.negY=3,e.posZ=4,e.negZ=5,e}(Fe),Ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTexture=function(){if(t.prototype.getTexture.call(this),this._invalid){this._invalid=!1;for(var e=0;e<6;++e)this._texture.uploadFromArray(new Uint8Array(this._asset.data[e].buffer),e,0,this._asset.transparent);this._invalidMipmaps=!0}return this._texture},e}(ke),je=function(t){function e(e){var n=t.call(this,8,8,!0)||this;return n._urlRequest=e,n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"urlRequest",{get:function(){return this._urlRequest},set:function(t){this._urlRequest=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this._urlRequest)},e.assetType="[image ExternalImage2D]",e}(fe),Ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTexture=function(){return t.prototype.getTexture.call(this),this._invalid&&(this._invalid=!1,this._texture.uploadFromURL(this._asset.urlRequest,0),this._invalidMipmaps=!0),this._texture},e}(_e),Qe=function(t){function e(e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!1);var r=t.call(this)||this;return r._repeat=e,r._smooth=n,r._mipmap=i,r}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeat",{get:function(){return this._repeat},set:function(t){this._repeat!=t&&(this._repeat=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"smooth",{get:function(){return this._smooth},set:function(t){this._smooth!=t&&(this._smooth=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!=t&&(this._mipmap=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageRect",{get:function(){return this._imageRect},set:function(t){this._imageRect!=t&&(this._imageRect=t,this._updateRect())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameRect",{get:function(){return this._frameRect},set:function(t){this._frameRect!=t&&(this._frameRect=t,this._updateRect())},enumerable:!1,configurable:!0}),e.prototype._updateRect=function(){},e.assetType="[asset Sampler]",e}(_),ze=function(){function t(){}return t.ADD="add",t.ALPHA="alpha",t.DARKEN="darken",t.DIFFERENCE="difference",t.ERASE="erase",t.HARDLIGHT="hardlight",t.INVERT="invert",t.LAYER="layer",t.LIGHTEN="lighten",t.MULTIPLY="multiply",t.NORMAL="normal",t.OVERLAY="overlay",t.SCREEN="screen",t.SHADER="shader",t.SUBTRACT="subtract",t}();function He(t){switch(t){case ze.LAYER:case ze.MULTIPLY:case ze.NORMAL:case ze.ADD:case ze.SCREEN:case ze.ALPHA:case ze.SUBTRACT:return!0;default:return!1}}var Xe=function(){function t(e,n,i){void 0===i&&(i=-1),this._component=i,this._regName=e,this._index=n,this._toStr=this._regName,this._index>=0&&(this._toStr+=this._index),i>-1&&(this._toStr+="."+t.COMPONENTS[i])}return t.prototype.toString=function(){return this._toStr},Object.defineProperty(t.prototype,"regName",{get:function(){return this._regName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),t.COMPONENTS=["x","y","z","w"],t}(),Ye=function(){function t(t,e,n){void 0===n&&(n=!0),this._regName=t,this._regCount=e,this._persistent=n,this.initRegisters(t,e)}return t.prototype.requestFreeVectorReg=function(){for(var t=0;t<this._regCount;++t)if(!this.isRegisterUsed(t))return this._persistent&&this._usedVectorCount[t]++,this._vectorRegisters[t];throw new Error("Register overflow!")},t.prototype.requestFreeRegComponent=function(){for(var t=0;t<this._regCount;++t)if(!(this._usedVectorCount[t]>0))for(var e=0;e<4;++e)if(0==this._usedSingleCount[e][t])return this._persistent&&this._usedSingleCount[e][t]++,this._registerComponents[e][t];throw new Error("Register overflow!")},t.prototype.addUsage=function(t,e){t._component>-1?this._usedSingleCount[t._component][t.index]+=e:this._usedVectorCount[t.index]+=e},t.prototype.removeUsage=function(t){if(t._component>-1){if(--this._usedSingleCount[t._component][t.index]<0)throw new Error("More usages removed than exist!")}else if(--this._usedVectorCount[t.index]<0)throw new Error("More usages removed than exist!")},t.prototype.dispose=function(){this._vectorRegisters=null,this._registerComponents=null,this._usedSingleCount=null,this._usedVectorCount=null},t.prototype.hasRegisteredRegs=function(){for(var t=0;t<this._regCount;++t)if(this.isRegisterUsed(t))return!0;return!1},t.prototype.initRegisters=function(e,n){var i=t._initPool(e,n);this._vectorRegisters=t._regPool[i],this._registerComponents=t._regCompsPool[i],this._usedVectorCount=this._initArray(Array(n),0),this._usedSingleCount=new Array(4),this._usedSingleCount[0]=this._initArray(new Array(n),0),this._usedSingleCount[1]=this._initArray(new Array(n),0),this._usedSingleCount[2]=this._initArray(new Array(n),0),this._usedSingleCount[3]=this._initArray(new Array(n),0)},t._initPool=function(e,n){var i=e+n;if(null!=t._regPool[i])return i;var r=new Array(n);t._regPool[i]=r;var o=[[],[],[],[]];t._regCompsPool[i]=o;for(var a=0;a<n;++a){r[a]=new Xe(e,a);for(var s=0;s<4;++s)o[s][a]=new Xe(e,a,s)}return i},t.prototype.isRegisterUsed=function(t){if(this._usedVectorCount[t]>0)return!0;for(var e=0;e<4;++e)if(this._usedSingleCount[e][t]>0)return!0;return!1},t.prototype._initArray=function(t,e){for(var n=t.length,i=0;i<n;i++)t[i]=e;return t},t._regPool=new Object,t._regCompsPool=new Object,t}(),qe=function(){function t(t){this._numUsedVertexConstants=0,this._numUsedFragmentConstants=0,this._numUsedStreams=0,this._numUsedTextures=0,this._numUsedVaryings=0,this._profile=t,this.reset()}return t.prototype.reset=function(){this._fragmentTempCache=new Ye("ft",8,!1),this._vertexTempCache=new Ye("vt",8,!1),this._varyingCache=new Ye("v",8),this._textureCache=new Ye("fs",8),this._vertexAttributesCache=new Ye("va",8),this._fragmentConstantsCache=new Ye("fc",28),this._vertexConstantsCache=new Ye("vc",128),this._fragmentOutputRegister=new Xe("oc",-1),this._vertexOutputRegister=new Xe("op",-1),this._numUsedVertexConstants=0,this._numUsedStreams=0,this._numUsedTextures=0,this._numUsedVaryings=0,this._numUsedFragmentConstants=0},t.prototype.dispose=function(){this._fragmentTempCache.dispose(),this._vertexTempCache.dispose(),this._varyingCache.dispose(),this._fragmentConstantsCache.dispose(),this._vertexAttributesCache.dispose(),this._fragmentTempCache=null,this._vertexTempCache=null,this._varyingCache=null,this._fragmentConstantsCache=null,this._vertexAttributesCache=null,this._fragmentOutputRegister=null,this._vertexOutputRegister=null},t.prototype.addFragmentTempUsages=function(t,e){this._fragmentTempCache.addUsage(t,e)},t.prototype.removeFragmentTempUsage=function(t){this._fragmentTempCache.removeUsage(t)},t.prototype.addVertexTempUsages=function(t,e){this._vertexTempCache.addUsage(t,e)},t.prototype.removeVertexTempUsage=function(t){this._vertexTempCache.removeUsage(t)},t.prototype.getFreeFragmentVectorTemp=function(){return this._fragmentTempCache.requestFreeVectorReg()},t.prototype.getFreeFragmentSingleTemp=function(){return this._fragmentTempCache.requestFreeRegComponent()},t.prototype.getFreeVarying=function(){return++this._numUsedVaryings,this._varyingCache.requestFreeVectorReg()},t.prototype.getFreeFragmentConstant=function(){return++this._numUsedFragmentConstants,this._fragmentConstantsCache.requestFreeVectorReg()},t.prototype.getFreeVertexConstant=function(){return++this._numUsedVertexConstants,this._vertexConstantsCache.requestFreeVectorReg()},t.prototype.getFreeVertexVectorTemp=function(){return this._vertexTempCache.requestFreeVectorReg()},t.prototype.getFreeVertexSingleTemp=function(){return this._vertexTempCache.requestFreeRegComponent()},t.prototype.getFreeVertexAttribute=function(){return++this._numUsedStreams,this._vertexAttributesCache.requestFreeVectorReg()},t.prototype.getFreeTextureReg=function(){return++this._numUsedTextures,this._textureCache.requestFreeVectorReg()},Object.defineProperty(t.prototype,"fragmentOutputRegister",{get:function(){return this._fragmentOutputRegister},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numUsedVertexConstants",{get:function(){return this._numUsedVertexConstants},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numUsedFragmentConstants",{get:function(){return this._numUsedFragmentConstants},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numUsedStreams",{get:function(){return this._numUsedStreams},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numUsedTextures",{get:function(){return this._numUsedTextures},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numUsedVaryings",{get:function(){return this._numUsedVaryings},enumerable:!1,configurable:!0}),t}(),Ke=function(){function t(t){void 0===t&&(t=!1),this._vertexConstantData=new Float32Array([0,0,0,0,0,0,0,0]),this._isValid=!0,this.activateInternaly=!1,this.sourceSamplerIndex=0,this._program3DInvalid=!0,this.inputRect=new W,this.destRect=new W,this.needClear=!1,this._requireDepthRender=t,this._registerCache=new qe(Ft.BASELINE)}return Object.defineProperty(t.prototype,"isValid",{get:function(){return this._isValid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(t){this._source=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._program3D&&this._program3D.dispose()},t.prototype.invalidateProgram=function(){this._program3DInvalid=!0},t.prototype.updateProgram=function(t){this._program3D&&this._program3D.dispose(),this._program3D=t.context.createProgram(),this._registerCache.reset();var e=(new Jt).assemble("part vertex 1\n"+this.getVertexCode()+"endpart").vertex.data,n=(new Jt).assemble("part fragment 1\n"+this.getFragmentCode()+"endpart").fragment.data;this._program3D.name=this.constructor.name,this._program3D.upload(e,n),this._program3DInvalid=!1},t.prototype.getVertexCode=function(){var t=this._registerCache.getFreeVertexVectorTemp(),e=this._registerCache.getFreeVertexConstant(),n=this._registerCache.getFreeVertexAttribute();this._positionIndex=n.index;var i=this._registerCache.getFreeVertexConstant();return this._uvVarying=this._registerCache.getFreeVarying(),"mul "+t+".xy, "+n+", "+e+".zw\nadd "+t+".xy, "+t+", "+e+".xy\nmov "+t+".w, "+n+".w\nmov op, "+t+"\nmul "+t+".xy, "+n+", "+i+".zw\nadd "+this._uvVarying+", "+t+", "+i+".xy\n"},t.prototype.getFragmentCode=function(){throw new u},t.prototype.getProgram=function(t){return this._program3DInvalid&&this.updateProgram(t),this._program3D},t.prototype.computeVertexData=function(){var t=this._vertexConstantData,e=this.destRect,n=this.inputRect,i=this._target,r=this._source;n.width*n.height==0&&(n.width=this._source.width,n.height=this._source.height),e.width*e.height==0&&(e.width=n.width,e.height=n.height),t[0]=2*e.x/i.width-1,t[1]=2*e.y/i.height-1,t[2]=2*e.width/i.width,t[3]=2*e.height/i.height,t[4]=n.x/r.width,t[5]=n.y/r.height,t[6]=n.width/r.width,t[7]=n.height/r.height},t.prototype.preActivate=function(t){},t.prototype.activate=function(t,e,n){this.computeVertexData();var i=t.context;this.source.getAbstraction(t).activate(this.sourceSamplerIndex),i.setProgramConstantsFromArray(kt.VERTEX,this._vertexConstantData)},t.prototype.deactivate=function(t){},Object.defineProperty(t.prototype,"requireDepthRender",{get:function(){return this._requireDepthRender},enumerable:!1,configurable:!0}),t}(),We=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),e.prototype.updateProgram=function(t){this._program3D&&this._program3D.dispose(),this._program3D=t.context.createProgram(),this._program3D.name=this.name,this._program3D.uploadRaw(this.getVertexCode(),this.getFragmentCode()),this._program3DInvalid=!1},e.prototype.activate=function(t,e,n){this.computeVertexData(),this._source.getAbstraction(t).activate(this.sourceSamplerIndex),this._program3D.uploadUniform("uTexMatrix",this._vertexConstantData)},e.prototype.getVertexCode=function(){return"\nprecision highp float;\nuniform vec4 uTexMatrix[2];\n\n/* AGAL legacy atrib resolver require this names */\nattribute vec4 va0; // position\n\nvarying vec2 vUv;\nvoid main() {\n\tvec4 pos = va0;\n\n\tpos.xy = pos.xy * uTexMatrix[0].zw + uTexMatrix[0].xy;\n\tpos.z = pos.z * 2.0 - pos.w;\n\n    gl_Position = pos;\n\n\tvUv = clamp((va0.xy * uTexMatrix[1].zw) + uTexMatrix[1].xy, 0., 1.);\n}\n\n"},e.prototype.getFragmentCode=function(){return"\nprecision highp float;\nuniform sampler2D uSampler0;\nvarying vec2 vUv;\n\nvoid main() {\n    vec4 color = texture2D(uSampler0, vUv);\n    gl_FragColor = color;\n}\n\n"},e}(Ke),Je=function(t){function e(e,n){void 0===n&&(n=!0);var i=t.call(this)||this;return i.horizontalPass=!0,i._clampedKernel=0,i._kernel=0,i._realStepSize=1,i._stepSize=-1,i.kernel=e,i._data=new Float32Array([0,0,0]),i.horizontalPass=n,i}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"FilterBlurTask:".concat(this.horizontalPass?"hor":"vert",":").concat(this._kernel)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stepSize",{get:function(){return this._stepSize},set:function(t){this._kernel!=this._stepSize&&(this._stepSize=t,this.calculateStepSize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kernel",{get:function(){return this._kernel},set:function(t){this._kernel!=Math.round(t)&&(this._kernel=Math.round(t),this._clampedKernel=this._kernel>2?Math.min(e.MAX_AUTO_SAMPLES,this._kernel):2,this.calculateStepSize(),this.invalidateProgram())},enumerable:!1,configurable:!0}),e.prototype.getFragmentCode=function(){for(var t=this._clampedKernel,n=this.horizontalPass,i=[],r=e.KERNEL_GAUSIAN[t],o=r.length,a=0;a<t;a++){var s=r[a>=o?t-a-1:a].toFixed(6),l=(2*a+1-t).toFixed(6),u=n?"vec2(".concat(l,", 0.0)"):"vec2(0.0, ".concat(l,")");i.push("\n\t\t\t\tcolor += texture2D(fs0, uv + uBlurData[1] * ".concat(u,") * ").concat(s,";\n\t\t\t"))}return"\n\t\t\tprecision highp float;\n\t\t\tuniform vec3 uBlurData;\n\t\t\tuniform sampler2D fs0;\n\n\t\t\tvarying vec2 vUv;\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec2 uv = vUv.xy;\n\t\t\t\tvec4 color = vec4(0.0);\n\n\t\t\t\t".concat(i.join("\n"),"\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}\n\t\t")},e.prototype.activate=function(e,n,i){t.prototype.computeVertexData.call(this);var r=this._program3D;this._source.getAbstraction(e).activate(0),r.uploadUniform("uTexMatrix",this._vertexConstantData),r.uploadUniform("uBlurData",this._data)},e.prototype.preActivate=function(t){this.updateBlurData()},e.prototype.updateBlurData=function(){var t=this.horizontalPass?this._source.width:this._source.height;this._data[0]=.5*this._kernel/t,this._data[1]=this._realStepSize/t},e.prototype.calculateStepSize=function(){this._stepSize>0?this._realStepSize=this._stepSize:this._realStepSize=this._kernel>e.MAX_AUTO_SAMPLES?this._kernel/e.MAX_AUTO_SAMPLES:1},e.KERNEL_GAUSIAN={1:[.5],2:[.5],3:[.25,.5],4:[.25,.25],5:[.153388,.221461,.250301],6:[.071303,.131514,.189879,.214607],7:[.071303,.131514,.189879,.214607],8:[.028532,.067234,.124009,.179044,.20236],9:[.028532,.067234,.124009,.179044,.20236],10:[.0093,.028002,.065984,.121703,.175713,.198596],11:[.0093,.028002,.065984,.121703,.175713,.198596],12:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],14:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},e.MAX_AUTO_SAMPLES=15,e}(We),Ze=function(){function t(){this._tasks=[],this._temp=[],this._activeTaskIndex=-1}return Object.defineProperty(t.prototype,"isValid",{get:function(){for(var t=0,e=this._tasks;t<e.length;t++){if(!e[t].isValid)return!1}return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireBlend",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDst",{get:function(){return Bt.ZERO},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrc",{get:function(){return Bt.ONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireDepthRender",{get:function(){return this._requireDepthRender},enumerable:!1,configurable:!0}),t.prototype.addTask=function(t){this._tasks.push(t),null==this._requireDepthRender&&(this._requireDepthRender=t.requireDepthRender)},t.prototype.removeTask=function(t){var e=this._tasks.indexOf(t);-1!==e&&this._tasks.slice(e,1)},t.prototype.nextTask=function(){return this._activeTaskIndex<this._tasks.length?this._tasks[++this._activeTaskIndex]:null},t.prototype.hasNextTask=function(){return this._tasks.length<this._activeTaskIndex},t.prototype.meashurePad=function(t,e){return void 0===e&&(e=t.clone()),t===e||e.copyFrom(t),e},t.prototype.apply=function(t,e,n,i,r,o){void 0===o&&(o=!1);var a,s=r.stage,l=s.context;for(this.setRenderState(t,e,n,i,r),l.setBlendFactors(this.blendSrc,this.blendDst),l.setBlendState(this.requireBlend),l.setCulling(Gt.NONE);a=this.nextTask();)a.preActivate(r.stage),s.setRenderTarget(a.target,!1,0,0,!0),s.setScissor(a.clipRect),(t===e&&this.requireBlend||a.needClear||o&&!this.hasNextTask())&&l.clear(0,0,0,0,0,0,Mt.ALL),r.drawTask(a);this.clear(r)},t.prototype.setRenderState=function(t,e,n,i,r){this._activeTaskIndex=-1,this._tasks[0].inputRect=n,this._tasks[0].source=t,this._tasks[this._tasks.length-1].destRect=i,this._tasks[this._tasks.length-1].target=e},t.prototype.dispose=function(){for(var t=0,e=this._tasks;t<e.length;t++){e[t].dispose()}this._tasks.length=0},t.prototype.update=function(t,e){},t.prototype.clear=function(t){for(var e=0,n=this._temp;e<n.length;e++){var i=n[e];t.pushTemp(i)}this._temp.length=0,this._activeTaskIndex=-1,this.imageScale=1},t}(),$e=function(){function t(){}return t.meashureBlurPad=function(t,e,n,i,r){void 0===i&&(i=!1);var o=this.blurFilterStepWidths[n-1];if(i){var a=o/4;t-=a,e-=a}var s=Math.ceil((t<1?1:t)*o),l=Math.ceil((e<1?1:e)*o);return(r=r||new O).setTo(s,l),r},t.colorToArray=function(t,e,n){return(n=n||[])[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,n[3]=e,n},t.colorToU8=function(t,e,n,i){return void 0===i&&(i=0),n[0+i]=t>>16&255,n[1+i]=t>>8&255,n[2+i]=255&t,n[3+i]=255*e|0,n},t.nonAlocUnion=function(t,e,n){var i=t._rawData,r=e._rawData,o=n._rawData;return o.set(i),r[0]<i[0]&&(o[0]=r[0]),r[1]<i[1]&&(o[1]=r[1]),o[2]=Math.max(r[0]+r[2],i[0]+i[2]),o[2]-=o[0],o[3]=Math.max(r[1]+r[3],i[1]+i[3]),o[3]-=o[1],n},t.blurFilterStepWidths=[.5,1.05,1.35,1.55,1.75,1.9,2,2.1,2.2,2.3,2.5,3,3,3.5,3.5],t}();function tn(t,e){return function(n,i,r){e=e||i,Object.defineProperty(n,i,{set:function(n){this[t][e]=n},get:function(){return this[t][e]}})}}var en=Symbol("Model propery list");function nn(t,e){t[en]||(t[en]=[]),t[en].push(e)}var rn,on,an,sn,ln,un,cn,hn,pn,dn,fn,_n=function(t){function e(e){var n=t.call(this)||this;return n.quality=1,n.imageScale=1,n.blurX=1,n.blurY=1,n._hBlurTask=new Je(3,!0),n._vBlurTask=new Je(3,!1),n.addTask(n._hBlurTask),n.addTask(n._vBlurTask),e&&n.applyProps(e),n}return o(e,t),e.prototype.applyProps=function(t){var e,n=this.blurX=t.blurX,i=this.blurY=t.blurY,r=t.quality||1;switch(n=n>1?n-1:0,i=i>1?i-1:0,r){case 1:e=2;break;case 2:e=3,n*=1.05,i*=1.05;break;default:n*=.65,i*=.65,e=5}this._hBlurTask.stepSize=n,this._vBlurTask.stepSize=i,this._hBlurTask.kernel=this._vBlurTask.kernel=e;var o=Math.max(n,i);for(r=1;o>=1.1;)o/=2,r++;this.quality=r+1},e.prototype.apply=function(e,n,i,r,o,a){var s;void 0===a&&(a=!1);for(var l=this.quality,u=this._hBlurTask.stepSize,c=this._vBlurTask.stepSize,h=1,p=1,d=1;d<l;d++)h+=p*=2;if(this._hBlurTask.stepSize=u/h,this._vBlurTask.stepSize=c/h,1===l)return t.prototype.apply.call(this,e,n,i,r,o,a);var f=o.popTemp(e.width,e.height),_=l>2?o.popTemp(e.width,e.height):null;t.prototype.apply.call(this,e,f,i,f.rect,o,!0);for(d=1;d<l-1;d++)this._hBlurTask.stepSize*=2,this._vBlurTask.stepSize*=2,t.prototype.apply.call(this,f,_,f.rect,_.rect,o,!1),f=(s=[_,f])[0],_=s[1];this._hBlurTask.stepSize*=2,this._vBlurTask.stepSize*=2,t.prototype.apply.call(this,f,n,f.rect,r,o,a),o.pushTemp(f),o.pushTemp(_),this._hBlurTask.stepSize=u,this._vBlurTask.stepSize=c},e.prototype.meashurePad=function(t,e){void 0===e&&(e=t);var n=$e.meashureBlurPad(this.blurX,this.blurY,this.quality,!0);return e.copyFrom(t),e.x-=2*n.x,e.y-=2*n.y,e.width+=2*n.x,e.height+=2*n.y,e},e.prototype.setRenderState=function(t,e,n,i,r){var o=r.popTemp(t.width,t.height);this._hBlurTask.needClear=!0,this._hBlurTask.inputRect.setTo(0,0,t.width,t.height),this._hBlurTask.destRect.setTo(0,0,t.width,t.height),this._vBlurTask.clipRect=new W(0,0,t.width,t.height),this._hBlurTask.clipRect=this._vBlurTask.clipRect,this._vBlurTask.inputRect.copyFrom(i),this._vBlurTask.destRect.copyFrom(i),this._hBlurTask.source=t,this._hBlurTask.target=o,this._vBlurTask.source=o,this._vBlurTask.target=e,this._temp=[o]},e.filterName="blur",s([nn],e.prototype,"imageScale",void 0),e}(Ze),gn=function(){function t(t,e,n,i){this.usages=0,this.disposedAt=-1,this.disposed=!1,this._pool=t,this.stage=e,this.vertexString=n,this.fragmentString=i,this.stage.registerProgram(this)}return t.prototype.dispose=function(){this.usages--,this.usages||this._pool.disposeItem(this.vertexString+this.fragmentString)},t.prototype.disposeFinaly=function(){this.stage&&this.stage.unRegisterProgram(this),this.program&&this.program.dispose(),this.program=null,this.usages=0,this.vertexString=void 0,this.fragmentString=void 0,this.disposedAt=-1,this.stage=void 0,this.disposed=!0},t.PROGRAMDATA_ID_COUNT=0,t}(),mn=function(){function t(t){this._pool={},this._disposedPool={},this.keepAlive=1e3,this._stage=t}return t.prototype.collect=function(){var t=Date.now();for(var e in this._disposedPool){var n=this._disposedPool[e];(!n.usages&&n.disposedAt+this.keepAlive<t||n.disposed)&&(delete this._pool[e],delete this._disposedPool[e],n.disposeFinaly())}},t.prototype.getItem=function(t,e){var n=t+e,i=this._pool[n]||(this._pool[n]=new gn(this,this._stage,t,e));return i.disposedAt=-1,delete this._disposedPool[n],this.collect(),i},t.prototype.disposeItem=function(t){var e=this._pool[t];e&&(e.disposedAt=Date.now(),this._disposedPool[t]=e)},t}(),yn=function(){function t(e){this.textureType="",this._state=new se,this._context=e,this._gl=e._gl,this._id=t.TEXTURE_ID++}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._gl.deleteTexture(this._glTexture)},Object.defineProperty(t.prototype,"glTexture",{get:function(){return this._glTexture},enumerable:!1,configurable:!0}),t.prototype.generateMipmaps=function(){throw new u},t.TEXTURE_ID=0,t}(),An=function(t){function e(e,n){var i=t.call(this,e)||this;i._textureSelectorDictionary=new Array(6),i.textureType="textureCube";var r=i._gl;return i._size=n,i._glTexture=i._gl.createTexture(),i._textureSelectorDictionary[0]=r.TEXTURE_CUBE_MAP_POSITIVE_X,i._textureSelectorDictionary[1]=r.TEXTURE_CUBE_MAP_NEGATIVE_X,i._textureSelectorDictionary[2]=r.TEXTURE_CUBE_MAP_POSITIVE_Y,i._textureSelectorDictionary[3]=r.TEXTURE_CUBE_MAP_NEGATIVE_Y,i._textureSelectorDictionary[4]=r.TEXTURE_CUBE_MAP_POSITIVE_Z,i._textureSelectorDictionary[5]=r.TEXTURE_CUBE_MAP_NEGATIVE_Z,i}return o(e,t),e.prototype.uploadFromArray=function(t,e,n,i){if(void 0===n&&(n=0),void 0===i&&(i=!1),t.length!=this._size*this._size*4)throw new Error("Array is not the correct length for texture dimensions");t instanceof Array&&(t=new Uint8Array(t)),this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,this._glTexture),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this._gl.texImage2D(this._textureSelectorDictionary[e],n,this._gl.RGBA,this._size,this._size,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,t),this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,null)},e.prototype.uploadCompressedTextureFromArray=function(t,e,n){},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.generateMipmaps=function(){this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,this._glTexture),this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP)},e}(yn),vn=function(){function t(t,e){void 0===e&&(e=oe.MAX_BUFFER_POOL_SIZE),this._tCtrl=t,this.maxStoreSize=e,this._store=[],oe.ENABLE_UNLOAD_BUFFER&&(this._manager=me.createManager({name:t.name,keepAliveTime:oe.MAX_BUFFER_ALIVE_TIME}))}return t.prototype.create=function(e,n,i,r){var o=this._store.pop();return o?oe.ENABLE_UNLOAD_BUFFER&&(this._manager.removeTask(o),o.lastUsedTime=this._manager.correctedTime):(o=new this._tCtrl(e,n,i,r)).id=t.GLOBAL_POOL_ID++,o.apply&&o.apply(e,n,i,r),o},t.prototype.store=function(t){return!(!oe.ENABLE_BUFFER_POOLING||this._store.length===this.maxStoreSize)&&(this._store.push(t),oe.ENABLE_UNLOAD_BUFFER&&(t.lastUsedTime=this._manager.correctedTime,this._manager.addTask(t)),!0)},t.prototype.remove=function(t){var e=this._store.indexOf(t);return e>-1&&(this._store.splice(e,1),!0)},t.prototype.clear=function(){this._manager&&this._manager.clear()},t.GLOBAL_POOL_ID=0,t}(),bn=function(){function t(t,e){this._context=t,this.canUnload=!0,this._lastMemoryUsage=0,this._gl=t._gl,this._buffer=this._gl.createBuffer(),this._numIndices=e,t.stats.counter.index++}return Object.defineProperty(t,"pool",{get:function(){return oe.ENABLE_BUFFER_POOLING?this._pool||(this._pool=new vn(t)):null},enumerable:!1,configurable:!0}),t.create=function(e,n){return oe.ENABLE_BUFFER_POOLING?this.pool.create(e,n):new t(e,n)},t.prototype.uploadFromArray=function(t,e,n){void 0===e&&(e=0),this.uploadFromByteArray(t.buffer,e,n)},t.prototype.uploadFromByteArray=function(t,e,n){void 0===e&&(e=0),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,this._buffer),this._context.stats.memory.index-=this._lastMemoryUsage,this._lastMemoryUsage=t.byteLength-2*e,this._context.stats.memory.index+=this._lastMemoryUsage,e?this._gl.bufferSubData(this._gl.ELEMENT_ARRAY_BUFFER,2*e,t):this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,t,this._gl.STATIC_DRAW)},t.prototype.dispose=function(){oe.ENABLE_BUFFER_POOLING&&t.pool.store(this)||this.unload()},t.prototype.apply=function(t,e){this._numIndices=e},t.prototype.unload=function(){oe.ENABLE_BUFFER_POOLING&&t.pool.remove(this),this._gl.deleteBuffer(this._buffer),this._buffer=null,this._context.stats.counter.index--,this._context.stats.memory.index-=this._lastMemoryUsage},Object.defineProperty(t.prototype,"numIndices",{get:function(){return this._numIndices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"glBuffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t}(),xn={35664:{size:2,method:"uniform2fv"},35665:{size:3,method:"uniform3fv"},35666:{size:4,method:"uniform4fv"},35674:{size:4,method:"uniformMatrix2fv"},35675:{size:9,method:"uniformMatrix3fv"},35676:{size:16,method:"uniformMatrix4fv"},35678:{size:1,method:"uniform1i"},5126:{size:1,method:"uniform1f"}},Cn=/(#define|#version|precision).*\n/gi,In=function(){function t(e){this._context=e,this._id=t.ProgramID++,this._uniformCache=new Array(16),this._focusId=0,this._gl=e._gl}return Object.defineProperty(t.prototype,"focusId",{get:function(){return this._focusId},enumerable:!1,configurable:!0}),t.prototype.upload=function(e,n){var i=this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER,this._gl.HIGH_FLOAT).precision,r=this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER,this._gl.HIGH_FLOAT).precision,o=t._aglslParser.parse(t._tokenizer.decribeAGALPart(e),i?"highp":"mediump",2===this._context.glVersion),a=t._aglslParser.parse(t._tokenizer.decribeAGALPart(n),r?"highp":"mediump",2===this._context.glVersion);this.name||(this.name="PROG_AGAL_"+this._id),this.uploadRaw(o,a)},t.prototype.uploadRaw=function(e,n){this.name||(this.name="PROG_GLSL_"+this._id);var i=e+n;if(i in t.programCache)return this._program=t.programCache[i],void this._program.usage++;e=this.insertName(e),n=this.insertName(n);var r=this._gl.createShader(this._gl.VERTEX_SHADER),o=this._gl.createShader(this._gl.FRAGMENT_SHADER),a=this._gl.createProgram();if(this._context.stats.counter.program++,this._gl.shaderSource(r,e),this._gl.compileShader(r),!this._gl.getShaderParameter(r,this._gl.COMPILE_STATUS))throw new Error(this._gl.getShaderInfoLog(r));if(this._gl.shaderSource(o,n),this._gl.compileShader(o),!this._gl.getShaderParameter(o,this._gl.COMPILE_STATUS))throw new Error(this._gl.getShaderInfoLog(o));if(this._gl.attachShader(a,r),this._gl.attachShader(a,o),this._gl.linkProgram(a),!this._gl.getProgramParameter(a,this._gl.LINK_STATUS))throw new Error(this._gl.getProgramInfoLog(a));this._gl.deleteShader(r),this._gl.deleteShader(o),this._program={program:a,uniforms:{},attributes:{},usage:1},t.programCache[i]=this._program,this.reset(),this.grabLocationData(e,n)},t.prototype.grabLocationData=function(t,e){for(var n=this._program.uniforms,i=this._program.attributes,r=this._gl,o=this._program.program,a=r.getProgramParameter(o,r.ACTIVE_UNIFORMS),s=r.getProgramParameter(o,r.ACTIVE_ATTRIBUTES),l=0;l<a;l++){var u=(h=r.getActiveUniform(o,l)).name.indexOf("["),c={type:h.type,size:h.size,location:r.getUniformLocation(o,h.name)};n[-1===u?h.name:h.name.substring(0,u)]=c}for(l=0;l<s;l++){var h;i[(h=r.getActiveAttrib(o,l)).name]={type:h.type,size:h.size,location:r.getAttribLocation(o,h.name)}}if(oe.UNSAFE_USE_AUTOINDEXED_SAMPLER)for(var p=e.indexOf("uniform sampler",0),d=0;p>=0;){var f=e.indexOf(";",p+2),_=(g=e.substring(p,f).split(" "))[g.length-1];n["fs"+d]||(n["fs"+d]=n[_]),p=e.indexOf("uniform sampler",f),d++}if(oe.UNSAFE_USE_AUTOINDEXED_ATTRIBUTES)for(p=t.indexOf("attribute",0),d=0;p>=0;){f=t.indexOf(";",p+2);var g,m=(g=t.substring(p,f).split(" "))[g.length-1];i["va"+d]||(i["va"+d]=i[m]),p=t.indexOf("attribute",f),d++}},t.prototype.insertName=function(t){var e=t.match(Cn)||[],n=e[e.length-1],i=n?t.lastIndexOf(n)+n.length:0;return t.substr(0,i)+"\n#define SHADER_NAME ".concat(this.name,"\n\n")+t.substr(i)},t.prototype.reset=function(){this._uniformCache.fill("")},t.prototype.getUniformLocation=function(e,n){void 0===n&&(n=-1);var i="number"==typeof n?t._getAGALUniformName(e,n):n,r=this._program.uniforms[i];return r?r.location:null},t.prototype.getAttribLocation=function(t){var e=this._program.attributes["va"+t];return e?e.location:-1},t._getAGALUniformName=function(t,e){return void 0===e&&(e=-1),-1===e?this._uniformLocationNameDictionary[t]:this._uniformLocationNameDictionary[t]+e},t.prototype._needCache=function(t,e){var n=this._uniformCache[t],i=e instanceof Float32Array?new Uint32Array(e.buffer).join(""):""+e;return n&&i===n?void 0:i},t.prototype.uploadUniform=function(t,e){var n=this._program.uniforms[t];if(!n)return!1;if(!xn[n.type])throw"[ProgramWebGL] Unsupported uniform type:"+n.type;var i=xn[n.type],r=i.size,o=i.method;if(1===r)return"number"==typeof e||1===n.size?this._gl[o](n.location,"number"==typeof e?e:e[0]):this._gl[o+"v"](n.location,e),!0;var a=e;if(a.length!==n.size*r)throw"[ProgramWebGL] Invalid data length for ".concat(t,", expected ").concat(n.size*r,", actual ").concat(a.length);n.type===this._gl.FLOAT_MAT2||n.type===this._gl.FLOAT_MAT3||n.type===this._gl.FLOAT_MAT4?this._gl[o](n.location,!1,a):this._gl[o](n.location,a)},t.prototype.uniform1i=function(t,e,n){var i=this.getUniformLocation(t,e);if(i){if(oe.ENABLE_UNIFORM_CACHE){var r=this._needCache(4*t+e+1,n);if(void 0===r)return;this._uniformCache[4*t+e+1]=r}this._gl.uniform1i(i,n)}},t.prototype.uniform4fv=function(t,e){var n=this.getUniformLocation(t);if(n){if(oe.ENABLE_UNIFORM_CACHE){var i=this._needCache(4*t,e);if(void 0===i)return;this._uniformCache[4*t]=i}this._gl.uniform4fv(n,e)}},t.prototype.dispose=function(){this.reset()},t.prototype.focusProgram=function(){this._focusId++,this._uniformCache.fill(""),this._gl.useProgram(this._program.program)},Object.defineProperty(t.prototype,"glProgram",{get:function(){return this._program},enumerable:!1,configurable:!0}),t.programCache={},t.ProgramID=0,t._tokenizer=new re,t._aglslParser=new ae,t._uniformLocationNameDictionary=["fc","fs","vc"],t}(),En=function(t){function e(e,n,i){var r=t.call(this,e)||this;if(r.textureType="texture2d",r._isFilled=!1,r._isPMA=!1,r._isRT=!1,r._isMipmaped=!1,r.lastUsedTime=0,!n||!i)throw new Error("Incorrected size of texture { width: ".concat(n,", height: ").concat(i,"}"));return r._width=n,r._height=i,r._glTexture=r._gl.createTexture(),r._context.stats.counter.texture++,r._context.stats.memory.texture+=n*i*8,r}return o(e,t),e.store=function(t){var n=t._width<<16|t._height,i=e._pool[n]||(e._pool[n]=[]);return i.indexOf(t)>-1?(t.lastUsedTime=this.unloadManager.correctedTime,!0):!(i.length>=this.SIZE_POOL_LIMIT)&&(i.push(t),oe.ENABLE_UNLOAD_TEXTURE&&(t.lastUsedTime=this.unloadManager.correctedTime,this.unloadManager.addTask(t)),!0)},e.remove=function(t){var n=t._width<<16|t._height,i=e._pool[n];if(!i||!i.length)return!1;var r=i.indexOf(t);return r>-1&&!!i.splice(r,1)},e.create=function(t,n,i){var r,o=n<<16|i,a=null===(r=e._pool[o])||void 0===r?void 0:r.pop();return a?(this.unloadManager.removeTask(a),a):new e(t,n,i)},Object.defineProperty(e.prototype,"canUnload",{get:function(){return this._glTexture&&!this._isRT},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPOT",{get:function(){return!(this._width&this._width-1||this._height&this._height-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){oe.ENABLE_TEXTURE_POOLING&&e.store(this)||this.unload()},e.prototype.unload=function(){e.remove(this),this._context.stats.counter.texture--,this._context.stats.memory.texture-=this.width*this.height*8,this._context._texContext.disposeTexture(this),this._glTexture=null,this._state.dispose()},e.prototype.uploadFromArray=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),this._context._texContext.uploadFromArray(this,t,e,n),this._isFilled=!0,this._isPMA=n},e.prototype.uploadFromURL=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),this._context._texContext.uploadFromArray(this,null,e,n),this._isFilled=!0,this._isPMA=n},e.prototype.uploadCompressedTextureFromArray=function(t,e,n){},e.prototype.generateMipmaps=function(){if(this.isPOT||2===this._context.glVersion){var t=this._context._texContext.bindTexture(this,!0);this._gl.generateMipmap(this._gl.TEXTURE_2D),this._context._texContext.bindTexture(t,!0),this._isMipmaped=!0}},e.SIZE_POOL_LIMIT=10,e.unloadManager=me.createManager({keepAliveTime:2e4,name:"TextureWebGL",priority:1e3}),e._pool={},e}(yn),wn=function(){function t(t,e,n){this._context=t,this._lastMemoryUsage=0,this.instanced=!1,this.dynamic=!1,this.canUnload=!0,this._gl=t._gl,this._buffer=this._gl.createBuffer(),this._numVertices=e,this._dataPerVertex=n,t.stats.counter.vertex++}return Object.defineProperty(t,"pool",{get:function(){return oe.ENABLE_BUFFER_POOLING?this._pool||(this._pool=new vn(t)):null},enumerable:!1,configurable:!0}),t.create=function(e,n,i){return oe.ENABLE_BUFFER_POOLING?this.pool.create(e,n,i):new t(e,n,i)},t.prototype.initAsDynamic=function(t){void 0===t&&(t=this._numVertices),0!==t&&(this._numVertices=t,this.dynamic=!0,this._context.stats.memory.vertex-=this._lastMemoryUsage,this._lastMemoryUsage=t*this._dataPerVertex,this._context.stats.memory.vertex+=this._lastMemoryUsage,this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._buffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,t*this._dataPerVertex,this._gl.DYNAMIC_DRAW))},t.prototype.uploadFromArray=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this._numVertices),this.uploadFromByteArray(t,e,n)},t.prototype.uploadFromByteArray=function(t,e,n){var i=this._gl;i.bindBuffer(i.ARRAY_BUFFER,this._buffer),(e||t.byteLength<this._numVertices*this._dataPerVertex)&&this.dynamic?i.bufferSubData(i.ARRAY_BUFFER,e*this._dataPerVertex,t):(this._numVertices=t.byteLength/this._dataPerVertex,this._context.stats.memory.vertex-=this._lastMemoryUsage,this._lastMemoryUsage=t.byteLength,this._context.stats.memory.vertex+=this._lastMemoryUsage,i.bufferData(i.ARRAY_BUFFER,t,this.dynamic?i.DYNAMIC_DRAW:i.STATIC_DRAW))},Object.defineProperty(t.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataPerVertex",{get:function(){return this._dataPerVertex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"glBuffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.instanced=!1,this.dynamic=!1,oe.ENABLE_BUFFER_POOLING&&t.pool.store(this)||this.unload()},t.prototype.apply=function(t,e,n){this._numVertices=e,this._dataPerVertex=n},t.prototype.unload=function(){oe.ENABLE_BUFFER_POOLING&&t.pool.remove(this),this._gl.deleteBuffer(this._buffer),this._buffer=null,this._context.stats.counter.vertex--,this._context.stats.memory.vertex-=this._lastMemoryUsage},t}(),Sn=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r._context=i,r}return o(e,t),e.prototype.commit=function(t,e){if(this.type=t,!this.equals(e._state)){e._state.copyFrom(this);var n=this._context._gl,i=e.isPOT||2===this._context.glVersion;this.wrap!==n.REPEAT||i?(n.texParameteri(t,n.TEXTURE_WRAP_S,this.wrap),n.texParameteri(t,n.TEXTURE_WRAP_T,this.wrap)):(n.texParameteri(t,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(t,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE));var r=this.mipfilter;e._isMipmaped||(r=this.filter),n.texParameteri(t,n.TEXTURE_MAG_FILTER,this.filter),n.texParameteri(t,n.TEXTURE_MIN_FILTER,r),this.boundedTexture=e}},e}(se),Dn=function(){function t(t,e,n,i){void 0===i&&(i=!1),this._context=t,this.width=e,this.height=n,this._colorOnly=i,this.isMsaaTarget=!1,this.memoryUsage=0,this.init()}return Object.defineProperty(t.prototype,"drawBuffer",{get:function(){return this._framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readBuffer",{get:function(){return this._framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this._framebuffer&&this._linkedTexture},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this._context._gl;if(this._framebuffer=t.createFramebuffer(),this._depthStencil=this._colorOnly?null:t.createRenderbuffer(),this._context.stats.counter.renderTarget++,this._depthStencil){this.memoryUsage=this.width*this.height*8;var e=this._context._texContext.bindRenderTarget(this,!1);t.bindRenderbuffer(t.RENDERBUFFER,this._depthStencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this._depthStencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height),t.bindRenderbuffer(t.RENDERBUFFER,null),this._context._texContext.bindRenderTarget(e,!0),this._context.stats.memory.renderTarget+=this.memoryUsage}},t.prototype.linkTexture=function(t){if(this._linkedTexture!==t){var e=this._context._gl,n=this._context._texContext,i=null==t?void 0:t.glTexture,r=n.bindTexture(t,!0);if(t){if(t.height!==this.height||t.width!==this.width)throw"Texture size and render target is different"+"expected ".concat(this.width,"x").concat(this.height,", actual ").concat(t.width,"x").concat(t.height);t._isFilled||t.uploadFromArray(null,0,!1)}var o=n.bindRenderTarget(this,!0);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),n.bindRenderTarget(o,!0),n.bindTexture(r,!0),this._linkedTexture=t}},t.prototype.present=function(t,e,n,i){if(t){if(t.isMsaaTarget)throw"Invalid opration, try copy noMSAA to MSAA";if(!t.isValid)throw"Target RT MUST be valid and have texture link";if(!this.isValid)throw"Source RT MUST be valid and have texture link";var r=this._context._gl,o=this._context._texContext,a=e.x,s=e.y,l=e.width,u=e.height,c=(null==n?void 0:n.x)||0,h=(null==n?void 0:n.y)||0,p=o.bindRenderTarget(this),d=o.bindTexture(t._linkedTexture);r.copyTexSubImage2D(r.TEXTURE_2D,0,c,h,a,s,l,u),o.bindTexture(d),o.bindRenderTarget(p)}},t.prototype.dispose=function(){this.unload()},t.prototype.unload=function(){var t=this._context._gl,e=this._framebuffer,n=this._depthStencil;t.deleteFramebuffer(e),t.deleteRenderbuffer(n),this._linkedTexture=null,this._framebuffer=null,this._depthStencil=null,this._context.stats.counter.renderTarget--,this._context.stats.memory.renderTarget-=this.memoryUsage},t}(),Tn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMsaaTarget=!0,e}return o(e,t),Object.defineProperty(e.prototype,"readBuffer",{get:function(){return this._drawTarget.readBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isValid",{get:function(){return this._framebuffer&&this._drawTarget&&this._drawTarget.isValid},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this._context._gl,e=this._context._texContext;this._context.stats.counter.renderTarget++,this._framebuffer=t.createFramebuffer(),this._depthStencil=this._colorOnly?null:t.createRenderbuffer(),this._color=t.createRenderbuffer();var n=this._depthStencil,i=this._color,r=this.width,o=this.height,a=t.getParameter(t.MAX_SAMPLES),s=t.RENDERBUFFER,l=t.FRAMEBUFFER,u=t.COLOR_ATTACHMENT0,c=t.DEPTH_STENCIL_ATTACHMENT,h=t.RGBA8,p=t.DEPTH24_STENCIL8,d=e.bindRenderTarget(this);t.bindRenderbuffer(s,i),t.framebufferRenderbuffer(l,u,s,i),t.renderbufferStorageMultisample(s,a,h,r,o),this.memoryUsage=r*o*8*Math.sqrt(a),n&&(t.bindRenderbuffer(s,n),t.framebufferRenderbuffer(l,c,s,n),t.renderbufferStorageMultisample(s,a,p,r,o),this.memoryUsage*=2),e.bindRenderTarget(d,!0),this._context.stats.memory.renderTarget+=this.memoryUsage},e.prototype.linkTarget=function(t){if(t===this)throw"Framebuffer loop, linking to itself";this._drawTarget=t},e.prototype.present=function(t,e,n){if(void 0===t&&(t=this._drawTarget),this._framebuffer){if(t===this)throw"Framebuffer loop, presenting to itself";if(t&&t.isValid){var i=~~(null==e?void 0:e.x)||0,r=~~(null==e?void 0:e.y)||0,o=~~(null==e?void 0:e.width)||t.width,a=~~(null==e?void 0:e.height)||t.height,s=~~(null==n?void 0:n.x)||0,l=~~(null==n?void 0:n.y)||0,u=t,c=s||l;c&&!t.isMsaaTarget&&(u=this._drawTarget,i=r=s=l=0,o=t.width,a=t.height);var h=this._context._gl;h.bindFramebuffer(h.READ_FRAMEBUFFER,this._framebuffer),h.bindFramebuffer(h.DRAW_FRAMEBUFFER,u._framebuffer),h.blitFramebuffer(i,r,i+o,r+a,s,l,s+o,l+a,h.COLOR_BUFFER_BIT,h.NEAREST),c&&!t.isMsaaTarget&&this._drawTarget.present(t,e,n)}}},e.prototype.linkTexture=function(t){throw"Texture can't be linked to MSAA render target"},e.prototype.dispose=function(){this.unload()},e.prototype.unload=function(){this._context._gl.deleteRenderbuffer(this._color),this._color=null,this._drawTarget=null,t.prototype.unload.call(this)},e}(Dn),Pn={texture2d:3553,textureCube:34067},Bn=((rn={})[zt.REPEAT]=10497,rn[zt.CLAMP]=33071,rn),On=((on={})[Vt.LINEAR]=9729,on[Vt.NEAREST]=9728,on),Mn=((an={})[Vt.LINEAR]=((sn={})[Nt.MIPNEAREST]=9985,sn[Nt.MIPLINEAR]=9987,sn[Nt.MIPNONE]=9729,sn),an[Vt.NEAREST]=((ln={})[Nt.MIPNEAREST]=9984,ln[Nt.MIPLINEAR]=9986,ln[Nt.MIPNONE]=9728,ln),an),Ln=Bt,Rn=Ot,Nn=((un={})[Ln.ONE]=1,un[Ln.DESTINATION_ALPHA]=772,un[Ln.DESTINATION_COLOR]=774,un[Ln.ONE_MINUS_DESTINATION_ALPHA]=773,un[Ln.ONE_MINUS_DESTINATION_COLOR]=775,un[Ln.ONE_MINUS_SOURCE_ALPHA]=771,un[Ln.ONE_MINUS_SOURCE_COLOR]=769,un[Ln.SOURCE_ALPHA]=770,un[Ln.SOURCE_COLOR]=768,un[Ln.ZERO]=0,un),Fn=((cn={})[Rn.ADD]=32774,cn[Rn.SUBTRACT]=32778,cn[Rn.REVERSE_SUBTRACT]=32779,cn[Rn.MIN]=32775,cn[Rn.MAX]=32776,cn),kn=((hn={})[Rt.LINES]=1,hn[Rt.TRIANGLES]=4,hn),Un=Lt,Vn=((pn={})[Un.ALWAYS]=519,pn[Un.EQUAL]=514,pn[Un.GREATER]=516,pn[Un.GREATER_EQUAL]=518,pn[Un.LESS]=513,pn[Un.LESS_EQUAL]=515,pn[Un.NEVER]=512,pn[Un.NOT_EQUAL]=517,pn),jn=Ut,Gn=((dn={})[jn.KEEP]=7680,dn[jn.SET]=7681,dn[jn.INCREMENT_SATURATE]=7682,dn[jn.DECREMENT_SATURATE]=7683,dn[jn.INVERT]=5386,dn[jn.INCREMENT_WRAP]=34055,dn[jn.DECREMENT_WRAP]=34056,dn[jn.ZERO]=0,dn),Qn=function(){return function(t,e,n){this.size=t,this.type=e,this.normalized=n}}(),zn=Qt,Hn=((fn={})[zn.FLOAT_1]=new Qn(1,5126,!1),fn[zn.FLOAT_2]=new Qn(2,5126,!1),fn[zn.FLOAT_3]=new Qn(3,5126,!1),fn[zn.FLOAT_4]=new Qn(4,5126,!1),fn[zn.BYTE_1]=new Qn(1,5120,!0),fn[zn.BYTE_2]=new Qn(2,5120,!0),fn[zn.BYTE_3]=new Qn(3,5120,!0),fn[zn.BYTE_4]=new Qn(4,5120,!0),fn[zn.UNSIGNED_BYTE_1]=new Qn(1,5121,!0),fn[zn.UNSIGNED_BYTE_2]=new Qn(2,5121,!0),fn[zn.UNSIGNED_BYTE_3]=new Qn(3,5121,!0),fn[zn.UNSIGNED_BYTE_4]=new Qn(4,5121,!0),fn[zn.SHORT_1]=new Qn(1,5122,!1),fn[zn.SHORT_2]=new Qn(2,5122,!1),fn[zn.SHORT_3]=new Qn(3,5122,!1),fn[zn.SHORT_4]=new Qn(4,5122,!1),fn[zn.UNSIGNED_SHORT_1]=new Qn(1,5123,!1),fn[zn.UNSIGNED_SHORT_2]=new Qn(2,5123,!1),fn[zn.UNSIGNED_SHORT_3]=new Qn(3,5123,!1),fn[zn.UNSIGNED_SHORT_4]=new Qn(4,5123,!1),fn),Xn=function(){function t(e){this._context=e,this._samplerStates=[],this._currentRT=null;var n=this._gl=e._gl;t.MAX_SAMPLERS=Math.min(t.MAX_SAMPLERS,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)-1);for(var i=0;i<t.MAX_SAMPLERS;++i)this._samplerStates[i]=new Sn(i,null,e),this._samplerStates[i].set(2===e.glVersion?n.REPEAT:n.CLAMP_TO_EDGE,n.LINEAR,n.LINEAR)}return t.prototype.bindRenderTarget=function(t,e){if(void 0===e&&(e=!1),e&&this._currentRT===t)return t;var n=this._currentRT;return this._currentRT=t,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,t?t._framebuffer:null),n},t.prototype.bindTexture=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=this._gl.TEXTURE_2D),e&&t===this._lastBoundedTexture)return t;var i=this._lastBoundedTexture;return this._lastBoundedTexture=t,this._gl.bindTexture(n,t?t._glTexture:t),i},t.prototype.uploadFromArray=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var r=this._context._gl,o=t._width>>>n,a=t._height>>>n;if(e&&e.length!==o*a*4)throw new Error("Array is not the correct length for texture dimensions: expected: ".concat(o*a*4,", exist: ").concat(e.length));e instanceof Array&&(e=new Uint8Array(e));var s=this.bindTexture(t,!0,r.TEXTURE_2D);r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),r.texImage2D(r.TEXTURE_2D,n,r.RGBA,o,a,0,r.RGBA,r.UNSIGNED_BYTE,e),this.bindTexture(s,!0,r.TEXTURE_2D)},t.prototype.setTextureAt=function(t,e){var n=this._context._gl,i=this._samplerStates[t],r=Pn[e.textureType];return(e||i.type)&&n.activeTexture(n.TEXTURE0+t),e?(e._state.id=t,this.bindTexture(e,!1,r),i.commit(r,e),t):(i.type&&(i.boundedTexture&&(i.boundedTexture._state.id=-1),this.bindTexture(null,!1,i.type),i.boundedTexture=null,i.type=null),-1)},t.prototype.setSamplerStateAt=function(t,e,n,i){if(!this._samplerStates[t])throw"Sampler is out of bounds.";this._samplerStates[t].set(Bn[e],On[n],Mn[n][i])},t.prototype.unsafeCopyToTexture=function(t,e,n){var i=this._context._gl,r=this.bindTexture(t,!1);i.copyTexSubImage2D(i.TEXTURE_2D,0,n.x,n.y,e.x,e.y,e.width,e.height),this.bindTexture(r,!0)},t.prototype.setRenderToTexture=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0),this._currentRT&&this._currentRT.present(),this.setFrameBuffer(t,e,n)},t.prototype.setRenderToBackBuffer=function(){this._currentRT&&this._currentRT.present(),this.bindRenderTarget(null,!0)},t.prototype.setFrameBuffer=function(t,e,n){var i=t.width,r=t.height;t._renderTarget||this.initFrameBuffer(t,n,e),this.bindRenderTarget(t._renderTarget,!0),e?(this._context.enableDepth(),this._context.enableStencil()):(this._context.disableDepth(),this._context.disableStencil()),this._context.setViewport(0,0,i,r)},t.prototype.initFrameBuffer=function(t,e,n){var i=t.width,r=t.height,o=new Dn(this._context,i,r,!n);if(o.linkTexture(t),e&&2===this._context.glVersion){var a=new Tn(this._context,i,r,!n);a.linkTarget(o),o=a}t._renderTarget=o},t.prototype.presentFrameBufferTo=function(t,e,n,i){var r=this._context._gl,o=this._currentRT;e._renderTarget||this.initFrameBuffer(e,!1,!1);var a=e._renderTarget.drawBuffer;!t||!t.isMsaaTarget||r instanceof WebGLRenderingContext?(this.bindRenderTarget(t,!0),this.unsafeCopyToTexture(e,n,i)):a&&(r.bindFramebuffer(r.READ_FRAMEBUFFER,t.drawBuffer),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,a),r.blitFramebuffer(0|n.x,0|n.y,n.width+n.x|0,n.height+n.y|0,0|i.x,0|i.y,i.x+n.width|0,i.y+n.height|0,r.COLOR_BUFFER_BIT,r.LINEAR)),this.blitTextureToRenderbuffer(e),this.bindRenderTarget(o,!0)},t.prototype.blitTextureToRenderbuffer=function(t){var e=this._context._gl;if(t._renderTarget.isMsaaTarget&&e instanceof WebGL2RenderingContext){var n=t._width,i=t._height;e.bindFramebuffer(e.DRAW_FRAMEBUFFER,t._renderTarget.readBuffer),e.bindFramebuffer(e.READ_FRAMEBUFFER,t._renderTarget.drawBuffer),e.blitFramebuffer(0,0,n,i,0,0,n,i,e.COLOR_BUFFER_BIT,e.LINEAR)}},t.prototype.disposeTexture=function(t){var e=this._context._gl;t===this._lastBoundedTexture&&(this._lastBoundedTexture=null),e.deleteTexture(t._glTexture),t._renderTarget&&t._renderTarget.dispose()},t.MAX_SAMPLERS=16,t}(),Yn=function(){function t(e){this._context=e,this._isRequireUnbound=!1;var n=e._gl;if(!t.isSupported(n))throw"[VaoContextWebGL] VAO not supported!";if(window.WebGL2RenderingContext&&n instanceof window.WebGL2RenderingContext)this._createVertexArray=n.createVertexArray.bind(n),this._deleteVertexArray=n.deleteVertexArray.bind(n),this._bindVertexArray=n.bindVertexArray.bind(n);else{var i=n.getExtension("OES_vertex_array_object");this._createVertexArray=i.createVertexArrayOES.bind(i),this._deleteVertexArray=i.deleteVertexArrayOES.bind(i),this._bindVertexArray=i.bindVertexArrayOES.bind(i)}}return t.isSupported=function(t){return!!(window.WebGL2RenderingContext&&t instanceof window.WebGL2RenderingContext)||t.getSupportedExtensions().indexOf("OES_vertex_array_object")>-1},t.prototype.createVertexArray=function(){return this._context.stats.counter.vao++,this._createVertexArray()},t.prototype.unbindVertexArrays=function(){this._bindVertexArray(null),this._lastBoundedVao=null,this._isRequireUnbound=!1},t.prototype.bindVertexArray=function(t){this._context.stateChangeCallback&&this._context.stateChangeCallback("bindVertexArray"),t!==this._lastBoundedVao&&(t?(this._isRequireUnbound=!1,this._lastBoundedVao=t,this._bindVertexArray(t._vao)):this._isRequireUnbound=!0)},t.prototype.deleteVertexArray=function(t){this._lastBoundedVao===t&&this._bindVertexArray(null),this._deleteVertexArray(t._vao),this._lastBoundedVao=null,this._context.stats.counter.vao--},t}(),qn=function(){function t(t){this._context=t,this._vao=t._vaoContext.createVertexArray()}return t.prototype.attachIndexBuffer=function(t){this._indexBuffer||(this.bind(),this._context.bindIndexBuffer(t),this._indexBuffer=t)},t.prototype.bind=function(){this._context._vaoContext.bindVertexArray(this)},t.prototype.unbind=function(t){void 0===t&&(t=!1),t?this._context._vaoContext.unbindVertexArrays():this._context._vaoContext.bindVertexArray(null)},t.prototype.dispose=function(){this._context._vaoContext.deleteVertexArray(this),this._vao=null},t}(),Kn=function(){function t(){this.values=[],this.fixedValues=[],this.dirty=!0,this._deltaDirty=[],this._locked=!1,this.values=Array.prototype.slice.call(arguments)}return t.prototype.lock=function(t){if(this._locked=t,t){for(var e=this.values,n=0,i=e.length;n<i;n++)this.fixedValues[n]=e[n];this.fixedValues.length=e.length,this.dirty=!1}},t.prototype.set=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._locked?this.fixedValues:this.values,i=this.values,r=!1,o=0;o<t.length;o++)r=r||n[o]!==t[o],i[o]=t[o];return this.dirty=r},t.prototype.setAt=function(t,e){var n=(this._locked?this.fixedValues:this.values)[t]!==e;return this.values[t]=e,this.dirty=this.dirty||n,n},t.prototype.deltaDirty=function(){var t=this._deltaDirty,e=this.values,n=this.fixedValues;t.length=e.length;for(var i=0;i<e.length;i++)t[i]=e[i]!==n[i];return t},t.prototype.reset=function(){this.set()},t}(),Wn=function(){function t(t,e){void 0===e&&(e=0),this._contex=t,this._alreadyInit=!1,this._size=0,this._gl=t._gl,this._buffer=this._gl.createBuffer(),this._size=e,t.stats.counter.pbo++}return t.unboundAll=function(){this._lastBounded&&this._lastBounded.unbind()},t.isSuported=function(t){return window.WebGL2RenderingContext&&t instanceof window.WebGL2RenderingContext},Object.defineProperty(t.prototype,"alive",{get:function(){return!!this._buffer},enumerable:!1,configurable:!0}),t.prototype.read=function(e){var n=e.length;if(n<=0||n!==this._size)throw"Buffer length MUST be a same size as buffer on read state!";var i=this._gl;t._lastBounded!==this&&(i.bindBuffer(i.PIXEL_PACK_BUFFER,this._buffer),t._lastBounded=this),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,e)},t.prototype.bind=function(e){if(void 0===e&&(e=0),0===this._size&&0===e)throw"Buffer require size for bounding";var n=this._gl;t._lastBounded!==this&&n.bindBuffer(n.PIXEL_PACK_BUFFER,this._buffer),(!this._alreadyInit||this._size!==e&&e>0)&&(this._contex.stats.memory.pbo-=this._size,e>0&&(this._size=e),n.bufferData(n.PIXEL_PACK_BUFFER,this._size,n.DYNAMIC_READ),this._alreadyInit=!0,this._contex.stats.memory.pbo+=this._size),t._lastBounded=this},t.prototype.unbind=function(){t._lastBounded===this&&(this._gl.bindBuffer(this._gl.PIXEL_PACK_BUFFER,null),t._lastBounded=null)},t.prototype.dispose=function(){this.unbind(),this._gl.deleteBuffer(this._buffer),this._buffer=null,this._size=0,this._gl=null,this._contex.stats.counter.pbo--,this._contex.stats.memory.pbo+=this._size},t}(),Jn=function(){function t(t){this._context=t,this.pool=[],this._tasks=[],this._gl=t._gl}return t.prototype.readPixels=function(t,e,n,i){var r=this,o=this.pool.pop()||new Wn(this._context);o.bind(n*i*4);var a=this._gl;a.readPixels(t,e,n,i,a.RGBA,a.UNSIGNED_BYTE,0);var s=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);return a.isSync(s)?new Promise((function(t){r._tasks.push({task:t,pbo:o,fence:s})})):(console.warn("[FenceContextWebGL] Fence return invalid state, closig task immediate:",s),Promise.resolve(o))},t.prototype.tick=function(){if(0!==this._tasks.length){var t=this._gl,e=this._tasks;this._tasks=[];for(var n=0;n<e.length;n++){var i=e[n],r=!1;t.isSync(i.fence)||(console.warn("[FenceContextWebGL] Task has invalid fence state, closig task immediate:",i.fence),r=!0),r||t.getSyncParameter(i.fence,t.SYNC_STATUS)===t.SIGNALED?(i.task(i.pbo),t.deleteSync(i.fence),e[n]=void 0):this._tasks.push(i)}}},t.prototype.release=function(t){t.alive&&this.pool.push(t)},t.prototype.unboundAll=function(){Wn.unboundAll()},t.prototype.dispose=function(){this._tasks=null,this.pool.forEach((function(t){return t.dispose()})),this.pool=[],this._gl=null},t.isSupported=Wn.isSuported,t}(),Zn=function(){function t(){this.counter={index:0,vertex:0,vao:0,texture:0,renderTarget:0,program:0,pbo:0,total:0},this.memory={index:0,vertex:0,texture:0,renderTarget:0,pbo:0,get total(){return this.index+this.vertex+this.texture+this.renderTarget+this.pbo}}}return t.prototype.toTableLikeMB=function(){var t={};for(var e in this.counter)t[e]={count:this.counter[e],memory:(this.memory[e]||0)/1048576};return t},t.prototype.toString=function(){var t=this.toTableLikeMB(),e=["\n".concat("type".padStart(16," ")," | ").concat("count".padStart(5)," | ").concat("mem MB".padStart(6),"\n")];for(var n in t)e.push("".concat(n.padStart(16)," | ").concat(t[n].count.toFixed().padStart(5)," | ").concat(t[n].memory.toFixed(4).padStart(8)));return e.join("\n")+"\n"},t.prototype.toTableConsole=function(){console.table(this.toTableLikeMB())},t}(),$n="";window._AWAY_DEBUG_=Object.assign(window._AWAY_DEBUG_||{},{forceLineMode:function(t){void 0===t&&(t=!1),$n=t?"line":""}});var ti,ei=function(){function t(t,e){void 0===e&&(e=!1),this.stats=new Zn,this._drawing=!0,this._viewportState=new Kn(0,0,0,0),this._blendState=new Kn(0,Fn[Ot.ADD],Fn[Ot.ADD],0,0,-1,-1),this._colorMapState=new Kn(!0,!0,!0,!0),this._clearColorState=new Kn(0,0,0,0),this._clearSD=new Kn(0,-1),this._depthState=new Kn(0,0,0),this._stencilState=new Kn(0,1,0),this._cullState=new Kn(0,0,0),this._stencilReferenceValue=0,this._stencilReadMask=255,this._separateStencil=!1,this._lastBoundedIndexBuffer=null,this._hasVao=!1,this._instancedEnabled=!1,this._instancesCount=1,this._container=t,this.initWebGL(e)}return t.prototype.hasInstancing=function(){return this._gl instanceof self.WebGL2RenderingContext||!!this._angleInstanced},Object.defineProperty(t.prototype,"hasFence",{get:function(){return!!this._fenceContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVao",{get:function(){return this._hasVao},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"glVersion",{get:function(){return this._glVersion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelRatio",{get:function(){return this._pixelRatio},set:function(t){this._pixelRatio=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){this._container=t,this.initWebGL()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"standardDerivatives",{get:function(){return this._standardDerivatives},enumerable:!1,configurable:!0}),t.prototype.assertLost=function(t){if(oe.PROFILE_CONTEXT_LOST&&this._gl.isContextLost())throw"[ContextWebGL] Context lost after ".concat(t,", state: ").concat(this.stats.toString())},t.prototype.initWebGL=function(t){void 0===t&&(t=!1);var e={alpha:t,antialias:oe.ENABLE_ANTIALIAS,stencil:!0};try{2===oe.PREF_WEBGL_VERSION&&(this._gl=this._container.getContext("webgl2",e),this._glVersion=2),this._gl||(this._gl=this._container.getContext("webgl",e)||this._container.getContext("experimental-webgl",e),this._glVersion=1,2===oe.PREF_WEBGL_VERSION&&console.warn("[CONTEXT] Preferred WebGL2 not supported on you device. WebGL1 will used!")),console.debug("[CONTEXT] Preferred WebGL: ".concat(oe.PREF_WEBGL_VERSION,", used: ").concat(this._glVersion))}catch(t){}if(this._gl){var n=this._gl;this._standardDerivatives=2===this._glVersion||!!n.getExtension("OES_standard_derivatives"),this._stencilCompareMode=n.ALWAYS,this._stencilCompareModeBack=n.ALWAYS,this._stencilCompareModeFront=n.ALWAYS,this._pixelRatio=self.devicePixelRatio||1}else alert("WebGL is not available.");this._texContext=new Xn(this),oe.ENABLE_VAO?Yn.isSupported(this._gl)?(this._vaoContext=new Yn(this),this._hasVao=!0):console.warn("[ContextWebGL] VAO isn't supported"):console.debug("[ContextWebGL] Vao disabled by settings 'ENABLE_VAO'"),oe.ENABLE_ASYNC_READ?Jn.isSupported(this._gl)?this._fenceContext=new Jn(this):console.warn("[ContextWebGL] FenceSync isn't supported"):console.debug("[ContextWebGL] FenceSync disabled by settings 'ENABLE_ASYNC_READ'"),1===this._glVersion&&(this._angleInstanced=this._gl.getExtension("ANGLE_instanced_arrays")),this._blendState.lock(!0),window._AWAY_CONTEXT_STATS_=this.stats},t.prototype.gl=function(){return this._gl},t.prototype.clear=function(t,e,n,i,r,o,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=Mt.ALL),this.stateChangeCallback&&this.stateChangeCallback("clear"),this._drawing||(this.updateBlendStatus(),this._drawing=!0);var s=0;a&Mt.COLOR&&(this._clearColorState.set(t,e,n,i)&&this._gl.clearColor(t,e,n,i),s|=this._gl.COLOR_BUFFER_BIT),a&Mt.STENCIL&&(s|=this._gl.STENCIL_BUFFER_BIT,this._clearSD.setAt(0,o)&&this._gl.clearStencil(o)),a&Mt.DEPTH&&(s|=this._gl.DEPTH_BUFFER_BIT,this._clearSD.setAt(0,r)&&this._gl.clearDepth(r)),this._gl.clear(s)},t.prototype.configureBackBuffer=function(t,e,n,i){void 0===i&&(i=!0),this.stateChangeCallback&&this.stateChangeCallback("setBackBuffer"),this._width=t*this._pixelRatio,this._height=e*this._pixelRatio,i?(this.enableStencil(),this.enableDepth()):(this.disableStencil(),this.disableDepth()),this._viewportState.set(0,0,this._width,this._height)&&this._gl.viewport(0,0,this._width,this._height)},t.prototype.createCubeTexture=function(t,e,n,i){return new An(this,t)},t.prototype.createIndexBuffer=function(t){return bn.create(this,t)},t.prototype.createProgram=function(){return new In(this)},t.prototype.createTexture=function(t,e,n,i,r){return En.create(this,t,e)},t.prototype.createVertexBuffer=function(t,e){return wn.create(this,t,e)},t.prototype.createVao=function(){if(!this._hasVao)throw"VAO isn'n supported";return new qn(this)},t.prototype.dispose=function(){},t.prototype.drawToBitmapImage2D=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.stateChangeCallback&&this.stateChangeCallback("drawToBitmap");var i,r=new Uint8Array(t.getDataInternal().buffer),o=this._texContext._currentRT,a=this._fenceContext,s=t.width,l=t.height;n&&!a&&(i=Promise.resolve(!1));var u=this._texContext._currentRT;return o.isMsaaTarget&&(o.present(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,o.readBuffer)),n&&a?i=a.readPixels(0,0,s,l).then((function(n){return n.read(r),e&&t.invalidateGPU(),a.release(n),!0})):(a&&a.unboundAll(),this._gl.readPixels(0,0,s,l,this._gl.RGBA,this._gl.UNSIGNED_BYTE,r),e&&t.invalidateGPU()),this._texContext.bindRenderTarget(u,!1),i},t.prototype.beginInstancedRender=function(t){if(void 0===t&&(t=1),!this.hasInstancing())throw"Instanced rendering not supported";this._instancedEnabled=!0,this._instancesCount=t},t.prototype.drawIndices=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=-1),this.stateChangeCallback&&this.stateChangeCallback("drawIndices");var r=this._gl;if(!this._drawing)throw"Need to clear before drawing if the buffer has not been cleared since the last present() call.";this.updateBlendStatus(),this._lastBoundedIndexBuffer&&!this._lastBoundedIndexBuffer.glBuffer&&(this._lastBoundedIndexBuffer=null),this._hasVao&&this._vaoContext._lastBoundedVao||(this._lastBoundedIndexBuffer!==e&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.glBuffer),this._lastBoundedIndexBuffer=e),t="line"===$n?Rt.LINES:t;var o=kn[t],a=-1==i?e.numIndices:i,s=r.UNSIGNED_SHORT,l=2*n,u=this._instancesCount;this._instancedEnabled?this._angleInstanced?this._angleInstanced.drawElementsInstancedANGLE(o,a,s,l,u):r.drawElementsInstanced(o,a,s,l,u):r.drawElements(o,a,s,l),this._instancedEnabled=!1,this._instancesCount=1,this.assertLost("drawElements")},t.prototype.bindIndexBuffer=function(t){this.stateChangeCallback&&this.stateChangeCallback("bindIndexBuffer"),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,t.glBuffer),this._lastBoundedIndexBuffer=t},t.prototype.drawVertices=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=-1),!this._drawing)throw"Need to clear before drawing if the buffer has not been cleared since the last present() call.";if(this.stateChangeCallback&&this.stateChangeCallback("drawVertices"),0!=n){this.updateBlendStatus(),t="line"===$n?Rt.LINES:t;var i=kn[t],r=this._instancesCount;this._instancedEnabled?this._angleInstanced?this._angleInstanced.drawArraysInstancedANGLE(i,e,n,r):this._gl.drawArraysInstanced(i,e,n,r):this._gl.drawArrays(i,e,n),this._instancedEnabled=!1,this._instancesCount=1,this.assertLost("drawArrays")}},t.prototype.present=function(){this.stateChangeCallback&&this.stateChangeCallback("present"),this._fenceContext&&this._fenceContext.tick()},t.prototype.setBlendState=function(t){this.stateChangeCallback&&this.stateChangeCallback("setBlendState"),this._blendState.setAt(0,+t)},t.prototype.setBlendEquation=function(t,e){void 0===e&&(e=t),this._blendState.setAt(1,Fn[t]),this._blendState.setAt(2,Fn[e])},t.prototype.setBlendFactors=function(t,e,n,i){this.stateChangeCallback&&this.stateChangeCallback("setBlendFactors");var r=Nn[t],o=Nn[e],a=this._gl;if(null==n)this._blendState.set(1,a.FUNC_ADD,a.FUNC_ADD,r,o,-1,-1);else{if(typeof n!=typeof i)throw"[Context] sourceAlphaFactor and destinationAlphaFactor MUST be BOTH presented for separated blend mode";var s=Nn[n],l=Nn[i];this._blendState.set(1,a.FUNC_ADD,a.FUNC_ADD,r,o,s,l)}},t.prototype.setColorMask=function(t,e,n,i){this.stateChangeCallback&&this.stateChangeCallback("setColorMask"),this._colorMapState.set(t,e,n,i)&&this._gl.colorMask(t,e,n,i)},t.prototype.setCulling=function(t,e){if(void 0===e&&(e=gt.LEFT_HANDED),this.stateChangeCallback&&this.stateChangeCallback("setCulling"),t===Gt.NONE)this._cullState.setAt(0,0)&&this._gl.disable(this._gl.CULL_FACE);else{this._cullState.setAt(0,1)&&this._gl.enable(this._gl.CULL_FACE);var n=this.translateTriangleFace(t,e);this._cullState.setAt(1,n)&&this._gl.cullFace(n)}},t.prototype.setDepthTest=function(t,e){this.stateChangeCallback&&this.stateChangeCallback("setDepthTest");var n=Vn[e];this._depthState.setAt(1,+t)&&this._gl.depthMask(t),this._depthState.setAt(2,n)&&this._gl.depthFunc(n)},t.prototype.setViewport=function(t,e,n,i){this.stateChangeCallback&&this.stateChangeCallback("setViewport"),this._viewportState.set(t,e,n,i)&&this._gl.viewport(t,e,n,i)},t.prototype.enableDepth=function(){this.stateChangeCallback&&this.stateChangeCallback("enableDepth"),this._depthState.setAt(0,1)&&this._gl.enable(this._gl.DEPTH_TEST)},t.prototype.disableDepth=function(){this.stateChangeCallback&&this.stateChangeCallback("disableDepth"),this._depthState.setAt(0,0)&&this._gl.disable(this._gl.DEPTH_TEST)},t.prototype.enableStencil=function(){this.stateChangeCallback&&this.stateChangeCallback("enableStencil"),this._stencilState.setAt(0,1)&&this._gl.enable(this._gl.STENCIL_TEST)},t.prototype.disableStencil=function(){this.stateChangeCallback&&this.stateChangeCallback("disableStencil"),this._stencilState.setAt(0,0)&&this._gl.disable(this._gl.STENCIL_TEST)},t.prototype.setStencilActions=function(t,e,n,i,r,o){void 0===t&&(t=Gt.FRONT_AND_BACK),void 0===e&&(e=Lt.ALWAYS),void 0===n&&(n=Ut.KEEP),void 0===i&&(i=Ut.KEEP),void 0===r&&(r=Ut.KEEP),void 0===o&&(o=gt.LEFT_HANDED),this.stateChangeCallback&&this.stateChangeCallback("setStencilActions"),this._separateStencil=t!=Gt.FRONT_AND_BACK;var a=Vn[e],s=Gn[r],l=Gn[i],u=Gn[n];this._separateStencil?t==Gt.BACK?(this._stencilCompareModeBack=a,this._gl.stencilFuncSeparate(this._gl.BACK,a,this._stencilReferenceValue,this._stencilReadMask),this._gl.stencilOpSeparate(this._gl.BACK,s,l,u)):t==Gt.FRONT&&(this._stencilCompareModeFront=a,this._gl.stencilFuncSeparate(this._gl.FRONT,a,this._stencilReferenceValue,this._stencilReadMask),this._gl.stencilOpSeparate(this._gl.FRONT,s,l,u)):(this._stencilCompareMode=a,this._gl.stencilFunc(a,this._stencilReferenceValue,this._stencilReadMask),this._gl.stencilOp(s,l,u)),this.assertLost("setStencilActions")},t.prototype.setStencilReferenceValue=function(t,e,n){void 0===e&&(e=255),void 0===n&&(n=255),this.stateChangeCallback&&this.stateChangeCallback("setStencilReferenceValue"),this._stencilReferenceValue=t,this._stencilReadMask=e,this._separateStencil?(this._gl.stencilFuncSeparate(this._gl.FRONT,this._stencilCompareModeFront,t,e),this._gl.stencilFuncSeparate(this._gl.BACK,this._stencilCompareModeBack,t,e)):this._gl.stencilFunc(this._stencilCompareMode,t,e),this._gl.stencilMask(n),this.assertLost("setStencilReferenceValue")},t.prototype.setProgram=function(t){this._currentProgram!==t&&(this.stateChangeCallback&&this.stateChangeCallback("setProgram"),this._currentProgram=t,t.focusProgram(),this.assertLost("setProgram"))},t.prototype.setProgramConstantsFromArray=function(t,e){e.length&&this._currentProgram.uniform4fv(t,e)},t.prototype.setScissorRectangle=function(t){if(this.stateChangeCallback&&this.stateChangeCallback("setScissorRectangle"),t){var e=!!this._texContext._currentRT?1:this._pixelRatio;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(t.x*e,t.y*e,t.width*e,t.height*e),this.assertLost("scissor")}else this._gl.disable(this._gl.SCISSOR_TEST)},t.prototype.setTextureAt=function(t,e){this.stateChangeCallback&&this.stateChangeCallback("setTextureAt");var n=this._texContext.setTextureAt(t,e);n>=0&&this._currentProgram.uniform1i(kt.SAMPLER,t,n)},t.prototype.setSamplerStateAt=function(t,e,n,i){this.stateChangeCallback&&this.stateChangeCallback("setSamplerStateAt"),this._texContext.setSamplerStateAt(t,e,n,i),this.assertLost("setSamplerStateAt")},t.prototype.setVertexBufferAt=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=4),this.stateChangeCallback&&this.stateChangeCallback("setVertexBufferAt");var r=this._currentProgram?this._currentProgram.getAttribLocation(t):-1,o=this._gl;if(this.hasVao&&this._vaoContext._isRequireUnbound&&this._vaoContext.unbindVertexArrays(),e){(this._currentArrayBuffer!=e||this.hasVao&&this._vaoContext._lastBoundedVao)&&(this._currentArrayBuffer=e,o.bindBuffer(o.ARRAY_BUFFER,e?e.glBuffer:null));var a=Hn[i];o.enableVertexAttribArray(r),o.vertexAttribPointer(r,a.size,a.type,a.normalized,e.dataPerVertex,n),this._instancedEnabled&&e.instanced&&(this._angleInstanced?this._angleInstanced.vertexAttribDivisorANGLE(r,1):o.vertexAttribDivisor(r,1)),this.assertLost("setVertexBufferAt")}else r>-1&&o.disableVertexAttribArray(t)},t.prototype.setRenderToTexture=function(t,e,n,i,r){void 0===e&&(e=!1),void 0===n&&(n=0),this.stateChangeCallback&&this.stateChangeCallback("setRenderToTexture"),this._texContext.setRenderToTexture(t,e,n>1),this.assertLost("setRenderToTexture")},t.prototype.setRenderToBackBuffer=function(){this.stateChangeCallback&&this.stateChangeCallback("setRenderToBackBuffer"),this._texContext.setRenderToBackBuffer(),this.assertLost("setRenderToBackBuffer")},t.prototype.copyToTexture=function(t,e,n){if(this.stateChangeCallback&&this.stateChangeCallback("setRenderToBackBuffer"),!this._texContext._currentRT)throw"[ContextWebGL] Try to copy from invalid frambuffer";this._texContext.presentFrameBufferTo(this._texContext._currentRT,t,e,n),this.assertLost("copyToTexture")},t.prototype.updateBlendStatus=function(){var t=this._blendState;if(t.dirty){var e=t.values,n=t.deltaDirty();t.lock(!0),e[0]||!n[0]?(n[0]&&this._gl.enable(this._gl.BLEND),(n[0]||n[1]||n[2])&&(e[1]!==e[2]?this._gl.blendEquationSeparate(e[1],e[2]):this._gl.blendEquation(e[1])),(n[0]||n[3]||n[4]||-1!==e[5])&&(-1!==e[5]?this._gl.blendFuncSeparate(e[3],e[4],e[5],e[6]):this._gl.blendFunc(e[3],e[4]))):this._gl.disable(this._gl.BLEND)}},t.prototype.finish=function(){this._gl.flush(),this._gl.finish(),this._fenceContext&&this._fenceContext.tick(),this.assertLost("finish")},t.prototype.translateTriangleFace=function(t,e){switch(t){case Gt.BACK:return e==gt.LEFT_HANDED?this._gl.FRONT:this._gl.BACK;case Gt.FRONT:return e==gt.LEFT_HANDED?this._gl.BACK:this._gl.FRONT;case Gt.FRONT_AND_BACK:return this._gl.FRONT_AND_BACK;default:throw"Unknown ContextGLTriangleFace type."}},t}(),ni=function(t){function e(){var e=t.call(this,256,256,!0)||this;return e._data=new Uint8Array(262144),e._gradMap={},e._count=0,e}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.getAtlassForHash=function(t,n){var i;void 0===n&&(n=!0);for(var r=0,o=this.gradientAtlases;r<o.length;r++){if((l=o[r]).hasGradient(t)){i=l;break}}if(i)return i;if(!n)return null;for(var a=0,s=this.gradientAtlases;a<s.length;a++){var l;if(!(l=s[a]).full)return l}return i=new e,this.gradientAtlases.push(i),i},e.computeHash=function(t,e,n){return t.join("")+e.map((function(t){return 255*t|0}))+n.join("")},Object.defineProperty(e.prototype,"full",{get:function(){return 256===this._count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._count},enumerable:!1,configurable:!0}),e.prototype.hasGradient=function(t){return t in this._gradMap},e.prototype.getGradient=function(t){return this._gradMap[t]},e.prototype.setGradient=function(t,n,i){if(!t||!n||!i)return null;if(0!==i.length){var r=e.computeHash(t,n,i);if(r in this._gradMap)return this._gradMap[r];if(256===this._count)return null;var o=this._count;return this._count++,this.fillRow(t,n,i,o),this._gradMap[r]={index:o,hash:r}}},e.prototype.fillRow=function(t,e,n,i){0===n[0]&&255===n[n.length]||(t=t.slice(),n=n.slice(),e=e.slice(),0!==n[0]&&(n.unshift(0),t.unshift(t[0]),e.unshift(e[0])),255!==n[n.length-1]&&(n.push(255),t.push(t[t.length-1]),e.push(e[e.length-1])));var r=n.length,o=[0,0,0,0],a=[0,0,0,0],s=new Uint8Array(this._data.buffer,1024*i,1024);s.fill(0);for(var l=0;l<r;l++){$e.colorToU8(t[l+0],e[l+0],o),$e.colorToU8(t[l+1],e[l+1],a);for(var u=n[l+0],c=n[l+1],h=u;h<=c;h++){var p=(h-u)/(c-u),d=4*h;s[d+0]=o[0]+(a[0]-o[0])*p|0,s[d+1]=o[1]+(a[1]-o[1])*p|0,s[d+2]=o[2]+(a[2]-o[2])*p|0,s[d+3]=o[3]+(a[3]-o[3])*p|0;var f=s[d+3]/255;s[d+0]=s[d+0]*f|0,s[d+1]=s[d+1]*f|0,s[d+2]=s[d+2]*f|0}}this.invalidate()},e.assetType="[image GradientAtlas]",e.gradientAtlases=[],e}(fe),ii=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTexture=function(){return t.prototype.getTexture.call(this),this._invalid&&this._texture.uploadFromArray(this._asset._data,0,!1),this._invalid=!1,this._texture},e}(_e),ri=function(t){function e(){var e=t.call(this)||this;return e.activateInternaly=!1,e.imageScale=1,e._currentIndex=0,e._gradInvalid=!1,e._renderMode="color",e._shadowColor=0,e._shadowAlpha=1,e._highlightColor=1048575,e._highlightAlpha=1,e._dirInvalid=!1,e._angle=45,e._distance=4,e.strength=1,e._knockout=!1,e._type="inner",e._focusId=-1,e}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BevelTask:"+this._renderMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderMode",{get:function(){return this._renderMode},set:function(t){t!==this._renderMode&&(this._renderMode=t,this.invalidateProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(t){this.shadowColor!==t&&(this._shadowColor=t,this._gradInvalid=!0,this.renderMode="color")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowAlpha",{get:function(){return this._shadowAlpha},set:function(t){t!==this._shadowAlpha&&(this._shadowAlpha=t,this._gradInvalid=!0,this.renderMode="color")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highlightColor",{get:function(){return this._highlightColor},set:function(t){this._highlightColor!==t&&(this._highlightColor=t,this._gradInvalid=!0,this.renderMode="color")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highlightAlpha",{get:function(){return this._highlightAlpha},set:function(t){this._highlightAlpha!==t&&(this._highlightAlpha=t,this._gradInvalid=!0,this.renderMode="color")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(t){t!==this._angle&&(this._angle=t,this._dirInvalid=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(t){t!==this._distance&&(this._distance=t,this._dirInvalid=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colors",{get:function(){return this._colors},set:function(t){this._colors=t,t.length&&(this._gradInvalid=!0,this.renderMode="gradient")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphas",{get:function(){return this._alphas},set:function(t){this._alphas=t,t.length&&(this._gradInvalid=!0,this.renderMode="gradient")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ratios",{get:function(){return this._ratios},set:function(t){this._ratios=t,t.length&&(this._gradInvalid=!0,this.renderMode="gradient")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this._knockout},set:function(t){t!==this._knockout&&(this._knockout=t,this.invalidateProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){t!==this._type&&(this._type=t,this.invalidateProgram())},enumerable:!1,configurable:!0}),e.prototype.getVertexCode=function(){return"\nprecision highp float;\nuniform vec4 uTexMatrix[2];\nuniform vec4 uTexMatrixSource;\n\n/* AGAL legacy atrib resolver MUST resolver this as va0 */\nattribute vec4 aPos; // position\n\nvarying vec2 vUv[2];\n\nvoid main() {\n\tvec4 pos = aPos;\n\n\tpos.xy = pos.xy * uTexMatrix[0].zw + uTexMatrix[0].xy;\n\tpos.z = pos.z * 2.0 - pos.w;\n\n    gl_Position = pos;\n\n\tvUv[0] = clamp((aPos.xy * uTexMatrix[1].zw) + uTexMatrix[1].xy, 0., 1.);\n\tvUv[1] = clamp((aPos.xy * uTexMatrixSource.zw) + uTexMatrixSource.xy , 0., 1.);\n}\n\n"},e.prototype.getFragmentCode=function(){var t,e,n;return t=this._renderMode,e=this._knockout,n=this._type,void 0===t&&(t="color"),void 0===e&&(e=!1),void 0===n&&(n="inner"),"\nprecision highp float;\nvarying vec2 vUv[2];\n\nuniform float uStrength;\nuniform vec2 uDir;\n\n/* AGAL uniforms will be reolved this as fs0 */\n// blur\nuniform sampler2D uBlur;\n/* AGAL uniforms will be resolved this as fs1 */\n// source\nuniform sampler2D uSource;\n".concat("color"===t?"\nuniform vec4 uHColor;\nuniform vec4 uSColor;\n\nvec4 bevel(float shadow, float high) {\n\tfloat factor = high - shadow;\n\n\tshadow = min(1., max(0., factor) * uStrength) * uSColor.a;\n\thigh = min(1., max(0., -factor) * uStrength) * uHColor.a;\n\n\treturn vec4(uSColor.rgb * shadow + uHColor.rgb * high, shadow + high);\n}":"\n// gradient\nuniform sampler2D uGrad;\nuniform float uGradIndex;\n\nvec4 bevel(float shadow, float high) {\n\tshadow *= uStrength;\n\thigh *= uStrength;\n\n\tvec2 pos = vec2(0.5 * (1. + shadow - high), uGradIndex);\n\n\treturn texture2D(uGrad, pos);\n}","\n\nvoid main() {\n\tvec4 color = texture2D(uSource, vUv[1]);\n\tfloat a = color.a;\n\tfloat shadow = texture2D(uBlur, vUv[0] + uDir).a;\n\tfloat high = texture2D(uBlur, vUv[0] - uDir).a;\n\t").concat(n&&"inner"!==n?"":"vec4 outColor = bevel(shadow, high) * color.a;","\n\t").concat("outer"===n?"vec4 outColor = bevel(shadow, high) * (1.0 - color.a);":"","\n\t").concat("full"===n?"vec4 outColor = bevel(shadow, high);":"","\n\t").concat(e?"gl_FragColor = outColor;":"gl_FragColor = color * (1.0 - outColor.a) + outColor;","\n}")},e.prototype._regenColorMap=function(){if(this._gradInvalid&&"gradient"===this._renderMode){var t=ni.computeHash(this._colors,this._alphas,this._ratios);if(this._gradInvalid=!1,this._currentHash!==t){var e=this._currentAtlass=ni.getAtlassForHash(t,!0);e.hasGradient(t)?this._currentIndex=e.getGradient(t).index:this._currentIndex=e.setGradient(this._colors,this._alphas,this.ratios).index,this._currentHash=t,this._gradInvalid=!1}}},e.prototype.preActivate=function(t){"gradient"===this._renderMode&&this._regenColorMap()},e.prototype.activate=function(e,n,i){t.prototype.computeVertexData.call(this);var r=this._source,o=this.inputRect,a=this.sourceImage,s=this._program3D,l=s.focusId!==this._focusId;if(s.uploadUniform("uTexMatrix",this._vertexConstantData),l||this._dirInvalid){var u=this.angle*Math.PI/180;s.uploadUniform("uDir",[this.imageScale*Math.cos(u)*this.distance/r.width,this.imageScale*Math.sin(u)*this.distance/r.height])}s.uploadUniform("uStrength",this.strength),s.uploadUniform("uTexMatrixSource",[0,0,o.width/a.width,o.height/a.height]),r.getAbstraction(e).activate(0),a.getAbstraction(e).activate(1),"gradient"===this._renderMode?(this._currentAtlass.getAbstraction(e).activate(2),s.uploadUniform("uGradIndex",this._currentIndex/this._currentAtlass.height)):(this._gradInvalid||l)&&(s.uploadUniform("uSColor",$e.colorToArray(this._shadowColor,this._shadowAlpha)),s.uploadUniform("uHColor",$e.colorToArray(this._highlightColor,this._highlightAlpha))),this._focusId=s.focusId,this._dirInvalid=!1},e}(We),oi=function(t){function e(e){var n=t.call(this)||this;return n._blurFilter=new _n,n._bevelTask=new ri,n.distance=1,n.angle=45,n.highlightColor=16777215,n.highlightAlpha=1,n.shadowColor=1,n.shadowAlpha=0,n.alphas=[],n.colors=[],n.ratios=[],n.strength=1,n.type="inner",n.knockout=!1,n.imageScale=1,n.addTask(n._bevelTask),n.applyProps(e),n}return o(e,t),e.prototype.applyProps=function(t){for(var e=0,n=this[en];e<n.length;e++){var i=n[e];i in t&&(this[i]=t[i])}this._blurFilter.applyProps(t)},e.prototype.meashurePad=function(t,e){void 0===e&&(e=t),e=this._blurFilter.meashurePad(t,e);var n=0,i=0,r=Math.abs(this.distance);if("inner"!==this.type&&r>0){var o=this.angle*Math.PI/180;n+=Math.abs(Math.cos(o))*r*this.imageScale*2,i+=Math.abs(Math.sin(o))*r*this.imageScale*2}return e.x-=n,e.y-=i,e.width+=n,e.height+=i,e},e.prototype.apply=function(e,n,i,r,o,a){void 0===a&&(a=!1);var s=o.popTemp(e.width,e.height);this._blurFilter.apply(e,s,i,s.rect,o,!0),this._bevelTask.sourceImage=e,t.prototype.apply.call(this,s,n,i,r,o,a),o.pushTemp(s)},e.prototype.setRenderState=function(e,n,i,r,o){t.prototype.setRenderState.call(this,e,n,i,r,o),this._bevelTask.inputRect.copyFrom(i),this._bevelTask.destRect.copyFrom(r),this._bevelTask.source=e,this._bevelTask.target=n},e.filterName="bevel",s([nn,tn("_bevelTask")],e.prototype,"distance",void 0),s([nn,tn("_bevelTask")],e.prototype,"angle",void 0),s([nn,tn("_bevelTask")],e.prototype,"highlightColor",void 0),s([nn,tn("_bevelTask")],e.prototype,"highlightAlpha",void 0),s([nn,tn("_bevelTask")],e.prototype,"shadowColor",void 0),s([nn,tn("_bevelTask")],e.prototype,"shadowAlpha",void 0),s([nn,tn("_bevelTask")],e.prototype,"alphas",void 0),s([nn,tn("_bevelTask")],e.prototype,"colors",void 0),s([nn,tn("_bevelTask")],e.prototype,"ratios",void 0),s([nn,tn("_bevelTask")],e.prototype,"strength",void 0),s([nn],e.prototype,"quality",void 0),s([nn,tn("_bevelTask")],e.prototype,"type",void 0),s([nn,tn("_bevelTask")],e.prototype,"knockout",void 0),s([nn,tn("_bevelTask")],e.prototype,"imageScale",void 0),e}(Ze),ai=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),"\nprecision highp float;\nuniform vec4 uPosMatrix;\nuniform vec4 uTexMatrix[".concat(t,"];\n\n/* AGAL legacy atribb resolver MUST reolver this as va0 */\nattribute vec4 aPos; // position\n\nvarying vec2 vUv[").concat(t,"];\n").concat(e?"varying vec4 vUvLim[".concat(t,"];"):"","\n\nvoid main() {\n\tvec4 pos = aPos;\n\n\tpos.xy = pos.xy * uPosMatrix.zw + uPosMatrix.xy;\n\tpos.z = pos.z * 2.0 - pos.w;\n\n    gl_Position = pos;\n\t").concat(function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),Array.from({length:t},(function(t,n){var i="vUv[".concat(n,"] = aPos.xy * uTexMatrix[").concat(n,"].zw + uTexMatrix[").concat(n,"].xy;");return e&&(i+="\nvUvLim[".concat(n,"] = vec4(uTexMatrix[").concat(n,"].xy, uTexMatrix[").concat(n,"].zw + uTexMatrix[").concat(n,"].xy);")),i})).join("\n")}(t,e),"\n}\n\n")},si=function(t){function e(e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var i=t.call(this,!1)||this;i._uvBlocks=e,i._limits=n,i.uvMatrices=[],i._dataBuffer=new Float32Array(4*e+4),i.posMatrix=i._dataBuffer.subarray(0,4),i._vertexConstantData=i._dataBuffer.subarray(0,8),i._uvMatricesBuffer=i._dataBuffer.subarray(4,4+4*e);for(var r=0;r<e;r++)i.uvMatrices[r]=i._uvMatricesBuffer.subarray(4*r,4*(r+1));return i}return o(e,t),e.prototype.getVertexCode=function(){return ai(this._uvBlocks,this._limits)},e.prototype.uploadVertexData=function(){this.computeVertexData(),this._program3D.uploadUniform("uPosMatrix",this.posMatrix),this._program3D.uploadUniform("uTexMatrix",this._uvMatricesBuffer)},e}(We),li=((ti={})[ze.DIFFERENCE]="vec4 top = vec4(abs(src.rgb - dst.rgb), 1.0) * max(src.a, dst.a);\n\n\treturn top + normal * (1.0 - top.a);",ti[ze.SUBTRACT]="vec4 top = vec4(dst.rgb - src.rgb, 1.0) * max(src.a, dst.a);\n\n\treturn top + normal * (1.0 - top.a);",ti[ze.INVERT]="dst.rgb = (dst.rgb * (1.0 - src.a) + (1. - dst.rgb) * src.a);\n\tdst.rgb *= dst.a;\n\n\treturn dst;",ti[ze.DARKEN]="vec4 top = vec4(min(src.rgb, dst.rgb), 1.0) * src.a * dst.a;\n\n\treturn top + normal * (1.0 - top.a);",ti[ze.LIGHTEN]="vec4 top = vec4(max(src.rgb, dst.rgb), 1.0) * src.a * dst.a;\n\n\treturn top + normal * (1.0 - top.a);",ti[ze.HARDLIGHT]="vec3 factor = step(vec3(0.5), dst.rgb);\n\tvec3 screen = (1. - 2. * (1. - src.rgb) * (1. - dst.rgb));\n\tvec3 multiple =  2. * src.rgb * dst.rgb;\n\n\tvec4 top = vec4(factor * multiple + (1. - factor) * screen, 1.);\n\ttop *= dst.a * src.a;\n\n\treturn top + normal * (1.0 - top.a);",ti[ze.OVERLAY]="\n\tvec4 factor = 1.0 - step(dst, vec4(0.5));\n\tvec4 base = factor - dst;\n\tvec4 blend = src - factor;\n\tvec4 top = base * blend / (factor - 0.5) + factor;\n\ttop *= dst.a * src.a;\n\ttop += dst * dst.a * (1.0 - src.a);\n\ttop.a = dst.a;\n\n\treturn top;",ti[ze.SCREEN]="vec3 screen = (1. - (1. - src.rgb) * (1. - dst.rgb));\n\tvec4 top = vec4(screen, 1.);\n\ttop *= dst.a * src.a;\n\n\treturn top + normal * (1.0 - top.a);",ti);var ui,ci,hi=new Float32Array([1,1,1,1,0,0,0,0]),pi=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0]),di=function(t,e){return"\nprecision highp float;\nuniform sampler2D fs0;\n\nvarying vec2 vUv[2];\n\n".concat("transform"===t?"\nuniform vec4 uTransformData[2];\n\nvec4 transform(vec4 color) {\n\tif (color.a > 0.0) {\n\t\tcolor.rgb /= color.a;\n\t}\n\n\tcolor *= clamp(uTransformData[0], 0.0, 1.0);\t\n\tcolor += uTransformData[1];\n\n\tcolor.rgb *= clamp(color.a, 0., 1.);\n\treturn color;\n}\n":"matrix"===t?"\nuniform vec4 uTransformData[5];\n\nvec4 transform(vec4 color) {\n\tif (color.a > 0.0) {\n\t\tcolor.rgb /= color.a;\n\t}\n\n\tvec4 ret = uTransformData[4];\n\tret.r += dot(color, uTransformData[0]);\n\tret.g += dot(color, uTransformData[1]);\n\tret.b += dot(color, uTransformData[2]);\n\tret.a += dot(color, uTransformData[3]);\n\n\tret = clamp(ret, 0., 1.);\n\tret.rgb *= ret.a;\n\t\n\treturn ret;\n}\n":"","\n\n").concat(e?function(t){return"\nuniform float uComposite;\nuniform sampler2D fs1;\n\nvec4 composite (vec4 src) {\n\tvec4 dst = texture2D(fs1, vUv[1]);\n\tvec4 normal = src + (1.0 - src.a) * dst;\n\n\tvec4 pma_src = src;\n\tvec4 pma_dst = dst;\n\n\tif (src.a > 0.0) src.rgb /= src.a;\n\tif (dst.a > 0.0) dst.rgb /= dst.a;\n\n\t// composite as ".concat(t,"\n\t").concat(li[t],"\n}\n")}(e):"","\n\nvoid main() {\n\tvec4 color = texture2D(fs0, vUv[0]);\n\tcolor = ").concat(t?"transform(color)":"color",";\t\n    gl_FragColor = ").concat(e?"composite(color)":"color",";\n}")},fi=function(t){function e(){var e=t.call(this,2,!1)||this;return e._dataChanged=!1,e._composite="",e._mode="",e._focusId=-1,e}return o(e,t),e.prototype.setCompositeBlend=function(t){var e=this._composite;return this._composite=null,this.back=null,function(t){return t in li}(t)&&(this._composite=t),this._composite!==e&&this.invalidateProgram(),null!==this._composite},Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},set:function(t){if(this._transform!==t||t){if(this._transform=t,this._dataChanged=!0,this._fragData&&8===this._fragData.length||(this._fragData=new Float32Array(8)),t){this._fragData.set(t._rawData);for(var e=4;e<8;e++)this._fragData[e]/=255;this._fragData[7]>0&&(this._fragData[7]=0)}else this._fragData.set(hi);var n=t?"transform":"";this._mode!==n&&(this._mode=n,this.invalidateProgram())}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return this._matrix},set:function(t){if(this._matrix=t,this._dataChanged=!0,this._fragData&&20===this._fragData.length||(this._fragData=new Float32Array(20)),t)for(var e=0;e<4;e++){for(var n=0;n<4;n++)this._fragData[n+4*e]=t[n+5*e];this._fragData[16+e]=t[4+5*e]/255}else this._fragData.set(pi);var i=t?"matrix":"";this._mode!==i&&(this._mode=i,this.invalidateProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"CopyFilter:"+this._mode+",c:"+this._composite},enumerable:!1,configurable:!0}),e.prototype.getFragmentCode=function(){return di(this._mode,this._composite)},e.prototype.activate=function(t,e,n){var i=this._program3D;if(this._mode&&(this._dataChanged||i.focusId!==this._focusId)&&i.uploadUniform("uTransformData",this._fragData),this._focusId=i.focusId,this._dataChanged=!1,this.source.getAbstraction(t).activate(0),this._composite&&this.back){var r=this.inputRect.width/this.back.width,o=this.inputRect.height/this.back.height;this.uvMatrices[1].set([0,0,r,o],0),this.back.getAbstraction(t).activate(1)}this.uploadVertexData()},e}(si),_i=((ui={})[""]=[Bt.ONE,Bt.ONE_MINUS_SOURCE_ALPHA],ui[ze.NORMAL]=[Bt.ONE,Bt.ONE_MINUS_SOURCE_ALPHA],ui[ze.LAYER]=[Bt.ONE,Bt.ONE_MINUS_SOURCE_ALPHA],ui[ze.ADD]=[Bt.ONE,Bt.ONE],ui[ze.ERASE]=[Bt.ZERO,Bt.ONE_MINUS_SOURCE_ALPHA],ui[ze.ALPHA+"_back"]=[Bt.DESTINATION_ALPHA,Bt.ZERO],ui),gi=function(t){function e(e){var n=t.call(this)||this;return n._blendDst=Bt.ONE_MINUS_SOURCE_ALPHA,n._blendSrc=Bt.ONE,n._compositeOverShader=!1,n._requireBlend=!0,n._blend="",n._copyPixelTask=new fi,n.addTask(n._copyPixelTask),e&&n.applyProps(e),n}return o(e,t),Object.defineProperty(e.prototype,"blendDst",{get:function(){return this._blendDst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendSrc",{get:function(){return this._blendSrc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireBlend",{get:function(){return this._requireBlend&&!this._compositeOverShader},set:function(t){!this._requireBlend&&t&&(this.blend=""),this._requireBlend=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blend",{get:function(){return this._blend},set:function(t){var e=_i[t];this._blend=t,this._compositeOverShader=!1,this._requireBlend=""!==t&&t!==ze.LAYER,e?(this._blendDst=e[1],this._blendSrc=e[0]):this._compositeOverShader=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorTransform",{get:function(){return this._copyPixelTask.transform},set:function(t){this._copyPixelTask.transform=t,t||(this._requireBlend=!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return this._copyPixelTask.matrix},set:function(t){this._copyPixelTask.matrix=t,this._requireBlend=!t},enumerable:!1,configurable:!0}),e.prototype.applyProps=function(t){this.matrix=null==t?void 0:t.matrix},e.prototype.apply=function(e,n,i,r,o,a){var s;void 0===a&&(a=!1),this._compositeOverShader&&this._copyPixelTask.setCompositeBlend(this._blend)&&oe.UNSAFE_USE_SHADER_COMPOSER&&(s=o.popTemp(n.width,n.height),this._copyPixelTask.back=n),t.prototype.apply.call(this,e,s||n,i,r,o,a),s&&(o.copyPixels(s,n,r,r,!1,""),o.pushTemp(s)),this._copyPixelTask.setCompositeBlend("")},e.filterName="colorMatrix",e}(Ze),mi=function(t){function e(){var e=t.call(this)||this;return e._opDecode={"<":"slt ","<=":"sge ",">":"slt ",">=":"sge ","==":"seq ","!=":"sne "},e._thDecode={"<":!1,"<=":!0,">":!0,">=":!1,"==":!1,"!=":!1},e._operation="<",e._op="slt ",e._th=!1,e._threshold=0,e._thresholdRGBA=new Float32Array([0,0,0,0]),e._color=0,e._mask=0,e._copySource=!1,e._fragmentConstantData=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,65025,255,1,16581375]),e._colorRGBA=e._fragmentConstantData.subarray(4,8),e._maskRGBA=e._fragmentConstantData.subarray(8,12),e._decodeVector=e._fragmentConstantData.subarray(12,16),e}return o(e,t),Object.defineProperty(e.prototype,"operation",{get:function(){return this._operation},set:function(t){this._operation!=t&&(this._operation=t,this._op=this._opDecode[t],this._th=this._thDecode[t],this.invalidateProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"threshold",{get:function(){return this._threshold},set:function(t){this._threshold!=t&&(this._threshold=t,this._thresholdRGBA.set([(t>>16&255)/255,(t>>8&255)/255,(255&t)/255,(t>>24&255)/255]))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){if(this._color!=t){this._color=t;var e=(t>>24&255)/255;this._colorRGBA.set([e*(t>>16&255)/255,e*(t>>8&255)/255,e*(255&t)/255,e])}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask!=t&&(this._mask=t,this._maskRGBA.set([(t>>16&255)/255,(t>>8&255)/255,(255&t)/255,(t>>24&255)/255]))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copySource",{get:function(){return this._copySource},set:function(t){this._copySource!=t&&(this._copySource=t,this.invalidateProgram())},enumerable:!1,configurable:!0}),e.prototype.getFragmentCode=function(){var t=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(t,1);var e=this._registerCache.getFreeTextureReg();this.sourceSamplerIndex=e.index;var n=this._registerCache.getFreeFragmentConstant();this._fragmentConstantsIndex=n.index;var i,r=this._registerCache.getFreeFragmentConstant(),o=this._registerCache.getFreeFragmentConstant(),a=this._registerCache.getFreeFragmentConstant();if(this._copySource){var s=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(s,1);var l=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(l,1),i="tex "+t+", "+this._uvVarying+", "+e+" <2d,linear,clamp>\nmul "+s+", "+t+", "+o+"\ndp4 "+s+", "+s+", "+a+"\n"+this._op+s+", "+(this._th?n:s)+", "+(this._th?s:n)+"\nsub "+l+", "+a+".zzzz, "+s+"\nmul "+s+", "+s+", "+r+"\nmul "+l+", "+l+", "+t+"\nadd "+t+", "+s+", "+l+"\nmov oc, "+t+"\n",this._registerCache.removeFragmentTempUsage(l),this._registerCache.removeFragmentTempUsage(s)}else i="tex "+t+", "+this._uvVarying+", "+e+" <2d,linear,clamp>\nmul "+t+", "+t+", "+o+"\ndp4 "+t+", "+t+", "+a+"\n"+this._op+t+", "+(this._th?n:t)+", "+(this._th?t:n)+"\nmul "+t+", "+t+", "+r+"\nmov oc, "+t+"\n";return this._registerCache.removeFragmentTempUsage(t),i},e.prototype.activate=function(e,n,i){t.prototype.computeVertexData.call(this);var r=this._thresholdRGBA,o=this._maskRGBA,a=this._decodeVector,s=r[0]*o[0]*a[0]+r[1]*o[1]*a[1]+r[2]*o[2]*a[2]+r[3]*o[3]*a[3],l=this._fragmentConstantsIndex,u=this._fragmentConstantData;u[l]=s,u[l+1]=s,u[l+2]=s,u[l+3]=s;var c=e.context;c.setProgramConstantsFromArray(kt.VERTEX,this._vertexConstantData),c.setProgramConstantsFromArray(kt.FRAGMENT,this._fragmentConstantData),this._source.getAbstraction(e).activate(this.sourceSamplerIndex)},e}(Ke),yi=function(t){function e(){var e=t.call(this)||this;return e._thresholdTask=new mi,e.addTask(e._thresholdTask),e}return o(e,t),s([tn("_thresholdTask")],e.prototype,"operation",void 0),s([tn("_thresholdTask")],e.prototype,"color",void 0),s([tn("_thresholdTask")],e.prototype,"mask",void 0),s([tn("_thresholdTask")],e.prototype,"copySource",void 0),s([tn("_thresholdTask")],e.prototype,"threshold",void 0),e}(Ze),Ai=function(t){function e(){var e=t.call(this,2,!0)||this;return e.mode="wrap",e.componentX=1,e.componentY=2,e.mapPoint=new O(0,0),e._uColor=[0,0,0,0],e._color=0,e._alpha=0,e.scaleX=1,e.scaleY=1,e}return o(e,t),Object.defineProperty(e.prototype,"isValid",{get:function(){return this.mapBitmap&&!this.mapBitmap.isDisposed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color!==t&&(this._color=t,$e.colorToArray(this._color,this._alpha,this._uColor))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alpha=t,this._uColor[3]=this._alpha)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"Displacement:".concat(this.mode,":").concat(this.componentX,":").concat(this.componentY)},enumerable:!1,configurable:!0}),e.prototype.getFragmentCode=function(){return function(t){var e=t.compX,n=void 0===e?0:e,i=t.compY,r=void 0===i?1:i,o=t.mode,a=void 0===o?"wrap":o;return"\nprecision highp float;\n\n// source\nuniform sampler2D fs0;\n// map\nuniform sampler2D fs1;\nuniform vec2 uMapPoint;\nuniform vec2 uScale;\n".concat("color"===a?"uniform vec4 uColor;":"","\n\nvarying vec2 vUv[2];\nvarying vec4 vUvLim[2];\n\nvoid main() {\n\tvec4 map = texture2D(fs1, vUv[1] - uMapPoint);\n\tvec2 offset = vec2(map[").concat(0|n,"] - 0.5, map[").concat(0|r,"] - 0.5) * uScale * 2.0; \n\n\tvec2 uv = vUv[0] + offset;\n\n\t// invalid, we must remap onto vUvLim[0]\n\t").concat(a&&"wrap"!==a?"":"uv = fract(uv);","\n\t").concat("clamp"===a?"uv = clamp(uv, vUvLim[0].xy, vUvLim[0].zw);":"","\n\n\t").concat("ignore"===a?"uv = vUv;":"","\n\t").concat("color"===a?"bool outside = uv.x < 0. || uv.x > 1. || uv.y < 0. || uv.y > 1.;":"","\n\n\t").concat("color"===a?"gl_FragColor = outside ? uColor : texture2D(fs0, uv);":"gl_FragColor = texture2D(fs0, uv);","\n\t\n\t//gl_FragColor = map;\n}\n\n")}({compX:Math.log2(this.componentX),compY:Math.log2(this.componentY),mode:this.mode})},e.prototype.activate=function(e,n,i){t.prototype.computeVertexData.call(this);var r=this.inputRect,o=this.destRect,a=this.mapBitmap,s=this._program3D;this.uvMatrices[1].set([0,0,a.width/o.width,a.height/o.height],0),this.uploadVertexData(),s.uploadUniform("uScale",[this.scaleX/r.width,this.scaleY/r.height]),s.uploadUniform("uMapPoint",[this.mapPoint.x/a.width,this.mapPoint.y/a.height]),"color"===this.mode&&s.uploadUniform("uColor",this._uColor),this._source.getAbstraction(e).activate(0),this.mapBitmap.getAbstraction(e).activate(1)},e}(si),vi=function(t){function e(e){var n=t.call(this)||this;return n._displacement=new Ai,n.addTask(n._displacement),n.applyProps(e),n}return o(e,t),e.prototype.applyProps=function(t){if(t)for(var e=0,n=this[en];e<n.length;e++){var i=n[e];i in t&&(this[i]=t[i])}},e.prototype.meashurePad=function(e,n){return(n=t.prototype.meashurePad.call(this,e,n)).x=Math.max(0,n.x-this.scaleX/4|0),n.y=Math.max(0,n.y-this.scaleY/4|0),n.width+=Math.ceil(this.scaleX/4),n.height+=Math.ceil(this.scaleY/4),n},e.filterName="displacement",s([nn,tn("_displacement")],e.prototype,"mapBitmap",void 0),s([nn,tn("_displacement")],e.prototype,"mapPoint",void 0),s([nn,tn("_displacement")],e.prototype,"componentX",void 0),s([nn,tn("_displacement")],e.prototype,"componentY",void 0),s([nn,tn("_displacement")],e.prototype,"scaleX",void 0),s([nn,tn("_displacement")],e.prototype,"scaleY",void 0),s([nn,tn("_displacement")],e.prototype,"mode",void 0),s([nn,tn("_displacement")],e.prototype,"color",void 0),s([nn,tn("_displacement")],e.prototype,"alpha",void 0),e}(Ze),bi=function(t){function e(){var e=t.call(this,2)||this;return e._uColor=new Float32Array([0,0,0,0]),e._uProps=new Float32Array([1,0,1,1]),e._uDir=new Float32Array([0,0]),e._color=0,e._alpha=1,e._angle=0,e._distance=1,e.imageScale=1,e}return o(e,t),Object.defineProperty(e.prototype,"strength",{get:function(){return this._uProps[0]},set:function(t){this._uProps[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inner",{get:function(){return!!this._uProps[1]},set:function(t){this._uProps[1]=t?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return!this._uProps[2]},set:function(t){this._uProps[2]=t?0:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hideObject",{get:function(){return!this._uProps[3]},set:function(t){this._uProps[3]=t?0:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,$e.colorToArray(this._color,this._alpha,this._uColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._uColor[3]},set:function(t){this._uColor[3]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(t){this._distance=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"DropShadowTask"},enumerable:!1,configurable:!0}),e.prototype.getFragmentCode=function(){return"\nprecision highp float;\n\nuniform sampler2D uBlur;\nuniform sampler2D uSource;\nuniform vec4 uColor;\n// strength, inner, not knokout, not hideObject\nuniform vec4 uProps;\nuniform vec2 uDir;\n\nvarying vec2 vUv[2];\n\nvoid main() {\n    vec4 color = uColor;\n\n    float outer = 1. - uProps[1];\n    float inner = uProps[1];\n\tfloat shadow = texture2D(uBlur, vUv[0] + uDir).a;\t\n\n\tvec4 main = texture2D(uSource, vUv[1]);\n\n\t// mask inner by main\n\tshadow = outer * shadow + (1. - shadow) * inner * main.a;\n\n\tcolor.a = clamp(color.a * shadow * uProps[0], 0., 1.);\n\tcolor.rgb *= color.a;\n\n\tif (uProps[3] > 0.0) {\n\t\tvec4 composite = main * uProps[2];\n\n\t\tcolor = \n\t\t\touter * (composite + (1. - main.a) * color) + \n\t\t\tinner * (composite * (1. - color.a) + color);\n\t}\n\t\n\tgl_FragColor = color;\n}"},e.prototype.activate=function(t){var e=this.sourceImage,n=this._source,i=this.inputRect.width/e.width,r=this.inputRect.height/e.height;this.uvMatrices[1].set([0,0,i,r],0);var o=Math.PI*this._angle/180;this._uDir[0]=this.imageScale*-Math.cos(o)*this._distance/e.width,this._uDir[1]=this.imageScale*-Math.sin(o)*this._distance/e.height,n.getAbstraction(t).activate(0),e.getAbstraction(t).activate(1),this.uploadVertexData(),this._program3D.uploadUniform("uColor",this._uColor),this._program3D.uploadUniform("uProps",this._uProps),this._program3D.uploadUniform("uDir",this._uDir)},e}(si),xi=function(t){function e(e){var n=t.call(this)||this;return n._shadowTask=new bi,n.distance=0,n.angle=0,n.color=0,n.alpha=1,n.strength=1,n.inner=!1,n.knockout=!1,n.hideObject=!1,n.imageScale=1,n._blurFilter=new _n(e),n.addTask(n._shadowTask),n.applyProps(e),n}return o(e,t),e.prototype.applyProps=function(t){if(t){for(var n=0,i=this[en];n<i.length;n++){var r=i[n];r in t&&(this[r]=t[r])}t.filterName===e.filterNameAlt&&(this.angle=0,this.distance=0),this._blurFilter.applyProps(t)}},e.prototype.meashurePad=function(t,e){void 0===e&&(e=t),e=this._blurFilter.meashurePad(t,e);var n=0,i=0,r=Math.abs(this.distance);if(!this.inner&&r>0){var o=this.angle*Math.PI/180;n+=Math.cos(o)*r*2,i+=Math.sin(o)*r*2}return e.x-=n,e.y-=i,e.width+=2*n,e.height+=2*i,e},e.prototype.apply=function(e,n,i,r,o,a){void 0===a&&(a=!1);var s=o.popTemp(e.width,e.height);this._blurFilter.apply(e,s,i,s.rect,o,!0),this._shadowTask.sourceImage=e,t.prototype.apply.call(this,s,n,i,r,o,a),o.pushTemp(s)},e.prototype.setRenderState=function(e,n,i,r,o){t.prototype.setRenderState.call(this,e,n,i,r,o),this._shadowTask.inputRect.copyFrom(i),this._shadowTask.destRect.copyFrom(r),this._shadowTask.source=e,this._shadowTask.target=n},e.filterName="dropShadow",e.filterNameAlt="glow",s([nn,tn("_shadowTask")],e.prototype,"distance",void 0),s([nn,tn("_shadowTask")],e.prototype,"angle",void 0),s([nn,tn("_shadowTask")],e.prototype,"color",void 0),s([nn,tn("_shadowTask")],e.prototype,"alpha",void 0),s([nn,tn("_shadowTask")],e.prototype,"strength",void 0),s([nn],e.prototype,"quality",void 0),s([nn,tn("_shadowTask")],e.prototype,"inner",void 0),s([nn,tn("_shadowTask")],e.prototype,"knockout",void 0),s([nn,tn("_shadowTask")],e.prototype,"hideObject",void 0),s([nn,tn("_shadowTask")],e.prototype,"imageScale",void 0),e}(Ze),Ci=new W,Ii=new W,Ei=new W,wi=Object.freeze(new O(0,0)),Si=function(){function t(e){var n;this._stage=e,this._texturePool={},this._activeFilterTask=null,this._filterCache={},this._filterConstructors=((n={})[oi.filterName]=oi,n[_n.filterName]=_n,n[vi.filterName]=vi,n[gi.filterName]=gi,n[xi.filterName]=xi,n[xi.filterNameAlt]=xi,n),t._instance=this}return Object.defineProperty(t,"MAX_TMP_TEXTURE",{get:function(){return he.MAX_SIZE},enumerable:!1,configurable:!0}),Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._stage.context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},enumerable:!1,configurable:!0}),t.prototype.popTemp=function(e,n,i){void 0===i&&(i=!1);var r=Math.max(t.MIN_TMP_TEXTURE,2<<Math.log2(e-1)),o=Math.max(t.MIN_TMP_TEXTURE,2<<Math.log2(n-1));(r>t.MAX_TMP_TEXTURE||o>t.MAX_TMP_TEXTURE)&&(console.warn("[Filter manager] Temporary texture size ".concat(r,"x").concat(o," for ").concat(e,"x").concat(n," is bigger that limit, clamp to ").concat(t.MAX_TMP_TEXTURE)),r=Math.min(r,t.MAX_TMP_TEXTURE),o=Math.min(o,t.MAX_TMP_TEXTURE)),i=i&&2===this.context.glVersion;var a,s="".concat(r,"_").concat(o,"_").concat(~~i);return this._texturePool[s]?a=this._texturePool[s].pop():this._texturePool[s]=[],a||((a=new fe(r,o,!0)).poolKey=s,a.antialiasQuality=i?8:0),a},t.prototype.pushTemp=function(t){var e=t;e&&e.poolKey&&this._texturePool[e.poolKey].push(e)},t.prototype._initFilterElements=function(){this._filterVertexBuffer||(this._filterVertexBuffer=this.context.createVertexBuffer(6,8),this._filterVertexBuffer.uploadFromArray(new Float32Array([0,0,1,1,1,0,0,0,0,1,1,1]),0,6),this._filterSampler=new Qe(!1,!1,!1))},t.prototype._bindFilterElements=function(){var t=this.context;if(this._filterVAO)this._filterVAO.bind();else{var e=t.hasVao?t.createVao():null;e&&e.bind(),t.setVertexBufferAt(0,this._filterVertexBuffer,0,Qt.FLOAT_2),this._filterVAO=e}},t.prototype._unbindFilterElements=function(){this._filterVAO&&this._filterVAO.unbind(!0)},t.prototype.getFilter=function(t,e){if(!this._filterCache[t]&&!this._filterConstructors[t])return console.warn("[FilterManager] Filter not implemented:",t),null;var n=this._filterCache[t];return n?(n.applyProps(e),n):this._filterCache[t]=new this._filterConstructors[t](e)},t.prototype.applyFilter=function(t,e,n,i,r,o,a){var s="string"==typeof r?o:r;if(!s||!s.filterName)return!1;var l=s.filterName,u=this.getFilter(l,s);return!(!u||!u.isValid)&&(this.renderFilter(t,e,n||t.rect,i||t.rect,u),!0)},t.prototype.computeFiltersPadding=function(t,e,n){void 0===n&&(n=t.clone());for(var i=0,r=e;i<r.length;i++){var o=r[i];if(o){var a=this.getFilter(o.filterName,o);a&&a.isValid&&$e.nonAlocUnion(n,a.meashurePad(t,Ci),n)}}return n},t.prototype.applyFilters=function(t,e,n,i,r){var o,a=this,s=r.filter((function(t){return t&&a._filterConstructors[t.filterName]}));if(0===s.length)return!1;if(1===s.length)return!!(h=this.getFilter(s[0].filterName,s[0])).isValid&&(this.renderFilter(t,e,n||t.rect,i||t.rect,h,!0),!0);for(var l=this.popTemp(e.width,e.height),u=this.popTemp(e.width,e.height),c=0;c<s.length;c++){var h;if(!(h=this.getFilter(s[c].filterName,s[c])).isValid)return!1;var p=0===c?t:l,d=c===s.length-1?e:u;this.renderFilter(p,d,n||t.rect,i||t.rect,h,c<s.length-1),l=(o=[u,l])[0],u=o[1]}return this.pushTemp(l),this.pushTemp(u),!0},t.prototype.drawTask=function(t){var e=this._stage,n=this.context;n.setProgram(t.getProgram(e)),this._activeFilterTask||this._bindFilterElements(),this._activeFilterTask=t,t.activate(e,null,null),n.drawVertices(Rt.TRIANGLES,0,6),n._texContext._currentRT.present(),t.deactivate(e)},t.prototype.renderFilter=function(t,e,n,i,r,o){if(t.width*t.height!=0&&n.width*n.height|0){this._initFilterElements();var a=Ei;if(i instanceof O?a.setTo(i.x,i.y,n.width,n.height):a.copyFrom(i),a.width*a.height|0){var s=e;t===e&&(s=this.popTemp(a.width,a.height),a.x=0,a.y=0),r.apply(t,s,n,a,this,t===e),t===e&&(this.copyPixels(s,e,a,i,!1),this.pushTemp(s)),r.clear(this),this.stage.setScissor(null),this._unbindFilterElements(),this._activeFilterTask=null}}},t.prototype.copyPixels=function(t,e,n,i,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=""),!(i.x<-n.width||i.x>e.width||i.y<-n.height||i.y>e.height)&&n.width*n.height|0){var a=Ci;a.copyFrom(n);var s=Ii;if(s.setTo(i.x,i.y,n.width,n.height),a.x<0&&(a.width-=-a.x,s.x+=-a.x,a.x=0),a.y<0&&(a.height-=-a.y,s.y+=-a.y,a.y=0),a.right>t.width){var l=t.width-a.right;a.width-=l}if(a.bottom>t.height){l=t.height-a.bottom;a.height-=l}if(s.x<0&&(a.x+=-s.x,a.width-=-s.x,s.x=0),s.y<0&&(a.y+=-s.y,a.height-=-s.y,s.y=0),a.width>e.width-s.x&&(a.width=e.width-s.x),a.height>e.height-s.y&&(a.height=e.height-s.y),s.width=a.width,s.height=a.height,0!==Math.floor(s.width*s.height)){var u,c=2===this.context.glVersion&&e.antialiasQuality>0,h=r||c||o;if(e===t){u=this.popTemp(t.width,t.height),this._stage.setRenderTarget(t,!1,0,0,!0),this._stage.setScissor(null);var p=u.getAbstraction(this._stage);this.context.copyToTexture(p.getTexture(),t.rect,wi),this._stage.setRenderTarget(u,!1,0,0,!0)}if(h){var d=this._copyPixelFilter=this.getFilter(gi.filterName);d.blend=o,d.requireBlend=r,this.renderFilter(t,e,a,s,d),d.requireBlend=!0}else{u||(this._stage.setRenderTarget(t,!1,0,0,!0),this._stage.setScissor(null));var f=e.getAbstraction(this._stage);this.context.copyToTexture(f.getTexture(),a,s.topLeft)}u&&this.pushTemp(u),this._stage.setRenderTarget(null)}}},t.prototype.threshold=function(t,e,n,i,r,o,a,s,l){i.x<-n.width||i.x>e.width||i.y<-n.height||i.y>e.height||(this._thresholdFilter||(this._thresholdFilter=new yi),this._thresholdFilter.operation=r,this._thresholdFilter.threshold=o,this._thresholdFilter.color=a,this._thresholdFilter.mask=s,this._thresholdFilter.copySource=l||t===e&&n.x===i.x&&n.y===i.y,this.renderFilter(t,e,n,i,this._thresholdFilter))},t.prototype.colorTransform=function(t,e,n,i){this._copyPixelFilter||(this._copyPixelFilter=this.getFilter(gi.filterName)),this._copyPixelFilter.blend="",this._copyPixelFilter.requireBlend=!1,this._copyPixelFilter.colorTransform=i,this.renderFilter(t,e,n,n,this._copyPixelFilter),this._copyPixelFilter.colorTransform=null},t.MIN_TMP_TEXTURE=64,t}(),Di=((ci={})[1]=[Qt.BYTE_1,Qt.BYTE_2,Qt.BYTE_3,Qt.BYTE_4],ci[2]=[Qt.SHORT_1,Qt.SHORT_2,Qt.SHORT_3,Qt.SHORT_4],ci[4]=[Qt.FLOAT_1,Qt.FLOAT_2,Qt.FLOAT_3,Qt.FLOAT_4],ci[5]=[Qt.UNSIGNED_BYTE_1,Qt.UNSIGNED_BYTE_2,Qt.UNSIGNED_BYTE_3,Qt.UNSIGNED_BYTE_4],ci[6]=[Qt.UNSIGNED_SHORT_1,Qt.UNSIGNED_SHORT_2,Qt.UNSIGNED_SHORT_3,Qt.UNSIGNED_SHORT_4],ci),Ti={x:0,y:0},Pi=function(t){function e(e,n,i,r,o){void 0===o&&(o=Ft.BASELINE);var a=t.call(this)||this;return a._programData=new Array,a._x=0,a._y=0,a._touchPoints=new Array,a._stageIndex=-1,a._antiAlias=4,a.savedTargetStack=[],a._activeTargetConf={mipSelector:0,surfaceSelector:0,target:null,depthStencil:!0,msaa:!0},a._frameEndCallbackOnce=[],a._initialised=!1,a.globalDisableMipmap=!1,a.globalDisableSmooth=!1,a.numUsedStreams=0,a.numUsedTextures=0,a.id=f.Next(),a._programDataPool=new mn(a),a._container=e,a._container&&(a._container.addEventListener("webglcontextlost",(function(t){return a.onContextLost(t)})),a._container.addEventListener("webglcontextrestored",(function(t){return a.onContextRestored(t)}))),a._stageIndex=n,a._stageManager=i,Ct.setElementX(a._container,0),Ct.setElementY(a._container,0),a._width=a._container.clientWidth,a._height=a._container.clientHeight,a.visible=!0,a.filterManager=new Si(a),a}return o(e,t),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return this._context.pixelRatio},set:function(t){this._context.pixelRatio=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"glVersion",{get:function(){return this._context.glVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this._screenX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this._screenY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"touchPoints",{get:function(){return this._touchPoints},enumerable:!1,configurable:!0}),e.prototype.requiestFrameEnd=function(t){this._frameEndCallbackOnce.indexOf(t)>-1||"function"!=typeof t||this._frameEndCallbackOnce.push(t)},e.prototype.present=function(){this._context.present(),me.executeAll();for(var t=0,e=this._frameEndCallbackOnce;t<e.length;t++){(0,e[t])()}this._frameEndCallbackOnce.length=0},e.prototype.getProgramData=function(t,e){return this._programDataPool.getItem(t,e)},e.prototype.pushRenderTargetConfig=function(){this.savedTargetStack.push(Object.assign({},this._activeTargetConf))},e.prototype.popRenderTarget=function(){if(0!==this.savedTargetStack.length){var t=this.savedTargetStack.pop(),e=t.target,n=t.depthStencil,i=t.surfaceSelector,r=t.mipSelector,o=t.msaa;this.setRenderTarget(e,n,i,r,!o)}},e.prototype.setRenderTarget=function(t,e,n,i,r){void 0===e&&(e=!1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=!1);var o=this._activeTargetConf;if(o.target!==t||n!==o.surfaceSelector||i!==o.mipSelector||o.depthStencil!==e)if(o.msaa=!r,o.target=t,o.surfaceSelector=n,o.mipSelector=i,o.depthStencil=e,t){var a=t.getAbstraction(this),s="number"==typeof t.antialiasQuality?t.antialiasQuality:this._antiAlias;this._context.setRenderToTexture(a.getTexture(),e,r?0:s,n,i),0!=i&&1!=this._context.glVersion&&(a._invalidMipmaps=!1,a._mipmap=!0)}else this._context.setRenderToBackBuffer(),this.configureBackBuffer(this._width,this._height,this._antiAlias,o.depthStencil)},e.prototype.copyPixels=function(t,e,n,i,r,o,a){void 0===a&&(a=!1),this.filterManager.copyPixels(t,e,n,i,a)},e.prototype.threshold=function(t,e,n,i,r,o,a,s,l){this.filterManager.threshold(t,e,n,i,r,o,a,s,l)},e.prototype.colorTransform=function(t,e,n,i){this.filterManager.colorTransform(t,e,n,i)},e.prototype.requestAbstraction=function(t){return e._abstractionClassPool[t.assetType]},e.registerAbstraction=function(t,n){e._abstractionClassPool[n.assetType]=t},e.prototype.requestContext=function(t,e,n,i){void 0===t&&(t=!1),void 0===e&&(e=Ft.BASELINE),void 0===n&&(n=Ht.AUTO),void 0===i&&(i=!1),null!=this._usesSoftwareRendering&&(this._usesSoftwareRendering=t),this._profile=e;try{this._context=new ei(this._container,i)}catch(t){this.dispatchEvent(new ce(ce.STAGE_ERROR,this))}this._context&&this._callback(this._context)},Object.defineProperty(e.prototype,"width",{get:function(){return this._sizeDirty=!1,this._width},set:function(t){this._width!=t&&(this._container.style.width=t+"px",this._container.width=t*this.pixelRatio,this._width=t,this._backBufferDirty=!0,this._width&&this._height&&this._invalidateSize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._sizeDirty=!1,this._height},set:function(t){this._height!=t&&(this._container.style.height=t+"px",this._container.height=t*this.pixelRatio,this._height=t,this._backBufferDirty=!0,this._width&&this._height&&this._invalidateSize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!=t&&(Ct.setElementX(this._container,t),this._x=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!=t&&(Ct.setElementY(this._container,t),this._y=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return Ct.getElementVisibility(this._container)},set:function(t){Ct.setElementVisibility(this._container,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(t){this._container=t,this._context&&(this._context.container=this._container)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),e.prototype._invalidateSize=function(){this._sizeDirty||(this._sizeDirty=!0,this.dispatchEvent(new ce(ce.INVALIDATE_SIZE,this)))},Object.defineProperty(e.prototype,"profile",{get:function(){return this._profile},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._stageManager.iRemoveStage(this),this.freeContext(),this._stageManager=null,this._stageIndex=-1,me.clearAll()},e.prototype.configureBackBuffer=function(t,e,n,i){this.width=t,this.height=e,this._antiAlias=n,this._activeTargetConf.depthStencil=i,this._context&&this._context.configureBackBuffer(t,e,n,i)},Object.defineProperty(e.prototype,"enableDepthAndStencil",{get:function(){return this._activeTargetConf.depthStencil},set:function(t){this._activeTargetConf.depthStencil!=t&&(this._activeTargetConf.depthStencil=t,this._backBufferDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderSurfaceSelector",{get:function(){return this._activeTargetConf.surfaceSelector},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,e,n,i,r,o,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=Mt.ALL),this._context&&(this._backBufferDirty&&null==this._activeTargetConf.target&&(this._backBufferDirty=!1,this.configureBackBuffer(this._width,this._height,this._antiAlias,this._activeTargetConf.depthStencil)),this._context.clear(t,e,n,i,r,o,a))},Object.defineProperty(e.prototype,"stageIndex",{get:function(){return this._stageIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usesSoftwareRendering",{get:function(){return this._usesSoftwareRendering},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"antiAlias",{get:function(){return this._antiAlias},set:function(t){this._antiAlias!=t&&(this._antiAlias=t,this._backBufferDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t},enumerable:!1,configurable:!0}),e.prototype.registerProgram=function(t){for(var e=0;null!=this._programData[e];)e++;this._programData[e]=t,t.id=e},e.prototype.unRegisterProgram=function(t){this._programData[t.id]=null,t.id=-1},e.prototype.interactionHandler=function(t){var e=null!=t.clientX?t.clientX:t.changedTouches[0].clientX,n=null!=t.clientY?t.clientY:t.changedTouches[0].clientY,i=this.mapWindowToStage(e,n,Ti);if(this._screenX=i.x,this._screenY=i.y,this._touchPoints.length=0,t.touches)for(var r=0;r<t.touches.length;r++){var o=t.touches[r];i=this.mapWindowToStage(o.clientX,o.clientY,Ti),this._touchPoints.push(new le(i.x,i.y,o.identifier))}},e.prototype.mapWindowToStage=function(t,e,n){void 0===n&&(n={x:0,y:0});var i=this.container,r=i.parentElement?i.getBoundingClientRect():{x:0,y:0,width:0,height:0};return n.x=(t-r.x)*i.width/(r.width*this.pixelRatio),n.y=(e-r.y)*i.height/(r.height*this.pixelRatio),n},e.prototype.freeContext=function(){this._context&&(this._context.dispose(),this.dispatchEvent(new ce(ce.CONTEXT_DISPOSED,this))),this._context=null,this._initialised=!1},e.prototype.onContextLost=function(t){},e.prototype.onContextRestored=function(t){},e.prototype.recoverFromDisposal=function(){return!!this._context},e.prototype._callback=function(t){var e=t._gl;he.MAX_SIZE=e.getParameter(e.MAX_TEXTURE_SIZE),this._context=t,this._container=this._context.container,this._width&&this._height&&this._context.configureBackBuffer(this._width,this._height,this._antiAlias,this._activeTargetConf.depthStencil),this.dispatchEvent(new ce(this._initialised?ce.CONTEXT_RECREATED:ce.CONTEXT_CREATED,this)),this._initialised=!0},e.prototype.setVertexBuffer=function(t,e,n,i,r,o){void 0===o&&(o=!1),this._context.setVertexBufferAt(t,e,r,Di[o?n+4:n][i-1])},e.prototype.setScissor=function(t){this._backBufferDirty&&null==this._activeTargetConf.target&&(this._backBufferDirty=!1,this.configureBackBuffer(this._width,this._height,this._antiAlias,this._activeTargetConf.depthStencil)),(this._lastScissorBox||t)&&(t&&this._lastScissorBox&&this._lastScissorBox.equals(t)||(t?(this._lastScissorBox||(this._lastScissorBox=new W),this._lastScissorBox.copyFrom(t)):this._lastScissorBox=null,this._context.setScissorRectangle(t)))},e.prototype.setSamplerAt=function(t,e){var n=e.repeat?zt.REPEAT:zt.CLAMP,i=e.smooth&&!this.globalDisableSmooth?Vt.LINEAR:Vt.NEAREST,r=e.mipmap&&!this.globalDisableMipmap?Nt.MIPLINEAR:Nt.MIPNONE;this._context.setSamplerStateAt(t,n,i,r)},e._abstractionClassPool={},e}(p),Bi=function(t){function e(){var n=t.call(this)||this;return n._stages=new Array(e.STAGE_MAX_QUANTITY),n._onContextCreatedDelegate=function(t){return n.onContextCreated(t)},n}return o(e,t),e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.getStageAt=function(t,n,i,r,o){if(void 0===n&&(n=!1),void 0===i&&(i=Ft.BASELINE),void 0===r&&(r=Ht.AUTO),void 0===o&&(o=!1),t<0||t>=e.STAGE_MAX_QUANTITY)throw new B("Index is out of bounds [0.."+e.STAGE_MAX_QUANTITY+"]");if(!this._stages[t]){if(e._numStages++,document&&null==e.htmlCanvas)(a=document.createElement("canvas")).id="stage"+t,document.body.appendChild(a);else if(e.htmlCanvas)var a=e.htmlCanvas;var s=this._stages[t]=new Pi(a,t,this,n,i);s.addEventListener(ce.CONTEXT_CREATED,this._onContextCreatedDelegate),s.requestContext(n,i,r,o)}return this._stages[t]},e.prototype.iRemoveStage=function(t){e._numStages--,t.removeEventListener(ce.CONTEXT_CREATED,this._onContextCreatedDelegate),this._stages[t.stageIndex]=null},e.prototype.getFreeStage=function(t,e,n,i){void 0===t&&(t=!1),void 0===e&&(e=Ft.BASELINE),void 0===n&&(n=Ht.AUTO),void 0===i&&(i=!1);for(var r=0,o=this._stages.length;r<o;){if(!this._stages[r])return this.getStageAt(r,t,e,n,i);++r}return null},Object.defineProperty(e.prototype,"hasFreeStage",{get:function(){return e._numStages<e.STAGE_MAX_QUANTITY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numSlotsFree",{get:function(){return e.STAGE_MAX_QUANTITY-e._numStages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numSlotsUsed",{get:function(){return e._numStages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numSlotsTotal",{get:function(){return this._stages.length},enumerable:!1,configurable:!0}),e.prototype.onContextCreated=function(t){},e.STAGE_MAX_QUANTITY=8,e.htmlCanvas=null,e._numStages=0,e}(p),Oi=function(){function t(){}return t.prototype.createImage2D=function(t,e,n,i,r){return void 0===n&&(n=!0),void 0===i&&(i=null),void 0===r&&(r=!0),new Le(t,e,n,i,r)},t.prototype.createImageCube=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=null),new Ue(t,e,n)},t}();var Mi,Li=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=t.call(this,ot.BLOB)||this;return i._factory=e||new Oi,i._alphaChannel=n,i}return o(e,t),e.supportsType=function(t){return t=t.toLowerCase().trim(),this.SUPPORTED_TYPES.includes(t)},e.supportsData=function(t){if(t instanceof HTMLImageElement)return!0;if(!(t instanceof x))return!1;var e=t;return e.position=0,55551==e.readUnsignedShort()||(e.position=0,16973==e.readShort()||(e.position=1,"PNG"==e.readUTFBytes(3)||(e.position=0,"GIF"==e.readUTFBytes(3)&&14393==e.readShort()&&97==e.readByte()||(e.position=0,"ATF"==e.readUTFBytes(3)))))},e.prototype.finalizeAsset=function(e,n){this._alphaChannel&&(e.alphaChannel=this._alphaChannel),t.prototype.finalizeAsset.call(this,e,n)},e.prototype.proceedParsing=function(){var t,e=this;if(this.data instanceof HTMLImageElement)this._finalizeAssetFromImage(this.data);else if(this.data instanceof ft)t=new je(this.data),this.finalizeAsset(t,this.fileName),this._content=t;else{var n=void 0;if(this.data instanceof x)this.data.position=0,n=new Blob([this.data.arraybytes]);else if(this.data instanceof ArrayBuffer)n=new Blob([this.data]);else{if(!(this.data instanceof Blob))throw"Unknow data";n=this.data}var i=function(t,e){if(oe.ENABLE_PARSER_NATIVE_BITMAP&&"createImageBitmap"in self)return self.createImageBitmap(t).then(e),null;var n=URL.createObjectURL(t),i=new Image;return i.src=n,i.naturalWidth?i:(i.onload=function(t){e(i),URL.revokeObjectURL(n)},null)}(n,(function(t){e._finalizeAssetFromImage(t),e.finishParsing()}));i&&this._finalizeAssetFromImage(i)}this._content&&this.finishParsing()},e.prototype._finalizeAssetFromImage=function(t){var e=he.imageToBitmapImage2D(t,this._factory,!1);this.finalizeAsset(e,this.fileName),this._content=e},e.SUPPORTED_TYPES=["jpg","jpeg","png","gif"],e}(yt),Ri=function(t){function e(){return t.call(this,ot.TEXT)||this}return o(e,t),e.supportsType=function(t){return"cube"==(t=t.toLowerCase())},e.supportsData=function(t){try{return!!JSON.parse(t)}catch(t){return!1}},e.prototype.resolveDependency=function(t){},e.prototype.resolveDependencyFailure=function(t){},e.prototype.proceedParsing=function(){if(null!=this._imgDependencyDictionary){var t=new Ue(this._getBitmapImage2D(e.posX).width),n=new W(0,0,t.size,t.size);return t.setPixels(Ue.posX,n,this._getBitmapImage2D(e.posX).data),t.setPixels(Ue.negX,n,this._getBitmapImage2D(e.negX).data),t.setPixels(Ue.posY,n,this._getBitmapImage2D(e.posY).data),t.setPixels(Ue.negY,n,this._getBitmapImage2D(e.negY).data),t.setPixels(Ue.posZ,n,this._getBitmapImage2D(e.posZ).data),t.setPixels(Ue.negZ,n,this._getBitmapImage2D(e.negZ).data),this._imgDependencyDictionary=null,t.name=this.fileName,this.finalizeAsset(t,this.fileName),this.finishParsing()}try{var i=JSON.parse(this.data);if(!i||!i.data||6!=i.data.length)return this.dieWithError("ImageCubeParser: Error - cube texture should have exactly 6 images");var r=void 0,o=i.data;this._imgDependencyDictionary=new Object;for(var a=0;a<o.length;a++)r=o[a],this._imgDependencyDictionary[r.id]=this.addDependency(r.id,new ft(r.image.toString()));if(!this._validateCubeData())return this.dieWithError("ImageCubeParser: JSON data error - cubes require id of:   \n"+e.posX+", "+e.negX+",  \n"+e.posY+", "+e.negY+",  \n"+e.posZ+", "+e.negZ);this.pauseAndRetrieveDependencies()}catch(t){this.dieWithError("CubeTexturePaser Error parsing JSON")}},e.prototype._validateCubeData=function(){return null!=this._imgDependencyDictionary[e.posX]&&null!=this._imgDependencyDictionary[e.negX]&&null!=this._imgDependencyDictionary[e.posY]&&null!=this._imgDependencyDictionary[e.negY]&&null!=this._imgDependencyDictionary[e.posZ]&&null!=this._imgDependencyDictionary[e.negZ]},e.prototype._getBitmapImage2D=function(t){var e=this._imgDependencyDictionary[t];return e?e.assets[0]:null},e.posX="posX",e.negX="negX",e.posY="posY",e.negY="negY",e.posZ="posZ",e.negZ="negZ",e}(yt),Ni=function(t){function e(){var e=t.call(this,ot.TEXT)||this;return e._parseState=Mi.PARSE_XML,e}return o(e,t),e.supportsType=function(t){return"xml"==(t=t.toLowerCase())},e.supportsData=function(t){try{var e=C.toString(t);return-1!=e.indexOf("TextureAtlas")||-1!=e.indexOf("textureatlas")}catch(t){return!1}},e.prototype.resolveDependency=function(t){t.assets.length?(this._imageData=t.assets[0],this.finalizeAsset(this._imageData),this._parseState=Mi.PARSE_SUBTEXTURES):this._parseState=Mi.PARSE_COMPLETE},e.prototype.resolveDependencyFailure=function(t){this._parseState=Mi.PARSE_COMPLETE},e.prototype.proceedParsing=function(){switch(this._parseState){case Mi.PARSE_XML:try{this._doc=wt.getChildrenWithTag(wt.strToXml(this.getTextData()),"TextureAtlas")[0],this._imagePath=wt.readAttributeValue(this._doc,"imagePath"),this._subTextureNodes=wt.getChildrenWithTag(this._doc,"SubTexture"),this._parseState=Mi.PARSE_IMAGE,this.hasTime()&&this.proceedParsing()}catch(t){this.dieWithError("TextureAtlasParser Error parsing XML")}break;case Mi.PARSE_IMAGE:this._imagePath?(this.addDependency(this._imagePath,new ft(this._imagePath)),this.pauseAndRetrieveDependencies()):this.dieWithError("TextureAtlasParser Missing imagePath attribute in XML");break;case Mi.PARSE_SUBTEXTURES:for(var t,e,n,i,r,o,a=this._subTextureNodes.length,s=0;s<a;s++)e=this._subTextureNodes[s],t=new Qe,n=wt.readAttributeValue(e,"x"),i=wt.readAttributeValue(e,"y"),r=wt.readAttributeValue(e,"width"),o=wt.readAttributeValue(e,"height"),(n||i||r||o)&&(t.imageRect=new W(parseInt(n)/this._imageData.width,parseInt(i)/this._imageData.height,parseInt(r)/this._imageData.width,parseInt(o)/this._imageData.height)),n=wt.readAttributeValue(e,"frameX"),i=wt.readAttributeValue(e,"frameY"),r=wt.readAttributeValue(e,"frameWidth"),o=wt.readAttributeValue(e,"frameHeight"),(n||i||r||o)&&(t.frameRect=new W(parseInt(n),parseInt(i),parseInt(r),parseInt(o))),this.finalizeAsset(t,wt.readAttributeValue(e,"name"));this._parseState=Mi.PARSE_COMPLETE;break;case Mi.PARSE_COMPLETE:return this.finishParsing()}},e}(yt);!function(t){t[t.PARSE_XML=0]="PARSE_XML",t[t.PARSE_IMAGE=1]="PARSE_IMAGE",t[t.PARSE_SUBTEXTURES=2]="PARSE_SUBTEXTURES",t[t.PARSE_COMPLETE=3]="PARSE_COMPLETE"}(Mi||(Mi={}));var Fi=function(){return function(){this.textures=new Array,this.animatableAttributes=new Array,this.animationTargetRegisters=new Array}}(),ki=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=t.call(this)||this;return i._count=0,i._newCount=0,i._stride=0,i._newStride=0,i._viewVOs=new Array,i._stride=i._newStride=e,i._count=i._newCount=n,i._buffer=new ArrayBuffer(i._stride*i._count),i._bufferView=new Uint8Array(i._buffer,0,i._buffer.byteLength),i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stride",{get:function(){return this._lengthDirty&&this._updateLength(),this._stride},set:function(t){this._newStride!=t&&(this._newStride=t,this.resize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._newCount},set:function(t){this._newCount!=t&&(this._newCount=t,this.resize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._lengthDirty&&this._updateLength(),this._contentDirty=!1,this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferView",{get:function(){return this._lengthDirty&&this._updateLength(),this._contentDirty=!1,this._bufferView},set:function(t){this._bufferView=t,this._buffer=this._bufferView.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._count*this.stride},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this._contentDirty||(t.prototype.invalidate.call(this),this._contentDirty=!0)},e.prototype.resize=function(){this._lengthDirty||(this.clear(),this._lengthDirty=!0,this._newStride||(this._buffer=null,this._bufferView=null))},e.prototype.cloneBufferView=function(){var t=new e(this._stride,this._count);return t.bufferView.set(this.bufferView),t},e.prototype.clone=function(){var t=new e(this._stride,this._count);t.bufferView.set(this.bufferView);for(var n=this._viewVOs.length,i=0;i<n;i++)this._viewVOs[i].view._internalClone(t);return t},e.prototype.getView=function(t){return t<this._viewVOs.length?this._viewVOs[t].view:null},e.prototype._setAttributes=function(t,e,n){void 0===n&&(n=0);var i=e instanceof Uint8Array?e:new Uint8Array(e.buffer),r=this._viewVOs[t],o=r.length,a=r.offset,s=i.length/o;if(this.count<s+n&&(this.count=s+n),this._lengthDirty&&this._updateLength(),1==this._viewVOs.length)this._bufferView.set(i);else for(var l=0;l<s;l++)this._bufferView.set(i.subarray(l*o,(l+1)*o),(l+n)*this._stride+a);this.invalidate()},e.prototype._addView=function(t){var e=new Ui(t),n=this._viewVOs.length;e.offset=n?this._viewVOs[n-1].offset+this._viewVOs[n-1].length:0,this._viewVOs.push(e),this._newStride<e.offset+e.length&&(this._newStride=e.offset+e.length,this.resize()),t._index=n},e.prototype._removeView=function(t){var e=t._index,n=this._viewVOs.splice(e,1)[0],i=this._viewVOs.length;n.dispose();for(var r=e;r<i;r++)(n=this._viewVOs[r]).offset=r?this._viewVOs[r-1].offset+this._viewVOs[r-1].length:0,n.view._index=r;this._newStride=i?this._viewVOs[i-1].offset+this._viewVOs[i-1].length:0,this.resize()},e.prototype._getOffset=function(t){return this._viewVOs[t].offset},e.prototype._updateLength=function(){var t,e;this._lengthDirty=!1;var n=this._viewVOs.length,i=this._newStride*this._newCount;if(!this._buffer||this._buffer.byteLength!=i){var r=new ArrayBuffer(i),o=new Uint8Array(r,0,r.byteLength),a=void 0,s=void 0,l=void 0,u=void 0;if(this._buffer)if(this._stride!=this._newStride){for(t=0;t<n;t++){for(s=(a=this._viewVOs[t]).length,l=a.offset,u=a.oldOffset,e=0;e<this._count;e++)null!=u&&o.set(new Uint8Array(this._buffer,e*this._stride+u,s),e*this._newStride+l);a.oldOffset=a.offset}this._stride=this._newStride}else o.set(new Uint8Array(this._buffer,0,Math.min(i,this._buffer.byteLength)));this._buffer=r,this._bufferView=o}this._count=this._newCount},e.assetType="[assets AttributesBuffer]",e}(_),Ui=function(){function t(t){this.view=t,this.length=t.size*t.dimensions}return t.prototype.dispose=function(){this.view=null},t.prototype.clone=function(){return new t(this.view)},t}(),Vi=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._stage=n,i._attributesBuffer=e,i}return o(e,t),Object.defineProperty(e.prototype,"vertexValid",{get:function(){return!this._invalid&&this._vertexBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexValid",{get:function(){return!this._invalid&&this._indexBuffer},enumerable:!1,configurable:!0}),e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._attributesBuffer=null,this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null),this._vertexBuffer&&(this._vertexBuffer.dispose(),this._vertexBuffer=null)},e.prototype.activate=function(t,e,n,i,r){void 0===r&&(r=!1),this._stage.setVertexBuffer(t,this._getVertexBuffer(),e,n,i,r)},e.prototype.draw=function(t,e,n){this._stage.context.drawIndices(t,this._getIndexBuffer(),e,n)},e.prototype._getIndexBuffer=function(){return this._indexBuffer||(this._invalid=!0,this._indexBuffer=this._stage.context.createIndexBuffer(this._attributesBuffer.count*this._attributesBuffer.stride/2)),this._invalid&&(this._invalid=!1,this._indexBuffer.uploadFromByteArray(this._attributesBuffer.buffer,0,this._attributesBuffer.length)),this._indexBuffer},e.prototype._getVertexBuffer=function(){return this._vertexBuffer||(this._invalid=!0,this._vertexBuffer=this._stage.context.createVertexBuffer(this._attributesBuffer.count,this._attributesBuffer.stride)),this._invalid&&(this._invalid=!1,this._vertexBuffer.uploadFromByteArray(this._attributesBuffer.buffer,0,this._attributesBuffer.count)),this._vertexBuffer},e}(J);Pi.registerAbstraction(Vi,ki);var ji=function(t){function e(e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=!1);var o=t.call(this)||this;return o._arrayClass=e,o._size=e.BYTES_PER_ELEMENT,o._dimensions=n,o._attributesBuffer=i instanceof ki?i:new ki(o._dimensions*o._size,i),o._attributesBuffer._addView(o),o._unsigned=r,o}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributesBuffer",{get:function(){return this._attributesBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size!=t&&(this._size=t,this._attributesBuffer._removeView(this),this._attributesBuffer._addView(this))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return this._dimensions},set:function(t){this._dimensions!=t&&(this._dimensions=t,this._attributesBuffer._removeView(this),this._attributesBuffer._addView(this))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unsigned",{get:function(){return this._unsigned},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._attributesBuffer.count},set:function(t){this._attributesBuffer.count=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._attributesBuffer._getOffset(this._index)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._attributesBuffer.count*this._dimensions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stride",{get:function(){return this._attributesBuffer.stride/this._size},enumerable:!1,configurable:!0}),e.prototype.set=function(t,e){void 0===e&&(e=0),this._attributesBuffer._setAttributes(this._index,t instanceof Array?new this._arrayClass(t):t,e)},e.prototype.get=function(t,e){return void 0===e&&(e=0),new this._arrayClass(this._attributesBuffer.buffer,e*this._attributesBuffer.stride+this.offset,t*this.stride-this.offset/this.size)},e.prototype._internalClone=function(t){return this._cloneCache=new e(this._arrayClass,this._dimensions,t,this._unsigned)},e.prototype.clone=function(t){void 0===t&&(t=null),t&&this._internalClone(t),this._cloneCache||this._attributesBuffer.clone();var e=this._cloneCache;return this._cloneCache=null,e},e.prototype.invalidate=function(){t.prototype.invalidate.call(this),this._attributesBuffer.invalidate()},e.prototype.dispose=function(){this._attributesBuffer&&(this._attributesBuffer._removeView(this),this._attributesBuffer=null)},e.assetType="[attributes AttributesView]",e}(_),Gi=function(t){function e(e,n){return void 0===n&&(n=!0),t.call(this,n?Uint8Array:Int8Array,4,e,n)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.set=function(e,n){void 0===n&&(n=0),t.prototype.set.call(this,e,n)},e.prototype.get=function(e,n){return void 0===n&&(n=0),t.prototype.get.call(this,e,n)},e.prototype._internalClone=function(t){return this._cloneCache=new e(t,this._arrayClass==Uint8Array)},e.prototype.clone=function(e){return void 0===e&&(e=null),t.prototype.clone.call(this,e)},e.assetType="[attributes Byte4Attributes]",e}(ji),Qi=function(t){function e(e){return t.call(this,Float32Array,1,e)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.set=function(e,n){void 0===n&&(n=0),t.prototype.set.call(this,e,n)},e.prototype.get=function(e,n){return void 0===n&&(n=0),t.prototype.get.call(this,e,n)},e.prototype._internalClone=function(t){return this._cloneCache=new e(t)},e.prototype.clone=function(e){return void 0===e&&(e=null),t.prototype.clone.call(this,e)},e.assetType="[attributes Float1Attributes]",e}(ji),zi=function(t){function e(e){return t.call(this,Float32Array,2,e)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.set=function(e,n){void 0===n&&(n=0),t.prototype.set.call(this,e,n)},e.prototype.get=function(e,n){return void 0===n&&(n=0),t.prototype.get.call(this,e,n)},e.prototype._internalClone=function(t){return this._cloneCache=new e(t)},e.prototype.clone=function(e){return void 0===e&&(e=null),t.prototype.clone.call(this,e)},e.assetType="[attributes Float2Attributes]",e}(ji),Hi=function(t){function e(e){return t.call(this,Float32Array,3,e)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.set=function(e,n){void 0===n&&(n=0),t.prototype.set.call(this,e,n)},e.prototype.get=function(e,n){return void 0===n&&(n=0),t.prototype.get.call(this,e,n)},e.prototype._internalClone=function(t){return this._cloneCache=new e(t)},e.prototype.clone=function(e){return void 0===e&&(e=null),t.prototype.clone.call(this,e)},e.assetType="[attributes Float3Attributes]",e}(ji),Xi=function(t){function e(e){return t.call(this,Float32Array,4,e)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.set=function(e,n){void 0===n&&(n=0),t.prototype.set.call(this,e,n)},e.prototype.get=function(e,n){return void 0===n&&(n=0),t.prototype.get.call(this,e,n)},e.prototype._internalClone=function(t){return this._cloneCache=new e(t)},e.prototype.clone=function(e){return void 0===e&&(e=null),t.prototype.clone.call(this,e)},e.assetType="[attributes Float4Attributes]",e}(ji),Yi=function(t){function e(e,n){return void 0===n&&(n=!0),t.call(this,n?Uint16Array:Int16Array,3,e,n)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.set=function(e,n){void 0===n&&(n=0),t.prototype.set.call(this,e,n)},e.prototype.get=function(e,n){return void 0===n&&(n=0),t.prototype.get.call(this,e,n)},e.prototype._internalClone=function(t){return this._cloneCache=new e(t,this._arrayClass==Uint16Array)},e.prototype.clone=function(e){return void 0===e&&(e=null),t.prototype.clone.call(this,e)},e.assetType="[attributes Short3Attributes]",e}(ji),qi={get PREF_VERSION(){return oe.PREF_WEBGL_VERSION},set PREF_VERSION(t){oe.PREF_WEBGL_VERSION=2!==t?1:2},get PREF_MULTISAMPLE(){return oe.ENABLE_MULTISAMPLE_TEXTURE},set PREF_MULTISAMPLE(t){oe.ENABLE_MULTISAMPLE_TEXTURE=!!t},PREF_MIPMAP:1,PREF_REPEAT_WRAP:1};console.debug("AwayJS - Stage - 0.11.145"),ht.enableParser(Li),ht.enableParser(Ri),ht.enableParser(Ni),he.registerDefaults((function(){var t,e,n=new Le(8,8,!1,0);for(t=0;t<8;t++)for(e=0;e<8;e++)1&e^1&t&&n.setPixel(t,e,16777215);return n}),(function(){for(var t=he.getDefaultImage2D(),e=new Ue(t.width),n=0;n<6;n++)e.drawBitmap(n,t.data,0,0,t.width,t.height);return e}),(function(){return new Qe}),(function(){return new Oi})),Pi.registerAbstraction(_e,fe),Pi.registerAbstraction(ke,Fe),Pi.registerAbstraction(Re,Le),Pi.registerAbstraction(Ve,Ue),Pi.registerAbstraction(Ge,je),Pi.registerAbstraction(Re,Ne),Pi.registerAbstraction(ii,ni);var Ki,Wi=function(){return function(t,e){this.normal=new L,this.rayPosition=new L,this.rayDirection=new L,this.containerNode=t,this.pickGroup=e}}();!function(t){t[t.SPHERE=0]="SPHERE",t[t.SPHERE_FAST=1]="SPHERE_FAST",t[t.SPHERE_BOUNDS=2]="SPHERE_BOUNDS",t[t.SPHERE_BOUNDS_FAST=3]="SPHERE_BOUNDS_FAST",t[t.BOX=4]="BOX",t[t.BOX_FAST=5]="BOX_FAST",t[t.BOX_BOUNDS=6]="BOX_BOUNDS",t[t.BOX_BOUNDS_FAST=7]="BOX_BOUNDS_FAST",t[t.NULL=8]="NULL"}(Ki||(Ki={}));var Ji,Zi,$i,tr,er,nr,ir=function(t){function e(e,n){var i=t.call(this,e)||this;return i._boundsPicker=n,i}return o(e,t),Object.defineProperty(e.prototype,"boundsPicker",{get:function(){return this._boundsPicker},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._boundsPicker)},e.INVALIDATE_BOUNDS="invalidateBounds",e}(c),rr=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.clone=function(){return new e(this.type)},e.INVALIDATE_MATRIX3D="invalidateMatrix3D",e.INVALIDATE_COLOR_TRANSFORM="invalidateColorTransform",e}(c),or=function(t){function e(e,n){var i=t.call(this,e,n)||this;if(i._targetCoordinateSpace=e,i._picker=n.picker,i._strokeFlag=n.strokeFlag,i._fastFlag=n.fastFlag,i._onInvalidateBoundsDelegate=function(t){return i._onInvalidateBounds(t)},i._onInvalidateMatrix3DDelegate=function(t){return i._onInvalidateMatrix3D(t)},i._picker.addEventListener(ir.INVALIDATE_BOUNDS,i._onInvalidateBoundsDelegate),i._picker.addBoundingVolume(i),i._targetCoordinateSpace!=i._picker.node){for(var r=i._picker.node;r&&r!=i._targetCoordinateSpace;)r.container.transform.addEventListener(P.INVALIDATE_MATRIX3D,i._onInvalidateMatrix3DDelegate),r=r.parent;r||i._targetCoordinateSpace.addEventListener(rr.INVALIDATE_MATRIX3D,i._onInvalidateMatrix3DDelegate)}return i}return o(e,t),e.prototype._onInvalidateBounds=function(t){this._invalid=!0},e.prototype._onInvalidateMatrix3D=function(t){this._invalid=!0},e.prototype.onClear=function(e){if(t.prototype.onClear.call(this,e),this._picker.removeBoundingVolume(this),this._picker.removeEventListener(ir.INVALIDATE_BOUNDS,this._onInvalidateBoundsDelegate),this._targetCoordinateSpace!=this._picker.node){for(var n=this._picker.node;n&&n!=this._targetCoordinateSpace;)n.container.transform.removeEventListener(P.INVALIDATE_MATRIX3D,this._onInvalidateMatrix3DDelegate),n=n.parent;n||this._targetCoordinateSpace.removeEventListener(rr.INVALIDATE_MATRIX3D,this._onInvalidateMatrix3DDelegate)}this._targetCoordinateSpace=null,this._picker=null},e.prototype.nullify=function(){throw new u},e.prototype.isInFrustum=function(t,e){throw new u},e.prototype.clone=function(){throw new u},e.prototype.rayIntersection=function(t,e,n){return-1},e.prototype.classifyToPlane=function(t){throw new u},e.prototype._update=function(){this._invalid=!1},e}(J),ar=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._x=0,e._y=0,e._z=0,e._width=0,e._height=0,e._depth=0,e._centerX=0,e._centerY=0,e._centerZ=0,e._halfExtentsX=0,e._halfExtentsY=0,e._halfExtentsZ=0,e}return o(e,t),e.prototype.nullify=function(){this._x=this._y=this._z=0,this._width=this._height=this._depth=0,this._centerX=this._centerY=this._centerZ=0,this._halfExtentsX=this._halfExtentsY=this._halfExtentsZ=0},e.prototype.isInFrustum=function(t,e){if(this._invalid&&this._update(),null!=this._box){for(var n=0;n<e;++n){var i=t[n],r=i.a,o=i.b,a=i.c,s=r<0?-this._halfExtentsX:this._halfExtentsX,l=o<0?-this._halfExtentsY:this._halfExtentsY,u=a<0?-this._halfExtentsZ:this._halfExtentsZ;if(r*(this._centerX+s)+o*(this._centerY+l)+a*(this._centerZ+u)-i.d<0)return!1}return!0}},e.prototype.rayIntersection=function(t,e,n){return this._invalid&&this._update(),null==this._box?-1:this._box.rayIntersection(t,e,n)},e.prototype.getBox=function(){return this._invalid&&this._update(),this._box},e.prototype.classifyToPlane=function(t){var e=t.a,n=t.b,i=t.c,r=e*this._centerX+n*this._centerY+i*this._centerZ-t.d;e<0&&(e=-e),n<0&&(n=-n),i<0&&(i=-i);var o=e*this._halfExtentsX+n*this._halfExtentsY+i*this._halfExtentsZ;return r>o?Y.FRONT:r<-o?Y.BACK:Y.INTERSECT},e.prototype._update=function(){var e;t.prototype._update.call(this),this._targetCoordinateSpace!=this._picker.node&&(this._targetCoordinateSpace==this._picker.node.parent?e=this._picker.node.container.transform.matrix3D:(e=this._picker.node.getMatrix3D().clone()).append(this._targetCoordinateSpace.getInverseMatrix3D())),this._box=this._picker._getBoxBoundsInternal(e,this._strokeFlag,this._fastFlag,this._box),null!=this._box&&(this._halfExtentsX=this._box.width/2,this._halfExtentsY=this._box.height/2,this._halfExtentsZ=this._box.depth/2,this._centerX=this._box.x+this._halfExtentsX,this._centerY=this._box.y+this._halfExtentsY,this._centerZ=this._box.z+this._halfExtentsZ)},e}(or),sr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radius=0,e._centerX=0,e._centerY=0,e._centerZ=0,e}return o(e,t),e.prototype.nullify=function(){this._centerX=this._centerY=this._centerZ=0,this._radius=0},e.prototype.isInFrustum=function(t,e){this._invalid&&this._update();for(var n=0;n<e;++n){var i=t[n],r=i.a<0?-this._radius:this._radius,o=i.b<0?-this._radius:this._radius,a=i.c<0?-this._radius:this._radius;if(i.a*(this._centerX+r)+i.b*(this._centerY+o)+i.c*(this._centerZ+a)-i.d<0)return!1}return!0},e.prototype.rayIntersection=function(t,e,n){return this._invalid&&this._update(),this._sphere.rayIntersection(t,e,n)},e.prototype.getSphere=function(){return this._invalid&&this._update(),this._sphere},e.prototype.classifyToPlane=function(t){var e=t.a,n=t.b,i=t.c,r=e*this._centerX+n*this._centerY+i*this._centerZ-t.d;e<0&&(e=-e),n<0&&(n=-n),i<0&&(i=-i);var o=(e+n+i)*this._radius;return r>o?Y.FRONT:r<-o?Y.BACK:Y.INTERSECT},e.prototype._update=function(){var e;t.prototype._update.call(this),this._targetCoordinateSpace&&(this._targetCoordinateSpace==this._picker.node?e=this._picker.node.container.transform.matrix3D:(e=this._picker.node.getMatrix3D().clone(),this._targetCoordinateSpace.parent&&e.append(this._targetCoordinateSpace.parent.getInverseMatrix3D()))),this._sphere=this._picker._getSphereBoundsInternal(null,e,this._strokeFlag,this._fastFlag,this._sphere);var n=this._picker.node.getMatrix3D(),i=this._sphere.x,r=this._sphere.y,o=this._sphere.z,a=this._sphere.radius,s=n._rawData,l=s[0],u=s[4],c=s[8],h=s[12],p=s[1],d=s[5],f=s[9],_=s[13],g=s[2],m=s[6],y=s[10],A=s[14];this._centerX=i*l+r*u+o*c+h,this._centerY=i*p+r*d+o*f+_,this._centerZ=i*g+r*m+o*y+A;var v=l+u+c,b=p+d+f,x=g+m+y;this._radius=a*Math.sqrt((v*v+b*b+x*x)/3)},e}(or),lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.isInFrustum=function(t,e){return!0},e.prototype.classifyToPlane=function(t){return Y.INTERSECT},e}(or),ur=function(){function t(e,n){this.id=f.Next(),this._picker=e,this._strokeFlag=t._strokeDict[n],this._fastFlag=t._fastDict[n],this._boundingVolumeClass=t._boundsDict[n]}return Object.defineProperty(t.prototype,"picker",{get:function(){return this._picker},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeFlag",{get:function(){return this._strokeFlag},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fastFlag",{get:function(){return this._fastFlag},enumerable:!1,configurable:!0}),t.prototype.requestAbstraction=function(t){return this._boundingVolumeClass},t.prototype.dispose=function(){},t._strokeDict=((Ji={})[Ki.BOX]=!1,Ji[Ki.BOX_FAST]=!1,Ji[Ki.BOX_BOUNDS]=!0,Ji[Ki.BOX_BOUNDS_FAST]=!0,Ji[Ki.SPHERE]=!1,Ji[Ki.SPHERE_FAST]=!1,Ji[Ki.SPHERE_BOUNDS]=!0,Ji[Ki.SPHERE_BOUNDS_FAST]=!0,Ji[Ki.NULL]=!1,Ji),t._fastDict=((Zi={})[Ki.BOX]=!1,Zi[Ki.BOX_FAST]=!0,Zi[Ki.BOX_BOUNDS]=!1,Zi[Ki.BOX_BOUNDS_FAST]=!0,Zi[Ki.SPHERE]=!1,Zi[Ki.SPHERE_FAST]=!0,Zi[Ki.SPHERE_BOUNDS]=!1,Zi[Ki.SPHERE_BOUNDS_FAST]=!0,Zi[Ki.NULL]=!1,Zi),t._boundsDict=(($i={})[Ki.BOX]=ar,$i[Ki.BOX_FAST]=ar,$i[Ki.BOX_BOUNDS]=ar,$i[Ki.BOX_BOUNDS_FAST]=ar,$i[Ki.SPHERE]=sr,$i[Ki.SPHERE_FAST]=sr,$i[Ki.SPHERE_BOUNDS]=sr,$i[Ki.SPHERE_BOUNDS_FAST]=sr,$i[Ki.NULL]=lr,$i),t}(),cr=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._boundingVolumePools={},i._orientedBoxBounds=[],i._orientedBoxBoundsDirty=[!0,!0],i._orientedSphereBounds=[],i._orientedSphereBoundsDirty=[!0,!0],i._activePickables=[],i._boundingVolumes=[],i._pickables=[],i.shapeFlag=!1,i.id=f.Next(),i._node=e.parent,i._view=i._node.view,i._pickGroup=n,i._pickingCollision=new Wi(i._node,n),i}return o(e,t),Object.defineProperty(e.prototype,"pickingCollision",{get:function(){return this._pickingCollision},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickGroup",{get:function(){return this._pickGroup},enumerable:!1,configurable:!0}),e.prototype.getBoundingVolume=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),null==t&&(t=this._node),null==e&&(e=this._node.container.defaultBoundingVolume);var n=this._boundingVolumePools[e]||(this._boundingVolumePools[e]=new ur(this,e));return t.getAbstraction(n)},e.prototype.hitTestPoint=function(t,e,n){return void 0===n&&(n=!1),this._hitTestPointInternal(this._node,t,e,n,!1)},e.prototype._hitTestPointInternal=function(t,e,n,i,r){if(void 0===i&&(i=!1),void 0===r&&(r=!1),!(-1==this._node.getMaskId()||r&&i))return!1;this._invalid&&this._update();var o=new O(e,n);this._node.globalToLocal(o,o);var a=this._getBoxBoundsInternal(null,!1,!0);if(null==a||!a.contains(o.x,o.y,0))return!1;if(!i||"[asset TextField]"==this._node.container.assetType||"[asset Billboard]"==this._node.container.assetType)return!0;for(var s=!1,l=this._activePickables.length-1;l>=0;l--)if(this._activePickables[l].hitTestPoint(o.x,o.y,0)){s=!0;break}if(!s)return!1;var u=this._node.getMaskOwners();if(u){var c=u.length,h=void 0,p=void 0,d=void 0,f=void 0;for(l=0;l<c;l++)if((h=u[l]).isDescendant(t)){d=(p=h.getMasks()).length,f=!1;for(var _=0;_<d;_++)if((h=p[_]).isDescendant(t)&&h&&this._pickGroup.getBoundsPicker(h.partition)._hitTestPointInternal(t,e,n,i,!0)){f=!0;break}if(!f)return!1}}return!0},e.prototype.isInFrustum=function(t,e){return this._isInFrustumInternal(this._node,t,e)},e.prototype._isInFrustumInternal=function(t,e,n){return this.getBoundingVolume(t).isInFrustum(e,n)},e.prototype.isIntersectingRay=function(t,e){return this._isIntersectingRayInternal(this._node,t,e)},e.prototype._isIntersectingRayInternal=function(t,e,n){var i=this._node.getInverseMatrix3D();i.transformVector(e,this._pickingCollision.rayPosition),i.deltaTransformVector(n,this._pickingCollision.rayDirection);var r=this.getBoundingVolume().rayIntersection(this._pickingCollision.rayPosition,this._pickingCollision.rayDirection,this._pickingCollision.normal);return!(r<0||!this._isIntersectingMasks(t,e,n))&&(this._pickingCollision.rayEntryDistance=r,this._pickingCollision.globalRayPosition=e,this._pickingCollision.globalRayDirection=n,this._pickingCollision.rayOriginIsInsideBounds=0==r,!0)},e.prototype.isIntersectingShape=function(t){for(var e=!1,n=this._activePickables.length-1;n>=0;n--)if(this._activePickables[n].testCollision(this._pickingCollision,t)){if(!t)return!0;e=!0}return e},e.prototype._getBoxBoundsInternal=function(t,e,n,i,r){void 0===t&&(t=null),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=null),void 0===r&&(r=null),this._node.getMatrix3D(),this._invalid&&this._update();var o=this._activePickables.length;if(o)if(n){var a=void 0,s=e?1:0;if(this._orientedBoxBoundsDirty[s]){this._orientedBoxBoundsDirty[s]=!1;for(var l=0;l<o;l++)a=this._activePickables[l].getBoxBounds(null,e,this._orientedBoxBounds[s],a);this._orientedBoxBounds[s]=a}else a=this._orientedBoxBounds[s];null!=a&&(r=t?t.transformBox(a).union(r,r||i):a.union(r,r||i))}else for(l=0;l<o;l++)r=this._activePickables[l].getBoxBounds(t,e,i,r);return r},e.prototype._getSphereBoundsInternal=function(t,e,n,i,r,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===r&&(r=null),void 0===o&&(o=null),this._invalid&&this._update();var a=this._getBoxBoundsInternal(e,n);if(null!=a){t||((t=new L).x=a.x+a.width/2,t.y=a.y+a.height/2,t.z=a.z+a.depth/2);var s=this._activePickables.length;if(s)if(i){var l=void 0,u=n?1:0;if(this._orientedSphereBoundsDirty[u]){this._orientedSphereBoundsDirty[u]=!1;for(var c=0;c<s;c++)l=this._activePickables[c].getSphereBounds(t,null,n,this._orientedSphereBounds[u],l);this._orientedSphereBounds[u]=l}else l=this._orientedSphereBounds[u];null!=l&&(o=e?e.transformSphere(l).union(o,o||r):l.union(o,o||r))}else for(c=0;c<s;c++)o=this._activePickables[c].getSphereBounds(t,e,n,r,o);return o}},e.prototype.applyTraversable=function(t){this._activePickables.push(t.getAbstraction(this))},e.prototype.addBoundingVolume=function(t){this._boundingVolumes.push(t)},e.prototype.removeBoundingVolume=function(t){this._boundingVolumes.splice(this._boundingVolumes.indexOf(t),1)},e.prototype.addPickable=function(t){this._pickables.push(t)},e.prototype.removePickable=function(t){this._pickables.splice(this._pickables.indexOf(t),1)},e.prototype.onInvalidate=function(e){t.prototype.onInvalidate.call(this,e),this._activePickables=[],this._orientedBoxBoundsDirty[0]=!0,this._orientedBoxBoundsDirty[1]=!0,this._orientedSphereBoundsDirty[0]=!0,this._orientedSphereBoundsDirty[1]=!0,this.dispatchEvent(new ir(ir.INVALIDATE_BOUNDS,this))},e.prototype.onClear=function(e){for(var n in t.prototype.onClear.call(this,e),this._boundingVolumePools)this._boundingVolumePools[n].dispose(),delete this._boundingVolumePools[n];for(var i=this._boundingVolumes.length-1;i>=0;i--)this._boundingVolumes[i].onClear(e);for(i=this._pickables.length-1;i>=0;i--)this._pickables[i].onClear(e)},e.prototype.requestAbstraction=function(t){return e._pickPickableClassPool[t.assetType]},e.registerPickable=function(t,n){e._pickPickableClassPool[n.assetType]=t},e.prototype._update=function(){this._invalid=!1,this._asset.entity._acceptTraverser(this)},e.prototype._isIntersectingMasks=function(t,e,n){var i=this._node.getMaskOwners();if(i)for(var r=i.length,o=void 0,a=void 0,s=void 0,l=void 0,u=0;u<r;u++)if((o=i[u]).isDescendant(t)){s=(a=o.getMasks()).length,l=!1;for(var c=0;c<s;c++)if((o=a[c]).isDescendant(t)&&o&&this._pickGroup.getRaycastPicker(o.partition)._getCollisionInternal(e,n,!0,!0,null)){l=!0;break}if(!l)return!1}return!0},e._pickPickableClassPool=new Object,e}(J),hr=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._node=n.node,i._view=n.view,i._pickGroup=n.pickGroup,n.addPickable(i),i}return o(e,t),e.prototype.onClear=function(e){this._pool.removePickable(this),t.prototype.onClear.call(this,e),this._view=null},e.prototype.hitTestPoint=function(t,e,n){throw new u},e.prototype.getBoxBounds=function(t,e,n,i){return void 0===i&&(i=null),i},e.prototype.getSphereBounds=function(t,e,n,i,r){return void 0===r&&(r=null),r},e.prototype.testCollision=function(t,e){throw new u},e}(J);!function(t){t[t.MOUSE_ENABLED=1]="MOUSE_ENABLED",t[t.VISIBLE=2]="VISIBLE",t[t.MASK_ID=4]="MASK_ID",t[t.MASKS=8]="MASKS",t[t.COLOR_TRANSFORM=16]="COLOR_TRANSFORM",t[t.SCENE_TRANSFORM=32]="SCENE_TRANSFORM",t[t.SCALE9=64]="SCALE9",t[t.ALL=127]="ALL"}(tr||(tr={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.CAMERA_PLANE=1]="CAMERA_PLANE",t[t.CAMERA_POSITION=2]="CAMERA_POSITION"}(er||(er={})),function(t){t[t.REGISTRATION_POINT=0]="REGISTRATION_POINT",t[t.TRANSFORM_POINT=1]="TRANSFORM_POINT"}(nr||(nr={}));var pr=function(t){function e(e,n){var i=t.call(this,e)||this;return i._view=n,i}return o(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.INVALIDATE_VIEW_MATRIX3D="invalidateViewMatrix3D",e.INVALIDATE_SIZE="invalidateSize",e}(c),dr=function(t){function e(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var r=t.call(this,e)||this;return r.container=n,r.index=i,r}return o(e,t),e.prototype.clone=function(){return new e(this.type,this.container,this.index)},e.ADD_CHILD_AT="addChildAt",e.REMOVE_CHILD_AT="removeChildAt",e}(c),fr=function(t){function e(e,n){var i=t.call(this,e)||this;return i.property=n,i}return o(e,t),e.prototype.clone=function(){return new e(this.type,this.property)},e.INVALIDATE_PROPERTY="invalidateProperty",e}(c),_r=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._entityDirty=!0,i._renderToImage=!1,i._position=new L,i._matrix3D=new U,i._inverseMatrix3DDirty=!0,i._orientationMatrix=new U,i._colorTransformDisabled=!1,i._transformDisabled=!1,i._maskId=-1,i._masks=[],i._childNodes=new Array,i._numChildNodes=0,i._hierarchicalPropsDirty=tr.ALL,i._onEvent=i._onEvent.bind(i),i.container=e,i.container.addEventListener(fr.INVALIDATE_PROPERTY,i._onEvent),i.container.addEventListener(dr.ADD_CHILD_AT,i._onEvent),i.container.addEventListener(dr.REMOVE_CHILD_AT,i._onEvent),e._initNode(i),i._hierarchicalPropsDirty=tr.ALL,i._activeTransform=i.container.transform,i}return o(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"partition",{get:function(){var t,e;if(!this._partition||this._partitionClass!==this.container.partitionClass){if(this._partitionClass=this.container.partitionClass,this.parent===this)throw"Self REF!!!";this._partition&&this._entityNode&&this.clearEntity(),this._partition=this._partitionClass?new this._partitionClass(this):(null===(t=this._parent)||void 0===t?void 0:t.partition)||new this._pool.partitionClass(this),this._partition!=(null===(e=this._parent)||void 0===e?void 0:e.partition)&&this._partition.invalidate(),this._entityDirty=!0}return this._partition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickObjectNode",{get:function(){return this._pickObject!=this.container.pickObject&&(this._pickObject=this.container.pickObject,this._pickObject?(this._pickObject.partitionClass=yr,this._pickObjectNode=this._pickObject.getAbstraction(this._pool),this._pickObject.pickObjectFromTimeline&&this._pickObjectNode.setParent(this)):(this._pickObjectNode.setParent(null),this._pickObjectNode=null)),this._pickObjectNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderToImage",{get:function(){var t=this.container,e=t.blendMode,n=t.filters,i=t.cacheAsBitmap,r=this.isRenderable()&&(i||n&&n.length>0||e&&e!==ze.LAYER&&e!==ze.NORMAL&&(oe.USE_NON_NATIVE_BLEND||He(e)));return this._renderToImage!==r&&(this._renderToImage=r,this._renderToImage||this.partition.clearLocalNode()),this._renderToImage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundsVisible",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._pool},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorTransformDisabled",{get:function(){return this._colorTransformDisabled},set:function(t){this._colorTransformDisabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformDisabled",{get:function(){return this._transformDisabled},set:function(t){this._transformDisabled!=t&&(this._transformDisabled=t,this._colorTransformDisabled=t,this._transformDisabled?this._activeTransform=e._nullTransform:this._activeTransform=this.container.transform)},enumerable:!1,configurable:!0}),e.prototype.getScale9Container=function(){var t;return this._hierarchicalPropsDirty&tr.SCALE9&&(this._scale9Container=this.container.scale9Grid?this.container:null===(t=this._parent)||void 0===t?void 0:t.getScale9Container(),this._hierarchicalPropsDirty^=tr.SCALE9),this._scale9Container},e.prototype.getPosition=function(){return this._positionDirty&&(this.container._registrationMatrix3D&&this.container.alignmentMode===nr.REGISTRATION_POINT?(this._position.x=-this.container._registrationMatrix3D._rawData[12],this._position.y=-this.container._registrationMatrix3D._rawData[13],this._position.z=-this.container._registrationMatrix3D._rawData[14],this._position=this.getMatrix3D().transformVector(this._position,this._position)):this.getMatrix3D().copyColumnTo(3,this._position),this._positionDirty=!1),this._position},e.prototype.getInverseMatrix3D=function(){return this._inverseMatrix3DDirty&&(this._inverseMatrix3D||(this._inverseMatrix3D=new U),this._inverseMatrix3DDirty=!1,this._inverseMatrix3D.copyFrom(this.getMatrix3D()),this._inverseMatrix3D.invert()),this._inverseMatrix3D||(this._inverseMatrix3D=new U)},e.prototype.getMatrix3D=function(){return this._hierarchicalPropsDirty&tr.SCENE_TRANSFORM&&(this._matrix3D.copyFrom(this._activeTransform.matrix3D),this.container._registrationMatrix3D&&(this._matrix3D.prepend(this.container._registrationMatrix3D),this.container.alignmentMode!=nr.REGISTRATION_POINT&&this._matrix3D.appendTranslation(-this.container._registrationMatrix3D._rawData[12]*this._activeTransform.scale.x,-this.container._registrationMatrix3D._rawData[13]*this._activeTransform.scale.y,-this.container._registrationMatrix3D._rawData[14]*this._activeTransform.scale.z)),this._parent&&this._matrix3D.append(this._parent.getMatrix3D()),!this.container.maskMode&&this.container.scrollRect?this._matrix3D.prependTranslation(-this.container.scrollRect.x,-this.container.scrollRect.y,0):this.container.maskMode&&this.container.scrollRect&&this._matrix3D.prependTranslation(this.container.scrollRect.x,this.container.scrollRect.y,0),this._hierarchicalPropsDirty^=tr.SCENE_TRANSFORM,this.container._iController&&this.container._iController.updateController()),this._matrix3D},e.prototype.getRenderMatrix3D=function(t){if(this.container.orientationMode==er.CAMERA_PLANE){var e=t.decompose();return e[0].copyFrom(this.getPosition()),e[3].copyFrom(this._activeTransform.scale),this._orientationMatrix.recompose(e),this.container._registrationMatrix3D&&(this._orientationMatrix.prepend(this.container._registrationMatrix3D),this.container.alignmentMode!=nr.REGISTRATION_POINT&&this._orientationMatrix.appendTranslation(-this.container._registrationMatrix3D._rawData[12]*this._activeTransform.scale.x,-this.container._registrationMatrix3D._rawData[13]*this._activeTransform.scale.y,-this.container._registrationMatrix3D._rawData[14]*this._activeTransform.scale.z)),this._orientationMatrix}return this.getMatrix3D()},e.prototype.getColorTransform=function(){if(this._colorTransformDisabled)return e._nullColorTransform;if(this._hierarchicalPropsDirty&tr.COLOR_TRANSFORM){if(this._hierarchicalPropsDirty^=tr.COLOR_TRANSFORM,this._colorTransformDisabled)return e._nullColorTransform;this._colorTransform||(this._colorTransform=new T),this._parent&&this._parent.getColorTransform()?(this._colorTransform.copyFrom(this._parent.getColorTransform()),this._colorTransform.prepend(this.container.transform.colorTransform)):this._colorTransform.copyFrom(this.container.transform.colorTransform)}return this._colorTransform||e._nullColorTransform},e.prototype.getMaskId=function(){return this._hierarchicalPropsDirty&tr.MASK_ID&&(this._maskId=-1!=this.container.maskId?this.container.maskId:this._parent?this._parent.getMaskId():-1,this._hierarchicalPropsDirty^=tr.MASK_ID),this._maskId},e.prototype.getMasks=function(t){if(void 0===t&&(t=!1),!t)return this._masks;if(this.container.masks){var e=this.container.masks.length;this._masks.length=e;for(var n=0;n<e;n++)this._masks[n]=this._pool.getNode(this.container.masks[n]).partition.rootNode}else this._masks.length=0;return this._masks},e.prototype.getMaskOwners=function(){var t;if(this._transformDisabled)return null;if(this._hierarchicalPropsDirty&tr.MASKS){var e=this.getMasks(!0);this._maskOwners=(null===(t=this._parent)||void 0===t?void 0:t.getMaskOwners())&&-1==this.getMaskId()?e.length?this._parent.getMaskOwners().concat([this]):this._parent.getMaskOwners().concat():e.length?[this]:null,this._hierarchicalPropsDirty^=tr.MASKS}return this._maskOwners},e.prototype.globalToLocal=function(t,n){void 0===n&&(n=null);var i=e._tempVector3D;i.setTo(t.x,t.y,0);var r=this.getInverseMatrix3D().transformVector(i,i);return n||(n=new O),n.x=r.x,n.y=r.y,n},e.prototype.globalToLocal3D=function(t){return this.getInverseMatrix3D().transformVector(t)},e.prototype.localToGlobal=function(t,n){void 0===n&&(n=null);var i=e._tempVector3D;i.setTo(t.x,t.y,0);var r=this.getMatrix3D().transformVector(i,i);return n||(n=new O),n.x=r.x,n.y=r.y,n},e.prototype.getBoundsPrimitive=function(t){return null},e.prototype._onEvent=function(t){switch(t.type){case dr.REMOVE_CHILD_AT:return this.removeChildAt(t.index);case dr.ADD_CHILD_AT:return this.addChildAt(t.container,t.index);case fr.INVALIDATE_PROPERTY:return this.invalidateHierarchicalProperty(t.property)}},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this.container.removeEventListener(fr.INVALIDATE_PROPERTY,this._onEvent),this.container.removeEventListener(dr.ADD_CHILD_AT,this._onEvent),this.container.removeEventListener(dr.REMOVE_CHILD_AT,this._onEvent),this.partition.clearLocalNode(),this._entityNode&&this.clearEntity();for(var n=0;n<this._numChildNodes;n++)this._childNodes[n].onClear(e);this._pickObject&&(this._pickObject=null,this._pickObjectNode.setParent(null),this._pickObjectNode=null),this.clear()},e.prototype.onInvalidate=function(e){var n;t.prototype.onInvalidate.call(this,e),this.partition!=(null===(n=this._parent)||void 0===n?void 0:n.partition)&&this._partition.invalidate(),this._entityDirty=!0},e.prototype.clear=function(){var e;t.prototype.clear.call(this),this.partition!=(null===(e=this._parent)||void 0===e?void 0:e.partition)&&this._partition.clear(),this._entityNode&&(this.clearEntity(),this._entityDirty=!0);for(var n=0;n<this._numChildNodes;n++)this._childNodes[n].clear();this._pickObject&&this._pickObjectNode.clear()},e.prototype.isInFrustum=function(t,e,n,i){return!this.isInvisible()},e.prototype.isInvisible=function(){var t;return this._hierarchicalPropsDirty&tr.VISIBLE&&(this._invisible=!this._transformDisabled&&(!this.container.visible||(null===(t=this.parent)||void 0===t?void 0:t.isInvisible())),this._hierarchicalPropsDirty^=tr.VISIBLE),this._invisible},e.prototype.isIntersectingRay=function(t,e,n,i){return!0},e.prototype.isRenderable=function(){return-1!=this.getMaskId()||!this.isInvisible()&&this.getColorTransform()._isRenderable()},e.prototype.isCastingShadow=function(){return!0},e.prototype.dispose=function(){this._parent=null,this._childNodes=null},e.prototype.acceptTraverser=function(t){if(this._entityDirty){this._entityDirty=!1;var e=this.container.getEntity();this._entityNode&&this._entityNode.entity!=e&&this.clearEntity(),e&&(null==this._entityNode&&(this._entityNode=e.getAbstraction(this.partition),this._entityNode.setParent(this)),this._partition.invalidateEntity(this._entityNode))}if(this.partition.rootNode==this&&this.partition.updateEntities(),(t.partition===this.partition||t===t.getTraverser(this.partition))&&t.enterNode(this)){this.container.maskMode||this._scrollRect===this.container.scrollRect||(this._scrollRect=this.container.scrollRect,this._scrollRectNode&&(this._scrollRectNode.setParent(null),this._scrollRectNode=null),this._scrollRect&&(this._scrollRectNode=this.container.getScrollRectPrimitive().getAbstraction(this._pool),this._scrollRectNode.container.scrollRect=this._scrollRect,this._scrollRectNode.setParent(this))),this._entityNode&&this._entityNode.acceptTraverser(t);for(var n=0;n<this._numChildNodes;n++)this._childNodes[n].acceptTraverser(t)}},e.prototype.addChildAt=function(t,e){var n=t.getAbstraction(this._pool);return n.setParent(this),e==this._numChildNodes?this._childNodes.push(n):this._childNodes.splice(e,0,n),this._numChildNodes++,n},e.prototype.removeChildAt=function(t){this._numChildNodes--;var e=t===this._numChildNodes?this._childNodes.pop():this._childNodes.splice(t,1)[0];return e.setParent(null),e},e.prototype.clearEntity=function(){this._partition.clearEntity(this._entityNode),this._entityNode.setParent(null),this._entityNode=null},e.prototype.startDrag=function(){this._isDragEntity=!0},e.prototype.stopDrag=function(){this._isDragEntity=!1},e.prototype.isDragEntity=function(){return this._isDragEntity},e.prototype.isMouseDisabled=function(){var t;return this.isInvisible()||!this.container.mouseEnabled||(null===(t=this.parent)||void 0===t?void 0:t.isMouseChildrenDisabled())},e.prototype.isMouseChildrenDisabled=function(){var t;return this._hierarchicalPropsDirty&tr.MOUSE_ENABLED&&(this._mouseChildrenDisabled=!this.container.mouseChildren||(null===(t=this.parent)||void 0===t?void 0:t.isMouseChildrenDisabled()),this._hierarchicalPropsDirty^=tr.MOUSE_ENABLED),this._mouseChildrenDisabled},e.prototype.isDescendant=function(t){for(var e=this;e.parent;)if((e=e.parent)==t)return!0;return!1},e.prototype.isAncestor=function(t){return t.isDescendant(this)},e.prototype.invalidateHierarchicalProperty=function(t){t&tr.COLOR_TRANSFORM&&this.dispatchEvent(this._invalidateColorTransformEvent||(this._invalidateColorTransformEvent=new rr(rr.INVALIDATE_COLOR_TRANSFORM)));var e=(this._hierarchicalPropsDirty^t)&t;if(e){this._hierarchicalPropsDirty|=e;for(var n=0;n<this._childNodes.length;++n)this._childNodes[n].invalidateHierarchicalProperty(t);this._pickObjectNode&&this._pickObjectNode.invalidateHierarchicalProperty(t),t&tr.SCENE_TRANSFORM&&(this._positionDirty=!0,this._inverseMatrix3DDirty=!0,this.dispatchEvent(this._invalidateMatrix3DEvent||(this._invalidateMatrix3DEvent=new rr(rr.INVALIDATE_MATRIX3D))),this._entityNode&&this._partition.invalidateEntity(this._entityNode))}},e.prototype.setParent=function(t){this._parent&&(this._parent.partition!==this.partition&&this._parent.partition.removeChild(this.partition),this.clear()),this._parent=t,this._parent&&this._parent.partition!==this.partition&&this._parent.partition.addChild(this.partition),this.invalidateHierarchicalProperty(tr.ALL)},e._nullTransform=new V,e._tempVector3D=new L,e._nullColorTransform=new T,e}(J),gr=function(t){function e(e,n,i,r,o,a){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),void 0===r&&(r=Ft.BASELINE),void 0===o&&(o=Ht.AUTO),void 0===a&&(a=!1);var s=t.call(this)||this;return s._rect=new W,s._backgroundColor=0,s._backgroundRed=0,s._backgroundGreen=0,s._backgroundBlue=0,s._focalLength=1e3,s._pixelRatio=1,s._frustumMatrix3D=new U,s._viewMatrix3D=new U,s._inverseViewMatrix3D=new U,s._components=new Array(4),s._offset=new L,s._scale=new L(1,1,1),s._frustumMatrix3DDirty=!0,s._viewMatrix3DDirty=!0,s._inverseViewMatrix3DDirty=!0,s.partitionClass=yr,s.backgroundAlpha=1,s.backgroundDepth=1,s.backgroundStencil=0,s.preservePixelRatio=!0,s.preserveFocalLength=!1,s.preserveDimensions=!1,s._components[0]=s._offset,s._components[3]=s._scale,s._onInvalidateSizeDelegate=function(t){return s._onInvalidateSize(t)},s._onInvalidateViewMatrix3DDelegate=function(t){return s._onInvalidateViewMatrix3D(t)},s._projection=e||new xt,s._projection.addEventListener(H.INVALIDATE_VIEW_MATRIX3D,s._onInvalidateViewMatrix3DDelegate),n&&(s._shareContext=!0),s._stage=n||Bi.getInstance().getFreeStage(i,r,o,a),s._stage.addEventListener(ce.INVALIDATE_SIZE,s._onInvalidateSizeDelegate),s._updateDimensions(),s._updateFocalLength(),s._updatePixelRatio(),s}return o(e,t),Object.defineProperty(e.prototype,"shareContext",{get:function(){return this._shareContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._shareContext||this._target?this._rect.x:this._stage.x},set:function(t){if(this._shareContext||this._target){if(this._rect.x==t)return;this._offset.x=(this._rect.x=t)/this._targetWidth,this._invalidateViewMatrix3D()}else this._stage.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._shareContext||this._target?this._rect.y:this._stage.y},set:function(t){if(this._shareContext||this._target){if(this._rect.y==t)return;this._offset.y=(this._rect.y=t)/this._targetHeight,this._invalidateViewMatrix3D()}else this._stage.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._rect.width},set:function(t){this._rect.width!=t&&(this._rect.width=t,this._shareContext||this._target?(this._scale.x=t/this._targetWidth,this._updatePixelRatio(),this._invalidateViewMatrix3D()):this._stage.width=t,this._invalidateSize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._rect.height},set:function(t){this._rect.height!=t&&(this._rect.height=t,this._shareContext||this._target?(this._scale.y=t/this._targetHeight,this._updateFocalLength(),this._updatePixelRatio(),this._invalidateViewMatrix3D()):this._stage.height=t,this._invalidateSize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor!=t&&(this._backgroundColor=t,this._backgroundRed=(t>>16&255)/255,this._backgroundGreen=(t>>8&255)/255,this._backgroundBlue=(255&t)/255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"focalLength",{get:function(){return this._focalLength},set:function(t){this._focalLength!=t&&(this._focalLength=t,this._updateFocalLength())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return this._pixelRatio},set:function(t){this._pixelRatio!=t&&(this._pixelRatio=t,this._updatePixelRatio())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"projection",{get:function(){return this._projection},set:function(t){if(null==t)throw new l("projection cannot be null");this._projection!=t&&(this._projection.removeEventListener(H.INVALIDATE_VIEW_MATRIX3D,this._onInvalidateViewMatrix3DDelegate),this._projection=t,this._projection.addEventListener(H.INVALIDATE_VIEW_MATRIX3D,this._onInvalidateViewMatrix3DDelegate),this._invalidateViewMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target!=t&&this._updateTarget(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frustumMatrix3D",{get:function(){return this._frustumMatrix3DDirty&&(this._frustumMatrix3DDirty=!1,this._frustumMatrix3D.recompose(this._components),this._frustumMatrix3D.prepend(this._projection.frustumMatrix3D)),this._frustumMatrix3D},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewMatrix3D",{get:function(){return this._viewMatrix3DDirty&&(this._viewMatrix3DDirty=!1,this._viewMatrix3D.recompose(this._components),this._viewMatrix3D.prepend(this._projection.viewMatrix3D)),this._viewMatrix3D},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inverseViewMatrix3D",{get:function(){return this._inverseViewMatrix3DDirty&&(this._inverseViewMatrix3DDirty=!1,this._inverseViewMatrix3D.copyFrom(this.viewMatrix3D),this._inverseViewMatrix3D.invert()),this._inverseViewMatrix3D},enumerable:!1,configurable:!0}),e.prototype.requestAbstraction=function(t){return _r},e.prototype.getNode=function(t){return t.getAbstraction(this)},e.prototype.clear=function(t,e,n,i,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=Mt.ALL),this._stage.setRenderTarget(this._target,e,n,i),this._stage.setScissor(null==this._target?this._rect:null),t&&this._stage.clear(this._backgroundRed,this._backgroundGreen,this._backgroundBlue,this.backgroundAlpha,this.backgroundDepth,this.backgroundStencil,r)},e.prototype.present=function(){this._shareContext||null!=this._target||this._stage.present()},e.prototype.project=function(t,e){return void 0===e&&(e=null),(e=this._projection.project(t,e)).x=(e.x+1)*this.width/2,e.y=(e.y+1)*this.height/2,e},e.prototype.unproject=function(t,e,n,i){return void 0===i&&(i=null),this._projection.unproject(2*t/this.width-1,2*e/this.height-1,n,i)},e.prototype.dispose=function(){this._target?(this._target.removeEventListener(h.INVALIDATE,this._onInvalidateSizeDelegate),this._target=null):(this._stage.removeEventListener(ce.INVALIDATE_SIZE,this._onInvalidateSizeDelegate),this._shareContext||null!=this._target||this._stage.dispose(),this._stage=null),this._projection&&(this._projection.removeEventListener(H.INVALIDATE_VIEW_MATRIX3D,this._onInvalidateViewMatrix3DDelegate),this._projection=null)},e.prototype._onInvalidateSize=function(t){this._updateDimensions(),this._updateFocalLength(),this._updatePixelRatio(),this.preserveDimensions&&(this._shareContext||null!=this._target)||this._invalidateSize()},e.prototype._onInvalidateViewMatrix3D=function(t){this._invalidateViewMatrix3D()},e.prototype._updateTarget=function(t){this._target?this._target.removeEventListener(h.INVALIDATE,this._onInvalidateSizeDelegate):this._stage.removeEventListener(ce.INVALIDATE_SIZE,this._onInvalidateSizeDelegate),this._target=t,this._target?this._target.addEventListener(h.INVALIDATE,this._onInvalidateSizeDelegate):this._stage.addEventListener(ce.INVALIDATE_SIZE,this._onInvalidateSizeDelegate),this._updateDimensions(),this._updateFocalLength(),this._updatePixelRatio(),this.preserveDimensions&&(this._shareContext||null!=this._target)||this._invalidateSize()},e.prototype._updateDimensions=function(){this._target?this._target instanceof fe?(this._targetWidth=this._target.width,this._targetHeight=this._target.height):this._target instanceof Fe&&(this._targetWidth=this._target.size,this._targetHeight=this._target.size):(this._targetWidth=this._stage.width,this._targetHeight=this._stage.height),this.preserveDimensions&&(this._shareContext||this._target)?(this._offset.x=this._rect.x/this._targetWidth,this._offset.y=this._rect.y/this._targetHeight,this._scale.x=this._rect.width/this._targetWidth,this._scale.y=this._rect.height/this._targetHeight):(this._rect.x=this._offset.x*this._targetWidth,this._rect.y=this._offset.y*this._targetHeight,this._rect.width=this._scale.x*this._targetWidth,this._rect.height=this._scale.y*this._targetHeight)},e.prototype._updateFocalLength=function(){this.preserveFocalLength?this.projection.scale=this._focalLength/this._rect.height:this._focalLength=this._projection.scale*this._rect.height},e.prototype._updatePixelRatio=function(){this.preservePixelRatio?this._projection.ratio=this._pixelRatio*this._rect.width/this._rect.height:this._pixelRatio=this._projection.ratio*this._rect.height/this._rect.width},e.prototype._invalidateViewMatrix3D=function(){this._frustumMatrix3DDirty=!0,this._viewMatrix3DDirty=!0,this._inverseViewMatrix3DDirty=!0,this.dispatchEvent(new pr(pr.INVALIDATE_VIEW_MATRIX3D,this))},e.prototype._invalidateSize=function(){this.dispatchEvent(new pr(pr.INVALIDATE_SIZE,this))},e}(_),mr=function(t){function e(e){var n=t.call(this)||this;return n._children=new Array,n._updateQueue={},n._rootNode=e,n}return o(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:!1,configurable:!0}),e.prototype.getLocalNode=function(){if(!this._localNode){var t=e._defaultProjection;t||((t=new xt).coordinateSystem=gt.LEFT_HANDED,t.originX=-1,t.originY=-1,t.transform=new V,t.transform.moveTo(0,0,-1e3),t.transform.lookAt(new L));var n=new gr(t,this._rootNode.view.stage);n.backgroundAlpha=0,this._localNode=n.getNode(this._rootNode.container),this._localNode.transformDisabled=!0,this.addChild(this._localNode.partition)}return this._localNode},e.prototype.clearLocalNode=function(){this._localNode&&(this.removeChild(this._localNode.partition),this._localNode.onClear(null),this._localNode=null)},e.prototype.addChild=function(t){this._children.push(t),t.setParent(this),this.invalidate()},e.prototype.removeChild=function(t){this._children.splice(this._children.indexOf(t),1)[0],t.setParent(null),this.invalidate()},e.prototype.setParent=function(t){this._parent=t},e.prototype.traverse=function(t){this._invalid=!1,this._rootNode.acceptTraverser(t)},e.prototype.invalidateEntity=function(t){this.invalidate(),this._updateQueue[t.id]=t},e.prototype.updateEntity=function(t){t.parent.container._iInternalUpdate(),this.updateNode(t)},e.prototype.updateNode=function(t){},e.prototype.clearEntity=function(t){this.invalidate(),delete this._updateQueue[t.id]},e.prototype.findParentForNode=function(t){return this._rootNode},e.prototype.updateEntities=function(){for(var t in this._updateQueue)this.updateEntity(this._updateQueue[t]);this._updateQueue={}},e.prototype.invalidate=function(){this._invalid||(this._invalid=!0,t.prototype.invalidate.call(this),this._parent&&this._parent.invalidate())},e.prototype.clear=function(){t.prototype.clear.call(this),this._localNode&&(this._localNode.clear(),this._localNode=null)},e.prototype.dispose=function(){},e.prototype.requestAbstraction=function(t){return e._abstractionClassPool[t.assetType]},e.registerAbstraction=function(t,n){e._abstractionClassPool[n.assetType]=t},e._abstractionClassPool={},e}(_),yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(mr),Ar=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entity",{get:function(){return this._asset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"partition",{get:function(){return this._pool},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundsVisible",{get:function(){return this._boundsVisible!=this._parent.container.boundsVisible&&(this._boundsVisible=this._parent.container.boundsVisible,this._boundsVisible?this._boundsPrimitiveDirty=!0:this._boundsPrimitive&&(this._boundsPrimitive.setParent(null),this._boundsPrimitive=null)),this._boundsVisible},enumerable:!1,configurable:!0}),e.prototype.isCastingShadow=function(){return this._parent.container.castsShadows},e.prototype.onClear=function(e){this._pool.clearEntity(this),t.prototype.onClear.call(this,e),this.clear()},e.prototype.onInvalidate=function(e){this._pool.invalidateEntity(this),t.prototype.onInvalidate.call(this,e),this.invalidate()},e.prototype.isInFrustum=function(t,e,n,i){return!this.isInvisible()},e.prototype.isInvisible=function(){return this._parent.isInvisible()},e.prototype.getMaskId=function(){return this._parent.getMaskId()},e.prototype.getBoundsPrimitive=function(t){return this._boundsPrimitiveDirty&&(this._boundsPrimitiveDirty=!1,this._boundsPrimitive=this.parent.container.getBoundsPrimitive(t.getBoundsPicker(this.partition)).getAbstraction(this.partition),this._boundsPrimitive.setParent(this._parent)),this._boundsPrimitive},e.prototype.isIntersectingRay=function(t,e,n,i){return this.getAbstraction(i)._isIntersectingRayInternal(t,e,n)},e.prototype.isRenderable=function(){return this.parent.getColorTransform()._isRenderable()},e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applyEntity(this)},e.prototype.setParent=function(t){t||this.onClear(null),this._parent=t},e}(J),vr=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.shapeFlag=!1,i.findClosestCollision=!1,i._entities=[],i._pickers=[],i._collectedEntities=[],i.pickGroup=n.pickGroup,i.partition=e,i.rootNode=e.rootNode,i}return o(e,t),e.prototype.traverse=function(){this._entities.length=0,this._pickers.length=0,this.partition.traverse(this)},e.prototype.getTraverser=function(t){if(!t.rootNode.isMouseDisabled()||t.rootNode.isDragEntity()){var e=this.pickGroup.getRaycastPicker(t);return e._isIntersectingRayInternal(this._rootEntity,this._globalRayPosition,this._globalRayDirection,this._shapeFlag)&&this._pickers.push(e),e}return this},Object.defineProperty(e.prototype,"dragNode",{get:function(){return this._dragNode},set:function(t){this._dragNode!=t&&(this._dragNode&&this._dragNode.stopDrag(),this._dragNode=t,this._dragNode&&this._dragNode.startDrag())},enumerable:!1,configurable:!0}),e.prototype.enterNode=function(t){return!(t.isInvisible()&&-1==t.getMaskId()||t.getMaskId()!=this._rootEntity.getMaskId())&&(t.pickObjectNode?(t.pickObjectNode.partition.traverse(this),!1):t.isIntersectingRay(this._rootEntity,this._globalRayPosition,this._globalRayDirection,this.pickGroup))},e.prototype.isIntersectingRay=function(t,e,n){return void 0===n&&(n=!1),this._isIntersectingRayInternal(this.rootNode,t,e,n)},e.prototype._isIntersectingRayInternal=function(t,e,n,i){return this._rootEntity=t,this._globalRayPosition=e,this._globalRayDirection=n,this._shapeFlag=this.shapeFlag||i,this.traverse(),!(!this._entities.length&&!this._pickers.length)},e.prototype.getCollision=function(t,e,n,i){return void 0===n&&(n=!1),void 0===i&&(i=null),this._getCollisionInternal(t,e,n,!1,i)},e.prototype.getViewCollision=function(t,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=null);var o=this.rootNode.view,a=o.unproject(t,n,0,e._rayPosition),s=o.unproject(t,n,1,e._rayDirection);return s.decrementBy(a),this._getCollisionInternal(a,s,i,!1,r)},e.prototype._getCollisionInternal=function(t,e,n,i,r){if(!this._isIntersectingRayInternal(this.rootNode,t,e,n))return null;this._collectEntities(this._collectedEntities);var o=this._getPickingCollision(r);return this._collectedEntities.length=0,o},e.prototype.getObjectsUnderPoint=function(t,e){if(!this._isIntersectingRayInternal(this.rootNode,t,e,!0))return[];this._collectEntities(this._collectedEntities,this._dragNode);var n=this._getColliders();return this._collectedEntities.length=0,n},e.prototype._collectEntities=function(t,e){var n,i;void 0===e&&(e=null);for(var r=this._pickers.length-1;r>=0;r--)(n=this._pickers[r]).rootNode!=e&&n._collectEntities(t,e);for(r=this._entities.length-1;r>=0;r--)(i=this._entities[r]).pickingCollision.rootNode=this.rootNode,t.push(i)},e.prototype.setIgnoreList=function(t){this._ignoredEntities=t},e.prototype.isIgnored=function(t){if(this._ignoredEntities)for(var e=this._ignoredEntities.length,n=0;n<e;n++)if(this._ignoredEntities[n]==t)return!0;return!1},e.sortOnNearT=function(t,e){return t.pickingCollision.rayEntryDistance>e.pickingCollision.rayEntryDistance?1:t.pickingCollision.rayEntryDistance<e.pickingCollision.rayEntryDistance?-1:0},e.prototype._getPickingCollision=function(t){var n,i;void 0===t&&(t=null),this._collectedEntities=this._collectedEntities.sort(e.sortOnNearT);for(var r=this._collectedEntities.length,o=0;o<r&&(i=(n=this._collectedEntities[o]).pickingCollision,null==t||i.rayEntryDistance<t.rayEntryDistance);o++)if(this._shapeFlag||n.shapeFlag)i.rayEntryDistance=Number.MAX_VALUE,n.isIntersectingShape(this.findClosestCollision)&&(t=i);else if(!i.rayOriginIsInsideBounds){t=i;break}return t&&e.updatePosition(t),this._dragNode&&"[asset MovieClip]"==this._dragNode.container.assetType&&this._dragNode.container.adapter&&this._dragNode.container.adapter.setDropTarget(t?t.containerNode:null),t},e.prototype._getColliders=function(){for(var t,e=[],n=this._collectedEntities.length,i=0;i<n;i++)(t=this._collectedEntities[i]).pickingCollision.rayEntryDistance=Number.MAX_VALUE,t.isIntersectingShape(!1)&&e.push(t.node.container);return e},e.updatePosition=function(t){var e=t.position||(t.position=new L),n=t.rayDirection,i=t.rayPosition,r=t.rayEntryDistance;e.x=i.x+r*n.x,e.y=i.y+r*n.y,e.z=i.z+r*n.z},e.prototype.dispose=function(){},e.prototype.applyEntity=function(t){if(!this.isIgnored(t.entity)){var e=t.getAbstraction(this.pickGroup);this._entities.push(e)}},e._rayPosition=new L,e._rayDirection=new L,e}(J),br=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._boundingVolumePools={},i._boundingVolumes=[],i._boundsPickers=[],i._pickGroup=n.pickGroup,i._partition=e,i._node=e.rootNode,i}return o(e,t),Object.defineProperty(e.prototype,"partition",{get:function(){return this._partition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=this.getBoxBounds();return null==t?0:t.width},set:function(t){var n=this._node.container.transform,i=this.getBoxBounds();if(null!=i){var r=n.rotation,o=n.matrix3D,a=o.transformBox(i,e.tmpBox),s=a.width>0?t/a.width:1;if(0!==r.z){var l=e.tmpMatrix;l.copyFrom(o),l.appendScale(s||e.MINIMAL_SCALE,1,1);var u=l.decompose()[3];n.scaleTo(u.x,u.y,u.z)}else{var c=n.scale;n.scaleTo(c.x*s||e.MINIMAL_SCALE,c.y,c.z)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this.getBoxBounds();return null==t?0:t.height},set:function(t){var n=this._node.container.transform,i=this.getBoxBounds();if(null!=i){var r=n.matrix3D,o=n.rotation,a=r.transformBox(i,e.tmpBox),s=a.height>0?t/a.height:1;if(0!==o.z){var l=e.tmpMatrix;l.copyFrom(r),l.appendScale(1,s||e.MINIMAL_SCALE,1);var u=l.decompose()[3];n.scaleTo(u.x,u.y,u.z)}else{var c=n.scale;n.scaleTo(c.x,c.y*s||e.MINIMAL_SCALE,c.z)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){var t=this.getBoxBounds();return null==t?0:t.depth*this._node.container.transform.scale.z},set:function(t){var e=this.getBoxBounds();null!=e&&0!=e.depth&&this._node.container.transform.scaleTo(this._node.container.transform.scale.x,this._node.container.transform.scale.y,t/e.depth)},enumerable:!1,configurable:!0}),e.prototype.onInvalidate=function(e){t.prototype.onInvalidate.call(this,e),this.dispatchEvent(new ir(ir.INVALIDATE_BOUNDS,this))},e.prototype.traverse=function(){this._invalid=!1,this._boundsPickers.length=0,this._partition.traverse(this)},e.prototype.getTraverser=function(t){var e=this._pickGroup.getBoundsPicker(t);return this._boundsPickers.push(e),e},e.prototype.enterNode=function(t){return!0},e.prototype.getBoundingVolume=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),null==t&&(t=this._node),null==e&&(e=this._node.container.defaultBoundingVolume);var n=this._boundingVolumePools[e]||(this._boundingVolumePools[e]=new ur(this,e));return t.getAbstraction(n)},e.prototype.getBoxBounds=function(t,e,n){return void 0===t&&(t=null),void 0===e&&(e=!1),void 0===n&&(n=!1),this.getBoundingVolume(t,e?n?Ki.BOX_BOUNDS_FAST:Ki.BOX_BOUNDS:n?Ki.BOX_FAST:Ki.BOX).getBox()},e.prototype.getSphereBounds=function(t,e,n){return void 0===t&&(t=null),void 0===e&&(e=!1),void 0===n&&(n=!1),this.getBoundingVolume(t,e?n?Ki.SPHERE_BOUNDS_FAST:Ki.SPHERE_BOUNDS:n?Ki.SPHERE_FAST:Ki.SPHERE).getSphere()},e.prototype.addBoundingVolume=function(t){this._boundingVolumes.push(t)},e.prototype.removeBoundingVolume=function(t){this._boundingVolumes.splice(this._boundingVolumes.indexOf(t),1)},e.prototype.hitTestPoint=function(t,e,n){return void 0===n&&(n=!1),this._hitTestPointInternal(this._node,t,e,n,!1)},e.prototype._hitTestPointInternal=function(t,n,i,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!1),!(-1==this._node.getMaskId()||o&&r))return!1;this._invalid&&this.traverse();var a=e.tmpPoint;a.setTo(n,i),this._node.globalToLocal(a,a);var s=this.getBoxBounds(null,!1,!0);if(null==s||!s.contains(a.x,a.y,0))return!1;if(!r||"[asset TextField]"==this._node.container.assetType||"[asset Billboard]"==this._node.container.assetType)return!0;var l=this._boundsPickers.length;if(l)for(var u=0;u<l;++u)if(this._boundsPickers[u]._hitTestPointInternal(t,n,i,r,o))return!0;return!1},e.prototype.hitTestObject=function(t){var e=t.getBoxBounds(this._node,!0,!0);if(null==e)return!1;var n=this.getBoxBounds(this._node,!0,!0);return null!=n&&(!!e.intersects(n)&&t.getBoxBounds(this._node,!0).intersects(this.getBoxBounds(this._node,!0)))},e.prototype._getBoxBoundsInternal=function(t,e,n,i,r){void 0===t&&(t=null),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=null),void 0===r&&(r=null),this._invalid&&this.traverse();var o=this._boundsPickers.length;if(o>0)for(var a=new U,s=0;s<o;++s)this._boundsPickers[s].node!=this._node?(t?a.copyFrom(t):a.identity(),a.prepend(this._boundsPickers[s].node.container.transform.matrix3D),this._boundsPickers[s].node.container._registrationMatrix3D&&a.prepend(this._boundsPickers[s].node.container._registrationMatrix3D),r=this._boundsPickers[s]._getBoxBoundsInternal(a,e,n,i,r)):r=this._boundsPickers[s]._getBoxBoundsInternal(t,e,n,i,r);return r},e.prototype._getSphereBoundsInternal=function(t,e,n,i,r,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===r&&(r=null),void 0===o&&(o=null),this._invalid&&this.traverse();var a=this._getBoxBoundsInternal(e,n,i);if(null!=a){t||((t=new L).x=a.x+a.width/2,t.y=a.y+a.height/2,t.z=a.z+a.depth/2);var s=this._boundsPickers.length;if(s>0)for(var l=new U,u=0;u<s;++u)this._boundsPickers[u].node!=this._node?(e?l.copyFrom(e):l.identity(),l.prepend(this._boundsPickers[u].node.container.transform.matrix3D),this._boundsPickers[u].node.container._registrationMatrix3D&&l.prepend(this._boundsPickers[u].node.container._registrationMatrix3D),o=this._boundsPickers[u]._getSphereBoundsInternal(t,l,n,i,r,o)):o=this._boundsPickers[u]._getSphereBoundsInternal(t,e,n,i,r,o);return o}},e.prototype.isInFrustum=function(t,e){return this._isInFrustumInternal(this._node,t,e)},e.prototype._isInFrustumInternal=function(t,e,n){return this.getBoundingVolume(t).isInFrustum(e,n)},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e);for(var n=this._boundingVolumes.length-1;n>=0;n--)this._boundingVolumes[n].onClear(e);for(var i in this._boundingVolumePools)this._boundingVolumePools[i].dispose(),delete this._boundingVolumePools[i]},e.prototype.dispose=function(){},e.prototype.applyEntity=function(t){this._boundsPickers.push(t.getAbstraction(this._pickGroup))},e.tmpMatrix=new U,e.tmpPoint=new O,e.tmpBox=new R,e.MINIMAL_SCALE=1e-5,e}(J),xr=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._tabNodes=[],i._customTabNodes=[],i._customTabNodesSorted=[],i._partition=e,i._entity=e.rootNode,i}return o(e,t),Object.defineProperty(e.prototype,"partition",{get:function(){return this._partition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:!1,configurable:!0}),e.prototype.sortTabEnabledEntities=function(){if(!(this._customTabNodes.length<=0&&this._tabNodes.length<=0)){var t,e=[],n=0,i=0;if(this._customTabNodes.length>0)for(;n<this._customTabNodes.length;)this._customTabNodes[n]&&(this._customTabNodes[n]=this._customTabNodes[n].reverse()),n++;else{for(t=this._tabNodes.length,n=0;n<t;n++){var r=this._tabNodes[n],o=r.parent.getMatrix3D().position,a=Math.floor(o.y/10);e.length<=a&&(e.length=a+1),e[a]||(e[a]=[]),e[a].push(r)}for(this._tabNodes.length=0,n=0;n<e.length;n++){var s=e[n];if(s)for(s=s.sort((function(t,e){return t.parent.getMatrix3D().position.x>e.parent.getMatrix3D().position.x?1:-1})),i=0;i<s.length;i++)this._tabNodes[this._tabNodes.length]=s[i]}}}},e.prototype.traverse=function(){this._tabNodes.length=0,this._customTabNodes.length=0,this._customTabNodesSorted.length=0,this._partition.traverse(this),this.sortTabEnabledEntities(),this._invalid=!1},e.prototype.getTraverser=function(t){return this},e.prototype.getNextTabEntity=function(t){if(this._invalid&&this.traverse(),this._customTabNodes.length<=0&&this._tabNodes.length<=0)return t;if(this._customTabNodes.length>0){var e=0,n=0,i=0,r=0;if(t)for(;e<this._customTabNodes.length;){if(this._customTabNodes[e])for(i=0;i<this._customTabNodes[e].length;i++)if(this._customTabNodes[e][i]==t){for(r=i+1;r<this._customTabNodes[e].length;){if(this._customTabNodes[e][r])return this._customTabNodes[e][r];r++}for(n=e+1;n<this._customTabNodes.length;){if(this._customTabNodes[n])for(r=0;r<this._customTabNodes[n].length;r++)if(this._customTabNodes[n][r])return this._customTabNodes[n][r];n++}for(n=0;n<this._customTabNodes.length;){if(this._customTabNodes[n])for(r=0;r<this._customTabNodes[n].length;r++)if(this._customTabNodes[n][r])return this._customTabNodes[n][r];n++}}e++}for(n=0;n<this._customTabNodes.length;){if(this._customTabNodes[n])for(r=0;r<this._customTabNodes[n].length;r++)if(this._customTabNodes[n][r])return this._customTabNodes[n][r];n++}return t}var o=this._tabNodes.length;for(e=0;e<o;e++)if(this._tabNodes[e]==t)return e==o-1?this._tabNodes[0]:this._tabNodes[e+1];return this._tabNodes[0]},e.prototype.getPrevTabEntity=function(t){if(this._invalid&&this.traverse(),this._customTabNodes.length<=0&&this._tabNodes.length<=0)return t;if(this._customTabNodes.length>0){var e=this._customTabNodes.length,n=0,i=0,r=0;if(t)for(;e>0;)if(e--,this._customTabNodes[e])for(i=this._customTabNodes[e].length-1;i>=0;i--)if(this._customTabNodes[e][i]==t){for(r=i-1;r>0;)if(r--,this._customTabNodes[e][r])return this._customTabNodes[e][r];for(n=e-1;n>0;)if(n--,this._customTabNodes[n])for(r=this._customTabNodes[n].length-1;r>=0;r--)if(this._customTabNodes[n][r])return this._customTabNodes[n][r];for(n=this._customTabNodes.length;n>0;)if(n--,this._customTabNodes[n])for(r=this._customTabNodes[n].length-1;r>=0;r--)if(this._customTabNodes[n][r])return this._customTabNodes[n][r]}for(n=this._customTabNodes.length-1;n>0;)if(n--,this._customTabNodes[n])for(r=this._customTabNodes[n].length-1;r>=0;r--)if(this._customTabNodes[n][r])return this._customTabNodes[n][r];return t}if(t)for(e=this._tabNodes.length-1;e>=0;e--)if(this._tabNodes[e]==t)return 0==e?this._tabNodes[this._tabNodes.length-1]:this._tabNodes[e-1];return this._tabNodes[0]},e.prototype.enterNode=function(t){return!t.isInvisible()},e.prototype.dispose=function(){},e.prototype.applyEntity=function(t){var e=t.parent.container;e.tabEnabled&&("[asset TextField]"==e.assetType&&"input"!=e.type||(e.tabIndex>=0?(this._customTabNodes.length<e.tabIndex&&(this._customTabNodes.length=e.tabIndex),this._customTabNodes[e.tabIndex]||(this._customTabNodes[e.tabIndex]=[]),this._customTabNodes[e.tabIndex].push(t)):this._tabNodes[this._tabNodes.length]=t))},e}(J),Cr=function(t){function e(){var n=t.call(this)||this;return n.id=f.Next(),n._raycastPickerPool=new Ir(n),n._boundsPickerPool=new Er(n),n._tabPickerPool=e._tabPickerPool||(e._tabPickerPool=new wr),n}return o(e,t),e.getInstance=function(){return e._instance||(e._instance=new e)},e.prototype.requestAbstraction=function(t){return cr},e.prototype.getRaycastPicker=function(t){return t.getAbstraction(this._raycastPickerPool)},e.prototype.getBoundsPicker=function(t){return t.getAbstraction(this._boundsPickerPool)},e.prototype.getTabPicker=function(t){return t.getAbstraction(this._tabPickerPool)},e}(p),Ir=function(){function t(t){this.id=f.Next(),this.pickGroup=t}return t.prototype.requestAbstraction=function(t){return vr},t}(),Er=function(){function t(t){this.id=f.Next(),this.pickGroup=t}return t.prototype.requestAbstraction=function(t){return br},t}(),wr=function(){function t(){this.id=f.Next()}return t.prototype.requestAbstraction=function(t){return xr},t}();console.debug("AwayJS - View - 0.6.64");var Sr,Dr=function(){function t(t,e,n,i){this._blendFactor=[Bt.ONE,Bt.ZERO],this._blendEquation=[Ot.ADD,Ot.ADD],this._invalidProgram=!0,this._animationVertexCode="",this._animationFragmentCode="",this._vertexCode="",this._fragmentCode="",this._postAnimationFragmentCode="",this.usesBlending=!1,this.useImageRect=!1,this.usesCurves=!1,this.depthCompareMode=Lt.LESS_EQUAL,this.writeDepth=!0,this._defaultCulling=Gt.BACK,this._pInverseSceneMatrix=new Float32Array(16),this.ambientR=255,this.ambientG=255,this.ambientB=255,this.usesGlobalPosFragment=!1,this.usesPositionFragment=!1,this.imageIndices=new Array,this.id=f.Next(),this._renderElements=t,this._renderMaterial=e,this._pass=n,this._stage=i,this._view=t.renderer.view,this.profile=this._stage.profile}return Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pass",{get:function(){return this._pass},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderMaterial",{get:function(){return this._renderMaterial},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"programData",{get:function(){return this._invalidProgram&&this._updateProgram(),this._programData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"usesAnimation",{get:function(){return this._usesAnimation},set:function(t){this._usesAnimation!=t&&(this._usesAnimation=t,this.invalidateProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numUsedVertexConstants",{get:function(){return this._invalidProgram&&this._updateProgram(),this._numUsedVertexConstants},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numUsedFragmentConstants",{get:function(){return this._invalidProgram&&this._updateProgram(),this._numUsedFragmentConstants},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numUsedStreams",{get:function(){return this._invalidProgram&&this._updateProgram(),this._numUsedStreams},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numUsedTextures",{get:function(){return this._invalidProgram&&this._updateProgram(),this._numUsedTextures},enumerable:!1,configurable:!0}),t.prototype.requestAbstraction=function(e){return t._abstractionClassPool[e.assetType]},t.registerAbstraction=function(e,n){t._abstractionClassPool[n.assetType]=e},t.prototype._includeDependencies=function(){this._renderMaterial.renderElements._includeDependencies(this),this._pass._includeDependencies(this)},t.prototype.reset=function(){this.projectionDependencies=0,this.normalDependencies=0,this.colorDependencies=0,this.viewDirDependencies=0,this.uvDependencies=0,this.secondaryUVDependencies=0,this.globalPosDependencies=0,this.tangentDependencies=0,this.usesCommonData=!1,this.usesGlobalPosFragment=!1,this.usesPositionFragment=!1,this.usesFragmentAnimation=!1,this.usesTangentSpace=!1,this.outputsNormals=!1,this.outputsTangentNormals=!1},t.prototype.setBlendMode=function(t){switch(this.usesBlending=!0,this.usesPremultipliedAlpha=!0,this._blendEquation=[0,0],t){case ze.NORMAL:this._blendFactor=[Bt.ONE,Bt.ZERO],this.usesBlending=!1,this.usesPremultipliedAlpha=!1;break;case ze.LAYER:this._blendFactor=[Bt.ONE,Bt.ONE_MINUS_SOURCE_ALPHA];break;case ze.MULTIPLY:this._blendFactor=[Bt.DESTINATION_COLOR,Bt.ONE_MINUS_SOURCE_ALPHA,Bt.ONE,Bt.ONE_MINUS_SOURCE_ALPHA];break;case ze.ADD:this._blendFactor=[Bt.ONE,Bt.ONE];break;case ze.SCREEN:this._blendFactor=[Bt.ONE,Bt.ONE_MINUS_SOURCE_COLOR,Bt.ONE,Bt.ONE_MINUS_SOURCE_ALPHA];break;case ze.SUBTRACT:this._blendFactor=[Bt.ONE,Bt.ONE,Bt.ONE,Bt.ONE],this._blendEquation=[Ot.SUBTRACT,Ot.ADD];break;case ze.ALPHA:this._blendFactor=[Bt.ZERO,Bt.SOURCE_ALPHA],this.usesPremultipliedAlpha=!1;break;default:throw new B("Unsupported blend mode: ".concat(t))}},t.prototype._activate=function(){if(!this.programData.program){this.programData.program=this._stage.context.createProgram();var t=(new Jt).assemble("part vertex 1\n"+this.programData.vertexString+"endpart").vertex,e=(new Jt).assemble("part fragment 1\n"+this.programData.fragmentString+"endpart").fragment;this.programData.program.upload(t,e)}if(this._stage.context.setProgram(this.programData.program),this._stage.context.setCulling(this.useBothSides?Gt.NONE:this._defaultCulling,this._view.projection.coordinateSystem),!this.usesTangentSpace&&this.cameraPositionIndex>=0){var n=this._view.projection.transform.matrix3D.position;this.vertexConstantData[this.cameraPositionIndex]=n.x,this.vertexConstantData[this.cameraPositionIndex+1]=n.y,this.vertexConstantData[this.cameraPositionIndex+2]=n.z}this._stage.context.setDepthTest(this.writeDepth&&!this.usesBlending,this.depthCompareMode),this._stage.context.setBlendEquation(this._blendEquation[0],this._blendEquation[1]),this._stage.context.setBlendFactors(this._blendFactor[0],this._blendFactor[1],this._blendFactor[2],this._blendFactor[3]),this.activeElements=null},t.prototype._deactivate=function(){this._stage.context.setDepthTest(!0,Lt.LESS_EQUAL),this.activeElements=null},t.prototype._setRenderState=function(t){var e;if(t.node.container.animator&&t.node.container.animator.setRenderState(this,t),this.usesUVTransform){var n=t.uvMatrix;n?(e=n.rawData,this.vertexConstantData[this.uvMatrixIndex]=e[0],this.vertexConstantData[this.uvMatrixIndex+1]=e[2],this.vertexConstantData[this.uvMatrixIndex+3]=e[4],this.vertexConstantData[this.uvMatrixIndex+4]=e[1],this.vertexConstantData[this.uvMatrixIndex+5]=e[3],this.vertexConstantData[this.uvMatrixIndex+7]=e[5]):(this.vertexConstantData[this.uvMatrixIndex]=1,this.vertexConstantData[this.uvMatrixIndex+1]=0,this.vertexConstantData[this.uvMatrixIndex+3]=0,this.vertexConstantData[this.uvMatrixIndex+4]=0,this.vertexConstantData[this.uvMatrixIndex+5]=1,this.vertexConstantData[this.uvMatrixIndex+7]=0)}if(this.usesColorTransform){var i=t.node.getColorTransform();i?(e=i._rawData,this.fragmentConstantData[this.colorTransformIndex]=e[0],this.fragmentConstantData[this.colorTransformIndex+1]=e[1],this.fragmentConstantData[this.colorTransformIndex+2]=e[2],this.fragmentConstantData[this.colorTransformIndex+3]=e[3],this.fragmentConstantData[this.colorTransformIndex+4]=e[4]/255,this.fragmentConstantData[this.colorTransformIndex+5]=e[5]/255,this.fragmentConstantData[this.colorTransformIndex+6]=e[6]/255,this.fragmentConstantData[this.colorTransformIndex+7]=e[7]/255):(this.fragmentConstantData[this.colorTransformIndex]=1,this.fragmentConstantData[this.colorTransformIndex+1]=1,this.fragmentConstantData[this.colorTransformIndex+2]=1,this.fragmentConstantData[this.colorTransformIndex+3]=1,this.fragmentConstantData[this.colorTransformIndex+4]=0,this.fragmentConstantData[this.colorTransformIndex+5]=0,this.fragmentConstantData[this.colorTransformIndex+6]=0,this.fragmentConstantData[this.colorTransformIndex+7]=0)}if(this.sceneNormalMatrixIndex>=0&&this.sceneNormalMatrix.copyFrom(t.node.getInverseMatrix3D()),this.usesTangentSpace&&this.cameraPositionIndex>=0){t.node.getInverseMatrix3D().copyRawDataTo(this._pInverseSceneMatrix);var r=this._view.projection.transform.matrix3D.position,o=r.x,a=r.y,s=r.z;this.vertexConstantData[this.cameraPositionIndex]=this._pInverseSceneMatrix[0]*o+this._pInverseSceneMatrix[4]*a+this._pInverseSceneMatrix[8]*s+this._pInverseSceneMatrix[12],this.vertexConstantData[this.cameraPositionIndex+1]=this._pInverseSceneMatrix[1]*o+this._pInverseSceneMatrix[5]*a+this._pInverseSceneMatrix[9]*s+this._pInverseSceneMatrix[13],this.vertexConstantData[this.cameraPositionIndex+2]=this._pInverseSceneMatrix[2]*o+this._pInverseSceneMatrix[6]*a+this._pInverseSceneMatrix[10]*s+this._pInverseSceneMatrix[14]}},t.prototype.invalidateProgram=function(){this._invalidProgram=!0},t.prototype.dispose=function(){this._programData.dispose(),this._programData=null,this._registerCache.dispose(),this._registerCache=null,this._sharedRegisters=null},t.prototype._updateProgram=function(){if(this._invalidProgram=!1,this._sharedRegisters=new Fi,this._registerCache=new qe(this.profile),this.reset(),this._includeDependencies(),this._initRegisterIndices(),this._compileDependencies(),this._vertexCode+=this._pass._getVertexCode(this._registerCache,this._sharedRegisters),this._fragmentCode+=this._pass._getFragmentCode(this._registerCache,this._sharedRegisters),this._postAnimationFragmentCode+=this._pass._getPostAnimationFragmentCode(this._registerCache,this._sharedRegisters),this.usesPremultipliedAlpha){var t=this._sharedRegisters.shadedTarget;this._postAnimationFragmentCode+="mul ".concat(t,".xyz, ").concat(t,", ").concat(t,".w\n")}this._postAnimationFragmentCode+="mov ".concat(this._registerCache.fragmentOutputRegister,", ").concat(this._sharedRegisters.shadedTarget,"\n"),this._registerCache.removeFragmentTempUsage(this._sharedRegisters.shadedTarget),this._compileAnimationCode(),this._initConstantData();var e=this._stage.getProgramData(this._animationVertexCode+this._vertexCode,this._fragmentCode+this._animationFragmentCode+this._postAnimationFragmentCode);this._programData!=e&&(this._programData&&this._programData.dispose(),this._programData=e,e.usages++)},t.prototype._initRegisterIndices=function(){this.commonsDataIndex=-1,this.cameraPositionIndex=-1,this.curvesIndex=-1,this.uvIndex=-1,this.uvMatrixIndex=-1,this.colorTransformIndex=-1,this.secondaryUVIndex=-1,this.normalIndex=-1,this.colorBufferIndex=-1,this.tangentIndex=-1,this.sceneMatrixIndex=-1,this.sceneNormalMatrixIndex=-1,this.jointIndexIndex=-1,this.jointWeightIndex=-1,this.imageIndices.length=0,this._sharedRegisters.animatedPosition=this._registerCache.getFreeVertexVectorTemp(),this._registerCache.addVertexTempUsages(this._sharedRegisters.animatedPosition,1),this._sharedRegisters.animatableAttributes.push(this._registerCache.getFreeVertexAttribute()),this._sharedRegisters.animationTargetRegisters.push(this._sharedRegisters.animatedPosition),this._vertexCode="",this._fragmentCode="",this._postAnimationFragmentCode="",(this.usesCommonData||this.normalDependencies>0)&&(this._sharedRegisters.commons=this._registerCache.getFreeFragmentConstant(),this.commonsDataIndex=4*this._sharedRegisters.commons.index),(this.tangentDependencies>0||this.outputsNormals)&&(this._sharedRegisters.tangentInput=this._registerCache.getFreeVertexAttribute(),this.tangentIndex=this._sharedRegisters.tangentInput.index,this._sharedRegisters.animatedTangent=this._registerCache.getFreeVertexVectorTemp(),this._registerCache.addVertexTempUsages(this._sharedRegisters.animatedTangent,1),this.usesTangentSpace&&(this._sharedRegisters.bitangent=this._registerCache.getFreeVertexVectorTemp(),this._registerCache.addVertexTempUsages(this._sharedRegisters.bitangent,1)),this._sharedRegisters.animatableAttributes.push(this._sharedRegisters.tangentInput),this._sharedRegisters.animationTargetRegisters.push(this._sharedRegisters.animatedTangent)),this.normalDependencies>0&&(this._sharedRegisters.normalInput=this._registerCache.getFreeVertexAttribute(),this.normalIndex=this._sharedRegisters.normalInput.index,this._sharedRegisters.animatedNormal=this._registerCache.getFreeVertexVectorTemp(),this._registerCache.addVertexTempUsages(this._sharedRegisters.animatedNormal,1),this._sharedRegisters.animatableAttributes.push(this._sharedRegisters.normalInput),this._sharedRegisters.animationTargetRegisters.push(this._sharedRegisters.animatedNormal)),this.uvDependencies>0&&(this._sharedRegisters.uvInput=this._registerCache.getFreeVertexAttribute(),this.uvIndex=this._sharedRegisters.uvInput.index,this.usesUVTransform||(this._sharedRegisters.animatedUV=this._registerCache.getFreeVertexVectorTemp(),this._registerCache.addVertexTempUsages(this._sharedRegisters.animatedUV,1))),this._sharedRegisters.shadedTarget=this._registerCache.getFreeFragmentVectorTemp(),this._registerCache.addFragmentTempUsages(this._sharedRegisters.shadedTarget,1)},t.prototype._compileDependencies=function(){this.colorDependencies>0&&this._compileColorCode(),this.globalPosDependencies>0&&this._compileGlobalPositionCode(),this.usesPositionFragment&&this._compilePositionCode(),this.usesCurves&&this._compileCurvesCode(),this.usesColorTransform&&this._compileColorTransformCode(),this.uvDependencies>0&&this._compileUVCode(),this.secondaryUVDependencies>0&&this._compileSecondaryUVCode(),this.normalDependencies>0&&this._compileNormalCode(),this.viewDirDependencies>0&&this._compileViewDirCode(),this._vertexCode+=this._renderElements._getVertexCode(this,this._registerCache,this._sharedRegisters),this._fragmentCode+=this._renderElements._getFragmentCode(this,this._registerCache,this._sharedRegisters)},t.prototype._initConstantData=function(){var t=this._registerCache,e=this._numUsedVertexConstants=t.numUsedVertexConstants,n=this._numUsedFragmentConstants=t.numUsedFragmentConstants;if(this._numUsedStreams=t.numUsedStreams,this._numUsedTextures=t.numUsedTextures,this.vertexConstantData&&this.vertexConstantData.length===4*e||(this.vertexConstantData=new Float32Array(4*e)),this.fragmentConstantData&&this.fragmentConstantData.length===4*n||(this.fragmentConstantData=new Float32Array(4*this._registerCache.numUsedFragmentConstants)),this.viewMatrixIndex>=0){var i=new Float32Array(this.vertexConstantData.buffer,4*this.viewMatrixIndex,16);this.viewMatrix?this.viewMatrix._rawData=i:this.viewMatrix=new U(i)}else this.viewMatrix&&(this.viewMatrix=null);if(this.sceneMatrixIndex>=0){i=new Float32Array(this.vertexConstantData.buffer,4*this.sceneMatrixIndex,16);this.sceneMatrix?this.sceneMatrix._rawData=i:this.sceneMatrix=new U(i)}else this.sceneMatrix&&(this.sceneMatrix=null);if(this.commonsDataIndex>=0&&(this.fragmentConstantData[this.commonsDataIndex]=.5,this.fragmentConstantData[this.commonsDataIndex+1]=0,this.fragmentConstantData[this.commonsDataIndex+2]=1/255,this.fragmentConstantData[this.commonsDataIndex+3]=1),this.uvMatrixIndex>=0&&(this.vertexConstantData[this.uvMatrixIndex]=1,this.vertexConstantData[this.uvMatrixIndex+1]=0,this.vertexConstantData[this.uvMatrixIndex+2]=0,this.vertexConstantData[this.uvMatrixIndex+3]=0,this.vertexConstantData[this.uvMatrixIndex+4]=0,this.vertexConstantData[this.uvMatrixIndex+5]=1,this.vertexConstantData[this.uvMatrixIndex+6]=0,this.vertexConstantData[this.uvMatrixIndex+7]=0),this.colorTransformIndex>=0&&(this.fragmentConstantData[this.colorTransformIndex]=1,this.fragmentConstantData[this.colorTransformIndex+1]=1,this.fragmentConstantData[this.colorTransformIndex+2]=1,this.fragmentConstantData[this.colorTransformIndex+3]=1,this.fragmentConstantData[this.colorTransformIndex+4]=0,this.fragmentConstantData[this.colorTransformIndex+5]=0,this.fragmentConstantData[this.colorTransformIndex+6]=0,this.fragmentConstantData[this.colorTransformIndex+7]=0),this.sceneNormalMatrixIndex>=0){i=new Float32Array(this.vertexConstantData.buffer,4*this.sceneNormalMatrixIndex,16);this.sceneNormalMatrix?this.sceneNormalMatrix._rawData=i:this.sceneNormalMatrix=new U(i)}else this.sceneNormalMatrix&&(this.sceneNormalMatrix=null);this.cameraPositionIndex>=0&&(this.vertexConstantData[this.cameraPositionIndex+3]=1),this._pass._initConstantData(),this._usesAnimation&&this._renderMaterial.animationSet.doneAGALCode(this)},t.prototype._compileColorCode=function(){this._sharedRegisters.colorInput=this._registerCache.getFreeVertexAttribute(),this.colorBufferIndex=this._sharedRegisters.colorInput.index,this._sharedRegisters.colorVarying=this._registerCache.getFreeVarying(),this._vertexCode+="mov ".concat(this._sharedRegisters.colorVarying,", ").concat(this._sharedRegisters.colorInput,"\n")},t.prototype._compileGlobalPositionCode=function(){var t=this._sharedRegisters.globalPositionVertex=this._registerCache.getFreeVertexVectorTemp();this._registerCache.addVertexTempUsages(t,this.globalPosDependencies);var e=this._registerCache.getFreeVertexConstant();this._registerCache.getFreeVertexConstant(),this._registerCache.getFreeVertexConstant(),this._registerCache.getFreeVertexConstant(),this.sceneMatrixIndex=4*e.index;var n=this._sharedRegisters;this._vertexCode+="m44 ".concat(n.globalPositionVertex,", ").concat(n.animatedPosition,", ").concat(e,"\n"),this.usesGlobalPosFragment&&(n.globalPositionVarying=this._registerCache.getFreeVarying(),this._vertexCode+="mov ".concat(n.globalPositionVarying,", ").concat(n.globalPositionVertex,"\n"))},t.prototype._compilePositionCode=function(){var t=this._sharedRegisters;t.positionVarying=this._registerCache.getFreeVarying(),this._vertexCode+="mov ".concat(t.positionVarying,", ").concat(t.animatedPosition,"\n")},t.prototype._compileCurvesCode=function(){var t=this._sharedRegisters;t.curvesInput=this._registerCache.getFreeVertexAttribute(),this.curvesIndex=t.curvesInput.index,t.curvesVarying=this._registerCache.getFreeVarying(),this._vertexCode+="mov "+t.curvesVarying+", "+t.curvesInput+"\n";var e=this._registerCache.getFreeFragmentSingleTemp();this._fragmentCode+="mul "+e+", "+t.curvesVarying+".y, "+t.curvesVarying+".y\nsub "+e+", "+e+", "+t.curvesVarying+".z\nmul "+e+", "+e+", "+t.curvesVarying+".x\nkil "+e+"\n"},t.prototype._compileColorTransformCode=function(){var t=this._registerCache.getFreeFragmentConstant(),e=this._registerCache.getFreeFragmentConstant(),n=this._sharedRegisters.shadedTarget;this.colorTransformIndex=4*t.index,this._postAnimationFragmentCode+="mul "+n+", "+n+", "+t+"\n",this._postAnimationFragmentCode+="add "+n+", "+n+", "+e+"\n"},t.prototype._compileUVCode=function(){var t=this._sharedRegisters;if(t.uvVarying=this._registerCache.getFreeVarying(),this.usesUVTransform){var e=this._registerCache.getFreeVertexConstant(),n=this._registerCache.getFreeVertexConstant();this.uvMatrixIndex=4*e.index,this._vertexCode+="dp4 "+t.uvVarying+".x, "+t.uvInput+", "+e+"\ndp4 "+t.uvVarying+".y, "+t.uvInput+", "+n+"\nmov "+t.uvVarying+".zw, "+t.uvInput+".zw \n"}else this._vertexCode+="mov "+t.uvVarying+", "+t.animatedUV+"\n"},t.prototype._compileSecondaryUVCode=function(){var t=this._registerCache.getFreeVertexAttribute(),e=this._sharedRegisters;this.secondaryUVIndex=t.index,e.secondaryUVVarying=this._registerCache.getFreeVarying(),this._vertexCode+="mov "+e.secondaryUVVarying+", "+t+"\n"},t.prototype._compileViewDirCode=function(){var t=this._registerCache.getFreeVertexConstant(),e=this._sharedRegisters;if(e.viewDirVarying=this._registerCache.getFreeVarying(),e.viewDirFragment=this._registerCache.getFreeFragmentVectorTemp(),this._registerCache.addFragmentTempUsages(e.viewDirFragment,this.viewDirDependencies),this.cameraPositionIndex=4*t.index,this.usesTangentSpace){var n=this._registerCache.getFreeVertexVectorTemp();this._vertexCode+="sub "+n+", "+t+", "+e.animatedPosition+"\nm33 "+e.viewDirVarying+".xyz, "+n+", "+e.animatedTangent+"\nmov "+e.viewDirVarying+".w, "+e.animatedPosition+".w\n"}else this._vertexCode+="sub "+e.viewDirVarying+", "+t+", "+e.globalPositionVertex+"\n",this._registerCache.removeVertexTempUsage(this._sharedRegisters.globalPositionVertex);this._fragmentCode+="nrm "+e.viewDirFragment+".xyz, "+e.viewDirVarying+"\nmov "+e.viewDirFragment+".w,   "+e.viewDirVarying+".w\n"},t.prototype._compileNormalCode=function(){var t,e=this._sharedRegisters;if(e.normalFragment=this._registerCache.getFreeFragmentVectorTemp(),this._registerCache.addFragmentTempUsages(e.normalFragment,this.normalDependencies),this.outputsNormals&&!this.outputsTangentNormals)return this._vertexCode+=this._pass._getNormalVertexCode(this._registerCache,e),void(this._fragmentCode+=this._pass._getNormalFragmentCode(this._registerCache,e));if(this.outputsNormals&&this.usesTangentSpace||((t=new Array(3))[0]=this._registerCache.getFreeVertexConstant(),t[1]=this._registerCache.getFreeVertexConstant(),t[2]=this._registerCache.getFreeVertexConstant(),this._registerCache.getFreeVertexConstant(),this.sceneNormalMatrixIndex=4*t[0].index,e.normalVarying=this._registerCache.getFreeVarying()),this.outputsNormals)if(this.usesTangentSpace)this._vertexCode+="nrm "+e.animatedNormal+".xyz, "+e.animatedNormal+"\nnrm "+e.animatedTangent+".xyz, "+e.animatedTangent+"\ncrs "+e.bitangent+".xyz, "+e.animatedNormal+", "+e.animatedTangent+"\n",this._fragmentCode+=this._pass._getNormalFragmentCode(this._registerCache,e);else{e.tangentVarying=this._registerCache.getFreeVarying(),e.bitangentVarying=this._registerCache.getFreeVarying();var n=this._registerCache.getFreeVertexVectorTemp();this._vertexCode+="m33 "+n+".xyz, "+e.animatedNormal+", "+t[0]+"\nnrm "+e.animatedNormal+".xyz, "+n+"\nm33 "+n+".xyz, "+e.animatedTangent+", "+t[0]+"\nnrm "+e.animatedTangent+".xyz, "+n+"\nmov "+e.tangentVarying+".x, "+e.animatedTangent+".x  \nmov "+e.tangentVarying+".z, "+e.animatedNormal+".x  \nmov "+e.tangentVarying+".w, "+e.normalInput+".w  \nmov "+e.bitangentVarying+".x, "+e.animatedTangent+".y  \nmov "+e.bitangentVarying+".z, "+e.animatedNormal+".y  \nmov "+e.bitangentVarying+".w, "+e.normalInput+".w  \nmov "+e.normalVarying+".x, "+e.animatedTangent+".z  \nmov "+e.normalVarying+".z, "+e.animatedNormal+".z  \nmov "+e.normalVarying+".w, "+e.normalInput+".w  \ncrs "+n+".xyz, "+e.animatedNormal+", "+e.animatedTangent+"\nmov "+e.tangentVarying+".y, "+n+".x    \nmov "+e.bitangentVarying+".y, "+n+".y  \nmov "+e.normalVarying+".y, "+n+".z    \n",this._registerCache.removeVertexTempUsage(e.animatedTangent);var i=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(i,1);var r=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(r,1);var o=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(o,1),this._fragmentCode+="nrm "+i+".xyz, "+e.tangentVarying+"\nmov "+i+".w, "+e.tangentVarying+".w\t\nnrm "+r+".xyz, "+e.bitangentVarying+"\nnrm "+o+".xyz, "+e.normalVarying+"\n",this._fragmentCode+=this._pass._getNormalFragmentCode(this._registerCache,e)+"m33 "+e.normalFragment+".xyz, "+e.normalFragment+", "+i+"\nmov "+e.normalFragment+".w, "+e.normalVarying+".w\n",this._registerCache.removeFragmentTempUsage(r),this._registerCache.removeFragmentTempUsage(i),this._registerCache.removeFragmentTempUsage(o)}else this._vertexCode+="m33 "+e.normalVarying+".xyz, "+e.animatedNormal+", "+t[0]+"\nmov "+e.normalVarying+".w, "+e.animatedNormal+".w\n",this._fragmentCode+="nrm "+e.normalFragment+".xyz, "+e.normalVarying+"\nmov "+e.normalFragment+".w, "+e.normalVarying+".w\n",this.tangentDependencies>0&&(e.tangentVarying=this._registerCache.getFreeVarying(),this._vertexCode+="m33 "+e.tangentVarying+".xyz, "+e.animatedTangent+", "+t[0]+"\nmov "+e.tangentVarying+".w, "+e.animatedTangent+".w\n");this.usesTangentSpace||this._registerCache.removeVertexTempUsage(e.animatedNormal)},t.prototype._compileAnimationCode=function(){this._animationVertexCode="",this._animationFragmentCode="";var t=this._sharedRegisters;if(this._usesAnimation){var e=this._renderMaterial.animationSet;this._animationVertexCode+=e.getAGALVertexCode(this,this._registerCache,t),this.uvDependencies>0&&!this.usesUVTransform&&(this._animationVertexCode+=e.getAGALUVCode(this,this._registerCache,t)),this.usesFragmentAnimation&&(this._animationFragmentCode+=e.getAGALFragmentCode(this,this._registerCache,t.shadedTarget))}else{for(var n=t.animatableAttributes.length,i=0;i<n;++i)this._animationVertexCode+="mov "+t.animationTargetRegisters[i]+", "+t.animatableAttributes[i]+"\n";this.uvDependencies>0&&!this.usesUVTransform&&(this._animationVertexCode+="mov "+t.animatedUV+","+t.uvInput+"\n")}},t.prototype.setVertexConst=function(t,e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),t*=4,this.vertexConstantData[t++]=e,this.vertexConstantData[t++]=n,this.vertexConstantData[t++]=i,this.vertexConstantData[t]=r},t.prototype.setVertexConstFromArray=function(t,e){t*=4;for(var n=0;n<e.length;n++)this.vertexConstantData[t++]=e[n]},t.prototype.setVertexConstFromMatrix=function(t,e){t*=4;var n=e._rawData;this.vertexConstantData[t++]=n[0],this.vertexConstantData[t++]=n[4],this.vertexConstantData[t++]=n[8],this.vertexConstantData[t++]=n[12],this.vertexConstantData[t++]=n[1],this.vertexConstantData[t++]=n[5],this.vertexConstantData[t++]=n[9],this.vertexConstantData[t++]=n[13],this.vertexConstantData[t++]=n[2],this.vertexConstantData[t++]=n[6],this.vertexConstantData[t++]=n[10],this.vertexConstantData[t++]=n[14],this.vertexConstantData[t++]=n[3],this.vertexConstantData[t++]=n[7],this.vertexConstantData[t++]=n[11],this.vertexConstantData[t]=n[15]},t.prototype.setFragmentConst=function(t,e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),t*=4,this.fragmentConstantData[t++]=e,this.fragmentConstantData[t++]=n,this.fragmentConstantData[t++]=i,this.fragmentConstantData[t]=r},t._abstractionClassPool=new Object,t}(),Tr=function(t){function e(e,n){var i=t.call(this,e)||this;return i._pass=n,i}return o(e,t),Object.defineProperty(e.prototype,"pass",{get:function(){return this._pass},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._pass)},e.INVALIDATE="invalidatePass",e}(c),Pr=function(t){function e(e,n){var i=t.call(this,e)||this;return i._material=n,i}return o(e,t),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._material)},e.INVALIDATE_TEXTURES="invalidateTextures",e.INVALIDATE_PASSES="invalidatePasses",e}(c),Br=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._owners=new Array,i._passes=new Array,i._invalidAnimation=!0,i._invalidRender=!0,i._invalidImages=!0,i._imageIndices=new Object,i._usesAnimation=!1,i.images=new Array,i.samplers=new Array,i.requiresBlending=!1,i.materialID=e.id,i._material=e,i._renderElements=n,i._stage=n.stage,i._renderer=n.renderer,i.renderElements.addEventListener(h.CLEAR,i._onClearDelegate),i._onInvalidateTexturesDelegate=function(t){return i.onInvalidateTextures(t)},i._onInvalidatePassesDelegate=function(t){return i.onInvalidatePasses(t)},i._material.addEventListener(Pr.INVALIDATE_TEXTURES,i._onInvalidateTexturesDelegate),i._material.addEventListener(Pr.INVALIDATE_PASSES,i._onInvalidatePassesDelegate),i._onPassInvalidateDelegate=function(t){return i.onPassInvalidate(t)},i}return o(e,t),Object.defineProperty(e.prototype,"animationSet",{get:function(){return this._animationSet},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numImages",{get:function(){return this._invalidImages&&this._updateImages(),this._numImages},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderOrderId",{get:function(){return this._invalidRender&&this._pUpdateRender(),this._invalidAnimation&&this._updateAnimation(),this._renderOrderId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numPasses",{get:function(){return this._invalidAnimation&&this._updateAnimation(),this._passes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._material.style},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderElements",{get:function(){return this._renderElements},enumerable:!1,configurable:!0}),e.prototype.activatePass=function(t){var e;for(this._activePass=this._passes[t],e=this._activePass.shader.numUsedStreams;e<this._stage.numUsedStreams;e++)this._stage.context.setVertexBufferAt(e,null);for(e=this._activePass.shader.numUsedTextures;e<this._stage.numUsedTextures;e++)this._stage.context.setTextureAt(e,null);this._activePass._activate(this._renderer.view)},e.prototype.deactivatePass=function(){this._activePass._deactivate(),this._stage.numUsedStreams=this._activePass.shader.numUsedStreams,this._stage.numUsedTextures=this._activePass.shader.numUsedTextures},e.prototype.addOwner=function(t){var e;this._owners.push(t);var n=t.node.container.animator;if(n&&(e=n.animationSet),t.node.container.animator){if(this._animationSet&&e!=this._animationSet)throw new Error("A Material instance cannot be shared across material owners with different animation sets");this._animationSet!=e&&(this._animationSet=e,this._invalidAnimation=!0)}},e.prototype.removeOwner=function(t){this._owners&&(this._owners.splice(this._owners.indexOf(t),1),this._owners.length||this.onClear(null))},e.prototype.getImageIndex=function(t,e){return void 0===e&&(e=0),this._invalidImages&&this._updateImages(),this._imageIndices[t.id][e]},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._renderElements.removeEventListener(h.CLEAR,this._onClearDelegate);for(var n=this._passes.length,i=0;i<n;i++)this._passes[i].removeEventListener(Tr.INVALIDATE,this._onPassInvalidateDelegate),this._passes[i].dispose();this._passes=null,this._material.removeEventListener(Pr.INVALIDATE_TEXTURES,this._onInvalidateTexturesDelegate),this._material.removeEventListener(Pr.INVALIDATE_PASSES,this._onInvalidatePassesDelegate),this._animationSet=null,this._material=null,this._renderElements=null,this._stage=null,this._owners=null},e.prototype.onInvalidatePasses=function(t){for(var e=this._passes.length,n=0;n<e;n++)this._passes[n].invalidate();this._invalidAnimation=!0,this._invalidImages=!0},e.prototype.onPassInvalidate=function(t){this._invalidAnimation=!0},e.prototype.onInvalidateTextures=function(t){for(var e=this._owners,n=e.length,i=0;i<n;i++)e[i]._onInvalidateStyle()},e.prototype.onInvalidate=function(e){t.prototype.onInvalidate.call(this,e),this._invalidRender=!0,this._invalidAnimation=!0,this._renderer!=this._material&&this._renderer.invalidate()},e.prototype._pClearPasses=function(){for(var t=this._passes.length,e=0;e<t;++e)this._passes[e].removeEventListener(Tr.INVALIDATE,this._onPassInvalidateDelegate);this._passes.length=0},e.prototype._pAddPass=function(t){this._passes.push(t),t.addEventListener(Tr.INVALIDATE,this._onPassInvalidateDelegate)},e.prototype._pRemovePass=function(t){t.removeEventListener(Tr.INVALIDATE,this._onPassInvalidateDelegate),this._passes.splice(this._passes.indexOf(t),1)},e.prototype._pUpdateRender=function(){this._invalidImages&&this._updateImages(),this._invalidRender=!1},e.prototype._updateAnimation=function(){this._invalidAnimation=!1;for(var t,e=this._getEnabledGPUAnimation(),n=0,i=1,r=this._passes.length,o=0;o<r;o++)(t=this._passes[o].shader).usesAnimation=e,t._programData?n+=t._programData.id*i:n+=t.programData.id*i,i*=1e3;if(this._usesAnimation!=e){this._usesAnimation=e;for(var a=this._owners,s=a.length,l=0;l<s;l++)a[l]._onInvalidateElements()}this._renderOrderId=n},e.prototype._updateImages=function(){this._invalidImages=!1;for(var t,e,n,i,r=this._material.style,o=this._material.getNumTextures(),a=0,s=0;s<o;s++){e=(t=this._material.getTextureAt(s)).getNumImages(),n=this._imageIndices[t.id]=new Array;for(var l=0;l<e;l++)i=t.getImageAt(l)||(null==r?void 0:r.getImageAt(t,l))||he.getDefaultImage2D(),this.images[a]=i.getAbstraction(this._stage),this.samplers[a]=t.getSamplerAt(l)||(null==r?void 0:r.getSamplerAt(t,l))||he.getDefaultImageSampler(),n[l]=a++}this._numImages=a},e.prototype._getEnabledGPUAnimation=function(){if(this._animationSet){this._animationSet.resetGPUCompatibility();for(var t=this._owners,e=t.length,n=this._passes.length,i=void 0,r=0;r<n;r++){(i=this._passes[r].shader).usesAnimation=!1;for(var o=0;o<e;o++)t[o].node.container.animator&&t[o].node.container.animator.testGPUCompatibility(i)}return!this._animationSet.usesCPU}return!1},e}(J),Or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"shader",{get:function(){return this._shader},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numUsedStreams",{get:function(){return this._shader.numUsedStreams},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numUsedTextures",{get:function(){return this._shader.numUsedTextures},enumerable:!1,configurable:!0}),e.prototype._includeDependencies=function(t){t.alphaThreshold=this._material.alphaThreshold,t.useImageRect=this._material.imageRect,t.usesCurves=this._material.curves,t.useBothSides=this._material.bothSides,t.usesUVTransform=this._material.animateUVs,t.usesColorTransform=this._material.useColorTransform},e.prototype.invalidate=function(){this._shader.invalidateProgram(),this.dispatchEvent(new Tr(Tr.INVALIDATE,this))},e.prototype.dispose=function(){this._shader&&(this._shader.dispose(),this._shader=null)},e.prototype._setRenderState=function(t){this._shader._setRenderState(t)},e.prototype._activate=function(){this._shader._activate()},e.prototype._deactivate=function(){this._shader._deactivate()},e.prototype._initConstantData=function(){},e.prototype._getVertexCode=function(t,e){return""},e.prototype._getFragmentCode=function(t,e){return""},e.prototype._getPostAnimationFragmentCode=function(t,e){return""},e.prototype._getNormalVertexCode=function(t,e){return""},e.prototype._getNormalFragmentCode=function(t,e){return""},e}(Br),Mr=function(t){function e(e){var n=t.call(this)||this;return n.renderer=e,n.stage=e.view.stage,n._materialClassPool=e.group.materialClassPool,n}return o(e,t),e.prototype.clear=function(){this.dispatchEvent(new h(h.CLEAR,this))},e.prototype.requestAbstraction=function(t){return this._materialClassPool[t.assetType]},e.prototype._includeDependencies=function(t){},e.prototype._getVertexCode=function(t,e,n){return""},e.prototype._getFragmentCode=function(t,e,n){return""},e}(_),Lr=function(t){function e(e,n){var i=t.call(this,e)||this;return i._renderable=n,i}return o(e,t),Object.defineProperty(e.prototype,"renderable",{get:function(){return this._renderable},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._renderable)},e.INVALIDATE_MATERIAL="invalidateMaterial",e.INVALIDATE_ELEMENTS="invalidateElements",e.INVALIDATE_STYLE="invalidateStyle",e}(c),Rr=function(){function t(){}return t.getDefaultTextureMaterial=function(){return this._defaultTextureMaterial||this.createDefaultTextureMaterial(),this._defaultTextureMaterial},t.getDefaultCubeTextureMaterial=function(){return this._defaultCubeTextureMaterial||this.createDefaultCubeTextureMaterial(),this._defaultCubeTextureMaterial},t.getDefaultColorMaterial=function(){return t._defaultColorMaterial||t.createDefaultColorMaterial(),t._defaultColorMaterial},t.createDefaultTextureMaterial=function(){this._defaultTextureMaterial=new this._defaultMaterialClass(he.getDefaultImage2D()),this._defaultTextureMaterial.name="defaultTextureMaterial"},t.createDefaultCubeTextureMaterial=function(){this._defaultCubeTextureMaterial=new this._defaultMaterialClass(he.getDefaultImageCube()),this._defaultCubeTextureMaterial.name="defaultCubeTextureMaterial"},t.createDefaultColorMaterial=function(){this._defaultColorMaterial=new this._defaultMaterialClass(16777215),this._defaultColorMaterial.name="defaultColorMaterial"},t.setDefaultMaterialClass=function(t){this._defaultMaterialClass=t},t}(),Nr=!0,Fr=!0,kr=2,Ur=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._materialDirty=!0,i._elementsDirty=!0,i._styleDirty=!0,i._images=new Array,i._samplers=new Array,i._count=0,i._offset=0,i._maskId=-1,i._onInvalidateElementsDelegate=function(t){return i._onInvalidateElements(t)},i._onInvalidateMaterialDelegate=function(t){return i._onInvalidateMaterial(t)},i._onInvalidateStyleDelegate=function(t){return i._onInvalidateStyle(t)},i.node=n.node,i._stage=n.stage,n.addRenderable(i),i._asset.addEventListener(Lr.INVALIDATE_ELEMENTS,i._onInvalidateElementsDelegate),i._asset.addEventListener(Lr.INVALIDATE_MATERIAL,i._onInvalidateMaterialDelegate),i._asset.addEventListener(Lr.INVALIDATE_STYLE,i._onInvalidateStyleDelegate),i}return o(e,t),Object.defineProperty(e.prototype,"images",{get:function(){return this._styleDirty&&this._updateStyle(),this._images},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"samplers",{get:function(){return this._styleDirty&&this._updateStyle(),this._samplers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvMatrix",{get:function(){return this._styleDirty&&this._updateStyle(),this._uvMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maskId",{get:function(){return this._maskId},set:function(t){t!==this._maskId&&this._updateMaskHack(t>=0),this._maskId=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageElements",{get:function(){return this._elementsDirty&&this._updateElements(),this._stageElements},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderMaterial",{get:function(){return this._materialDirty&&this._updateMaterial(),this._renderMaterial},enumerable:!1,configurable:!0}),e.prototype._updateMaskHack=function(t){},e.prototype.executeRender=function(t,e,n,i){var r=this._renderMaterial._activePass;r._setRenderState(this);var o=r.shader,a=this.stageElements;o.activeElements!=a&&(o.activeElements=a,a._setRenderState(this,o)),this._stageElements.draw(this,o,this._count,this._offset)},e.prototype.onClear=function(e){this._asset.removeEventListener(Lr.INVALIDATE_ELEMENTS,this._onInvalidateElementsDelegate),this._asset.removeEventListener(Lr.INVALIDATE_MATERIAL,this._onInvalidateMaterialDelegate),this._asset.removeEventListener(Lr.INVALIDATE_STYLE,this._onInvalidateStyleDelegate),this._pool.removeRenderable(this),t.prototype.onClear.call(this,e),this.renderSceneTransform=null,this._stage=null,this.next=null,this.maskOwners=null,this._renderMaterial.removeOwner(this),this._renderMaterial=null,this._stageElements=null},e.prototype._onInvalidateElements=function(t){this._elementsDirty=!0},e.prototype._onInvalidateMaterial=function(t){this._materialDirty=!0,this._styleDirty=!0},e.prototype._onInvalidateStyle=function(t){this._styleDirty=!0},e.prototype._getStageElements=function(){throw new u},e.prototype._getRenderMaterial=function(){throw new u},e.prototype._getStyle=function(){throw new u},e.prototype._updateElements=function(){this._stageElements=this._getStageElements(),this._elementsDirty=!1},e.prototype._updateMaterial=function(){var t=this._getRenderMaterial();this._renderMaterial!=t&&(this._renderMaterial&&this._renderMaterial.removeOwner(this),this._renderMaterial=t,this._renderMaterial.addOwner(this)),this._materialDirty=!1},e.prototype._updateStyle=function(){var t=this._getStyle();this._materialDirty&&this._updateMaterial();var e=this._renderMaterial.numImages,n=this._renderMaterial.material;this._images.length=e,this._samplers.length=e,this._uvMatrix=t?t.uvMatrix:n.style?n.style.uvMatrix:null;for(var i,r,o,a=this._renderMaterial.material.getNumTextures(),s=0;s<a;s++){e=(i=n.getTextureAt(s)).getNumImages();for(var l=0;l<e;l++)o=this._renderMaterial.getImageIndex(i,l),r=t?t.getImageAt(i,l):null,this._images[o]=r?r.getAbstraction(this._stage):null,this._samplers[o]=t?t.getSamplerAt(i,l):null}this._styleDirty=!1},e.prototype.getDefaultMaterial=function(){return Rr.getDefaultTextureMaterial()},e}(J),Vr=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._renderables=[],i.id=f.Next(),i.node=e.parent,i.stage=n.stage,i._onInvalidateElementsDelegate=function(t){return i._onInvalidateElements(t)},i._onInvalidateMaterialDelegate=function(t){return i._onInvalidateMaterial(t)},i._onInvalidateStyleDelegate=function(t){return i._onInvalidateStyle(t)},i.node.container.addEventListener(Lr.INVALIDATE_ELEMENTS,i._onInvalidateElementsDelegate),i.node.container.addEventListener(Lr.INVALIDATE_MATERIAL,i._onInvalidateMaterialDelegate),i.node.container.addEventListener(Lr.INVALIDATE_STYLE,i._onInvalidateStyleDelegate),i}return o(e,t),e.prototype.onClear=function(e){this.node.container.removeEventListener(Lr.INVALIDATE_ELEMENTS,this._onInvalidateElementsDelegate),this.node.container.removeEventListener(Lr.INVALIDATE_MATERIAL,this._onInvalidateMaterialDelegate),this.node.container.removeEventListener(Lr.INVALIDATE_STYLE,this._onInvalidateStyleDelegate);for(var n=this._renderables.length-1;n>=0;n--)this._renderables[n].onClear(e);t.prototype.onClear.call(this,e)},e.prototype.addRenderable=function(t){this._renderables.push(t)},e.prototype.removeRenderable=function(t){this._renderables.splice(this._renderables.indexOf(t),1)},e.prototype._onInvalidateElements=function(t){},e.prototype._onInvalidateMaterial=function(t){},e.prototype._onInvalidateStyle=function(t){},e.prototype.requestAbstraction=function(t){return e._renderRenderableClassPool[t.assetType]},e.registerRenderable=function(t,n){e._renderRenderableClassPool[n.assetType]=t},e._renderRenderableClassPool=new Object,e}(J),jr=function(t){function e(e,n){var i=t.call(this,e)||this;return i._style=n,i}return o(e,t),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._style)},e.INVALIDATE_PROPERTIES="invalidateProperties",e.INVALIDATE_IMAGES="invalidateImages",e}(c),Gr=function(t){function e(){var e=t.call(this)||this;return e._samplers={},e._images={},e._color=16777215,e._onImageInvalidate=function(t){return e._invalidateImages(t)},e._onImageClear=function(t){return e._clearImages(t)},e}return o(e,t),Object.defineProperty(e.prototype,"sampler",{get:function(){return this._sampler},set:function(t){this._sampler!=t&&(this._sampler=t,this._invalidateProperties())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},set:function(t){this._image!=t&&(this._image&&(this._image.removeEventListener(h.INVALIDATE,this._onImageInvalidate),this._image.removeEventListener(h.CLEAR,this._onImageClear)),this._image=t,this._image&&(this._image.addEventListener(h.INVALIDATE,this._onImageInvalidate),this._image.addEventListener(h.CLEAR,this._onImageClear)),this._invalidateProperties())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvMatrix",{get:function(){return this._uvMatrix},set:function(t){this._uvMatrix!=t&&(this._uvMatrix=t,this._invalidateProperties())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this._invalidateProperties())},enumerable:!1,configurable:!0}),e.prototype.getImageAt=function(t,e){var n;return void 0===e&&(e=0),(null===(n=this._images[t.id])||void 0===n?void 0:n[e])||this._image},e.prototype.getSamplerAt=function(t,e){var n;return void 0===e&&(e=0),(null===(n=this._samplers[t.id])||void 0===n?void 0:n[e])||this._sampler},e.prototype.addImageAt=function(t,e,n){void 0===n&&(n=0),this._images[e.id]||(this._images[e.id]={}),this._images[e.id][n]=t,t.addEventListener(h.INVALIDATE,this._onImageInvalidate),t.addEventListener(h.CLEAR,this._onImageClear),this._invalidateProperties()},e.prototype.addSamplerAt=function(t,e,n){void 0===n&&(n=0),this._samplers[e.id]||(this._samplers[e.id]={}),this._samplers[e.id][n]=t,this._invalidateProperties()},e.prototype.removeImageAt=function(t,e){var n;void 0===e&&(e=0);var i=null===(n=this._images[t.id])||void 0===n?void 0:n[e];i&&(i.removeEventListener(h.INVALIDATE,this._onImageInvalidate),i.removeEventListener(h.CLEAR,this._onImageClear),this._images[t.id][e]=null,this._invalidateProperties())},e.prototype.removeSamplerAt=function(t,e){void 0===e&&(e=0),this._samplers[t.id]&&(this._samplers[t.id][e]=null,this._invalidateProperties())},e.prototype._invalidateProperties=function(){this.dispatchEvent(new jr(jr.INVALIDATE_PROPERTIES,this))},e.prototype._invalidateImages=function(t){this.dispatchEvent(new jr(jr.INVALIDATE_IMAGES,this))},e.prototype._clearImages=function(t){var e=t.asset;if(e.isDisposed)if(this._image==e)this.image=null;else t:for(var n in this._images){var i=this._images[n];for(var r in i)if(i[r]==e){delete i[r];break t}}this._invalidateProperties()},e}(p),Qr=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._texture=e,i._shader=n,i._stage=n._stage,i}return o(e,t),e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._texture=null,this._shader=null,this._stage=null},e.prototype._initVO=function(t){},e.prototype._initConstants=function(){},e.prototype._getFragmentCode=function(t,e,n,i){throw new u},e.prototype._setRenderState=function(t){},e.prototype.activate=function(){},e.prototype.getTextureReg=function(t,e,n){var i=this._shader.imageIndices.indexOf(t);if(-1==i){var r=e.getFreeTextureReg();return n.textures.push(r),this._shader.imageIndices.push(t),r}return n.textures[i]},e}(J),zr=function(t){function e(e,n){var i=t.call(this,e)||this;return i._attributesView=n,i}return o(e,t),Object.defineProperty(e.prototype,"attributesView",{get:function(){return this._attributesView},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._attributesView)},e.INVALIDATE_INDICES="invalidateIndices",e.CLEAR_INDICES="clearIndices",e.INVALIDATE_VERTICES="invalidateVertices",e.CLEAR_VERTICES="clearVertices",e}(c),Hr=function(){function t(){}return t.generateFaceNormals=function(t,e,n,i,r){void 0===r&&(r=0);var o=t.get(i,r),a=e.get(e.count);null==n?n=new Xi(i+r):n.count<i+r&&(n.count=i+r);var s,l,u,c,h,p,d,f,_,g,m,y,A,v,b,x,C,I,E,w=t.stride,S=e.dimensions,D=e.stride,T=n.get(i,r),P=i*w,B=0,O=0;if(3==S)for(B=0;B<P;B+=w)l=a[s=o[B]*D],h=a[s+1],f=a[s+2],u=a[s=o[B+1]*D],p=a[s+1],_=a[s+2],c=a[s=o[B+2]*D],d=a[s+1],x=(y=a[s+2]-f)*(v=p-h)-(m=d-h)*(b=_-f),C=(g=c-l)*b-y*(A=u-l),I=m*A-g*v,E=Math.sqrt(x*x+C*C+I*I),T[O++]=x,T[O++]=C,T[O++]=I,T[O++]=E;else if(2==S)for(B=0;B<P;B+=w)T[O++]=0,T[O++]=0,T[O++]=1,T[O++]=1;return n},t.generateNormals=function(t,e,n,i){var r=t.get(t.count),o=e.get(e.count);null==n&&(n=new Hi(i));var a,s,l=t.dimensions,u=n.stride,c=n.get(n.count),h=n.count*u;for(a=0;a<h;a+=u)c[a]=0,c[a+1]=0,c[a+2]=0;h=t.count*l;var p,d,f,_,g=0,m=1,y=2;for(a=0;a<h;a+=l)c[s=r[a]*u]+=o[g],c[s+1]+=o[m],c[s+2]+=o[y],c[s=r[a+1]*u]+=o[g],c[s+1]+=o[m],c[s+2]+=o[y],c[s=r[a+2]*u]+=o[g],c[s+1]+=o[m],c[s+2]+=o[y],g+=4,m+=4,y+=4;for(h=n.count*u,a=0;a<h;a+=u)p=c[a],d=c[a+1],f=c[a+2],_=1/Math.sqrt(p*p+d*d+f*f),c[a]=p*_,c[a+1]=d*_,c[a+2]=f*_;return n},t.generateFaceTangents=function(t,e,n,i,r,o,a){void 0===o&&(o=0);var s=t.get(r,o),l=e.get(e.count),u=n.get(n.count);null==i?i=new Xi(r+o):i.count<r+o&&(i.count=r+o);var c,h,p,d,f,_,g,m,y,A,v,b,x,C,I,E=t.dimensions,w=e.dimensions,S=e.stride,D=n.stride,T=i.get(r,o),P=0,B=r*E;for(P=0;P<B;P+=E)c=s[P],h=s[P+1],p=s[P+2],d=u[c*D+1],g=u[h*D+1]-d,m=u[p*D+1]-d,f=h*S,_=p*S,A=l[d=c*S],x=m*(l[f]-A)-g*(l[_]-A),v=l[d+1],C=m*(l[f+1]-v)-g*(l[_+1]-v),3==w?(b=l[d+2],I=m*(l[f+2]-b)-g*(l[_+2]-b)):I=0,y=1/Math.sqrt(x*x+C*C+I*I),T[P]=y*x,T[P+1]=y*C,T[P+2]=y*I;return i},t.generateTangents=function(t,e,n,i,r){var o=t.get(t.count),a=e.get(e.count),s=n.get(n.count);null==i&&(i=new Hi(r));var l,u,c,h=t.dimensions,p=i.stride,d=i.get(i.count),f=i.count*p;for(l=0;l<f;l+=p)d[l]=0,d[l+1]=0,d[l+2]=0;var _,g,m,y,A=0,v=1,b=2,x=3;for(f=t.count*h,l=0;l<f;l+=h)u=s[x],c=o[l]*p,d[c++]+=a[A]*u,d[c++]+=a[v]*u,d[c]+=a[b]*u,c=o[l+1]*p,d[c++]+=a[A]*u,d[c++]+=a[v]*u,d[c]+=a[b]*u,c=o[l+2]*p,d[c++]+=a[A]*u,d[c++]+=a[v]*u,d[c]+=a[b]*u,A+=3,v+=3,b+=3,x+=4;for(l=0;l<f;l+=p)_=d[l],g=d[l+1],m=d[l+2],y=1/Math.sqrt(_*_+g*g+m*m),d[l]=_*y,d[l+1]=g*y,d[l+2]=m*y;return i},t.generateColors=function(t,e,n,i,r){void 0===r&&(r=0),null==e&&(e=new Gi(n)),e.count<i+r&&(e.count=i+r);for(var o=e.get(i,r),a=e.stride,s=e.count*a,l=0;l<s;l+=a)o[l]=255,o[l+1]=255,o[l+2]=255,o[l+3]=255;return e},t.scale=function(t,e,n,i,r,o){void 0===o&&(o=0),i.count<r+o&&(i.count=r+o);var a,s,l=new Float32Array([t,e,n]),u=i.get(r,o),c=i.stride,h=i.dimensions,p=r*c;for(a=0;a<p;a+=c)for(s=0;s<h;s++)u[a+s]*=l[s];i.invalidate()},t.applyTransformation=function(t,e,n,i,r,o){void 0===o&&(o=0);var a,s,l,u,c,h,p,d=e.get(r,o),f=e.stride;n&&(a=n.get(r,o),s=n.stride),i&&(l=i.get(r,o),u=i.stride);var _,g=new L;(n||i)&&((_=t.clone()).invert(),_.transpose());var m=0,y=0,A=0;for(c=0;c<r;++c)h=m+1,p=m+2,g.x=d[m],g.y=d[h],g.z=d[p],g=t.transformVector(g),d[m]=g.x,d[h]=g.y,d[p]=g.z,m+=f,a&&(h=y+1,p=y+2,g.x=a[y],g.y=a[h],g.z=a[p],(g=_.deltaTransformVector(g)).normalize(),a[y]=g.x,a[h]=g.y,a[p]=g.z,y+=s),l&&(h=A+1,p=A+2,g.x=l[A],g.y=l[h],g.z=l[p],(g=_.deltaTransformVector(g)).normalize(),l[A]=g.x,l[h]=g.y,l[p]=g.z,A+=u);e.invalidate(),n&&n.invalidate(),i&&i.invalidate()},t.getSubIndices=function(e,n,i,r){void 0===r&&(r=0);var o,a=e.attributesBuffer,s=e.length;if(i.length=0,s<t.LIMIT_INDICES&&n<t.LIMIT_VERTS)return a;var l,u,c=e.get(e.count,r),h=new Array,p=t._indexSwap;for(p.length=s,o=0;o<s;o++)p[o]=-1;var d=0,f=r*e.dimensions;for(o=0;o<s+f&&o+1<t.LIMIT_INDICES&&d+1<t.LIMIT_VERTS;)p[l=c[o]]>=0?u=p[l]:(u=d++,p[l]=u,i[u]=l),h[o++]=u;return a=new ki(e.size*e.dimensions,h.length/e.dimensions),(e=e.clone(a)).set(h),a},t.getSubVertices=function(t,e){if(!e.length)return t;var n,i,r=t.stride,o=t.bufferView,a=new Uint8Array(e.length*r),s=0,l=0,u=e.length;for(s=0;s<u;s++)for(n=s*r,i=e[s]*r,l=0;l<r;l++)a[n+l]=o[i+l];return(t=new ki(r,u)).bufferView=a,t},t.tempFloat32x4=new Float32Array(4),t.LIMIT_VERTS=65535,t.LIMIT_INDICES=16777215,t._indexSwap=new Array,t}(),Xr=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.usages=0,i._vertices=new Object,i._verticesUpdated=new Object,i._indexMappings=Array(),i._numIndices=0,i._elements=e,i._stage=n,i._onInvalidateIndicesDelegate=function(t){return i._onInvalidateIndices(t)},i._onClearIndicesDelegate=function(t){return i._onClearIndices(t)},i._onInvalidateVerticesDelegate=function(t){return i._onInvalidateVertices(t)},i._onClearVerticesDelegate=function(t){return i._onClearVertices(t)},i._elements.addEventListener(zr.CLEAR_INDICES,i._onClearIndicesDelegate),i._elements.addEventListener(zr.INVALIDATE_INDICES,i._onInvalidateIndicesDelegate),i._elements.addEventListener(zr.CLEAR_VERTICES,i._onClearVerticesDelegate),i._elements.addEventListener(zr.INVALIDATE_VERTICES,i._onInvalidateVerticesDelegate),i}return o(e,t),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numIndices",{get:function(){return this._numIndices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:!1,configurable:!0}),e.prototype.getIndexMappings=function(){return this._indicesUpdated||this._updateIndices(),this._indexMappings},e.prototype.getIndexBufferGL=function(){return this._indicesUpdated||this._updateIndices(),this._indices},e.prototype.getVertexBufferGL=function(t){this._indicesUpdated||this._updateIndices();var e=t.attributesBuffer.id;return this._verticesUpdated[e]||this._updateVertices(t),this._vertices[e]},e.prototype.activateVertexBufferVO=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),this.getVertexBufferGL(e).activate(t,e.size,n||e.dimensions,e.offset+i,e.unsigned)},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._elements.removeEventListener(zr.CLEAR_INDICES,this._onClearIndicesDelegate),this._elements.removeEventListener(zr.INVALIDATE_INDICES,this._onInvalidateIndicesDelegate),this._elements.removeEventListener(zr.CLEAR_VERTICES,this._onClearVerticesDelegate),this._elements.removeEventListener(zr.INVALIDATE_VERTICES,this._onInvalidateVerticesDelegate),this._elements=null,this._overflow&&(this._overflow.onClear(e),this._overflow=null)},e.prototype._setRenderState=function(t,e){this._verticesUpdated||this._updateIndices()},e.prototype.draw=function(t,e,n,i){throw new u},e.prototype._updateIndices=function(t){void 0===t&&(t=0);var e=this._elements.indices;if(e){var n=Hr.getSubIndices(e,this._elements.numVertices,this._indexMappings,t);this._indices=n.getAbstraction(this._stage),this._numIndices=this._indices._attributesBuffer.count*e.dimensions}else this._indices=null,this._numIndices=0,this._indexMappings=Array();if(t+=this._numIndices,e&&t<e.count*this._elements.indices.dimensions?(this._overflow||(this._overflow=this._pGetOverflowElements()),this._overflow._updateIndices(t)):this._overflow&&(this._overflow.onClear(new h(h.CLEAR,this._elements)),this._overflow=null),this._indicesUpdated=!0,this._indexMappings.length)for(var i in this._verticesUpdated)this._verticesUpdated[i]=!1},e.prototype._updateVertices=function(t){this._numVertices=this._elements.numVertices;var e=t.attributesBuffer.id,n=Hr.getSubVertices(t.attributesBuffer,this._indexMappings);this._vertices[e]=n.getAbstraction(this._stage),this._verticesUpdated[e]=!0},e.prototype._onInvalidateIndices=function(t){t.attributesView&&(this._indicesUpdated=!1)},e.prototype._onClearIndices=function(t){t.attributesView&&(this._indices.onClear(new h(h.CLEAR,t.attributesView)),this._indices=null)},e.prototype._onInvalidateVertices=function(t){if(t.attributesView){var e=t.attributesView.attributesBuffer.id;this._verticesUpdated[e]=!1}},e.prototype._onClearVertices=function(t){if(t.attributesView){var e=t.attributesView.attributesBuffer.id;this._vertices[e]&&(this._vertices[e].onClear(new h(h.CLEAR,t.attributesView)),delete this._vertices[e],delete this._verticesUpdated[e])}},e.prototype._pGetOverflowElements=function(){throw new u},e}(J),Yr=function(){return function(){}}();!function(t){t[t.LINEAR=0]="LINEAR",t[t.RADIAL=1]="RADIAL"}(Sr||(Sr={}));var qr=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._renderer=e,i._shader=new Dr(n,i,i,i._stage),i._texture=i._renderer.texture.getAbstraction(i._shader),i._pAddPass(i),i}return o(e,t),e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._texture=null,this._renderer=null},e.prototype._pUpdateRender=function(){t.prototype._pUpdateRender.call(this);var e=this._asset;this.shader.setBlendMode(ze.LAYER),e.render(),this.requiresBlending=!0,this.shader.setBlendMode(e.blendMode||ze.LAYER)},e.prototype._includeDependencies=function(e){t.prototype._includeDependencies.call(this,e),e.uvDependencies++},e.prototype._getFragmentCode=function(t,e){return this._texture._getFragmentCode(e.shadedTarget,t,e,e.uvVarying)},e.prototype._setRenderState=function(e){t.prototype._setRenderState.call(this,e),this._texture._setRenderState(e)},e.prototype._activate=function(){t.prototype._activate.call(this),this._stage.context.setDepthTest(!1,Lt.LESS_EQUAL),this._texture.activate()},e}(Or),Kr=function(){function t(){this._data=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this._data.length},enumerable:!1,configurable:!0}),t.prototype.toVec=function(t,e){void 0===t&&(t=new L),void 0===e&&(e=0);for(var n=this._data[e],i=n.length,r=0;r<4;r++)t._rawData[r]=r<i?n[r]:0;return t},t.prototype.fromVec=function(t,e){void 0===e&&(e=0);for(var n=this._data[e],i=n.length,r=0;r<i;r++)n[r]=t._rawData[r];return this},t.prototype.setData=function(t,e,n){return void 0===n&&(n=!1),this._data[e]=n?t.slice():t,this},t.prototype.getData=function(t){return this._data[t]},t.prototype.lerpTo=function(t,e){if(0===e)return this;if(1===e)return this.copyFrom(t);for(var n=0;n<this._data.length;n++)for(var i=t._data[n],r=this._data[n],o=0;o<this._data[n].length;o++)r[o]=(1-e)*r[o]+e*i[o];return this},t.prototype.add=function(t,e){void 0===e&&(e=1);for(var n=0;n<this._data.length;n++)for(var i=t._data[n],r=this._data[n],o=0;o<this._data[n].length;o++)r[o]+=i[o]*e;return this},t.prototype.scale=function(t){for(var e=0;e<this._data.length;e++)for(var n=this._data[e],i=0;i<this._data[e].length;i++)n[i]*=t;return this},t.prototype.copyFrom=function(t){for(var e=this._data,n=0;n<t.length;n++)e[n]?e[n].set(t._data[n]):e[n]=t._data[n].slice();return this},t.prototype.clone=function(){return(new t).copyFrom(this)},t}(),Wr=function(){function t(t,e){this.vertices=[],t&&(this.vertices=t.map((function(t){return t.clone()}))),e&&(this.userData=e)}return Object.defineProperty(t.prototype,"middle",{get:function(){if(this._middle)return this._middle;this._middle=this.vertices[0].clone();for(var t=1;t<this.vertices.length;t++)this._middle.add(this.vertices[t]);return this._middle.scale(1/this.vertices.length),this._middle},enumerable:!1,configurable:!0}),t.prototype.clone=function(){for(var e=new t,n=this.vertices.length,i=0;i<n;i++)e.vertices[i]=this.vertices[i].clone();return this.userData&&(e.userData=this.userData.clone?this.userData.clone():Object.assign({},this.userData)),e},t.prototype.add=function(t,e){return void 0===e&&(e=!1),this.vertices.push(e?t.clone():t),this},Object.defineProperty(t.prototype,"length",{get:function(){return this.vertices.length},enumerable:!1,configurable:!0}),t}(),Jr=function(){function t(){this.poly=[],this.rect=new W,this.polySize=3,this.hasNGones=!1}return t.prototype.push=function(t){return this.poly.push(t),this},t.prototype.normalise=function(){if(this.hasNGones){for(var t=[],e=0,n=this.poly;e<n.length;e++){var i=n[e];if(!(i.length<this.polySize))if(i.length!==this.polySize)for(var r=1;r<i.length-1;r++){var o=new Wr;o.userData=i.userData,o.add(i.vertices[0].clone()),o.add(i.vertices[r%i.length].clone()),o.add(i.vertices[(r+1)%i.length].clone()),t.push(o)}else t.push(i)}return this.poly=t,this}},t.prototype.toFloatArray=function(t){void 0===t&&(t=0);var e=this.poly.length;if(0===this.poly.length)return null;for(var n=this.poly[0].vertices[0].getData(t).length,i=new Float32Array(e*n*3),r=0;r<3*e;r++){var o=this.poly[r/3|0].vertices[r%3];i.set(o.getData(t),r*n)}return i},t.fromAttributes=function(e,n,i,r){void 0===i&&(i=0);var o,a=new t;a.polySize=i;for(var s=e.map((function(t){return t.get(n,0)})),l=0;l<n;l++){l%i==0&&((o=new Wr).userData=r?new r:null),a.poly.push(o);var u=new Kr;o.add(u);for(var c=0;c<e.length;c++){var h=e[c].offset,p=e[c].stride,d=e[c].dimensions;u.setData(s[c].slice(h+p*l,h+p*l+d),c)}}return a},t}(),Zr=function(){function t(){}return t.InFront=function(t,e,n){return t.dotProduct(n)-e>this.EPS},t.Behind=function(t,e,n){return t.dotProduct(n)-e<-this.EPS},t.OnPlane=function(t,e,n){return!this.InFront(t,e,n)&&!this.Behind(t,e,n)},t.Intersect=function(t,e,n,i){var r=n/(n-i);return(new Kr).copyFrom(t).lerpTo(e,r)},t.SliceNaive=function(t,e,n,i,r,o,a){var s=this.Intersect(e,n,r,o);if(r<0)if(a<0){var l=this.Intersect(n,i,o,a);t.push(new Wr([n,l,s])).push(new Wr([l,i,e])).push(new Wr([s,l,e]))}else{var u=this.Intersect(e,i,r,a);t.push(new Wr([e,s,u])).push(new Wr([s,n,i])).push(new Wr([u,s,i]))}else if(a<0){u=this.Intersect(e,i,r,a);t.push(new Wr([e,s,u])).push(new Wr([u,s,n])).push(new Wr([n,i,u]))}else{l=this.Intersect(n,i,o,a);t.push(new Wr([n,l,s])).push(new Wr([e,s,l])).push(new Wr([i,e,l]))}return t},t.SliceAllNaive=function(t,e,n){var i=new Jr;i.polySize=t.polySize;for(var r=new L,o=0;o<t.poly.length;++o){var a=t.poly[o],s=a.vertices[0],l=a.vertices[1],u=a.vertices[2];s.toVec(r,0);var c=s.toVec(r).dotProduct(e)-n,h=l.toVec(r).dotProduct(e)-n,p=u.toVec(r).dotProduct(e)-n;c*h<0?this.SliceNaive(i,s,l,u,c,h,p):c*p<0?this.SliceNaive(i,u,s,l,p,c,h):h*p<0?this.SliceNaive(i,l,u,s,h,p,c):i.push(a)}return i},t.SutherlandHodgman=function(t,e,n,i,r){var o=new Wr,a=new Wr,s=t.length,l=t.vertices,u=new L,c=new L;n<0&&(n=-n,e.scaleBy(-1));for(var h=l[s-1],p=h.toVec(u,0),d=e.dotProduct(p)-n,f=0;f<s;++f){var _=l[f],g=_.toVec(c,0),m=e.dotProduct(g)-n;if(this.InFront(e,n,g)){if(this.Behind(e,n,p)){var y=this.Intersect(_,h,m,d);o.add(y),a.add(y,!0)}o.add(_,!0)}else if(this.Behind(e,n,g)){if(this.InFront(e,n,p)){y=this.Intersect(h,_,d,m);o.add(y,!1),a.add(y,!0)}else this.OnPlane(e,n,p)&&a.add(h,!0);a.add(_,!0)}else o.add(_,!0),this.OnPlane(e,n,p)&&a.add(_,!0);p=(h=_.clone()).toVec(p,0),d=m}return o.length&&(r&&r(t,o,!1),i.polySize!==o.length&&(i.hasNGones=!0),i.poly.push(o)),a.length&&(r&&r(t,a,!0),i.polySize!==a.length&&(i.hasNGones=!0),i.poly.push(a)),i},t.SliceHodgman=function(t,e,n,i){var r=new Jr;r.polySize=t.polySize;for(var o=0,a=t.poly;o<a.length;o++){var s=a[o];this.SutherlandHodgman(s,e,n,r,i)}return r},t.EPS=1e-4,t}(),$r=function(){return function(){this.cells=new Array,this.lastCollisionIndex=-1}}(),to=function(){function t(){}return t.hitTest=function(t,e,n,i,r,o,a){void 0===a&&(a=0);var s,l,u,c,h,p,d,f,_,g,m,y=r.positions,A=r.getCustomAtributes("curves"),v=y.stride,b=A?A.stride:null,x=y.get(o,a),C=A?A.get(o,a):null;r.indices?(s=r.indices.get(o,a),x=y.get(y.count),C=A?A.get(A.count):null,l=o*r.indices.dimensions):(x=y.get(o,a),C=A?A.get(o,a):null,l=o);var I=r.hitTestCache[a]||(r.hitTestCache[a]=new $r),E=I.lastCollisionIndex;if(-1!=E&&E<l)t:{if(s?(u=s[E+2],c=s[E+1],h=s[E]):(u=E+2,c=E+1,h=E),p=x[u*v],d=x[u*v+1],f=x[c*v],_=x[c*v+1],g=x[h*v],m=x[h*v+1],!((p-t)*(_-d)+(d-e)*-(f-p)>0||(f-t)*(m-_)+(_-e)*-(g-f)>0||(g-t)*(d-m)+(m-e)*-(p-g)>0)){if(C&&-128!=C[u*b+2]){var w=($=.5*(((K=t-p)*(q=m-d)-(Y=g-p)*(W=e-d))/(J=(H=f-p)*q-Y*(X=_-d)))+(Z=(H*W-K*X)/J))*$-Z,S=C[u*b];if(w>0&&-128==S)break t;if(w<0&&127==S)break t}return!0}}if(l>150){var D=I.cells,T=D.length?I.divisions:I.divisions=Math.min(Math.ceil(Math.sqrt(l)),32),P=T/i.width,B=T/i.height,O=i.x,M=i.y;if(!D.length){D.length=T*T;for(var L=0;L<l;L+=3){s?(u=s[L+2],c=s[L+1],h=s[L]):(u=L+2,c=L+1,h=L),p=x[u*v],d=x[u*v+1],f=x[c*v],_=x[c*v+1],g=x[h*v],m=x[h*v+1];for(var R=Math.floor((Math.min(p,f,g)-O)*P),N=Math.floor((Math.min(d,_,m)-M)*B),F=Math.floor((Math.max(p,f,g)-O)*P),k=Math.floor((Math.max(d,_,m)-M)*B),U=R;U<=F;U++)for(var V=N;V<=k;V++){var j=U+V*T;(D[j]||(D[j]=new Array)).push(L)}}}var G=D[Math.floor((t-O)*P)+Math.floor((e-M)*B)*T];if(null==G)return I.lastCollisionIndex=-1,!1;for(var Q=G.length,z=0;z<Q;z++){L=G[z];if((h=s?s[L]:L)!=E)if(s?(u=s[L+2],c=s[L+1]):(u=L+2,c=L+1),p=x[u*v],d=x[u*v+1],f=x[c*v],_=x[c*v+1],g=x[h*v],m=x[h*v+1],!((p-t)*(_-d)+(d-e)*-(f-p)>0||(f-t)*(m-_)+(_-e)*-(g-f)>0||(g-t)*(d-m)+(m-e)*-(p-g)>0)){if(C&&-128!=C[u*b+2]){w=($=.5*(((K=t-p)*(q=m-d)-(Y=g-p)*(W=e-d))/(J=(H=f-p)*q-Y*(X=_-d)))+(Z=(H*W-K*X)/J))*$-Z,S=C[u*b];if(w>0&&-128==S)continue;if(w<0&&127==S)continue}return I.lastCollisionIndex=L,!0}}return I.lastCollisionIndex=-1,!1}for(L=0;L<l;L+=3){if((h=s?s[L]:L)!=E)if(s?(u=s[L+2],c=s[L+1]):(u=L+2,c=L+1),p=x[u*v],d=x[u*v+1],f=x[c*v],_=x[c*v+1],g=x[h*v],m=x[h*v+1],!((p-t)*(_-d)+(d-e)*-(f-p)>0||(f-t)*(m-_)+(_-e)*-(g-f)>0||(g-t)*(d-m)+(m-e)*-(p-g)>0)){if(C&&-128!=C[u*b+2]){var H,X,Y,q,K,W,J,Z,$;w=($=.5*(((K=t-p)*(q=m-d)-(Y=g-p)*(W=e-d))/(J=(H=f-p)*q-Y*(X=_-d)))+(Z=(H*W-K*X)/J))*$-Z,S=C[u*b];if(w>0&&-128==S)continue;if(w<0&&127==S)continue}return I.lastCollisionIndex=L,!0}}return I.lastCollisionIndex=-1,!1},t.getBoxBounds=function(t,e,n,i,r,o,a){var s;void 0===a&&(a=0);var l,u,c=t.dimensions,h=t.stride,p=0,d=0,f=0,_=0,g=0,m=0;if(e?(u=o*e.dimensions,l=e.get(o,a),s=t.get(t.count)):(u=o,s=t.get(o,a)),0==u)return r;var y,A,v,b,x,C=0;for(n&&(x=n._rawData),null==r?(r=i||new R,y=l?l[C]*h:C*h,n?3==c?(A=s[y]*x[0]+s[y+1]*x[4]+s[y+2]*x[8]+x[12],v=s[y]*x[1]+s[y+1]*x[5]+s[y+2]*x[9]+x[13],b=s[y]*x[2]+s[y+1]*x[6]+s[y+2]*x[10]+x[14]):(A=s[y]*x[0]+s[y+1]*x[4]+x[12],v=s[y]*x[1]+s[y+1]*x[5]+x[13]):(A=s[y],v=s[y+1],b=3==c?s[y+2]:0),_=p=A,g=d=v,m=f=3==c?b:0,C++):(_=(p=r.x)+r.width,g=(d=r.y)+r.height,m=(f=r.z)+r.depth);C<u;C++)y=l?l[C]*h:C*h,n?3==c?(A=s[y]*x[0]+s[y+1]*x[4]+s[y+2]*x[8]+x[12],v=s[y]*x[1]+s[y+1]*x[5]+s[y+2]*x[9]+x[13],b=s[y]*x[2]+s[y+1]*x[6]+s[y+2]*x[10]+x[14]):(A=s[y]*x[0]+s[y+1]*x[4]+x[12],v=s[y]*x[1]+s[y+1]*x[5]+x[13]):(A=s[y],v=s[y+1],b=3==c?s[y+2]:0),A<p?p=A:A>_&&(_=A),v<d?d=v:v>g&&(g=v),3==c&&(b<f?f=b:b>m&&(m=b));return r.width=_-(r.x=p),r.height=g-(r.y=d),r.depth=m-(r.z=f),r},t.getSphereBounds=function(t,e,n,i,r,o,a){void 0===a&&(a=0);for(var s,l,u,c,h=t.get(o,a),p=t.dimensions,d=t.stride,f=0,_=o*d,g=0;g<_;g+=d)f<(s=(l=h[g]-e.x)*l+(u=h[g+1]-e.y)*u+(c=3==p?h[g+2]-e.z:-e.z)*c)&&(f=s);return null==r&&(r=new k),r.x=e.x,r.y=e.y,r.z=e.z,r.radius=Math.sqrt(f),r},t.prepareScale9=function(e,n,i,r,o,a){if(0!==e._numElements)throw"Indices not support yet";for(var s=r?e.clone():e,l=t.getBoxBounds(e.positions,e.indices,null,null,null,e._numElements|e._numVertices,0),u=[-1/0,i.x,i.right,1/0],c=[-1/0,i.y,i.bottom,1/0],h={from:0,to:0},p={from:0,to:0},d=1;d<3;d++)l.x>=u[d]&&(h.from=h.to=d),l.y>=c[d]&&(p.from=p.to=d);for(d=0;d<3;d++)l.right>u[d]&&d>=h.from&&(h.to=d),l.bottom>c[d]&&d>=p.from&&(p.to=d);var f=Array.from({length:9},(function(t){return 0}));if(s.scale9Indices=f,s.scale9Grid=i,s.originalScale9Bounds=n,o){if(2!==s.positions.dimensions)throw"Emit UV support only 2D position buffer";var _=s.positions.get(s._numVertices,0).slice(0),g=a.rawData;for(d=0;d<_.length;d+=2){var m=_[d+0],y=_[d+1];_[d+0]=m*g[0]+y*g[2]+g[4],_[d+1]=m*g[1]+y*g[3]+g[5]}s.setUVs(_),s.invalidate()}if(h.from===h.to&&p.from===p.to)return s.scale9Indices[3*p.from+h.from]=s._numVertices,s;var A=s.uvs?[s.positions,s.uvs]:[s.positions],v=Jr.fromAttributes(A,s._numVertices,3),b=new L(0,0);b.setTo(1,0,0,0);for(d=h.from;d<h.to;d++)v=Zr.SliceAllNaive(v,b,u[d+1]);b.setTo(0,1,0,0);for(d=p.from;d<p.to;d++)v=Zr.SliceAllNaive(v,b,c[d+1]);v.normalise();for(var x=0,C=v.poly;x<C.length;x++){var I=C[x];for(d=0;d<9;d++){var E=I.middle.getData(0),w=E[0],S=E[1];w>=u[d%3]&&w<u[d%3+1]&&S>=c[d/3|0]&&S<c[1+(d/3|0)]&&(I.userData=d)}}v.poly.sort((function(t,e){return t.userData-e.userData}));for(d=0;d<v.poly.length;d++){f[v.poly[d].userData]=3*d+3}var D=v.toFloatArray(0);if(s.setPositions(D),s.uvs){var T=v.toFloatArray(1);s.setUVs(T)}return s.invalidate(),s},t.updateScale9=function(t,e,n,i,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!1),9!==t.scale9Indices.length)throw"ElementUtils: Error - triangleElement does not provide valid slice9Indices!";var a=t.scale9Grid,s=a.x-e.x,l=e.right-a.right,u=a.y-e.y,c=e.bottom-a.bottom,h=t.scale9Indices.length,p=e.width*n-(s+l),d=e.height*i-(u+c),f=1,_=1;p<0&&(p=0,f=e.width*n/(s+l)),d<0&&(d=0,_=e.height*i/(u+c));var g,m,y,A=p/a.width,v=d/a.height,b=t.positions.stride,x=t.positions.offset;if(o?((g=t.clone()).scale9Grid=t.scale9Grid,g.initialScale9Positions=t.initialScale9Positions,g.scale9Indices=t.scale9Indices,m=g.positions.get(g._numVertices)):m=t.positions.get(t._numVertices),r||!t.initialScale9Positions){(y=[]).length=2*t._numVertices;for(var C=0,I=t.positions.length,E=0;E<I;E+=b)y[C+0]=m[x+E+0],y[C+1]=m[x+E+1],C+=2;t.initialScale9Positions=y}else y=t.initialScale9Positions;for(var w=t.scale9Indices,S=[0,s*f-s*A,p-a.width*f],D=[0,u*_-u*v,d-a.height*_],T=x,P=0,B=0;B<h;B++)for(var O=B/3|0,M=B%3,L=1===M?A:f,R=1===O?v:_,N=S[M],F=D[O];P<w[B];){var k=y[2*P+0]-e.x,U=y[2*P+1]-e.y;k=N+k*L,U=F+U*R,k/=n,U/=i,m[T+0]=k+e.x,m[T+1]=U+e.y,T+=b,P++}return o?(g.positions.invalidate(),g.invalidate(),g):(t.positions.invalidate(),t.invalidate(),t)},t}(),eo=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.isDynamic=!1,n._customAttributesNames=new Array,n._customAttributes=new Object,n._autoDeriveNormals=!0,n._autoDeriveTangents=!0,n._boundsRequests=0,n._numElements=0,n._numVertices=0,n._verticesDirty=new Object,n._invalidateVertices=new Object,n.usages=0,n._concatenatedBuffer=e,n}return o(e,t),Object.defineProperty(e.prototype,"concatenatedBuffer",{get:function(){return this._concatenatedBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indices",{get:function(){return this._indices},enumerable:!1,configurable:!0}),e.prototype.getCustomAtributesNames=function(){return this._customAttributesNames},e.prototype.getCustomAtributes=function(t){return this._customAttributes[t]},Object.defineProperty(e.prototype,"numElements",{get:function(){return this._numElements},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"condensedIndexLookUp",{get:function(){return this._condensedIndexLookUp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoDeriveNormals",{get:function(){return this._autoDeriveNormals},set:function(t){this._autoDeriveNormals!=t&&(this._autoDeriveNormals=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoDeriveTangents",{get:function(){return this._autoDeriveTangents},set:function(t){this._autoDeriveTangents!=t&&(this._autoDeriveTangents=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useCondensedIndices",{get:function(){return this._useCondensedIndices},set:function(t){this._useCondensedIndices!=t&&(this._useCondensedIndices=t)},enumerable:!1,configurable:!0}),e.prototype.copyTo=function(t){for(var e in this.indices&&t.setIndices(this.indices.clone()),this._customAttributes)t.setCustomAttributes(e,this.getCustomAtributes(e).clone())},e.prototype.dispose=function(){for(var t in this.clear(),this._boundsRequests=0,this._convexHull&&(this._convexHull.dispose(),this._convexHull=null),this._indices&&(this._indices.dispose(),this._indices=null),this._customAttributes)this._customAttributes[t].dispose(),delete this._customAttributes},e.prototype.setIndices=function(t,e){void 0===e&&(e=0),t instanceof Yi?(this._indices&&this.clearIndices(),this._indices=t):t?(this._indices||(this._indices=new Yi),this._indices.set(t,e)):this._indices&&(this._indices.dispose(),this._indices=null,this.clearIndices()),this._indices?(this._numElements=this._indices.count,this.invalidateIndices()):this._numElements=0},e.prototype.setCustomAttributes=function(t,e,n){if(void 0===n&&(n=0),e!=this._customAttributes[t]){if(e instanceof ji)this.clearVertices(this._customAttributes[t]),this._customAttributes[t]=e;else if(e)this._customAttributes[t]||(this._customAttributes[t]=new Hi(this._concatenatedBuffer)),this._customAttributes[t].set(e,n);else if(this._customAttributes[t])return this.clearVertices(this._customAttributes[t]),this._customAttributesNames.splice(this._customAttributesNames.indexOf(t),1),void delete this._customAttributes[t];this.invalidateVertices(this._customAttributes[t]),this._verticesDirty[this._customAttributes[t].id]=!1,-1==this._customAttributesNames.indexOf(t)&&this._customAttributesNames.push(t)}},e.prototype.updateScale9=function(t,e){throw new u("UpdateScale9 MUST be overridden by subclass")},e.prototype.prepareScale9=function(t,e,n,i,r){throw new u("prepareScale9 MUST be overridden by subclass")},e.prototype.clone=function(){throw new u},e.prototype.applyTransformation=function(t,e,n){throw new u},e.prototype.scale=function(t,e,n){throw new u},e.prototype.scaleUV=function(t,e,n,i){throw new u},e.prototype.getBoxBounds=function(t,e,n,i,r,o,a,s){throw new u},e.prototype.getSphereBounds=function(t,e,n,i,r,o,a,s){throw new u},e.prototype.hitTestPoint=function(t,e,n,i,r,o,a,s){throw new u},e.prototype.invalidateIndices=function(){this._invalidateIndices||(this._invalidateIndices=new zr(zr.INVALIDATE_INDICES,this._indices)),this.dispatchEvent(this._invalidateIndices)},e.prototype.clearIndices=function(){this.dispatchEvent(new zr(zr.CLEAR_INDICES,this._indices))},e.prototype.invalidateVertices=function(t){t&&!this._verticesDirty[t.id]&&(this._verticesDirty[t.id]=!0,this._invalidateVertices[t.id]||(this._invalidateVertices[t.id]=new zr(zr.INVALIDATE_VERTICES,t)),this.dispatchEvent(this._invalidateVertices[t.id]))},e.prototype.clearVertices=function(t){t&&(t.dispose(),this.dispatchEvent(new zr(zr.CLEAR_VERTICES,t)),this._verticesDirty[t.id]=null,this._invalidateVertices[t.id]=null)},e.prototype.testCollision=function(t,e,n,i,r,o,a){throw new u},e}(_),no=function(){function t(t){this.materialClassPool={},this.id=f.Next(),this.rendererClass=t}return t.prototype.requestAbstraction=function(t){return this.rendererClass},t.prototype.getRenderer=function(t){return t.getAbstraction(this)},t.getInstance=function(e){return t._renderGroupPool[e.assetType]||(t._renderGroupPool[e.assetType]=new t(e))},t.registerElements=function(e,n){t._renderElementsClassPool[n.assetType]=e},t.getRenderElementsClass=function(e){return t._renderElementsClassPool[e.assetType]},t._renderGroupPool={},t._renderElementsClassPool={},t}(),io=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._faceNormalsDirty=!0,e._faceTangentsDirty=!0,e.hitTestCache=new Object,e}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jointsPerVertex",{get:function(){return this._jointsPerVertex},set:function(t){this._jointsPerVertex!=t&&(this._jointsPerVertex=t,this._jointIndices&&(this._jointIndices.dimensions=this._jointsPerVertex),this._jointWeights&&(this._jointWeights.dimensions=this._jointsPerVertex))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions||this.setPositions(new Hi(this._concatenatedBuffer)),this._positions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normals",{get:function(){return this._normals&&!this._verticesDirty[this._normals.id]||this.setNormals(this._normals),this._normals},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tangents",{get:function(){return this._tangents&&!this._verticesDirty[this._tangents.id]||this.setTangents(this._tangents),this._tangents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"faceNormals",{get:function(){return this._faceNormalsDirty&&this.updateFaceNormals(),this._faceNormals},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"faceTangents",{get:function(){return this._faceTangentsDirty&&this.updateFaceTangents(),this._faceTangents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvs",{get:function(){if(!this._uvs&&e.isIE){var t=new ji(Float32Array,2);t.set(this._positions.get(this._positions.count));var n=t.attributesBuffer;this._uvs=new zi(n),t.dispose()}return this._uvs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jointIndices",{get:function(){return this._jointIndices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jointWeights",{get:function(){return this._jointWeights},enumerable:!1,configurable:!0}),e.prototype.prepareScale9=function(t,e,n,i,r){return to.prepareScale9(this,t,e,n,i,r)},e.prototype.updateScale9=function(t,e){this.scale9Indices&&to.updateScale9(this,this.originalScale9Bounds,t,e,!1,!1)},e.prototype.getBoxBounds=function(t,e,n,i,r,o,a,s){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=0),void 0===s&&(s=0),a=a||this._numElements||this._numVertices,this._boundsRequests++,to.getBoxBounds(this.positions,this.indices,i,r,o,a,s)},e.prototype.getSphereBounds=function(t,e,n,i,r,o,a,s){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=0),void 0===s&&(s=0),to.getSphereBounds(this.positions,e,n,r,o,a||this._numVertices,s)},e.prototype.hitTestPoint=function(t,e,n,i,r,o,a,s,l,u){return void 0===a&&(a=0),void 0===s&&(s=0),to.hitTest(n,i,0,o,this,a||this._numElements||this._numVertices,s)},e.prototype.setPositions=function(t,e){void 0===e&&(e=0),t!=this._positions&&(t instanceof ji?(this.clearVertices(this._positions),this._positions=t):t?(this._positions||(this._positions=new Hi(this._concatenatedBuffer)),this._positions.set(t,e)):(this.clearVertices(this._positions),this._positions=new Hi(this._concatenatedBuffer)),this._numVertices=this._positions.count,this._autoDeriveNormals&&this.invalidateVertices(this._normals),this._autoDeriveTangents&&this.invalidateVertices(this._tangents),this.invalidateVertices(this._positions),this._verticesDirty[this._positions.id]=!1,this._convexHull=null)},e.prototype.setNormals=function(t,e){if(void 0===e&&(e=0),this._autoDeriveNormals)this._normals=Hr.generateNormals(this.indices,this.faceNormals,this._normals,this._concatenatedBuffer);else{if(t==this._normals)return;if(t instanceof Hi)this.clearVertices(this._normals),this._normals=t;else if(t)this._normals||(this._normals=new Hi(this._concatenatedBuffer)),this._normals.set(t,e);else if(this._normals)return this.clearVertices(this._normals),void(this._normals=null)}this.invalidateVertices(this._normals),this._verticesDirty[this._normals.id]=!1},e.prototype.setTangents=function(t,e){if(void 0===e&&(e=0),this._autoDeriveTangents)this._tangents=Hr.generateTangents(this.indices,this.faceTangents,this.faceNormals,this._tangents,this._concatenatedBuffer);else{if(t==this._tangents)return;if(t instanceof Hi)this.clearVertices(this._tangents),this._tangents=t;else if(t)this._tangents||(this._tangents=new Hi(this._concatenatedBuffer)),this._tangents.set(t,e);else if(this._tangents)return this.clearVertices(this._tangents),void(this._tangents=null)}this.invalidateVertices(this._tangents),this._verticesDirty[this._tangents.id]=!1},e.prototype.setUVs=function(t,e){if(void 0===e&&(e=0),t!=this._uvs){if(t instanceof ji)this.clearVertices(this._uvs),this._uvs=t;else if(t)this._uvs||(this._uvs=new zi(this._concatenatedBuffer)),this._uvs.set(t,e);else if(this._uvs)return this.clearVertices(this._uvs),void(this._uvs=null);this.invalidateVertices(this._uvs),this._verticesDirty[this._uvs.id]=!1}},e.prototype.setJointIndices=function(t,e){if(void 0===e&&(e=0),t!=this._jointIndices){if(t instanceof ji)this.clearVertices(this._jointIndices),this._jointIndices=t;else if(t){if(this._jointIndices||(this._jointIndices=new ji(Float32Array,this._jointsPerVertex,this._concatenatedBuffer)),this._useCondensedIndices){var n=0,i=void 0,r=0,o=new Object;for(this._condensedIndexLookUp=new Array;n<t.length;)null==o[i=t[n]]&&(o[i]=r,this._condensedIndexLookUp[r++]=i),t[n++]=o[i]}this._jointIndices.set(t,e)}else if(this._jointIndices)return this.clearVertices(this._jointIndices),void(this._jointIndices=null);this.invalidateVertices(this._jointIndices),this._verticesDirty[this._jointIndices.id]=!1}},e.prototype.setJointWeights=function(t,e){if(void 0===e&&(e=0),t!=this._jointWeights){if(t instanceof ji)this.clearVertices(this._jointWeights),this._jointWeights=t;else if(t)this._jointWeights||(this._jointWeights=new ji(Float32Array,this._jointsPerVertex,this._concatenatedBuffer)),this._jointWeights.set(t,e);else if(this._jointWeights)return this.clearVertices(this._jointWeights),void(this._jointWeights=null);this.invalidateVertices(this._jointWeights),this._verticesDirty[this._jointWeights.id]=!1}},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._positions&&(this._positions.dispose(),this._positions=null),this._normals&&(this._normals.dispose(),this._normals=null),this._tangents&&(this._tangents.dispose(),this._tangents=null),this._uvs&&(this._uvs.dispose(),this._uvs=null),this._jointIndices&&(this._jointIndices.dispose(),this._jointIndices=null),this._jointWeights&&(this._jointWeights.dispose(),this._jointWeights=null),this._faceNormals&&(this._faceNormals.dispose(),this._faceNormals=null),this._faceTangents&&(this._faceTangents.dispose(),this._faceTangents=null)},e.prototype.setIndices=function(e,n){void 0===n&&(n=0),t.prototype.setIndices.call(this,e,n),this._faceNormalsDirty=!0,this._faceTangentsDirty=!0,this._autoDeriveNormals&&this.invalidateVertices(this._normals),this._autoDeriveTangents&&this.invalidateVertices(this._tangents)},e.prototype.copyTo=function(e){t.prototype.copyTo.call(this,e);var n=this._autoDeriveNormals,i=this._autoDeriveTangents;e.autoDeriveNormals=this._autoDeriveNormals=!1,e.autoDeriveTangents=this._autoDeriveTangents=!1,e.setPositions(this.positions.clone()),this.normals&&e.setNormals(this.normals.clone()),this.tangents&&e.setTangents(this.tangents.clone()),this.uvs&&e.setUVs(this.uvs.clone()),e.jointsPerVertex=this._jointsPerVertex,this.jointIndices&&e.setJointIndices(this.jointIndices.clone()),this.jointWeights&&e.setJointWeights(this.jointWeights.clone()),e.autoDeriveNormals=this._autoDeriveNormals=n,e.autoDeriveTangents=this._autoDeriveTangents=i,this.scale9Indices&&(e.originalScale9Bounds=this.originalScale9Bounds,e.scale9Grid=this.scale9Grid,e.scale9Indices=this.scale9Indices,e.initialScale9Positions=this.initialScale9Positions)},e.prototype.clone=function(){var t=new e(this._concatenatedBuffer?this._concatenatedBuffer.clone():null);return this.copyTo(t),t},e.prototype.scaleUV=function(t,e,n,i){void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=0),void 0===i&&(i=0),this.uvs&&Hr.scale(t,e,0,this.uvs,n||this._numVertices,i)},e.prototype.scale=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),Hr.scale(t,t,t,this.positions,e||this._numVertices,n)},e.prototype.applyTransformation=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),Hr.applyTransformation(t,this.positions,this.normals,this.tangents,e||this._numVertices,n)},e.prototype.updateFaceTangents=function(){this._faceTangents=Hr.generateFaceTangents(this.indices,this.positions,this.uvs||this.positions,this._faceTangents,this.numElements),this._faceTangentsDirty=!1},e.prototype.updateFaceNormals=function(){this._faceNormals=Hr.generateFaceNormals(this.indices,this.positions,this._faceNormals,this.numElements),this._faceNormalsDirty=!1},e.prototype.testCollision=function(t,e,n,i,r,o,a){void 0===a&&(a=0);var s,l,u,c,h,p,d,f,_,g,m,y,A,v,b,x,C,I,E,w,S,D,T,P,B,M,R,N,F,k,U,V,j,G,Q,z,H=e.rayPosition,X=e.rayDirection,Y=-1,q=r.bothSides,K=this.positions.get(o,a),W=this.positions.dimensions,J=this.positions.stride;this.indices&&(o=(z=this.indices.get(this.numElements)).length);for(var Z=0;Z<o;Z+=3)if(z?(l=z[Z]*J,u=z[Z+1]*J,c=z[Z+2]*J):(l=Z*J,u=(Z+1)*J,c=(Z+2)*J),I=K[l],D=K[u]-I,B=K[c]-I,E=K[l+1],T=K[u+1]-E,M=K[c+1]-E,3==W?(w=K[l+2],S=K[u+2],f=T*(R=K[c+2]-w)-(P=S-w)*M,_=P*B-D*R,g=D*M-T*B,f*=N=1/Math.sqrt(f*f+_*_+g*g),_*=N,g*=N):(w=0,S=0,P=0,R=0,f=0,_=0,g=D*M-T*B>0?1:-1),F=f*X.x+_*+X.y+g*X.z,!q&&F<0||q&&0!=F){if(k=-(f*I+_*E+g*w),s=-(f*H.x+_*H.y+g*H.z+k)/F,G=(h=(m=H.x+s*X.x)-I)*D+(p=(y=H.y+s*X.y)-E)*T+(d=(A=H.z+s*X.z)-w)*P,Q=h*B+p*M+d*R,v=1/((V=D*D+T*T+P*P)*(j=B*B+M*M+R*R)-(U=D*B+T*M+P*R)*U),!isFinite(v))continue;if(C=v*(-U*G+V*Q),(x=v*(j*G-U*Q))<0)continue;if(C<0)continue;if(!((b=1-x-C)<0)&&s>0&&s<e.rayEntryDistance){if(Y=Z/3,e.rayEntryDistance=s,e.position=e.position||new L,e.position.setTo(m,y,A),e.normal=e.normal||new L,e.normal.setTo(f,_,g),this.uvs){var $=this.uvs.get(this.numVertices),tt=this.uvs.stride,et=z?z[Z]*tt:Z*tt,nt=new L($[et],$[et+1]);et=z?z[Z+1]*tt:(Z+1)*tt;var it=new L($[et],$[et+1]);et=z?z[Z+2]*tt:(Z+2)*tt;var rt=new L($[et],$[et+1]);e.uv=new O(b*nt.x+x*it.x+C*rt.x,b*nt.y+x*it.y+C*rt.y)}if(e.elementIndex=Y,!i)return!0}}return Y>=0},e.isIE=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),e.assetType="[asset TriangleElements]",e}(eo),ro=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._vaoIsInvalid=!0,i._triangleElements=e,!i._triangleElements.isDynamic&&Nr&&n.context.hasVao&&(i._vao=n.context.createVao()),i}return o(e,t),e.prototype._onInvalidateIndices=function(e){t.prototype._onInvalidateIndices.call(this,e),this._vaoIsInvalid=!0},e.prototype._onInvalidateVertices=function(e){t.prototype._onInvalidateVertices.call(this,e),this._vaoIsInvalid=!0},e.prototype.onInvalidate=function(e){t.prototype.onInvalidate.call(this,e),this._vaoIsInvalid=!0},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._triangleElements=null,this._vaoIsInvalid=!0,this._vao&&(this._vao.dispose(),this._vao=null)},e.prototype._setRenderState=function(e,n){this._vao&&this._vao.bind(),t.prototype._setRenderState.call(this,e,n),this._vao&&!this._vaoIsInvalid||(n.normalIndex>=0&&this._triangleElements.autoDeriveNormals&&this._triangleElements.normals,n.tangentIndex>=0&&this._triangleElements.autoDeriveTangents&&this._triangleElements.tangents,n.curvesIndex>=0&&this.activateVertexBufferVO(n.curvesIndex,this._triangleElements.getCustomAtributes("curves")),n.uvIndex>=0&&this.activateVertexBufferVO(n.uvIndex,this._triangleElements.uvs||this._triangleElements.positions),n.secondaryUVIndex>=0&&this.activateVertexBufferVO(n.secondaryUVIndex,this._triangleElements.getCustomAtributes("secondaryUVs")||this._triangleElements.uvs||this._triangleElements.positions),n.normalIndex>=0&&this.activateVertexBufferVO(n.normalIndex,this._triangleElements.normals),n.tangentIndex>=0&&this.activateVertexBufferVO(n.tangentIndex,this._triangleElements.tangents),n.jointIndexIndex>=0&&this.activateVertexBufferVO(n.jointIndexIndex,this._triangleElements.jointIndices),n.jointWeightIndex>=0&&this.activateVertexBufferVO(n.jointIndexIndex,this._triangleElements.jointWeights),this.activateVertexBufferVO(0,this._triangleElements.positions),this._vaoIsInvalid=!1)},e.prototype.draw=function(t,e,n,i){var r=e.supportModernAPI;if(e.sceneMatrixIndex>=0)e.sceneMatrix.copyFrom(t.renderSceneTransform,!0),e.viewMatrix.copyFrom(e.view.viewMatrix3D,!0);else{var o=U.CALCULATION_MATRIX;o.copyFrom(t.renderSceneTransform),o.append(e.view.viewMatrix3D),e.viewMatrix.copyFrom(o,!0)}if(r)e.syncUniforms();else{var a=this._stage.context;a.setProgramConstantsFromArray(kt.VERTEX,e.vertexConstantData),a.setProgramConstantsFromArray(kt.FRAGMENT,e.fragmentConstantData)}this._indices?this.getIndexBufferGL().draw(Rt.TRIANGLES,3*i,3*n||this.numIndices):this._stage.context.drawVertices(Rt.TRIANGLES,i,n||this.numVertices),this._vao&&this._vao.unbind()},e.prototype._pGetOverflowElements=function(){return new e(this._triangleElements,this._stage)},e}(Xr),oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._includeDependencies=function(t){},e.prototype._getVertexCode=function(t,e,n){var i="",r=t.globalPosDependencies>0?n.globalPositionVertex:n.animatedPosition,o=e.getFreeVertexConstant();if(e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.getFreeVertexConstant(),t.viewMatrixIndex=4*o.index,t.projectionDependencies>0){n.projectionFragment=e.getFreeVarying();var a=e.getFreeVertexVectorTemp();i+="m44 "+a+", "+r+", "+o+"\nmov "+n.projectionFragment+", "+a+"\nmov op, "+a+"\n"}else i+="m44 op, "+r+", "+o+"\n";return i},e.prototype._getFragmentCode=function(t,e,n){return""},e}(Mr);no.registerElements(oo,io),Pi.registerAbstraction(ro,io);var ao=function(){function t(){}return t.prototype.sortBlendedRenderables=function(t){var e,n,i,r,o,a;if(!t||!t.next)return t;for(i=t,n=t.next;n;)(n=n.next)&&(i=i.next,n=n.next);if(e=i.next,i.next=null,t=this.sortBlendedRenderables(t),e=this.sortBlendedRenderables(e),!t)return e;if(!e)return t;for(;t&&e;)t.zIndex<e.zIndex?(a=t,t=t.next):(a=e,e=e.next),r?o.next=a:r=a,o=a;return t?o.next=t:e&&(o.next=e),r},t.prototype.sortOpaqueRenderables=function(t){var e,n,i,r,o,a;if(!t||!t.next)return t;for(i=t,n=t.next;n;)(n=n.next)&&(i=i.next,n=n.next);e=i.next,i.next=null,t=this.sortOpaqueRenderables(t),e=this.sortOpaqueRenderables(e);var s=0;if(!t)return e;if(!e)return t;for(;t&&e&&null!=t&&null!=e;){var l=t.renderOrderId,u=e.renderOrderId;if(l==u){var c=t.materialID,h=e.materialID;s=c==h?t.zIndex<e.zIndex?1:-1:c>h?1:-1}else s=l>u?1:-1;s<0?(a=t,t=t.next):(a=e,e=e.next),r?(o.next=a,o=a):(r=a,o=a)}return t?o.next=t:e&&(o.next=e),r},t}(),so=function(t){function e(e,n){var i,r=this;return(r=t.call(this,e,n)||this).partition=e,r.group=n,r._renderMatrix=new U,r._boundsScale=1,r._paddedBounds=new W,r._bounds=new R,r._boundsDirty=!0,r._mappers=new Array,r._elementsPools={},r._cameraForward=new L,r._depthTextureDirty=!0,r._depthPrepass=!1,r._pNumElements=0,r._disableColor=!1,r._disableClear=!1,r._renderBlended=!0,r._numCullPlanes=0,r.renderableSorter=new ao,r._node=e.rootNode,r._parentNode=null===(i=e.parent)||void 0===i?void 0:i.rootNode,r._onInvalidateProperties=function(t){return r._invalidateStyle()},r._onSizeInvalidateDelegate=function(t){return r.onSizeInvalidate(t)},r._onContextUpdateDelegate=function(t){return r.onContextUpdate(t)},r.style=new Gr,r.view=r.partition.rootNode.view,r.stage=r.view.stage,r.stage.addEventListener(ce.CONTEXT_CREATED,r._onContextUpdateDelegate),r.stage.addEventListener(ce.CONTEXT_RECREATED,r._onContextUpdateDelegate),r.view.addEventListener(pr.INVALIDATE_SIZE,r._onSizeInvalidateDelegate),r._boundsPicker=Cr.getInstance().getBoundsPicker(r.partition),r.stage.context&&(r._context=r.stage.context),r}return o(e,t),Object.defineProperty(e.prototype,"cullPlanes",{get:function(){return this._customCullPlanes},set:function(t){this._customCullPlanes=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderBlended",{get:function(){return this._renderBlended},set:function(t){this._renderBlended=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disableColor",{get:function(){return this._disableColor},set:function(t){this._disableColor!=t&&(this._disableColor=t,this._invalid=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disableClear",{get:function(){return this._disableClear},set:function(t){this._disableClear!=t&&(this._disableClear=t,this._invalid=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numElements",{get:function(){return this._pNumElements},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),e.prototype.getPaddedBounds=function(){return this._boundsDirty&&this._updateBounds(),this._paddedBounds},e.prototype.getBounds=function(){return this._boundsDirty&&this._updateBounds(),this._bounds},Object.defineProperty(e.prototype,"style",{get:function(){return this._boundsDirty&&this._updateBounds(),this._style},set:function(t){this._style!=t&&(this._style&&this._style.removeEventListener(jr.INVALIDATE_PROPERTIES,this._onInvalidateProperties),this._style=t,this._style&&this._style.addEventListener(jr.INVALIDATE_PROPERTIES,this._onInvalidateProperties),this._invalidateStyle())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){var t=this._node.container.blendMode;return He(t)?t:ze.LAYER},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useNonNativeBlend",{get:function(){return oe.USE_NON_NATIVE_BLEND&&this._node.container.blendMode&&this._node.container.blendMode!==ze.LAYER&&this.blendMode==ze.LAYER},enumerable:!1,configurable:!0}),e.prototype.onClear=function(e){for(var n in t.prototype.onClear.call(this,e),this.stage.removeEventListener(ce.CONTEXT_CREATED,this._onContextUpdateDelegate),this.stage.removeEventListener(ce.CONTEXT_RECREATED,this._onContextUpdateDelegate),this.view.removeEventListener(pr.INVALIDATE_SIZE,this._onSizeInvalidateDelegate),this._onContextUpdateDelegate=null,this._onSizeInvalidateDelegate=null,this._elementsPools)this._elementsPools[n].clear(),delete this._elementsPools[n]},e.prototype.onInvalidate=function(e){t.prototype.onInvalidate.call(this,e),this._boundsDirty=!0},e.prototype.update=function(t){for(var e=this._mappers.length,n=0;n<e;n++)this._mappers[n].update(t)},e.prototype._addMapper=function(t){-1==this._mappers.indexOf(t)&&this._mappers.push(t)},e.prototype._removeMapper=function(t){var e=this._mappers.indexOf(t);-1!=e&&this._mappers.splice(e,1)},e.prototype.getRenderElements=function(t){return this._elementsPools[t.assetType]||(this._elementsPools[t.assetType]=new(no.getRenderElementsClass(t))(this))},e.prototype.requestAbstraction=function(t){return Vr},e.prototype.render=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this._enableDepthAndStencil=t,this._surfaceSelector=e,this._mipmapSelector=n,this._maskConfig=i,this._maskConfig&&(this._disableClear=!0,this._disableColor=!0),this.update(this.partition),this.view.target&&this.view.target.invalidateMipmaps(),oe.USE_NON_NATIVE_BLEND&&!this._invalid||this.traverse(),this.executeRender(t,e,n),this.view.shareContext&&!this.view.target||this._snapshotRequired&&this._snapshotBitmapImage2D&&(this._context.drawToBitmapImage2D(this._snapshotBitmapImage2D),this._snapshotRequired=!1)},e.prototype.resetHead=function(){this._blendedRenderables=[],this._opaqueRenderables=[]},e.prototype.traverse=function(){this.resetHead(),this._pNumElements=0,this._activeMaskOwners=null,this._cameraTransform=this.view.projection.transform.matrix3D,this._cameraForward=this.view.projection.transform.forwardVector,this._cullPlanes=this._customCullPlanes?this._customCullPlanes:this.view.projection.viewFrustumPlanes,this._numCullPlanes=this._cullPlanes?this._cullPlanes.length:0,this._maskId=this.partition.rootNode.getMaskId(),e._collectionMark++,this.partition.traverse(this),this.renderableSorter,this._invalid=!1},e.prototype._iRenderCascades=function(t,e){},e.prototype.executeRender=function(t,e,n){void 0===t&&(t=!0),void 0===e&&(e=0),void 0===n&&(n=0),this.view.clear(!this._depthPrepass&&!this._disableClear,t,e,n,!this.view.shareContext||this.view.target?Mt.ALL:Mt.DEPTH),this._context.setBlendFactors(Bt.ONE,Bt.ZERO),this._context.setDepthTest(!0,Lt.LESS_EQUAL),this._disableColor?this._context.setColorMask(!1,!1,!1,!1):this._context.setColorMask(!0,!0,!0,!0),this._maskConfig?this._context.enableStencil():this._context.disableStencil(),this.drawRenderables(this._opaqueRenderables),this._renderBlended&&this.drawRenderables(this._blendedRenderables)},e.prototype.queueSnapshot=function(t){this._snapshotRequired=!0,this._snapshotBitmapImage2D=t},e.prototype.drawRenderables=function(t){for(var e,n,i,r,o=0,a=t.length,s=t[o];o<a;){n=(e=s.renderMaterial)?e.numPasses:1,(this._activeMasksDirty||this._checkMaskOwners(s.maskOwners))&&((this._activeMaskOwners=s.maskOwners)?this._renderMasks(this._activeMaskOwners):this._maskConfig||this._context.disableStencil(),this._activeMasksDirty=!1);for(var l=0;l<n;l++){e&&e.activatePass(l),i=o,r=s;do{if(r.executeRender(this._enableDepthAndStencil,this._surfaceSelector,this._mipmapSelector,this._maskConfig),++i==a)break;r=t[i]}while(r.renderMaterial==e&&!(this._activeMasksDirty=this._checkMaskOwners(r.maskOwners)));e&&e.deactivatePass()}o=i,s=r}},e.prototype.onContextUpdate=function(t){this._context=this.stage.context},e.prototype.onSizeInvalidate=function(t){this._pRttBufferManager&&(this._pRttBufferManager.viewWidth=this.view.width,this._pRttBufferManager.viewHeight=this.view.height),this._depthTextureDirty=!0},e.prototype.enterNode=function(t){var n=this._maskConfig||t.isInFrustum(this.partition.rootNode,this._cullPlanes,this._numCullPlanes,Cr.getInstance()),i=t._collectionMark!=e._collectionMark&&t.isRenderable()&&n&&t.getMaskId()==this._maskId;return t._collectionMark=e._collectionMark,i},e.prototype.getTraverser=function(t){if(t.rootNode.renderToImage){var e=t.getLocalNode();if(!Cr.getInstance().getBoundsPicker(e.partition).getBoxBounds(e,!0,!0))return this;var n=this._traverserGroup.getRenderer(e.partition);return n.renderableSorter=null,n.parentRenderer=this,this._renderEntity=n.getAbstraction(this),this._zIndex=this._cameraTransform.position.subtract(t.rootNode.getPosition()).dotProduct(this._cameraForward)+t.rootNode.container.zOffset,this._renderSceneTransform=t.rootNode.getRenderMatrix3D(this._cameraTransform),this._entityMaskId=t.rootNode.getMaskId(),this._entityMaskOwners=t.rootNode.getMaskOwners(),this.applyTraversable(n),n}return this},e.prototype.applyEntity=function(t){this._renderEntity=t.getAbstraction(this),this._zIndex=this._cameraTransform.position.subtract(t.parent.getPosition()).dotProduct(this._cameraForward)+t.parent.container.zOffset,this._renderSceneTransform=t.parent.getRenderMatrix3D(this._cameraTransform),this._entityMaskId=t.parent.getMaskId(),this._entityMaskOwners=t.parent.getMaskOwners(),t.entity._acceptTraverser(this)},e.prototype.applyTraversable=function(t){var e=t.getAbstraction(this._renderEntity);e.renderer=this,e.cascaded=!1,e.zIndex=this._zIndex,e.maskId=this._entityMaskId,e.maskOwners=this._entityMaskOwners,e.renderSceneTransform=this._renderSceneTransform;var n=e.renderMaterial;e.materialID=n.materialID,e.renderOrderId=n.renderOrderId,n.requiresBlending?this._blendedRenderables.push(e):this._opaqueRenderables.push(e),this._pNumElements+=e.stageElements.elements.numElements},e.prototype._renderMasks=function(t){var e=Math.log2(this._maskConfig)>>1,n=this._maskConfig?Math.pow(2,e+1<<1):1,i=n;if(i>255)console.warn("[RenderBase] Mask bit overflow, maskConfig %d",i);else{this._context.enableStencil();for(var r,o,a,s=t.length,l=!0,u=0;u<s;++u)if(o=(r=t[u].getMasks()).length){this._context.setStencilActions(Gt.FRONT_AND_BACK,l?Lt.ALWAYS:Lt.EQUAL,Ut.SET,Ut.SET,Ut.KEEP),l=!1,this._context.setStencilReferenceValue(255,i,i=(i&n)+n),this._context.clear(0,0,0,0,0,0,Mt.STENCIL);for(var c=0;c<o;++c)(a=r[c])&&this._maskGroup.getRenderer(a.partition).render(!0,0,0,i)}l||this._context.setStencilActions(Gt.FRONT_AND_BACK,Lt.EQUAL,Ut.SET,Ut.SET,Ut.KEEP),this._context.setStencilReferenceValue(255,i,this._maskConfig),this._disableColor||this._context.setColorMask(!0,!0,!0,!0)}},e.prototype._checkMaskOwners=function(t){if(null==this._activeMaskOwners||null==t)return Boolean(this._activeMaskOwners!=t);if(this._activeMaskOwners.length!=t.length)return!0;for(var e,n,i,r=t.length,o=0;o<r;o++){if(e=(n=t[o].getMasks()).length,(i=this._activeMaskOwners[o].getMasks()).length!=e)return!0;for(var a=0;a<e;a++)if(i[a]!=n[a])return!0}return!1},e.prototype._invalidateStyle=function(){this.dispatchEvent(new Lr(Lr.INVALIDATE_STYLE,this))},e.prototype._updateBounds=function(){this._boundsDirty=!1;var t,e=this._renderMatrix,n=this._node.container,i=this._paddedBounds;this._parentNode?(t=Math.min(3,this._parentNode.view.projection.scale),e.copyFrom(this._parentNode.getMatrix3D())):(t=Math.min(3,this._node.view.projection.scale),e.identity()),this._boundsScale=t,1!==t&&e.appendScale(t,t,t);var r=this._boundsPicker.getBoxBounds(this._node,!0,!0);if(r)if(isNaN(r.width)||isNaN(r.height))console.error("[CachedRenderer] Bounds invalid (NaN), supress calculation",this._node);else if(this._bounds.copyFrom(r),e.transformBox(this._bounds,this._bounds),e.invert(),this.useNonNativeBlend){var o=this.parentRenderer.getPaddedBounds();i.setTo(o.x,o.y,o.width,o.height),this._style.image=this.parentRenderer.style.image,this._style.sampler=new Qe(!1,Fr,!1)}else{i.setTo(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),n.filters&&n.filters.length>0&&(n.filters.forEach((function(e){return e&&(e.imageScale=t)})),this.stage.filterManager.computeFiltersPadding(i,n.filters,i)),i.x=i.x-2|0,i.y=i.y-2|0,i.width=i.width+4|0,i.height=i.height+4|0;var a=this._style.image;if(i.width*i.height==0)throw new Error("Cannot have image with size 0 * 0");a?this._style.image._setSize(i.width,i.height):(this._style.image=new fe(i.width,i.height,!1),this._style.sampler=new Qe(!1,Fr,!1))}else console.error("[CachedRenderer] Bounds invalid, supress calculation",this._node)},e.prototype._initRender=function(t){var e=this._paddedBounds,n=this._boundsScale,i=this._renderMatrix,r=this.view,o=r.projection;i._rawData[14]=-1e3,o.far=4e3,o.near=1,o.transform.matrix3D=i,o.ratio=t.width/t.height,o.originX=-1-2*(e.x-0)/t.width,o.originY=-1-2*(e.y-0)/t.height,o.scale=1e3*n/t.height,r.target=t},e._collectionMark=0,e}(J),lo=function(t){function e(){var e=t.call(this)||this;return e._numImages=0,e._images=new Array,e._samplers=new Array,e}return o(e,t),Object.defineProperty(e.prototype,"mappingMode",{get:function(){return this._mappingMode},set:function(t){this._mappingMode!=t&&(this._mappingMode=t)},enumerable:!1,configurable:!0}),e.prototype.getNumImages=function(){return this._numImages},e.prototype.setNumImages=function(t){this._numImages!=t&&(this._numImages=t,this._images.length=t,this._samplers.length=t,this.invalidate())},e.prototype.getImageAt=function(t){return this._images[t]},e.prototype.setImageAt=function(t,e){this._images[e]=t,this.invalidate()},e.prototype.getSamplerAt=function(t){return this._samplers[t]},e.prototype.setSamplerAt=function(t,e){this._samplers[e]=t,this.invalidate()},e}(_),uo=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._mappingMode=e||Sr.LINEAR,n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[texture Texture2D]",e}(lo),co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[texture TextureCube]",e}(lo),ho=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.setNumImages(1),n.image=e,n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sampler",{get:function(){return this._samplers[0]},set:function(t){this._samplers[0]!=t&&this.setSamplerAt(t,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return this._images[0]},set:function(t){this._images[0]!=t&&this.setImageAt(t,0)},enumerable:!1,configurable:!0}),e.assetType="[texture ImageTextureCube]",e}(co),po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFragmentCode=function(t,e,n,i){this._imageIndex=this._shader.renderMaterial.getImageIndex(this._texture,0);var r=this.getTextureReg(this._imageIndex,e,n);return this._textureIndex=r.index,"tex "+t+", "+i+", "+r+" <"+this._shader.renderMaterial.images[this._imageIndex].getType()+",linear,miplinear,wrap>\n"},e.prototype.activate=function(){var t=this._shader.renderMaterial.samplers[this._imageIndex];this._shader.renderMaterial.images[this._imageIndex].activate(this._textureIndex,t)},e.prototype._setRenderState=function(t){var e=t.samplers[this._imageIndex],n=t.images[this._imageIndex];n&&e&&n.activate(this._textureIndex,e)},e}(Qr);Dr.registerAbstraction(po,ho);var fo=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=t.call(this,n)||this;return i.setNumImages(1),i.image=e,i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sampler",{get:function(){return this._samplers[0]},set:function(t){this._samplers[0]!=t&&this.setSamplerAt(t,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return this._images[0]},set:function(t){if(this._images[0]!=t){if(!he.isImage2DValid(t))throw new l("Invalid imageData: Width and height must be power of 2 and cannot exceed 2048");this.setImageAt(t,0)}},enumerable:!1,configurable:!0}),e.assetType="[texture ImageTexture2D]",e}(uo),_o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFragmentCode=function(e,n,i,r){var o,a="";if(this._texture.mappingMode==Sr.RADIAL&&(a+="mul "+(o=n.getFreeFragmentVectorTemp())+".xy, "+r+", "+r+"\n",a+="add "+o+".x, "+o+".x, "+o+".y\n",a+="sub "+o+".y, "+o+".y, "+o+".y\n",a+="sqt "+o+".x, "+o+".x, "+o+".x\n",r=o),this._shader.useImageRect){var s=n.getFreeFragmentConstant();this._samplerIndex=4*s.index,a+="mul "+(o=n.getFreeFragmentVectorTemp())+", "+r+", "+s+".xy\n",a+="add "+o+", "+o+", "+s+".zw\n",r=o}if(a+=t.prototype._getFragmentCode.call(this,e,n,i,r),this._shader.usesPremultipliedAlpha){var l=n.getFreeFragmentSingleTemp();a+="sge "+l+" #native vec4(0.0) native#, "+e+".w  \n",a+="add "+l+", "+l+","+e+".w \n",a+="div "+e+".xyz, "+e+", "+l+"\n"}return a},e.prototype.activate=function(){t.prototype.activate.call(this);var e=this._shader.renderMaterial.samplers[this._imageIndex];if(this._shader.useImageRect){var n=this._samplerIndex,i=this._shader.fragmentConstantData;e.imageRect?(i[n]=e.imageRect.width,i[n+1]=e.imageRect.height,i[n+2]=e.imageRect.x,i[n+3]=e.imageRect.y):(i[n]=1,i[n+1]=1,i[n+2]=0,i[n+3]=0)}},e.prototype._setRenderState=function(e){t.prototype._setRenderState.call(this,e);var n=e.samplers[this._imageIndex];if(this._shader.useImageRect&&n){var i=this._samplerIndex,r=this._shader.fragmentConstantData;n.imageRect?(r[i]=n.imageRect.width,r[i+1]=n.imageRect.height,r[i+2]=n.imageRect.x,r[i+3]=n.imageRect.y):(r[i]=1,r[i+1]=1,r[i+2]=0,r[i+3]=0)}},e}(po);Dr.registerAbstraction(_o,fo);var go=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._traverserGroup=no.getInstance(Ao),i._maskGroup=no.getInstance(yo),i}return o(e,t),e.prototype.enterNode=function(e){return e._collectionMark!=so._collectionMark&&e.isCastingShadow()?t.prototype.enterNode.call(this,e):(e._collectionMark=so._collectionMark,!1)},e.registerMaterial=function(t,n){no.getInstance(e).materialClassPool[n.assetType]=t},e.assetType="[renderer DepthRenderer]",e}(so),mo=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._traverserGroup=no.getInstance(Ao),i._maskGroup=no.getInstance(yo),i}return o(e,t),e.prototype.enterNode=function(e){return e._collectionMark!=so._collectionMark&&e.isCastingShadow()?t.prototype.enterNode.call(this,e):(e._collectionMark=so._collectionMark,!1)},e.registerMaterial=function(t,n){no.getInstance(e).materialClassPool[n.assetType]=t},e.assetType="[renderer DistanceRenderer]",e}(so),yo=function(t){function e(n,i){var r=t.call(this,n,i)||this;return r._depthRenderer=no.getInstance(go).getRenderer(n),r._distanceRenderer=no.getInstance(mo).getRenderer(n),r._traverserGroup=no.getInstance(Ao),r._maskGroup=no.getInstance(e),r}return o(e,t),Object.defineProperty(e.prototype,"antiAlias",{get:function(){return this.stage.antiAlias},set:function(t){this.stage.antiAlias=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthPrepass",{get:function(){return this._depthPrepass},set:function(t){this._depthPrepass=t},enumerable:!1,configurable:!0}),e.prototype.enterNode=function(e){var n=t.prototype.enterNode.call(this,e);return n&&e.boundsVisible&&this.applyEntity(e.getBoundsPrimitive(Cr.getInstance())),n},e.prototype.render=function(e,n,i,r){void 0===e&&(e=!0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),this.stage.recoverFromDisposal()&&(this._requireDepthRender&&this._renderSceneDepthToTexture(),this._depthPrepass&&this._renderDepthPrepass(),t.prototype.render.call(this,e,n,i,r),r||this.view.present())},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._pRttBufferManager&&(this._pRttBufferManager.dispose(),this._pRttBufferManager=null),this._depthRenderer.onClear(e),this._distanceRenderer.onClear(e),this._depthRenderer=null,this._distanceRenderer=null,this._depthRender=null},e.prototype._renderDepthPrepass=function(){this._depthRenderer.disableColor=!0,this._depthRenderer.view.projection=this.view.projection,this._depthRenderer.view.target=null,this._depthRenderer.render(),this._depthRenderer.disableColor=!1},e.prototype._renderSceneDepthToTexture=function(){!this._depthTextureDirty&&this._depthRender||this.initDepthTexture(this.stage.context),this._depthRenderer.render()},e.prototype.initDepthTexture=function(t){this._depthTextureDirty=!1,this._depthRender&&this._depthRender.dispose(),this._depthRender=new Le(this._pRttBufferManager.textureWidth,this._pRttBufferManager.textureHeight),this._depthRenderer.view.target=this._depthRender,this._depthRenderer.view.projection=this.view.projection},e.registerMaterial=function(t,n){no.getInstance(e).materialClassPool[n.assetType]=t},e.assetType="[renderer DefaultRenderer]",e}(so),Ao=function(t){function e(n,i){var r=t.call(this,n,i)||this;return r._textures=new Array,r.animateUVs=!1,r.bothSides=!1,r.curves=!1,r.imageRect=!1,r.useColorTransform=!0,r.alphaBlending=!0,r.alphaThreshold=0,r._onTextureInvalidate=function(t){return r.invalidate()},r._onInvalidateParentNode=function(t){return r.onInvalidate(null)},r._onInvalidateColorTransform=function(t){r.onInvalidate(null)},r._parentNode&&(r._parentNode.addEventListener(rr.INVALIDATE_MATRIX3D,r._onInvalidateParentNode),r._parentNode.addEventListener(rr.INVALIDATE_COLOR_TRANSFORM,r._onInvalidateColorTransform)),r._node.container.addEventListener(Lr.INVALIDATE_STYLE,r._onInvalidateParentNode),r._node.container.addEventListener(rr.INVALIDATE_COLOR_TRANSFORM,r._onInvalidateColorTransform),r.texture=new fo,r._traverserGroup=no.getInstance(e),r._maskGroup=no.getInstance(yo),r}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!=t&&(this._texture&&this.removeTexture(this._texture),this._texture=t,this._texture&&this.addTexture(this._texture),this.invalidatePasses())},enumerable:!1,configurable:!0}),e.prototype.render=function(e,n,i,r){var o=this;void 0===e&&(e=!0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0);var a,s=this._node.container,l=this.stage,u=this.useNonNativeBlend,c=u?this.parentRenderer.style.image:this._style.image;if(!c)return t.prototype.render.call(this,e,n,i,r);if(this.stage.pushRenderTargetConfig(),2===l.context.glVersion&&oe.ENABLE_MULTISAMPLE_TEXTURE&&(a=l.filterManager.popTemp(c.width,c.height,!0)),u){var h=this.parentRenderer.view.projection;this.parentRenderer.view.projection=new xt,this.parentRenderer.view.target=c,this.parentRenderer._initRender(c),this.parentRenderer.executeRender(),this.parentRenderer.resetHead(),this.parentRenderer.view.target=null,this.parentRenderer.view.projection=h,this._disableClear=!0}if(this._node.colorTransformDisabled=!1,this._initRender(a||c),t.prototype.render.call(this,e,n,i,r),this._node.colorTransformDisabled=this._node.transformDisabled,c.width*c.height==0)throw new Error("Cannot have image with size 0 * 0");var p=s.filters;p&&p.length>0?(p.forEach((function(t){return t&&(t.imageScale=o._boundsScale)})),l.filterManager.applyFilters(a||c,c,c.rect,c.rect,p)):a&&l.filterManager.copyPixels(a,c,c.rect,c.rect.topLeft,u,u?s.blendMode:""),a&&l.filterManager.pushTemp(a),this.stage.popRenderTarget()},e.prototype.preActivateRenderPass=function(){},e.prototype.getNumTextures=function(){return this._textures.length},e.prototype.getTextureAt=function(t){return this._textures[t]},e.prototype.addTexture=function(t){this._textures.push(t),t.addEventListener(h.INVALIDATE,this._onTextureInvalidate),this.invalidate()},e.prototype.removeTexture=function(t){this._textures.splice(this._textures.indexOf(t),1),t.removeEventListener(h.INVALIDATE,this._onTextureInvalidate),this.invalidate()},e.prototype.invalidatePasses=function(){this.dispatchEvent(new Pr(Pr.INVALIDATE_PASSES,this))},e.prototype.enterNode=function(e){var n=t.prototype.enterNode.call(this,e);return n&&e.boundsVisible&&this.applyEntity(e.getBoundsPrimitive(Cr.getInstance())),n},e.prototype.onInvalidate=function(e){t.prototype.onInvalidate.call(this,e),this.dispatchEvent(new Lr(Lr.INVALIDATE_ELEMENTS,this)),this.dispatchEvent(new Lr(Lr.INVALIDATE_STYLE,this)),this.invalidate(),this.invalidatePasses()},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this.texture.clear(),this.texture=null,this._style.image.clear(),this._style.image=null,this._parentNode&&(this._parentNode.removeEventListener(rr.INVALIDATE_MATRIX3D,this._onInvalidateParentNode),this._parentNode.removeEventListener(rr.INVALIDATE_COLOR_TRANSFORM,this._onInvalidateColorTransform),this._parentNode=null),this._node.container.removeEventListener(Lr.INVALIDATE_STYLE,this._onInvalidateParentNode),this._node.container.removeEventListener(rr.INVALIDATE_COLOR_TRANSFORM,this._onInvalidateColorTransform),this._node=null,this.clear()},e.registerMaterial=function(t,n){no.getInstance(e).materialClassPool[n.assetType]=t},e.assetType="[renderer CacheRenderer]",e}(so),vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getStageElements=function(){var t=this._asset,e=t.getPaddedBounds(),n=U.CALCULATION_MATRIX;n.copyFrom(this.renderSceneTransform),n.appendScale(t._boundsScale,t._boundsScale,t._boundsScale),n.appendTranslation(0,0,0),n.invert();var i=[e.left,e.top,0,e.right,e.bottom,0,e.right,e.top,0,e.left,e.top,0,e.left,e.bottom,0,e.right,e.bottom,0];n.transformVectors(i,i);var r=this._elements;return r?r.setPositions(i):((r=this._elements=new io(new ki(5,6))).setPositions(i),r.setUVs([0,0,1,1,1,0,0,0,0,1,1,1])),r.getAbstraction(this._stage)},e.prototype.executeRender=function(e,n,i,r){void 0===e&&(e=!0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),this._stage.context.setCulling(Gt.NONE),t.prototype.executeRender.call(this,e,n,i,r)},e.prototype._getRenderMaterial=function(){return this._asset.getAbstraction(this.renderer.getRenderElements(this.stageElements.elements))},e.prototype._getStyle=function(){return this._asset.style},e.assetType="[render Renderer]",e}(Ur);yo.registerMaterial(qr,Ao),Ao.registerMaterial(qr,Ao),Vr.registerRenderable(vo,Ao);var bo,xo=function(){function t(){}return t.TRIANGLE="triangle",t.LINE="line",t}(),Co=function(){function t(){}return t.hitTest=function(t,e,n,i,r,o,a,s){void 0===s&&(s=0);var l,u,c,h,p,d,f,_,g=o.positions,m=g.stride,y=g.get(a,s);o.indices?(l=o.indices.get(a,s),y=g.get(g.count),u=a*o.indices.dimensions):(y=g.get(a,s),u=a);var A=o.hitTestCache[s]||(o.hitTestCache[s]=new $r),v=A.lastCollisionIndex;if(-1!=v&&v<u){l?(c=l[v]*m,h=l[v+1]*m):(c=v*m,h=(v+1)*m),p=y[c],d=y[c+1],f=y[h];var b=p-t,x=d-e,C=(_=y[h+1])-d,I=-(f-p),E=Math.sqrt(C*C+I*I);if(!(Math.abs(b*C+x*I)>i*E))if(!((Q=b*I-x*C)>E*E||Q<0))return!0}if(u>150){var w=A.cells,S=w.length?A.divisions:A.divisions=Math.min(Math.ceil(Math.sqrt(u)),32),D=S/r.width,T=S/r.height,P=r.x,B=r.y;if(!w.length){w.length=S*S;for(var O=0;O<u;O+=3){l?(c=l[O]*m,h=l[O+1]*m):(c=O*m,h=(O+1)*m),p=y[c],d=y[c+1],f=y[h],_=y[h+1];for(var M=Math.floor((Math.min(p,f)-P)*D),L=Math.floor((Math.min(d,_)-B)*T),R=Math.floor((Math.max(p,f)-P)*D),N=Math.floor((Math.max(d,_)-B)*T),F=M;F<=R;F++)for(var k=L;k<=N;k++){var U=F+k*S;(w[U]||(w[U]=new Array)).push(O)}}}var V=w[Math.floor((t-P)*D)+Math.floor((e-B)*T)*S];if(null==V)return A.lastCollisionIndex=-1,!1;for(var j=V.length,G=0;G<j;G++){O=V[G];l?(c=l[O]*m,h=l[O+1]*m):(c=O*m,h=(O+1)*m),p=y[c],d=y[c+1],f=y[h];b=p-t,x=d-e,C=(_=y[h+1])-d,I=-(f-p),E=Math.sqrt(C*C+I*I);if(!(Math.abs(b*C+x*I)>i*E))if(!((Q=b*I-x*C)>E*E||Q<0))return A.lastCollisionIndex=O,!0}return A.lastCollisionIndex=-1,!1}for(O=0;O<u;O+=6){l?(c=l[O]*m,h=l[O+1]*m):(c=O*m,h=(O+1)*m),p=y[c],d=y[c+1],f=y[h];var Q;b=p-t,x=d-e,C=(_=y[h+1])-d,I=-(f-p),E=Math.sqrt(C*C+I*I);if(!(Math.abs(b*C+x*I)>i*E))if(!((Q=b*I-x*C)>E*E||Q<0))return A.lastCollisionIndex=O,!0}return A.lastCollisionIndex=-1,!1},t.getBoxBounds=function(t,e,n,i,r,o,a,s){var l;void 0===s&&(s=0);var u,c,h,p,d,f,_=t.dimensions,g=t.stride,m=0,y=0,A=0,v=0;if(e?(c=a*e.dimensions,u=e.get(a,s),l=t.get(t.count)):(c=a,l=t.get(a,s)),0==c)return o;n&&(f=n._rawData);for(var b=0;b<c;b+=3)h=u?u[b]*g:b*g,n?6==_?(p=l[h]*f[0]+l[h+1]*f[4]+l[h+2]*f[8]+f[12],d=l[h]*f[1]+l[h+1]*f[5]+l[h+2]*f[9]+f[13],l[h],f[2],l[h+1],f[6],l[h+2],f[10],f[14]):(p=l[h]*f[0]+l[h+1]*f[4]+f[12],d=l[h]*f[1]+l[h+1]*f[5]+f[13]):(p=l[h],d=l[h+1],6==_&&l[h+2]),0==b?(A=m=p,v=y=d):(p<m?m=p:p>A&&(A=p),d<y?y=d:d>v&&(v=d));var x=new R(m,y);return x.right=A,x.bottom=v,this.mergeThinkness(x,i,n),x.union(o,o||r)},t.mergeThinkness=function(t,e,n){var i=null==n?void 0:n._rawData,r=n?e.x*i[0]+e.y*i[4]:e.x,o=n?e.x*i[1]+e.y*i[5]:e.y;return t.x-=r,t.y-=o,t.right+=r,t.bottom+=o,t},t.getSphereBounds=function(t,e,n,i,r,o,a){void 0===a&&(a=0);for(var s,l,u,c,h=t.get(o,a),p=t.dimensions,d=t.stride,f=0,_=o*d,g=0;g<_;g+=d)f<(s=(l=h[g]-e.x)*l+(u=h[g+1]-e.y)*u+(c=6==p?h[g+2]-e.z:-e.z)*c)&&(f=s);return null==r&&(r=new k),r.x=e.x,r.y=e.y,r.z=e.z,r.radius=Math.sqrt(f),r},t.prepareScale9=function(e,n,i,r){for(var o=r?e.clone():e,a=t.getBoxBounds(e.positions,e.indices,null,new L,null,null,e._numElements||e._numVertices),s=[-1/0,i.x,i.right,1/0],l=[-1/0,i.y,i.bottom,1/0],u={from:0,to:0},c={from:0,to:0},h=1;h<3;h++)a.x>s[h]&&(u.from=u.to=h),a.y>l[h]&&(c.from=c.to=h);for(h=0;h<3;h++)a.right>=s[h]&&h>=u.from&&(u.to=h),a.bottom>=l[h]&&h>=c.from&&(c.to=h);o.scale9Grid=i,o.originalScale9Bounds=n;var p=o.scale9Indices=Array.from({length:9},(function(t){return 0})),d=this.restoreLineSegments(o);if(u.from===u.to&&c.from===c.to){var f=new Float32Array(3*d.length);for(h=0;h<d.length;h++)f[3*h+0]=d[h].x,f[3*h+1]=d[h].y,f[3*h+2]=0;return o.initialScale9Positions=f,o.scale9Indices[3*c.from+u.from]=o._numElements||o._numVertices,o}for(var _=[],g=0;d.length;){for(var m=d.pop(),y=d.pop(),A=0,v=0,b=!1,x=c.from;x<=c.to;x++){var C=l[x+1]-y.y,I=l[x+1]-m.y;if(C*I<0){var E=C/(C-I),w=new L(y.x+E*(m.x-y.x),y.y+E*(m.y-y.y),0,0);d.push(w,m,y,w),b=!0;break}.5*(y.y+m.y)>l[x]&&.5*(y.y+m.y)<=l[x+1]&&(v=x);for(var S=u.from;S<=u.to;S++){var D=s[S+1]-y.x,T=s[S+1]-m.x;if(D*T<0){E=D/(D-T),w=new L(y.x+E*(m.x-y.x),y.y+E*(m.y-y.y),0,0);d.push(w,m,y,w),b=!0;break}.5*(y.x+m.x)>s[S]&&.5*(y.x+m.x)<=s[S+1]&&(A=S)}if(b)break}b||(_[A+3*v]||(_[A+3*v]=[]),_[A+3*v].push(y.x,y.y,0,m.x,m.y,0),g+=2)}var P=new Float32Array(3*g),B=new Float32Array(g);B.fill(o.thickness.get(1)[0]);var O=0;for(h=0;h<9;h++)_[h]&&(P.set(_[h],3*O),O+=_[h].length/3,p[h]=O);return o.initialScale9Positions=P,o.setPositions(P),o.setThickness(B),o.invalidate(),o},t.restoreLineSegments=function(t){var e,n,i,r=t.positions,o=t.indices,a=t._numElements||t._numVertices,s=r.dimensions,l=r.stride;o?(i=a*o.dimensions,e=o.get(a,0),n=r.get(r.count)):(i=a,n=r.get(a,0));for(var u=[],c=0;c<i;c+=6){var h=e?e[c]*l:c*l;u.push(new L(n[h],n[h+1],6===s?n[h+2]:0,0)),h+=6==s?3:2,u.push(new L(n[h],n[h+1],6===s?n[h+2]:0,0))}return u},t.updateScale9=function(t,e,n,i,r,o){if(9!==t.scale9Indices.length)throw"ElementUtils: Error - triangleElement does not provide valid slice9Indices!";var a=t.scale9Grid,s=a.x-e.x,l=e.right-a.right,u=a.y-e.y,c=e.bottom-a.bottom,h=t.scale9Indices.length,p=e.width*n-(s+l),d=e.height*i-(u+c),f=1,_=1;p<0&&(p=0,f=e.width*n/(s+l)),d<0&&(d=0,_=e.height*i/(u+c));for(var g=p/a.width,m=d/a.height,y=t.positions.stride,A=t.positions.offset,v=t.positions.dimensions,b=t.positions.get(t._numVertices),x=t.initialScale9Positions,C=t.scale9Indices,I=[0,s*f-s*g,p-a.width*f],E=[0,u*_-u*m,d-a.height*_],w=A,S=0,D=0;D<h;D++)for(var T=D/3|0,P=D%3,B=1===P?g:f,O=1===T?m:_,M=I[P],L=E[T];S<C[D];){for(var R=e.x+(M+(x[3*S+0]-e.x)*B)/n,N=e.y+(L+(x[3*S+1]-e.y)*O)/i,F=e.x+(M+(x[3*S+3]-e.x)*B)/n,k=e.y+(L+(x[3*S+4]-e.y)*O)/i,U=0;U<2;U++){var V=w;b[V++]=R,b[V++]=N,6===v&&(b[V++]=0),b[V++]=F,b[V++]=k,6===v&&(b[V++]=0),V=w+=y,b[V++]=F,b[V++]=k,6===v&&(b[V++]=0),b[V++]=R,b[V++]=N,6===v&&(b[V++]=0),w+=y}S+=2}return t.positions.invalidate(),t.invalidate(),t},t}();!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.NONE=1]="NONE",t[t.NORMAL=2]="NORMAL",t[t.VERTICAL=3]="VERTICAL",t[t.HAIRLINE=4]="HAIRLINE"}(bo||(bo={})),new R;var Io=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this,e)||this;return n._thicknessScale=new L,n.hitTestCache=new Object,n.half_thickness=5,n.scaleMode=bo.HAIRLINE,n.dimension=3,n.dimension=kr,n._positions=new ji(Float32Array,2*n.dimension,e),n}return o(e,t),e.prototype.getThicknessScale=function(t,e,n){return n||this.scaleMode!=bo.HAIRLINE?(e?this._thicknessScale.copyFrom(e.getMatrix3D().decompose()[3]):this._thicknessScale.identity(),this._thicknessScale.x*=t.focalLength*t.pixelRatio/1e3,this._thicknessScale.y*=t.focalLength/1e3,this.scaleMode==bo.NORMAL?(this._thicknessScale.x=!n||this.half_thickness*this._thicknessScale.x>.5?this.half_thickness:this._thicknessScale.x?.5/this._thicknessScale.x:0,this._thicknessScale.y=!n||this.half_thickness*this._thicknessScale.y>.5?this.half_thickness:this._thicknessScale.y?.5/this._thicknessScale.y:0):this.scaleMode==bo.HAIRLINE&&(this._thicknessScale.x=this._thicknessScale.x?.5/this._thicknessScale.x:0,this._thicknessScale.y=this._thicknessScale.y?.5/this._thicknessScale.y:0)):this._thicknessScale.identity(),this._thicknessScale},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colors",{get:function(){return this._colors||this.setColors(this._colors),this._colors},enumerable:!1,configurable:!0}),e.prototype.prepareScale9=function(t,e,n,i,r){return Co.prepareScale9(this,t,e,n)},e.prototype.updateScale9=function(t,e){this.scale9Indices&&Co.updateScale9(this,this.originalScale9Bounds,t,e,!1,!1)},e.prototype.getBoxBounds=function(t,e,n,i,r,o,a,s){return void 0===e&&(e=null),void 0===n&&(n=!1),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=0),void 0===s&&(s=0),a=a||this._numElements||this._numVertices,this._boundsRequests++,Co.getBoxBounds(this.positions,this.indices,i,this.getThicknessScale(t,e,n),r,o,a,s)},e.prototype.getSphereBounds=function(t,e,n,i,r,o,a,s){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=0),void 0===s&&(s=0),Co.getSphereBounds(this.positions,e,n,r,o,a||this._numVertices,s)},e.prototype.hitTestPoint=function(t,e,n,i,r,o,a,s,l,u){void 0===a&&(a=0),void 0===s&&(s=0);var c=this.getThicknessScale(t,e,!0),h=(c.x+c.y)/2;return Co.hitTest(n,i,0,h,o,this,a||this._numElements||this._numVertices,s)},e.prototype.setPositions=function(t,e){void 0===e&&(e=0);var n=2*this.dimension;if(t instanceof ji)this.clearVertices(this._positions),this._positions=t;else if(t){for(var i=0,r=0,o=0,a=new Float32Array(4*n*(t.length/6)),s=new Uint16Array(t.length);i<t.length;)if(o/n&1?(a[o++]=t[i+3],a[o++]=t[i+4],6===n&&(a[o++]=t[i+5]),a[o++]=t[i],a[o++]=t[i+1],6===n&&(a[o++]=t[i+2])):(a[o++]=t[i],a[o++]=t[i+1],6===n&&(a[o++]=t[i+2]),a[o++]=t[i+3],a[o++]=t[i+4],6===n&&(a[o++]=t[i+5])),4==++r){var l=o/n-4;s.set([l,l+1,l+2,l+3,l+2,l+1],i),r=0,i+=6}this._positions.set(a,4*e),this.setIndices(s,e)}else this.clearVertices(this._positions),this._positions=new ji(Float32Array,n,this._concatenatedBuffer);this._numVertices=this._positions.count,this.invalidateVertices(this._positions),this._verticesDirty[this._positions.id]=!1},e.prototype.setThickness=function(t,e){if(void 0===e&&(e=0),t instanceof Qi)this._thickness=t;else if(t){this._thickness||(this._thickness=new Qi(this._concatenatedBuffer));for(var n=0,i=0,r=0,o=new Float32Array(4*t.length);n<t.length;)o[r]=1&Math.floor(.5*r+.5)?-t[n]:t[n],4==++i&&(i=0,n++),r++;this._thickness.set(o,4*e)}else this._thickness&&(this._thickness.dispose(),this._thickness=null);this.invalidateVertices(this._thickness),this._verticesDirty[this._thickness.id]=!1},e.prototype.setColors=function(t,e){if(void 0===e&&(e=0),t){if(t==this._colors)return;if(t instanceof Gi)this.clearVertices(this._colors),this._colors=t;else{this._colors||(this._colors=new Gi(this._concatenatedBuffer));for(var n=0,i=0,r=0,o=new Uint8Array(4*t.length);n<t.length;)r/4&1?(o[r]=t[n+4],o[r+1]=t[n+5],o[r+2]=t[n+6],o[r+3]=t[n+7]):(o[r]=t[n],o[r+1]=t[n+1],o[r+2]=t[n+2],o[r+3]=t[n+3]),4==++i&&(i=0,n+=8),r+=4;this._colors.set(o,4*e)}}else this._colors=Hr.generateColors(this.indices,this._colors,this._concatenatedBuffer,this._numVertices);this.invalidateVertices(this._colors),this._verticesDirty[this._colors.id]=!1},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._positions.dispose(),this._positions=null,this._thickness&&(this._thickness.dispose(),this._thickness=null),this._colors&&(this._colors.dispose(),this._colors=null)},e.prototype.clone=function(){var t=new e(this._concatenatedBuffer?this._concatenatedBuffer.clone():null);return t.setIndices(this.indices.clone()),t.setPositions(this._positions.clone()),this._thickness&&t.setThickness(this._thickness.clone()),this._colors&&t.setColors(this._colors.clone()),t},e.prototype.testCollision=function(t,e,n,i,r,o,a){void 0===a&&(a=0);var s=this.getThicknessScale(t,e.containerNode,!0),l=(s.x+s.y)/2,u=-e.rayPosition.z/e.rayDirection.z,c=new L(e.rayPosition.x+u*e.rayDirection.x,e.rayPosition.y+u*e.rayDirection.y);return!!Co.hitTest(c.x,c.y,0,l,n,this,this._numElements,a)&&(e.rayEntryDistance=u,e.position=c,e.normal=new L(0,0,1),!0)},e.assetType="[asset LineElements]",e}(eo),Eo=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._scale=new L,i._thickness=1,i._vaoIsInvalid=!0,i._lineElements=e,i._vao=n.context.hasVao&&Nr&&!i._lineElements.isDynamic?n.context.createVao():null,i}return o(e,t),e.prototype.onInvalidate=function(e){t.prototype.onInvalidate.call(this,e),this._vaoIsInvalid=!0},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._lineElements=null,this._vaoIsInvalid=!0,this._vao&&(this._vao.dispose(),this._vao=null)},e.prototype._setRenderState=function(e,n){t.prototype._setRenderState.call(this,e,n);var i=this._asset,r=n.view,o=e.renderer.getRenderElements(e.stageElements.elements);this._vao&&this._vao.bind(),this._vao&&!this._vaoIsInvalid||(n.colorBufferIndex>=0&&this.activateVertexBufferVO(n.colorBufferIndex,this._lineElements.colors),this.activateVertexBufferVO(0,this._lineElements.positions,i.dimension),this.activateVertexBufferVO(o.secondaryPositionIndex,this._lineElements.positions,i.dimension,2*i.dimension*2),this.activateVertexBufferVO(o.thicknessIndex,this._lineElements.thickness),n.uvIndex>=0&&this.activateVertexBufferVO(n.uvIndex,this._lineElements.positions,2),this._vaoIsInvalid=!1);var a=o.uOffsets.oMisc,s=n.vertexConstantData;this._scale.copyFrom(e.node.getMatrix3D().decompose()[3]);var l=this._lineElements.scaleMode,u=this._lineElements.half_thickness;l==bo.NORMAL?(s[a+0]=u*this._scale.x*this._thickness/1e3>.5/(r.focalLength*r.pixelRatio)?this._scale.x*this._thickness/1e3:.5/(u*r.focalLength*r.pixelRatio),s[a+1]=u*this._scale.y*this._thickness/1e3>.5/r.focalLength?this._scale.y*this._thickness/1e3:.5/(u*r.focalLength)):l==bo.HAIRLINE?(s[a+0]=this._thickness/(r.focalLength*r.pixelRatio),s[a+1]=this._thickness/r.focalLength):(s[a+0]=this._thickness/Math.min(r.width,r.height),s[a+1]=this._thickness/Math.min(r.width,r.height)),s[a+2]=r.projection.near},e.prototype.draw=function(t,e,n,i){var r=this._stage.context;e.viewMatrix.copyFrom(e.view.frustumMatrix3D,!0);var o=U.CALCULATION_MATRIX;o.copyFrom(t.node.getMatrix3D()),o.append(e.view.projection.transform.inverseMatrix3D),e.sceneMatrix.copyFrom(o,!0),r.setProgramConstantsFromArray(kt.VERTEX,e.vertexConstantData),r.setProgramConstantsFromArray(kt.FRAGMENT,e.fragmentConstantData),this._indices?this.getIndexBufferGL().draw(Rt.TRIANGLES,3*i,3*n||this.numIndices):this._stage.context.drawVertices(Rt.TRIANGLES,i,n||this.numVertices),this._vao&&this._vao.unbind()},e.prototype._pGetOverflowElements=function(){return new e(this._lineElements,this._stage)},e}(Xr),wo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.secondaryPositionIndex=-1,e.thicknessIndex=-1,e.uOffsets={oMisc:0},e}return o(e,t),e.prototype._includeDependencies=function(t){},e.prototype._getVertexCode=function(t,e,n){var i=t.globalPosDependencies>0?n.globalPositionVertex:n.animatedPosition,r=e.getFreeVertexAttribute();this.secondaryPositionIndex=r.index;var o=e.getFreeVertexAttribute();this.thicknessIndex=o.index;var a=e.getFreeVertexConstant();e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.getFreeVertexConstant(),t.viewMatrixIndex=4*a.index;var s=e.getFreeVertexConstant();this.uOffsets.oMisc=4*s.index;var l=e.getFreeVertexConstant();e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.getFreeVertexConstant(),t.sceneMatrixIndex=4*l.index;var u=e.getFreeVertexVectorTemp();e.addVertexTempUsages(u,1);var c=e.getFreeVertexVectorTemp();e.addVertexTempUsages(c,1);var h=e.getFreeVertexVectorTemp();e.addVertexTempUsages(h,1);var p=e.getFreeVertexVectorTemp();e.addVertexTempUsages(p,1);var d=e.getFreeVertexVectorTemp();e.addVertexTempUsages(d,1);var f=e.getFreeVertexVectorTemp();e.addVertexTempUsages(f,1);var _=["m44 "+u+", "+i+", "+l,"m44 "+c+", "+r+", "+l,"sub "+h+", "+c+", "+u+" \t\t\t","slt "+p+".x, "+u+".z, "+s+".z","sub "+p+".y, #native( 1.0 )native#, "+p+".x\t\t\t","add "+f+".x, "+u+".z, "+s+".z\t\t\t","sub "+f+".y, "+u+".z, "+c+".z\t\t\t","seq "+f+".z, "+f+".y, #native( vec4(0.0) )native#","add "+f+".y, "+f+".y, "+f+".z","div "+f+".z, "+f+".x, "+f+".y","mul "+f+".xyz, "+f+".zzz, "+h+".xyz\t","add "+d+".xyz, "+u+".xyz, "+f+".xyz\t","mov "+d+".w, #native( 1.0 )native#\t\t\t","mul "+u+", "+u+", "+p+".yyyy\t\t\t","mul "+d+", "+d+", "+p+".xxxx\t\t\t","add "+u+", "+u+", "+d+"\t\t\t\t","nrm "+h+".xyz, "+h+".xyz\t\t\t","nrm "+p+".xyz, "+u+".xyz\t\t\t","mov "+p+".w, #native( 1.0 )native#\t\t\t\t","crs "+d+".xyz, "+h+", "+p+"\t\t\t","nrm "+d+".xyz, "+d+".xyz\t\t\t","mul "+d+".xyz, "+d+".xyz, "+o+".xxx\t","mov "+d+".w, #native( 1.0 )native#\t\t\t","mul "+f+".x, "+u+".z, #native( -1.0 )native#\t\t\t","mul "+d+".xyz, "+d+".xyz, "+f+".xxx\t","mul "+d+".xyz, "+d+".xyz, "+s+".xy\t","add "+u+".xyz, "+u+".xyz, "+d+".xyz\t","m44 op, "+u+", "+a,""];return e.removeVertexTempUsage(u),e.removeVertexTempUsage(c),e.removeVertexTempUsage(h),e.removeVertexTempUsage(p),e.removeVertexTempUsage(d),e.removeVertexTempUsage(f),_.join("\n")},e.prototype._getFragmentCode=function(t,e,n){return""},e}(Mr);function So(t,e){if(void 0===e&&(e="assertion failed"),""===t&&(t=!0),!t)throw"undefined"!=typeof console&&"assert"in console?(console.assert(!1,e),new Error(e)):new Error(e)}function Do(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),i>0||r>0&&r<e.length?(r<=0&&(r=e.length-i),t.set(e.subarray(i,i+r),n)):t.set(e,n)}no.registerElements(wo,Io),Pi.registerAbstraction(Eo,Io),console.debug("AwayJS - Renderer - 0.11.65");var To,Po=function(){function t(t,e,n,i){this.xMin=0|t,this.yMin=0|e,this.xMax=0|n,this.yMax=0|i}return t.FromUntyped=function(e){return new t(e.xMin,e.yMin,e.xMax,e.yMax)},t.FromRectangle=function(e){return new t(20*e.x|0,20*e.y|0,20*(e.x+e.width)|0,20*(e.y+e.height)|0)},t.prototype.setElements=function(t,e,n,i){this.xMin=t,this.yMin=e,this.xMax=n,this.yMax=i},t.prototype.copyFrom=function(t){this.setElements(t.xMin,t.yMin,t.xMax,t.yMax)},t.prototype.contains=function(t,e){return t<this.xMin!=t<this.xMax&&e<this.yMin!=e<this.yMax},t.prototype.unionInPlace=function(t){t.isEmpty()||(this.extendByPoint(t.xMin,t.yMin),this.extendByPoint(t.xMax,t.yMax))},t.prototype.extendByPoint=function(t,e){this.extendByX(t),this.extendByY(e)},t.prototype.extendByX=function(t){134217728!==this.xMin?(this.xMin=Math.min(this.xMin,t),this.xMax=Math.max(this.xMax,t)):this.xMin=this.xMax=t},t.prototype.extendByY=function(t){134217728!==this.yMin?(this.yMin=Math.min(this.yMin,t),this.yMax=Math.max(this.yMax,t)):this.yMin=this.yMax=t},t.prototype.intersects=function(t){return this.contains(t.xMin,t.yMin)||this.contains(t.xMax,t.yMax)},t.prototype.isEmpty=function(){return this.xMax<=this.xMin||this.yMax<=this.yMin},Object.defineProperty(t.prototype,"width",{get:function(){return this.xMax-this.xMin},set:function(t){this.xMax=this.xMin+t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.yMax-this.yMin},set:function(t){this.yMax=this.yMin+t},enumerable:!1,configurable:!0}),t.prototype.getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t));return e*(this.xMax-this.xMin)+n*(this.yMax-this.yMin)},t.prototype.getBaseHeight=function(t){var e=Math.abs(Math.cos(t));return Math.abs(Math.sin(t))*(this.xMax-this.xMin)+e*(this.yMax-this.yMin)},t.prototype.setEmpty=function(){this.xMin=this.yMin=this.xMax=this.yMax=0},t.prototype.setToSentinels=function(){this.xMin=this.yMin=this.xMax=this.yMax=134217728},t.prototype.clone=function(){return new t(this.xMin,this.yMin,this.xMax,this.yMax)},t.prototype.toString=function(){return"{ xMin: "+this.xMin+", xMin: "+this.yMin+", xMax: "+this.xMax+", xMax: "+this.yMax+" }"},t}();function Bo(t,e,n){return Math.max(e,Math.min(n,t))}function Oo(t){return null==t}function Mo(t){for(var e=new Uint8Array(4*t.length),n=0,i=0,r=t.length;i<r;i++){var o=t.charCodeAt(i);if(o<=127)e[n++]=o;else{if(55296<=o&&o<=56319){var a=t.charCodeAt(i+1);56320<=a&&a<=57343&&(o=((1023&o)<<10)+(1023&a)+65536,++i)}4292870144&o?(e[n++]=248|o>>>24&3,e[n++]=128|o>>>18&63,e[n++]=128|o>>>12&63,e[n++]=128|o>>>6&63,e[n++]=128|63&o):4294901760&o?(e[n++]=240|o>>>18&7,e[n++]=128|o>>>12&63,e[n++]=128|o>>>6&63,e[n++]=128|63&o):4294965248&o?(e[n++]=224|o>>>12&15,e[n++]=128|o>>>6&63,e[n++]=128|63&o):(e[n++]=192|o>>>6&31,e[n++]=128|63&o)}}return e.subarray(0,n)}function Lo(t){for(var e=0,n="";e<t.length;){var i=255&t[e++];if(i<=127)n+=String.fromCharCode(i);else{var r=192,o=5;do{if((i&(r>>1|128))===r)break;r=r>>1|128,--o}while(o>=0);if(o<=0){n+=String.fromCharCode(i);continue}for(var a=i&(1<<o)-1,s=!1,l=5;l>=o;--l){var u=t[e++];if(128!=(192&u)){s=!0;break}a=a<<6|63&u}if(s){for(var c=e-(7-l);c<e;++c)n+=String.fromCharCode(255&t[c]);continue}n+=a>=65536?String.fromCharCode(a-65536>>10&1023|55296,1023&a|56320):String.fromCharCode(a)}}return n}!function(t){t[t.None=0]="None",t[t.PremultipliedAlphaARGB=1]="PremultipliedAlphaARGB",t[t.StraightAlphaARGB=2]="StraightAlphaARGB",t[t.StraightAlphaRGBA=3]="StraightAlphaRGBA",t[t.JPEG=4]="JPEG",t[t.PNG=5]="PNG",t[t.GIF=6]="GIF"}(To||(To={}));var Ro=self.TextEncoder?new self.TextEncoder:null,No=self.TextDecoder?new self.TextDecoder:null;function Fo(t){if(!Ro)return Mo(t);try{return Ro.encode(t)}catch(e){return Mo(t)}}function ko(t){if(!No)return Lo(t);try{return No.decode(t)}catch(e){return Lo(t)}}var Uo,Vo=function(){function t(t){void 0===t&&(t=32),this._list=[],this._maxSize=t}return t.prototype.acquire=function(e){if(t._enabled)for(var n=this._list,i=0;i<n.length;i++){var r=n[i];if(r.byteLength>=e)return n.splice(i,1),r}return new ArrayBuffer(e)},t.prototype.release=function(e){if(t._enabled){var n=this._list;n.length===this._maxSize&&n.shift(),n.push(e)}},t.prototype.ensureUint8ArrayLength=function(t,e){if(t.length>=e)return t;var n=Math.max(t.length+e,1+(3*t.length>>1)),i=new Uint8Array(this.acquire(n),0,n);return i.set(t),this.release(t.buffer),i},t.prototype.ensureFloat64ArrayLength=function(t,e){if(t.length>=e)return t;var n=Math.max(t.length+e,1+(3*t.length>>1)),i=new Float64Array(this.acquire(n*Float64Array.BYTES_PER_ELEMENT),0,n);return i.set(t),this.release(t.buffer),i},t._enabled=!0,t}();!function(t){var e=new ArrayBuffer(8);function n(t){return 256*t<<16>>16}function i(t){return t/256}t.i8=new Int8Array(e),t.u8=new Uint8Array(e),t.i32=new Int32Array(e),t.f32=new Float32Array(e),t.f64=new Float64Array(e),t.nativeLittleEndian=1===new Int8Array(new Int32Array([1]).buffer)[0],t.floatToInt32=function(e){return t.f32[0]=e,t.i32[0]},t.int32ToFloat=function(e){return t.i32[0]=e,t.f32[0]},t.swap16=function(t){return(255&t)<<8|t>>8&255},t.swap32=function(t){return(255&t)<<24|(65280&t)<<8|t>>8&65280|t>>24&255},t.toS8U8=n,t.fromS8U8=i,t.clampS8U8=function(t){return i(n(t))},t.toS16=function(t){return t<<16>>16},t.bitCount=function(t){return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24},t.ones=function(t){return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24},t.trailingZeros=function(e){return t.ones((e&-e)-1)},t.getFlags=function(t,e){var n="";for(t=0;t<e.length;t++)t&1<<t&&(n+=e[t]+" ");return 0===n.length?"":n.trim()},t.isPowerOfTwo=function(t){return t&&!(t&t-1)},t.roundToMultipleOfFour=function(t){return t+3&-4},t.nearestPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},t.roundToMultipleOfPowerOfTwo=function(t,e){var n=(1<<e)-1;return t+n&~n},t.toHEX=function(t){return"0x"+("00000000"+(t=t<0?4294967295+t+1:t).toString(16)).substr(-8)}}(Uo||(Uo={}));var jo=function(){return function(){}}(),Go=function(){return function(t,e){this.symbolId=t,this.className=e}}(),Qo=function(){return function(t,e,n){this.tagCode=t,this.byteOffset=e,this.byteLength=n}}(),zo=function(t){function e(e,n,i,r){var o=t.call(this,n,i,r)||this;return o.id=e,o}return o(e,t),e}(Qo),Ho=function(t){function e(e,n,i,r){var o=t.call(this,e,n.tagCode,n.byteOffset,n.byteLength)||this;return o.type=i,o.definition=r,o.ready=!1,o}return o(e,t),e}(zo);function Xo(t){return"string"==typeof t?t:null==t?null:t+""}var Yo,qo={code:2006,message:"The supplied index is out of bounds."},Ko={code:2007,message:"Parameter %1 must be non-null."},Wo={code:2030,message:"End of file was encountered.",fqn:"flash.errors.EOFError"},Jo={code:2058,message:"There was an error decompressing the data.",fqn:"flash.errors.IOError"},Zo=Tt.instance.addStore("graphics",{ALLOW_INTERNAL_POOL:{FILLS:!1,STROKES:!1},CLEARS_BEFORE_POOLING:10,ALLOW_COMBINER:{FILLS:!0,STROKES:!1},USE_NATIVE_DEFLATE:!0,MINIMUM_DRAWING_DISTANCE:.01,CURVE_TESSELATION_COUNT:6,SMOOTH_BITMAP_FILL_DEFAULT:!1}),$o=function(){function t(e,n){if(this._verHeader=e,this._size=n,this.isDone=!1,this._isRunned=!1,this._blockPosition=0,this.onError=function(t){},e&&(this._size-=8),!t.isSupported)throw"DecompressionStream is not supported!";var i=new self.DecompressionStream("deflate");this._writer=i.writable.getWriter(),this._reader=i.readable.getReader(),this._buffer=new Uint8Array(n),this._processBlocks=this._processBlocks.bind(this)}return Object.defineProperty(t.prototype,"closed",{get:function(){return!this._isRunned&&this.isDone},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isSupported",{get:function(){return"DecompressionStream"in self},enumerable:!1,configurable:!0}),t.prototype._processBlocks=function(t){var e=t.done,n=t.value,i=this._reader;return n&&(n.length>=this._size?(this._buffer=n,this._blockPosition=this._size):(this._buffer.set(n,this._blockPosition),this._blockPosition+=n.length)),e||this._blockPosition>=this._size?(this.isDone=!0,this.onData&&this.onData(this._buffer),this._buffer):i.read().then(this._processBlocks)},t.prototype.push=function(t){8!==t.length?(this._writer.write(t),this._isRunned||(this._isRunned=!0,this._reader.read().then(this._processBlocks).catch(this.onError))):this.onData&&this.onData(t)},t.prototype.close=function(){this._isRunned&&this.isDone&&(this._writer.close(),this._isRunned=!1)},t}();!function(t){t[t.INIT=0]="INIT",t[t.BLOCK_0=1]="BLOCK_0",t[t.BLOCK_1=2]="BLOCK_1",t[t.BLOCK_2_PRE=3]="BLOCK_2_PRE",t[t.BLOCK_2=4]="BLOCK_2",t[t.DONE=5]="DONE",t[t.ERROR=6]="ERROR",t[t.VERIFY_HEADER=7]="VERIFY_HEADER"}(Yo||(Yo={}));var ta,ea,na,ia,ra,oa,aa,sa,la=32768,ua=65536,ca=function(){function t(t){}return t.prototype.push=function(t){},t.prototype.close=function(){},t.create=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=!0),n&&!$o.isSupported&&console.warn("[NativeDeflate] Is not supported!"),n&&$o.isSupported&&Zo.USE_NATIVE_DEFLATE){if(e)return new $o(t,e);console.debug("[NativeDeflate] size not presented, can`t use a native implementation")}return new ha(t)},t.prototype._processZLibHeader=function(t,e,n){if(e+2>n)return 0;var i=t[e]<<8|t[e+1],r=null;return 2048!=(3840&i)?r="inflate: unknown compression method":i%31!=0?r="inflate: bad FCHECK":32&i&&(r="inflate: FDICT bit set"),r?(this.onError&&this.onError(r),-1):2},t.inflate=function(e,n,i){var r=0,o=new Uint8Array(n),a=t.create(i,0,!1);return a.onData=function(t){var e=Math.min(t.length,o.length-r);e&&Do(o,t,r,0,e),r+=e},a.onError=function(t){throw new Error(t)},a.push(e),a.close(),o},t}(),ha=function(t){function e(e){var n=t.call(this,e)||this;return n._buffer=null,n._bufferSize=0,n._bufferPosition=0,n._bitBuffer=0,n._bitLength=0,n._window=new Uint8Array(65794),n._windowPosition=0,n._state=e?Yo.VERIFY_HEADER:Yo.INIT,n._isFinalBlock=!1,n._literalTable=null,n._distanceTable=null,n._block0Read=0,n._block2State=null,n._copyState={state:0,len:0,lenBits:0,dist:0,distBits:0},pa||(!function(){ta=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ea=new Uint16Array(30),na=new Uint8Array(30);for(var t=0,e=0,n=1;t<30;++t)ea[t]=n,n+=1<<(na[t]=~~((e+=t>2?1:0)/2));var i=new Uint8Array(288);for(t=0;t<32;++t)i[t]=5;ia=da(i.subarray(0,32)),ra=new Uint16Array(29),oa=new Uint8Array(29);for(t=0,e=0,n=3;t<29;++t)ra[t]=n-(28==t?1:0),n+=1<<(oa[t]=~~((e+=t>4?1:0)/4%6));for(t=0;t<288;++t)i[t]=t<144||t>279?8:t<256?9:7;aa=da(i)}(),pa=!0),n}return o(e,t),e.prototype.push=function(t){if(!this._buffer||this._buffer.length<this._bufferSize+t.length){var e=new Uint8Array(this._bufferSize+t.length);this._buffer&&e.set(this._buffer),this._buffer=e}this._buffer.set(t,this._bufferSize),this._bufferSize+=t.length,this._bufferPosition=0;var n=!1;do{var i=this._windowPosition;if(this._state===Yo.INIT&&(n=this._decodeInitState()))break;switch(this._state){case Yo.BLOCK_0:n=this._decodeBlock0();break;case Yo.BLOCK_2_PRE:if(n=this._decodeBlock2Pre())break;case Yo.BLOCK_1:case Yo.BLOCK_2:n=this._decodeBlock();break;case Yo.ERROR:case Yo.DONE:this._bufferPosition=this._bufferSize;break;case Yo.VERIFY_HEADER:var r=this._processZLibHeader(this._buffer,this._bufferPosition,this._bufferSize);r>0?(this._bufferPosition+=r,this._state=Yo.INIT):0===r?n=!0:this._state=Yo.ERROR}this._windowPosition-i>0&&this.onData(this._window.subarray(i,this._windowPosition)),this._windowPosition>=ua&&("copyWithin"in this._buffer?this._window.copyWithin(0,this._windowPosition-la,this._windowPosition):this._window.set(this._window.subarray(this._windowPosition-la,this._windowPosition)),this._windowPosition=la)}while(!n&&this._bufferPosition<this._bufferSize);this._bufferPosition<this._bufferSize?("copyWithin"in this._buffer?this._buffer.copyWithin(0,this._bufferPosition,this._bufferSize):this._buffer.set(this._buffer.subarray(this._bufferPosition,this._bufferSize)),this._bufferSize-=this._bufferPosition):this._bufferSize=0},e.prototype._decodeInitState=function(){if(this._isFinalBlock)return this._state=Yo.DONE,!1;var t,e=this._buffer,n=this._bufferSize,i=this._bitBuffer,r=this._bitLength,o=this._bufferPosition;if((n-o<<3)+r<3)return!0;r<3&&(i|=e[o++]<<r,r+=8);var a=7&i;switch(i>>=3,r-=3,a>>1){case 0:if(i=0,r=0,n-o<4)return!0;var s=e[o]|e[o+1]<<8,l=e[o+2]|e[o+3]<<8;if(o+=4,65535!=(s^l)){this._error("inflate: invalid block 0 length"),t=Yo.ERROR;break}0===s?t=Yo.INIT:(this._block0Read=s,t=Yo.BLOCK_0);break;case 1:t=Yo.BLOCK_1,this._literalTable=aa,this._distanceTable=ia;break;case 2:if((n-o<<3)+r<26)return!0;for(;r<14;)i|=e[o++]<<r,r+=8;var u=4+(i>>10&15);if((n-o<<3)+r<14+3*u)return!0;var c={numLiteralCodes:257+(31&i),numDistanceCodes:1+(i>>5&31),codeLengthTable:void 0,bitLengths:void 0,codesRead:0,dupBits:0};i>>=14,r-=14;for(var h=new Uint8Array(19),p=0;p<u;++p)r<3&&(i|=e[o++]<<r,r+=8),h[ta[p]]=7&i,i>>=3,r-=3;for(;p<19;p++)h[ta[p]]=0;c.bitLengths=new Uint8Array(c.numLiteralCodes+c.numDistanceCodes),c.codeLengthTable=da(h),this._block2State=c,t=Yo.BLOCK_2_PRE;break;default:return this._error("inflate: unsupported block type"),t=Yo.ERROR,!1}return this._isFinalBlock=!!(1&a),this._state=t,this._bufferPosition=o,this._bitBuffer=i,this._bitLength=r,!1},e.prototype._error=function(t){this.onError&&this.onError(t)},e.prototype._decodeBlock0=function(){var t=this._bufferPosition,e=this._windowPosition,n=this._block0Read,i=65794-e,r=this._bufferSize-t,o=r<n,a=Math.min(i,r,n);return this._window.set(this._buffer.subarray(t,t+a),e),this._windowPosition=e+a,this._bufferPosition=t+a,this._block0Read=n-a,n===a?(this._state=Yo.INIT,!1):o&&i<r},e.prototype._readBits=function(t){var e=this._bitBuffer,n=this._bitLength;if(t>n){var i=this._bufferPosition,r=this._bufferSize;do{if(i>=r)return this._bufferPosition=i,this._bitBuffer=e,this._bitLength=n,-1;e|=this._buffer[i++]<<n,n+=8}while(t>n);this._bufferPosition=i}return this._bitBuffer=e>>t,this._bitLength=n-t,e&(1<<t)-1},e.prototype._readCode=function(t){var e=this._bitBuffer,n=this._bitLength,i=t.maxBits;if(i>n){var r=this._bufferPosition,o=this._bufferSize;do{if(r>=o)return this._bufferPosition=r,this._bitBuffer=e,this._bitLength=n,-1;e|=this._buffer[r++]<<n,n+=8}while(i>n);this._bufferPosition=r}var a=t.codes[e&(1<<i)-1],s=a>>16;return 32768&a?(this._error("inflate: invalid encoding"),this._state=Yo.ERROR,-1):(this._bitBuffer=e>>s,this._bitLength=n-s,65535&a)},e.prototype._decodeBlock2Pre=function(){var t=this._block2State,e=t.numLiteralCodes+t.numDistanceCodes,n=t.bitLengths,i=t.codesRead,r=i>0?n[i-1]:0,o=t.codeLengthTable;if(t.dupBits>0){if((s=this._readBits(t.dupBits))<0)return!0;for(;s--;)n[i++]=r;t.dupBits=0}for(;i<e;){var a=this._readCode(o);if(a<0)return t.codesRead=i,!0;if(a<16)n[i++]=r=a;else{var s,l;switch(a){case 16:l=2,s=3,a=r;break;case 17:l=3,s=3,a=0;break;case 18:l=7,s=11,a=0}for(;s--;)n[i++]=a;if((s=this._readBits(l))<0)return t.codesRead=i,t.dupBits=l,!0;for(;s--;)n[i++]=a;r=a}}return this._literalTable=da(n.subarray(0,t.numLiteralCodes)),this._distanceTable=da(n.subarray(t.numLiteralCodes)),this._state=Yo.BLOCK_2,this._block2State=null,!1},e.prototype._decodeBlock=function(){var t,e,n,i,r,o,a,s=this._literalTable,l=this._distanceTable,u=this._window,c=this._windowPosition,h=this._copyState;if(0!==h.state)switch(h.state){case 1:if(e=0,(e=this._readBits(h.lenBits))<0)return!0;h.len+=e,h.state=2;case 2:if((n=this._readCode(l))<0)return!0;h.distBits=na[n],h.dist=ea[n],h.state=3;case 3:if(e=0,h.distBits>0&&(e=this._readBits(h.distBits))<0)return!0;for(o=h.dist+e,i=h.len,t=c-o;i--;)u[c++]=u[t++];if(h.state=0,c>=ua)return this._windowPosition=c,!1}do{if((n=this._readCode(s))<0)return this._windowPosition=c,!0;if(n<256)u[c++]=n;else{if(!(n>256)){this._state=Yo.INIT;break}if(this._windowPosition=c,r=oa[n-=257],i=ra[n],(e=0===r?0:this._readBits(r))<0)return h.state=1,h.len=i,h.lenBits=r,!0;if(i+=e,(n=this._readCode(l))<0)return h.state=2,h.len=i,!0;if(a=na[n],o=ea[n],(e=0===a?0:this._readBits(a))<0)return h.state=3,h.len=i,h.dist=o,h.distBits=a,!0;for(t=c-(o+=e);i--;)u[c++]=u[t++]}}while(c<ua);return this._windowPosition=c,!1},e}(ca),pa=!1;function da(t){for(var e=Math.max.apply(null,t),n=t.length,i=1<<e,r=new Uint32Array(i),o=e<<16|65535,a=0;a<i;a++)r[a]=o;for(var s=0,l=1,u=2;l<=e;s<<=1,++l,u<<=1)for(var c=0;c<n;++c)if(t[c]===l){for(var h=0,p=0;p<l;++p)h=2*h+(s>>p&1);for(p=h;p<i;p+=u)r[p]=l<<16|c;++s}return{codes:r,maxBits:e}}!function(t){t[t.WRITE=0]="WRITE",t[t.DONE=1]="DONE",t[t.ZLIB_HEADER=2]="ZLIB_HEADER"}(sa||(sa={}));var fa=function(){function t(){this.a=1,this.b=0}return t.prototype.update=function(t,e,n){for(var i=this.a,r=this.b,o=e;o<n;++o)r=(r+(i=(i+(255&t[o]))%65521))%65521;this.a=i,this.b=r},t.prototype.getChecksum=function(){return this.b<<16|this.a},t}(),_a=function(){function t(t){this._writeZlibHeader=t,this._state=t?sa.ZLIB_HEADER:sa.WRITE,this._adler32=t?new fa:null}return t.prototype.push=function(t){this._state===sa.ZLIB_HEADER&&(this.onData(new Uint8Array([120,156])),this._state=sa.WRITE);for(var e=t.length,n=e+5*Math.ceil(e/65535),i=new Uint8Array(n),r=0,o=0;e>65535;)i.set(new Uint8Array([0,255,255,0,0]),r),r+=5,i.set(t.subarray(o,o+65535),r),o+=65535,r+=65535,e-=65535;i.set(new Uint8Array([0,255&e,e>>8&255,255&~e,~e>>8&255]),r),r+=5,i.set(t.subarray(o,e),r),this.onData(i),this._adler32&&this._adler32.update(t,0,e)},t.prototype.close=function(){if(this._state=sa.DONE,this.onData(new Uint8Array([1,0,0,255,255])),this._adler32){var t=this._adler32.getChecksum();this.onData(new Uint8Array([255&t,t>>8&255,t>>16&255,t>>>24&255]))}},t}(),ga=function(){function t(){this.available=0,this.pos=0,this.buffer=new Uint8Array(2e3)}return t.prototype.append=function(t){var e=this.pos+this.available,n=e+t.length;if(n>this.buffer.length){for(var i=2*this.buffer.length;i<n;)i*=2;var r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}this.buffer.set(t,e),this.available+=t.length},t.prototype.compact=function(){0!==this.available&&(this.buffer.set(this.buffer.subarray(this.pos,this.pos+this.available),0),this.pos=0)},t.prototype.readByte=function(){if(this.available<=0)throw new Error("Unexpected end of file");return this.available--,this.buffer[this.pos++]},t}(),ma=function(){function t(t){this.onData=t,this.processed=0}return t.prototype.writeBytes=function(t){this.onData.call(null,t),this.processed+=t.length},t}(),ya=function(){function t(t){this.outStream=t,this.buf=null,this.pos=0,this.size=0,this.isFull=!1,this.writePos=0,this.totalPos=0}return t.prototype.create=function(t){this.buf=new Uint8Array(t),this.pos=0,this.size=t,this.isFull=!1,this.writePos=0,this.totalPos=0},t.prototype.putByte=function(t){this.totalPos++,this.buf[this.pos++]=t,this.pos===this.size&&(this.flush(),this.pos=0,this.isFull=!0)},t.prototype.getByte=function(t){return this.buf[t<=this.pos?this.pos-t:this.size-t+this.pos]},t.prototype.flush=function(){this.writePos<this.pos&&(this.outStream.writeBytes(this.buf.subarray(this.writePos,this.pos)),this.writePos=this.pos===this.size?0:this.pos)},t.prototype.copyMatch=function(t,e){for(var n=this.pos,i=this.size,r=this.buf,o=t<=n?n-t:i-t+n,a=e;a>0;){for(var s=Math.min(Math.min(a,i-n),i-o),l=0;l<s;l++){var u=r[o++];r[n++]=u}n===i&&(this.pos=n,this.flush(),n=0,this.isFull=!0),o===i&&(o=0),a-=s}this.pos=n,this.totalPos+=e},t.prototype.checkDistance=function(t){return t<=this.pos||this.isFull},t.prototype.isEmpty=function(){return 0===this.pos&&!this.isFull},t}();function Aa(t){for(var e=new Uint16Array(t),n=0;n<t;n++)e[n]=1024;return e}var va=1<<24,ba=function(){function t(t){this.inStream=t,this.range=0,this.code=0,this.corrupted=!1}return t.prototype.init=function(){0!==this.inStream.readByte()&&(this.corrupted=!0),this.range=-1;for(var t=0,e=0;e<4;e++)t=t<<8|this.inStream.readByte();t===this.range&&(this.corrupted=!0),this.code=t},t.prototype.isFinishedOK=function(){return 0===this.code},t.prototype.decodeDirectBits=function(t){var e=0,n=this.range,i=this.code;do{var r=(i=i-(n=n>>>1|0)|0)>>31;(i=i+(n&r)|0)===n&&(this.corrupted=!0),n>=0&&n<va&&(n<<=8,i=i<<8|this.inStream.readByte()),e=(e<<1)+r+1|0}while(--t);return this.range=n,this.code=i,e},t.prototype.decodeBit=function(t,e){var n,i=this.range,r=this.code,o=t[e],a=(i>>>11)*o;return r>>>0<a?(o=o+(2048-o>>5)|0,i=0|a,n=0):(o=o-(o>>5)|0,r=r-a|0,i=i-a|0,n=1),t[e]=65535&o,i>=0&&i<va&&(i<<=8,r=r<<8|this.inStream.readByte()),this.range=i,this.code=r,n},t}();function xa(t,e,n,i){for(var r=1,o=0,a=0;a<n;a++){var s=i.decodeBit(t,r+e);r=(r<<1)+s,o|=s<<a}return o}var Ca=function(){function t(t){this.numBits=t,this.probs=Aa(1<<t)}return t.prototype.decode=function(t){for(var e=1,n=0;n<this.numBits;n++)e=(e<<1)+t.decodeBit(this.probs,e);return e-(1<<this.numBits)},t.prototype.reverseDecode=function(t){return xa(this.probs,0,this.numBits,t)},t}();function Ia(t,e){var n=[];n.length=e;for(var i=0;i<e;i++)n[i]=new Ca(t);return n}var Ea=12,wa=function(){function t(){this.choice=Aa(2),this.lowCoder=Ia(3,16),this.midCoder=Ia(3,16),this.highCoder=new Ca(8)}return t.prototype.decode=function(t,e){return 0===t.decodeBit(this.choice,0)?this.lowCoder[e].decode(t):0===t.decodeBit(this.choice,1)?8+this.midCoder[e].decode(t):16+this.highCoder.decode(t)},t}();function Sa(t){return t<4?0:t<10?t-3:t-6}function Da(t){return t<7?7:10}function Ta(t){return t<7?8:11}function Pa(t){return t<7?9:11}var Ba,Oa=function(){function t(t,e){this.rangeDec=new ba(t),this.outWindow=new ya(e),this.markerIsMandatory=!1,this.lc=0,this.pb=0,this.lp=0,this.dictSize=0,this.dictSizeInProperties=0,this.unpackSize=void 0,this.leftToUnpack=void 0,this.reps=new Int32Array(4),this.state=0}return t.prototype.decodeProperties=function(t){var e=t[0];if(e>=225)throw new Error("Incorrect LZMA properties");this.lc=e%9,e=e/9|0,this.pb=e/5|0,this.lp=e%5,this.dictSizeInProperties=0;for(var n=0;n<4;n++)this.dictSizeInProperties|=t[n+1]<<8*n;this.dictSize=this.dictSizeInProperties,this.dictSize<4096&&(this.dictSize=4096)},t.prototype.create=function(){this.outWindow.create(this.dictSize),this.init(),this.rangeDec.init(),this.reps[0]=0,this.reps[1]=0,this.reps[2]=0,this.reps[3]=0,this.state=0,this.leftToUnpack=this.unpackSize},t.prototype.decodeLiteral=function(t,e){var n=this.outWindow,i=this.rangeDec,r=0;n.isEmpty()||(r=n.getByte(1));var o=1,a=768*(((n.totalPos&(1<<this.lp)-1)<<this.lc)+(r>>8-this.lc));if(t>=7){var s=n.getByte(e+1);do{var l=s>>7&1;s<<=1;var u=i.decodeBit(this.litProbs,a+((1+l<<8)+o));if(o=o<<1|u,l!==u)break}while(o<256)}for(;o<256;)o=o<<1|i.decodeBit(this.litProbs,a+o);return o-256&255},t.prototype.decodeDistance=function(t){var e=t;e>3&&(e=3);var n=this.rangeDec,i=this.posSlotDecoder[e].decode(n);if(i<4)return i;var r=(i>>1)-1,o=(2|1&i)<<r;return o=i<14?o+xa(this.posDecoders,o-i,r,n)|0:(o=o+(n.decodeDirectBits(r-4)<<4)|0)+this.alignDecoder.reverseDecode(n)|0},t.prototype.init=function(){this.litProbs=Aa(768<<this.lc+this.lp),this.posSlotDecoder=Ia(6,4),this.alignDecoder=new Ca(4),this.posDecoders=Aa(115),this.isMatch=Aa(192),this.isRep=Aa(Ea),this.isRepG0=Aa(Ea),this.isRepG1=Aa(Ea),this.isRepG2=Aa(Ea),this.isRep0Long=Aa(192),this.lenDecoder=new wa,this.repLenDecoder=new wa},t.prototype.decode=function(t){for(var e=this.rangeDec,n=this.outWindow,i=this.pb,r=this.dictSize,o=this.markerIsMandatory,a=this.leftToUnpack,s=this.isMatch,l=this.isRep,u=this.isRepG0,c=this.isRepG1,h=this.isRepG2,p=this.isRep0Long,d=this.lenDecoder,f=this.repLenDecoder,_=this.reps[0],g=this.reps[1],m=this.reps[2],y=this.reps[3],A=this.state;;){if(t&&e.inStream.available<48){this.outWindow.flush();break}if(0===a&&!o&&(this.outWindow.flush(),e.isFinishedOK()))return Ra;var v=n.totalPos&(1<<i)-1;if(0!==e.decodeBit(s,(A<<4)+v)){var b;if(0!==e.decodeBit(l,A)){if(0===a)return Ma;if(n.isEmpty())return Ma;var x;if(0===e.decodeBit(u,A)){if(0===e.decodeBit(p,(A<<4)+v)){A=Pa(A),n.putByte(n.getByte(_+1)),a--;continue}}else 0===e.decodeBit(c,A)?x=g:(0===e.decodeBit(h,A)?x=m:(x=y,y=m),m=g),g=_,_=x;b=f.decode(e,v),A=Ta(A)}else{if(y=m,m=g,g=_,b=d.decode(e,v),A=Da(A),-1===(_=this.decodeDistance(b)))return this.outWindow.flush(),e.isFinishedOK()?La:Ma;if(0===a)return Ma;if(_>=r||!n.checkDistance(_))return Ma}b+=2;var C=!1;if(void 0!==a&&a<b&&(b=a,C=!0),n.copyMatch(_+1,b),a-=b,C)return Ma}else{if(0===a)return Ma;n.putByte(this.decodeLiteral(A,_)),A=Sa(A),a--}}return this.state=A,this.reps[0]=_,this.reps[1]=g,this.reps[2]=m,this.reps[3]=y,this.leftToUnpack=a,Na},t.prototype.flushOutput=function(){this.outWindow.flush()},t}(),Ma=0,La=1,Ra=2,Na=3;!function(t){t[t.WAIT_FOR_LZMA_HEADER=0]="WAIT_FOR_LZMA_HEADER",t[t.WAIT_FOR_SWF_HEADER=1]="WAIT_FOR_SWF_HEADER",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.CLOSED=3]="CLOSED",t[t.ERROR=4]="ERROR"}(Ba||(Ba={}));var Fa=function(){function t(t){void 0===t&&(t=!1),this._state=t?Ba.WAIT_FOR_SWF_HEADER:Ba.WAIT_FOR_LZMA_HEADER,this.buffer=null}return t.prototype.push=function(t){if(this._state<Ba.PROCESS_DATA){var e=this.buffer?this.buffer.length:0,n=5+(this._state===Ba.WAIT_FOR_SWF_HEADER?17:13);if(e+t.length<n){var i=new Uint8Array(e+t.length);return e>0&&i.set(this.buffer),i.set(t,e),void(this.buffer=i)}var r=new Uint8Array(n);if(e>0&&r.set(this.buffer),r.set(t.subarray(0,n-e),e),this._inStream=new ga,this._inStream.append(r.subarray(n-5)),this._outStream=new ma(function(t){this.onData.call(null,t)}.bind(this)),this._decoder=new Oa(this._inStream,this._outStream),this._state===Ba.WAIT_FOR_SWF_HEADER)this._decoder.decodeProperties(r.subarray(12,17)),this._decoder.markerIsMandatory=!1,this._decoder.unpackSize=((r[4]|r[5]<<8|r[6]<<16|r[7]<<24)>>>0)-8;else{this._decoder.decodeProperties(r.subarray(0,5));for(var o=0,a=!1,s=0;s<8;s++){var l=r[5+s];255!==l&&(a=!0),o|=l<<8*s}this._decoder.markerIsMandatory=!a,this._decoder.unpackSize=a?o:void 0}this._decoder.create(),t=t.subarray(n),this._state=Ba.PROCESS_DATA}else if(this._state!==Ba.PROCESS_DATA)return;try{this._inStream.append(t);var u=this._decoder.decode(!0);this._inStream.compact(),u!==Na&&this._checkError(u)}catch(t){this._decoder.flushOutput(),this._decoder=null,this._error(t)}},t.prototype.close=function(){if(this._state===Ba.PROCESS_DATA){this._state=Ba.CLOSED;try{var t=this._decoder.decode(!1);this._checkError(t)}catch(t){this._decoder.flushOutput(),this._error(t)}this._decoder=null}},t.prototype._error=function(t){this._state=Ba.ERROR,this.onError&&this.onError(t)},t.prototype._checkError=function(t){var e;t===Ma?e="LZMA decoding error":t===Na?e="Decoding is not complete":t===La?void 0!==this._decoder.unpackSize&&this._decoder.unpackSize!==this._outStream.processed&&(e="Finished with end marker before than specified size"):e="Internal LZMA Error",e&&this._error(e)},t}();function ka(t){return"string"==typeof t?t:null==t?null:t+""}for(var Ua,Va=function(){return function(t,e,n){this.buffer=t,this.length=e,this.littleEndian=n}}(),ja=new Uint32Array(33),Ga=1,Qa=0;Ga<=32;Ga++)ja[Ga]=Qa=Qa<<1|1;!function(t){t[t.U8=1]="U8",t[t.I32=2]="I32",t[t.F32=4]="F32"}(Ua||(Ua={}));var za,Ha=function(){function t(e){void 0===e&&(e=t.INITIAL_SIZE),this._buffer||(this._buffer=new ArrayBuffer(e),this._length=0,this._position=0,this._resetViews(),this._littleEndian=t._nativeLittleEndian,this._bitBuffer=0,this._bitLength=0)}return t.FromArrayBuffer=function(e,n){void 0===n&&(n=-1);var i=Object.create(t.prototype);return i._buffer=e,i._length=-1===n?e.byteLength:n,i._position=0,i._resetViews(),i._littleEndian=t._nativeLittleEndian,i._bitBuffer=0,i._bitLength=0,i},t.FromPlainObject=function(e){var n=t.FromArrayBuffer(e.buffer,e.length);return n._littleEndian=e.littleEndian,n},t.prototype.toPlainObject=function(){return new Va(this._buffer,this._length,this._littleEndian)},t.prototype.clone=function(){var e=t.FromArrayBuffer(new Uint8Array(this._u8).buffer,this._length);return e._position=this._position,e._littleEndian=this._littleEndian,e._bitBuffer=this._bitBuffer,e._bitLength=this._bitLength,e},t.prototype._resetViews=function(){this._u8=new Uint8Array(this._buffer),this._i32=null,this._f32=null},t.prototype._requestViews=function(t){3&this._buffer.byteLength||(null===this._i32&&t&Ua.I32&&(this._i32=new Int32Array(this._buffer)),null===this._f32&&t&Ua.F32&&(this._f32=new Float32Array(this._buffer)))},t.prototype.getBytes=function(){return new Uint8Array(this._buffer,0,this._length)},t.prototype._ensureCapacity=function(e){var n=this._buffer;if(!(n.byteLength>=e)){for(var i=Math.max(n.byteLength,1);i<e;)i*=2;i>4294967295&&(So(this.sec),this.sec.throwError("RangeError",qo));var r=t._arrayBufferPool.acquire(i),o=this._u8;this._buffer=r,this._resetViews(),this._u8.set(o);for(var a=this._u8,s=o.length;s<a.length;s++)a[s]=0;t._arrayBufferPool.release(n)}},t.prototype.clear=function(){this._length=0,this._position=0},t.prototype.readBoolean=function(){return 0!==this.readUnsignedByte()},t.prototype.readByte=function(){return this.readUnsignedByte()<<24>>24},t.prototype.readUnsignedByte=function(){return this._position+1>this._length&&(So(this.sec),this.sec.throwError("flash.errors.EOFError",Wo)),this._u8[this._position++]},t.prototype.readBytes=function(t,e,n){var i=this._position;e>>>=0,0===(n>>>=0)&&(n=this._length-i),i+n>this._length&&(So(this.sec),this.sec.throwError("flash.errors.EOFError",Wo)),t.length<e+n&&(t._ensureCapacity(e+n),t.length=e+n),t._u8.set(new Uint8Array(this._buffer,i,n),e),this._position+=n},t.prototype.readShort=function(){return this.readUnsignedShort()<<16>>16},t.prototype.readUnsignedShort=function(){var t=this._u8,e=this._position;e+2>this._length&&(So(this.sec),this.sec.throwError("flash.errors.EOFError",Wo));var n=t[e+0],i=t[e+1];return this._position=e+2,this._littleEndian?i<<8|n:n<<8|i},t.prototype.readInt=function(){var t=this._u8,e=this._position;e+4>this._length&&(So(this.sec),this.sec.throwError("flash.errors.EOFError",Wo));var n=t[e+0],i=t[e+1],r=t[e+2],o=t[e+3];return this._position=e+4,this._littleEndian?o<<24|r<<16|i<<8|n:n<<24|i<<16|r<<8|o},t.prototype.readUnsignedInt=function(){return this.readInt()>>>0},t.prototype.readFloat=function(){var t=this._position;if(t+4>this._length&&(So(this.sec),this.sec.throwError("flash.errors.EOFError",Wo)),this._position=t+4,this._requestViews(Ua.F32),!this._littleEndian||3&t||!this._f32){var e=this._u8,n=Uo.u8;return this._littleEndian?(n[0]=e[t+0],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3]):(n[3]=e[t+0],n[2]=e[t+1],n[1]=e[t+2],n[0]=e[t+3]),Uo.f32[0]}return this._f32[t>>2]},t.prototype.readDouble=function(){var t=this._u8,e=this._position;e+8>this._length&&(So(this.sec),this.sec.throwError("flash.errors.EOFError",Wo));var n=Uo.u8;return this._littleEndian?(n[0]=t[e+0],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],n[4]=t[e+4],n[5]=t[e+5],n[6]=t[e+6],n[7]=t[e+7]):(n[0]=t[e+7],n[1]=t[e+6],n[2]=t[e+5],n[3]=t[e+4],n[4]=t[e+3],n[5]=t[e+2],n[6]=t[e+1],n[7]=t[e+0]),this._position=e+8,Uo.f64[0]},t.prototype.writeBoolean=function(t){this.writeByte(t?1:0)},t.prototype.writeByte=function(t){var e=this._position+1;this._ensureCapacity(e),this._u8[this._position++]=t,e>this._length&&(this._length=e)},t.prototype.writeUnsignedByte=function(t){var e=this._position+1;this._ensureCapacity(e),this._u8[this._position++]=t,e>this._length&&(this._length=e)},t.prototype.writeRawBytes=function(t){var e=this._position+t.length;this._ensureCapacity(e),this._u8.set(t,this._position),this._position=e,e>this._length&&(this._length=e)},t.prototype.writeBytes=function(t,e,n){Oo(t)&&(So(this.sec),this.sec.throwError("TypeError",Ko,"bytes")),e>>>=0,n>>>=0,arguments.length<2&&(e=0),arguments.length<3&&(n=0),e===Bo(e,0,t.length)&&e+n===Bo(e+n,0,t.length)||(So(this.sec),this.sec.throwError("RangeError",qo)),0===n&&(n=t.length-e),this.writeRawBytes(new Uint8Array(t._buffer,e,n))},t.prototype.writeShort=function(t){this.writeUnsignedShort(t)},t.prototype.writeUnsignedShort=function(t){var e=this._position;this._ensureCapacity(e+2);var n=this._u8;this._littleEndian?(n[e+0]=t,n[e+1]=t>>8):(n[e+0]=t>>8,n[e+1]=t),e+=2,this._position=e,e>this._length&&(this._length=e)},t.prototype.writeInt=function(t){this.writeUnsignedInt(t)},t.prototype.write2Ints=function(t,e){this.write2UnsignedInts(t,e)},t.prototype.write4Ints=function(t,e,n,i){this.write4UnsignedInts(t,e,n,i)},t.prototype.writeUnsignedInt=function(e){var n=this._position;if(this._ensureCapacity(n+4),this._requestViews(Ua.I32),this._littleEndian!==t._nativeLittleEndian||3&n||!this._i32){var i=this._u8;this._littleEndian?(i[n+0]=e,i[n+1]=e>>8,i[n+2]=e>>16,i[n+3]=e>>24):(i[n+0]=e>>24,i[n+1]=e>>16,i[n+2]=e>>8,i[n+3]=e)}else this._i32[n>>2]=e;n+=4,this._position=n,n>this._length&&(this._length=n)},t.prototype.write2UnsignedInts=function(e,n){var i=this._position;this._ensureCapacity(i+8),this._requestViews(Ua.I32),this._littleEndian!==t._nativeLittleEndian||3&i||!this._i32?(this.writeUnsignedInt(e),this.writeUnsignedInt(n)):(this._i32[0+(i>>2)]=e,this._i32[1+(i>>2)]=n,i+=8,this._position=i,i>this._length&&(this._length=i))},t.prototype.write4UnsignedInts=function(e,n,i,r){var o=this._position;this._ensureCapacity(o+16),this._requestViews(Ua.I32),this._littleEndian!==t._nativeLittleEndian||3&o||!this._i32?(this.writeUnsignedInt(e),this.writeUnsignedInt(n),this.writeUnsignedInt(i),this.writeUnsignedInt(r)):(this._i32[0+(o>>2)]=e,this._i32[1+(o>>2)]=n,this._i32[2+(o>>2)]=i,this._i32[3+(o>>2)]=r,o+=16,this._position=o,o>this._length&&(this._length=o))},t.prototype.writeFloat=function(e){var n=this._position;if(this._ensureCapacity(n+4),this._requestViews(Ua.F32),this._littleEndian!==t._nativeLittleEndian||3&n||!this._f32){var i=this._u8;Uo.f32[0]=e;var r=Uo.u8;this._littleEndian?(i[n+0]=r[0],i[n+1]=r[1],i[n+2]=r[2],i[n+3]=r[3]):(i[n+0]=r[3],i[n+1]=r[2],i[n+2]=r[1],i[n+3]=r[0])}else this._f32[n>>2]=e;n+=4,this._position=n,n>this._length&&(this._length=n)},t.prototype.write2Floats=function(e,n){var i=this._position;this._ensureCapacity(i+8),this._requestViews(Ua.F32),this._littleEndian!==t._nativeLittleEndian||3&i||!this._f32?(this.writeFloat(e),this.writeFloat(n)):(this._f32[0+(i>>2)]=e,this._f32[1+(i>>2)]=n,i+=8,this._position=i,i>this._length&&(this._length=i))},t.prototype.write6Floats=function(e,n,i,r,o,a){var s=this._position;this._ensureCapacity(s+24),this._requestViews(Ua.F32),this._littleEndian!==t._nativeLittleEndian||3&s||!this._f32?(this.writeFloat(e),this.writeFloat(n),this.writeFloat(i),this.writeFloat(r),this.writeFloat(o),this.writeFloat(a)):(this._f32[0+(s>>2)]=e,this._f32[1+(s>>2)]=n,this._f32[2+(s>>2)]=i,this._f32[3+(s>>2)]=r,this._f32[4+(s>>2)]=o,this._f32[5+(s>>2)]=a,s+=24,this._position=s,s>this._length&&(this._length=s))},t.prototype.writeDouble=function(t){var e=this._position;this._ensureCapacity(e+8);var n=this._u8;Uo.f64[0]=t;var i=Uo.u8;this._littleEndian?(n[e+0]=i[0],n[e+1]=i[1],n[e+2]=i[2],n[e+3]=i[3],n[e+4]=i[4],n[e+5]=i[5],n[e+6]=i[6],n[e+7]=i[7]):(n[e+0]=i[7],n[e+1]=i[6],n[e+2]=i[5],n[e+3]=i[4],n[e+4]=i[3],n[e+5]=i[2],n[e+6]=i[1],n[e+7]=i[0]),e+=8,this._position=e,e>this._length&&(this._length=e)},t.prototype.readRawBytes=function(){return new Int8Array(this._buffer,0,this._length)},t.prototype.writeUTF=function(t){var e=Fo(t=ka(t));this.writeShort(e.length),this.writeRawBytes(e)},t.prototype.writeUTFBytes=function(t){var e=Fo(t=ka(t));this.writeRawBytes(e)},t.prototype.readUTF=function(){return this.readUTFBytes(this.readShort())},t.prototype.readUTFBytes=function(t){t>>>=0;var e=this._position;return e+t>this._length&&(So(this.sec),this.sec.throwError("flash.errors.EOFError",Wo)),this._position+=t,ko(new Uint8Array(this._buffer,e,t))},Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){(t>>>=0)>this._buffer.byteLength&&this._ensureCapacity(t),this._length=t,this._position=Bo(this._position,0,this._length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bytesAvailable",{get:function(){return this._length-this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bytes",{get:function(){return this._u8},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ints",{get:function(){return this._requestViews(Ua.I32),this._i32},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"objectEncoding",{get:function(){return this._objectEncoding},set:function(t){t>>>=0,this._objectEncoding=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endian",{get:function(){return this._littleEndian?"littleEndian":"bigEndian"},set:function(e){e=ka(e),this._littleEndian="auto"===e?t._nativeLittleEndian:"littleEndian"===e},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return ko(new Uint8Array(this._buffer,0,this._length))},t.prototype.toBlob=function(t){return new Blob([new Uint8Array(this._buffer,this._position,this._length)],{type:t})},t.prototype.writeMultiByte=function(t,e){if(t=ka(t),"UTF-8"==(e=ka(e))){var n=Fo(t);this.writeRawBytes(n)}else console.log("packageInternal flash.utils.ObjectOutput::writeMultiByte only encoding supported is UTF-8")},t.prototype.readMultiByte=function(t,e){console.log("packageInternal flash.utils.ObjectInput::readMultiByte")},t.prototype.getValue=function(t){if(!((t|=0)>=this._length))return this._u8[t]},t.prototype.setValue=function(t,e){var n=(t|=0)+1;this._ensureCapacity(n),this._u8[t]=e,n>this._length&&(this._length=n)},t.prototype.readFixed=function(){return this.readInt()/65536},t.prototype.readFixed8=function(){return this.readShort()/256},t.prototype.readFloat16=function(){var t=this.readUnsignedShort(),e=t>>15?-1:1,n=(31744&t)>>10,i=1023&t;return n?31===n?i?NaN:e*(1/0):e*Math.pow(2,n-15)*(1+i/1024):e*Math.pow(2,-14)*(i/1024)},t.prototype.readEncodedU32=function(){var t=this.readUnsignedByte();return 128&t&&16384&(t=127&t|this.readUnsignedByte()<<7)&&2097152&(t=16383&t|this.readUnsignedByte()<<14)&&268435456&(t=2097151&t|this.readUnsignedByte()<<21)?268435455&t|this.readUnsignedByte()<<28:t},t.prototype.readBits=function(t){return this.readUnsignedBits(t)<<32-t>>32-t},t.prototype.readUnsignedBits=function(t){for(var e=this._bitBuffer,n=this._bitLength;t>n;)e=e<<8|this.readUnsignedByte(),n+=8;var i=e>>>(n-=t)&ja[t];return this._bitBuffer=e,this._bitLength=n,i},t.prototype.readFixedBits=function(t){return this.readBits(t)/65536},t.prototype.readString=function(t){var e=this._position;if(t)e+t>this._length&&(So(this.sec),this.sec.throwError("flash.errors.EOFError",Wo)),this._position+=t;else{t=0;for(var n=e;n<this._length&&this._u8[n];n++)t++;this._position+=t+1}return ko(new Uint8Array(this._buffer,e,t))},t.prototype.align=function(){this._bitBuffer=0,this._bitLength=0},t.prototype.deflate=function(){this.compress("deflate")},t.prototype.inflate=function(){this.uncompress("deflate")},t.prototype.compress=function(e){var n;switch(e=0===arguments.length?"zlib":ka(e)){case"zlib":n=new _a(!0);break;case"deflate":n=new _a(!1);break;default:return}var i=new t;n.onData=i.writeRawBytes.bind(i),n.push(this._u8.subarray(0,this._length)),n.close(),this._ensureCapacity(i._u8.length),this._u8.set(i._u8),this.length=i.length,this._position=0},t.prototype.uncompress=function(e){var n;switch(e=0===arguments.length?"zlib":ka(e)){case"zlib":n=ca.create(!0);break;case"deflate":n=ca.create(!1);break;case"lzma":n=new Fa(!1);break;default:return}var i,r=new t;n.onData=r.writeRawBytes.bind(r),n.onError=function(t){return i=t},n.push(this._u8.subarray(0,this._length)),i&&(So(this.sec),this.sec.throwError("IOError",Jo)),n.close(),this._ensureCapacity(r._u8.length),this._u8.set(r._u8),this.length=r.length,this._position=0},t._nativeLittleEndian=1===new Int8Array(new Int32Array([1]).buffer)[0],t.INITIAL_SIZE=128,t._arrayBufferPool=new Vo,t}();!function(t){t[t.Solid=0]="Solid",t[t.LinearGradient=16]="LinearGradient",t[t.RadialGradient=18]="RadialGradient",t[t.FocalRadialGradient=19]="FocalRadialGradient",t[t.RepeatingBitmap=64]="RepeatingBitmap",t[t.ClippedBitmap=65]="ClippedBitmap",t[t.NonsmoothedRepeatingBitmap=66]="NonsmoothedRepeatingBitmap",t[t.NonsmoothedClippedBitmap=67]="NonsmoothedClippedBitmap"}(za||(za={}));var Xa,Ya=function(){function t(e,n,i,r,o,a){this.commands=e,this.data=n,this.morphData=i,this.prev=r,this.next=o,this.isReversed=a,this.isValidFill=!0,this.id=t._counter++}return t.FromDefaults=function(e){var n=new Ha,i=new Ha;n.endian=i.endian="auto";var r=null;return e&&((r=new Ha).endian="auto"),new t(n,i,r,null,null,!1)},t.prototype.moveTo=function(t,e){this.commands.writeUnsignedByte(9),this.data.write2Ints(t,e)},t.prototype.morphMoveTo=function(t,e,n,i){this.moveTo(t,e),this.morphData.write2Ints(n,i)},t.prototype.lineTo=function(t,e){this.commands.writeUnsignedByte(10),this.data.write2Ints(t,e)},t.prototype.morphLineTo=function(t,e,n,i){this.lineTo(t,e),this.morphData.write2Ints(n,i)},t.prototype.curveTo=function(t,e,n,i){this.commands.writeUnsignedByte(11),this.data.write4Ints(t,e,n,i)},t.prototype.morphCurveTo=function(t,e,n,i,r,o,a,s){this.curveTo(t,e,n,i),this.morphData.write4Ints(r,o,a,s)},t.prototype.toReversed=function(){return So(!this.isReversed),new t(this.commands,this.data,this.morphData,null,null,!0)},t.prototype.clone=function(){return new t(this.commands,this.data,this.morphData,null,null,this.isReversed)},t.prototype.storeStartAndEnd=function(){var t=this.data.ints,e=t[0]+","+t[1],n=(this.data.length>>2)-2,i=t[n]+","+t[n+1];this.isReversed?(this.startPoint=i,this.endPoint=e):(this.startPoint=e,this.endPoint=i)},t.prototype.connectsTo=function(t){return t!==this&&(So(this.endPoint),So(t.startPoint),this.endPoint===t.startPoint)},t.prototype.startConnectsTo=function(t){return t!==this&&this.startPoint===t.startPoint},t.prototype.flipDirection=function(){var t;t=this.startPoint,this.startPoint=this.endPoint,this.endPoint=t,this.isReversed=!this.isReversed},t.prototype.serializeAJS=function(t,e,n){if(e&&(e.morphSource=t.morphSource=!0),this.isReversed)this._serializeReversedAJS(t,e,n);else{var i=this.commands.bytes,r=this.data.length>>2,o=this.morphData?this.morphData.ints:null,a=this.data.ints,s=0;a[0]!==n.x||a[1]!==n.y||e||s++;for(var l=this.commands.length,u=2*s,c=s;c<l;c++){switch(i[c]){case 9:t.moveTo(a[u]/20,a[u+1]/20),e&&e.moveTo(o[u]/20,o[u+1]/20);break;case 10:t.lineTo(a[u]/20,a[u+1]/20),e&&e.lineTo(o[u]/20,o[u+1]/20);break;case 11:t.curveTo(a[u]/20,a[u+1]/20,a[u+2]/20,a[u+3]/20),e&&e.curveTo(o[u]/20,o[u+1]/20,o[u+2]/20,o[u+3]/20),u+=2}u+=2}n.x=a[r-2],n.y=a[r-1]}},t.prototype._serializeReversedAJS=function(t,e,n){var i=this.commands.length,r=(this.data.length>>2)-2,o=this.commands.bytes;So(9===o[0]);var a=this.data.ints,s=this.morphData?this.morphData.ints:null;if(a[r]===n.x&&a[r+1]===n.y||(t.moveTo(a[r]/20,a[r+1]/20),e&&e.moveTo(s[r]/20,s[r+1]/20)),1===i)return n.x=a[0],void(n.y=a[1]);for(var l=i;l-- >1;)switch(r-=2,o[l]){case 9:t.moveTo(a[r]/20,a[r+1]/20),e&&e.moveTo(s[r]/20,s[r+1]/20);break;case 10:t.lineTo(a[r]/20,a[r+1]/20),e&&e.lineTo(s[r]/20,s[r+1]/20);break;case 11:r-=2,t.curveTo(a[r+2]/20,a[r+3]/20,a[r]/20,a[r+1]/20),e&&e.curveTo(s[r+2]/20,s[r+3]/20,s[r]/20,s[r+1]/20)}n.x=a[0],n.y=a[1]},t._counter=0,t}();!function(t){t.LINEAR="linear",t.RADIAL="radial"}(Xa||(Xa={}));var qa,Ka=function(){function t(t){this.fillStyle=t}return Object.defineProperty(t.prototype,"data_type",{get:function(){return t.data_type},enumerable:!1,configurable:!0}),t.data_type="[graphicsdata FillStyle]",t}(),Wa=function(){function t(t,e,n,i,r,o,a,s){if(e.length!=n.length||e.length!=i.length)throw"GradientFillStyle: Error - colors, alphas and ratios must be of same length";this.colors=e,this.colors_r=[],this.colors_g=[],this.colors_b=[],this.colors_r.length=this.colors_g.length=this.colors_g.length=this.colors.length,this.alphas=n,this.ratios=i,this.matrix=r,this.type=t,this.uvRectangle=new W,this.ratios.sort((function(t,e){return t-e})),this.ratio_min=this.ratios[0],this.ratio_max=this.ratios[this.ratios.length-1];for(var l,u=e.length;u>0;)u--,l=D.float32ColorToARGB(e[u]),this.colors_r[u]=l[1],this.colors_g[u]=l[2],this.colors_b[u]=l[3]}return t.prototype.getUVMatrix=function(){if(this._uvMatrix)return this._uvMatrix;this.matrix||(this.matrix=new M);var t,e=1638.4,n=819.2,i=this.matrix.a,r=this.matrix.b,o=this.matrix.c,a=this.matrix.d,s=this.matrix.tx,l=this.matrix.ty,u=a/(i*a-r*o),c=-r/(i*a-r*o),h=-o/(i*a-r*o),p=i/(i*a-r*o),d=(o*l-a*s)/(i*a-r*o),f=-(i*l-r*s)/(i*a-r*o);return this.type==Xa.LINEAR?t=new M(u/e*(1-1/256),0,h/e*(1-1/256),0,this.uvRectangle.x+(d+n)/e*(1-1/256),this.uvRectangle.y):this.type==Xa.RADIAL?t=new M(u/n,c/n,h/n,p/n,(d+n)/n-1,(f+n)/n-1):this._uvMatrix=this.matrix,this._uvMatrix=t},t.prototype.getColorAtPosition=function(t){var e=-1,n=-1;if(t<=this.ratio_min)e=0,n=0;else if(t>=this.ratio_max)e=this.ratios.length-1,n=this.ratios.length-1;else for(var i=0;i<this.ratios.length-1;i++){if(t==this.ratios[i]){e=i,n=i;break}if(t==this.ratios[i+1]){e=i+1,n=i+1;break}if(t>=this.ratios[i]&&t<=this.ratios[i+1]){e=i,n=i+1;break}}if(e==n)return[this.alphas[e],this.colors_r[e],this.colors_g[e],this.colors_b[e]];var r=(t-this.ratios[e])/(this.ratios[n]-this.ratios[e]),o=1-r;return[this.alphas[n]*r+this.alphas[e]*o,this.colors_r[n]*r+this.colors_r[e]*o,this.colors_g[n]*r+this.colors_g[e]*o,this.colors_b[n]*r+this.colors_b[e]*o]},t.prototype.toString=function(){for(var t="",e=this.colors.length;e>0;)e--,t+=this.colors[e]+"#"+this.alphas[e]+"#"+this.ratios[e]+"#";return t},Object.defineProperty(t.prototype,"data_type",{get:function(){return t.data_type},enumerable:!1,configurable:!0}),t.data_type="[graphicsdata GradientFillStyle]",t}(),Ja=function(){function t(t,e,n,i){this.material=t,this.matrix=e,this.repeat=n,this.smooth=i}return Object.defineProperty(t.prototype,"data_type",{get:function(){return t.data_type},enumerable:!1,configurable:!0}),t.prototype.getUVMatrix=function(){this.matrix||(this.matrix=new M),this._uvMatrix||(this._uvMatrix=new M);var t,e,n=this.material.getTextureAt(0),i=this.material.style,r=n.getImageAt(0)||(null==i?void 0:i.getImageAt(n,0))||he.getDefaultImage2D();r?(t=r.width,e=r.height):(console.warn("[BitmapFillStyle] - getUVMatrix - no texture found"),t=512,e=512);var o=this.matrix.a,a=this.matrix.b,s=this.matrix.c,l=this.matrix.d,u=this.matrix.tx,c=this.matrix.ty,h=l/(o*l-a*s),p=-a/(o*l-a*s),d=-s/(o*l-a*s),f=o/(o*l-a*s),_=(s*c-l*u)/(o*l-a*s),g=-(o*c-a*u)/(o*l-a*s);return this._uvMatrix.a=h/t,this._uvMatrix.b=p/e,this._uvMatrix.c=d/t,this._uvMatrix.d=f/e,this._uvMatrix.tx=_/t,this._uvMatrix.ty=g/e,this._uvMatrix},t.data_type="[graphicsdata BitmapFillStyle]",t}(),Za=function(){function t(t,e){void 0===t&&(t=16777215),void 0===e&&(e=1),this.color=t,this.alpha=e}return t.prototype.getUVMatrix=function(){return this.uvMatrix},Object.defineProperty(t.prototype,"data_type",{get:function(){return t.data_type},enumerable:!1,configurable:!0}),t.data_type="[graphicsdata SolidFillStyle]",t}(),$a=function(){function t(){}return t.ROUND=1,t.NONE=0,t.SQUARE=2,t}(),ts=function(){function t(){}return t.BEVEL=1,t.MITER=2,t.ROUND=0,t}(),es=function(){function t(t,e,n,i,r,o){void 0===e&&(e=10),void 0===n&&(n=ts.ROUND),void 0===i&&(i=$a.SQUARE),void 0===r&&(r=10),void 0===o&&(o=bo.NORMAL),this.fillStyle=t,this.thickness=e,this.jointstyle=n,this.capstyle=i,this.miterLimit=r,this.scaleMode=o}return Object.defineProperty(t.prototype,"half_thickness",{get:function(){return this.thickness/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data_type",{get:function(){return t.data_type},enumerable:!1,configurable:!0}),t.data_type="[graphicsdata StrokeStyle]",t}(),ns=function(){function t(t,e){this.fillStyle=t,this.lineStyle=e,this._head=null}return t.prototype.addSegment=function(t){So(t),So(null===t.next),So(null===t.prev);var e=this._head;e&&(So(t!==e),e.next=t,t.prev=e),this._head=t},t.prototype.removeSegment=function(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev)},t.prototype.insertSegment=function(t,e){var n=e.prev;t.prev=n,t.next=e,n&&(n.next=t),e.prev=t},t.prototype.head=function(){return this._head},t.prototype.rgbaToArgb=function(t){return(255&t)<<24|(4278190080&t)>>>24<<16|(16711680&t)>>>16<<8|(65280&t)>>>8},t.prototype.getAlpha=function(t){return 255&t},t.prototype.rgbToArgb=function(t){return(4278190080&t)>>>24<<24|(255&t)<<16|(65280&t)>>>8<<8|(16711680&t)>>>16},t.prototype.applyStyle=function(t,e,n){var i,r;switch(void 0===n&&(n=!0),e.type){case za.Solid:e.alpha=(255&e.color)/255,e.color=this.rgbaToArgb(e.color),r=new Za(e.color,e.alpha);break;case za.LinearGradient:case za.RadialGradient:case za.FocalRadialGradient:for(var o=e.type===za.LinearGradient?Xa.LINEAR:Xa.RADIAL,a=[],s=0;s<e.colors.length;s++)a[s]=(255&e.colors[s])/255,e.colors[s]=this.rgbaToArgb(e.colors[s]);var l=new M(e.transform.a,e.transform.b,e.transform.c,e.transform.d,e.transform.tx,e.transform.ty);r=new Wa(o,e.colors,a,e.ratios,l,e.spreadMethod,e.interpolationMode,e.focalPoint/2|0);break;case za.ClippedBitmap:case za.RepeatingBitmap:case za.NonsmoothedClippedBitmap:case za.NonsmoothedRepeatingBitmap:l=new M(e.transform.a,e.transform.b,e.transform.c,e.transform.d,e.transform.tx,e.transform.ty);r=new Ja(e.material,l,e.repeat,e.smooth);break;default:console.error("Unknown style type:",e.type)}if(n)i=new Ka(r);else{var u=(0|Bo(e.width,0,5100))/20,c=u<=.05?bo.HAIRLINE:bo.NORMAL;e.startCapsStyle!=e.endCapsStyle&&console.log("Warning: different end vs start capstyle"),e.startCapsStyle=$a.ROUND,e.jointStyle=0,i=new es(r,u,e.jointStyle,e.startCapsStyle,e.miterLimit,c)}t.style=i},t.prototype.serializeAJS=function(t,e){var n=this.head();if(n){var i=!!this.fillStyle,r=i?this.fillStyle:this.lineStyle,o=r.morph;for(this.applyStyle(t,r,i),o&&e&&this.applyStyle(e,o,i);n;)n.storeStartAndEnd(),n=n.prev;for(var a=this.head(),s=a,l=null,u=null,c=a.prev;a;){for(;c;)c.startConnectsTo(a)&&c.flipDirection(),c.connectsTo(a)?(c.next!==a&&(this.removeSegment(c),this.insertSegment(c,a)),c=(a=c).prev):(c.startConnectsTo(s)&&c.flipDirection(),s.connectsTo(c)?(this.removeSegment(c),s.next=c,c=c.prev,s.next.prev=s,s.next.next=null,s=s.next):c=c.prev);if(c=a.prev,l?(u.next=a,a.prev=u,(u=s).next=null):(l=a,u=s),!c)break;c=(a=s=c).prev}var h={x:0,y:0};for(c=l;c;)c.isValidFill&&c.serializeAJS(t,e,h),c=c.next;return t}},t}();!function(t){t[t.Commands=32]="Commands",t[t.Coordinates=128]="Coordinates",t[t.Styles=16]="Styles"}(qa||(qa={}));var is=function(t){function e(e,n,i,r,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=0),void 0===o&&(o=0);var a=t.call(this)||this;return a.usages=0,a.count=0,a.offset=0,a.particleCollection=null,a.originalFillStyle=null,a._isSimpleRect=!1,a.deepHitCheck=!0,a._onInvalidatePropertiesDelegate=function(t){return a._onInvalidateProperties(t)},a._onInvalidateVerticesDelegate=function(t){return a._onInvalidateVertices(t)},a._elements=e,a._elements.addEventListener(zr.INVALIDATE_VERTICES,a._onInvalidateVerticesDelegate),a._elements.usages++,a._material=n,a._style=i,a._style&&a._style.addEventListener(jr.INVALIDATE_PROPERTIES,a._onInvalidatePropertiesDelegate),a.count=r,a.offset=o,a}return o(e,t),e.getShape=function(t,n,i,r,o){if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=0),void 0===o&&(o=0),e._pool.length){var a=e._pool.pop();return a.elements=t,a.material=n,a.style=i,a.count=r,a.offset=o,a}return new e(t,n,i,r,o)},e.clearPool=function(){e._pool=[]},e.quadElement=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var i=[],r=[],o=t.width/e,a=t.height/e,s=t.x,l=t.y,u=0;u<e;u++)for(var c=0;c<e;c++){var h=s+c*o,p=l+u*a,d=h+o,f=p+a;i.push(h,p,0,d,f,0,d,p,0,h,p,0,h,f,0,d,f,0),r&&r.push(c/e,u/e,(c+1)/e,(u+1)/e,(c+1)/e,u/e,c/e,u/e,c/e,(u+1)/e,(c+1)/e,(u+1)/e)}var _=new io;return _.setPositions(i),n&&_.setUVs(r),_},e.getElement=function(t){var e=t.x,n=t.y,i=t.right,r=t.bottom,o=new io;return o.setPositions([e,n,0,i,n,0,i,r,0,e,n,0,e,r,0,i,r,0]),o},e.getTriangleElement=function(t,n,i,r){var o=this;void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===r&&(r=1);var a=t.toString(),s=n?this._imageShapeElements[a]:null;return s||(s=e.quadElement(t,r,i),n&&(this._imageShapeElements[a]=s,s.addEventListener(h.CLEAR,(function(){delete o._imageShapeElements[a],s.usages=0})),s.usages++)),s},Object.defineProperty(e.prototype,"isSimpleRect",{get:function(){var t;return this._isSimpleRect&&(null===(t=this.originalFillStyle)||void 0===t?void 0:t.data_type)===Ka.data_type},set:function(t){this._isSimpleRect=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},set:function(t){this._elements!=t&&(this._elements&&(this._elements.removeEventListener(zr.INVALIDATE_VERTICES,this._onInvalidateVerticesDelegate),this._elements.usages--,this._elements.usages||this._elements.dispose()),this._elements=t,this._elements&&(this._elements.addEventListener(zr.INVALIDATE_VERTICES,this._onInvalidateVerticesDelegate),this._elements.usages++),this.invalidateElements())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){this._material!=t&&(this._material=t,this.invalidateMaterial())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style!=t&&(this._style&&this._style.removeEventListener(jr.INVALIDATE_PROPERTIES,this._onInvalidatePropertiesDelegate),this._style=t,this._style&&this._style.addEventListener(jr.INVALIDATE_PROPERTIES,this._onInvalidatePropertiesDelegate),this.invalidateStyle())},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){t.prototype.clear.call(this),this.usages=0,this.elements=null,this.material=null,this.style=null,this.particleCollection=null,e._pool.push(this)},e.prototype.invalidateElements=function(){this.dispatchEvent(new Lr(Lr.INVALIDATE_ELEMENTS,this))},e.prototype.invalidateMaterial=function(){this.dispatchEvent(new Lr(Lr.INVALIDATE_MATERIAL,this))},e.prototype.invalidateStyle=function(){this.dispatchEvent(new Lr(Lr.INVALIDATE_STYLE,this))},e.prototype._onInvalidateProperties=function(t){this.invalidateStyle()},e.prototype._onInvalidateVertices=function(t){t.attributesView==t.target.positions&&this.invalidate()},e.prototype.applyTransformation=function(t){this._elements.applyTransformation(t,this.count,this.offset)},e.prototype.scale=function(t){this._elements.scale(t,this.count,this.offset)},e.prototype.scaleUV=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1),this._elements.scaleUV(t,e,this.count,this.offset)},e._pool=new Array,e.assetType="[asset Shape]",e._imageShapeElements={},e}(_),rs=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.shape=e,i}return o(e,t),Object.defineProperty(e.prototype,"isSimpleRect",{get:function(){var t,e=this.node.getMatrix3D().decompose()[1];return!!(null===(t=this.shape)||void 0===t?void 0:t.isSimpleRect)&&Math.abs(e.z)<1e-5},enumerable:!1,configurable:!0}),e.prototype.globalBounds=function(){return this.node.getMatrix3D().transformBox(Cr.getInstance().getBoundsPicker(this.node.partition).getBoxBounds(this.node,!0,!0),this._globalBounds)},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this.shape=null},e.prototype._getStageElements=function(){this._offset=this.shape.offset,this._count=this.shape.count;var t=this.node.getScale9Container();if(t)return this.updateScale9(t.scale9Grid,t.transform.scale.x,t.transform.scale.y).getAbstraction(this._stage);var e=this.node.container;return(e.animator?e.animator.getRenderableElements(this,this.shape.elements):this.shape.elements).getAbstraction(this._stage)},e.prototype._getRenderMaterial=function(){return(this._asset.material||this.node.container.material||this.getDefaultMaterial()).getAbstraction(this.renderer.getRenderElements(this.shape.elements))},e.prototype._getStyle=function(){return this._asset.style||this.node.container.style},e.prototype.getDefaultMaterial=function(){return this.stageElements.elements instanceof Io?Rr.getDefaultColorMaterial():Rr.getDefaultTextureMaterial()},e.prototype.updateScale9=function(t,e,n){if(!this._scale9Elements){var i=null,r=!1;this.shape.originalFillStyle instanceof Ja&&(i=this.shape.originalFillStyle.getUVMatrix()),this.shape.elements instanceof io&&(r=!this.shape.elements.uvs&&!!i),r&&(this.shape.style.uvMatrix=null);var o=Cr.getInstance().getBoundsPicker(this.node.partition).getBoxBounds(this.node,!0,!0);this._scale9Elements=this.shape.elements.prepareScale9(o,t,!0,r,i)}return this._scaleX==e&&this._scaleY==n||(this._scaleX=e,this._scaleY=n,this._scale9Elements.updateScale9(e,n)),this._scale9Elements},e}(Ur),os=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._orientedBoxBoundsDirty=!0,i._orientedSphereBoundsDirty=!0,i._onInvalidateElementsDelegate=function(t){return i._onInvalidateElements(t)},i._asset.addEventListener(Lr.INVALIDATE_ELEMENTS,i._onInvalidateElementsDelegate),i}return o(e,t),e.prototype.onInvalidate=function(e){t.prototype.onInvalidate.call(this,e),this._orientedBoxBoundsDirty=!0,this._orientedSphereBoundsDirty=!0},e.prototype._onInvalidateElements=function(t){this._orientedBoxBoundsDirty=!0,this._orientedSphereBoundsDirty=!0},e.prototype.onClear=function(e){this._asset.removeEventListener(Lr.INVALIDATE_ELEMENTS,this._onInvalidateElementsDelegate),t.prototype.onClear.call(this,e)},e.prototype.hitTestPoint=function(t,e,n){var i=this.getBoxBounds();return!(null==i||!i.contains(t,e,n))&&this._asset.elements.hitTestPoint(this._view,this._node,t,e,n,i,this._asset.count,this._asset.offset)},e.prototype.getBoxBounds=function(t,e,n,i){return void 0===t&&(t=null),void 0===e&&(e=!0),void 0===n&&(n=null),void 0===i&&(i=null),t?this._asset.elements.getBoxBounds(this._view,this._node,e,t,n,i,this._asset.count,this._asset.offset):(this._orientedBoxBoundsDirty&&(this._orientedBoxBoundsDirty=!1,this._orientedBoxBounds=this._asset.elements.getBoxBounds(this._view,this._node,e,null,this._orientedBoxBounds,null,this._asset.count,this._asset.offset)),null!=this._orientedBoxBounds&&(i=this._orientedBoxBounds.union(i,i||n)),i)},e.prototype.getSphereBounds=function(t,e,n,i,r){return void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=null),void 0===r&&(r=null),e?this._asset.elements.getSphereBounds(this._view,t,e,n,i,r,this._asset.count,this._asset.offset):(this._orientedSphereBoundsDirty&&(this._orientedSphereBoundsDirty=!1,this._orientedSphereBounds=this._asset.elements.getSphereBounds(this._view,t,null,n,this._orientedSphereBounds,null,this._asset.count,this._asset.offset)),null!=this._orientedSphereBounds&&(r=this._orientedSphereBounds.union(r,r||i)),r)},e.prototype.testCollision=function(t,e){var n=this.getBoxBounds(),i=this._asset;return!(null==n||!n.rayIntersection(t.rayPosition,t.rayDirection))&&(!i.deepHitCheck||i.elements.testCollision(this._view,t,n,e,this._asset.material||t.containerNode.container.material,this._asset.count||this._asset.elements.numVertices,this._asset.offset))},e}(hr);Vr.registerRenderable(rs,is),cr.registerPickable(os,is);var as,ss,ls=function(){function t(){this.availableRows=256,this.gradientRow=-1,this.colorRow=256,this.colorPosition=0,this.bitmap=new Le(256,256,!0,null),this.availableRows=256}return t.clearAllMaterials=function(){for(var e in t._allColors)t._allColors[e].material=null;for(var e in t._allGradients)t._allGradients[e].material=null},t.getTextureForColor=function(e,n){var i=(0|e).toString(16)+"#"+(255*n|0).toString(16);if(i in this._allColors)return this._allColors[i];for(var r,o=this._allTextureAtlas.length,a=0;a<o;a++)if(this._allTextureAtlas[a].fitColor()){r=this._allTextureAtlas[a];break}r||(r=new t,this._allTextureAtlas.push(r));var s={colorPos:r.addColor(e,n),bitmap:r.bitmap,material:null,uvRectangle:null};return this._allColors[i]=s,s},t.getTextureForGradient=function(e){var n,i=e.toString();if(i in this._allGradients)return e.uvRectangle=this._allGradients[i].uvRectangle,this._allGradients[i];for(var r=this._allTextureAtlas.length,o=0;o<r;o++)if(this._allTextureAtlas[o].fitGradient()){n=this._allTextureAtlas[o];break}n||(n=new t,this._allTextureAtlas.push(n)),n.addGradient(e);var a={colorPos:null,bitmap:n.bitmap,material:null,uvRectangle:e.uvRectangle.clone()};return this._allGradients[i]=a,a},t.prototype.fitGradient=function(){return this.availableRows>0},t.prototype.fitColor=function(){return this.availableRows>0||this.colorPosition>0},t.prototype.addGradient=function(t){if(!(this.availableRows<=0)){this.gradientRow++,this.availableRows--;for(var e=0;e<256;e++)this.bitmap.setPixelFromArray(e,this.gradientRow,t.getColorAtPosition(e));return t.uvRectangle.x=1/512,t.uvRectangle.y=1/512+this.gradientRow/256,t.uvRectangle.width=1-1/512,t.uvRectangle.height=t.uvRectangle.y,this.availableRows}console.error("[TextureAtlass] There are not free space for gradient:",t)},t.prototype.addColor=function(t,e){if(void 0===e&&(e=1),this.colorPosition--,this.colorPosition<0&&(this.colorRow--,this.availableRows--,this.colorPosition=255,this.availableRows<0))return this.availableRows=0,console.error("[TextureAtlass] There are not free space for color:",t.toString(16)),null;var n=D.float32ColorToARGB(t);return n[0]=e,this.bitmap.setPixelFromArray(this.colorPosition,this.colorRow,n),new O(1/512+this.colorPosition/256,1/512+this.colorRow/256)},t._allTextureAtlas=[],t._allGradients={},t._allColors={},t}(),us=function(){function t(){}return t.getMaterialForColor=function(e,n){var i;if(void 0===n&&(n=1),0==e&&(e=1),16744704==e&&(n=1),!t.materialClass)throw"no materialClass registered on MaterialManager!";if(t._useTextureAtlasForColors){if(i=ls.getTextureForColor(e,n),t._colorMaterials[i.bitmap.id])return i.material=t._colorMaterials[i.bitmap.id],i;var r=new t.materialClass(i.bitmap);return r.alphaBlending=!0,r.useColorTransform=!0,r.bothSides=!0,t._colorMaterials[i.bitmap.id]=r,i.material=r,i}i={};var o=e+"_"+Math.round(100*n).toString();if(t._colorMaterials[o])return i.material=t._colorMaterials[o],i;var a=new t.materialClass(e,n);return a.alphaBlending=!0,a.useColorTransform=!0,a.bothSides=!0,i.material=a,t._colorMaterials[o]=a,i},t.getMaterialForGradient=function(e){if(!t.materialClass)throw"no materialClass registered on MaterialManager!";var n=ls.getTextureForGradient(e),i=n.bitmap.id.toString()+e.type.toString();if(t._textureMaterials[i])return n.material=t._textureMaterials[i],n;var r=new t.materialClass(n.bitmap);return r.useColorTransform=!0,r.alphaBlending=!0,r.bothSides=!0,t._textureMaterials[i]=r,n.material=r,n},t.getMaterialForBitmap=function(e){var n=new t.materialClass(e);return n.alphaBlending=!0,n.useColorTransform=!0,n.bothSides=!0,n},t._colorMaterials={},t._textureMaterials={},t._useTextureAtlasForColors=!0,t}(),cs=function(){function t(){}return t.drawRectangles=function(t,e,n){if(!(t.length%4>0)){var i=[];i.length=t.length/4*12;var r=0,o=0,a=t.length,s=0,l=0,u=0,c=0;for(r=0;r<a;r+=4)s=t[r],l=t[r+1],u=t[r+2],c=t[r+3],i[o++]=s,i[o++]=l,i[o++]=s+u,i[o++]=l,i[o++]=s+u,i[o++]=l+c,i[o++]=s,i[o++]=l,i[o++]=s,i[o++]=l+c,i[o++]=s+u,i[o++]=l+c;var h=us.getMaterialForColor(e,n),p=h.material,d=new ji(Float32Array,p.curves?3:2);d.set(i);var f=d.attributesBuffer.cloneBufferView();d.dispose();var _=new io(f);_.setPositions(new zi(f));var g=is.getShape(_,p);if(h.colorPos){g.style=new Gr;var m=new Qe;p.animateUVs=!0,g.style.color=e,g.style.addSamplerAt(m,p.getTextureAt(0)),g.style.uvMatrix=new M(0,0,0,0,h.colorPos.x,h.colorPos.y)}return g}console.log("GraphicsFactoryHelper.drawRectangles: inputRectangles.length is not a multiple of 4",t)},t.updateRectanglesShape=function(t,e){var n=[];n.length=e.length/4*12;var i=0,r=0,o=e.length,a=0,s=0,l=0,u=0;for(i=0;i<o;i+=4)a=e[i],s=e[i+1],l=e[i+2],u=e[i+3],n[r++]=a,n[r++]=s,n[r++]=a+l,n[r++]=s,n[r++]=a+l,n[r++]=s+u,n[r++]=a,n[r++]=s,n[r++]=a,n[r++]=s+u,n[r++]=a+l,n[r++]=s+u;var c=t.elements;c.concatenatedBuffer.count=n.length/2,c.setPositions(n),c.invalidate()},t.isClockWiseXY=function(t,e,n,i,r,o){return!((t-n)*(o-i)-(e-i)*(r-n)<0)},t.getSign=function(t,e,n,i,r,o){return(t-r)*(i-o)-(e-o)*(n-r)},t.pointInTri=function(t,e,n,i,r,o,a,s){var l=this.getSign(t,e,a,s,n,i)>0,u=this.getSign(n,i,a,s,r,o)>0,c=this.getSign(r,o,a,s,t,e)>0;return l==u&&u==c},t.getControlXForCurveX=function(t,e,n){return e},t.getControlYForCurveY=function(t,e,n){return e},t.drawPoint=function(t,e,n,i){this.addTriangle(t-2,e-2,t+2,e-2,t+2,e+2,0,n,i),this.addTriangle(t-2,e-2,t-2,e+2,t+2,e+2,0,n,i)},t.drawElipse=function(t,e,n,i,r,o,a,s,l){for(var u=(a-o)/s,c=t+n*Math.cos(o*(Math.PI/180)),h=e+i*Math.sin(o*(Math.PI/180)),p=1;p<=u;p++){var d=t+n*Math.cos((o+p*s)*(Math.PI/180)),f=e+i*Math.sin((o+p*s)*(Math.PI/180));this.addTriangle(t,e,d,f,c,h,0,r,l),c=d,h=f}},t.drawElipseStrokes=function(t,e,n,i,r,o,a,s){var l=(a-o)/s,u=t+n*Math.cos(o*(Math.PI/180)),c=e+i*Math.sin(o*(Math.PI/180));r.moveTo(u,c);for(var h=1;h<=l;h++){var p=t+n*Math.cos((o+h*s)*(Math.PI/180)),d=e+i*Math.sin((o+h*s)*(Math.PI/180));r.lineTo(p,d)}},t.addTriangle=function(e,n,i,r,o,a,s,l,u){var c=e,h=n,p=i,d=r,f=o,_=a;t.isClockWiseXY(c,h,p,d,f,_)&&(e=f,n=_,i=p,r=d,o=c,a=h);var g=l.length;0==s?(l[g++]=e,l[g++]=n,u&&(l[g++]=45736980577097704e-57),l[g++]=i,l[g++]=r,u&&(l[g++]=45736980577097704e-57),l[g++]=o,l[g++]=a,u&&(l[g++]=45736980577097704e-57)):s<0?(l[g++]=e,l[g++]=n,u&&(l[g++]=11708844992641982e-54),l[g++]=i,l[g++]=r,u&&(l[g++]=22778106537599901e-57),l[g++]=o,l[g++]=a,u&&(l[g++]=17796490496925177e-59)):s>0&&(l[g++]=e,l[g++]=n,u&&(l[g++]=11708846393940446e-54),l[g++]=i,l[g++]=r,u&&(l[g++]=22779507836064226e-57),l[g++]=o,l[g++]=a,u&&(l[g++]=1793662034335766e-58))},t.createCap=function(t,e,n,i,r,o,a,s,l,u,c,h,p,d){if(a*=u,s*=u,l==$a.ROUND){var f=t+a*c,_=e+s*h,g=n+a*c,m=i+s*h,y=r+a*c,A=o+s*h;this.tesselateCurve(n,i,g,m,f,_,p,!0),this.tesselateCurve(f,_,y,A,r,o,p,!0),this.addTriangle(n,i,f,_,r,o,-1,p,d)}else if(l==$a.SQUARE){g=n+a*c,m=i+s*h,y=r+a*c,A=o+s*h;this.addTriangle(y,A,g,m,n,i,0,p,d),this.addTriangle(y,A,n,i,r,o,0,p,d)}},t.getLineFormularData=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new O;return 0!=n&&0!=i&&(r.x=i/n),r.y=-(r.x*t.x-t.y),r},t.getQuadricBezierPosition=function(t,e,n,i){var r=1-t;return r*r*e+2*r*t*n+t*t*i},t.subdivideCurve=function(e,n,i,r,o,a,s,l,u,c,h,p,d,f){var _=Math.atan2(r-n,i-e)*N.RADIANS_TO_DEGREES,g=Math.atan2(a-r,o-i)*N.RADIANS_TO_DEGREES-_;if(g>180&&(g-=360),g<-180&&(g+=360),Math.abs(g)>=175)return d.push(e,n,i,r,o,a),void f.push(s,l,u,c,h,p);var m=!1;if(g<0?(m=t.getSign(e,n,u,c,o,a)>0,m=((n-a)*(i-e)+(o-e)*(r-n))*((n-a)*(u-e)+(o-e)*(c-n))<0):(m=t.getSign(s,l,u,c,h,p)>0,m=((l-a)*(i-s)+(h-s)*(r-l))*((l-p)*(u-s)+(h-s)*(c-l))<0),m)return d.push(e,n,i,r,o,a),void f.push(s,l,u,c,h,p);var y=e+.5*(i-e),A=n+.5*(r-n),v=i+.5*(o-i),b=r+.5*(a-r),x=y+.5*(v-y),C=A+.5*(b-A),I=s+.5*(u-s),E=l+.5*(c-l),w=u+.5*(h-u),S=c+.5*(p-c),D=I+.5*(w-I),T=E+.5*(S-E);this.subdivideCurve(e,n,y,A,x,C,s,l,I,E,D,T,d,f),this.subdivideCurve(x,C,v,b,o,a,D,T,w,S,h,p,d,f)},t.tesselateCurve=function(e,n,i,r,o,a,s,l,u,c){void 0===l&&(l=!1),void 0===u&&(u=0),void 0===c&&(c=1);var h=Zo.CURVE_TESSELATION_COUNT,p=1/Math.sqrt(c),d=1/c;if(u>=h)return l?void s.push(e,n,i,r,o,a):void s.push(i,r,o,a);var f=o-e,_=a-n,g=e+.5*(i-e),m=n+.5*(r-n),y=i+.5*(o-i),A=r+.5*(a-r),v=g+.5*(y-g),b=m+.5*(A-m);if(f*f+_*_<d)l?s.push(e,n,v,b,o,a):s.push(o,a);else{for(var x=Math.atan2(r-n,i-e)*N.RADIANS_TO_DEGREES,C=Math.atan2(a-r,o-i)*N.RADIANS_TO_DEGREES-x;C>180;)C-=360;for(;C<-180;)C+=360;(C=C<0?-C:C)<=p?l?s.push(e,n,v,b,o,a):s.push(o,a):(l&&s.push(e,n,v,b,o,a),u++,t.tesselateCurve(e,n,g,m,v,b,s,l,u,c),t.tesselateCurve(v,b,y,A,o,a,s,l,u,c))}},t}();function hs(t,e){if(!t)throw e||"Assertion Failed!"}!function(t){t[t.ODD=0]="ODD",t[t.NONZERO=1]="NONZERO",t[t.POSITIVE=2]="POSITIVE",t[t.NEGATIVE=3]="NEGATIVE",t[t.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"}(as||(as={})),function(t){t[t.POLYGONS=0]="POLYGONS",t[t.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",t[t.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"}(ss||(ss={}));var ps=function(){function t(){}return t.vertEq=function(t,e){return t.s===e.s&&t.t===e.t},t.vertLeq=function(t,e){return t.s<e.s||t.s===e.s&&t.t<=e.t},t.transLeq=function(t,e){return t.t<e.t||t.t===e.t&&t.s<=e.s},t.edgeGoesLeft=function(e){return t.vertLeq(e.Dst,e.Org)},t.edgeGoesRight=function(e){return t.vertLeq(e.Org,e.Dst)},t.vertL1dist=function(t,e){return Math.abs(t.s-e.s)+Math.abs(t.t-e.t)},t.edgeEval=function(e,n,i){hs(t.vertLeq(e,n)&&t.vertLeq(n,i));var r=n.s-e.s,o=i.s-n.s;return r+o>0?r<o?n.t-e.t+(e.t-i.t)*(r/(r+o)):n.t-i.t+(i.t-e.t)*(o/(r+o)):0},t.edgeSign=function(e,n,i){hs(t.vertLeq(e,n)&&t.vertLeq(n,i));var r=n.s-e.s,o=i.s-n.s;return r+o>0?(n.t-i.t)*r+(n.t-e.t)*o:0},t.transEval=function(e,n,i){hs(t.transLeq(e,n)&&t.transLeq(n,i));var r=n.t-e.t,o=i.t-n.t;return r+o>0?r<o?n.s-e.s+(e.s-i.s)*(r/(r+o)):n.s-i.s+(i.s-e.s)*(o/(r+o)):0},t.transSign=function(e,n,i){hs(t.transLeq(e,n)&&t.transLeq(n,i));var r=n.t-e.t,o=i.t-n.t;return r+o>0?(n.s-i.s)*r+(n.s-e.s)*o:0},t.vertCCW=function(t,e,n){return t.s*(e.t-n.t)+e.s*(n.t-t.t)+n.s*(t.t-e.t)>=0},t.interpolate=function(t,e,n,i){return(t=t<0?0:t)<=(n=n<0?0:n)?0===n?(e+i)/2:e+t/(t+n)*(i-e):i+n/(t+n)*(e-i)},t.intersect=function(e,n,i,r,o){var a,s,l;t.vertLeq(e,n)||(l=e,e=n,n=l),t.vertLeq(i,r)||(l=i,i=r,r=l),t.vertLeq(e,i)||(l=e,e=i,i=l,l=n,n=r,r=l),t.vertLeq(i,n)?t.vertLeq(n,r)?((a=t.edgeEval(e,i,n))+(s=t.edgeEval(i,n,r))<0&&(a=-a,s=-s),o.s=t.interpolate(a,i.s,s,n.s)):((a=t.edgeSign(e,i,n))+(s=-t.edgeSign(e,r,n))<0&&(a=-a,s=-s),o.s=t.interpolate(a,i.s,s,r.s)):o.s=(i.s+n.s)/2,t.transLeq(e,n)||(l=e,e=n,n=l),t.transLeq(i,r)||(l=i,i=r,r=l),t.transLeq(e,i)||(l=e,e=i,i=l,l=n,n=r,r=l),t.transLeq(i,n)?t.transLeq(n,r)?((a=t.transEval(e,i,n))+(s=t.transEval(i,n,r))<0&&(a=-a,s=-s),o.t=t.interpolate(a,i.t,s,n.t)):((a=t.transSign(e,i,n))+(s=-t.transSign(e,r,n))<0&&(a=-a,s=-s),o.t=t.interpolate(a,i.t,s,r.t)):o.t=(i.t+n.t)/2},t}(),ds=function(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1},fs=function(){function t(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(t.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),t}(),_s=function(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0},gs=function(){function t(){var t=new _s,e=new ds,n=new fs(0),i=new fs(1);t.next=t.prev=t,t.anEdge=null,e.next=e.prev=e,n.next=n,n.Sym=i,i.next=i,i.Sym=n,this.vHead=t,this.fHead=e,this.eHead=n,this.eHeadSym=i}return t.prototype.makeEdge_=function(t){var e=new fs(0),n=new fs(1);t.Sym.side<t.side&&(t=t.Sym);var i=t.Sym.next;return n.next=i,i.Sym.next=e,e.next=t,t.Sym.next=n,e.Sym=n,e.Onext=e,e.Lnext=n,e.Org=null,e.Lface=null,e.winding=0,e.activeRegion=null,n.Sym=e,n.Onext=n,n.Lnext=e,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,e},t.prototype.splice_=function(t,e){var n=t.Onext,i=e.Onext;n.Sym.Lnext=e,i.Sym.Lnext=t,t.Onext=i,e.Onext=n},t.prototype.makeVertex_=function(t,e,n){var i=t;hs(i,"Vertex can't be null!");var r=n.prev;i.prev=r,r.next=i,i.next=n,n.prev=i,i.anEdge=e;var o=e;do{o.Org=i,o=o.Onext}while(o!==e)},t.prototype.makeFace_=function(t,e,n){var i=t;hs(i,"Face can't be null");var r=n.prev;i.prev=r,r.next=i,i.next=n,n.prev=i,i.anEdge=e,i.trail=null,i.marked=!1,i.inside=n.inside;var o=e;do{o.Lface=i,o=o.Lnext}while(o!==e)},t.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var e=t.next,n=t.Sym.next;e.Sym.next=n,n.Sym.next=e},t.prototype.killVertex_=function(t,e){var n=t.anEdge,i=n;do{i.Org=e,i=i.Onext}while(i!==n);var r=t.prev,o=t.next;o.prev=r,r.next=o},t.prototype.killFace_=function(t,e){var n=t.anEdge,i=n;do{i.Lface=e,i=i.Lnext}while(i!==n);var r=t.prev,o=t.next;o.prev=r,r.next=o},t.prototype.makeEdge=function(){var t=new _s,e=new _s,n=new ds,i=this.makeEdge_(this.eHead);return this.makeVertex_(t,i,this.vHead),this.makeVertex_(e,i.Sym,this.vHead),this.makeFace_(n,i,this.fHead),i},t.prototype.splice=function(t,e){var n=!1,i=!1;if(t!==e){if(e.Org!==t.Org&&(i=!0,this.killVertex_(e.Org,t.Org)),e.Lface!==t.Lface&&(n=!0,this.killFace_(e.Lface,t.Lface)),this.splice_(e,t),!i){var r=new _s;this.makeVertex_(r,e,t.Org),t.Org.anEdge=t}if(!n){var o=new ds;this.makeFace_(o,e,t.Lface),t.Lface.anEdge=t}}},t.prototype.delete=function(t){var e=t.Sym,n=!1;if(t.Lface!==t.Rface&&(n=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!n){var i=new ds;this.makeFace_(i,t,t.Lface)}e.Onext===e?(this.killVertex_(e.Org,null),this.killFace_(e.Lface,null)):(t.Lface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev)),this.killEdge_(t)},t.prototype.addEdgeVertex=function(t){var e=this.makeEdge_(t),n=e.Sym;this.splice_(e,t.Lnext),e.Org=t.Dst;var i=new _s;return this.makeVertex_(i,n,e.Org),e.Lface=n.Lface=t.Lface,e},t.prototype.splitEdge=function(t){var e=this.addEdgeVertex(t).Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,e),t.Dst=e.Org,e.Dst.anEdge=e.Sym,e.Rface=t.Rface,e.winding=t.winding,e.Sym.winding=t.Sym.winding,e},t.prototype.connect=function(t,e){var n=!1,i=this.makeEdge_(t),r=i.Sym;if(e.Lface!==t.Lface&&(n=!0,this.killFace_(e.Lface,t.Lface)),this.splice_(i,t.Lnext),this.splice_(r,e),i.Org=t.Dst,r.Org=e.Org,i.Lface=r.Lface=t.Lface,t.Lface.anEdge=r,!n){var o=new ds;this.makeFace_(o,i,t.Lface)}return i},t.prototype.zapFace=function(t){var e,n,i,r,o,a=t.anEdge;n=a.Lnext;do{n=(e=n).Lnext,e.Lface=null,null===e.Rface&&(e.Onext===e?this.killVertex_(e.Org,null):(e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev)),(i=e.Sym).Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),this.killEdge_(e))}while(e!=a);r=t.prev,(o=t.next).prev=r,r.next=o},t.prototype.countFaceVerts_=function(t){var e=t.anEdge,n=0;do{n++,e=e.Lnext}while(e!==t.anEdge);return n},t.prototype.mergeConvexFaces=function(t){var e,n,i,r,o;for(e=this.fHead.next;e!==this.fHead;e=e.next)if(e.inside)for(o=(n=e.anEdge).Org;i=n.Lnext,(r=n.Sym)&&r.Lface&&r.Lface.inside&&this.countFaceVerts_(e)+this.countFaceVerts_(r.Lface)-2<=t&&ps.vertCCW(n.Lprev.Org,n.Org,r.Lnext.Lnext.Org)&&ps.vertCCW(r.Lprev.Org,r.Org,n.Lnext.Lnext.Org)&&(i=r.Lnext,this.delete(r),n=null,r=null),!n||n.Lnext.Org!==o;)n=i;return!0},t.prototype.check=function(){var t,e,n,i,r,o,a=this.fHead,s=this.vHead,l=this.eHead;for(e=a,e=a;(t=e.next)!==a;e=t){hs(t.prev===e),r=t.anEdge;do{hs(r.Sym!==r),hs(r.Sym.Sym===r),hs(r.Lnext.Onext.Sym===r),hs(r.Onext.Sym.Lnext===r),hs(r.Lface===t),r=r.Lnext}while(r!==t.anEdge)}for(hs(t.prev===e&&null===t.anEdge),i=s,i=s;(n=i.next)!==s;i=n){hs(n.prev===i),r=n.anEdge;do{hs(r.Sym!==r),hs(r.Sym.Sym===r),hs(r.Lnext.Onext.Sym===r),hs(r.Onext.Sym.Lnext===r),hs(r.Org===n),r=r.Onext}while(r!==n.anEdge)}for(hs(n.prev===i&&null===n.anEdge),o=l,o=l;(r=o.next)!==l;o=r)hs(r.Sym.next===o.Sym),hs(r.Sym!==r),hs(r.Sym.Sym===r),hs(null!==r.Org),hs(null!==r.Dst),hs(r.Lnext.Onext.Sym===r),hs(r.Onext.Sym.Lnext===r);hs(r.Sym.next===o.Sym&&r.Sym===this.eHeadSym&&r.Sym.Sym===r&&null===r.Org&&null===r.Dst&&null===r.Lface&&null===r.Rface)},t}(),ms=function(){this.handle=null},ys=function(){this.key=null,this.node=0},As=function(){function t(t,e){this.leq=e,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var n=0;n<t+1;n++)this.nodes[n]=new ms,this.handles[n]=new ys;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return t.prototype.floatDown_=function(t){var e,n,i,r=this.nodes,o=this.handles;for(e=r[t].handle;;){if((i=t<<1)<this.size&&this.leq(o[r[i+1].handle].key,o[r[i].handle].key)&&++i,hs(i<=this.max),n=r[i].handle,i>this.size||this.leq(o[e].key,o[n].key)){r[t].handle=e,o[e].node=t;break}r[t].handle=n,o[n].node=t,t=i}},t.prototype.floatUp_=function(t){var e,n,i,r=this.nodes,o=this.handles;for(e=r[t].handle;;){if(n=r[i=t>>1].handle,0===i||this.leq(o[n].key,o[e].key)){r[t].handle=e,o[e].node=t;break}r[t].handle=n,o[n].node=t,t=i}},t.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},t.prototype.min=function(){return this.handles[this.nodes[1].handle].key},t.prototype.insert=function(t){var e,n;if(2*(e=++this.size)>this.max){var i,r;for(this.max*=2,r=this.nodes.length,this.nodes.length=this.max+1,i=r;i<this.nodes.length;i++)this.nodes[i]=new ms;for(r=this.handles.length,this.handles.length=this.max+1,i=r;i<this.handles.length;i++)this.handles[i]=new ys}return 0===this.freeList?n=e:(n=this.freeList,this.freeList=this.handles[n].node),this.nodes[e].handle=n,this.handles[n].node=e,this.handles[n].key=t,this.initialized&&this.floatUp_(e),n},t.prototype.extractMin=function(){var t=this.nodes,e=this.handles,n=t[1].handle,i=e[n].key;return this.size>0&&(t[1].handle=t[this.size].handle,e[t[1].handle].node=1,e[n].key=null,e[n].node=this.freeList,this.freeList=n,--this.size,this.size>0&&this.floatDown_(1)),i},t.prototype.delete=function(t){var e,n=this.nodes,i=this.handles;hs(t>=1&&t<=this.max&&null!==i[t].key),n[e=i[t].node].handle=n[this.size].handle,i[n[e].handle].node=e,--this.size,e<=this.size&&(e<=1||this.leq(i[n[e>>1].handle].key,i[n[e].handle].key)?this.floatDown_(e):this.floatUp_(e)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},t}(),vs=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},bs=function(){this.key=null,this.next=null,this.prev=null},xs=function(){function t(t,e){this.frame=t,this.leq=e,this.head=new bs,this.head.next=this.head,this.head.prev=this.head}return t.prototype.min=function(){return this.head.next},t.prototype.max=function(){return this.head.prev},t.prototype.insert=function(t){return this.insertBefore(this.head,t)},t.prototype.search=function(t){var e=this.head;do{e=e.next}while(null!==e.key&&!this.leq(this.frame,t,e.key));return e},t.prototype.insertBefore=function(t,e){do{t=t.prev}while(null!==t.key&&!this.leq(this.frame,t.key,e));var n=new bs;return n.key=e,n.next=t.next,t.next.prev=n,n.prev=t,t.next=n,n},t.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},t}(),Cs=function(){function t(){}return t.regionBelow=function(t){return t.nodeUp.prev.key},t.regionAbove=function(t){return t.nodeUp.next.key},t.debugEvent=function(t){},t.addWinding=function(t,e){t.winding+=e.winding,t.Sym.winding+=e.Sym.winding},t.edgeLeq=function(t,e,n){var i=t.event,r=e.eUp,o=n.eUp;return r.Dst===i?o.Dst===i?ps.vertLeq(r.Org,o.Org)?ps.edgeSign(o.Dst,r.Org,o.Org)<=0:ps.edgeSign(r.Dst,o.Org,r.Org)>=0:ps.edgeSign(o.Dst,i,o.Org)<=0:o.Dst===i?ps.edgeSign(r.Dst,i,r.Org)>=0:ps.edgeEval(r.Dst,i,r.Org)>=ps.edgeEval(o.Dst,i,o.Org)},t.deleteRegion=function(t,e){e.fixUpperEdge&&hs(0===e.eUp.winding),e.eUp.activeRegion=null,t.dict.delete(e.nodeUp)},t.fixUpperEdge=function(t,e,n){hs(e.fixUpperEdge),t.mesh.delete(e.eUp),e.fixUpperEdge=!1,e.eUp=n,n.activeRegion=e},t.topLeftRegion=function(e,n){var i,r=n.eUp.Org;do{n=t.regionAbove(n)}while(n.eUp.Org===r);if(n.fixUpperEdge){if(null===(i=e.mesh.connect(t.regionBelow(n).eUp.Sym,n.eUp.Lnext)))return null;t.fixUpperEdge(e,n,i),n=t.regionAbove(n)}return n},t.topRightRegion=function(e){var n=e.eUp.Dst;do{e=t.regionAbove(e)}while(e.eUp.Dst===n);return e},t.addRegionBelow=function(t,e,n){var i=new vs;return i.eUp=n,i.nodeUp=t.dict.insertBefore(e.nodeUp,i),i.fixUpperEdge=!1,i.sentinel=!1,i.dirty=!1,n.activeRegion=i,i},t.isWindingInside=function(t,e){switch(t.windingRule){case as.ODD:return!!(1&e);case as.NONZERO:return 0!==e;case as.POSITIVE:return e>0;case as.NEGATIVE:return e<0;case as.ABS_GEQ_TWO:return e>=2||e<=-2}throw new Error("Invalid winding rulle")},t.computeWinding=function(e,n){n.windingNumber=t.regionAbove(n).windingNumber+n.eUp.winding,n.inside=t.isWindingInside(e,n.windingNumber)},t.finishRegion=function(e,n){var i=n.eUp,r=i.Lface;r.inside=n.inside,r.anEdge=i,t.deleteRegion(e,n)},t.finishLeftRegions=function(e,n,i){for(var r,o=null,a=n,s=n.eUp;a!==i;){if(a.fixUpperEdge=!1,(r=(o=t.regionBelow(a)).eUp).Org!=s.Org){if(!o.fixUpperEdge){t.finishRegion(e,a);break}r=e.mesh.connect(s.Lprev,r.Sym),t.fixUpperEdge(e,o,r)}s.Onext!==r&&(e.mesh.splice(r.Oprev,r),e.mesh.splice(s,r)),t.finishRegion(e,a),s=o.eUp,a=o}return s},t.addRightEdges=function(e,n,i,r,o,a){var s,l,u,c,h=!0;u=i;do{hs(ps.vertLeq(u.Org,u.Dst)),t.addRegionBelow(e,n,u.Sym),u=u.Onext}while(u!==r);for(null===o&&(o=t.regionBelow(n).eUp.Rprev),l=n,c=o;(u=(s=t.regionBelow(l)).eUp.Sym).Org===c.Org;)u.Onext!==c&&(e.mesh.splice(u.Oprev,u),e.mesh.splice(c.Oprev,u)),s.windingNumber=l.windingNumber-u.winding,s.inside=t.isWindingInside(e,s.windingNumber),l.dirty=!0,!h&&t.checkForRightSplice(e,l)&&(t.addWinding(u,c),t.deleteRegion(e,l),e.mesh.delete(c)),h=!1,l=s,c=u;l.dirty=!0,hs(l.windingNumber-u.winding===s.windingNumber),a&&t.walkDirtyRegions(e,l)},t.spliceMergeVertices=function(t,e,n){t.mesh.splice(e,n)},t.vertexWeights=function(t,e,n){var i=ps.vertL1dist(e,t),r=ps.vertL1dist(n,t),o=.5*r/(i+r),a=.5*i/(i+r);t.coords[0]+=o*e.coords[0]+a*n.coords[0],t.coords[1]+=o*e.coords[1]+a*n.coords[1],t.coords[2]+=o*e.coords[2]+a*n.coords[2]},t.getIntersectData=function(e,n,i,r,o,a){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,t.vertexWeights(n,i,r),t.vertexWeights(n,o,a)},t.checkForRightSplice=function(e,n){var i=t.regionBelow(n),r=n.eUp,o=i.eUp;if(ps.vertLeq(r.Org,o.Org)){if(ps.edgeSign(o.Dst,r.Org,o.Org)>0)return!1;ps.vertEq(r.Org,o.Org)?r.Org!==o.Org&&(e.pq.delete(r.Org.pqHandle),t.spliceMergeVertices(e,o.Oprev,r)):(e.mesh.splitEdge(o.Sym),e.mesh.splice(r,o.Oprev),n.dirty=i.dirty=!0)}else{if(ps.edgeSign(r.Dst,o.Org,r.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),e.mesh.splice(o.Oprev,r)}return!0},t.checkForLeftSplice=function(e,n){var i,r=t.regionBelow(n),o=n.eUp,a=r.eUp;if(hs(!ps.vertEq(o.Dst,a.Dst)),ps.vertLeq(o.Dst,a.Dst)){if(ps.edgeSign(o.Dst,a.Dst,o.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,i=e.mesh.splitEdge(o),e.mesh.splice(a.Sym,i),i.Lface.inside=n.inside}else{if(ps.edgeSign(a.Dst,o.Dst,a.Org)>0)return!1;n.dirty=r.dirty=!0,i=e.mesh.splitEdge(a),e.mesh.splice(o.Lnext,a.Sym),i.Rface.inside=n.inside}return!0},t.checkForIntersect=function(e,n){var i,r,o=t.regionBelow(n),a=n.eUp,s=o.eUp,l=a.Org,u=s.Org,c=a.Dst,h=s.Dst,p=new _s;if(hs(!ps.vertEq(h,c)),hs(ps.edgeSign(c,e.event,l)<=0),hs(ps.edgeSign(h,e.event,u)>=0),hs(l!==e.event&&u!==e.event),hs(!n.fixUpperEdge&&!o.fixUpperEdge),l===u)return!1;if(Math.min(l.t,c.t)>Math.max(u.t,h.t))return!1;if(ps.vertLeq(l,u)){if(ps.edgeSign(h,l,u)>0)return!1}else if(ps.edgeSign(c,u,l)<0)return!1;return t.debugEvent(e),ps.intersect(c,l,h,u,p),hs(Math.min(l.t,c.t)<=p.t),hs(p.t<=Math.max(u.t,h.t)),hs(Math.min(h.s,c.s)<=p.s),hs(p.s<=Math.max(u.s,l.s)),ps.vertLeq(p,e.event)&&(p.s=e.event.s,p.t=e.event.t),i=ps.vertLeq(l,u)?l:u,ps.vertLeq(i,p)&&(p.s=i.s,p.t=i.t),ps.vertEq(p,l)||ps.vertEq(p,u)?(t.checkForRightSplice(e,n),!1):!ps.vertEq(c,e.event)&&ps.edgeSign(c,e.event,p)>=0||!ps.vertEq(h,e.event)&&ps.edgeSign(h,e.event,p)<=0?h===e.event?(e.mesh.splitEdge(a.Sym),e.mesh.splice(s.Sym,a),n=t.topLeftRegion(e,n),a=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),o),t.addRightEdges(e,n,a.Oprev,a,a,!0),!0):c===e.event?(e.mesh.splitEdge(s.Sym),e.mesh.splice(a.Lnext,s.Oprev),o=n,n=t.topRightRegion(n),r=t.regionBelow(n).eUp.Rprev,o.eUp=s.Oprev,s=t.finishLeftRegions(e,o,null),t.addRightEdges(e,n,s.Onext,a.Rprev,r,!0),!0):(ps.edgeSign(c,e.event,p)>=0&&(t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(a.Sym),a.Org.s=e.event.s,a.Org.t=e.event.t),ps.edgeSign(h,e.event,p)<=0&&(n.dirty=o.dirty=!0,e.mesh.splitEdge(s.Sym),s.Org.s=e.event.s,s.Org.t=e.event.t),!1):(e.mesh.splitEdge(a.Sym),e.mesh.splitEdge(s.Sym),e.mesh.splice(s.Oprev,a),a.Org.s=p.s,a.Org.t=p.t,a.Org.pqHandle=e.pq.insert(a.Org),t.getIntersectData(e,a.Org,l,c,u,h),t.regionAbove(n).dirty=n.dirty=o.dirty=!0,!1)},t.walkDirtyRegions=function(e,n){for(var i,r,o=t.regionBelow(n);;){for(;o.dirty;)n=o,o=t.regionBelow(o);if(!n.dirty&&(o=n,null===(n=t.regionAbove(n))||!n.dirty))return;if(n.dirty=!1,i=n.eUp,r=o.eUp,i.Dst!==r.Dst&&t.checkForLeftSplice(e,n)&&(o.fixUpperEdge?(t.deleteRegion(e,o),e.mesh.delete(r),r=(o=t.regionBelow(n)).eUp):n.fixUpperEdge&&(t.deleteRegion(e,n),e.mesh.delete(i),i=(n=t.regionAbove(o)).eUp)),i.Org!==r.Org)if(i.Dst===r.Dst||n.fixUpperEdge||o.fixUpperEdge||i.Dst!==e.event&&r.Dst!==e.event)t.checkForRightSplice(e,n);else if(t.checkForIntersect(e,n))return;i.Org===r.Org&&i.Dst===r.Dst&&(t.addWinding(r,i),t.deleteRegion(e,n),e.mesh.delete(i),n=t.regionAbove(o))}},t.connectRightVertex=function(e,n,i){var r,o=i.Onext,a=t.regionBelow(n),s=n.eUp,l=a.eUp,u=!1;s.Dst!==l.Dst&&t.checkForIntersect(e,n),ps.vertEq(s.Org,e.event)&&(e.mesh.splice(o.Oprev,s),n=t.topLeftRegion(e,n),o=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),a),u=!0),ps.vertEq(l.Org,e.event)&&(e.mesh.splice(i,l.Oprev),i=t.finishLeftRegions(e,a,null),u=!0),u?t.addRightEdges(e,n,i.Onext,o,o,!0):(r=ps.vertLeq(l.Org,s.Org)?l.Oprev:s,r=e.mesh.connect(i.Lprev,r),t.addRightEdges(e,n,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,t.walkDirtyRegions(e,n))},t.connectLeftDegenerate=function(e,n,i){var r,o,a,s,l;return r=n.eUp,ps.vertEq(r.Org,i)?(hs(!1),void t.spliceMergeVertices(e,r,i.anEdge)):ps.vertEq(r.Dst,i)?(hs(!1),n=t.topRightRegion(n),o=s=(a=(l=t.regionBelow(n)).eUp.Sym).Onext,l.fixUpperEdge&&(hs(o!==a),t.deleteRegion(e,l),e.mesh.delete(a),a=o.Oprev),e.mesh.splice(i.anEdge,a),ps.edgeGoesLeft(o)||(o=null),void t.addRightEdges(e,n,a.Onext,s,o,!0)):(e.mesh.splitEdge(r.Sym),n.fixUpperEdge&&(e.mesh.delete(r.Onext),n.fixUpperEdge=!1),e.mesh.splice(i.anEdge,r),void t.sweepEvent(e,i))},t.connectLeftVertex=function(e,n){var i,r,o,a,s,l,u=new vs;if(u.eUp=n.anEdge.Sym,i=e.dict.search(u).key,r=t.regionBelow(i))if(a=i.eUp,s=r.eUp,0!==ps.edgeSign(a.Dst,n,a.Org))if(o=ps.vertLeq(s.Dst,a.Dst)?i:r,i.inside||o.fixUpperEdge){if(o===i)l=e.mesh.connect(n.anEdge.Sym,a.Lnext);else l=e.mesh.connect(s.Dnext,n.anEdge).Sym;o.fixUpperEdge?t.fixUpperEdge(e,o,l):t.computeWinding(e,t.addRegionBelow(e,i,l)),t.sweepEvent(e,n)}else t.addRightEdges(e,i,n.anEdge,n.anEdge,null,!0);else t.connectLeftDegenerate(e,i,n)},t.sweepEvent=function(e,n){e.event=n,t.debugEvent(e);for(var i=n.anEdge;null===i.activeRegion;)if((i=i.Onext)===n.anEdge)return void t.connectLeftVertex(e,n);var r=t.topLeftRegion(e,i.activeRegion);hs(null!==r);var o=t.regionBelow(r),a=o.eUp,s=t.finishLeftRegions(e,o,null);s.Onext===a?t.connectRightVertex(e,r,s):t.addRightEdges(e,r,s.Onext,a,a,!0)},t.addSentinel=function(t,e,n,i){var r=new vs,o=t.mesh.makeEdge();o.Org.s=n,o.Org.t=i,o.Dst.s=e,o.Dst.t=i,t.event=o.Dst,r.eUp=o,r.windingNumber=0,r.inside=!1,r.fixUpperEdge=!1,r.sentinel=!0,r.dirty=!1,r.nodeUp=t.dict.insert(r)},t.initEdgeDict=function(e){e.dict=new xs(e,t.edgeLeq);var n=e.bmax[0]-e.bmin[0],i=e.bmax[1]-e.bmin[1],r=e.bmin[0]-n,o=e.bmax[0]+n,a=e.bmin[1]-i,s=e.bmax[1]+i;t.addSentinel(e,r,o,a),t.addSentinel(e,r,o,s)},t.doneEdgeDict=function(e){for(var n,i=0;null!==(n=e.dict.min().key);)n.sentinel||(hs(n.fixUpperEdge),hs(1==++i)),hs(0===n.windingNumber),t.deleteRegion(e,n)},t.removeDegenerateEdges=function(e){var n,i,r,o=e.mesh.eHead;for(n=o.next;n!==o;n=i)i=n.next,r=n.Lnext,ps.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(t.spliceMergeVertices(e,r,n),e.mesh.delete(n),r=(n=r).Lnext),r.Lnext===n&&(r!==n&&(r!==i&&r!==i.Sym||(i=i.next),e.mesh.delete(r)),n!==i&&n!==i.Sym||(i=i.next),e.mesh.delete(n))},t.initPriorityQ=function(t){var e,n,i,r=0;for(n=(i=t.mesh.vHead).next;n!==i;n=n.next)r++;for(r+=8,e=t.pq=new As(r,ps.vertLeq),n=(i=t.mesh.vHead).next;n!==i;n=n.next)n.pqHandle=e.insert(n);return n===i&&(e.init(),!0)},t.donePriorityQ=function(t){t.pq=null},t.removeDegenerateFaces=function(e,n){var i,r,o;for(i=n.fHead.next;i!==n.fHead;i=r)r=i.next,hs((o=i.anEdge).Lnext!==o),o.Lnext.Lnext===o&&(t.addWinding(o.Onext,o),e.mesh.delete(o));return!0},t.computeInterior=function(e,n){var i,r;if(void 0===n&&(n=!0),t.removeDegenerateEdges(e),!t.initPriorityQ(e))return!1;for(t.initEdgeDict(e);null!==(i=e.pq.extractMin());){for(;null!==(r=e.pq.min())&&ps.vertEq(r,i);)r=e.pq.extractMin(),t.spliceMergeVertices(e,i.anEdge,r.anEdge);t.sweepEvent(e,i)}return e.event=e.dict.min().key.eUp.Org,t.debugEvent(e),t.doneEdgeDict(e),t.donePriorityQ(e),!!t.removeDegenerateFaces(e,e.mesh)&&(n&&e.mesh.check(),!0)},t}(),Is=function(){function t(){this.mesh=new gs,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=as.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return t.prototype.dot_=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.prototype.normalize_=function(t){var e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!e)throw"Zero-size vector!";e=Math.sqrt(e),t[0]/=e,t[1]/=e,t[2]/=e},t.prototype.longAxis_=function(t){var e=0;return Math.abs(t[1])>Math.abs(t[0])&&(e=1),Math.abs(t[2])>Math.abs(t[e])&&(e=2),e},t.prototype.computeNormal_=function(t){var e,n,i,r,o,a,s=[0,0,0],l=[0,0,0],u=[0,0,0],c=[0,0,0],h=[0,0,0],p=[null,null,null],d=[null,null,null],f=this.mesh.vHead;e=f.next;for(var _=0;_<3;++_)r=e.coords[_],l[_]=r,d[_]=e,s[_]=r,p[_]=e;for(e=f.next;e!==f;e=e.next)for(var g=0;g<3;++g)(r=e.coords[g])<l[g]&&(l[g]=r,d[g]=e),r>s[g]&&(s[g]=r,p[g]=e);var m=0;if(s[1]-l[1]>s[0]-l[0]&&(m=1),s[2]-l[2]>s[m]-l[m]&&(m=2),l[m]>=s[m])return t[0]=0,t[1]=0,void(t[2]=1);for(a=0,n=d[m],i=p[m],u[0]=n.coords[0]-i.coords[0],u[1]=n.coords[1]-i.coords[1],u[2]=n.coords[2]-i.coords[2],e=f.next;e!==f;e=e.next)c[0]=e.coords[0]-i.coords[0],c[1]=e.coords[1]-i.coords[1],c[2]=e.coords[2]-i.coords[2],h[0]=u[1]*c[2]-u[2]*c[1],h[1]=u[2]*c[0]-u[0]*c[2],h[2]=u[0]*c[1]-u[1]*c[0],(o=h[0]*h[0]+h[1]*h[1]+h[2]*h[2])>a&&(a=o,t[0]=h[0],t[1]=h[1],t[2]=h[2]);a<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(u)]=1)},t.prototype.checkOrientation_=function(){for(var t,e,n=this.mesh.fHead,i=this.mesh.vHead,r=0,o=n.next;o!==n;o=o.next)if(!((e=o.anEdge).winding<=0))do{r+=(e.Org.s-e.Dst.s)*(e.Org.t+e.Dst.t),e=e.Lnext}while(e!==o.anEdge);if(r<0){for(t=i.next;t!==i;t=t.next)t.t=-t.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},t.prototype.projectPolygon_=function(){var t,e,n=this.mesh.vHead,i=[0,0,0],r=!1;i[0]=this.normal[0],i[1]=this.normal[1],i[2]=this.normal[2],i[0]||i[1]||i[2]||(this.computeNormal_(i),r=!0),t=this.sUnit,e=this.tUnit;var o=this.longAxis_(i);t[o]=0,t[(o+1)%3]=1,t[(o+2)%3]=0,e[o]=0,e[(o+1)%3]=0,e[(o+2)%3]=i[o]>0?1:-1;for(var a=n.next;a!==n;a=a.next)a.s=this.dot_(a.coords,t),a.t=this.dot_(a.coords,e);r&&this.checkOrientation_();for(var s=!0,l=n.next;l!==n;l=l.next)s?(this.bmin[0]=this.bmax[0]=l.s,this.bmin[1]=this.bmax[1]=l.t,s=!1):(l.s<this.bmin[0]&&(this.bmin[0]=l.s),l.s>this.bmax[0]&&(this.bmax[0]=l.s),l.t<this.bmin[1]&&(this.bmin[1]=l.t),l.t>this.bmax[1]&&(this.bmax[1]=l.t))},t.prototype.addWinding_=function(t,e){t.winding+=e.winding,t.Sym.winding+=e.Sym.winding},t.prototype.tessellateMonoRegion_=function(t,e){var n,i;if((n=e.anEdge).Lnext===n||n.Lnext.Lnext===n)throw"Mono region invalid";for(;ps.vertLeq(n.Dst,n.Org);n=n.Lprev);for(;ps.vertLeq(n.Org,n.Dst);n=n.Lnext);i=n.Lprev;for(;n.Lnext!==i;)if(ps.vertLeq(n.Dst,i.Org)){for(;i.Lnext!==n&&(ps.edgeGoesLeft(i.Lnext)||ps.edgeSign(i.Org,i.Dst,i.Lnext.Dst)<=0);)i=t.connect(i.Lnext,i).Sym;i=i.Lprev}else{for(;i.Lnext!==n&&(ps.edgeGoesRight(n.Lprev)||ps.edgeSign(n.Dst,n.Org,n.Lprev.Org)>=0);)n=t.connect(n,n.Lprev).Sym;n=n.Lnext}if(i.Lnext===n)throw"Mono region invalid";for(;i.Lnext.Lnext!==n;)i=t.connect(i.Lnext,i).Sym;return!0},t.prototype.tessellateInterior_=function(t){for(var e,n=t.fHead.next;n!==t.fHead;n=e)if(e=n.next,n.inside&&!this.tessellateMonoRegion_(t,n))return!1;return!0},t.prototype.discardExterior_=function(t){for(var e,n=t.fHead.next;n!==t.fHead;n=e)e=n.next,n.inside||t.zapFace(n)},t.prototype.setWindingNumber_=function(t,e,n){for(var i,r=t.eHead.next;r!==t.eHead;r=i)i=r.next,r.Rface.inside!==r.Lface.inside?r.winding=r.Lface.inside?e:-e:n?t.delete(r):r.winding=0},t.prototype.getNeighbourFace_=function(t){return t.Rface&&t.Rface.inside?t.Rface.n:-1},t.prototype.outputPolymesh_=function(t,e,n,i){var r,o,a=0,s=0;n>3&&t.mergeConvexFaces(n);for(var l=t.vHead.next;l!==t.vHead;l=l.next)l.n=-1;for(var u=t.fHead.next;u!==t.fHead;u=u.next)if(u.n=-1,u.inside){r=u.anEdge,o=0;do{-1===(l=r.Org).n&&(l.n=s,s++),o++,r=r.Lnext}while(r!==u.anEdge);if(o>n)throw"Face vertex greater that support polygon";u.n=a,++a}this.elementCount=a,e===ss.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*n,this.vertexCount=s,this.vertices=[],this.vertices.length=s*i,this.vertexIndices=[],this.vertexIndices.length=s;for(l=t.vHead.next;l!==t.vHead;l=l.next)if(-1!==l.n){var c=l.n*i;this.vertices[c+0]=l.coords[0],this.vertices[c+1]=l.coords[1],i>2&&(this.vertices[c+2]=l.coords[2]),this.vertexIndices[l.n]=l.idx}var h=0;for(u=t.fHead.next;u!==t.fHead;u=u.next)if(u.inside){r=u.anEdge,o=0;do{l=r.Org;this.elements[h++]=l.n,o++,r=r.Lnext}while(r!==u.anEdge);for(var p=o;p<n;++p)this.elements[h++]=-1;if(e===ss.CONNECTED_POLYGONS){r=u.anEdge;do{this.elements[h++]=this.getNeighbourFace_(r),r=r.Lnext}while(r!==u.anEdge);for(var d=o;d<n;++d)this.elements[h++]=-1}}},t.prototype.outputContours_=function(t,e){var n,i,r=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=t.fHead.next;a!==t.fHead;a=a.next)if(a.inside){i=n=a.anEdge;do{this.vertexCount++,n=n.Lnext}while(n!==i);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*e,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var s=0,l=0,u=0;r=0;for(a=t.fHead.next;a!==t.fHead;a=a.next)if(a.inside){o=0,i=n=a.anEdge;do{this.vertices[s++]=n.Org.coords[0],this.vertices[s++]=n.Org.coords[1],e>2&&(this.vertices[s++]=n.Org.coords[2]),this.vertexIndices[l++]=n.Org.idx,o++,n=n.Lnext}while(n!==i);this.elements[u++]=r,this.elements[u++]=o,r+=o}},t.prototype.addContour=function(t,e){null===this.mesh&&(this.mesh=new gs),t<2&&(t=2),t>3&&(t=3);for(var n=null,i=0;i<e.length;i+=t)null===n?(n=this.mesh.makeEdge(),this.mesh.splice(n,n.Sym)):(this.mesh.splitEdge(n),n=n.Lnext),n.Org.coords[0]=e[i+0],n.Org.coords[1]=e[i+1],n.Org.coords[2]=t>2?e[i+2]:0,n.Org.idx=this.vertexIndexCounter++,n.winding=1,n.Sym.winding=-1},t.prototype.tesselate=function(t,e,n,i,r,o){if(void 0===t&&(t=as.ODD),void 0===e&&(e=ss.POLYGONS),void 0===o&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,r&&(this.normal[0]=r[0],this.normal[1]=r[1],this.normal[2]=r[2]),this.windingRule=t,i<2&&(i=2),i>3&&(i=3),!this.mesh)return!1;this.projectPolygon_(),Cs.computeInterior(this,o);var a=this.mesh;return e===ss.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),e===ss.BOUNDARY_CONTOURS?this.outputContours_(a,i):this.outputPolymesh_(a,e,n,i),!0},t}();function Es(t){var e=t.windingRule,n=void 0===e?as.ODD:e,i=t.elementType,r=void 0===i?ss.POLYGONS:i,o=t.polySize,a=void 0===o?3:o,s=t.vertexSize,l=void 0===s?2:s,u=t.normal,c=void 0===u?[0,0,1]:u,h=t.contours,p=void 0===h?[]:h,d=t.strict,f=void 0===d||d,_=t.debug,g=void 0!==_&&_;if(!p&&f)throw new Error("Contours can't be empty");if(p){for(var m=new Is,y=0;y<p.length;y++)m.addContour(l||2,p[y]);return m.tesselate(n,r,a,l,c,f),{vertices:m.vertices,vertexIndices:m.vertexIndices,vertexCount:m.vertexCount,elements:m.elements,elementCount:m.elementCount,mesh:g?m.mesh:void 0}}}as.ODD,as.NONZERO,as.POSITIVE,as.NEGATIVE,as.ABS_GEQ_TWO,ss.POLYGONS,ss.CONNECTED_POLYGONS,ss.BOUNDARY_CONTOURS;var ws,Ss,Ds=(ws="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){var e,n,i;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){n=t,i=e}));var r,o,a,s,l,u,c,h,p,d=e;function f(t,e,n){if(!e||0>e)throw"Size should be a greater 0";if(!t)throw"Invalid pointer!";return(e=new(n=n||Uint8Array)(d.HEAP8.buffer,t,e)).F=t,e.I=function(){d._free(t)},e}var _=d.Tess=function(){if(!r){var t=d.cwrap;r=t("tessNewTess","number",["number"]),o=t("tessDeleteTess",null,["number"]),a=t("tessAddContour","number",["number","number","number","number","number"]),s=t("tessTesselate","number","number number number number number number".split(" ")),l=t("tessGetVertexCount","number",["number"]),u=t("tessGetVertices","number",["number"]),c=t("tessGetElementCount","number",["number"]),h=t("tessGetElements","number",["number"]),p=t("tessGetVertexIndices","number",["number"])}if(this.F=r(0),this.G=[],!this.F)throw"Unknown error, tesselator wasn't init!"};Object.assign(_.prototype,{dispose:function(){this.F&&(o(this.F),this.G.forEach((function(t){t.I&&t.I()})),this.G=[],this.F=0)},addContours:function(t,e){if(!this.F)throw"Tessealtor wasn't be inited!";e=e||2;var n=this.G=[];"number"==typeof t[0]&&(t=[t]);for(var i=0;i<t.length;i++){var r=t[i],o=r.length,s=Float32Array,l=d._malloc(o*s.BYTES_PER_ELEMENT);if(!l)throw"Can't allocate a "+o;(o=f(l,o,s)).set(r,0),n.push(o),a(this.F,e,o.F,e*Float32Array.BYTES_PER_ELEMENT,r.length/e)}},tesselate:function(t){if(0===this.G.length)throw"Contours data is required!";if(t=Object.assign({windingRule:0,elementType:0,polySize:3,vertexSize:2,fillVertexIndices:!1},t||{}),!s(this.F,0|t.windingRule||0,0|t.elementType||0,0|t.polySize||3,0|t.vertexSize||2,0))return null;var e=l(this.F),n=c(this.F),i={elementCount:n,vertexCount:e};return e&&n?(i.vertices=f(u(this.F),e*t.vertexSize,Float32Array),i.elements=f(h(this.F),n*t.polySize,Uint32Array),t.fillVertexIndices&&(i.vertexIndices=f(p(this.F),e,Uint32Array)),i):null}});var g,m={};for(g in e)e.hasOwnProperty(g)&&(m[g]=e[g]);var y="";"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),ws&&(y=ws),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"";var A=e.printErr||console.warn.bind(console);for(g in m)m.hasOwnProperty(g)&&(e[g]=m[g]);m=null;var v,b=0;e.wasmBinary&&(v=e.wasmBinary),e.noExitRuntime&&e.noExitRuntime,"object"!=typeof WebAssembly&&U("no native wasm support detected");var x,C=!1;function I(t){var n=e["_"+t];return n||U("Assertion failed: Cannot call unknown function "+t+", make sure it is exported"),n}var E,w,S,D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function T(t){if(t){for(var e=S,n=t+NaN,i=t;e[i]&&!(i>=n);)++i;if(16<i-t&&e.subarray&&D)t=D.decode(e.subarray(t,i));else{for(n="";t<i;){var r=e[t++];if(128&r){var o=63&e[t++];if(192==(224&r))n+=String.fromCharCode((31&r)<<6|o);else{var a=63&e[t++];65536>(r=224==(240&r)?(15&r)<<12|o<<6|a:(7&r)<<18|o<<12|a<<6|63&e[t++])?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(55296|r>>10,56320|1023&r))}}else n+=String.fromCharCode(r)}t=n}}else t="";return t}function P(){var t=x.buffer;E=t,e.HEAP8=w=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=new Int32Array(t),e.HEAPU8=S=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var B,O=[],M=[],L=[],R=[];function N(){var t=e.preRun.shift();O.unshift(t)}var F=0,k=null;function U(t){throw e.onAbort&&e.onAbort(t),A(t),C=!0,t=new WebAssembly.RuntimeError("abort("+t+"). Build with -s ASSERTIONS=1 for more info."),i(t),t}function V(t){return String.prototype.startsWith?t.startsWith("data:application/octet-stream;base64,"):0===t.indexOf("data:application/octet-stream;base64,")}e.preloadedImages={},e.preloadedAudios={};var j="data:application/octet-stream;base64,AGFzbQEAAAABYQ9gAn9/AX9gAn9/AGADf39/AX9gAX8Bf2ABfwBgA39/fwBgBX9/f39/AGAEf39/fwBgBn9/f39/fwBgAAF/YAR/f39/AX9gA39/fwF9YAAAYAR/fX19AGAGf39/f39/AX8CSQwBYQFhAAcBYQFiAAQBYQFjAAkBYQFkAAEBYQFlAAUBYQFmAAEBYQFnAAIBYQFoAAcBYQFpAAgBYQFqAAABYQFrAAIBYQFsAAMDSUgLAgADAgACAwgEAwIECgEBAAIAAwEDDAsBAAoEAQANAgQBAgMECQAFAAEAAwMDAwMOBgUGBAMBAgAAAAUCAwEDAAABAgADAAYEBQFwAQ8PBQcBAYACgIACBgkBfwFBwJrAAgsHSRIBbQIAAW4BAAFvACIBcAAWAXEAFQFyAEEBcwBAAXQAPQF1ADwBdgA7AXcAOgF4ADkBeQA4AXoANwFBADEBQgAwAUMALwFEADUJFAEAQQELDjJIJ0kDDkUsPz4tRENCCsqjAkihAQEEfQJAIAAqAhgiBCABKgIYIgNdRQRAIAMgBFwNASAAKgIcIAEqAhxfQQFzDQELIAMgAioCGCIFXUUEQCADIAVcDQEgASoCHCACKgIcX0UNAQsgAyAEkyIEIAUgA5MiA5JDAAAAAF5BAXMEfUMAAAAABSAEIAEqAhwiBCACKgIck5QgAyAEIAAqAhyTlJILDwtBhQhBqAhB0gBBvwgQAAAL6QMBBn8CQCABIAJGDQAgAigCECIEIAEoAhAiB0cEQCAEKAIIIgUhAwNAIAMgBzYCECADKAIIIgMgBUcNAAsgBCgCACIDIAQoAgQiBTYCBCAFIAM2AgAgBCAAKAKIASIDKAIANgIAIAMgBDYCAAsgAigCFCIFIAEoAhQiCEcEQCAFKAIIIgYhAwNAIAMgCDYCFCADKAIMIgMgBkcNAAsgBSgCACIDIAUoAgQiBjYCBCAGIAM2AgAgBSAAKAKMASIDKAIANgIAIAMgBTYCAAsgASgCCCEDIAIoAggiBigCBCABNgIMIAMoAgQgAjYCDCACIAM2AgggASAGNgIIIAQgB0YEQCAAKAKIARAPIgRFBEBBAA8LIAQgASgCECIDKAIEIgc2AgQgByAENgIAIAQgAzYCACADIAQ2AgQgBCACNgIIIAIhAwNAIAMgBDYCECADKAIIIgMgAkcNAAsgASgCECABNgIICyAFIAhHDQAgACgCjAEQDyIARQRAQQAPCyAAIAEoAhQiAygCBCIENgIEIAQgADYCACAAIAM2AgAgAyAANgIEIABBADoAFCAAQQA2AgwgACACNgIIIAAgAy0AFToAFSACIQMDQCADIAA2AhQgAygCDCIDIAJHDQALIAEoAhQgATYCCAtBAQvUBQEGfyABKAIUIgMgASgCBCIFKAIUIgZHBEAgAygCCCIEIQIDQCACIAY2AhQgAigCDCICIARHDQALIAMoAgAiAiADKAIEIgQ2AgQgBCACNgIAIAMgACgCjAEiAigCADYCACACIAM2AgALAkAgASABKAIIIgJGBEAgASgCECIDKAIIIgQhAgNAIAJBADYCECACKAIIIgIgBEcNAAsgAygCACICIAMoAgQiBDYCBCAEIAI2AgAgAyAAKAKIASICKAIANgIAIAIgAzYCAAwBCyABKAIEIgQoAhQgBCgCDCIENgIIIAEoAhAgAjYCCCAEKAIIIQcgAigCBCAENgIMIAcoAgQgATYCDCABIAc2AgggBCACNgIIIAMgBkcNACAAKAKMARAPIgNFBEBBAA8LIAMgASgCFCICKAIEIgQ2AgQgBCADNgIAIAMgAjYCACACIAM2AgQgA0EAOgAUIANBADYCDCADIAE2AgggAyACLQAVOgAVIAEhAgNAIAIgAzYCFCACKAIMIgIgAUcNAAsLAkAgBSAFKAIIIgJGBEAgBSgCECIDKAIIIgQhAgNAIAJBADYCECACKAIIIgIgBEcNAAsgAygCACICIAMoAgQiBDYCBCAEIAI2AgAgAyAAKAKIASICKAIANgIAIAIgAzYCACAFKAIUIgMoAggiBSECA0AgAkEANgIUIAIoAgwiAiAFRw0ACyADKAIAIgIgAygCBCIFNgIEIAUgAjYCACADIAAoAowBIgIoAgA2AgAgAiADNgIADAELIAEoAhQgBSgCBCgCDCIDNgIIIAUoAhAgAjYCCCADKAIIIQQgAigCBCADNgIMIAQoAgQgBTYCDCAFIAQ2AgggAyACNgIICyAAKAKEASECIAEoAgQiACABIAAgAUkbIgAoAgAiASgCBCAAKAIEKAIAIgM2AgAgAygCBCABNgIAIAAgAigCADYCACACIAA2AgBBAQujAQEFfwJAIAAoAgAiAQRAIAEoAgAiAg0BCyAAKAIUIgMoAgwgACgCDCAAKAIIbEEEaiADKAIAEQAAIgRFBEBBAA8LIAQgACgCBDYCACAAIAQ2AgQgACgCCCIFIAAoAgxsQQRqIQIgACgCACEDA0AgBCACIAVrIgJqIgEgAzYCACABIQMgAkEERw0ACyAAIAE2AgAgASgCACECCyAAIAI2AgAgAQtBAQJ/AkAgAkUNAANAIAEgA0EDdGooAgAiBEUNASAAIARGBEAgASADQQN0aigCBA8LIANBAWoiAyACRw0ACwtBAAu8AQEEfyAAIAEQUiIARQRAQQAPCyAAKAIEIQMgASgCBCIAKAIEKAIMIgIoAgghBCAAKAIIIgUoAgQgAjYCDCAEKAIEIAA2AgwgACAENgIIIAIgBTYCCCADKAIIIQIgACgCCCIEKAIEIAM2AgwgAigCBCAANgIMIAAgAjYCCCADIAQ2AgggACADKAIQNgIQIAMoAgQiAigCECACNgIIIAIgACgCFDYCFCADIAEoAhw2AhwgAiAAKAIcNgIcIAMLlwQBB38Cf0EAIAAoAoQBEA8iA0UNABogAyABKAIEIgQgASABIARLGyIJKAIEIgUoAgAiBDYCICAEKAIEIAM2AgAgAyAJNgIAIAUgA0EgaiIHNgIAIANCADcCECADIAc2AgwgAyAHNgIEIANCADcCGCADQgA3AjAgAyAHNgIoIANCADcCOCADIAM2AgggAyADNgIsIAMgAzYCJAJ/IAMgAigCFCIGIAEoAhQiCEciCUUNABogBigCCCIFIQQDQCAEIAg2AhQgBCgCDCIEIAVHDQALIAYoAgAiBSAGKAIEIgQ2AgQgBCAFNgIAIAYgACgCjAEiBCgCADYCACAEIAY2AgAgASgCFCEGIAMoAggLIQggASgCDCIFKAIIIQQgCCgCBCAFNgIMIAQoAgQgAzYCDCADIAQ2AgggBSAINgIIIAIoAgghBSADKAIoIgQoAgQgAjYCDCAFKAIEIAc2AgwgAyAFNgIoIAIgBDYCCCADIAEoAgQoAhA2AhAgAigCECECIAMgBjYCNCADIAI2AjAgAyAGNgIUIAEoAhQgBzYCCCADIAkNABpBACAAKAKMARAPIgJFDQAaIAIgASgCFCIBKAIEIgA2AgQgACACNgIAIAIgATYCACABIAI2AgQgAkEAOgAUIAJBADYCDCACIAM2AgggAiABLQAVOgAVIAMhBANAIAQgAjYCFCAEKAIMIgQgA0cNAAsgAwsLUgECf0GwFigCACIBIABBA2pBfHEiAmohAAJAIAJBAU5BACAAIAFNGw0APwBBEHQgAEkEQCAAEAtFDQELQbAWIAA2AgAgAQ8LQcAWQTA2AgBBfwvHBQIEfwJ9IAFBBGohCAJAAkACQAJAA0AgAigCECIGKgIYIgogAigCBCIHKAIQIgkqAhgiC11FBEAgCiALXA0CIAYqAhwgCSoCHF9FDQILIAAoAkwQDyIGRQ0EIAYgBzYCACAGIAAoAkAgASgCBCAGEB0iCTYCBCAJRQ0EIAZCADcCECAGQQA2AhggByAGNgIYIAIoAggiAiADRw0ACyABKAIEKAIIKAIAIgIoAgAoAgQiAygCEAJ/IARFBEAgAygCCCEECyAEKAIQC0YEQEEAIQcDQCABIQYgAiEBIAQiAiADIgQoAghHBEAgACgCACAEKAIEKAIMIAQQDUUNBiAAKAIAIAIoAgQoAgwgBBANRQ0GCyABIAYoAgggBCgCHGsiAzYCCCABAn8CQAJAAkACQAJAAkAgACgCPA4FBQABAgMECyADQQBHDAULIANBAEoMBAsgA0EfdgwDCyADQQFqQQJLDAILQd0PQZwPQfABQeMPEAAACyADQQFxCzYCDCAGQQE2AhQCQCAHRQ0AIAAgBhAeRQ0AIAQgBCgCHCACKAIcajYCHCAEKAIEIgMgAygCHCACKAIEKAIcajYCHCAGKAIAIQMgBigCGARAIAMoAhwNBQsgA0EANgIYIAAoAkAhByAIKAIAIgMoAgQiCCADKAIINgIIIAMoAgggCDYCBCADIAcoAhAiCCgCADYCACAIIAM2AgAgBiAAKAJMIgMoAgA2AgAgAyAGNgIAIAAoAgAgAhAORQ0GCyABQQRqIQhBASEHIAEoAgQoAggoAgAiAigCACgCBCIDKAIQIAQoAhBGDQALCyABQQE2AhQgAigCCCABKAIIIAMoAhxrRw0CIAUEQCAAIAEQKAsPC0G6E0GcD0HdAkHUExAAAAtB8w9BnA9BkgFBihAQAAALQeITQZwPQYcDQdQTEAAACyAAQZABakEBEAMAC/oMAQd/AkAgAEUNACAAQQhrIgMgAEEEaygCACIBQXhxIgBqIQUCQCABQQFxDQAgAUEDcUUNASADIAMoAgAiAmsiA0HUFigCACIESQ0BIAAgAmohACADQdgWKAIARwRAIAJB/wFNBEAgAygCCCIEIAJBA3YiAkEDdEHsFmpHGiAEIAMoAgwiAUYEQEHEFkHEFigCAEF+IAJ3cTYCAAwDCyAEIAE2AgwgASAENgIIDAILIAMoAhghBgJAIAMgAygCDCIBRwRAIAMoAggiAiAETwRAIAIoAgwaCyACIAE2AgwgASACNgIIDAELAkAgA0EUaiICKAIAIgQNACADQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQECQCADIAMoAhwiAkECdEH0GGoiBCgCAEYEQCAEIAE2AgAgAQ0BQcgWQcgWKAIAQX4gAndxNgIADAMLIAZBEEEUIAYoAhAgA0YbaiABNgIAIAFFDQILIAEgBjYCGCADKAIQIgIEQCABIAI2AhAgAiABNgIYCyADKAIUIgJFDQEgASACNgIUIAIgATYCGAwBCyAFKAIEIgFBA3FBA0cNAEHMFiAANgIAIAUgAUF+cTYCBCADIABBAXI2AgQgACADaiAANgIADwsgAyAFTw0AIAUoAgQiAUEBcUUNAAJAIAFBAnFFBEAgBUHcFigCAEYEQEHcFiADNgIAQdAWQdAWKAIAIABqIgA2AgAgAyAAQQFyNgIEIANB2BYoAgBHDQNBzBZBADYCAEHYFkEANgIADwsgBUHYFigCAEYEQEHYFiADNgIAQcwWQcwWKAIAIABqIgA2AgAgAyAAQQFyNgIEIAAgA2ogADYCAA8LIAFBeHEgAGohAAJAIAFB/wFNBEAgBSgCDCECIAUoAggiBCABQQN2IgFBA3RB7BZqIgdHBEBB1BYoAgAaCyACIARGBEBBxBZBxBYoAgBBfiABd3E2AgAMAgsgAiAHRwRAQdQWKAIAGgsgBCACNgIMIAIgBDYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJB1BYoAgBPBEAgAigCDBoLIAIgATYCDCABIAI2AggMAQsCQCAFQRRqIgIoAgAiBA0AIAVBEGoiAigCACIEDQBBACEBDAELA0AgAiEHIAQiAUEUaiICKAIAIgQNACABQRBqIQIgASgCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCICQQJ0QfQYaiIEKAIARgRAIAQgATYCACABDQFByBZByBYoAgBBfiACd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAE2AgAgAUUNAQsgASAGNgIYIAUoAhAiAgRAIAEgAjYCECACIAE2AhgLIAUoAhQiAkUNACABIAI2AhQgAiABNgIYCyADIABBAXI2AgQgACADaiAANgIAIANB2BYoAgBHDQFBzBYgADYCAA8LIAUgAUF+cTYCBCADIABBAXI2AgQgACADaiAANgIACyAAQf8BTQRAIABBA3YiAUEDdEHsFmohAAJ/QcQWKAIAIgJBASABdCIBcUUEQEHEFiABIAJyNgIAIAAMAQsgACgCCAshAiAAIAM2AgggAiADNgIMIAMgADYCDCADIAI2AggPC0EfIQIgA0IANwIQIABB////B00EQCAAQQh2IgEgAUGA/j9qQRB2QQhxIgF0IgIgAkGA4B9qQRB2QQRxIgJ0IgQgBEGAgA9qQRB2QQJxIgR0QQ92IAEgAnIgBHJrIgFBAXQgACABQRVqdkEBcXJBHGohAgsgAyACNgIcIAJBAnRB9BhqIQECQAJAAkBByBYoAgAiBEEBIAJ0IgdxRQRAQcgWIAQgB3I2AgAgASADNgIAIAMgATYCGAwBCyAAQQBBGSACQQF2ayACQR9GG3QhAiABKAIAIQEDQCABIgQoAgRBeHEgAEYNAiACQR12IQEgAkEBdCECIAQgAUEEcWoiB0EQaigCACIBDQALIAcgAzYCECADIAQ2AhgLIAMgAzYCDCADIAM2AggMAQsgBCgCCCIAIAM2AgwgBCADNgIIIANBADYCGCADIAQ2AgwgAyAANgIIC0HkFkHkFigCAEEBayIANgIAIAANAEGMGiEDA0AgAygCACIAQQhqIQMgAA0AC0HkFkF/NgIACwvCLQEMfyMAQRBrIgwkAAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQfQBTQRAQcQWKAIAIgdBECAAQQtqQXhxIABBC0kbIgVBA3YiAHYiAUEDcQRAIAFBf3NBAXEgAGoiAkEDdCIFQfQWaigCACIBQQhqIQACQCABKAIIIgMgBUHsFmoiBUYEQEHEFiAHQX4gAndxNgIADAELQdQWKAIAGiADIAU2AgwgBSADNgIICyABIAJBA3QiAkEDcjYCBCABIAJqIgEgASgCBEEBcjYCBAwNCyAFQcwWKAIAIghNDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxIgBBACAAa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2aiICQQN0IgNB9BZqKAIAIgEoAggiACADQewWaiIDRgRAQcQWIAdBfiACd3EiBzYCAAwBC0HUFigCABogACADNgIMIAMgADYCCAsgAUEIaiEAIAEgBUEDcjYCBCABIAVqIgQgAkEDdCICIAVrIgNBAXI2AgQgASACaiADNgIAIAgEQCAIQQN2IgVBA3RB7BZqIQFB2BYoAgAhAgJ/IAdBASAFdCIFcUUEQEHEFiAFIAdyNgIAIAEMAQsgASgCCAshBSABIAI2AgggBSACNgIMIAIgATYCDCACIAU2AggLQdgWIAQ2AgBBzBYgAzYCAAwNC0HIFigCACIKRQ0BIApBACAKa3FBAWsiACAAQQx2QRBxIgB2IgFBBXZBCHEiAiAAciABIAJ2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2akECdEH0GGooAgAiASgCBEF4cSAFayEEIAEhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAFayICIAQgAiAESSICGyEEIAAgASACGyEBIAAhAgwBCwsgASAFaiILIAFNDQIgASgCGCEJIAEgASgCDCIDRwRAIAEoAggiAEHUFigCAE8EQCAAKAIMGgsgACADNgIMIAMgADYCCAwMCyABQRRqIgIoAgAiAEUEQCABKAIQIgBFDQQgAUEQaiECCwNAIAIhBiAAIgNBFGoiAigCACIADQAgA0EQaiECIAMoAhAiAA0ACyAGQQA2AgAMCwtBfyEFIABBv39LDQAgAEELaiIAQXhxIQVByBYoAgAiCEUNAEEfIQZBACAFayEEAkACQAJAAn8gBUH///8HTQRAIABBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAFIABBFWp2QQFxckEcaiEGCyAGQQJ0QfQYaigCACICRQsEQEEAIQAMAQtBACEAIAVBAEEZIAZBAXZrIAZBH0YbdCEBA0ACQCACKAIEQXhxIAVrIgcgBE8NACACIQMgByIEDQBBACEEIAIhAAwDCyAAIAIoAhQiByAHIAIgAUEddkEEcWooAhAiAkYbIAAgBxshACABQQF0IQEgAg0ACwsgACADckUEQEECIAZ0IgBBACAAa3IgCHEiAEUNAyAAQQAgAGtxQQFrIgAgAEEMdkEQcSIAdiIBQQV2QQhxIgIgAHIgASACdiIAQQJ2QQRxIgFyIAAgAXYiAEEBdkECcSIBciAAIAF2IgBBAXZBAXEiAXIgACABdmpBAnRB9BhqKAIAIQALIABFDQELA0AgACgCBEF4cSAFayICIARJIQEgAiAEIAEbIQQgACADIAEbIQMgACgCECIBBH8gAQUgACgCFAsiAA0ACwsgA0UNACAEQcwWKAIAIAVrTw0AIAMgBWoiBiADTQ0BIAMoAhghCSADIAMoAgwiAUcEQCADKAIIIgBB1BYoAgBPBEAgACgCDBoLIAAgATYCDCABIAA2AggMCgsgA0EUaiICKAIAIgBFBEAgAygCECIARQ0EIANBEGohAgsDQCACIQcgACIBQRRqIgIoAgAiAA0AIAFBEGohAiABKAIQIgANAAsgB0EANgIADAkLIAVBzBYoAgAiAU0EQEHYFigCACEAAkAgASAFayICQRBPBEBBzBYgAjYCAEHYFiAAIAVqIgM2AgAgAyACQQFyNgIEIAAgAWogAjYCACAAIAVBA3I2AgQMAQtB2BZBADYCAEHMFkEANgIAIAAgAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAsgAEEIaiEADAsLIAVB0BYoAgAiAUkEQEHQFiABIAVrIgE2AgBB3BZB3BYoAgAiACAFaiICNgIAIAIgAUEBcjYCBCAAIAVBA3I2AgQgAEEIaiEADAsLQQAhACAFQS9qIgQCf0GcGigCAARAQaQaKAIADAELQagaQn83AgBBoBpCgKCAgICABDcCAEGcGiAMQQxqQXBxQdiq1aoFczYCAEGwGkEANgIAQYAaQQA2AgBBgCALIgJqIgdBACACayIGcSICIAVNDQpB/BkoAgAiAwRAQfQZKAIAIgggAmoiCSAITQ0LIAMgCUkNCwtBgBotAABBBHENBQJAAkBB3BYoAgAiAwRAQYQaIQADQCADIAAoAgAiCE8EQCAIIAAoAgRqIANLDQMLIAAoAggiAA0ACwtBABATIgFBf0YNBiACIQdBoBooAgAiAEEBayIDIAFxBEAgAiABayABIANqQQAgAGtxaiEHCyAFIAdPDQYgB0H+////B0sNBkH8GSgCACIABEBB9BkoAgAiAyAHaiIGIANNDQcgACAGSQ0HCyAHEBMiACABRw0BDAgLIAcgAWsgBnEiB0H+////B0sNBSAHEBMiASAAKAIAIAAoAgRqRg0EIAEhAAsCQCAFQTBqIAdNDQAgAEF/Rg0AQaQaKAIAIgEgBCAHa2pBACABa3EiAUH+////B0sEQCAAIQEMCAsgARATQX9HBEAgASAHaiEHIAAhAQwIC0EAIAdrEBMaDAULIAAiAUF/Rw0GDAQLAAtBACEDDAcLQQAhAQwFCyABQX9HDQILQYAaQYAaKAIAQQRyNgIACyACQf7///8HSw0BIAIQEyIBQQAQEyIATw0BIAFBf0YNASAAQX9GDQEgACABayIHIAVBKGpNDQELQfQZQfQZKAIAIAdqIgA2AgBB+BkoAgAgAEkEQEH4GSAANgIACwJAAkACQEHcFigCACIEBEBBhBohAANAIAEgACgCACICIAAoAgQiA2pGDQIgACgCCCIADQALDAILQdQWKAIAIgBBACAAIAFNG0UEQEHUFiABNgIAC0EAIQBBiBogBzYCAEGEGiABNgIAQeQWQX82AgBB6BZBnBooAgA2AgBBkBpBADYCAANAIABBA3QiAkH0FmogAkHsFmoiAzYCACACQfgWaiADNgIAIABBAWoiAEEgRw0AC0HQFiAHQShrIgBBeCABa0EHcUEAIAFBCGpBB3EbIgJrIgM2AgBB3BYgASACaiICNgIAIAIgA0EBcjYCBCAAIAFqQSg2AgRB4BZBrBooAgA2AgAMAgsgASAETQ0AIAIgBEsNACAAKAIMQQhxDQAgACADIAdqNgIEQdwWIARBeCAEa0EHcUEAIARBCGpBB3EbIgBqIgE2AgBB0BZB0BYoAgAgB2oiAiAAayIANgIAIAEgAEEBcjYCBCACIARqQSg2AgRB4BZBrBooAgA2AgAMAQtB1BYoAgAiAyABSwRAQdQWIAE2AgAgASEDCyABIAdqIQJBhBohAAJAAkACQAJAAkACQANAIAIgACgCAEcEQCAAKAIIIgANAQwCCwsgAC0ADEEIcUUNAQtBhBohAANAIAQgACgCACICTwRAIAIgACgCBGoiAyAESw0DCyAAKAIIIQAMAAsACyAAIAE2AgAgACAAKAIEIAdqNgIEIAFBeCABa0EHcUEAIAFBCGpBB3EbaiIJIAVBA3I2AgQgAkF4IAJrQQdxQQAgAkEIakEHcRtqIgEgCWsgBWshACAFIAlqIQYgASAERgRAQdwWIAY2AgBB0BZB0BYoAgAgAGoiADYCACAGIABBAXI2AgQMAwsgAUHYFigCAEYEQEHYFiAGNgIAQcwWQcwWKAIAIABqIgA2AgAgBiAAQQFyNgIEIAAgBmogADYCAAwDCyABKAIEIgJBA3FBAUYEQCACQXhxIQoCQCACQf8BTQRAIAEoAggiAyACQQN2IgVBA3RB7BZqRxogAyABKAIMIgJGBEBBxBZBxBYoAgBBfiAFd3E2AgAMAgsgAyACNgIMIAIgAzYCCAwBCyABKAIYIQgCQCABIAEoAgwiB0cEQCABKAIIIgIgA08EQCACKAIMGgsgAiAHNgIMIAcgAjYCCAwBCwJAIAFBFGoiBCgCACIFDQAgAUEQaiIEKAIAIgUNAEEAIQcMAQsDQCAEIQIgBSIHQRRqIgQoAgAiBQ0AIAdBEGohBCAHKAIQIgUNAAsgAkEANgIACyAIRQ0AAkAgASABKAIcIgJBAnRB9BhqIgMoAgBGBEAgAyAHNgIAIAcNAUHIFkHIFigCAEF+IAJ3cTYCAAwCCyAIQRBBFCAIKAIQIAFGG2ogBzYCACAHRQ0BCyAHIAg2AhggASgCECICBEAgByACNgIQIAIgBzYCGAsgASgCFCICRQ0AIAcgAjYCFCACIAc2AhgLIAEgCmohASAAIApqIQALIAEgASgCBEF+cTYCBCAGIABBAXI2AgQgACAGaiAANgIAIABB/wFNBEAgAEEDdiIBQQN0QewWaiEAAn9BxBYoAgAiAkEBIAF0IgFxRQRAQcQWIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBjYCCCABIAY2AgwgBiAANgIMIAYgATYCCAwDC0EfIQQgAEH///8HTQRAIABBCHYiASABQYD+P2pBEHZBCHEiAXQiAiACQYDgH2pBEHZBBHEiAnQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASACciADcmsiAUEBdCAAIAFBFWp2QQFxckEcaiEECyAGIAQ2AhwgBkIANwIQIARBAnRB9BhqIQECQEHIFigCACICQQEgBHQiA3FFBEBByBYgAiADcjYCACABIAY2AgAgBiABNgIYDAELIABBAEEZIARBAXZrIARBH0YbdCEEIAEoAgAhAQNAIAEiAigCBEF4cSAARg0DIARBHXYhASAEQQF0IQQgAiABQQRxaiIDKAIQIgENAAsgAyAGNgIQIAYgAjYCGAsgBiAGNgIMIAYgBjYCCAwCC0HQFiAHQShrIgBBeCABa0EHcUEAIAFBCGpBB3EbIgJrIgY2AgBB3BYgASACaiICNgIAIAIgBkEBcjYCBCAAIAFqQSg2AgRB4BZBrBooAgA2AgAgBCADQScgA2tBB3FBACADQSdrQQdxG2pBL2siACAAIARBEGpJGyICQRs2AgQgAkGMGikCADcCECACQYQaKQIANwIIQYwaIAJBCGo2AgBBiBogBzYCAEGEGiABNgIAQZAaQQA2AgAgAkEYaiEAA0AgAEEHNgIEIABBCGohASAAQQRqIQAgASADSQ0ACyACIARGDQMgAiACKAIEQX5xNgIEIAQgAiAEayIDQQFyNgIEIAIgAzYCACADQf8BTQRAIANBA3YiAUEDdEHsFmohAAJ/QcQWKAIAIgJBASABdCIBcUUEQEHEFiABIAJyNgIAIAAMAQsgACgCCAshASAAIAQ2AgggASAENgIMIAQgADYCDCAEIAE2AggMBAtBHyEAIARCADcCECADQf///wdNBEAgA0EIdiIAIABBgP4/akEQdkEIcSIAdCIBIAFBgOAfakEQdkEEcSIBdCICIAJBgIAPakEQdkECcSICdEEPdiAAIAFyIAJyayIAQQF0IAMgAEEVanZBAXFyQRxqIQALIAQgADYCHCAAQQJ0QfQYaiEBAkBByBYoAgAiAkEBIAB0IgdxRQRAQcgWIAIgB3I2AgAgASAENgIAIAQgATYCGAwBCyADQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQEDQCABIgIoAgRBeHEgA0YNBCAAQR12IQEgAEEBdCEAIAIgAUEEcWoiBygCECIBDQALIAcgBDYCECAEIAI2AhgLIAQgBDYCDCAEIAQ2AggMAwsgAigCCCIAIAY2AgwgAiAGNgIIIAZBADYCGCAGIAI2AgwgBiAANgIICyAJQQhqIQAMBQsgAigCCCIAIAQ2AgwgAiAENgIIIARBADYCGCAEIAI2AgwgBCAANgIIC0HQFigCACIAIAVNDQBB0BYgACAFayIBNgIAQdwWQdwWKAIAIgAgBWoiAjYCACACIAFBAXI2AgQgACAFQQNyNgIEIABBCGohAAwDC0HAFkEwNgIAQQAhAAwCCwJAIAlFDQACQCADKAIcIgBBAnRB9BhqIgIoAgAgA0YEQCACIAE2AgAgAQ0BQcgWIAhBfiAAd3EiCDYCAAwCCyAJQRBBFCAJKAIQIANGG2ogATYCACABRQ0BCyABIAk2AhggAygCECIABEAgASAANgIQIAAgATYCGAsgAygCFCIARQ0AIAEgADYCFCAAIAE2AhgLAkAgBEEPTQRAIAMgBCAFaiIAQQNyNgIEIAAgA2oiACAAKAIEQQFyNgIEDAELIAMgBUEDcjYCBCAGIARBAXI2AgQgBCAGaiAENgIAIARB/wFNBEAgBEEDdiIBQQN0QewWaiEAAn9BxBYoAgAiAkEBIAF0IgFxRQRAQcQWIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBjYCCCABIAY2AgwgBiAANgIMIAYgATYCCAwBC0EfIQAgBEH///8HTQRAIARBCHYiACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiAiACQYCAD2pBEHZBAnEiAnRBD3YgACABciACcmsiAEEBdCAEIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRB9BhqIQECQAJAIAhBASAAdCICcUUEQEHIFiACIAhyNgIAIAEgBjYCAAwBCyAEQQBBGSAAQQF2ayAAQR9GG3QhACABKAIAIQUDQCAFIgEoAgRBeHEgBEYNAiAAQR12IQIgAEEBdCEAIAEgAkEEcWoiAigCECIFDQALIAIgBjYCEAsgBiABNgIYIAYgBjYCDCAGIAY2AggMAQsgASgCCCIAIAY2AgwgASAGNgIIIAZBADYCGCAGIAE2AgwgBiAANgIICyADQQhqIQAMAQsCQCAJRQ0AAkAgASgCHCIAQQJ0QfQYaiICKAIAIAFGBEAgAiADNgIAIAMNAUHIFiAKQX4gAHdxNgIADAILIAlBEEEUIAkoAhAgAUYbaiADNgIAIANFDQELIAMgCTYCGCABKAIQIgAEQCADIAA2AhAgACADNgIYCyABKAIUIgBFDQAgAyAANgIUIAAgAzYCGAsCQCAEQQ9NBEAgASAEIAVqIgBBA3I2AgQgACABaiIAIAAoAgRBAXI2AgQMAQsgASAFQQNyNgIEIAsgBEEBcjYCBCAEIAtqIAQ2AgAgCARAIAhBA3YiA0EDdEHsFmohAEHYFigCACECAn9BASADdCIDIAdxRQRAQcQWIAMgB3I2AgAgAAwBCyAAKAIICyEDIAAgAjYCCCADIAI2AgwgAiAANgIMIAIgAzYCCAtB2BYgCzYCAEHMFiAENgIACyABQQhqIQALIAxBEGokACAAC/MDAQR/IAEoAgAhAwJAAkACQCABIAJHBEADQCABQQA2AhggASgCBCIEKAIIKAIAIgUoAgAiBigCECADKAIQRwRAIAUoAhhFBEAgASgCDCEFIAMoAhQiAiADNgIIIAIgBToAFSADQQA2AhggACgCQCEFIAQoAgQiAiAEKAIINgIIIAQoAgggAjYCBCAEIAUoAhAiAigCADYCACACIAQ2AgAgASAAKAJMIgAoAgA2AgAgACABNgIAIAMPCyAAKAIAIAMoAggoAgQgBigCBBASIgZFDQUgBSgCGEUNAyAAKAIAIAUoAgAQDkUNBSAFIAY2AgAgBUEANgIYIAYgBTYCGAsgBiADKAIIRwRAIAAoAgAgBigCBCgCDCAGEA1FDQUgACgCACADIAYQDUUNBQsgASgCDCEGIAEoAgAiAygCFCIEIAM2AgggBCAGOgAVIAEoAhgEQCADKAIcDQQLIANBADYCGCAAKAJAIQYgASgCBCIDKAIEIgQgAygCCDYCCCADKAIIIAQ2AgQgAyAGKAIQIgQoAgA2AgAgBCADNgIAIAEgACgCTCIEKAIANgIAIAQgATYCACAFKAIAIQMgBSIBIAJHDQALCyADDwtBvg9BnA9BnwFB0A8QAAALQfMPQZwPQZIBQYoQEAAACyAAQZABakEBEAMAC0oBA38gACgCFCEBIAAoAgQiAgRAA0AgAigCACEDIAEoAgwgAiABKAIIEQEAIAMiAg0ACwsgAEIANwIAIAEoAgwgACABKAIIEQEAC74BAQJ/IAAoAgxBGCAAKAIAEQAAIgQgATYCECAEIAA2AhQgBCADNgIMIAQgAkEEIAJBBEsbIgE2AgggBEIANwIAIAAoAgwgASADbEEEaiAAKAIAEQAAIgMEQCADIAQoAgQ2AgAgBCADNgIEIAQoAggiBSAEKAIMbEEEaiEAIAQoAgAhAgNAIAMgACAFayIAaiIBIAI2AgAgASECIABBBEcNAAsgBCACNgIAIAQPCyAAKAIMIAQgACgCCBEBAEEAC6gKAgl/An0jAEEgayIKJAAgACABNgJIIAEoAggiAyEEAkACQAJAAkACQANAIAQoAhgiAg0BIAQoAggiBCADRw0ACyAKIAMoAgQ2AgAgACgCQCAKEDYoAgAiAigCBCgCCCgCACIERQ0BIAQoAgAhBiACKAIAIgUoAgQoAhAgASAFKAIQEAxDAAAAAFsEQCAAIAIgARBHDAILAn8gAiAGKAIEIgYoAhAiByoCGCILIAUoAgQoAhAiCCoCGCIMXQ0AGiALIAxbBEAgAiAHKgIcIAgqAhxfDQEaCyAECyEDAkAgAigCDEUEQCADKAIYRQ0BCyAAKAIAIQQCQCACIANGBEAgBCABKAIIKAIEIAUoAgwQEiIFDQEMBgsgBCAGKAIIKAIEIAEoAggQEiIERQ0FIAQoAgQhBQsgAygCGARAIAAoAgAgAygCABAOBEAgAyAFNgIAIANBADYCGCAFIAM2AhggACABEBoMBAsMBQsgACgCTBAPIgNFDQQgAyAFNgIAIAMgACgCQCACKAIEIAMQHSICNgIEIAJFDQQgA0IANwIQIANBADYCGCAFIAM2AhggACgCPCEEIAMgAygCACgCHCACKAIEKAIAKAIIaiICNgIIIAMCfwJAAkACQAJAAkACQCAEDgUFAAECAwQLIAJBAEcMBQsgAkEASgwECyACQR92DAMLIAJBAWpBAksMAgtB3Q9BnA9B8AFB4w8QAAALIAJBAXELNgIMIAAgARAaDAILIAAgAiABKAIIIgAgAEEAQQEQFAwBCyACKAIAKAIQIQEDQCACKAIEKAIEKAIAIgIoAgAiAygCECABRg0ACyACKAIYBEAgACgCACACKAIEKAIIKAIAKAIAKAIEIAMoAgwQEiIBRQ0DIAIoAhhFDQQgACgCACACKAIAEA5FDQMgAiABNgIAIAJBADYCGCABIAI2AhggAigCBCgCBCgCACICRQ0DCyACKAIEKAIIKAIAIgEoAgAiBCAAIAFBABAXIgEoAggiA0YEQCACKAIAIgMoAgQoAhAgAigCBCgCCCgCACIHKAIAIgYoAgQoAhBHBEAgACACECkaC0EBIQgCQCAAKAJIIgUqAhgiCyADKAIQIgkqAhhcDQAgCSoCHCAFKgIcXA0AIAAoAgAgBCgCBCgCDCADEA1FDQQgAigCACgCECEEA0AgAigCBCgCBCgCACICKAIAIgUoAhAgBEYNAAsgAigCGARAIAAoAgAgAigCBCgCCCgCACgCACgCBCAFKAIMEBIiBEUNBSACKAIYRQ0GIAAoAgAgAigCABAORQ0FIAIgBDYCACACQQA2AhggBCACNgIYIAIoAgQoAgQoAgAiAkUNBQsgAigCBCgCCCgCACIFKAIAIQQgACAFIAcQFxogACgCSCIFKgIYIQtBACEICwJAAkACQCALIAYoAhAiCSoCGCILXA0AIAkqAhwgBSoCHFwNACAAKAIAIAEgBigCBCgCDBANRQ0GIAAgB0EAEBchAQwBCyAIDQELIAAgAiABKAIIIAQgBEEBEBQMAgsCQCALIAMoAhAiBCoCGCIMXUUEQCALIAxcDQEgCSoCHCAEKgIcX0EBcw0BCyAGKAIEKAIMIQMLIAAoAgAgASgCCCgCBCADEBIiAUUNAyAAIAIgASABKAIIIgMgA0EAEBQgASgCBCgCGEEBNgIYIAAgAhAoDAELIAAgAiADIAQgBEEBEBQLIApBIGokAA8LAAsgAEGQAWpBARADAAtBvg9BnA9BnwFB0A8QAAALvAICCn8CfSAAKAIEIgMgACgCACICIAFBAnRqKAIAIgdBA3RqIQkgACgCDCEKIAAoAgghCAJAA0ACQCABQQF0IgAgCE4NACADIAIgAEEBciIEQQJ0aigCAEEDdGooAgAiBSoCGCIMIAMgAiAAQQJ0aigCAEEDdGooAgAiBioCGCINXUUEQCAMIA1cDQEgBSoCHCAGKgIcX0EBcw0BCyAEIQALIAAgCkwEQCAAIAhKDQIgCSgCACIEKgIYIgwgAyACIABBAnRqKAIAIgVBA3RqIgYoAgAiCyoCGCINXQ0CIAwgDVsEQCAEKgIcIAsqAhxfQQFzRQ0DCyACIAFBAnRqIAU2AgAgBiABNgIEIAAhAQwBCwtB7w5BiA1BjQFBgA8QAAALIAIgAUECdGogBzYCACADIAdBA3RqIAE2AgQL4AIBAn8CQCABRQ0AIAAgAWoiAkEBa0H/AToAACAAQf8BOgAAIAFBA0kNACACQQJrQf8BOgAAIABB/wE6AAEgAkEDa0H/AToAACAAQf8BOgACIAFBB0kNACACQQRrQf8BOgAAIABB/wE6AAMgAUEJSQ0AIABBACAAa0EDcSIDaiICQX82AgAgAiABIANrQXxxIgNqIgFBBGtBfzYCACADQQlJDQAgAkF/NgIIIAJBfzYCBCABQQhrQX82AgAgAUEMa0F/NgIAIANBGUkNACACQX82AhggAkF/NgIUIAJBfzYCECACQX82AgwgAUEQa0F/NgIAIAFBFGtBfzYCACABQRhrQX82AgAgAUEca0F/NgIAIAMgAkEEcUEYciIDayIBQSBJDQAgAiADaiECA0AgAkJ/NwMYIAJCfzcDECACQn83AwggAkJ/NwMAIAJBIGohAiABQSBrIgFBH0sNAAsLIAALZQEBfwNAIAEoAggiASgCACIDBEAgACgCDCADIAIgACgCFBECAEUNAQsLIAAoAhAQDyIARQRAQQAPCyAAIAI2AgAgACABKAIENgIEIAEoAgQgADYCCCAAIAE2AgggASAANgIEIAAL2AICBn8CfQJAAkACQCABKAIAIgMoAhAiAioCGCIIIAEoAgQoAggoAgAiBygCACIEKAIQIgUqAhgiCV1FBEAgCCAJXA0BIAIqAhwgBSoCHF9BAXMNAQsgBCgCBCgCECACIAUQDEMAAAAAXg0BAkAgAygCECICKgIYIAQoAhAiBSoCGFsEQCACKgIcIAUqAhxbDQELIAAoAgAgBCgCBBARRQ0DIAAoAgAgAyAEKAIEKAIMEA1FDQMgB0EBNgIUIAFBATYCFEEBDwtBASEGIAIgBUYNASAAKAJEIAIoAiAQSiAAKAIAIAQoAgQoAgwgAxANDQEMAgsgAygCBCgCECAFIAIQDEMAAAAAXQ0AQQEhBiABQQE2AhQgASgCBCgCBCgCAEEBNgIUIAAoAgAgAygCBBARRQ0BIAAoAgAgBCgCBCgCDCADEA1FDQELIAYPCyAAQZABakEBEAMAC7MDAgp/An0CQCAAKAIMIgNFBEAgACgCACIBKAIEIgcgASgCACIAKAIEIgVBA3RqIgQoAgAhAiABKAIIIghBAUgNASAAIAAgCEECdGooAgAiADYCBCAHIABBA3RqQQE2AgQgBEEANgIAIAQgASgCEDYCBCABIAhBAWs2AgggASAFNgIQIAhBAUYNASABQQEQGyACDwsgACgCCCIIIANBAnRqQQRrKAIAKAIAIQcCQCAAKAIAIgYoAggiCUUNACAGKAIEIgogBigCACIBKAIEIgRBA3RqIgUoAgAiAioCGCILIAcqAhgiDF1FBEAgCyAMXA0BIAIqAhwgByoCHF9BAXMNAQsgCUEBSA0BIAEgASAJQQJ0aigCACIANgIEIAogAEEDdGpBATYCBCAFQQA2AgAgCiAEQQN0aiAGKAIQNgIEIAYgCUEBazYCCCAGIAQ2AhAgCUEBRg0BIAZBARAbIAIPCyADQQEgA0EBSBtBAWshAgNAAkAgA0ECSARAIAIhBQwBCyADQQJ0IQQgA0EBayIFIQMgBCAIakEIaygCACgCAEUNAQsLIAAgBTYCDCAHIQILIAILlwEBAX8gAQRAIAEoAgAiAgRAIAAoAgwgAigCBCAAKAIIEQEAIAAoAgwgAigCACAAKAIIEQEAIAAoAgwgAiAAKAIIEQEACyABKAIIIgIEQCAAKAIMIAIgACgCCBEBAAsgASgCBCICBEAgACgCDCACIAAoAggRAQALIAAoAgwgASAAKAIIEQEADwtB6Q1BiA1BxwJB9A0QAAALgQQBB38gACgCiAEQDyEEIAAoAogBEA8hBSAAKAKMARAPIQMCQAJAAkAgBEUNACAFRQ0AIAMNAQsgBARAIAQgACgCiAEiAigCADYCACACIAQ2AgALIAUEQCAFIAAoAogBIgIoAgA2AgAgAiAFNgIACyADRQ0BIAMgACgCjAEiACgCADYCACAAIAM2AgBBAA8LIAAoAoQBEA8iAUUEQEEADwsgASAAKAJIIgIgAEHEAGoiBiACIAZJGyICKAIEIgYoAgAiBzYCICAHKAIEIAE2AgAgASACNgIAIAYgAUEgaiIGNgIAIAFCADcCECABIAY2AgwgASAGNgIEIAFCADcCGCABQgA3AjAgASAGNgIoIAFCADcCOCABIAE2AgggASABNgIsIAEgATYCJCAEIAAoAgQiAjYCBCACIAQ2AgAgBCABNgIIIAQgADYCACABIQIDQCACIAQ2AhAgAigCCCICIAFHDQALIAUgBDYCBCAEIAU2AgAgBSAANgIAIAAgBTYCBCAFIAY2AgggBiECA0AgAiAFNgIQIAIoAggiAiAGRw0ACyADIAAoAjAiAjYCBCACIAM2AgAgAyAAQSxqNgIAIAAgAzYCMCADQQA6ABQgA0EANgIMIAMgATYCCCADIAAtAEE6ABUgASECA0AgAiADNgIUIAIoAgwiAiABRw0ACwsgAQsDAAELtgEBBH0CQCAAKgIYIgQgASoCGCIDXUUEQCADIARcDQEgACoCHCABKgIcX0EBcw0BCyADIAIqAhgiBV1FBEAgAyAFXA0BIAEqAhwgAioCHF9FDQELIAMgBJMiBCAFIAOTIgOSIgVDAAAAAF5BAXMEfUMAAAAABSABKgIcIAAgAiADIAReIgEbKgIcIgaTIAQgAyABGyAFlSAGIAIgACABGyoCHJOUkgsPC0GFCEGoCEE6QbMIEAAAC4AMAQZ/IAAgAWohBQJAAkAgACgCBCICQQFxDQAgAkEDcUUNASAAKAIAIgMgAWohASAAIANrIgBB2BYoAgBHBEBB1BYoAgAhBCADQf8BTQRAIAAoAggiBCADQQN2IgNBA3RB7BZqRxogBCAAKAIMIgJGBEBBxBZBxBYoAgBBfiADd3E2AgAMAwsgBCACNgIMIAIgBDYCCAwCCyAAKAIYIQYCQCAAIAAoAgwiAkcEQCAAKAIIIgMgBE8EQCADKAIMGgsgAyACNgIMIAIgAzYCCAwBCwJAIABBFGoiAygCACIEDQAgAEEQaiIDKAIAIgQNAEEAIQIMAQsDQCADIQcgBCICQRRqIgMoAgAiBA0AIAJBEGohAyACKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgACAAKAIcIgNBAnRB9BhqIgQoAgBGBEAgBCACNgIAIAINAUHIFkHIFigCAEF+IAN3cTYCAAwDCyAGQRBBFCAGKAIQIABGG2ogAjYCACACRQ0CCyACIAY2AhggACgCECIDBEAgAiADNgIQIAMgAjYCGAsgACgCFCIDRQ0BIAIgAzYCFCADIAI2AhgMAQsgBSgCBCICQQNxQQNHDQBBzBYgATYCACAFIAJBfnE2AgQgACABQQFyNgIEIAUgATYCAA8LAkAgBSgCBCICQQJxRQRAIAVB3BYoAgBGBEBB3BYgADYCAEHQFkHQFigCACABaiIBNgIAIAAgAUEBcjYCBCAAQdgWKAIARw0DQcwWQQA2AgBB2BZBADYCAA8LIAVB2BYoAgBGBEBB2BYgADYCAEHMFkHMFigCACABaiIBNgIAIAAgAUEBcjYCBCAAIAFqIAE2AgAPC0HUFigCACEDIAJBeHEgAWohAQJAIAJB/wFNBEAgBSgCCCIEIAJBA3YiAkEDdEHsFmpHGiAEIAUoAgwiA0YEQEHEFkHEFigCAEF+IAJ3cTYCAAwCCyAEIAM2AgwgAyAENgIIDAELIAUoAhghBgJAIAUgBSgCDCICRwRAIAMgBSgCCCIDTQRAIAMoAgwaCyADIAI2AgwgAiADNgIIDAELAkAgBUEUaiIDKAIAIgQNACAFQRBqIgMoAgAiBA0AQQAhAgwBCwNAIAMhByAEIgJBFGoiAygCACIEDQAgAkEQaiEDIAIoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiA0ECdEH0GGoiBCgCAEYEQCAEIAI2AgAgAg0BQcgWQcgWKAIAQX4gA3dxNgIADAILIAZBEEEUIAYoAhAgBUYbaiACNgIAIAJFDQELIAIgBjYCGCAFKAIQIgMEQCACIAM2AhAgAyACNgIYCyAFKAIUIgNFDQAgAiADNgIUIAMgAjYCGAsgACABQQFyNgIEIAAgAWogATYCACAAQdgWKAIARw0BQcwWIAE2AgAPCyAFIAJBfnE2AgQgACABQQFyNgIEIAAgAWogATYCAAsgAUH/AU0EQCABQQN2IgJBA3RB7BZqIQECf0HEFigCACIDQQEgAnQiAnFFBEBBxBYgAiADcjYCACABDAELIAEoAggLIQMgASAANgIIIAMgADYCDCAAIAE2AgwgACADNgIIDwtBHyEDIABCADcCECABQf///wdNBEAgAUEIdiICIAJBgP4/akEQdkEIcSICdCIDIANBgOAfakEQdkEEcSIDdCIEIARBgIAPakEQdkECcSIEdEEPdiACIANyIARyayICQQF0IAEgAkEVanZBAXFyQRxqIQMLIAAgAzYCHCADQQJ0QfQYaiECAkACQEHIFigCACIEQQEgA3QiB3FFBEBByBYgBCAHcjYCACACIAA2AgAgACACNgIYDAELIAFBAEEZIANBAXZrIANBH0YbdCEDIAIoAgAhAgNAIAIiBCgCBEF4cSABRg0CIANBHXYhAiADQQF0IQMgBCACQQRxaiIHQRBqKAIAIgINAAsgByAANgIQIAAgBDYCGAsgACAANgIMIAAgADYCCA8LIAQoAggiASAANgIMIAQgADYCCCAAQQA2AhggACAENgIMIAAgATYCCAsLfwECfyAARQRAIAEQFg8LIAFBQE8EQEHAFkEwNgIAQQAPCyAAQQhrQRAgAUELakF4cSABQQtJGxA0IgIEQCACQQhqDwsgARAWIgJFBEBBAA8LIAIgAEF8QXggAEEEaygCACIDQQNxGyADQXhxaiIDIAEgASADSxsQMyAAEBUgAguIAQEDf0G0FkG0FigCAEEBaiIFNgIAIAAgBTYCAAJAIAMEQANAIAIgBEEDdGoiBigCAEUNAiAEQQFqIgQgA0cNAAsLIAAgASACIANBBHRBCHIQJSADQQF0IgAQJiEBIAAQASABDwsgBiAFNgIAIAIgBEEDdGoiACABNgIEIABBADYCCCADEAEgAgv0DQIQfw59IAAoAgAhBSMAQdAAayICIAAqAggiETgCACACIAAqAgwiFzgCBCACIAAqAhAiGDgCCAJAIBFDAAAAAFsgF0MAAAAAW3EgGEMAAAAAW3EiDEUEQCAFKAIAIQMMAQsgAiAFKAIAIgMiAUEUaigCADYCOCACIANBDGopAgA3AzAgAiABKAIUNgJIIAIgAykCDDcDQCACIAM2AgwgAiADNgIYIAIgAzYCECACIAM2AhwgAiADNgIUIAIgAzYCIAJAIAMgBUYEQCACKgI4IRogAioCSCEUIAIqAjAhFSACKgJAIRYgAioCNCEZIAIqAkQhEwwBCyACKgJIIRQgAioCOCEaIAIqAkQhEyACKgI0IRkgAioCQCEWIAIqAjAiGyEVIAMiBiIEIgciCCIJIgohAQNAIAEqAhQiEiAUIBIgFF4iDRshFCASIBogEiAaXSIOGyEaIAEqAhAiEiATIBIgE14iDxshEyASIBkgEiAZXSIQGyEZIAEqAgwiEiAWIBIgFl4iCxshFiABIAkgCxshCSASIBUgEiAVXSILGyEVIBIgGyALGyEbIAEgCiALGyEKIAEgBiANGyEGIAEgBCAOGyEEIAEgByAPGyEHIAEgCCAQGyEIIAEoAgAiASAFRw0ACyACIAo2AgwgAiAbOAIwIAIgFjgCQCACIAk2AhggAiAZOAI0IAIgCDYCECACIBM4AkQgAiAHNgIcIAIgGjgCOCACIAQ2AhQgAiAUOAJIIAIgBjYCIAtBAiATIBmTIBYgFZNeIgEgFCAakyABQQJ0IgEgAkFAa3IqAgAgAkEwaiABcioCAJNeG0ECdCIBIAJBMGpqKgIAIAJBQGsgAWoqAgBgQQFzRQRAIAJBgICA/AM2AgggAkIANwIAQwAAAAAhEUMAAIA/IRhDAAAAACEXDAELIAIgAkEMaiABaigCACIEKgIMIAJBGGogAWooAgAiASoCDCIckyITOAIkIAIgBCoCECABKgIQIh2TIhU4AiggAiAEKgIUIAEqAhQiHpMiEjgCLCADIAVHBEBDAAAAACEbIAMhAQNAIBMgASoCECAdkyIUlCAVIAEqAgwgHJMiFpSTIhogGpQgFSABKgIUIB6TIhmUIBIgFJSTIhQgFJQgEiAWlCATIBmUkyIWIBaUkpIiGSAbXkEBc0UEQCAaIRggFiEXIBkhGyAUIRELIAEoAgAiASAFRw0ACyACIBg4AgggAiAXOAIEIAIgETgCACAbQwAAAABfQQFzDQELIAJBADYCCCACQgA3AgAgAkECIBWMIBUgFUMAAAAAXRsgE4wgEyATQwAAAABdG14iASASjCASIBJDAAAAAF0bIAJBJGogAUECdGoqAgAiEYwgESARQwAAAABdG14bQQJ0akGAgID8AzYCACACKgIIIRggAioCACERIAIqAgQhFwsgAEEUaiIBQQIgF4wgFyAXQwAAAABdGyARjCARIBFDAAAAAF0bXiIEIBiMIBggGEMAAAAAXRsgAiAEQQJ0aioCACIRjCARIBFDAAAAAF0bXhsiBEECdCIGakEANgIAIAEgBEEBakEDcEECdCIHakGAgID8AzYCACABIARBAmpBA3BBAnQiBGpBADYCACAAQSBqIgEgBmpBADYCACABIAdqQwAAAIBDAAAAACACIAZqKgIAQwAAAABeIgYbOAIAIAEgBGpDAACAP0MAAIC/IAYbOAIAIAMgBUYiBkUEQCADIQEDQCABIAEqAgwiESAAKgIUlCABKgIQIhcgACoCGJSSIAEqAhQiGCAAKgIclJI4AhggASARIAAqAiCUIBcgACoCJJSSIBggACoCKJSSOAIcIAEoAgAiASAFRw0ACwsCQCAMRQ0AIAUoAiwiBCAFQSxqIghGDQBDAAAAACERA0AgBCgCCCIHIQEgBygCHEEBTgRAA0AgESABKAIQIgkqAhggASgCBCgCECIKKgIYkyAJKgIcIAoqAhySlJIhESABKAIMIgEgB0cNAAsLIAQoAgAiBCAIRw0ACyARQwAAAABdQQFzDQAgBkUEQCADIQEDQCABIAEqAhyMOAIcIAEoAgAiASAFRw0ACwsgACAAKgIgjDgCICAAIAAqAiSMOAIkIAAgACoCKIw4AigLAkAgBg0AIAAgAyoCGCIROAIsIAAgETgCNCAAIAMqAhwiETgCMCAAIBE4AjggAygCACIBIAVGDQADQCABKgIYIhEgACoCLF1BAXNFBEAgACAROAIsIAEqAhghEQsgESAAKgI0XkEBc0UEQCAAIBE4AjQLIAEqAhwiESAAKgIwXUEBc0UEQCAAIBE4AjAgASoCHCERCyARIAAqAjheQQFzRQRAIAAgETgCOAsgASgCACIBIAVHDQALCwumCAIHfwR9IAEoAgQoAggoAgAhBAJAA0ACQCAEKAIUBEADQCAEIgEoAgQoAggoAgAiBCgCFA0ACwsCQAJAAkACQAJAIAEoAhQEQCABIQIMAQsgASgCBCgCBCgCACICRQ0BIAEhBCACKAIURQ0BCyACQQA2AhQCQCACKAIAIgYoAgQoAhAiASAEKAIAIgUoAgQoAhBGBEAgAiEBDAELAkACQAJAAkAgASoCGCIJIAIoAgQoAggoAgAiCCgCACIDKAIEKAIQIgcqAhgiClsEQCABKgIcIgsgByoCHCIMWw0CIAkgCl0NASALIAxfQQFzRQ0BDAMLIAkgCl1BAXMNAgsgASAHIAYoAhAQDEMAAAAAXQRAIAIhAQwECyACQQE2AhQgAigCBCgCBCgCAEEBNgIUIAAoAgAgBhARIgFFDQggACgCACADKAIEIAEQDQ0CDAgLQYgTQZwPQZIEQacTEAAACyAHIAEgAygCEBAMQwAAAABeBEAgAiEBDAILIAhBATYCFCACQQE2AhQgACgCACADEBEiAUUNBSAAKAIAIAYoAgwgAygCBBANRQ0GIAEoAgQhAQsgASgCFCACKAIMOgAVIAQoAhgEQCAEKAIAIgEoAhwNCCABQQA2AhggACgCQCEDIAQoAgQiASgCBCIHIAEoAgg2AgggASgCCCAHNgIEIAEgAygCECIDKAIANgIAIAMgATYCACAEIAAoAkwiASgCADYCACABIAQ2AgAgACgCACAFEA5FDQYgAigCBCgCCCgCACIEKAIAIQUgAiEBDAELIAIoAhhFBEAgAiEBDAELIAIoAgAiASgCHA0HIAFBADYCGCAAKAJAIQMgAigCBCIBKAIEIgcgASgCCDYCCCABKAIIIAc2AgQgASADKAIQIgMoAgA2AgAgAyABNgIAIAIgACgCTCIBKAIANgIAIAEgAjYCACAAKAIAIAYQDkUNBSAEKAIEKAIEKAIAIgEoAgAhBgsgBigCECAFKAIQRg0CIAYoAgQoAhAiAiAFKAIEKAIQIgNGDQEgASgCGA0BIAQoAhgNASACIAAoAkgiB0dBACADIAdHGw0BIAAgARApRQ0CCw8LIAAgARAeGgsgBigCECAFKAIQRw0CIAYoAgQiAygCECAFKAIEIgIoAhBHDQIgBSAFKAIcIAYoAhxqNgIcIAIgAigCHCADKAIcajYCHCABKAIAIQIgASgCGARAIAIoAhwNBAsgAkEANgIYIAAoAkAhBSABKAIEIgIoAgQiAyACKAIINgIIIAIoAgggAzYCBCACIAUoAhAiBSgCADYCACAFIAI2AgAgASAAKAJMIgIoAgA2AgAgAiABNgIAIAAoAgAgBhAORQ0BIAQoAgQoAgQoAgAhAQwCCwsLIABBkAFqQQEQAwALQfMPQZwPQZIBQYoQEAAAC5IRAgt/Bn0jAEEwayIHJAAgASgCACIJKAIQIQMgASgCBCgCCCgCACILKAIAIggoAhAhBAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgCCgCBCgCECIFKgIYIAkoAgQoAhAiBioCGFsEQCAFKgIcIAYqAhxbDQELIAYgACgCSCADEAxDAAAAAF9FDQEgBSAAKAJIIAQQDEMAAAAAYEUNAiADIAAoAkgiAkYNAyACIARGDQMgASgCGA0EIAsoAhgNBAJAIAMgBEYNACADKgIcIg8gBioCHCIOIA4gD2AbIAQqAhwiDiAFKgIcIg0gDSAOXxteDQACQAJAIAMqAhgiDSAEKgIYIhBdRQRAIA4gD2BBAXMNASANIBBcDQELIAUgAyAEEAxDAAAAAF5FDQEMAgsgBiAEIAMQDEMAAAAAXQ0BCyAGIAMgBSAEIAcQUyAHKgIcIhEgAyoCHCIPIAYqAhwiDiAOIA9gG2BFDQYgESAEKgIcIg8gBSoCHCIOIA4gD18bX0UNByAHKgIYIg4gBSoCGCIPIAYqAhgiDSANIA9gG2BFDQggDiAEKgIYIg0gAyoCGCIQIA0gEGAbX0UNCQJAAkAgDiAAKAJIIgoqAhgiD11BAXNFBEAgCioCHCESDAELIA4gD1wNASARIAoqAhwiEl9BAXMNAQsgByASOAIcIAcgDzgCGCAEKgIYIQ0gAyoCGCEQIBIhESAPIQ4LIAMhAgJAAkACfSAQIg8gDSAPXg0AGiANIBBbBEAgECADKgIcIAQqAhxfDQEaCyAEIQIgDQsiDyAOXUEBc0UEQCACKgIcIQ0MAQsgDiAPXA0BIAIqAhwiDSARX0EBcw0BCyAHIA04AhwgByAPOAIYIAMqAhghECANIREgDyEOCwJAAkAgDiAQWwRAIBEgAyoCHFsNAQsgDiAEKgIYXA0BIBEgBCoCHFwNAQsgACABEB4aDAELAkACQAJAIAoqAhgiDiAGKgIYWwRAIAYqAhwgCioCHFsNAQsgBiAKIAcQDEMAAAAAYA0BIAAoAkgiCioCGCEOCyAOIAUqAhhbBEAgBSoCHCAKKgIcWw0CCyAFIAogBxAMQwAAAABfQQFzDQELIAAoAkgiAiAFRgRAIAAoAgAgCSgCBBARRQ0QIAAoAgAgCCgCBCAJEA1FDRAgASgCACgCECECA0AgASgCBCgCBCgCACIBKAIAIgMoAhAgAkYNAAsgASgCGARAIAAoAgAgASgCBCgCCCgCACgCACgCBCADKAIMEBIiAkUNESABKAIYRQ0OIAAoAgAgASgCABAORQ0RIAEgAjYCACABQQA2AhggAiABNgIYIAEoAgQoAgQoAgAiAUUNEQsgASgCBCgCCCgCACIDKAIAIQIgACADIAsQFxpBASEMIAAgASACKAIEKAIMIAIgAkEBEBQMAgsgAiAGRgRAIAAoAgAgCCgCBBARRQ0QIAAoAgAgCSgCDCAIKAIEKAIMEA1FDRAgASgCACgCBCgCECEDIAEhAgNAIAIoAgQoAgQoAgAiAigCACgCBCgCECADRg0ACyACKAIEKAIIKAIAKAIAKAIEKAIIIQMgASAIKAIEKAIMNgIAQQEhDCAAIAIgACABQQAQFygCCCAJKAIEKAIIIANBARAUDAILAkAgBiACIAcQDEMAAAAAYEUEQCAAKAJIIQIMAQsgAUEBNgIUIAEoAgQoAgQoAgBBATYCFCAAKAIAIAkoAgQQEUUNECAJKAIQIgMgACgCSCICKgIYOAIYIAMgAioCHDgCHAsgBSACIAcQDEMAAAAAX0EBcw0BIAtBATYCFCABQQE2AhQgACgCACAIKAIEEBFFDQ8gCCgCECIBIAAoAkgiACoCGDgCGCABIAAqAhw4AhwMAQsgACgCACAJKAIEEBFFDQ4gACgCACAIKAIEEBFFDQ4gACgCACAIKAIEKAIMIAkQDUUNDiAJKAIQIgIgByoCGDgCGCACIAcqAhw4AhwgAEHoAGoiCiAAKAJEIAIQKyEIIAkoAhAiAiAINgIgIAhB/////wBGDQ0gAkF/NgIoIAJCADcCDCACQQA2AhQgAiADKgIMIAYqAhggAioCGCIPkyIOjCAOIA5DAAAAAF0bIAYqAhwgAioCHCIOkyINjCANIA1DAAAAAF0bkiIQQwAAAD+UIAMqAhggD5MiDYwgDSANQwAAAABdGyADKgIcIA6TIg2MIA0gDUMAAAAAXRuSIhEgEJIiEJUiDZQgBioCDCARQwAAAD+UIBCVIhCUkkMAAAAAkiIROAIMIAIgAyoCECANlCAGKgIQIBCUkkMAAAAAkiISOAIQIAIgDSADKgIUlCAQIAYqAhSUkkMAAAAAkiIQOAIUIAIgESAEKgIMIAUqAhggD5MiDYwgDSANQwAAAABdGyAFKgIcIA6TIg2MIA0gDUMAAAAAXRuSIg1DAAAAP5QgBCoCGCAPkyIPjCAPIA9DAAAAAF0bIAQqAhwgDpMiD4wgDyAPQwAAAABdG5IiDiANkiINlSIPlCAFKgIMIA5DAAAAP5QgDZUiDpSSkjgCDCACIBIgBCoCECAPlCAFKgIQIA6UkpI4AhAgAiAQIA8gBCoCFJQgDiAFKgIUlJKSOAIUIAtBATYCFCABQQE2AhQgASgCBCgCBCgCAEEBNgIUCyAHQTBqJAAgDA8LQZcQQZwPQcEEQbAQEAAAC0HCEEGcD0HCBEGwEBAAAAtB7RBBnA9BwwRBsBAQAAALQZgRQZwPQcQEQbAQEAAAC0HFEUGcD0HFBEGwEBAAAAtB9BFBnA9B2ARBsBAQAAALQZkSQZwPQdkEQbAQEAAAC0G+EkGcD0HaBEGwEBAAAAtB4xJBnA9B2wRBsBAQAAALAAtBvg9BnA9BnwFB0A8QAAALAAsgCiAAKAJEECAgAEEANgJECyAAQZABakEBEAMAC5ABAQN/IAAoAkwQDyIEBEACQCAAKAIAECEiBUUNACAFKAIQIgYgAzgCHCAGIAI4AhggBSgCBCgCECIGIAM4AhwgBiABOAIYIAAgBjYCSCAEQQA2AhggBEIANwIIIAQgBTYCACAEQgE3AhAgBCAAKAJAIgUgBSAEEB0iBDYCBCAERQ0ADwsLIABBkAFqQQEQAwALuAEBA38gASgCFARAIAAgASgCACACEE8PCyABIAEoAgwiBEEBaiIFNgIMAkACfwJAIAUgASgCECIDSA0AQf////8AIAAoAgQiBUUNARogASADQQF0NgIQIAEgACgCDCABKAIEIgAgA0EDdCAFEQIAIgM2AgQgAw0AIAEgADYCBEH/////AA8LIARB/////wBGDQEgASgCBCAEQQJ0aiACNgIAIARBf3MLDwtBoQ5BiA1BwANBtA4QAAALmAcBBX8CQCAAKAIsIgEgAEEsaiIERgRAIAQhAgwBCyAEIQMDQAJAAkACQAJAAkACQCADIAEiAigCBEYEQCACKAIIIgUhAQNAIAEoAgQiAyABRg0CIAMoAgQgAUcNAyABKAIMIgMoAggoAgQgAUcNBCABKAIIKAIEKAIMIAFHDQUgASgCFCACRw0GIAMiASAFRw0ACwwGC0GuCUG/CUGeBkHKCRAAAAtB3AlBvwlBoQZBygkQAAALQegJQb8JQaIGQcoJEAAAC0H5CUG/CUGjBkHKCRAAAAtBkwpBvwlBpAZBygkQAAALQa0KQb8JQaUGQcoJEAAACyACIQMgAigCACIBIARHDQALCwJAAkACQCAAKAIwIAJHDQAgACgCNA0AIAAgACgCACIBRgRAIAAhAgwDCyAAIQMMAQtBuwpBvwlBqQZBygkQAAALA0ACQAJAAkACQAJAAkAgAyABIgIoAgRGBEAgAigCCCIFKAIEIQMgBSEBA0AgASADRg0CIAMoAgQgAUcNAyABKAIMKAIIKAIEIAFHDQQgASgCCCIEKAIEIgMoAgwgAUcNBSABKAIQIAJHDQYgBCIBIAVHDQALDAYLQeEKQb8JQa0GQcoJEAAAC0HcCUG/CUGwBkHKCRAAAAtB6AlBvwlBsQZBygkQAAALQfkJQb8JQbIGQcoJEAAAC0GTCkG/CUGzBkHKCRAAAAtB8gpBvwlBtAZBygkQAAALIAIhAyACKAIAIgEgAEcNAAsLAkACQAJAAkACQAJAAkACQAJAIAAoAgQgAkcNACAAKAIIDQAgAEHEAGoiAyECA0AgAigCACIBIANGDQIgASgCBCIEKAIAIAIoAgRHDQMgASAERg0EIAQoAgQgAUcNBSABKAIQRQ0GIAQoAhBFDQcgASgCDCgCCCgCBCABRw0IIAEiAiABKAIIKAIEKAIMRg0AC0GTCkG/CUHCBkHKCRAAAAtB/gpBvwlBuAZBygkQAAALIAAoAkgiASAAQeQAakcNBiABKAIAIAIoAgRHDQYgASgCBCADRw0GIAAoAlQNBiABKAIQDQYgACgCWA0GIAEoAhQNBg8LQaQLQb8JQbwGQcoJEAAAC0HcCUG/CUG9BkHKCRAAAAtB6AlBvwlBvgZBygkQAAALQb8LQb8JQb8GQcoJEAAAC0HOC0G/CUHABkHKCRAAAAtB+QlBvwlBwQZBygkQAAALQd0LQb8JQcgGQcoJEAAACykAIAEoAoQBEBggASgCiAEQGCABKAKMARAYIAAoAgwgASAAKAIIEQEACzwBAn0gAioCGCAAKgIcIgQgASoCHCIDk5QgACoCGCADIAIqAhwiA5OUIAEqAhggAyAEk5SSkkMAAAAAYAsQACMAIABrQXBxIgAkACAACwYAIAAkAAsEACMACzUCAX8CfUEBIQIgACoCGCIDIAEqAhgiBF0Ef0EBBSADIARcBEBBAA8LIAAqAhwgASoCHF8LC/4DAQJ/IAJBgARPBEAgACABIAIQChoPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIAQcAASQ0AIAIgAEFAaiIESw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBE0NAAsLIAAgAk0NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIABJDQALDAELIANBBEkEQCAAIQIMAQsgACADQQRrIgRLBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsLqwcBCX8gACgCBCIHQQNxIQIgACAHQXhxIgZqIQQCQEHUFigCACIFIABLDQAgAkEBRg0ACwJAIAJFBEBBACECIAFBgAJJDQEgAUEEaiAGTQRAIAAhAiAGIAFrQaQaKAIAQQF0TQ0CC0EADwsCQCABIAZNBEAgBiABayICQRBJDQEgACAHQQFxIAFyQQJyNgIEIAAgAWoiASACQQNyNgIEIAQgBCgCBEEBcjYCBCABIAIQJAwBC0EAIQIgBEHcFigCAEYEQEHQFigCACAGaiIFIAFNDQIgACAHQQFxIAFyQQJyNgIEIAAgAWoiAiAFIAFrIgFBAXI2AgRB0BYgATYCAEHcFiACNgIADAELIARB2BYoAgBGBEBBzBYoAgAgBmoiBSABSQ0CAkAgBSABayICQRBPBEAgACAHQQFxIAFyQQJyNgIEIAAgAWoiASACQQFyNgIEIAAgBWoiBSACNgIAIAUgBSgCBEF+cTYCBAwBCyAAIAdBAXEgBXJBAnI2AgQgACAFaiIBIAEoAgRBAXI2AgRBACECQQAhAQtB2BYgATYCAEHMFiACNgIADAELIAQoAgQiA0ECcQ0BIANBeHEgBmoiCSABSQ0BIAkgAWshCgJAIANB/wFNBEAgBCgCCCIGIANBA3YiBUEDdEHsFmpHGiAGIAQoAgwiCEYEQEHEFkHEFigCAEF+IAV3cTYCAAwCCyAGIAg2AgwgCCAGNgIIDAELIAQoAhghCAJAIAQgBCgCDCIDRwRAIAQoAggiAiAFTwRAIAIoAgwaCyACIAM2AgwgAyACNgIIDAELAkAgBEEUaiICKAIAIgYNACAEQRBqIgIoAgAiBg0AQQAhAwwBCwNAIAIhBSAGIgNBFGoiAigCACIGDQAgA0EQaiECIAMoAhAiBg0ACyAFQQA2AgALIAhFDQACQCAEIAQoAhwiBUECdEH0GGoiAigCAEYEQCACIAM2AgAgAw0BQcgWQcgWKAIAQX4gBXdxNgIADAILIAhBEEEUIAgoAhAgBEYbaiADNgIAIANFDQELIAMgCDYCGCAEKAIQIgIEQCADIAI2AhAgAiADNgIYCyAEKAIUIgJFDQAgAyACNgIUIAIgAzYCGAsgCkEPTQRAIAAgB0EBcSAJckECcjYCBCAAIAlqIgEgASgCBEEBcjYCBAwBCyAAIAdBAXEgAXJBAnI2AgQgACABaiICIApBA3I2AgQgACAJaiIBIAEoAgRBAXI2AgQgAiAKECQLIAAhAgsgAgscAEG4FigCAEUEQEG8FiABNgIAQbgWIAA2AgALCzABAn8gACECA0AgAigCBCICKAIAIgMEQCAAKAIMIAEgAyAAKAIUEQIARQ0BCwsgAgsHACAAKAJgCwcAIAAoAmQLBwAgACgCWAsHACAAKAJUCwcAIAAoAlwLzQ0BCH9BKBAWIghBADYCAEEEIQoCQAJAAkACQCAAKAJUIgYEQCAAKAJ0IQcgACgCcCEJQbgWQQA2AgAgCSAHIAYQBEG4FigCACEGQbgWQQA2AgBBfyEHAkAgBkUNAEG8FigCACIJRQ0AIAYoAgAgCEEEEBAiB0UEQAwECyAJEAELEAIhBiAHQQFGDQEgAEEANgJUCyAAKAJgIgYEQCAAKAJ0IQcgACgCcCEJQbgWQQA2AgAgCSAHIAYQBEG4FigCACEGQbgWQQA2AgBBfyEHAkAgBkUNAEG8FigCACIJRQ0AIAYoAgAgCEEEEBAiB0UEQAwECyAJEAELEAIhBiAHQQFGDQEgAEEANgJgCyAAKAJYIgYEQCAAKAJ0IQcgACgCcCEJQbgWQQA2AgAgCSAHIAYQBEG4FigCACEGQbgWQQA2AgBBfyEHAkAgBkUNAEG8FigCACIJRQ0AIAYoAgAgCEEEEBAiB0UEQAwECyAJEAELEAIhBiAHQQFGBEAMAgsgAEEANgJYC0EAIQYgAEEANgJQIAUEQCAAIAUqAgA4AgggACAFKgIEOAIMIAAgBSoCCDgCEAsgACABNgI8IARBAiAEQQJKGyIBQQMgAUEDSBshDCAAQZABaiINQQEgCEEEECYhCBACIQoLA0ACQAJAAkAgBg0AIAAoAgBFDQBBuBZBADYCACAAECdBuBYoAgAhAUG4FkEANgIAQX8hBSABRQ0CQbwWKAIAIgRFDQIgASgCACAIIAoQECIFDQEMBQsgCBAVQQAPCyAEEAELEAIhBiAFQQFGDQBBuBZBADYCAEEEIAAQCSEHQbgWKAIAIQFBuBZBADYCAEF/IQUCQCABRQ0AQbwWKAIAIgRFDQAgASgCACAIIAoQECIFRQRADAQLIAQQAQsQAiEGIAVBAUYNAAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAHRQRAQbgWQQA2AgBBBSANQQEQBEG4FigCACEBQbgWQQA2AgAgAUUNAkG8FigCACIERQ0CIAEoAgAgCCAKEBANAQwPCyAAKAIAIQQgAkECRw0CIAQoAkQiBiAEQcQAaiIJRg0JA0AgBigCACEBAkAgBigCFC0AFSIFIAYoAgQoAhQtABVHBEAgBkEBQX8gBRs2AhwMAQtBuBZBADYCAEEGIAQgBhAGIQtBuBYoAgAhBUG4FkEANgIAQX8hBwJAIAVFDQBBvBYoAgAiBkUNACAFKAIAIAggChAQIgdFBEAgBSAGEAMACyAGEAELEAIhBiAHQQFGDQ4gC0UNBgsgASIGIAlHDQALDAMLIAQQAQsQAiEGDAoLIAQoAiwiBiAEQSxqIglGDQQDQCAGKAIAIQEgBi0AFQRAQbgWQQA2AgBBByAEIAYQBiELQbgWKAIAIQVBuBZBADYCAEF/IQcCQCAFRQ0AQbwWKAIAIgZFDQAgBSgCACAIIAoQECIHRQRAIAUgBhADAAsgBhABCxACIQYgB0EBRg0LIAtFDQMLIAEiBiAJRw0ACwtBuBZBADYCAEEIIAQQBUG4FigCACEBQbgWQQA2AgBBfyEFIAFFDQJBvBYoAgAiBkUNAiABKAIAIAggChAQIgUNAQwLC0G4FkEANgIAQQUgDUEBEARBuBYoAgAhAUG4FkEANgIAAkAgAUUNAEG8FigCACIERQ0AIAEoAgAgCCAKEBBFBEAMCwsgBBABCxACIQYMBwsgBhABCxACIQYgBUEBRg0FIAJBAkcNAQwDC0G4FkEANgIAQQggBBAFQbgWKAIAIQFBuBZBADYCAEF/IQUCQCABRQ0AQbwWKAIAIgZFDQAgASgCACAIIAoQECIFRQRADAkLIAYQAQsQAiEGIAVBAUYNBAtBuBZBADYCAEEJIAAgBCACIAMgDBAIDAILQbgWQQA2AgBBCCAEEAVBuBYoAgAhAUG4FkEANgIAQX8hBQJAIAFFDQBBvBYoAgAiBkUNACABKAIAIAggChAQIgVFBEAMBwsgBhABCxACIQYgBUEBRg0CC0G4FkEANgIAQQogACAEIAwQBwtBuBYoAgAhAUG4FkEANgIAQX8hBQJAIAFFDQBBvBYoAgAiBkUNACABKAIAIAggChAQIgVFBEAMBQsgBhABCxACIQYgBUEBRg0AQbgWQQA2AgBBCyAAQegAaiAEEARBuBYoAgAhAUG4FkEANgIAQX8hBQJAIAFFDQBBvBYoAgAiBEUNACABKAIAIAggChAQIgVFBEAMBAsgBBABCxACIQYgBUEBRg0ACyAAQQA2AgAgACgCBCEAIAgQFSAARQ8LIAYgCRADAAsgASAEEAMACyABIAYQAwALlgMCA38BfQJAAkAgACgCAA0AIAAgAEHoAGoQUSIGNgIAIAYNAAwBCwJAAkACQCAEQQFIDQBBACEGIAFBA04EQEEAIQEDQCAAKAIAIQUCQCABBEAgBSABEBFFDQcgASgCDCEBDAELIAUQISIBRQ0FIAAoAgAgASABKAIEEA1FDQYLIAEoAhAiBSACKgIAOAIMIAUgAioCBDgCECAFIAIqAgg4AhQgACAAKAJQIgdBAWo2AlAgBSAHNgIoIAFBATYCHCABKAIEQX82AhwgAiADaiECIAZBAWoiBiAERw0ACwwBC0EAIQEDQCAAKAIAIQUCQCABRQRAIAUQISIBRQ0FIAAoAgAgASABKAIEEA0NAQwGCyAFIAEQEUUNBSABKAIMIQELIAEoAhAiBSACKgIAOAIMIAIqAgQhCCAFQQA2AhQgBSAIOAIQIAAgACgCUCIHQQFqNgJQIAUgBzYCKCABQQE2AhwgASgCBEF/NgIcIAIgA2ohAiAGQQFqIgYgBEcNAAsLDwsACyAAQQE2AgQPCyAAQQE2AgQLqAQBB38gAEEANgJkIABBADYCXCABKAIsIgUgAUEsaiIIRwRAQQAhAQNAIAUtABUEQCAFKAIIIgQhBgNAIAFBAWohASAGKAIMIgYgBEcNAAsgACABNgJcIAAgA0EBaiIDNgJkCyAFKAIAIgUgCEcNAAsLIAAgACgCdCADQQN0IAAoAmgRAAAiATYCYAJAIAFFBEAMAQsgACAAKAJ0IAIgACgCXGxBAnQgACgCaBEAACIBNgJUIAFFBEAMAQsgACAAKAJ0IAAoAlxBAnQgACgCaBEAACIGNgJYIAZFBEAMAQsCQCAIKAIAIgMgCEYNACAAKAJgIQQgACgCVCEBIAJBA04EQANAIAMtABUEQEEAIQAgAygCCCIJIQUDQCABIAUoAhAiAioCDDgCACABIAIqAhA4AgQgASACKgIUOAIIIAYgAigCKDYCACAAQQFqIQAgBkEEaiEGIAFBDGohASAFKAIMIgUgCUcNAAsgBCAANgIEIAQgBzYCACAAIAdqIQcgBEEIaiEECyADKAIAIgMgCEcNAAwCCwALA0AgAy0AFQRAQQAhACADKAIIIgkhAgNAIAEgAigCECIFKgIMOAIAIAEgBSoCEDgCBCAGIAUoAig2AgAgAEEBaiEAIAZBBGohBiABQQhqIQEgAigCDCICIAlHDQALIAQgADYCBCAEIAc2AgAgACAHaiEHIARBCGohBAsgAygCACIDIAhHDQALCw8LIABBATYCBAufBwEIfwJAAkAgA0EESA0AIAEgAxBQDQAMAQsgASABKAIAIgVHBEADQCAFQX82AiQgBSgCACIFIAFHDQALCwJAAkAgASgCLCIKIAFBLGoiC0YEQAwBCwNAIApBfzYCECAKLQAVBEBBACEGIAooAggiDCEFA0AgBiEIIAUoAhAiBigCJEF/RgRAIAYgBzYCJCAHQQFqIQcLIAhBAWohBiAFKAIMIgUgDEcNAAsgAyAITA0DIAogCTYCECAJQQFqIQkLIAooAgAiCiALRw0ACwsgACAJNgJkIAAgACgCdCADIAkgAkEBRnRsQQJ0IAAoAmgRAAAiBjYCYCAGRQRADAILIAAgBzYCXCAAIAAoAnQgBCAHbEECdCAAKAJoEQAAIgY2AlQgBkUEQAwCCyAAIAAoAnQgACgCXEECdCAAKAJoEQAAIgc2AlgCQAJAIAcEQCABKAIAIgUgAUYNAiAEQQNIDQEDQCAFKAIkIghBf0cEQCAAKAJUIAQgCGxBAnRqIgYgBSoCDDgCACAGIAUqAhA4AgQgBiAFKgIUOAIIIAcgCEECdGogBSgCKDYCAAsgBSgCACIFIAFHDQALDAILDAMLA0AgBSgCJCIIQX9HBEAgACgCVCAEIAhsQQJ0aiIGIAUqAgw4AgAgBiAFKgIQOAIEIAcgCEECdGogBSgCKDYCAAsgBSgCACIFIAFHDQALCwJAIAsoAgAiASALRg0AIAAoAmAhBSACQQFGBEADQAJAIAEtABVFDQBBACEHIAEoAggiAiEGA0AgBSAGKAIQKAIkNgIAIAciAEEBaiEHIAVBBGohBSAGKAIMIgYgAkcNAAsgAyAHSgRAIAUgAyAHa0ECdBAcIANBAnRqIABBf3NBAnRqIQULIAIhBgNAQX8hBAJAIAYoAgQoAhQiCEUNACAILQAVRQ0AIAgoAhAhBAsgBSAENgIAIAVBBGohBSAGKAIMIgYgAkcNAAsgAyAHTA0AIAUgAyAHa0ECdBAcIANBAnRqIABBf3NBAnRqIQULIAEoAgAiASALRw0ADAILAAsDQAJAIAEtABVFDQBBACEEIAEoAggiAiEGA0AgBSAGKAIQKAIkNgIAIAQiAEEBaiEEIAVBBGohBSAGKAIMIgYgAkcNAAsgAyAETA0AIAUgAyAEa0ECdBAcIANBAnRqIABBf3NBAnRqIQULIAEoAgAiASALRw0ACwsPC0HhFUGhFUHyBEH3FRAAAAsgAEEBNgIEC9gBAQJ/IwBBMGsiASQAIAEgACkCiAE3AyggASAAKQKAATcDICABIAApAng3AxggASAAKQJwNwMQIAEgACkCaDcDCCAAKAJMEBggACgCACICBEAgAUEIaiACEC0gAEEANgIACyAAKAJUIgIEQCABKAIUIAIgASgCEBEBACAAQQA2AlQLIAAoAlgiAgRAIAEoAhQgAiABKAIQEQEAIABBADYCWAsgACgCYCICBEAgASgCFCACIAEoAhARAQAgAEEANgJgCyABKAIUIAAgASgCEBEBACABQTBqJAAL/wICA38BfiAAQYgWIAAbIgIoAgAiAEUEQCACQYgWKAIAIgA2AgALIAIoAgRFBEAgAkGMFigCADYCBAsgAigCCEUEQCACQZAWKAIANgIICyACKAIMQawCIAARAAAiAUUEQEEADwsgASACKQIANwJoIAEgAikCIDcCiAEgASACKQIYNwKAASABIAIpAhAiBDcCeCABIAIpAgg3AnAgBKdFBEAgAUGABDYCeAsgASgCfEUEQCABQYAENgJ8CyABKAKAAUUEQCABQYACNgKAAQsgASgChAFFBEAgAUGABDYChAELIAEoAogBIgBFBEAgAUGAAjYCiAFBgAIhAAsgAUHoAGohAyABQgA3AiwgAUEANgIQIAFCADcCCCABQgA3AjQgAUEANgI8QRAhAgJAIABBEE4EQEGAICECIABBgSBIDQELIAEgAjYCiAEgAiEACyADQdkVQRwgABAZIQAgAUIANwJQIAFCADcCACABIAA2AkwgAUIANwJYIAFCADcCYCABCwYAIAEQFQsIACABIAIQJQsGACABEBYLvAUCBX8CfQJAAkAgASgCCCIBKAIMIgIgAUYNACACKAIMIAFGDQADQAJAIAEoAgQoAhAiAyoCGCIHIAEoAhAiAioCGCIIXUUEQCAHIAhcDQEgAyoCHCACKgIcX0UNAQsgASgCCCgCBCEBDAELCwNAAkAgByAIXkUEQCAHIAhcDQEgAioCHCADKgIcX0EBcw0BCyABKAIMIgEoAhAiAioCGCEIIAEoAgQoAhAiAyoCGCEHDAELCwJAIAEoAggoAgQiAiABKAIMRg0AA0ACQAJAIAcgAigCECIEKgIYIghdRQRAIAcgCFwNASADKgIcIAQqAhxfQQFzDQELAkAgAigCDCIDIAFGDQAgAkEMaiEEA0ACQCADKAIEKAIQIgUqAhgiByADKAIQIgYqAhgiCF0NACAHIAhbBEAgBSoCHCAGKgIcXw0BCyACKAIQIAIoAgQoAhAgBRAMQwAAAABfQQFzDQIgBCgCACEDCyAAIAMgAhASIgJFBEBBAA8LIAIoAgQiAkEMaiEEIAIoAgwiAyABRw0ACwsgAigCCCgCBCECDAELAkAgAigCDCABRg0AA0ACQCABKAIIKAIEIgMoAhAiBCoCGCIHIAMoAgQoAhAiBSoCGCIIXQ0AIAcgCFsEQCAEKgIcIAUqAhxfDQELIAEoAgQoAhAgASgCECAEEAxDAAAAAGBBAXMNAiABKAIIKAIEIQMLIAAgASADEBIiAUUEQEEADwsgASgCBCIBIAIoAgxHDQALCyABKAIMIQELIAEoAgwgAkYNASABKAIEKAIQIgMqAhghBwwACwALIAIoAgwiAyABRg0BIAEgAygCDEcEQANAIAAgAyACEBIiAkUEQEEADwsgAigCBCICKAIMIgMoAgwgAUcNAAsLQQEPC0H3FEGhFUHAAkGsFRAAAAtByRVBoRVB5AJBrBUQAAALfQECfyAAKAIMQRggACgCABEAACICRQRAQQAPCyACQQI2AhQgAiABNgIMIAJBADYCACACIAI2AgggAiACNgIEQRAhAwJAIAAoAhwiAUEQTgRAQYAgIQMgAUGBIEgNAQsgACADNgIcIAMhAQsgAiAAQYAIQQwgARAZNgIQIAILwwECA38BfQJAAkAgAioCGCIGIAEoAgAiAygCECIEKgIYWwRAIAQqAhwgAioCHFsNAQsCQCAGIAMoAgQiBCgCECIFKgIYWwRAIAUqAhwgAioCHFsNAQsgACgCACAEEBFFDQIgASgCGARAIAAoAgAgAygCCBAORQ0DIAFBADYCGAsgACgCACACKAIIIAMQDUUNAiAAIAIQGg8LQYoPQZwPQZ8HQagPEAAAC0GKD0GcD0GKB0GoDxAAAAsgAEGQAWpBARADAAvWAQICfwJ9IAIoAgAiAigCBCgCECEDIAEoAgAiASgCBCgCECIEIAAoAkgiAEYEQCAAIANGBEACQCABKAIQIgEqAhgiBSACKAIQIgIqAhgiBl1FBEAgBSAGXA0BIAEqAhwgAioCHF9BAXMNAQsgACABIAIQDEMAAAAAXw8LIAAgAiABEAxDAAAAAGAPCyADIAAgAigCEBAMQwAAAABfDwsgASgCECEBIAAgA0YEQCAEIAAgARAMQwAAAABgDwsgBCAAIAEQIyACKAIEKAIQIAAgAigCEBAjYAvcCAIGfwR9AkAgACgCACIDKAJEIgIgA0HEAGoiBUcEQANAIAIoAgwhASACKAIAIQMCQAJAIAIoAhAiBCoCGCACKAIEKAIQIgYqAhhcDQAgBCoCHCAGKgIcXA0AIAEoAgwgAkYNAAJAIAAoAgAgASACEA0EQCAAKAIAIAIQDkUNASABKAIMIQQMAwsMBQsMBAsgASEEIAIhAQsCQCABIAQoAgxHBEAgAyECDAELIAEgBEcEQAJAIAMgBEcEQCAEIAMoAgRHDQELIAMoAgAhAwsgACgCACAEEA5FDQQLAn8CQCABIANGDQAgASADKAIERg0AIAMMAQsgAygCAAshAiAAKAIAIAEQDkUNAwsgAiAFRw0ACyAAKAIAIQMLQQAhAiADIAMoAgAiAUcEQANAIAJBAWohAiABKAIAIgEgA0cNAAsLIAAgAEHoAGoiBSAAKAKMASIBQQggAUEIShsgAmoQTSIBNgJEAkACQAJAAkACQCABBH8CQAJAIAAoAgAiBCgCACICIARHBEADQCACIAUgASACECsiAzYCICADQf////8ARg0CIAIoAgAiAiAERw0ACwsgBSABEEwNAQsgBSAAKAJEECAgAEEANgJEQQAPCyAAIAUgABBGIgE2AkAgAUUNBiAAIAAqAiwiByAAKgI0IgggB5MiB5MiCSAIIAeSIgcgACoCMCIIIAAqAjgiCiAIkyIIkxAqIAAgCSAHIAogCJIQKiAAKAJEEB8iAgRAA0ACQCAAKAJEEEsiAUUNACABKgIYIAIqAhhcDQAgASoCHCACKgIcXA0AIAAoAkQQHyEBIAAoAgAgAigCCCABKAIIEA0NAQwJCyAAIAIQGiAAKAJEEB8iAg0ACwsgACAAKAJAIgMoAgQoAgAiAigCACgCEDYCSEEAIQEDQAJAIAIoAhAEQCABIQQMAQsgAigCGEUNA0EBIQQgAQ0ECyACKAIIDQQgAigCACEBIAIoAhgEQCABKAIcDQYLIAFBADYCGCACKAIEIgEoAgQiBiABKAIINgIIIAEoAgggBjYCBCABIAMoAhAiAygCADYCACADIAE2AgAgAiAAKAJMIgEoAgA2AgAgASACNgIAIAQhASAAKAJAIgMoAgQoAgAiAg0ACyADKAIQEBggBSgCDCADIAUoAggRAQAgBSAAKAJEECAgACgCACIEKAIsIgEgBEEsaiIDRwR/A0AgASgCCCIEKAIMIgIgBEYNByABKAIAIQECQCACKAIMIARHDQAgBCgCCCICIAIoAhwgBCgCHGo2AhwgAigCBCICIAIoAhwgBCgCBCgCHGo2AhwgACgCACAEEA4NAEEADwsgASADRw0ACyAAKAIABSAECxAsQQEFQQALDwtBvg9BnA9B+QhBnBQQAAALQakUQZwPQfoIQZwUEAAAC0G7FEGcD0H8CEGcFBAAAAtB8w9BnA9BkgFBihAQAAALQdMUQZwPQecJQeEUEAAACyAAQZABakEBEAMAC5YBAQN/IAFBAE4EQCAAKAIAIAEQTg8LAkAgAUF/cyIBIAAoAhBODQAgACgCBCABQQJ0aiIBKAIARQ0AIAFBADYCAAJAIAAoAgwiAUEBSA0AIAAoAgghAwNAIAMgAUEBayICQQJ0aigCACgCAA0BIAAgAjYCDCABQQFKIQQgAiEBIAQNAAsLDwtBvQ5BiA1B/ANB5g4QAAALkwECAX8CfSAAKAIMIgFFBEAgACgCACIAKAIEIAAoAgAoAgRBA3RqKAIADwsgACgCCCABQQJ0akEEaygCACgCACEBAkACQCAAKAIAIgAoAghFDQAgACgCBCAAKAIAKAIEQQN0aigCACIAKgIYIgIgASoCGCIDXQ0BIAIgA1wNACAAKgIcIAEqAhxfDQELIAEhAAsgAAvYBwIOfwJ9IwBBkANrIgskACABIAAoAgwgASgCDEECdEEEaiAAKAIAEQAAIgM2AggCQAJAIANFBEAMAQsgAyADIAEoAgwiD0ECdGpBBGsiBk0EQCABKAIEIQAgAyECA0AgAiAANgIAIABBBGohACACQQRqIgIgBk0NAAsLIAsgBjYCBCALIAM2AgBBw+HDwQchDEEBIQQDQCALIARBA3RqQQRrKAIAIgkgCyAIQQN0aigCACIFQShqSwRAA0AgBSAMQY2+ht4FbEEBaiIMIAkgBWtBAnVBAWpwQQJ0aiIAKAIAIQ0gACAFKAIANgIAIAUgDTYCACAJQQRqIQIgBUEEayEAA0AgAiEDIABBBGohAgJ/An8gACAAKAIEIgooAgAiByoCGCIQIA0oAgAiDioCGCIRXQ0AGgNAIAIhBAJAIBAgEVwNACAHKgIcIA4qAhxfRQ0AIAAhBiAEDAMLIARBBGohAiAEIgAoAgQiCigCACIHKgIYIhAgEV1BAXMNAAsgAAshBiACCyEAAkAgESADQQRrIgIoAgAiBCgCACIHKgIYIhBdDQADQAJAIBAgEVwNACAOKgIcIAcqAhxfRQ0ADAILIBEgAiIDQQRrIgIoAgAiBCgCACIHKgIYIhBdQQFzDQALCyAAIAQ2AgAgAiAKNgIAIAAgAkkNAAsgACgCACEEIAAgCjYCACACIAQ2AgACQCAAIAVrIAkgAmtIBEAgAyEAIAkhAiAGIQkMAQsgBSEAIAYhAiADIQULIAsgCEEDdGoiAyACNgIEIAMgADYCACAIQQFqIQggCSAFQShqSw0ACwsgCCEEIAkgBUEEaiIKTwRAA0AgCigCACEDAkAgCiICIgAgBU0NAANAIAMoAgAiBioCGCIQIAJBBGsiACgCACIHKAIAIggqAhgiEV0EQCACIQAMAgsCQCAQIBFcDQAgBioCHCAIKgIcX0UNACACIQAMAgsgAiAHNgIAIAUgACICSQ0ACwsgACADNgIAIApBBGoiCiAJTQ0ACwsgBEEBayEIIARBAU4NAAtBASECIAFBATYCFCABIA82AhAgASgCACIDKAIIIgBBAU4EQANAIAMgABAbIABBAUohBiAAQQFrIQAgBg0ACwsgA0EBNgIUIAEoAggiACAAIAEoAgxBAnRqQQRrIgNPDQAgACgCACgCACIHKgIYIRADQCAAKAIEKAIAIgEqAhgiESAQXUUEQCAQIBFcDQMgASoCHCAHKgIcX0UNAwsgESEQIAEhByAAQQRqIgAgA0kNAAsLIAtBkANqJAAgAg8LQYYOQYgNQZ0DQZoOEAAAC/ICAQR/IAAoAgxBHCAAKAIAEQAAIgNFBEBBAA8LAkACQAJAIAAoAgxBHCAAKAIAEQAAIgJFDQAgAiABNgIMIAJBADYCCCACIAAoAgwgAUEBaiIEQQJ0IAAoAgARAAAiBTYCACAFRQRAIAAoAgwgAiAAKAIIEQEADAELIAIgACgCDCAEQQN0IAAoAgARAAAiBDYCBCAEDQEgACgCDCACKAIAIAAoAggRAQAgACgCDCACIAAoAggRAQALIANBADYCAAwBCyACQQE2AhggAkIANwIQIAIoAgBBATYCBCAEQQA2AgggAyACNgIAIAMgACgCDCABQQJ0IAAoAgARAAAiAjYCBCACRQRAIAAoAgwgAygCACIBKAIEIAAoAggRAQAgACgCDCABKAIAIAAoAggRAQAgACgCDCABIAAoAggRAQAMAQsgA0EBNgIYIANBADYCFCADIAE2AhAgA0EANgIMIAMPCyAAKAIMIAMgACgCCBEBAEEAC6sDAgt/An0CQCABQQFIDQAgACgCDCABSA0AIAAoAgQiBCABQQN0aiIHKAIARQ0AIAAoAgAiBSAHKAIEIgNBAnRqIAUgACgCCCICQQJ0aigCACIINgIAIAQgCEEDdGoiDCADNgIEIAAgAkEBazYCCAJAIAIgA0wNAAJAAkAgA0ECSA0AIAQgBSADQQF2IglBAnRqKAIAIgZBA3RqKAIAIgIqAhgiDSAEIAhBA3RqKAIAIgoqAhgiDl0NACANIA5cDQEgAioCHCAKKgIcX0EBcw0BCyAAIAMQGwwBCwJAIA4gBCAGQQN0aigCACILKgIYIg1eBEAgAyECDAELA0AgCSECAkAgDSAOXA0AIAsqAhwgCioCHF9FDQAgAyECDAILIAUgA0ECdGogBjYCACAEIAZBA3RqIAM2AgQgAkEBdSIJRQ0BIAIhAyAEIAUgCUECdGooAgAiBkEDdGooAgAiCyoCGCINIA5dQQFzDQALCyAFIAJBAnRqIAg2AgAgDCACNgIECyAHQQA2AgAgByAAKAIQNgIEIAAgATYCEA8LQaUNQYgNQZICQdwNEAAAC8UDAgd/An0gASABKAIIQQFqIgM2AggCQAJAIAEoAgwiBCADQQF0Tg0AQf////8AIQUgACgCBCIGRQ0BIAEgBEEBdDYCDCABKAIEIQcgASAAKAIMIAEoAgAiCCAEQQN0QQRyIAYRAgAiBDYCACAERQRAIAEgCDYCAEH/////AA8LIAEgACgCDCABKAIEIAEoAgxBA3RBCGogACgCBBECACIANgIEIAANACABIAc2AgQMAQsgASgCBCEEIAMhBSABKAIQIgAEQCABIAQgAEEDdGooAgQ2AhAgACEFCyABKAIAIgYgA0ECdGogBTYCACAEIAVBA3RqIgcgAjYCACAHIAM2AgQgASgCFARAAkAgA0EBdSIARQRAIAMhAQwBCyACKgIYIQoDQCAKIAQgBiAAIgFBAnRqKAIAIgBBA3RqIggoAgAiCSoCGCILXgRAIAMhAQwCCwJAIAogC1wNACAJKgIcIAIqAhxfRQ0AIAMhAQwCCyAGIANBAnRqIAA2AgAgCCADNgIEIAEhAyABQQF1IgANAAsLIAYgAUECdGogBTYCACAHIAE2AgQLIAVB/////wBHDQBB9QxBiA1B8AFBmA0QAAALIAULogIBC38gACgCLCIEIABBLGoiCkcEQANAIAQtABUEQCAEQQhqKAIAIggoAhAhCwNAIAgiAigCDCEIAkAgAigCBCIDRQ0AIAMoAhQiB0UNACAHLQAVRQ0AQQAhBSAEKAIIIgkhBgNAIAUiDEEBaiEFIAYoAgwiBiAJRw0AC0EAIQUgBygCCCIHIQYDQCAFIglBAWohBSAGKAIMIgYgB0cNAAsgASAJIAxqTgRAIAIoAggoAgQoAhAgAigCECADKAIMKAIMKAIQEC5FDQEgAygCCCgCBCgCECADKAIQIAIoAgwoAgwoAhAQLkUNASADKAIMIQggACADEA4NAkEADwsgAkUNAQsgAigCDCgCECALRw0ACwsgBCgCACIEIApHDQALC0EBC90CAQR/IAAoAgxBkAEgACgCABEAACIBRQRAQQAPC0EQIQICQCAAKAIQIgNBEE4EQEGAICECIANBgSBIDQELIAAgAjYCECACIQMLQRAhAgJAIAAoAhQiBEEQTgRAQYAgIQIgBEGBIEgNAQsgACACNgIUC0EQIQICQCAAKAIYIgRBEE4EQEGAICECIARBgSBIDQELIAAgAjYCGAsgASAAQYoJQcAAIAMQGTYChAEgASAAQZUJQSwgACgCFBAZNgKIASABIABBowlBGCAAKAIYEBk2AowBIAEgAUEsaiIANgIwIAFBADYCCCABQgA3AkwgASABQeQAaiICNgJIIAEgAUHEAGoiAzYCRCABQQA7AUAgAUIANwI0IAEgADYCLCABQgA3AlQgAUIANwJcIAFCADcCbCABIAM2AmggASACNgJkIAFCADcCdCABQgA3AnwgASABNgIEIAEgATYCACABC7wCAQV/AkAgACgChAEQDyICRQ0AIAIgASgCBCIEIAEgASAESxsiBigCBCIDKAIAIgQ2AiAgBCgCBCACNgIAIAIgBjYCACADIAJBIGoiBDYCACACQgA3AhAgAiAENgIMIAIgBDYCBCACQgA3AhggAkIANwIwIAIgBDYCKCACQgA3AjggAiACNgIIIAIgAjYCLCACIAI2AiQgASgCDCIGKAIIIQMgAiAGNgIsIAMoAgQgAjYCDCACIAM2AgggBiACNgIIIAIgASgCBCgCEDYCECAAKAKIARAPIgNFDQAgAyACKAIQIgUoAgQiADYCBCAAIAM2AgAgAyAFNgIAIAUgAzYCBCADIAQ2AgggBCEAA0AgACADNgIQIAAoAggiACAERw0ACyACIAEoAhQiADYCFCACIAA2AjQgAiEFCyAFC6YRAgN/B30CQAJAIAAqAhgiCSABKgIYIghdDQAgCCAJWwRAIAAqAhwgASoCHF8NAQsgACEGDAELIAEhBiAAIQELAkACQCACKgIYIgkgAyoCGCIIXQ0AIAggCVsEQCACKgIcIAMqAhxfDQELIAIhAAwBCyAJIQggAyEAIAIhAwsCQAJAIAEqAhgiCSAIXQ0AIAggCVsEQCABKgIcIAMqAhxfDQELIAYhAiABIQUMAQsgCCEJIAAhAiADIQUgBiEAIAEhAwsCQAJAAkACQAJAAkACQAJAIAQCfQJAIAkgACoCGCIKXSIBDQAgCSAKWwRAIAUqAhwgACoCHF8NAQsgCSAKkkMAAAA/lAwBCwJAIAogAioCGCILXSIHRQRAIAogC1wiBg0BIAAqAhwgAioCHF9BAXMNAQsgAyoCGCIIIAldRQRAIAggCVwNBiADKgIcIAUqAhxfQQFzDQYLIAFFBEAgCSAKXA0GIAUqAhwgACoCHF9FDQYLIAogCZMiDSAJIAiTIgiSIg5DAAAAAF5BAXNFBEAgBSoCHCADIAAgCCANXSIGGyoCHCIMkyAIIA0gBhsgDpUgDCAAIAMgBhsqAhyTlJIhDAsgAUUEQCAJIApcDQYgBSoCHCAAKgIcX0EBcw0GCyAHRQRAIAogC1wNBiAAKgIcIAIqAhxfRQ0GC0MAAAAAIQggDIwgDAJ/IA0gCyAKkyILkiIOQwAAAABeQQFzRQRAIAAqAhwgBSACIAsgDV4iARsqAhwiCJMgDSALIAEbIA6VIAggAiAFIAEbKgIck5SSIQgLIAwgCJJDAAAAAF0iAQsbQwAAAACXIgsgCIwgCCABG0MAAAAAlyIIX0EBc0UEQCAJIAqSQwAAAD+UIAhDAAAAAFsNAhogCSANIAsgCyAIkpWUkgwCCyAKIAkgCpMgCCALIAiSlZSSDAELIAMqAhgiDSAJXUUEQCAJIA1cDQcgAyoCHCAFKgIcX0EBcw0HCyABRQRAIAkgClwNByAFKgIcIAAqAhxfRQ0HC0MAAAAAIQggCiAJkyIMIAkgDZMiDpJDAAAAAF5BAXNFBEAgDiAFKgIcIgggACoCHJOUIAwgCCADKgIck5SSIQgLIAsgDV5FBEAgCyANXA0HIAMqAhwgAioCHF9BAXMNBwsgCiALXkUEQCAGDQcgAioCHCAAKgIcX0UNBwtDAAAAACEMIAiMIAgCfyAKIAuTIgogCyANkyINkkMAAAAAXkEBc0UEQCANIAIqAhwiDCAAKgIck5QgCiAMIAMqAhyTlJIhDAsgCCAMk0MAAAAAXSIBCxtDAAAAAJciCiAMIAyMIAEbQwAAAACXIghfQQFzRQRAIAkgC5JDAAAAP5QgCEMAAAAAWw0BGiAJIAsgCZMgCiAKIAiSlZSSDAELIAsgCSALkyAIIAogCJKVlJILOAIYIAMqAhwiCSAAKgIcIghdDQEgCCAJWwRAIAMqAhggACoCGF8NAgsgAyEGDAILAAsgACEGIAMhAAsCQAJAIAUqAhwiCCACKgIcIgldDQAgCCAJWwRAIAUqAhggAioCGF8NAQsgBSEDDAELIAghCSACIQMgBSECCwJAAkAgACoCHCIIIAldDQAgCCAJWwRAIAAqAhggAioCGF8NAQsgBiEFIAAhAQwBCyADIQUgAiEBIAYhAyAAIQILAkAgASoCHCIJIAMqAhwiCl0iAA0AIAkgClsEQCABKgIYIAMqAhhfDQELDAILAkACQAJAIAogBSoCHCILXSIHRQRAIAogC1wiBg0BIAMqAhggBSoCGF9BAXMNAQsgAioCHCIIIAldRQRAIAggCVwNByACKgIYIAEqAhhfQQFzDQcLIABFBEAgCSAKXA0HIAEqAhggAyoCGF9FDQcLQwAAAAAhDCAKIAmTIg0gCSAIkyIIkiIOQwAAAABeQQFzRQRAIAEqAhggAiADIAggDV0iBhsqAhgiDJMgCCANIAYbIA6VIAwgAyACIAYbKgIYk5SSIQwLIABFBEAgCSAKXA0HIAEqAhggAyoCGF9BAXMNBwsgB0UEQCAKIAtcDQcgAyoCGCAFKgIYX0UNBwtDAAAAACEIIAyMIAwCfyANIAsgCpMiC5IiDkMAAAAAXkEBc0UEQCADKgIYIAEgBSALIA1eIgAbKgIYIgiTIA0gCyAAGyAOlSAIIAUgASAAGyoCGJOUkiEICyAMIAiSQwAAAABdIgALG0MAAAAAlyILIAiMIAggABtDAAAAAJciCF9BAXNFBEAgCEMAAAAAWwRADAYLIAQgCSANIAsgCyAIkpWUkjgCHA8LIAQgCiAJIAqTIAggCyAIkpWUkjgCHA8LIAIqAhwiDSAJXUUEQCAJIA1cDQcgAioCGCABKgIYX0EBcw0HCyAARQRAIAkgClwNByABKgIYIAMqAhhfRQ0HC0MAAAAAIQggCiAJkyIMIAkgDZMiDpJDAAAAAF5BAXNFBEAgDiABKgIYIgggAyoCGJOUIAwgCCACKgIYk5SSIQgLIAsgDV5FBEAgCyANXA0CIAIqAhggBSoCGF9BAXMNAgsgCiALXkUEQCAGDQIgBSoCGCADKgIYX0UNAgtDAAAAACEMIAiMIAgCfyAKIAuTIgogCyANkyINkkMAAAAAXkEBc0UEQCANIAUqAhgiDCADKgIYk5QgCiAMIAIqAhiTlJIhDAsgCCAMk0MAAAAAXSIACxtDAAAAAJciCiAMIAyMIAAbQwAAAACXIghfQQFzRQRAIAhDAAAAAFsEQCAEIAkgC5JDAAAAP5Q4AhwPCyAEIAkgCyAJkyAKIAogCJKVlJI4AhwPCyAEIAsgCSALkyAIIAogCJKVlJI4AhwPCwALDAQLQYUIQagIQTpBswgQAAALIAQgCSAKkkMAAAA/lDgCHA8LQYUIQagIQdIAQb8IEAAAC0HLCEGoCEHxAEHwCBAAAAtBywhBqAhBiQFB/QgQAAALC6UOAwBBgAgLhQ5EaWN0AFZlcnRMZXEoIHUsIHYgKSAmJiBWZXJ0TGVxKCB2LCB3ICkAc3JjL2dlb20uYwB0ZXNlZGdlRXZhbAB0ZXNlZGdlU2lnbgBUcmFuc0xlcSggdSwgdiApICYmIFRyYW5zTGVxKCB2LCB3ICkAdGVzdHJhbnNFdmFsAHRlc3RyYW5zU2lnbgBNZXNoIEVkZ2VzAE1lc2ggVmVydGljZXMATWVzaCBGYWNlcwBmLT5wcmV2ID09IGZQcmV2AHNyYy9tZXNoLmMAdGVzc01lc2hDaGVja01lc2gAZS0+U3ltICE9IGUAZS0+U3ltLT5TeW0gPT0gZQBlLT5MbmV4dC0+T25leHQtPlN5bSA9PSBlAGUtPk9uZXh0LT5TeW0tPkxuZXh0ID09IGUAZS0+TGZhY2UgPT0gZgBmLT5wcmV2ID09IGZQcmV2ICYmIGYtPmFuRWRnZSA9PSBOVUxMAHYtPnByZXYgPT0gdlByZXYAZS0+T3JnID09IHYAdi0+cHJldiA9PSB2UHJldiAmJiB2LT5hbkVkZ2UgPT0gTlVMTABlLT5TeW0tPm5leHQgPT0gZVByZXYtPlN5bQBlLT5PcmcgIT0gTlVMTABlLT5Ec3QgIT0gTlVMTABlLT5TeW0tPm5leHQgPT0gZVByZXYtPlN5bSAmJiBlLT5TeW0gPT0gJm1lc2gtPmVIZWFkU3ltICYmIGUtPlN5bS0+U3ltID09IGUgJiYgZS0+T3JnID09IE5VTEwgJiYgZS0+RHN0ID09IE5VTEwgJiYgZS0+TGZhY2UgPT0gTlVMTCAmJiBlLT5SZmFjZSA9PSBOVUxMAGZyZWUgIT0gSU5WX0hBTkRMRQBzcmMvcHJpb3JpdHlxLmMAcHFIZWFwSW5zZXJ0AGhDdXJyID49IDEgJiYgaEN1cnIgPD0gcHEtPm1heCAmJiBoW2hDdXJyXS5rZXkgIT0gTlVMTABwcUhlYXBEZWxldGUAcHEgIT0gTlVMTABwcURlbGV0ZVByaW9yaXR5UQBMRVEoICoqKGkrMSksICoqaSApAHBxSW5pdABjdXJyICE9IElOVl9IQU5ETEUAcHFJbnNlcnQAY3VyciA8IHBxLT5tYXggJiYgcHEtPmtleXNbY3Vycl0gIT0gTlVMTABwcURlbGV0ZQBjaGlsZCA8PSBwcS0+bWF4AEZsb2F0RG93bgBUT0xFUkFOQ0VfTk9OWkVSTwBzcmMvc3dlZXAuYwBDb25uZWN0TGVmdERlZ2VuZXJhdGUAcmVnLT5maXhVcHBlckVkZ2UARml4VXBwZXJFZGdlAEZBTFNFAElzV2luZGluZ0luc2lkZQByZWctPmVVcC0+d2luZGluZyA9PSAwAERlbGV0ZVJlZ2lvbgAhIFZlcnRFcSggZHN0TG8sIGRzdFVwICkAQ2hlY2tGb3JJbnRlcnNlY3QARWRnZVNpZ24oIGRzdFVwLCB0ZXNzLT5ldmVudCwgb3JnVXAgKSA8PSAwAEVkZ2VTaWduKCBkc3RMbywgdGVzcy0+ZXZlbnQsIG9yZ0xvICkgPj0gMABvcmdVcCAhPSB0ZXNzLT5ldmVudCAmJiBvcmdMbyAhPSB0ZXNzLT5ldmVudAAhIHJlZ1VwLT5maXhVcHBlckVkZ2UgJiYgISByZWdMby0+Zml4VXBwZXJFZGdlAE1JTiggb3JnVXAtPnQsIGRzdFVwLT50ICkgPD0gaXNlY3QudABpc2VjdC50IDw9IE1BWCggb3JnTG8tPnQsIGRzdExvLT50ICkATUlOKCBkc3RMby0+cywgZHN0VXAtPnMgKSA8PSBpc2VjdC5zAGlzZWN0LnMgPD0gTUFYKCBvcmdMby0+cywgb3JnVXAtPnMgKQAhIFZlcnRFcSggZVVwLT5Ec3QsIGVMby0+RHN0ICkAQ2hlY2tGb3JMZWZ0U3BsaWNlAFZlcnRMZXEoIGUtPk9yZywgZS0+RHN0ICkAQWRkUmlnaHRFZGdlcwByZWdQcmV2LT53aW5kaW5nTnVtYmVyIC0gZS0+d2luZGluZyA9PSByZWctPndpbmRpbmdOdW1iZXIARG9uZUVkZ2VEaWN0ACsrZml4ZWRFZGdlcyA9PSAxAHJlZy0+d2luZGluZ051bWJlciA9PSAwAGUtPkxuZXh0ICE9IGUAUmVtb3ZlRGVnZW5lcmF0ZUZhY2VzAHVwLT5MbmV4dCAhPSB1cCAmJiB1cC0+TG5leHQtPkxuZXh0ICE9IHVwAHNyYy90ZXNzLmMAdGVzc01lc2hUZXNzZWxsYXRlTW9ub1JlZ2lvbgBsby0+TG5leHQgIT0gdXAAUmVnaW9ucwBmYWNlVmVydHMgPD0gcG9seVNpemUAT3V0cHV0UG9seW1lc2gAQYgWCwkMAAAADQAAAA4AQbAWCwNADVA=";if(!V(j)){var G=j;j=e.locateFile?e.locateFile(G,y):y+G}function Q(){try{if(v)return new Uint8Array(v);var t=j;if(V(t))try{var e=H(t.slice(37)),n=new Uint8Array(e.length);for(t=0;t<e.length;++t)n[t]=e.charCodeAt(t);var i=n}catch(t){throw Error("Converting base64 string to bytes failed.")}else i=void 0;if(i)return i;throw"both async and sync fetching of the wasm failed"}catch(t){U(t)}}function z(t){for(;0<t.length;){var n=t.shift();if("function"==typeof n)n(e);else{var i=n.J;"number"==typeof i?void 0===n.H?B.get(i)():B.get(i)(n.H):i(void 0===n.H?null:n.H)}}}var H="function"==typeof atob?atob:function(t){var e="",n=0;t=t.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++)),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(n++));i=i<<2|r>>4,r=(15&r)<<4|o>>2;var s=(3&o)<<6|a;e+=String.fromCharCode(i),64!==o&&(e+=String.fromCharCode(r)),64!==a&&(e+=String.fromCharCode(s))}while(n<t.length);return e};M.push({J:function(){Y()}});var X={a:function(t,e,n,i){U("Assertion failed: "+T(t)+", at: "+[e?T(e):"unknown filename",n,i?T(i):"unknown function"])},d:function(t,e){throw Z(t,e||1),"longjmp"},k:function(t,e,n){S.copyWithin(t,e,e+n)},l:function(t){t>>>=0;var e=S.length;if(2147483648<t)return!1;for(var n=1;4>=n;n*=2){var i=e*(1+.2/n);i=Math.min(i,t+100663296),0<(i=Math.max(16777216,t,i))%65536&&(i+=65536-i%65536);t:{try{x.grow(Math.min(2147483648,i)-E.byteLength+65535>>>16),P();var r=1;break t}catch(t){}r=void 0}if(r)return!0}return!1},c:function(){return 0|b},j:function(t,e){var n=K();try{return B.get(t)(e)}catch(t){if(W(n),t!==t+0&&"longjmp"!==t)throw t;Z(1,0)}},g:function(t,e,n){var i=K();try{return B.get(t)(e,n)}catch(t){if(W(i),t!==t+0&&"longjmp"!==t)throw t;Z(1,0)}},f:function(t,e){var n=K();try{B.get(t)(e)}catch(t){if(W(n),t!==t+0&&"longjmp"!==t)throw t;Z(1,0)}},e:function(t,e,n){var i=K();try{B.get(t)(e,n)}catch(t){if(W(i),t!==t+0&&"longjmp"!==t)throw t;Z(1,0)}},h:function(t,e,n,i){var r=K();try{B.get(t)(e,n,i)}catch(t){if(W(r),t!==t+0&&"longjmp"!==t)throw t;Z(1,0)}},i:function(t,e,n,i,r,o){var a=K();try{B.get(t)(e,n,i,r,o)}catch(t){if(W(a),t!==t+0&&"longjmp"!==t)throw t;Z(1,0)}},b:function(t){b=0|t}};!function(){function t(t){e.asm=t.exports,x=e.asm.m,P(),B=e.asm.n,F--,e.monitorRunDependencies&&e.monitorRunDependencies(F),0==F&&k&&(t=k,k=null,t())}function n(e){t(e.instance)}function r(t){return(v||"function"!=typeof fetch?Promise.resolve().then(Q):fetch(j,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+j+"'";return t.arrayBuffer()})).catch((function(){return Q()}))).then((function(t){return WebAssembly.instantiate(t,o)})).then(t,(function(t){A("failed to asynchronously prepare wasm: "+t),U(t)}))}var o={a:X};if(F++,e.monitorRunDependencies&&e.monitorRunDependencies(F),e.instantiateWasm)try{return e.instantiateWasm(o,t)}catch(t){return A("Module.instantiateWasm callback failed with error: "+t),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||V(j)||"function"!=typeof fetch?r(n):fetch(j,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,o).then(n,(function(t){return A("wasm streaming compile failed: "+t),A("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(i)}();var Y=e.___wasm_call_ctors=function(){return(Y=e.___wasm_call_ctors=e.asm.o).apply(null,arguments)};e._malloc=function(){return(e._malloc=e.asm.p).apply(null,arguments)},e._free=function(){return(e._free=e.asm.q).apply(null,arguments)},e._tessNewTess=function(){return(e._tessNewTess=e.asm.r).apply(null,arguments)},e._tessDeleteTess=function(){return(e._tessDeleteTess=e.asm.s).apply(null,arguments)},e._tessAddContour=function(){return(e._tessAddContour=e.asm.t).apply(null,arguments)},e._tessTesselate=function(){return(e._tessTesselate=e.asm.u).apply(null,arguments)},e._tessGetVertexCount=function(){return(e._tessGetVertexCount=e.asm.v).apply(null,arguments)},e._tessGetVertices=function(){return(e._tessGetVertices=e.asm.w).apply(null,arguments)},e._tessGetVertexIndices=function(){return(e._tessGetVertexIndices=e.asm.x).apply(null,arguments)},e._tessGetElementCount=function(){return(e._tessGetElementCount=e.asm.y).apply(null,arguments)},e._tessGetElements=function(){return(e._tessGetElements=e.asm.z).apply(null,arguments)};var q,K=e.stackSave=function(){return(K=e.stackSave=e.asm.A).apply(null,arguments)},W=e.stackRestore=function(){return(W=e.stackRestore=e.asm.B).apply(null,arguments)},J=e.stackAlloc=function(){return(J=e.stackAlloc=e.asm.C).apply(null,arguments)},Z=e._setThrew=function(){return(Z=e._setThrew=e.asm.D).apply(null,arguments)};function $(){function t(){if(!q&&(q=!0,e.calledRun=!0,!C)){if(z(M),z(L),n(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();R.unshift(t)}z(R)}}if(!(0<F)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)N();z(O),0<F||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.cwrap=function(t,e,n,i){var r=(n=n||[]).every((function(t){return"number"===t}));return"string"!==e&&r&&!i?I(t):function(){return function(t,e,n,i){var r,o={string:function(t){var e=0;if(null!=t&&0!==t){var n=1+(t.length<<2),i=e=J(n),r=S;if(0<n){n=i+n-1;for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o)),127>=a){if(i>=n)break;r[i++]=a}else{if(2047>=a){if(i+1>=n)break;r[i++]=192|a>>6}else{if(65535>=a){if(i+2>=n)break;r[i++]=224|a>>12}else{if(i+3>=n)break;r[i++]=240|a>>18,r[i++]=128|a>>12&63}r[i++]=128|a>>6&63}r[i++]=128|63&a}}r[i]=0}}return e},array:function(t){var e=J(t.length);return w.set(t,e),e}},a=I(t),s=[];if(t=0,i)for(var l=0;l<i.length;l++){var u=o[n[l]];u?(0===t&&(t=K()),s[l]=u(i[l])):s[l]=i[l]}return n=a.apply(null,s),r=n,n="string"===e?T(r):"boolean"===e?!!r:r,0!==t&&W(t),n}(t,e,n,arguments)}},k=function t(){q||$(),q||(k=t)},e.run=$,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return $(),t.ready}),Ts=function(){function t(){this.name="tessWasm",this.status="pending",this.module=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t)},enumerable:!1,configurable:!0}),t.prototype.tesselate=function(t){try{var e=this._process=new this.module;return e.addContours(t.contours),e.tesselate(t)}catch(t){throw this.status="error",t}},t.prototype.dispose=function(){this._process&&(this._process.dispose(),this._process=null)},t.prototype.init=function(){var t=this;return this.module?Promise.resolve():self.WebAssembly?Ds().then((function(e){var n=e.Tess;t.module=n,t.status="done"}),(function(e){t.status="error",console.warn("[Tess Wasm] Error while spawn TessWasm",e)})):(console.warn("[Tess Wasm] Wasm not supported"),Promise.reject("[Tess Wasm] Wasm not supported"))},t}(),Ps=function(){function t(){}return t.tesselate=function(t){if("pending"===Ts.instance.status)return console.debug("[GraphicsFactoryFills] WASM Tess not loaded, JS will used."),Es(t);try{return Ts.instance.tesselate(t)}catch(e){return console.warn("[GraphicsFactoryFills] Tess2Wasm crash, downgrade to JS",e.message,t),Es(t)}},t.dispose=function(){Ts.instance.dispose()},t}(),Bs=window.SHAPE_INFO={total_time:0,tess_time:0,multy_contours:0,single_contours:0},Os=1e3,Ms=((Ss={})[Wa.data_type]=function(t,e){var n=us.getMaterialForGradient(t),i=n.material;return e.material=n.material,e.material.animateUVs=!0,e.style.addSamplerAt(e.sampler,i.getTextureAt(0)),e.style.uvMatrix=t.getUVMatrix(),t.type==Xa.LINEAR?i.getTextureAt(0).mappingMode=Sr.LINEAR:t.type==Xa.RADIAL&&(e.sampler.imageRect=t.uvRectangle,i.imageRect=!0,i.getTextureAt(0).mappingMode=Sr.RADIAL),e},Ss[Za.data_type]=function(t,e){var n=us.getMaterialForColor(t.color,t.alpha),i=n.material;return e.material=i,n.colorPos?(i.animateUVs=!0,e.style.addSamplerAt(e.sampler,i.getTextureAt(0)),e.style.uvMatrix=new M(0,0,0,0,n.colorPos.x,n.colorPos.y),t.uvMatrix=e.style.uvMatrix):e.style=e.sampler=null,e},Ss[Ja.data_type]=function(t,e){var n=t.material;return e.material=n,e.sampler.repeat=t.repeat,e.sampler.smooth=t.smooth,e.sampler.mipmap=t.smooth,n.style.sampler=e.sampler,n.animateUVs=!0,e.style.addSamplerAt(e.sampler,n.getTextureAt(0)),e.style.uvMatrix=t.getUVMatrix(),e},Ss),Ls=function(){function t(){}return Object.defineProperty(t,"Tess2Wasm",{get:function(){return Ts.instance.module},enumerable:!1,configurable:!0}),t.prepareWasm=function(){"done"!==Ts.instance.status&&Ts.instance.init()},t.toFixed=function(t){return(t*Os|0)/Os},t.nearest=function(t,e,n,i){var r=t-n;r<0&&(r=-r);var o=e-i;return o<0&&(o=-o),r+o<this.EPS},t.draw_pathes=function(t){for(var e=t.queued_fill_pathes,n=e.length,i=0;i<n;i++){var r=e[i],o=r.style,a=t.popEmptyFillShape(),s=a?a.elements:null,l=s?s.concatenatedBuffer:null,u=this.pathToAttributesBuffer(r,!1,l);if(u&&u.length){s?(s.invalidate(),s._numVertices=u.count):(s=new io).setPositions(new zi(u)),s.isDynamic=t._clearCount>0;var c={sampler:new Qe,style:new Gr,material:null};o.fillStyle.data_type in Ms||console.error("Unknown style:",o.fillStyle.data_type),Ms[o.fillStyle.data_type](o.fillStyle,c),(a=a||is.getShape(s)).style=c.style,a.material=c.material,a.originalFillStyle=o.fillStyle,a.isSimpleRect=r.isSimpleRect,t.addShapeInternal(a)}}},t.prepareContours=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=1),t.prepare(n);for(var i=t._positions,r=[],o=0;o<i.length;o++){var a=i[o];if(this.nearest(a[0],a[1],a[a.length-2],a[a.length-1])&&(a.pop(),a.pop()),a.length>=6)if(e){for(var s=new Array(a.length),l=0,u=a.length;l<u;l++)s[l]=this.toFixed(a[l]*this.TESS_SCALE);r.push(s)}else r.push(a)}return r},t.runTesselator=function(t,e){void 0===e&&(e=1);var n=this.prepareContours(t,this.USE_TESS_FIX,e);return n.length>0?Bs.multy_contours+=1:Bs.single_contours+=1,0===n.length?null:Ps.tesselate({contours:n,windingRule:0,elementType:0,polySize:3,vertexSize:2})},t.fillBuffer=function(t,e){for(var n=t.elements.length,i=this.USE_TESS_FIX?1/this.TESS_SCALE:1,r=0,o=0,a=0,s=0,l=0,u=0,c=0,h=0;h<n;h+=3)o=i*t.vertices[2*t.elements[h+0]+0],a=i*t.vertices[2*t.elements[h+0]+1],s=i*t.vertices[2*t.elements[h+1]+0],l=i*t.vertices[2*t.elements[h+1]+1],u=i*t.vertices[2*t.elements[h+2]+0],c=i*t.vertices[2*t.elements[h+2]+1],cs.isClockWiseXY(o,a,s,l,u,c)?(e[r++]=u,e[r++]=c,e[r++]=s,e[r++]=l,e[r++]=o,e[r++]=a):(e[r++]=o,e[r++]=a,e[r++]=s,e[r++]=l,e[r++]=u,e[r++]=c);return e},t.pathToAttributesBuffer=function(t,e,n,i){void 0===n&&(n=null),void 0===i&&(i=1);var r,o=performance.now(),a=t.verts?t.verts.length:0,s=0,l=t.pretesselatedBuffer;l?(a=l.length,console.debug("[GraphicsFactoryFills] Use prebuild buffer:",t)):(r=this.runTesselator(t,i))&&r.elements.length>0&&(s=2*r.elements.length,a+=2*r.elements.length);n||(n=new ki(2*Float32Array.BYTES_PER_ELEMENT,a/2|0)),n.count=a/2|0;var u=new Float32Array(n.buffer);l?u.set(l):r&&(this.fillBuffer(r,u),Ps.dispose());for(var c=t.verts.length,h=0;h<c;h++)u[s+h]=t.verts[h];return Bs.total_time+=performance.now()-o,n},t.TESS_SCALE=20,t.USE_TESS_FIX=!0,t.EPS=.001,t}(),Rs=function(){function t(){}return t.NO_OP=0,t.MOVE_TO=1,t.LINE_TO=2,t.CURVE_TO=3,t.BUILD_JOINT=13,t.BUILD_ROUND_JOINT=14,t.WIDE_LINE_TO=4,t.WIDE_MOVE_TO=5,t.CUBIC_CURVE=6,t}(),Ns=function(){function t(){}return t.draw_pathes=function(t){for(var e=t.queued_stroke_pathes,n=e.length,i=0;i<n;i++){var r=e[i],o=r.style,a=t.popEmptyStrokeShape();r.prepare();var s=this.fillLineElements([r],!1,o.scaleMode,null==a?void 0:a.elements);if(s){s.scaleMode=o.scaleMode,s.half_thickness=o.half_thickness;var l={style:new Gr,sampler:new Qe,material:null};Ms[r.style.fillStyle.data_type](r.style.fillStyle,l),a?(a.material=l.material,a.style=l.style):a=is.getShape(s,l.material,l.style),t.addShapeInternal(a)}}},t.fillLineElements=function(t,e,n,i){void 0===n&&(n=bo.NORMAL),void 0===i&&(i=null);for(var r,o=[],a=[],s=0,l=0,u=0,c=0,h=0,p=0,d=0,f=t.length;d<f;d++){var _=t[d];_.prepare();for(var g=_._positions,m=_.stroke,y=n!=bo.HAIRLINE?m.half_thickness:.5,A=0,v=g.length;A<v;A++){u=(r=g[A])[0],c=r[1];for(var b=2,x=r.length;b<x;b+=2){s=r[b+0],l=r[b+1],Ls.nearest(s,l,u,c)||(o[h++]=u,o[h++]=c,o[h++]=0,o[h++]=s,o[h++]=l,o[h++]=0,a[p++]=y),u=s,c=l}}}if(0==o.length)return null;var C=i||new Io(new ki);return C.setPositions(o),C.setThickness(a),C},t.getTriangleElements=function(t,e,n){void 0===n&&(n=bo.NORMAL);var i,r,o,a,s,l=[],u=t.length,c=0,h=0,p=new O,d=new O,f=new O,_=new O,g=new O,m=0,y=0,A=0,v=0,b=0,x=0,C=0,I=0,E=0,w=0,S=0,D=0,T=0,P=0,B=0,M=0,L=0,R=0,F=0,k=0,U=0,V=0,j=0,G=0,Q=0,z=0,H=0,X=0,Y=!0,q=!1,K=!1,W=0,J=0,Z=0,$=0,tt=0,et=0,nt=0,it=0,rt=[],ot=[],at=0,st=0,lt=0;for(lt=0;lt<u;lt++)for(i=t[lt]._positions,nt=(r=t[lt].stroke).half_thickness,it=r.half_thickness,bo.NORMAL,h=0;h<i.length;h++){for(K=!0,(o=i[h])[0]!=o[o.length-2]||o[1]!=o[o.length-1]?K=!1:(d.x=o[o.length-2]-o[o.length-4],d.y=o[o.length-1]-o[o.length-3],d.normalize(),Z=Math.atan2(d.y,d.x)*N.RADIANS_TO_DEGREES),A=o[0],v=o[1],rt=[],ot=[],at=0,st=0,a=-1*d.y,s=d.x,c=2;c<o.length;c+=2)m=o[c],y=o[c+1],m==A&&y==v||(p.x=m-A,p.y=y-v,p.normalize(),(J=(W=Math.atan2(p.y,p.x)*N.RADIANS_TO_DEGREES)-Z)>180&&(J-=360),J<-180&&(J+=360),Z=W,f.x=-1*p.y,f.y=p.x,b=A+f.x*nt,x=v+f.y*it,C=A-f.x*nt,I=v-f.y*it,q=!1,2!=c||K?($=180-J,J<0&&($=-180-J),0==J||180==Math.abs(J)?q=2==c:Math.abs($)<5?q=!0:(q=!0,$=-.5*$*N.DEGREES_TO_RADIANS,_.x=p.x*Math.cos($)+p.y*Math.sin($),_.y=p.y*Math.cos($)-p.x*Math.sin($),_.normalize(),Math.abs(J)<=1||Math.abs(J)>=359||Math.abs(J)>=179&&Math.abs(J)<=181?(tt=J<0?nt:-nt,et=J<0?it:-it):(tt=nt/Math.sin($),et=it/Math.sin($)),E=A-_.x*tt,w=v-_.y*et,S=A+_.x*tt,D=v+_.y*et,J>0?(B=A-a*nt,M=v-s*it,b=E,x=w,C=T=A-f.x*nt,I=P=v-f.y*it):(F=A+a*nt,k=v+s*it,C=S,I=D,b=L=A+f.x*nt,x=R=v+f.y*it),Y=!0,r.jointstyle==ts.MITER&&(Math.sqrt((tt*tt+et*et)/(nt*nt+it*it)-1)<=r.miterLimit?(Y=!1,C=S,I=D,b=E,x=w):J>0?(T-=p.x*(r.miterLimit*nt),P-=p.y*(r.miterLimit*it),g.x=-1*s,g.y=a,B-=g.x*(r.miterLimit*nt),M-=g.y*(r.miterLimit*it)):(L-=p.x*(r.miterLimit*nt),R-=p.y*(r.miterLimit*it),g.x=-1*s,g.y=a,F-=g.x*(r.miterLimit*nt),k-=g.y*(r.miterLimit*it))),Y&&(rt[at++]=r.jointstyle!=ts.ROUND?Rs.BUILD_JOINT:Rs.BUILD_ROUND_JOINT,J>0?(ot[st++]=E,ot[st++]=w,ot[st++]=B,ot[st++]=M,ot[st++]=T,ot[st++]=P):(ot[st++]=F,ot[st++]=k,ot[st++]=S,ot[st++]=D,ot[st++]=L,ot[st++]=R),r.jointstyle==ts.ROUND&&(ot[st++]=A-_.x*Math.abs(nt),ot[st++]=v-_.y*Math.abs(it),J>0?(ot[st++]=B,ot[st++]=M,ot[st++]=T,ot[st++]=P):(ot[st++]=F,ot[st++]=k,ot[st++]=L,ot[st++]=R))))):q=!0,a=f.x,s=f.y,q&&(rt[at++]=Rs.LINE_TO,ot[st++]=b,ot[st++]=x,ot[st++]=C,ot[st++]=I),A=m,v=y,c==o.length-2&&(rt[at++]=Rs.NO_OP,K?(ot[st++]=ot[0],ot[st++]=ot[1],ot[st++]=ot[2],ot[st++]=ot[3]):(ot[st++]=A+f.x*nt,ot[st++]=v+f.y*it,ot[st++]=A-f.x*nt,ot[st++]=v-f.y*it)));for(at=0,st=0,c=0;c<rt.length;c++)rt[c]==Rs.LINE_TO?(U=ot[st++],V=ot[st++],j=ot[st++],G=ot[st++],Q=ot[st],z=ot[st+1],H=ot[st+2],X=ot[st+3],cs.addTriangle(U,V,Q,z,j,G,0,l,e),cs.addTriangle(j,G,Q,z,H,X,0,l,e)):rt[c]>=Rs.BUILD_JOINT&&(Q=ot[st++],z=ot[st++],U=ot[st++],V=ot[st++],j=ot[st++],G=ot[st++],cs.addTriangle(U,V,j,G,Q,z,0,l,e),rt[c]==Rs.BUILD_ROUND_JOINT&&(H=ot[st++],X=ot[st++],U=ot[st++],V=ot[st++],j=ot[st++],G=ot[st++],cs.tesselateCurve(U,V,H,X,j,G,l,!0)));K||(d.x=o[2]-o[0],d.y=o[3]-o[1],d.normalize(),cs.createCap(o[0],o[1],ot[0],ot[1],ot[2],ot[3],d.x,d.y,r.capstyle,-1,nt,it,l,e),d.x=o[o.length-2]-o[o.length-4],d.y=o[o.length-1]-o[o.length-3],d.normalize(),cs.createCap(o[o.length-2],o[o.length-1],ot[ot.length-4],ot[ot.length-3],ot[ot.length-2],ot[ot.length-1],d.x,d.y,r.capstyle,1,nt,it,l,e))}if(0!=l.length){var ut=new ji(Float32Array,e?3:2);ut.set(l);var ct=ut.attributesBuffer.cloneBufferView();ut.dispose();var ht=new io(ct);return ht.setPositions(new zi(ct)),ht}},t}(),Fs=function(){function t(){}return t.EVEN_ODD="evenOdd",t.NON_ZERO="nonZero",t}(),ks=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=Fs.EVEN_ODD),this._orientedBoxBoundsDirty=!0,this._isSimpleRect=!1,this._lastPrepareScale=-1,this.morphSource=!1,this._verts=[],this._lastDirtyID=0,this._dirtyID=-1,this._connectedIdx=[],this._positionOffset=[],this.forceClose=!1,this._cache={},this._cacheSharedSegments={},this._data=[],this._commands=[],this._style=null,this.verts=[],this._positions=[],null!=t&&null!=e?(this._data[0]=e,this._commands[0]=t):(this._data[0]=[],this._commands[0]=[]),this._startPoint=new O,this._cur_point=new O,this._winding_rule=n,this._winding_directions=[]}return Object.defineProperty(t.prototype,"isSimpleRect",{get:function(){return this._isSimpleRect},set:function(t){this._isSimpleRect=t&&1===this.commands.length&&12===this.verts.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verts",{get:function(){return this._verts},set:function(t){this._verts=t,this._isSimpleRect=!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return this._lastDirtyID!==this._dirtyID},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data_type",{get:function(){return t.data_type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t,this._dirtyID++},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return null==this._style?null:this._style.data_type==Ka.data_type?this._style:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return null==this._style?null:this._style.data_type==es.data_type?this._style:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commands",{get:function(){return this._commands},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),t.prototype.cacheSegment=function(t,e,n,i,r,o,a,s,l){void 0===s&&(s=null),void 0===l&&(l=null);var u=n.toString()+"#";u+=i>o?i.toString()+"#"+o.toString():o.toString()+"#"+i.toString(),u+=r>a?r.toString()+"#"+a.toString():a.toString()+"#"+r.toString(),null!=s&&null!=l&&(u+=s.toString()+"#"+l.toString());var c=this._cache[u];null==c&&(this._cache[u]=c=[]),c.push(t),c.push(e),c.length>2&&(this._cacheSharedSegments[u]=c)},t.prototype.curveTo=function(t,e,n,i){if(this.isSimpleRect=!1,t!=n||e!=i){if(this._cur_point.x==n&&this._cur_point.y==i&&(this._cur_point.x!=t||this._cur_point.y!=e))return this.lineTo(t,e),void this.moveTo(n,i);if(this._cur_point.x==n&&this._cur_point.y==i||this._cur_point.x!=t||this._cur_point.y!=e)if(this._cur_point.x!=n||this._cur_point.y!=i||this._cur_point.x!=t||this._cur_point.y!=e){if(0==this._commands[this._commands.length-1].length&&(this._commands[this._commands.length-1].push(Rs.MOVE_TO),this._data[this._data.length-1].push(this._cur_point.x),this._data[this._data.length-1].push(this._cur_point.y)),!this.morphSource){var r=n-this._cur_point.x,o=i-this._cur_point.y;if(Math.sqrt(r*r+o*o)<=Zo.MINIMUM_DRAWING_DISTANCE)return this.data[this.data.length-1][this.data[this.data.length-1].length-2]=n,void(this.data[this.data.length-1][this.data[this.data.length-1].length-1]=i)}this._commands[this._commands.length-1].push(Rs.CURVE_TO),this._data[this._data.length-1].push(t),this._data[this._data.length-1].push(e),this._data[this._data.length-1].push(n),this._data[this._data.length-1].push(i),this._cur_point.x=n,this._cur_point.y=i,this._dirtyID++}else this.lineTo(n,i);else this.lineTo(n,i)}else this.lineTo(t,e)},t.prototype.cubicCurveTo=function(t,e,n,i,r,o){if(this.isSimpleRect=!1,console.log("cubicCurveTo not yet fully supported."),this._cur_point.x!=r||this._cur_point.y!=o){if(0==this._commands[this._commands.length-1].length&&(this._commands[this._commands.length-1].push(Rs.MOVE_TO),this._data[this._data.length-1].push(this._cur_point.x,this._cur_point.y)),!this.morphSource){var a=r-this._cur_point.x,s=o-this._cur_point.y;if(a*a+s*s<=Zo.MINIMUM_DRAWING_DISTANCE*Zo.MINIMUM_DRAWING_DISTANCE)return this.data[this.data.length-1][this.data[this.data.length-1].length-2]=r,void(this.data[this.data.length-1][this.data[this.data.length-1].length-1]=o)}this._commands[this._commands.length-1].push(Rs.CURVE_TO),this._data[this._data.length-1].push(t,e,r,o),this._cur_point.x=r,this._cur_point.y=o,this._dirtyID++}},t.prototype.lineTo=function(t,e){if(0==this._commands[this._commands.length-1].length&&(this._commands[this._commands.length-1].push(Rs.MOVE_TO),this._data[this._data.length-1].push(this._cur_point.x),this._data[this._data.length-1].push(this._cur_point.y)),!this.morphSource){var n=t-this._cur_point.x,i=e-this._cur_point.y;if(n*n+i*i<=Zo.MINIMUM_DRAWING_DISTANCE*Zo.MINIMUM_DRAWING_DISTANCE)return this.data[this.data.length-1][this.data[this.data.length-1].length-2]=t,void(this.data[this.data.length-1][this.data[this.data.length-1].length-1]=e)}this._commands[this._commands.length-1].push(Rs.LINE_TO),this._data[this._data.length-1].push(t,e),this._cur_point.x=t,this._cur_point.y=e,this._dirtyID++},t.prototype.moveTo=function(t,e){Math.abs(this._cur_point.x-t),Math.abs(this._cur_point.y-e),this._commands[this._commands.length-1].length>0&&(this._commands.push([Rs.MOVE_TO]),this._data.push([t,e])),this._startPoint.x=t,this._startPoint.y=e,this._cur_point.x=t,this._cur_point.y=e,this._dirtyID++},t.prototype.wideLineTo=function(t,e){},t.prototype.wideMoveTo=function(t,e){},t.prototype.prepare=function(t){if(void 0===t&&(t=1),this._dirtyID!==this._lastDirtyID||t!==this._lastPrepareScale){this._lastPrepareScale=t,this._lastDirtyID=this._dirtyID;var e,n,i,r,o,a,s,l=0,u=0,c=0,h=this.commands.length;if(1===h&&!this.commands[0])return!1;for(var p=1/(100*t),d=0;d<h;d++){var f=this.commands[d],_=this.data[d];this._positions[d]=[],this._connectedIdx[d]=[],this._positionOffset[d]=[],d==f.length-1&&this.forceClose&&Math.abs(_[0]-_[_.length-2])+Math.abs(_[1]-_[_.length-1])>p&&(f[f.length]=Rs.LINE_TO,_[_.length]=_[0],_[_.length]=_[1])}h=this.commands.length;for(d=0;d<h;d++){f=this.commands[d];u=0,n=(_=this.data[d])[u++],i=_[u++],r=0,o=0,a=0,c=0,this._positions[d].push(n),this._positions[d].push(i),u=0,n=_[u++],i=_[u++];for(var g=1;g<f.length;g++)switch(f[g]){case Rs.MOVE_TO:console.log("ERROR ! ONLY THE FIRST COMMAND FOR A CONTOUR IS ALLOWED TO BE A 'MOVE_TO' COMMAND");break;case Rs.LINE_TO:r=_[u++],o=_[u++],this._positions[d].push(r),this._positions[d].push(o),n=r,i=o;break;case Rs.CURVE_TO:for(a=_[u++],c=_[u++],r=_[u++],o=_[u++],s=[],cs.tesselateCurve(n,i,a,c,r,o,s,!1,0,t),l=s.length,e=0;e<l;e+=2)this._positions[d].push(s[e]),this._positions[d].push(s[e+1]);n=r,i=o}}}},t.prototype.invalidate=function(){this._orientedBoxBoundsDirty=!0,this._dirtyID++},t.prototype.getBoxBounds=function(t,e,n){return void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),t?this._internalGetBoxBounds(t,e,n):(this._orientedBoxBoundsDirty&&(this._orientedBoxBoundsDirty=!1,this._orientedBoxBounds=this._internalGetBoxBounds(null,this._orientedBoxBounds,null)),null!=this._orientedBoxBounds&&(n=this._orientedBoxBounds.union(n,n||e)),n)},t.prototype._internalGetBoxBounds=function(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null);var i=0,r=0,o=0,a=0,s=this._positions.length;if(0==s)return n;var l,u,c,h=0,p=0,d=this._positions[p++],f=d.length;for(t&&(c=t._rawData),null==n?(n=e||new R,t?(l=d[h]*c[0]+d[h+1]*c[4]+c[12],u=d[h]*c[1]+d[h+1]*c[5]+c[13]):(l=d[h],u=d[h+1]),o=i=l,a=r=u,h+=2):(o=(i=n.x)+n.width,a=(r=n.y)+n.height);h<f;h+=2)t?(l=d[h]*c[0]+d[h+1]*c[4]+c[12],u=d[h]*c[1]+d[h+1]*c[5]+c[13]):(l=d[h],u=d[h+1]),l<i?i=l:l>o&&(o=l),u<r?r=u:u>a&&(a=u),h>=f-2&&p<s&&(h=0,f=(d=this._positions[p++]).length);return n.width=o-(n.x=i),n.height=a-(n.y=r),n.depth=0,n},t.data_type="[graphicsdata path]",t}(),Us=function(){function t(t,e,n){void 0===e&&(e=10),void 0===n&&(n=!0),this.baseClass=t,this._limit=e,this.enabled=n,this._store=[]}return t.prototype.resize=function(t){if(!(t>=this._store.length))for(var e=0,n=this._store.splice(0,this._store.length-t);e<n.length;e++){n[e].dispose()}},Object.defineProperty(t.prototype,"size",{get:function(){return this._store.length},set:function(t){this.resize(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"limit",{get:function(){return this._limit},set:function(t){this.resize(t),this._limit=t},enumerable:!1,configurable:!0}),t.prototype.pop=function(){return this._store.length&&this.enabled?this._store.shift():null},t.prototype.store=function(t){return!!this.enabled&&(t.assetType===this.baseClass.assetType&&(!(this._store.length>=this._limit)&&(this._store.push(t),!0)))},t.prototype.release=function(t){var e=this._store.indexOf(t);return-1!==e&&(this._store.splice(e,1),!0)},t.prototype.clear=function(){this.resize(0)},t.prototype.dispose=function(){for(var t=0,e=this._store;t<e.length;t++){e[t].dispose()}this._store=null,this._limit=0},t.REDUCE_TIMEOUT=5e3,t}(),Vs={a:1,b:0,c:0,d:1,tx:0,ty:0},js=function(){function t(){}return t.processStyle=function(t,e,n,i){var r=t;if(n&&(r.morph=this.processMorphStyle(t,e)),e){if(r.miterLimit=2*(t.miterLimitFactor||1.5),!t.color&&t.hasFill){var o=this.processStyle(t.fillStyle,!1,!1,i);return r.type=o.type,r.transform=o.transform,r.colors=o.colors,r.ratios=o.ratios,r.focalPoint=o.focalPoint,r.bitmapId=o.bitmapId,r.material=o.material,r.repeat=o.repeat,t.fillStyle=null,r}return r.type=za.Solid,r}if(void 0===t.type||t.type===za.Solid)return r;var a=1;switch(t.type){case za.LinearGradient:case za.RadialGradient:case za.FocalRadialGradient:for(var s=t.records,l=r.colors=[],u=r.ratios=[],c=0;c<s.length;c++){var h=s[c];0!=u.length&&u[u.length-1]==h.ratio||(l.push(h.color),u.push(h.ratio))}a=1;break;case za.RepeatingBitmap:case za.ClippedBitmap:case za.NonsmoothedRepeatingBitmap:case za.NonsmoothedClippedBitmap:r.smooth=t.type!==za.NonsmoothedRepeatingBitmap&&t.type!==za.NonsmoothedClippedBitmap,r.repeat=t.type!==za.ClippedBitmap&&t.type!==za.NonsmoothedClippedBitmap,r.material=this.getMaterial(t.bitmapId,i),a=.05;break;default:console.log("shape parser encountered invalid fill style "+t.type)}if(!t.matrix)return r.transform=Vs,r;var p=t.matrix;return r.transform={a:p.a*a,b:p.b*a,c:p.c*a,d:p.d*a,tx:p.tx/20,ty:p.ty/20},t.matrix=null,r},t.getMaterial=function(t,e){var n=this._mapMatsForBitmaps[t];if(!n){var i=e.awaySymbols[t];i||(i=new Le(512,512,!0,4278190335,!0)),(n=e.createMaterial(i)).alphaBlending=!0,n.useColorTransform=!0,n.bothSides=!0,this._mapMatsForBitmaps[t]=n}return n},t.processMorphStyle=function(t,e){var n=Object.create(t);if(e){if(n.width=t.widthMorph,!t.color&&t.hasFill){var i=this.processMorphStyle(t.fillStyle,!1);return n.transform=i.transform,n.colors=i.colors,n.ratios=i.ratios,n}return n.color=t.colorMorph,n}if(void 0===t.type)return n;if(t.type===za.Solid)return n.color=t.colorMorph,n;var r=1;switch(t.type){case za.LinearGradient:case za.RadialGradient:case za.FocalRadialGradient:for(var o=t.records,a=n.colors=[],s=n.ratios=[],l=0;l<o.length;l++){var u=o[l];a.push(u.colorMorph),s.push(u.ratioMorph)}r=1;break;case za.RepeatingBitmap:case za.ClippedBitmap:case za.NonsmoothedRepeatingBitmap:case za.NonsmoothedClippedBitmap:r=.05;break;default:console.log("shape parser encountered invalid fill style")}if(!t.matrix)return n.transform=Vs,n;var c=t.matrixMorph;return n.transform={a:c.a*r,b:c.b*r,c:c.c*r,d:c.d*r,tx:c.tx/20,ty:c.ty/20},n},t.createPathsList=function(t,e,n,i){for(var r=[],o=0;o<t.length;o++){var a=this.processStyle(t[o],e,n,i);r[o]=e?new ns(null,a):new ns(a,null)}return r},t._mapMatsForBitmaps={},t}();Ls.prepareWasm();var Gs=Array.prototype.push,Qs=function(t){return Math.round(t/20)},zs=function(t){function e(){var e=t.call(this)||this;return e._bitmapFillPool={},e._queuedShapeTags=[],e._shapes=[],e._queued_fill_pathes=[],e._queued_stroke_pathes=[],e._current_position=new O,e.tryOptimiseSigleImage=!1,e._lastPrebuildedShapes=[],e._drawingDirty=!1,e.usages=0,e._clearCount=0,e._internalShapesId=[],e._rFillPool=new Us(is,100,!1),e._rStrokePool=new Us(is,100,!1),e._poolingConfig={fill:Zo.ALLOW_INTERNAL_POOL.FILLS,stroke:Zo.ALLOW_INTERNAL_POOL.STROKES,clearsCount:Zo.CLEARS_BEFORE_POOLING},e}return o(e,t),e.getShapeForBitmap=function(t,e){var n=us.getMaterialForBitmap(t),i=n.style;return i.sampler=new Qe(!1,!0,!1),i.addSamplerAt(i.sampler,n.getTextureAt(0)),is.getShape(is.getTriangleElement(e,!1,!0),n,i)},e.getShapeForBitmapStyle=function(t,e){var n=new Gr,i=new W(Qs(e.xMin),Qs(e.yMin),Qs(e.xMax-e.xMin),Qs(e.yMax-e.yMin)),r=is.getTriangleElement(i);r.usages++;var o=t.transform,a=o.a,s=o.b,l=o.c,u=o.d,c=o.tx,h=o.ty,p=t.material.getTextureAt(0),d=us.getMaterialForBitmap(t.material.style.image),f=new Ja(d,new M(a,s,l,u,c,h),t.repeat,t.smooth),_=f.material,g=new Qe(f.repeat,f.smooth,t.smooth);return _.style.sampler=g,_.animateUVs=!0,n.addSamplerAt(g,p),n.uvMatrix=f.getUVMatrix(),is.getShape(r,_,n)},e.getGraphics=function(){return e._pool.length?e._pool.pop():new e},e.clearPool=function(){e._pool=[]},Object.defineProperty(e.prototype,"start",{get:function(){return!this._start&&this.sourceGraphics?this.sourceGraphics.start:this._start},set:function(t){this._start=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return!this._end&&this.sourceGraphics?this.sourceGraphics.end:this._end},set:function(t){this._end=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._shapes.length+this._queued_stroke_pathes.length+this._queued_fill_pathes.length+this._queuedShapeTags.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"queued_stroke_pathes",{get:function(){return this._queued_stroke_pathes},set:function(t){this._queued_stroke_pathes=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"queued_fill_pathes",{get:function(){return this._queued_fill_pathes},set:function(t){this._queued_fill_pathes=t},enumerable:!1,configurable:!0}),e.prototype.add_queued_path=function(t,e){(void 0===e&&(e=!1),t.style)&&(t.style.data_type===es.data_type?(this._queued_stroke_pathes.push(t),e||this.endFill()):(this._drawingDirty=!0,this._queued_fill_pathes.push(t)))},Object.defineProperty(e.prototype,"internalPoolConfig",{get:function(){return this._poolingConfig},set:function(t){this._poolingConfig.fill="boolean"==typeof t?t:t.fill,this._poolingConfig.stroke="boolean"==typeof t?t:t.stroke,t||(this._rFillPool.enabled&&this._rFillPool.clear(),this._rStrokePool.enabled&&this._rStrokePool.clear(),this._rStrokePool.enabled=!1,this._rStrokePool.enabled=!1),this._clearCount=0},enumerable:!1,configurable:!0}),e.prototype.popEmptyFillShape=function(){return this._rFillPool.pop()},e.prototype.popEmptyStrokeShape=function(){return this._rStrokePool.pop()},e.prototype.addShapeInternal=function(t){this.addShape(t),this._internalShapesId.push(t.id)},e.prototype.addShape=function(t){t.usages++;var e=this.getShapeIndex(t);return-1!=e&&this.removeShapeAt(e),this._shapes.push(t),this.invalidate(),t},e.prototype.removeShape=function(t){var e=this.getShapeIndex(t);if(-1==e)throw new B("Shape parameter is not a shape of the caller");this.removeShapeAt(e)},e.prototype.removeShapeAt=function(t){if(t<0||t>=this._shapes.length)throw new G("Index is out of range");var e=this._shapes.splice(t,1)[0];e.usages--,e.usages||this.tryPoolShape(e)||e.dispose(),this.invalidate()},e.prototype.getShapeAt=function(t){return this._shapes[t]},e.prototype.getShapeIndex=function(t){return this._shapes.indexOf(t)},e.prototype.applyTransformation=function(t){for(var e=this._shapes.length,n=0;n<e;++n)this._shapes[n].applyTransformation(t)},e.prototype.copyTo=function(t,e){void 0===e&&(e=!1),this._drawingDirty&&this.endFill(),t.sourceGraphics=this,t._addShapes(this._shapes,e)},e.prototype.clone=function(t){void 0===t&&(t=!1);var n=e.getGraphics();return this.copyTo(n,t),n},e.prototype.scale=function(t){for(var e=this._shapes.length,n=0;n<e;++n)this._shapes[n].scale(t)},e.prototype.tryPoolShape=function(t){var e=t.elements.assetType===io.assetType,n=t.elements.assetType===Io.assetType;return!(!n&&!e)&&(-1!==this._internalShapesId.indexOf(t.id)&&(e?this._rFillPool.store(t):!!n&&this._rStrokePool.store(t)))},e.prototype.clear=function(){var t;this._clearCount++,this._lastPrebuildedShapes.length=0,!(this._internalShapesId.length>0&&this._clearCount>=this._poolingConfig.clearsCount)||this._rStrokePool.enabled===this._poolingConfig.stroke&&this._rFillPool.enabled===this._poolingConfig.fill||(console.warn("[Graphics] To many clears, pooling shapes internally!",this.id,this._internalShapesId.length),this._rFillPool.enabled=this._poolingConfig.fill,this._rStrokePool.enabled=this._poolingConfig.stroke);for(var e=this._shapes.length,n=0;n<e;n++)(t=this._shapes[n]).usages--,t.usages||this.tryPoolShape(t)||t.dispose();this._internalShapesId.length=0,this._shapes.length=0,this.invalidate(),this._active_fill_path=null,this._active_stroke_path=null,this._queued_fill_pathes.length=0,this._queued_stroke_pathes.length=0,this._current_position.x=0,this._current_position.y=0,this._drawingDirty=!1,this._lineStyle=null,this._fillStyle=null},e.prototype.dispose=function(){if(this.clear(),this._bitmapFillPool){for(var t in this._bitmapFillPool)this._bitmapFillPool[t].fillStyle.material.dispose();this._bitmapFillPool=null}this._bitmapFillPool=null,this._rFillPool.clear(),this._rStrokePool.clear(),this._internalShapesId.length=0,this._clearCount=0,e._pool.push(this)},e.prototype.scaleUV=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var n=this._shapes.length,i=0;i<n;++i)this._shapes[i].scaleUV(t,e)},e.prototype._acceptTraverser=function(t){if(this._drawingDirty){for(var e=0,n=this._lastPrebuildedShapes;e<n.length;e++){var i=n[e];this.removeShape(i)}t instanceof cr?this._endFillInternal(!1):this.endFill()}for(var r=this._shapes.length,o=0;o<r;o++)t.applyTraversable(this._shapes[o])},e.prototype.beginBitmapFill=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=Zo.SMOOTH_BITMAP_FILL_DEFAULT),this._fillStyle&&this.endFill(),this._bitmapFillPool||(this._bitmapFillPool={});var r=this._bitmapFillPool[t.id];r?(r.fillStyle.matrix=e,r.fillStyle.repeat=n,r.fillStyle.smooth=i):r=this._bitmapFillPool[t.id]=new Ka(new Ja(us.getMaterialForBitmap(t),e,n,i)),this._fillStyle=r,this._updateFillPath()},e.prototype.beginFill=function(t,e){void 0===e&&(e=1),0==t&&(t=65793),this._fillStyle&&this.endFill(),this._fillStyle=new Ka(new Za(t,e)),this._updateFillPath()},e.prototype.beginGradientFill=function(t,e,n,i,r,o,a,s){void 0===r&&(r=null),void 0===o&&(o="pad"),void 0===a&&(a="rgb"),void 0===s&&(s=0),this._fillStyle&&this.endFill(),this._fillStyle=new Ka(new Wa(t,e,n,i,r,o,a,s)),this._updateFillPath()},e.prototype.copyFrom=function(t){t.copyTo(this)},e.prototype.cubicCurveTo=function(t,e,n,i,r,o){throw new j("cubicCurveTo")},e.prototype.curveTo=function(t,e,n,i){this._drawingDirty=!0,this._active_fill_path&&this._active_fill_path.curveTo(t,e,n,i),this._active_stroke_path&&this._active_stroke_path.curveTo(t,e,n,i),this._current_position.x=n,this._current_position.y=i,this.invalidate()},e.prototype.drawCircle=function(t,e,n){if(this._drawingDirty=!0,this._active_fill_path){this._active_fill_path.moveTo(t,e);var i=n;this._active_stroke_path&&(i-=this._active_stroke_path.style.thickness/2),cs.drawElipse(t,e,i,i,this._active_fill_path.verts,0,360,5,!1)}this._active_stroke_path&&cs.drawElipseStrokes(t,e,n,n,this._active_stroke_path,0,360,2),this.invalidate()},e.prototype.drawEllipse=function(t,e,n,i){if(this._drawingDirty=!0,t+=n/=2,e+=i/=2,null!=this._active_fill_path){this._active_fill_path.moveTo(t,e);var r=n,o=i;null!=this._active_stroke_path&&(r-=this._active_stroke_path.style.thickness/2,o-=this._active_stroke_path.style.thickness/2),cs.drawElipse(t,e,r,o,this._active_fill_path.verts,0,360,6,!1)}null!=this._active_stroke_path&&cs.drawElipseStrokes(t,e,n,i,this._active_stroke_path,0,360,2),this.invalidate()},e.prototype.drawGraphicsData=function(t){},e.prototype.drawPath=function(t,e,n){this._drawingDirty=!0,t.length,this._active_fill_path&&this._drawPathInternal(this._active_fill_path,t,e,n),this._active_stroke_path&&this._drawPathInternal(this._active_stroke_path,t,e,n),this.invalidate()},e.prototype._drawPathInternal=function(t,e,n,i){for(var r=0,o=0;o<e.length;o++)switch(e[o]){case Rs.MOVE_TO:t.moveTo(n[r],n[r+1]),r+=2;break;case Rs.LINE_TO:t.lineTo(n[r],n[r+1]),r+=2;break;case Rs.CURVE_TO:t.curveTo(n[r],n[r+1],n[r+2],n[r+3]),r+=4}},e.prototype.drawRect=function(t,e,n,i){if(this._drawingDirty=!0,null!=this._active_fill_path){this._active_fill_path.moveTo(t,e);var r=n,o=i,a=0;null!=this._active_stroke_path&&(a=this._active_stroke_path.style.thickness/2,r-=this._active_stroke_path.style.thickness,o-=this._active_stroke_path.style.thickness),cs.addTriangle(t+a,e+o+a,t+a,e+a,t+r+a,e+a,0,this._active_fill_path.verts,!1),cs.addTriangle(t+a,e+o+a,t+a+r,e+a,t+r+a,e+o+a,0,this._active_fill_path.verts,!1),this._active_fill_path.isSimpleRect=!0}null!=this._active_stroke_path&&(this._active_stroke_path.moveTo(t,e),this._active_stroke_path.lineTo(t+n,e),this._active_stroke_path.lineTo(t+n,e+i),this._active_stroke_path.lineTo(t,e+i),this._active_stroke_path.lineTo(t,e)),this.invalidate()},e.prototype.drawRoundRect=function(t,e,n,i,r,o){void 0===o&&(o=NaN),this._drawingDirty=!0,isNaN(o)&&(o=r);var a=n,s=i,l=r/2,u=o/2,c=0;null!=this._active_fill_path&&(this._active_fill_path.moveTo(t,e),null!=this._active_stroke_path&&(c=this._active_stroke_path.style.thickness/2,a-=this._active_stroke_path.style.thickness,s-=this._active_stroke_path.style.thickness),cs.addTriangle(t+c,e+s-u,t+c,e+u,t+a-c,e+u,0,this._active_fill_path.verts,!1),cs.addTriangle(t+c,e+s-u,t+a-c,e+u,t+a-c,e+s-u,0,this._active_fill_path.verts,!1),cs.addTriangle(t+l,e+c,t+a-l,e+u,t+l,e+u,0,this._active_fill_path.verts,!1),cs.addTriangle(t+l,e+c,t+a-l,e+c,t+a-l,e+u,0,this._active_fill_path.verts,!1),cs.addTriangle(t+l,e+s-u,t+a-l,e+s-c,t+l,e+s-c,0,this._active_fill_path.verts,!1),cs.addTriangle(t+l,e+s-u,t+a-l,e+s-u,t+a-l,e+s-c,0,this._active_fill_path.verts,!1),cs.drawElipse(t+l,e+u,l-c,u-c,this._active_fill_path.verts,180,270,5,!1),cs.drawElipse(t+a-l,e+u,l-c,u-c,this._active_fill_path.verts,270,360,5,!1),cs.drawElipse(t+a-l,e+s-u,l-c,u-c,this._active_fill_path.verts,0,90,5,!1),cs.drawElipse(t+l,e+s-u,l-c,u-c,this._active_fill_path.verts,90,180,5,!1)),null!=this._active_stroke_path&&(this._active_stroke_path.moveTo(t+l,e),this._active_stroke_path.lineTo(t+a-l,e),cs.drawElipseStrokes(t+a-l,e+u,l,u,this._active_stroke_path,270,360,2),this._active_stroke_path.lineTo(t+a,e+s-u),cs.drawElipseStrokes(t+a-l,e+s-u,l,u,this._active_stroke_path,0,90,2),this._active_stroke_path.lineTo(t+l,e+s),cs.drawElipseStrokes(t+l,e+s-u,l,u,this._active_stroke_path,90,180,2),this._active_stroke_path.lineTo(t,e+u),cs.drawElipseStrokes(t+l,e+u,l,u,this._active_stroke_path,180,270,2)),this.invalidate()},e.prototype.drawRoundRectComplex=function(t,e,n,i,r,o,a,s){var l=n,u=i,c=r,h=o,p=a,d=s;this._drawingDirty=!0;var f=0;null!=this._active_fill_path&&(this._active_fill_path.moveTo(t,e),null!=this._active_stroke_path&&(f=this._active_stroke_path.style.thickness/2,l-=this._active_stroke_path.style.thickness,u-=this._active_stroke_path.style.thickness),cs.addTriangle(t+c,e+c,t+l-h,e+h,t+l-d,e+u-d,0,this._active_fill_path.verts,!1),cs.addTriangle(t+c,e+c,t+l-d,e+u-d,t+p,e+u-p,0,this._active_fill_path.verts,!1),cs.addTriangle(t+f,e+c,t+c,e+c,t+f,e+u-p,0,this._active_fill_path.verts,!1),cs.addTriangle(t+c,e+c,t+f,e+u-p,t+p,e+u-p,0,this._active_fill_path.verts,!1),cs.addTriangle(t+c,e+f,t+c,e+c,t+l-h,e+f,0,this._active_fill_path.verts,!1),cs.addTriangle(t+c,e+c,t+l-h,e+h,t+l-h,e+f,0,this._active_fill_path.verts,!1),cs.addTriangle(t+l-f,e+h,t+l-h,e+h,t+l-f,e+u-d,0,this._active_fill_path.verts,!1),cs.addTriangle(t+l-h,e+h,t+l-d,e+u-d,t+l-f,e+u-d,0,this._active_fill_path.verts,!1),cs.addTriangle(t+p,e+u-f,t+l-d,e+u-f,t+p,e+u-p,0,this._active_fill_path.verts,!1),cs.addTriangle(t+p,e+u-p,t+l-d,e+u-f,t+l-d,e+u-d,0,this._active_fill_path.verts,!1),cs.drawElipse(t+c,e+c,c-f,c-f,this._active_fill_path.verts,180,270,5,!1),cs.drawElipse(t+l-h,e+h,h-f,h-f,this._active_fill_path.verts,270,360,5,!1),cs.drawElipse(t+l-d,e+u-d,d-f,d-f,this._active_fill_path.verts,0,90,5,!1),cs.drawElipse(t+p,e+u-p,p-f,p-f,this._active_fill_path.verts,90,180,5,!1)),null!=this._active_stroke_path&&(this._active_stroke_path.moveTo(t,e),console.warn("[Graphics] - drawRoundRectComplex for strokes currently disabled")),this.invalidate()},e.prototype.drawTriangles=function(t,e,n,i){this._drawingDirty=!0,this._active_fill_path,this._active_stroke_path},e.prototype.endFill=function(){this._active_stroke_path&&this._active_fill_path&&(this._active_stroke_path.forceClose=!0),this._endFillInternal(!0)},e.prototype._endFillInternal=function(t){if(void 0===t&&(t=!1),this._queuedShapeTags.length){var e=this._queuedShapeTags,n=e.length;this._queuedShapeTags=[];for(var i=0;i<n;i++)this.convertRecordsToShapeData(e[i]);e.length=0}var r=this._shapes.length;if(Ls.draw_pathes(this),Ns.draw_pathes(this),t&&(this._active_fill_path=null,this._queued_fill_pathes.length=0,this._active_stroke_path=null,this._queued_stroke_pathes.length=0,this._fillStyle=null,this._updateLinePath()),t)this._lastPrebuildedShapes.length=0;else{for(i=r;i<this._shapes.length;i++)this._lastPrebuildedShapes[i-r]=this._shapes[i];this._lastPrebuildedShapes.length=this._shapes.length-r}this._drawingDirty=!1},e.prototype.lineBitmapStyle=function(t,e,n,i){},e.prototype.lineGradientStyle=function(t,e,n,i,r,o,a,s){this._drawingDirty=!0,this._lineStyle=new es(new Za(e[0],n[0]),1)},e.prototype.lineStyle=function(t,e,n,i,r,o,a,s){if(void 0===t&&(t=NaN),void 0===e&&(e=0),void 0===n&&(n=1),void 0===o&&(o=$a.NONE),void 0===a&&(a=ts.MITER),void 0===s&&(s=100),isNaN(t))return this._lineStyle=null,void this._updateLinePath();0==t&&(t=.05,bo.HAIRLINE);var l=t>0&&n>0;this._lineStyle=l?new es(new Za(e,n),t,a,o,s):null,this._updateLinePath()},e.prototype.lineTo=function(t,e){this._drawingDirty=!0,this._active_fill_path&&this._active_fill_path.lineTo(t,e),this._active_stroke_path&&this._active_stroke_path.lineTo(t,e),this._current_position.x=t,this._current_position.y=e,this.invalidate()},e.prototype.moveTo=function(t,e){this._drawingDirty=!0,this._active_fill_path&&this._active_fill_path.moveTo(t,e),this._active_stroke_path&&this._active_stroke_path.moveTo(t,e),this._current_position.x=t,this._current_position.y=e,this.invalidate()},e.prototype.processLazyTesselation=function(t){if(t.lazyTaskDone=null,t.needParse=!1,t.parsingTime<30){var e=this._queuedShapeTags.indexOf(t);e>-1&&this._queuedShapeTags.splice(e,1),this.convertRecordsToShapeData(t,t.parsingTime>1)}else console.debug("[Graphics] Supress lazy shape convertion:",t)},e.prototype.queueShapeTag=function(t){this._queuedShapeTags.push(t),this._drawingDirty=!0},e.prototype._updateFillPath=function(){this._fillStyle?null!=this._active_fill_path&&this._active_fill_path.style==this._fillStyle||(this._active_fill_path=new ks,this._active_fill_path.style=this._fillStyle,0==this._current_position.x&&0==this._current_position.y||this._active_fill_path.moveTo(this._current_position.x,this._current_position.y),this._queued_fill_pathes.push(this._active_fill_path)):this._active_fill_path=null},e.prototype._updateLinePath=function(){this._lineStyle?null!=this._active_stroke_path&&this._active_stroke_path.style==this._lineStyle||(this._active_stroke_path=new ks,this._active_stroke_path.style=this._lineStyle,0==this._current_position.x&&0==this._current_position.y||this._active_stroke_path.moveTo(this._current_position.x,this._current_position.y),this._queued_stroke_pathes.push(this._active_stroke_path)):this._active_stroke_path=null},e.prototype._addShapes=function(t,e){var n;void 0===e&&(e=!1);for(var i=t.length,r=0;r<i;r++)n=t[r],e&&(n=is.getShape(n.elements,n.material,n.style,n.count,n.offset)),n.particleCollection=t[r].particleCollection,this._shapes.push(n),n.usages++;this.invalidate()},e.prototype._isShapeMaterial=function(t){for(var e=this._shapes.length,n=0;n<e;n++)if(t==this._shapes[n].material)return!0;return!1},e.prototype.convertRecordsToShapeData=function(t,n){void 0===n&&(n=!1),t.needParse&&t.lazyParser();var i=t.records,r=t.fillStyles,o=t.lineStyles,a=t.recordsMorph||null,s=null!==a,l=t.factory;if(this.tryOptimiseSigleImage&&5===i.length&&2===r.length&&r[0].type>=za.ClippedBitmap){var u=js.processStyle(t.fillStyles[1],!1,!1,l),c=t.fillBounds||t.lineBounds;this.addShapeInternal(e.getShapeForBitmapStyle(u,c))}else{for(var h,p=js.createPathsList(r,!1,!!a,l),d=js.createPathsList(o,!0,!!a,l),f={fill0:0,fill1:0,line:0},_=[],g=[],m=i.length,y=0,A=0,v=0,b=0,x=0,C=0;x<m;x++){var I=i[x];if(0===I.type){for(var E=0;E<3;E++)_[E]=void 0;16&I.flags&&(g||(g=[]),Gs.apply(g,p),p=js.createPathsList(I.fillStyles,!1,s,l),Gs.apply(g,d),d=js.createPathsList(I.lineStyles,!0,s,l),f={fill0:0,fill1:0,line:0}),2&I.flags&&(f.fill0=I.fillStyle0),4&I.flags&&(f.fill1=I.fillStyle1),8&I.flags&&(f.line=I.lineStyle),f.fill0&&(_[0]={path:p[f.fill0-1]}),f.fill1&&(_[1]={path:p[f.fill1-1]}),f.line&&(_[2]={path:d[f.line-1]}),1&I.flags&&(y=0|I.moveX,A=0|I.moveY),f.fill1&&f.fill0&&f.fill0==f.fill1&&(_[0]=_[1]=void 0),s&&(0===(h=a[C++]).type?(v=0|h.moveX,b=0|h.moveY):C--);for(var w=0;w<3;w++){(D=_[w])&&(D.segment=Ya.FromDefaults(s),D.path.addSegment(D.segment),s?D.segment.morphMoveTo(y,A,v,b):D.segment.moveTo(y,A))}}else{if(So(1===I.type),s){for(h=a[C++];h&&0===h.type;)h=a[C++];h||(h=I)}if(32&I.flags&&(!s||32&h.flags)){y+=0|I.deltaX,A+=0|I.deltaY,s&&(v+=0|h.deltaX,b+=0|h.deltaY);for(var S=0;S<3;S++){var D;(D=_[S])&&(s?D.segment.morphLineTo(y,A,v,b):D.segment.lineTo(y,A))}}else{var T=this.transformCurve(I,y,A);y=T.x,A=T.y;var P=void 0;s&&(v=(P=this.transformCurve(h,v,b)).x,b=P.y);for(var B=0;B<3;B++){var O=_[B];if(O){var M=O.segment;s?M.morphCurveTo(T.cx,T.cy,y,A,P.cx,P.cy,v,b):M.curveTo(T.cx,T.cy,y,A)}}}}}var L,R,N=[g,p,d],F=0;if(s){this._start=[],this._end=[];for(x=0;F<N.length;x++)!N[F]||N[F].length<=x?(F++,x=-1):(L=new ks,R=new ks,L.morphSource=R.morphSource=!0,N[F][x].serializeAJS(L,R),this._start.push(L),this._end.push(R))}else for(x=0;F<N.length;x++)!N[F]||N[F].length<=x?(F++,x=-1):(L=new ks,N[F][x].serializeAJS(L,null),this.add_queued_path(L,n))}},e.prototype.transformCurve=function(t,e,n){var i,r;if(32&t.flags){var o=0|t.deltaX,a=0|t.deltaY;i=e+(o>>1),r=n+(a>>1),e+=o,n+=a}else i=e+t.controlDeltaX|0,r=n+t.controlDeltaY|0,e=i+t.anchorDeltaX|0,n=r+t.anchorDeltaY|0;return{cx:i,cy:r,x:e,y:n}},e._pool=new Array,e.assetType="[asset Graphics]",e}(_);mr.registerAbstraction(Ar,zs),console.debug("AwayJS - Graphics - 0.5.88"),St&&St.register(Ts.instance);var Hs,Xs=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n="triangle");var i=t.call(this)||this;if(i._primitiveDirty=!0,i._uvDirty=!0,i._scaleU=1,i._scaleV=1,i._material=e,i._elementsType=n,i._elementsType==xo.TRIANGLE){var r=new io(new ki);r.autoDeriveNormals=!1,r.autoDeriveTangents=!1,i._elements=r}else i._elementsType==xo.LINE&&(i._elements=new Io(new ki));return i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"elementsType",{get:function(){return this._elementsType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){if(t!=this._material){this._material=t;for(var e=this._pObjects.length,n=0;n<e;n++)this._pObjects[n].material=this._material}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleU",{get:function(){return this._scaleU},set:function(t){this._scaleU!=t&&(this._scaleU=t,this._pInvalidateUVs())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleV",{get:function(){return this._scaleV},set:function(t){this._scaleV!=t&&(this._scaleV=t,this._pInvalidateUVs())},enumerable:!1,configurable:!0}),e.prototype._pBuildGraphics=function(t,e){throw new u},e.prototype._pBuildUVs=function(t,e){throw new u},e.prototype._pInvalidatePrimitive=function(){this._primitiveDirty=!0},e.prototype._pInvalidateUVs=function(){this._uvDirty=!0},e.prototype.updateGraphics=function(){this._pBuildGraphics(this._elements,this._elementsType),this._primitiveDirty=!1},e.prototype.updateUVs=function(){this._pBuildUVs(this._elements,this._elementsType),this._uvDirty=!1},e.prototype._iValidate=function(){this._primitiveDirty&&this.updateGraphics(),this._uvDirty&&this.updateUVs()},e.prototype._pCreateObject=function(){var t=new Zs(null,this._material);return t.graphics.addShape(is.getShape(this._elements)),t._iSourcePrefab=this,t},e.assetType="[asset PrimitivePrefab]",e}(function(t){function e(){var e=t.call(this)||this;return e._pObjects=new Array,e}return o(e,t),e.prototype.getNewObject=function(){var t=this._pCreateObject();return this._pObjects.push(t),t},e.prototype._pCreateObject=function(){throw new u},e.prototype._iValidate=function(){},e}(_)),Ys=function(t){function e(e,n,i,r,o,a,s,l,u){void 0===e&&(e=null),void 0===n&&(n="triangle"),void 0===i&&(i=100),void 0===r&&(r=100),void 0===o&&(o=100),void 0===a&&(a=1),void 0===s&&(s=1),void 0===l&&(l=1),void 0===u&&(u=!0);var c=t.call(this,e,n)||this;return c._width=i,c._height=r,c._depth=o,c._segmentsW=a,c._segmentsH=s,c._segmentsD=l,c._tile6=u,c}return o(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._pInvalidatePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._pInvalidatePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t,this._pInvalidatePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tile6",{get:function(){return this._tile6},set:function(t){this._tile6=t,this._pInvalidatePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t,this._pInvalidatePrimitive(),this._pInvalidateUVs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t,this._pInvalidatePrimitive(),this._pInvalidateUVs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"segmentsD",{get:function(){return this._segmentsD},set:function(t){this._segmentsD=t,this._pInvalidatePrimitive(),this._pInvalidateUVs()},enumerable:!1,configurable:!0}),e.prototype._pBuildGraphics=function(t,e){var n,i,r,o,a,s,l,u,c,h,p,d,f,_,g,m,y,A=0,v=this._width/2,b=this._height/2,x=this._depth/2;if(e==xo.TRIANGLE){var C=t,I=2*((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1)),E=12*(this._segmentsW*this._segmentsH+this._segmentsW*this._segmentsD+this._segmentsH*this._segmentsD);for(I==C.numVertices&&null!=C.indices?(C.invalidateIndices(),C.invalidateVertices(C.positions),C.invalidateVertices(C.normals),C.invalidateVertices(C.tangents)):(C.setIndices(new Uint16Array(E)),C.setPositions(new Float32Array(3*I)),C.setNormals(new Float32Array(3*I)),C.setTangents(new Float32Array(3*I)),this._pInvalidateUVs()),n=C.indices.get(C.numElements),i=C.positions.get(I),r=C.normals.get(I),o=C.tangents.get(I),a=C.concatenatedBuffer.stride/4,d=0,f=0,_=this._width/this._segmentsW,g=this._height/this._segmentsH,m=this._depth/this._segmentsD,h=0;h<=this._segmentsW;h++)for(y=h*_-v,p=0;p<=this._segmentsH;p++)i[d]=y,i[d+1]=p*g-b,i[d+2]=-x,r[d]=0,r[d+1]=0,r[d+2]=-1,o[d]=1,o[d+1]=0,o[d+2]=0,i[d+=a]=y,i[d+1]=p*g-b,i[d+2]=x,r[d]=0,r[d+1]=0,r[d+2]=1,o[d]=-1,o[d+1]=0,o[d+2]=0,d+=a,h&&p&&(u=(s=2*((h-1)*(this._segmentsH+1)+(p-1)))+2,c=(l=2*(h*(this._segmentsH+1)+(p-1)))+2,n[f++]=s,n[f++]=u,n[f++]=c,n[f++]=s,n[f++]=c,n[f++]=l,n[f++]=l+1,n[f++]=c+1,n[f++]=u+1,n[f++]=l+1,n[f++]=u+1,n[f++]=s+1);for(A+=2*(this._segmentsW+1)*(this._segmentsH+1),h=0;h<=this._segmentsW;h++)for(y=h*_-v,p=0;p<=this._segmentsD;p++)i[d]=y,i[d+1]=b,i[d+2]=p*m-x,r[d]=0,r[d+1]=1,r[d+2]=0,o[d]=1,o[d+1]=0,o[d+2]=0,i[d+=a]=y,i[d+1]=-b,i[d+2]=p*m-x,r[d]=0,r[d+1]=-1,r[d+2]=0,o[d]=1,o[d+1]=0,o[d+2]=0,d+=a,h&&p&&(u=(s=A+2*((h-1)*(this._segmentsD+1)+(p-1)))+2,c=(l=A+2*(h*(this._segmentsD+1)+(p-1)))+2,n[f++]=s,n[f++]=u,n[f++]=c,n[f++]=s,n[f++]=c,n[f++]=l,n[f++]=l+1,n[f++]=c+1,n[f++]=u+1,n[f++]=l+1,n[f++]=u+1,n[f++]=s+1);for(A+=2*(this._segmentsW+1)*(this._segmentsD+1),h=0;h<=this._segmentsD;h++)for(y=x-h*m,p=0;p<=this._segmentsH;p++)i[d]=-v,i[d+1]=p*g-b,i[d+2]=y,r[d]=-1,r[d+1]=0,r[d+2]=0,o[d]=0,o[d+1]=0,o[d+2]=-1,i[d+=a]=v,i[d+1]=p*g-b,i[d+2]=y,r[d]=1,r[d+1]=0,r[d+2]=0,o[d]=0,o[d+1]=0,o[d+2]=1,d+=a,h&&p&&(u=(s=A+2*((h-1)*(this._segmentsH+1)+(p-1)))+2,c=(l=A+2*(h*(this._segmentsH+1)+(p-1)))+2,n[f++]=s,n[f++]=u,n[f++]=c,n[f++]=s,n[f++]=c,n[f++]=l,n[f++]=l+1,n[f++]=c+1,n[f++]=u+1,n[f++]=l+1,n[f++]=u+1,n[f++]=s+1)}else if(e==xo.LINE){var w=t,S=4*this._segmentsH+4*this._segmentsW+4*this._segmentsD;i=new Float32Array(6*S);var D=new Float32Array(S);for(d=0,f=0,h=0;h<this._segmentsH;++h)i[d++]=-v,i[d++]=h*this._height/this._segmentsH-b,i[d++]=-x,i[d++]=v,i[d++]=h*this._height/this._segmentsH-b,i[d++]=-x,D[f++]=1,i[d++]=-v,i[d++]=b-h*this._height/this._segmentsH,i[d++]=x,i[d++]=v,i[d++]=b-h*this._height/this._segmentsH,i[d++]=x,D[f++]=1;for(h=0;h<this._segmentsW;++h)i[d++]=h*this._width/this._segmentsW-v,i[d++]=-b,i[d++]=-x,i[d++]=h*this._width/this._segmentsW-v,i[d++]=b,i[d++]=-x,D[f++]=1,i[d++]=v-h*this._width/this._segmentsW,i[d++]=-b,i[d++]=x,i[d++]=v-h*this._width/this._segmentsW,i[d++]=b,i[d++]=x,D[f++]=1;for(h=0;h<this._segmentsH;++h)i[d++]=-v,i[d++]=h*this._height/this._segmentsH-b,i[d++]=-x,i[d++]=-v,i[d++]=h*this._height/this._segmentsH-b,i[d++]=x,D[f++]=1,i[d++]=v,i[d++]=b-h*this._height/this._segmentsH,i[d++]=-x,i[d++]=v,i[d++]=b-h*this._height/this._segmentsH,i[d++]=x,D[f++]=1;for(h=0;h<this._segmentsD;++h)i[d++]=v,i[d++]=-b,i[d++]=h*this._depth/this._segmentsD-x,i[d++]=v,i[d++]=b,i[d++]=h*this._depth/this._segmentsD-x,D[f++]=1,i[d++]=-v,i[d++]=-b,i[d++]=x-h*this._depth/this._segmentsD,i[d++]=-v,i[d++]=b,i[d++]=x-h*this._depth/this._segmentsD,D[f++]=1;for(h=0;h<this._segmentsD;++h)i[d++]=-v,i[d++]=-b,i[d++]=x-h*this._depth/this._segmentsD,i[d++]=v,i[d++]=-b,i[d++]=x-h*this._depth/this._segmentsD,D[f++]=1,i[d++]=-v,i[d++]=b,i[d++]=h*this._depth/this._segmentsD-x,i[d++]=v,i[d++]=b,i[d++]=h*this._depth/this._segmentsD-x,D[f++]=1;for(h=0;h<this._segmentsW;++h)i[d++]=v-h*this._width/this._segmentsW,i[d++]=-b,i[d++]=-x,i[d++]=v-h*this._width/this._segmentsW,i[d++]=-b,i[d++]=x,D[f++]=1,i[d++]=h*this._width/this._segmentsW-v,i[d++]=b,i[d++]=-x,i[d++]=h*this._width/this._segmentsW-v,i[d++]=b,i[d++]=x,D[f++]=1;w.setPositions(i),w.setThickness(D)}},e.prototype._pBuildUVs=function(t,e){var n,i,r,o,a,s,l,u,c,h,p,d,f,_,g,m;if(e==xo.TRIANGLE){m=2*((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1));var y=t;for(y.uvs&&m==y.numVertices?y.invalidateVertices(y.uvs):y.setUVs(new Float32Array(2*m)),o=y.uvs.get(m),a=y.uvs.stride,this._tile6?(s=u=1/3,l=c=.5):(s=l=1,u=c=0),r=0,h=1*u,p=1*c,d=2*u,f=0*c,_=s/this._segmentsW,g=l/this._segmentsH,n=0;n<=this._segmentsW;n++)for(i=0;i<=this._segmentsH;i++)o[r]=(h+n*_)*this._scaleU,o[r+1]=(p+(l-i*g))*this._scaleV,o[r+=a]=(d+(s-n*_))*this._scaleU,o[r+1]=(f+(l-i*g))*this._scaleV,r+=a;for(h=1*u,p=0*c,d=0*u,f=0*c,_=s/this._segmentsW,g=l/this._segmentsD,n=0;n<=this._segmentsW;n++)for(i=0;i<=this._segmentsD;i++)o[r]=(h+n*_)*this._scaleU,o[r+1]=(p+(l-i*g))*this._scaleV,o[r+=a]=(d+n*_)*this._scaleU,o[r+1]=(f+i*g)*this._scaleV,r+=a;for(h=0*u,p=1*c,d=2*u,f=1*c,_=s/this._segmentsD,g=l/this._segmentsH,n=0;n<=this._segmentsD;n++)for(i=0;i<=this._segmentsH;i++)o[r]=(h+n*_)*this._scaleU,o[r+1]=(p+(l-i*g))*this._scaleV,o[r+=a]=(d+(s-n*_))*this._scaleU,o[r+1]=(f+(l-i*g))*this._scaleV,r+=a}},e}(Xs),qs=function(t){function e(e,n,i,r,o,a){void 0===e&&(e=null),void 0===n&&(n="triangle"),void 0===i&&(i=50),void 0===r&&(r=16),void 0===o&&(o=12),void 0===a&&(a=!0);var s=t.call(this,e,n)||this;return s._radius=i,s._segmentsW=r,s._segmentsH=o,s._yUp=a,s}return o(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this._pInvalidatePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t,this._pInvalidatePrimitive(),this._pInvalidateUVs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t,this._pInvalidatePrimitive(),this._pInvalidateUVs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidatePrimitive()},enumerable:!1,configurable:!0}),e.prototype._pBuildGraphics=function(t,e){var n,i,r,o,a,s,l,u,c,h,p,d;if(e==xo.TRIANGLE){var f=t;(d=(this._segmentsH+1)*(this._segmentsW+1))==f.numVertices&&null!=f.indices?(f.invalidateIndices(),f.invalidateVertices(f.positions),f.invalidateVertices(f.normals),f.invalidateVertices(f.tangents)):(f.setIndices(new Uint16Array((this._segmentsH-1)*this._segmentsW*6)),f.setPositions(new Float32Array(3*d)),f.setNormals(new Float32Array(3*d)),f.setTangents(new Float32Array(3*d)),this._pInvalidateUVs()),n=f.indices.get(f.numElements),i=f.positions.get(d),r=f.normals.get(d),o=f.tangents.get(d),a=f.concatenatedBuffer.stride/4,u=0,c=0;var _=void 0,g=void 0,m=void 0;for(l=0;l<=this._segmentsH;++l){_=u;var y=Math.PI*l/this._segmentsH,A=-this._radius*Math.cos(y),v=this._radius*Math.sin(y);for(s=0;s<=this._segmentsW;++s){var b=2*Math.PI*s/this._segmentsW,x=v*Math.cos(b),C=v*Math.sin(b),I=1/Math.sqrt(x*x+C*C+A*A),E=Math.sqrt(C*C+x*x);if(this._yUp?(g=0,m=E>.007?x/E:0,h=-A,p=C):(g=E>.007?x/E:0,m=0,h=C,p=A),s==this._segmentsW?(i[u]=i[_],i[u+1]=i[_+1],i[u+2]=i[_+2],r[u]=r[_]+x*I*.5,r[u+1]=r[_+1]+h*I*.5,r[u+2]=r[_+2]+p*I*.5,o[u]=E>.007?-C/E:1,o[u+1]=g,o[u+2]=m):(i[u]=x,i[u+1]=h,i[u+2]=p,r[u]=x*I,r[u+1]=h*I,r[u+2]=p*I,o[u]=E>.007?-C/E:1,o[u+1]=g,o[u+2]=m),s>0&&l>0){var w=(this._segmentsW+1)*l+s,S=(this._segmentsW+1)*l+s-1,D=(this._segmentsW+1)*(l-1)+s-1,T=(this._segmentsW+1)*(l-1)+s;l==this._segmentsH?(i[u]=i[_],i[u+1]=i[_+1],i[u+2]=i[_+2],n[c++]=w,n[c++]=D,n[c++]=T):1==l?(n[c++]=w,n[c++]=S,n[c++]=D):(n[c++]=w,n[c++]=S,n[c++]=D,n[c++]=w,n[c++]=D,n[c++]=T)}u+=a}}}else if(e==xo.LINE){var P=t,B=this._segmentsH*this._segmentsW*2+this._segmentsW,O=new Float32Array(6*B),M=new Float32Array(B);for(u=0,c=0,l=0;l<=this._segmentsH;++l){y=Math.PI*l/this._segmentsH,A=-this._radius*Math.cos(y),v=this._radius*Math.sin(y);for(s=0;s<=this._segmentsW;++s){b=2*Math.PI*s/this._segmentsW,x=v*Math.cos(b),C=v*Math.sin(b);if(this._yUp?(h=-A,p=C):(h=C,p=A),s>0&&(O[u++]=x,O[u++]=h,O[u++]=p,M[c++]=1,l>0)){var L=1==l?3-(6*(this._segmentsW-s)+12*s):3-12*this._segmentsW;O[u]=O[u+++L],O[u]=O[u+++L],O[u]=O[u+++L],O[u++]=x,O[u++]=h,O[u++]=p,M[c++]=1}s<this._segmentsW&&(O[u++]=x,O[u++]=h,O[u++]=p)}}P.setPositions(O),P.setThickness(M)}},e.prototype._pBuildUVs=function(t,e){var n,i,r,o,a=(this._segmentsH+1)*(this._segmentsW+1);if(e==xo.TRIANGLE){a=(this._segmentsH+1)*(this._segmentsW+1);var s=t;s.uvs&&a==s.numVertices?s.invalidateVertices(s.uvs):s.setUVs(new Float32Array(2*a)),r=s.uvs.get(a),o=s.uvs.stride;var l=0;for(i=0;i<=this._segmentsH;++i)for(n=0;n<=this._segmentsW;++n)r[l]=n/this._segmentsW*this._scaleU,r[l+1]=i/this._segmentsH*this._scaleV,l+=o}},e}(Xs),Ks=Tt.instance.addStore("scene",{ALLOW_FORCE_MSAA:8,MSAA_MINIMAL_IMAGE_SIZE:300,ALLOW_APPROXIMATION:0,USE_UNSAFE_CACHE_AS_BITMAP:!1,USE_UNSAFE_SCALE_9_SLICE:!1,USE_UNSAFE_FILTERS:!1,USE_UNSAFE_BLENDS:!1,REMAP_BLEND_MODE:!0,BLEND_MODE_REMAP_TABLE:(Hs={},Hs[ze.DARKEN]=ze.MULTIPLY,Hs),CPU_COPY_PIXELS_COUNT:4096,FONT_TESSELATION_QUALITY:.1,USE_UNSAFE_FNT:!1,TEXT_SHAPE_ROUND_PRECISION:.1}),Ws=function(t){function e(){var e=t.call(this)||this;return e._mouseChildren=!0,e._sessionID=-1,e._avmDepthID=-1,e._alignmentMode=nr.REGISTRATION_POINT,e._visible=!0,e._maskId=-1,e._mouseEnabled=!0,e._maskMode=!1,e.isSlice9ScaledMC=!1,e.isSlice9ScaledSprite=!1,e.isAVMScene=!1,e.placeObjectTag=null,e._blendMode=ze.LAYER,e.castsShadows=!0,e._filters=null,e.orientationMode=er.DEFAULT,e.zOffset=0,e.hasDispatchedAddedToStage=!1,e.cursorType="",e._isInFocus=!1,e._tabEnabled=!1,e._tabIndex=-1,e._avmDepthID=-1,e._onInvalidatePropertiesDelegate=function(t){return e._onInvalidateProperties(t)},e._onInvalidateImagesDelegate=function(t){return e._onInvalidateImages(t)},e._transform=new V(null),e._transform.addEventListener(P.INVALIDATE_MATRIX3D,(function(t){return e._invalidateHierarchicalProperty(tr.SCENE_TRANSFORM)})),e._transform.addEventListener(P.INVALIDATE_COLOR_TRANSFORM,(function(t){return e._invalidateHierarchicalProperty(tr.COLOR_TRANSFORM)})),e._defaultBoundingVolume=e._getDefaultBoundingVolume(),e}return o(e,t),e.prototype.getScriptPrecedence=function(){if(!this._parent)return[];var t=this._parent.getScriptPrecedence();return this.placeObjectTag&&t.push(this.placeObjectTag.actionBlocksPrecedence),t},e.prototype.getMouseCursor=function(){return"initial"},Object.defineProperty(e.prototype,"tabEnabled",{get:function(){return this._tabEnabled},set:function(t){this._tabEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{get:function(){return this._tabIndex},set:function(t){this._tabIndex=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInFocus",{get:function(){return this._isInFocus},set:function(t){this._isInFocus=t},enumerable:!1,configurable:!0}),e.prototype.setFocus=function(t,e,n){this._isInFocus!=t&&(this._isInFocus=t)},Object.defineProperty(e.prototype,"alignmentMode",{get:function(){return this._alignmentMode},set:function(t){this._alignmentMode!=t&&(this._alignmentMode=t,this._invalidateHierarchicalProperty(tr.SCENE_TRANSFORM))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._transform.colorTransform.alphaMultiplier},set:function(t){this._transform.colorTransform.alphaMultiplier=t,this._transform.invalidateColorTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return Ks.USE_UNSAFE_BLENDS?Ks.REMAP_BLEND_MODE&&Ks.BLEND_MODE_REMAP_TABLE[this._blendMode]||this._blendMode:""},set:function(t){this._blendMode!==t&&(this._blendMode=t,t===ze.OVERLAY&&this._transform.invalidateColorTransform())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultBoundingVolume",{get:function(){return this._defaultBoundingVolume},set:function(t){this._defaultBoundingVolume!=t&&(this._defaultBoundingVolume=t,this._boundsPrimitive&&(this._boundsPrimitive.dispose(),this._boundsPrimitive=null),this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cacheAsBitmap",{get:function(){return this._bitmapCache},set:function(t){t!==this._bitmapCache&&Ks.USE_UNSAFE_CACHE_AS_BITMAP&&(t&&console.warn("[@scene/DisplayObject] Unsafe cacheAsBitmap is enabled!You can disable it by `Settings.USE_UNSAFE_CACHE_AS_BITMAP = false`",this.id),this._bitmapCache=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eulers",{get:function(){return this._eulers||(this._eulers=new L),this._eulers.x=this.rotationX,this._eulers.y=this.rotationY,this._eulers.z=this.rotationZ,this._eulers},set:function(t){this._transform.rotation.x=t.x,this._transform.rotation.y=t.y,this._transform.rotation.z=t.z,this._transform.invalidateMatrix3D()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(t){Ks.USE_UNSAFE_FILTERS&&(this._filters=t,this._invalidateStyle())},enumerable:!1,configurable:!0}),e.prototype.updateFilters=function(t){console.warn("[scene/DisplayObject] - updateFilters is just a stub")},Object.defineProperty(e.prototype,"index",{get:function(){return this._parent?this._parent.getChildIndex(this):0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loader",{get:function(){return this._loader},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{set:function(t){this.scriptMask=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maskMode",{get:function(){return this._maskMode},set:function(t){this._maskMode!=t&&(this._maskMode=t,this._maskId=t?this.id:-1,this._updateMaskMode())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickObject",{get:function(){return this._pickObject},set:function(t){this._pickObject!=t&&(this._pickObject=t.pickObjectFromTimeline?t.clone():t,this._pickObject&&(this._pickObject.mouseChildren=!1,this._pickObject.mouseEnabled=!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled!=t&&(this._mouseEnabled=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._pName?this._pName:""},set:function(t){this._pName=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"registrationPoint",{get:function(){return this._registrationMatrix3D?new L(-this._registrationMatrix3D._rawData[12]*this.scaleX,-this._registrationMatrix3D._rawData[13]*this.scaleY,-this._registrationMatrix3D._rawData[14]*this.scaleZ):null},set:function(t){if(t)this._registrationMatrix3D||(this._registrationMatrix3D=new U),this._registrationMatrix3D._rawData[12]=-t.x/this._transform.scale.x,this._registrationMatrix3D._rawData[13]=-t.y/this._transform.scale.y,this._registrationMatrix3D._rawData[14]=-t.z/this._transform.scale.z;else{if(!this._registrationMatrix3D)return;this._registrationMatrix3D._rawData[12]=0,this._registrationMatrix3D._rawData[13]=0,this._registrationMatrix3D._rawData[14]=0,this._registrationMatrix3D.isIdentity()&&(this._registrationMatrix3D=null)}this._registrationMatrix3D.invalidatePosition(),this._invalidateHierarchicalProperty(tr.SCENE_TRANSFORM)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"registrationScale",{get:function(){return this._registrationMatrix3D?new L(this._registrationMatrix3D._rawData[0],this._registrationMatrix3D._rawData[5],this._registrationMatrix3D._rawData[10]):null},set:function(t){if(t)this._registrationMatrix3D||(this._registrationMatrix3D=new U),this._registrationMatrix3D._rawData[0]=t.x,this._registrationMatrix3D._rawData[5]=t.y,this._registrationMatrix3D._rawData[10]=t.z;else{if(!this._registrationMatrix3D)return;this._registrationMatrix3D._rawData[0]=1,this._registrationMatrix3D._rawData[5]=1,this._registrationMatrix3D._rawData[10]=1,this._registrationMatrix3D.isIdentity()&&(this._registrationMatrix3D=null)}this._invalidateHierarchicalProperty(tr.SCENE_TRANSFORM)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this._transform.rotation.x*N.RADIANS_TO_DEGREES},set:function(t){this.rotationX!=t&&(this._transform.rotation.x=t*N.DEGREES_TO_RADIANS,this._transform.invalidateMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{get:function(){return this._transform.rotation.y*N.RADIANS_TO_DEGREES},set:function(t){this.rotationY!=t&&(this._transform.rotation.y=t*N.DEGREES_TO_RADIANS,this._transform.invalidateMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this._transform.rotation.z*N.RADIANS_TO_DEGREES},set:function(t){this.rotationZ!=t&&(this._transform.rotation.z=t*N.DEGREES_TO_RADIANS,this._transform.invalidateMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale9Grid",{get:function(){return this._scale9Grid},set:function(t){this._scale9Grid=t,this._invalidateHierarchicalProperty(tr.SCALE9)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._transform.scale.x},set:function(t){this._setScaleX(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._transform.scale.y},set:function(t){this._setScaleY(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleZ",{get:function(){return this._transform.scale.z},set:function(t){this._setScaleZ(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skewX",{get:function(){return this._transform.skew.x},set:function(t){this.skewX!=t&&(this._transform.skew.x=t,this._transform.invalidateMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skewY",{get:function(){return this._transform.skew.y},set:function(t){this.skewY!=t&&(this._transform.skew.y=t,this._transform.invalidateMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skewZ",{get:function(){return this._transform.skew.z},set:function(t){this.skewZ!=t&&(this._transform.skew.z=t,this._transform.invalidateMatrix3D())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollRect",{get:function(){return this._scrollRect},set:function(t){if(this._scrollRect=t,!t&&this._scrollRectPrimitive){var e=this.masks.indexOf(this._scrollRectPrimitive);this.masks.splice(e,1),this._scrollRectPrimitive=null}this._transform.invalidatePosition(),this._scrollRectPrimitiveDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){this._material!=t&&(this._material=t,this._invalidateMaterial())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style!=t&&(this._style&&(this._style.removeEventListener(jr.INVALIDATE_PROPERTIES,this._onInvalidatePropertiesDelegate),this._style.removeEventListener(jr.INVALIDATE_IMAGES,this._onInvalidateImagesDelegate)),this._style=t,this._style&&(this._style.addEventListener(jr.INVALIDATE_PROPERTIES,this._onInvalidatePropertiesDelegate),this._style.addEventListener(jr.INVALIDATE_IMAGES,this._onInvalidateImagesDelegate)),this._invalidateStyle())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundsVisible",{get:function(){return this._boundsVisible},set:function(t){t!=this._boundsVisible&&(this._boundsVisible=t,this.invalidate())},enumerable:!1,configurable:!0}),e.prototype.getScrollRectPrimitive=function(){return this._scrollRectPrimitiveDirty&&(this._scrollRectPrimitiveDirty=!1,this._scrollRectPrimitive||(this._scrollRectPrimitive=new Zs,this._scrollRectPrimitive.maskMode=!0,this.masks||(this.masks=[]),this.masks.push(this._scrollRectPrimitive)),this._scrollRectPrimitive.graphics.clear(),this._scrollRectPrimitive.graphics.beginFill(255,1),this._scrollRectPrimitive.graphics.drawRect(0,0,this._scrollRect.width,this._scrollRect.height),this._scrollRectPrimitive.graphics.endFill()),this._scrollRectPrimitive},e.prototype.getBoundsPrimitive=function(t){if(null==this._boundsPrimitive){switch(this._defaultBoundingVolume){case Ki.BOX:case Ki.BOX_BOUNDS:case Ki.BOX_BOUNDS_FAST:case Ki.BOX_FAST:this._boundsPrefab=new Ys(null,xo.LINE),this._boundsPrimitive=this._boundsPrefab.getNewObject();break;case Ki.SPHERE:case Ki.SPHERE_BOUNDS:case Ki.SPHERE_BOUNDS_FAST:case Ki.SPHERE_FAST:this._boundsPrefab=new qs(null,xo.LINE),this._boundsPrimitive=this._boundsPrefab.getNewObject()}this._boundsPrefabDirty=!0}return this._boundsPrefabDirty&&this._updateBoundsPrefab(t),this._boundsPrimitive},Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!=t&&(this._visible=t,this._invalidateHierarchicalProperty(tr.VISIBLE))},enumerable:!1,configurable:!0}),e.prototype._mergeMasks=function(t,e){if(t||e)return!t&&e?[e]:(e&&!t.includes(e)&&t.push(e),t)},e.prototype._setMasks=function(t){var e=this._masks?this._masks:[];if(t)for(var n=t.length-1;n>=0;n--){var i=t[n];if(i){var r=e.indexOf(i);-1!=r?e.splice(r,1):i.maskMode=!0}else console.warn("[DisplayObject] Timeline mask has null value, skipping it"),t.splice(n,1)}for(n=e.length-1;n>=0;n--)e[n].maskMode=!1;this._masks=t},Object.defineProperty(e.prototype,"scriptMask",{get:function(){return this._scriptMask},set:function(t){if(t!==this._scriptMask){if(this._scriptMask){var e=this._masks.indexOf(this._scriptMask);-1!==e&&(this._masks.splice(e,1),this._scriptMask.maskMode=!1)}this._scriptMask=t,this._masks=this._mergeMasks(this._masks,t),t&&(t.maskMode=!0),this._invalidateHierarchicalProperty(tr.MASKS)}},enumerable:!1,configurable:!0}),e.prototype.updateTimelineMask=function(t){this._setMasks(this._mergeMasks(t,this._scriptMask)),this._invalidateHierarchicalProperty(tr.MASKS)},Object.defineProperty(e.prototype,"masks",{get:function(){return this._masks},set:function(t){if(this._masks!=t){if(t&&t.length){for(var e=t.length,n=!1,i=0;i<e;i++)n=n||t[i]===this._scriptMask;this._scriptMask&&!n&&(this._scriptMask=null)}else this._scriptMask=null;this._setMasks(t),this._invalidateHierarchicalProperty(tr.MASKS)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseChildren",{get:function(){return this._mouseChildren},set:function(t){this._mouseChildren!=t&&(this._mouseChildren=t,this._invalidateHierarchicalProperty(tr.MOUSE_ENABLED))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._transform.position.x},set:function(t){this._transform.position.x!=t&&(this._transform.matrix3D._rawData[12]=t,this._transform.invalidatePosition())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._transform.position.y},set:function(t){this._transform.position.y!=t&&(this._transform.matrix3D._rawData[13]=t,this._transform.invalidatePosition())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._transform.position.z},set:function(t){this._transform.position.z!=t&&(this._transform.matrix3D._rawData[14]=t,this._transform.invalidatePosition())},enumerable:!1,configurable:!0}),e.prototype.advanceFrame=function(){},e.prototype.getEntity=function(){},e.prototype._initNode=function(t){},e.prototype.clone=function(){var t=new e;return this.copyTo(t),t},e.prototype.copyTo=function(t){var e;t.defaultBoundingVolume=this._defaultBoundingVolume,this._registrationMatrix3D&&(t._registrationMatrix3D=this._registrationMatrix3D.clone()),t.mouseChildren=this._mouseChildren,t.material=this._material,t.style=this._style,t.pickObject=this._pickObject,t.pickObjectFromTimeline=this.pickObjectFromTimeline,t.boundsVisible=this._boundsVisible,t.name=this._pName,t.mouseEnabled=this._mouseEnabled,t.extra=this.extra,t.maskMode=this._maskMode,t.castsShadows=this.castsShadows,t.assetNamespace=this.assetNamespace,t._symbol=this._symbol,t.avm1Symbol=this.avm1Symbol,t.isAVMScene=this.isAVMScene,t.isSlice9ScaledMC=this.isSlice9ScaledMC,t.scale9Grid=null===(e=this.scale9Grid)||void 0===e?void 0:e.clone(),this._masks&&(t._masks=this._masks.slice(),t._scriptMask=this._scriptMask,t._invalidateHierarchicalProperty(tr.MASKS)),this._transform.copyRawDataTo(t._transform)},e.prototype.dispose=function(){this.disposeValues()},e.prototype.disposeValues=function(){this._parent&&this._parent.removeChild(this),this.material=null,this._adapter&&(this._adapter.dispose(),this._adapter=null),this._pickObject=null,this._masks=null,this._scriptMask=null},e.prototype.lookAt=function(t,e){void 0===e&&(e=null),this.transform.lookAt(t,e)},e.prototype.movePivot=function(t,e,n){0==t&&0==e&&0==n||(this._registrationMatrix3D||(this._registrationMatrix3D=new U),this._registrationMatrix3D._rawData[12]-=t/this._transform.scale.x,this._registrationMatrix3D._rawData[13]-=e/this._transform.scale.y,this._registrationMatrix3D._rawData[14]-=n/this._transform.scale.z,this._invalidateHierarchicalProperty(tr.SCENE_TRANSFORM))},e.prototype.reset=function(){this.visible=!0,this.noTimelineUpdate||this._transform.clearMatrix3D(),this._transform.clearColorTransform(),this.masks=null,this.maskMode=!1},e.prototype.isOnDisplayList=function(){for(var t=this;t;){if(t.isAVMScene)return!0;t=t.parent}return!1},e.prototype._setParent=function(t){this._parent=t},e.prototype._invalidateHierarchicalProperty=function(t){this.dispatchEvent(new fr(fr.INVALIDATE_PROPERTY,t))},e.prototype._iInternalUpdate=function(){this._iController&&this._iController.update()},Object.defineProperty(e.prototype,"maskId",{get:function(){return this._maskId},enumerable:!1,configurable:!0}),e.prototype._setScaleX=function(t){this.scaleX!=t&&(this._transform.scale.x=t,this._transform.invalidateMatrix3D())},e.prototype._setScaleY=function(t){this.scaleY!=t&&(this._transform.scale.y=t,this._transform.invalidateMatrix3D())},e.prototype._setScaleZ=function(t){this.scaleZ!=t&&(this._transform.scale.z=t,this._transform.invalidateMatrix3D())},e.prototype._updateBoundsPrefab=function(t){if(this._boundsPrefab instanceof Ys){var e=t.getBoundingVolume(null,this._defaultBoundingVolume).getBox();if(null==e)return;this._boundsPrefab.width=e.width,this._boundsPrefab.height=e.height,this._boundsPrefab.depth=e.depth,this._boundsPrimitive.registrationPoint=new L(-(e.x+e.width/2)*this._boundsPrimitive.transform.scale.x,-(e.y+e.height/2)*this._boundsPrimitive.transform.scale.y,-(e.z+e.depth/2)*this._boundsPrimitive.transform.scale.z)}else if(this._boundsPrefab instanceof qs){var n=t.getBoundingVolume(null,this._defaultBoundingVolume).getSphere();if(null==n)return;this._boundsPrefab.radius=n.radius,this._boundsPrimitive.registrationPoint=new L(-n.x*this._boundsPrimitive.transform.scale.x,-n.y*this._boundsPrimitive.transform.scale.y,-n.z*this._boundsPrimitive.transform.scale.z)}},e.prototype._updateMaskMode=function(){this._maskMode&&(this._mouseEnabled=!1,this.partitionClass=yr),this._invalidateHierarchicalProperty(tr.MASK_ID)},e.prototype._invalidateMaterial=function(){this.dispatchEvent(new Lr(Lr.INVALIDATE_MATERIAL,this))},e.prototype._invalidateStyle=function(){this.dispatchEvent(new Lr(Lr.INVALIDATE_STYLE,this))},e.prototype.invalidateElements=function(){this.dispatchEvent(new Lr(Lr.INVALIDATE_ELEMENTS,this))},e.prototype._onInvalidateProperties=function(t){this._invalidateStyle()},e.prototype._onInvalidateImages=function(t){this.invalidate()},e.prototype._getDefaultBoundingVolume=function(){return Ki.BOX_BOUNDS_FAST},e}(_),Js=function(t){function e(){var e=t.call(this)||this;return e._children=new Array,e.doingSwap=!1,e.tabChildren=!1,e}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},set:function(t){this._animator&&this._animator.removeOwner(this),this._animator=t,this._animator&&this._animator.addOwner(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!1,configurable:!0}),e.prototype.advanceFrame=function(){for(var t=0;t<this._children.length;t++)this._children[t].advanceFrame()},e.prototype.addChild=function(t){return this.addChildAt(t,this._children.length)},e.prototype.addChildAt=function(t,e){return t.parent&&t.parent.removeChild(t),this._children.splice(e,0,t),t._setParent(this),this.dispatchEvent(new dr(dr.ADD_CHILD_AT,t,e)),t},e.prototype.addChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,i=0;i<n;i++)this.addChild(t[i])},e.prototype.clone=function(){var t=new e;return this.copyTo(t),t},e.prototype.copyTo=function(e){t.prototype.copyTo.call(this,e),this._animator&&(e.animator=this._animator.clone());for(var n=this._children.length,i=0;i<n;++i){var r=this._children[i].adapter.clone().adaptee;e.addChild(r)}},e.prototype.contains=function(t){return this._children.indexOf(t)>=0},e.prototype.disposeValues=function(){this._animator&&this._animator.dispose();for(var e=this._children.length-1;e>=0;e--)this.removeChild(this._children[e]);t.prototype.disposeValues.call(this)},e.prototype.getChildAt=function(t){var e=this._children[t];if(null==e)throw new G("Index does not exist in the child list of the caller");return e},e.prototype.getChildByName=function(t){for(var e=this._children.length,n=0;n<e;++n)if(this._children[n].name==t)return this._children[n];return null},e.prototype.getChildIndex=function(t){var n=this._children.indexOf(t);if(-1==n)throw e.NO_CHILD_ERROR;return n},e.prototype.getObjectsUnderPoint=function(t){return new Array},e.prototype.removeChild=function(t){if(null==t)throw new B("Parameter child cannot be null");return this.removeChildAt(this.getChildIndex(t)),t},e.prototype.removeChildAt=function(t){return this.removeChildAtInternal(t)},e.prototype.removeChildren=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=2147483647),t<0)throw new G("beginIndex is out of range of the child list");if(e>this._children.length)throw new G("endIndex is out of range of the child list");for(var n=e-1;n>=t;n--)this.removeChildAtInternal(n)},e.prototype.setChildIndex=function(t,e){var n=this.getChildIndex(t);if(n<0)throw new B("Parameter child must be child of this object");if(e>this._children.length-1)throw new G("Parameter index is out of range of the child list");n!=e&&(this.removeChildAt(n),this.addChildAt(t,e),t._sessionID>=0&&this._sessionID_childs&&(delete this._sessionID_childs[t._sessionID],t._sessionID=-1))},e.prototype.swapChildren=function(t,e){t.parent==this&&e.parent==this&&this.swapChildrenAt(this.getChildIndex(t),this.getChildIndex(e))},e.prototype.swapChildrenAt=function(t,e){if(t!=e){if(t>=this._children.length||e>=this._children.length)throw"[scene/DisplayobjectContainer] - swapChildrenAt - Range Error";var n,i;t<e?(i=this.removeChildAt(e),n=this.removeChildAt(t),this.addChildAt(i,t),this.addChildAt(n,e)):(n=this.removeChildAt(t),i=this.removeChildAt(e),this.addChildAt(n,e),this.addChildAt(i,t)),this._sessionID_childs&&(this._children[t]._sessionID>=0&&(delete this._sessionID_childs[this._children[t]._sessionID],this._children[t]._sessionID,this._children[t]._avmDepthID),this._children[e]._sessionID>=0&&(delete this._sessionID_childs[this._children[e]._sessionID],this._children[e]._sessionID,this._children[t]._avmDepthID))}},e.prototype._initNode=function(t){for(var e=0;e<this._children.length;++e)t.addChildAt(this._children[e],e)},e.prototype.removeChildAtInternal=function(t){var e=this._children.splice(t,1)[0];return e._setParent(null),this.dispatchEvent(new dr(dr.REMOVE_CHILD_AT,e,t)),e},e.prototype._updateMaskMode=function(){this.maskMode&&(this.mouseChildren=!1),t.prototype._updateMaskMode.call(this)},e.assetType="[asset DisplayObjectContainer]",e.NO_CHILD_ERROR=new B("Child parameter is not a child of the caller"),e}(Ws);mr.registerAbstraction(Ar,Js);var Zs=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=t.call(this)||this;return i.graphics=e,i.material=n,i}return o(e,t),e.getNewSprite=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),e._sprites.length){var i=e._sprites.pop();return i.graphics=t,i.material=n,i}return new e(t,n)},e.clearPool=function(){e._sprites=[]},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"graphics",{get:function(){return this._graphics||(this.graphics=zs.getGraphics(),this.invalidate()),this._graphics},set:function(t){this._graphics!=t&&(this._graphics&&this._graphics.usages--,this._graphics=t,this._graphics&&this._graphics.usages++,this.invalidate())},enumerable:!1,configurable:!0}),e.prototype.getEntity=function(){return this._graphics},e.prototype.dispose=function(){this.disposeValues(),e._sprites.push(this)},e.prototype.disposeValues=function(){t.prototype.disposeValues.call(this)},e.prototype.clone=function(){var t=e.getNewSprite();return this.copyTo(t),t},e.prototype.copyTo=function(e,n){void 0===n&&(n=!1),t.prototype.copyTo.call(this,e),e._iSourcePrefab=this._iSourcePrefab,this._graphics&&this._graphics.copyTo(e.graphics,n)},e.prototype._iInternalUpdate=function(){t.prototype._iInternalUpdate.call(this),this._iSourcePrefab&&this._iSourcePrefab._iValidate()},e.prototype.bakeTransformations=function(){this._graphics.applyTransformation(this.transform.matrix3D),this.transform.clearMatrix3D()},e._sprites=new Array,e.assetType="[asset Sprite]",e}(Js);mr.registerAbstraction(Ar,Zs);var $s=Object.create(null);function tl(t,e){void 0===e&&(e="");var n=$s[t._id+e];return $s[t._id+e]=!0,n||console.warn("[MorphSprite] - id",t.id,e,t),!n}var el,nl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._frameCaches={},e}return o(e,t),e.getNewMorphSprite=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),e._morphSprites.length){var i=e._morphSprites.pop();return i.graphics=t||zs.getGraphics(),i.material=n,i}return new e(t,n)},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.reset=function(){t.prototype.reset.call(this),this.setRatio(0)},e.prototype._blendStyle=function(t,e,n,i){var r,o,a,s=1-i,l=i,u=t.style.fillStyle,c=e.style.fillStyle;if(t.style.data_type!=e.style.data_type)throw"Error in morph data - different styles of pathes";switch(u.data_type){case Za.data_type:var h=c;o=s*(v=u).alpha+l*h.alpha,r=D.interpolateFloat32Color(v.color,h.color,i),a=new Za(r,o);break;case Wa.data_type:for(var p=[],d=[],f=[],_=(h=c,(v=u).colors.length),g=0;g<_;g++)p[p.length]=D.interpolateFloat32Color(v.colors[g],h.colors[g],i),f[f.length]=s*v.alphas[g]+l*h.alphas[g],d[d.length]=s*v.ratios[g]+l*h.ratios[g];var m=v.matrix,y=h.matrix;(A=new M).a=m.a*s+y.a*l,A.b=m.b*s+y.b*l,A.c=m.c*s+y.c*l,A.d=m.d*s+y.d*l,A.tx=m.tx*s+y.tx*l,A.ty=m.ty*s+y.ty*l,a=new Wa(v.type,p,f,d,A,v.spreadMethod,v.interpolationMethod,v.focalPointRatio);break;case Ja.data_type:var A;h=c,m=(v=u).matrix,y=h.matrix;(A=new M).a=m.a*s+y.a*l,A.b=m.b*s+y.b*l,A.c=m.c*s+y.c*l,A.d=m.d*s+y.d*l,A.tx=m.tx*s+y.tx*l,A.ty=m.ty*s+y.ty*l,a=new Ja(v.material,A,v.repeat,v.smooth)}if(t.style.data_type===es.data_type){var v=t.style,b=(h=e.style,s*v.thickness+l*h.thickness);n.style=new es(a,b,v.jointstyle,v.capstyle,v.miterLimit,v.scaleMode)}else n.style=new Ka(a)},e.prototype._blendContours=function(t,e,n,i){var r=1-i,o=i,a=t._commands.length;if(e._commands.length!==a)throw"Error in morph data - different number of contour";for(var s=0;s<a;s++){var l=t._commands[s],u=t._data[s],c=e._commands[s],h=e._data[s],p=0,d=0,f=0,_=0,g=0,m=0,y=l.length;if(c.length!=y)return y=Math.min(c.length,y),void tl(this,"different number of commands in contour");for(var A=0;A<y;A++)switch(l[A]){case Rs.MOVE_TO:if(c[A]!=Rs.MOVE_TO)throw"Error in morph data - both shapes must start with Move too command";f=u[p++],_=u[p++],g=h[d++],m=h[d++],n.moveTo(r*f+o*g,r*_+o*m);break;case Rs.LINE_TO:if(c[A]==Rs.LINE_TO)f=u[p++],_=u[p++],g=h[d++],m=h[d++],n.lineTo(r*f+o*g,r*_+o*m);else if(c[A]==Rs.CURVE_TO){var v=f+(u[p++]-f)/2,b=_+(u[p++]-_)/2;n.curveTo(r*v+o*h[d++],r*b+o*h[d++],r*u[p-2]+o*h[d++],r*u[p-1]+o*h[d++]),f=u[p-2],_=u[p-1],g=h[d-2],m=h[d-1]}break;case Rs.CURVE_TO:if(c[A]==Rs.LINE_TO){v=g+(h[d++]-g)/2,b=m+(h[d++]-m)/2;n.curveTo(r*u[p++]+o*v,r*u[p++]+o*b,r*u[p++]+o*h[d-2],r*u[p++]+o*h[d-1]),f=u[p-2],_=u[p-1],g=h[d-2],m=h[d-1]}else c[A]==Rs.CURVE_TO&&(n.curveTo(r*u[p++]+o*h[d++],r*u[p++]+o*h[d++],r*u[p++]+o*h[d++],r*u[p++]+o*h[d++]),f=u[p-2],_=u[p-1],g=h[d-2],m=h[d-1])}}},e.prototype.setRatio=function(t){var e=65535*t|0,n=this._graphics;if(this._ratio!==e){if(this._ratio=e,n.buildQueueTags?n.buildQueueTags(!0):(n.endFill(),n.clear()),n.start.length!==n.end.length)throw"Error in morph data - different number of pathes";for(var i=n.start.length,r=0;r<i;r++){var o=new ks,a=n.start[r],s=n.end[r];this._blendStyle(a,s,o,t),this._blendContours(a,s,o,t),n.add_queued_path(o)}n._endFillInternal(!0)}},e.prototype.dispose=function(){this.disposeValues(),this._frameCaches={},e._morphSprites.push(this)},e.prototype.clone=function(){var t=e.getNewMorphSprite();return this.copyTo(t),t},e.assetType="[asset MorphSprite]",e._morphSprites=new Array,e}(Zs),il=["",ze.NORMAL,ze.LAYER,ze.MULTIPLY,ze.SCREEN,ze.LIGHTEN,ze.DARKEN,ze.DIFFERENCE,ze.ADD,ze.SUBTRACT,ze.INVERT,ze.ALPHA,ze.ERASE,ze.OVERLAY,ze.HARDLIGHT];var rl=function(){function t(t){this.factory=t,this._update_indices=[],this._update_frames=[],this.isButton=!1,this._initalMcID=-1,this.numKeyFrames=0,this.keyframe_indices=[],this.avm1Exports={},this.avm1InitActions={},this.avm1ButtonActions=[],this.graphicsPool={},this.audioPool={},this.placeObjectTagsForSessionIDs={},this._labels={},this._framescripts={},this._framescripts_translated={},this.keyframe_to_frameidx={}}return t.prototype.resetScripts=function(){this._framescripts={},this._framescripts_translated={}},t.prototype.init=function(){if(null!=this.frame_command_indices&&null!=this.frame_recipe&&null!=this.keyframe_durations){var t=0,e=0,n=0,i=0,r=0,o=0;this.keyframe_firstframes=[],this.keyframe_constructframes=[],this.keyframe_indices=[],this.keyframe_to_frameidx={},this.keyframe_to_frameidx[0]=0;var a=0;for(e=0;e<this.numKeyFrames;e++)for(this.keyframe_to_frameidx[e]=a,a+=i=this.keyframe_durations[e],1&this.frame_recipe[e]&&(o=r),this.keyframe_firstframes[r]=t,this.keyframe_constructframes[r++]=o,n=0;n<i;n++)this.keyframe_indices[t++]=e}},t.prototype.get_framescript=function(t){if(null==this._framescripts[t])return"";if("string"==typeof this._framescripts[t])return this._framescripts[t];throw new Error("Framescript is already translated to Function!!!")},t.prototype.add_framescript=function(t,e,n,i){if(void 0===i&&(i=!1),!(this._initalMcID>=0&&n.id!=this._initalMcID)){if(this._initalMcID=n.id,this._framescripts[e]||(this._framescripts[e]=[]),Array.isArray(t))for(var r=0;r<t.length;r++)this._framescripts[e][this._framescripts[e].length]=t[r];else this._framescripts[e].push(t);this._framescripts_translated[e]=!i}},t.prototype.get_script_for_frame=function(t,e,n){if(void 0===n&&(n=!1),e>=0&&this._framescripts[e]){if(n&&!this._framescripts_translated[e]){var i=t.className?t.className:t.name;this._framescripts[e]=this.factory.createFrameScripts(this._framescripts[e],e,i,t.id),this._framescripts_translated[e]=!0}return this._framescripts[e]}return null},Object.defineProperty(t.prototype,"numFrames",{get:function(){return this.keyframe_indices.length},enumerable:!1,configurable:!0}),t.prototype.getKeyframeIndexForFrameIndex=function(t){return this.keyframe_indices[t]},t.prototype.getChildInstance=function(t,e){return this.factory.createChildInstanceForTimeline(this,t,e)},t.prototype.extractHitArea=function(t){t.reset(!1),this.gotoFrame(t,this.numFrames-1,!1);for(var e,n,i=t.numChildren,r=new Js;i>0;)i--,(e=(n=t.getChildAt(i)).clone()).x=n.x,e.scaleX=n.scaleX,e.y=n.y,e.scaleY=n.scaleY,e.rotationZ=n.rotationZ,r.addChild(e);return r.pickObjectFromTimeline=!0,t.pickObject=r,t.reset(!1),r},t.prototype.getCurrentFrameLabel=function(t){var e=this.keyframe_to_frameidx[t.constructedKeyFrameIndex];for(var n in this._labels)if(this._labels[n].keyFrameIndex==t.constructedKeyFrameIndex&&e==t.currentFrameIndex)return this._labels[n].name;return null},t.prototype.getCurrentLabel=function(t){var e=null,n=-1;for(var i in this._labels){var r=this._labels[i].keyFrameIndex;r>n&&r<=t.constructedKeyFrameIndex&&(n=r,e=this._labels[i].name)}return e},t.prototype.jumpToLabel=function(t,e,n){if(void 0===n&&(n=0),this._labels[e]){var i=this._labels[e].keyFrameIndex;i>=0&&(t.currentFrameIndex=this.keyframe_firstframes[i]+n)}else console.warn("[TIMELINE] - jumpToLabel with invalid label",t,e,n)},t.prototype.getScriptForLabel=function(t,e,n){void 0===n&&(n=!1);var i=this._labels[e.toLowerCase()].keyFrameIndex;if(i<0)return null;var r=this.keyframe_firstframes[i];return r>=0&&this._framescripts[r]?this.get_script_for_frame(t,r,n):null},t.prototype.gotoFrame=function(t,e,n,i,r){void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===r&&(r=!1);var o=t.constructedKeyFrameIndex,a=this.keyframe_indices[e];if(o!=a||r)if(o+1!=a){var s=this.keyframe_constructframes[a],l=s,u=a>o;u&&o>s&&(l=o+1),t.adapter.constructFrame(this,l,a,u,e,i,n),this.applyCollectedUpdateCommands(t),t.constructedKeyFrameIndex=a}else this.constructNextFrame(t,n,!0);else t.adapter.queueFrameScripts(this,e,n)},t.prototype.applyCollectedUpdateCommands=function(t){var e,n=this._update_indices.length;for(e=0;e<n;e++)this.update_childs(t,this._update_indices[e],this._update_frames[e])},t.prototype.constructNextFrame=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1);var i=t.currentFrameIndex,r=this.keyframe_indices[i];if(e&&t.adapter.queueFrameScripts(this,i,n),t.constructedKeyFrameIndex!=r){t.constructedKeyFrameIndex=r;var o=this.frame_command_indices[r],a=this.frame_recipe[r];1&a?t.adapter.removeAllTimelineChilds():2&a&&this.remove_childs_continous(t,o++),4&a&&this.add_childs_continous(t,o++),8&a&&this.update_childs(t,o++),16&a&&this.start_sounds(t,o++)}},t.prototype.remove_childs_continous=function(t,e){for(var n=this.command_index_stream[e],i=n+this.command_length_stream[e],r=n;r<i;r++)t.adapter.removeTimelineChildAt(this.remove_child_stream[r])},t.prototype.add_childs_continous=function(t,e){for(var n,i=this.command_index_stream[e],r=i+this.command_length_stream[e],o=i;o<r;o++)if(n=3*o,void 0!==this.add_child_stream[n]){var a=this.factory.createChildInstanceForTimeline(this,this.add_child_stream[n+2],this.add_child_stream[n]);t.adapter.addTimelineChildAtDepth(a,this.add_child_stream[n+1])}else console.warn("[Timeline] - add_childs_continous - could not find child-id in child_stream for idx",n,this.add_child_stream)},t.prototype.start_sounds=function(t,e){for(var n=this.command_index_stream[e],i=n+this.command_length_stream[e],r=n;r<i;r++){var o=this.audioPool[this.add_sounds_stream[r]];if(o){var a=o.sound;if(!a)return void console.warn("[Timeline] Missing sound in audioProps!",o);15==o.cmd?t.startSound(a,o.props.loopCount||0):16==o.cmd&&t.stopSound(a)}}},t.prototype.update_childs=function(e,n,i){for(var r=this.command_index_stream[n],o=r+this.command_length_stream[n],a=r;a<o;a++){var s=e.getTimelineChildAtSessionID(this.update_child_stream[a]);if(s){this._blocked=!(!s._adapter||!s.adapter.isBlockedByScript());for(var l=this.update_child_props_indices_stream[a],u=l+this.update_child_props_length_stream[a],c=l;c<u;c++)t.applyFunctionMap[this.property_type_stream[c]](this,s,e,this.property_index_stream[c])}}},t.update_mtx_all=function(t,e,n,i){if(!t._blocked&&!e.noTimelineUpdate){i*=6;var r=e.transform.matrix3D,o=t.properties_stream_f32_mtx_all;r._rawData[0]=o[i++],r._rawData[1]=o[i++],r._rawData[4]=o[i++],r._rawData[5]=o[i++],r._rawData[12]=o[i++],r._rawData[13]=o[i],e.transform.invalidateComponents()}},t.update_colortransform=function(t,e,n,i){if(!e._adapter||!e.adapter.isColorTransformByScript()){i*=8;var r=t.properties_stream_f32_ct,o=e.transform.colorTransform||(e.transform.colorTransform=new T);o._rawData[0]=r[i++],o._rawData[1]=r[i++],o._rawData[2]=r[i++],o._rawData[3]=r[i++],o._rawData[4]=r[i++],o._rawData[5]=r[i++],o._rawData[6]=r[i++],o._rawData[7]=r[i],e.transform.invalidateColorTransform()}},t.update_masks=function(t,e,n,i){var r=[],o=t.properties_stream_int[i++];if(0!==o){for(var a=0;a<o;a++)r.push(n.getTimelineChildAtSessionID(t.properties_stream_int[i+a]));e.updateTimelineMask(r)}else e.updateTimelineMask(null)},t.update_name=function(t,e,n,i){0!=t.properties_stream_strings[i].indexOf("instance")&&(n.adapter.unregisterScriptObject(e),e.name=t.properties_stream_strings[i],n.adapter.registerScriptObject(e))},t.update_button_name=function(t,e,n,i){e.name=t.properties_stream_strings[i],e.addButtonListeners(),n.adapter.registerScriptObject(e)},t.update_visibility=function(t,e,n,i){e._adapter&&e.adapter.isVisibilityByScript()||(e.visible=!!i)},t.update_mtx_scale_rot=function(t,e,n,i){if(!t._blocked&&!e.noTimelineUpdate){i*=4;var r=e.transform.matrix3D,o=t.properties_stream_f32_mtx_scale_rot;r._rawData[0]=o[i++],r._rawData[1]=o[i++],r._rawData[4]=o[i++],r._rawData[5]=o[i],e.transform.invalidateComponents(),e._invalidateHierarchicalProperty(tr.SCENE_TRANSFORM)}},t.update_mtx_pos=function(t,e,n,i){if(!t._blocked&&!e.noTimelineUpdate){i*=2;var r=e.transform.matrix3D;r._rawData[12]=t.properties_stream_f32_mtx_pos[i++],r._rawData[13]=t.properties_stream_f32_mtx_pos[i],e.transform.invalidatePosition()}},t.enable_maskmode=function(t,e,n,i){e.maskMode=!0},t.remove_masks=function(t,e,n,i){e.updateTimelineMask(null)},t.update_filters=function(t,e,n,i){var r=t.properties_stream_int[i++],o=t.properties_stream_int[i++],a=e.adapter;0!==o?a.updateFilters(t.properties_stream_filters.slice(r,r+o)):a.updateFilters(null)},t.swap_graphics=function(t,e,n,i){if(e.isAsset(Zs)){var r=e,o=t.graphicsPool[t.properties_stream_int[i]];o.id!==r.graphics.id&&(r.graphics=o)}else console.warn("[Timeline] - swap_graphics - child is not a Sprite")},t.start_audio=function(t,e,n,i){},t.set_ratio=function(t,e,n,i){e.isAsset(nl)?e.setRatio(t.properties_stream_int[i]/65535):console.warn("[Timeline] - set_ratio - child is not a MorphSprite")},t.update_blendmode=function(t,e,n,i){e.blendMode=function(t){return void 0===t&&(t=1),il[t]||il[1]}(i)},t.update_rendermode=function(t,e,n,i){console.log("update rendermode "+i)},t.prototype.dispose=function(){this.keyframe_indices=[],this.avm1Exports={},this.avm1InitActions={},this.avm1ButtonActions=[],this.graphicsPool={},this.audioPool={},this.placeObjectTagsForSessionIDs={},this._labels={},this._framescripts={},this._framescripts_translated={}},t.applyFunctionMap=((el={})[1]=t.update_mtx_all,el[2]=t.update_colortransform,el[3]=t.update_masks,el[4]=t.update_name,el[5]=t.update_button_name,el[6]=t.update_visibility,el[7]=t.update_blendmode,el[8]=t.update_rendermode,el[9]=t.update_filters,el[11]=t.update_mtx_scale_rot,el[12]=t.update_mtx_pos,el[200]=t.enable_maskmode,el[201]=t.remove_masks,el[202]=t.swap_graphics,el[203]=t.set_ratio,el[204]=t.start_audio,el),t}(),ol=function(t){function e(e,n,i){void 0===i&&(i=!1);var r=t.call(this)||this;return r.preserveDimensions=!1,r._onInvalidateTextureDelegate=function(t){return r._onInvalidateTexture(t)},r.material=e,r._updateDimensions(),r._sampler&&(r._sampler.smooth=i),r}return o(e,t),e.getNewBillboard=function(t,n,i){if(void 0===n&&(n="auto"),void 0===i&&(i=!1),e._billboards.length){var r=e._billboards.pop();return r.material=t,r}return new e(t,n,i)},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"billboardRect",{get:function(){return this._billboardRect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"billboardHeight",{get:function(){return this._billboardHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"billboardWidth",{get:function(){return this._billboardWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){t!=this._material&&(this._material&&this._material.removeEventListener(Pr.INVALIDATE_TEXTURES,this._onInvalidateTextureDelegate),this._material=t,this._material&&this._material.addEventListener(Pr.INVALIDATE_TEXTURES,this._onInvalidateTextureDelegate),this._updateDimensions(),this._invalidateMaterial())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sampler",{get:function(){return this._sampler},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!=t&&(this._width=t,this.scaleX=this._width/this._billboardRect.width)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!=t&&(this._height=t,this.scaleY=this._height/this._billboardRect.height)},enumerable:!1,configurable:!0}),e.prototype.advanceFrame=function(){},e.prototype.getEntity=function(){return this},e.prototype.dispose=function(){this.disposeValues(),e._billboards.push(this)},e.prototype.clone=function(){var t=e.getNewBillboard(this._material);return this.copyTo(t),t},e.prototype._acceptTraverser=function(t){if(this.material&&this.material.getTextureAt(0)){var e=this.image;e&&!e.isDisposed&&t.applyTraversable(this)}},Object.defineProperty(e.prototype,"image",{get:function(){var t,e;if(!this.material)return null;var n=this.material.getTextureAt(0);if(!n)return null;var i=null===(t=this._style)||void 0===t?void 0:t.getImageAt(n);return i||((i=null===(e=this.material.style)||void 0===e?void 0:e.getImageAt(n))||n.getImageAt(0))},enumerable:!1,configurable:!0}),e.prototype._updateDimensions=function(){var t,e,n=this.image;if(n&&!n.isDisposed){var i=this.material.getTextureAt(0);this._sampler=(null===(t=this._style)||void 0===t?void 0:t.getSamplerAt(i))||(null===(e=this.material.style)||void 0===e?void 0:e.getSamplerAt(i))||i.getSamplerAt(0)||he.getDefaultImageSampler(),this._sampler.imageRect?(this._billboardWidth=this._sampler.imageRect.width*n.width,this._billboardHeight=this._sampler.imageRect.height*n.height):(this._billboardWidth=n.rect.width,this._billboardHeight=n.rect.height),this._billboardRect=this._sampler.frameRect||new W(0,0,this._billboardWidth,this._billboardHeight)}else this._billboardWidth=1,this._billboardHeight=1,this._billboardRect=new W(0,0,1,1);this.invalidate(),this.invalidateElements(),this.preserveDimensions?(this.scaleX=this._width/this._billboardRect.width,this.scaleY=this._height/this._billboardRect.height):(this._width=this._billboardRect.width*this.scaleX,this._height=this._billboardRect.height*this.scaleY)},e.prototype._onInvalidateProperties=function(e){void 0===e&&(e=null),t.prototype._onInvalidateProperties.call(this,e),this._updateDimensions()},e.prototype._onInvalidateTexture=function(t){this._updateDimensions()},e._billboards=new Array,e.assetType="[asset Billboard]",e}(Js),al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getStageElements=function(){var t=this._asset,n=t.billboardWidth,i=t.billboardHeight,r=t.billboardRect,o=n.toString()+i.toString()+r.toString();this._id=o;var a=e._samplerElements[o];if(!a){var s=-r.x,l=-r.y,u=n-r.x,c=i-r.y;(a=e._samplerElements[o]=new io(new ki(11,4))).autoDeriveNormals=!1,a.autoDeriveTangents=!1,a.setPositions([s,l,0,u,c,0,u,l,0,s,l,0,s,c,0,u,c,0]),a.setUVs([0,0,1,1,1,0,0,0,0,1,1,1])}return a.getAbstraction(this._stage)},e.prototype.executeRender=function(e,n,i,r){void 0===e&&(e=!0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),this._stage.context.setCulling(Gt.NONE),t.prototype.executeRender.call(this,e,n,i,r)},e.prototype._getRenderMaterial=function(){return(this._asset.material||Rr.getDefaultColorMaterial()).getAbstraction(this.renderer.getRenderElements(this.stageElements.elements))},e.prototype._getStyle=function(){return this._asset.style},e._samplerElements=new Object,e}(Ur),sl=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._billboardBoxDirty=!0,i._onInvalidateElementsDelegate=function(t){return i._onInvalidateElements(t)},i._asset.addEventListener(Lr.INVALIDATE_ELEMENTS,i._onInvalidateElementsDelegate),i}return o(e,t),e.prototype._onInvalidateElements=function(t){this._billboardBoxDirty=!0},e.prototype.onClear=function(e){this._asset.removeEventListener(Lr.INVALIDATE_ELEMENTS,this._onInvalidateElementsDelegate),t.prototype.onClear.call(this,e)},e.prototype.hitTestPoint=function(t,e,n){return!0},e.prototype.getBoxBounds=function(t,e,n,i){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),this._billboardBoxDirty){this._billboardBoxDirty=!1;var r=this._asset.billboardRect;this._billboardBox=new R(r.x,r.y,0,r.width,r.height,0)}return(t?t.transformBox(this._billboardBox):this._billboardBox).union(i,i||n)},e.prototype.getSphereBounds=function(t,e,n,i,r){return void 0===r&&(r=null),r},e.prototype.testCollision=function(t,e){var n=-t.rayPosition.z/t.rayDirection.z,i=new L(t.rayPosition.x+n*t.rayDirection.x,t.rayPosition.y+n*t.rayDirection.y);return t.traversable=this._asset,t.rayEntryDistance=n,t.position=i,t.normal=new L(0,0,1),!0},e}(hr);Vr.registerRenderable(al,ol),cr.registerPickable(sl,ol),mr.registerAbstraction(Ar,ol);var ll=function(t){function e(e,n){var i=t.call(this,e)||this;return i._camera=n,i}return o(e,t),Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._camera)},e.PROJECTION_CHANGED="projectionChanged",e}(c),ul=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._projection=e||new xt,n._projection.transform=n._transform,n.z=-1e3,n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"projection",{get:function(){return this._projection},set:function(t){if(this._projection!=t){if(!t)throw new Error("Projection cannot be null!");this._projection.transform=null,this._projection=t,this._projection.transform=this._transform,this.dispatchEvent(new ll(ll.PROJECTION_CHANGED,this))}},enumerable:!1,configurable:!0}),e.prototype.project=function(t,e){return void 0===e&&(e=null),this._projection.project(this._transform.inverseMatrix3D.transformVector(t,e),e)},e.prototype.unproject=function(t,e,n,i){return void 0===i&&(i=null),this._transform.matrix3D.transformVector(this._projection.unproject(t,e,n,i))},e.prototype._getDefaultBoundingVolume=function(){return Ki.NULL},e.assetType="[asset Camera]",e}(Js),cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.acceptTraverser=function(t){},e}(Ar);mr.registerAbstraction(cl,ul);var hl=function(t){function e(e,n,i,r){void 0===r&&(r=1);var o=t.call(this)||this;return o.material=e,o._startPosition=n,o._endPosition=i,o._halfThickness=.5*r,o}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startPosition",{get:function(){return this._startPosition},set:function(t){this._startPosition!=t&&(this._startPosition=t,this.invalidateElements())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){return this._endPosition},set:function(t){this._endPosition!=t&&(this._endPosition=t,this.invalidateElements())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return 2*this._halfThickness},set:function(t){this._halfThickness!=t&&(this._halfThickness=.5*t,this.invalidateElements())},enumerable:!1,configurable:!0}),e.prototype.getEntity=function(){return this},e.prototype._acceptTraverser=function(t){t.applyTraversable(this)},e.assetType="[asset LineSegment]",e}(Ws),pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getStageElements=function(){var t=e._lineGraphics[this._asset.id]||(e._lineGraphics[this._asset.id]=new Io),n=this._asset.startPosition,i=this._asset.endPosition,r=new Float32Array(6),o=new Float32Array(1);return r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=i.x,r[4]=i.y,r[5]=i.z,o[0]=this._asset.thickness,t.setPositions(r),t.setThickness(o),t.getAbstraction(this._stage)},e.prototype._getRenderMaterial=function(){return(this._asset.material||Rr.getDefaultColorMaterial()).getAbstraction(this.renderer.getRenderElements(this.stageElements.elements))},e.prototype._getStyle=function(){return this._asset.style},e._lineGraphics=new Object,e}(Ur),dl=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._lineSegmentBoxDirty=!0,i._lineSegmentSphereDirty=!0,i._onInvalidateElementsDelegate=function(t){return i._onInvalidateElements(t)},i._asset.addEventListener(Lr.INVALIDATE_ELEMENTS,i._onInvalidateElementsDelegate),i}return o(e,t),e.prototype._onInvalidateElements=function(t){this._lineSegmentBoxDirty=!0,this._lineSegmentSphereDirty=!0},e.prototype.onClear=function(e){this._asset.removeEventListener(Lr.INVALIDATE_ELEMENTS,this._onInvalidateElementsDelegate),t.prototype.onClear.call(this,e)},e.prototype.hitTestPoint=function(t,e,n){return!0},e.prototype.getBoxBounds=function(t,e,n,i){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),this._lineSegmentBoxDirty){this._lineSegmentBoxDirty=!1;var r=this._asset.startPosition,o=this._asset.endPosition;this._lineSegmentBox=new R(Math.min(r.x,o.x),Math.min(r.y,o.y),Math.min(r.z,o.z),Math.abs(r.x-o.x),Math.abs(r.y-o.y),Math.abs(r.z-o.z))}return(t?t.transformBox(this._lineSegmentBox):this._lineSegmentBox).union(i,i||n)},e.prototype.getSphereBounds=function(t,e,n,i,r){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this._lineSegmentSphereDirty){this._lineSegmentSphereDirty=!1;var o=this._asset.startPosition,a=this._asset.endPosition,s=(a.x-o.x)/2,l=(a.y-o.y)/2,u=(a.z-o.z)/2;this._lineSegmentSphere=new k(o.x+s,o.y+l,o.z+u,Math.sqrt(s*s+l*l+u*u))}return(e?e.transformSphere(this._lineSegmentSphere):this._lineSegmentSphere).union(r,r||i)},e.prototype.testCollision=function(t,e){return t.traversable=null,!1},e}(hr);Vr.registerRenderable(pl,hl),cr.registerPickable(dl,hl),mr.registerAbstraction(Ar,hl);var fl=function(t){function e(e,n){var i;void 0===e&&(e=!0),void 0===n&&(n=null);var r=t.call(this)||this;return r._useAssetLib=e,r._assetLibId=n,r._onLoaderStartDelegate=function(t){return r._onLoaderStart(t)},r._onLoadProgressDelegate=function(t){return r._onLoadProgress(t)},r._onLoadCompleteDelegate=function(t){return r._onLoadComplete(t)},r._onAssetCompleteDelegate=function(t){return r._onAssetComplete(t)},r._onLoaderCompleteDelegate=function(t){return r._onLoaderComplete(t)},r._onLoadErrorDelegate=function(t){return r._onLoadError(t)},r._onParseErrorDelegate=function(t){return r._onParseError(t)},r._errorDelegateSelector=((i={})[X.LOAD_ERROR]=r._onLoadErrorDelegate,i[z.PARSE_ERROR]=r._onParseErrorDelegate,i),r}return o(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentLoader",{get:function(){return this._contentLoader},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(e,n){(this._contentLoader&&e==X.LOAD_ERROR||e==z.PARSE_ERROR)&&this._contentLoader.addEventListener(e,this._errorDelegateSelector[e]),t.prototype.addEventListener.call(this,e,n)},e.prototype.removeEventListener=function(e,n){(this._contentLoader&&e==X.LOAD_ERROR||e==z.PARSE_ERROR)&&this._contentLoader.removeEventListener(e,this._errorDelegateSelector[e]),t.prototype.removeEventListener.call(this,e,n)},e.prototype.close=function(){this._contentLoader&&(this._useAssetLib&&pt.getInstance(this._assetLibId).stopLoader(this._contentLoader),this._disposeLoader())},e.prototype.load=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this._getLoader().load(t,e,n,i)},e.prototype.loadData=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this._getLoader().loadData(t,"",e,n,i)},e.prototype._getLoader=function(){return this._contentLoader&&this.close(),this._contentLoader=this._useAssetLib?pt.getInstance(this._assetLibId).getLoader():new ht,this._contentLoader.addEventListener(Q.LOADER_START,this._onLoaderStartDelegate),this._contentLoader.addEventListener(X.LOAD_PROGRESS,this._onLoadProgressDelegate),this._contentLoader.addEventListener(X.LOAD_COMPLETE,this._onLoadCompleteDelegate),this._contentLoader.addEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),this._contentLoader.addEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),this.hasEventListener(X.LOAD_ERROR)&&this._contentLoader.addEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),this.hasEventListener(z.PARSE_ERROR)&&this._contentLoader.addEventListener(z.PARSE_ERROR,this._onParseErrorDelegate),this._contentLoader},e.prototype._disposeLoader=function(){this._contentLoader.removeEventListener(Q.LOADER_START,this._onLoaderStartDelegate),this._contentLoader.removeEventListener(X.LOAD_PROGRESS,this._onLoadProgressDelegate),this._contentLoader.removeEventListener(X.LOAD_COMPLETE,this._onLoadCompleteDelegate),this._contentLoader.removeEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),this._contentLoader.removeEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),this.hasEventListener(X.LOAD_ERROR)&&this._contentLoader.removeEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),this.hasEventListener(z.PARSE_ERROR)&&this._contentLoader.removeEventListener(z.PARSE_ERROR,this._onParseErrorDelegate),this._useAssetLib||this._contentLoader.stop(),this._contentLoader=null},e.prototype.unload=function(){},e.enableParser=function(t){ht.enableParser(t)},e.enableParsers=function(t){ht.enableParsers(t)},e.prototype._onLoaderStart=function(t){this.dispatchEvent(t)},e.prototype._onLoadProgress=function(t){this.dispatchEvent(t)},e.prototype._onLoadComplete=function(t){this.dispatchEvent(t)},e.prototype._onAssetComplete=function(t){this.dispatchEvent(t)},e.prototype._onLoadError=function(t){return!!this.hasEventListener(X.LOAD_ERROR)&&(this.dispatchEvent(t),!0)},e.prototype._onParseError=function(t){return!!this.hasEventListener(z.PARSE_ERROR)&&(this.dispatchEvent(t),!0)},e.prototype._onLoaderComplete=function(t){this._content=t.content,this._content&&this.addChild(this._content),this.dispatchEvent(t),this._disposeLoader()},e}(Js),_l=function(){function t(){}return t.setInterval=function(t,e){return this._intervalID++,e<4&&(e=4),this._active_intervals[this._intervalID]={f:t,t:e,dt:0,isTimeout:!1},this._intervalID},t.setTimeOut=function(t,e){return this._intervalID++,e<4&&(e=4),this._active_intervals[this._intervalID]={f:t,t:e,dt:0,isTimeout:!0},this._intervalID},t.clearInterval=function(t){delete this._active_intervals[t]},t.clearTimeout=function(t){delete this._active_intervals[t]},t.execute_intervals=function(t){var e;for(var n in void 0===t&&(t=0),this._active_intervals)for((e=this._active_intervals[n]).dt+=t;this._active_intervals[n]&&e.dt>=e.t;)e.dt-=e.t,e.f(),e.isTimeout&&delete this._active_intervals[n]},t.add_child_to_dispose=function(t){this._queued_dispose.push(t)},t.get_queue=function(){return t._queue||(t._queue={queued_mcs:[],queued_scripts:[],queued_mcs_pass2:[],queued_scripts_pass2:[],constructors:[]}),t._queue},t.add_script_to_queue=function(e,n){var i=t.get_queue(),r=i.queued_mcs_pass2.length,o=0;for(o=0;o<r;o++)i.queued_mcs.push(i.queued_mcs_pass2[o]),i.queued_scripts.push(i.queued_scripts_pass2[o]);i.queued_mcs_pass2.length=0,i.queued_scripts_pass2.length=0,e.adapter.allowScript=!0,i.queued_mcs.push(e),i.queued_scripts.push(n)},t.add_loaded_action_to_queue=function(e){var n=t.get_queue();n.queued_mcs.push(e),n.queued_scripts.push(null)},t.add_script_to_queue_pass2=function(e,n){var i=t.get_queue();e.adapter.allowScript=!0,i.queued_mcs_pass2.push(e),i.queued_scripts_pass2.push(n)},t.execute_as3_constructors_finish_scene=function(e){for(var n=0,i=e.numChildren;n<i;n++){var r=e.getChildAt(n);r.parent&&r.adapter.executeConstructor&&t.execute_as3_constructors_recursiv(r)}},t.execute_as3_constructors_enterFrame=function(e){t.invalidAS3Constructors&&(t.execute_as3_constructors_recursiv(e),t.invalidAS3Constructors=!1)},t.execute_as3_constructors_recursiv=function(e){var n=e.adapter,i=n.executeConstructor;if(i)n.executeConstructor=null,i();else for(var r=0,o=e.numChildren;r<o;r++){var a=e.getChildAt(r);t.execute_as3_constructors_recursiv(a)}e.just_added_to_timeline&&e._sessionID>=0&&n&&n.dispatchStaticEvent&&(n.dispatchStaticEvent("added",n),e.just_added_to_timeline=!1,e.hasDispatchedAddedToStage=e.isOnDisplayList(),e.hasDispatchedAddedToStage&&n.dispatchStaticEvent("addedToStage",n))},t.isOnStage=function(t){for(var e=t;e&&!e.isAVMScene;)e=e.parent;return!(!e||!e.isAVMScene)},t.execute_avm1_constructors=function(){var e=t.get_queue();if(0!=e.queued_mcs.length||0!=e.queued_mcs_pass2.length){for(var n=e.queued_mcs_pass2.length;n>0;)n--,e.queued_mcs.push(e.queued_mcs_pass2[n]),e.queued_scripts.push(e.queued_scripts_pass2[n]);e.queued_mcs_pass2.length=0,e.queued_scripts_pass2.length=0;var i,r=e.queued_mcs;if(t.useAVM1){for(n=r.length;n>0;)if(i=r[--n],t.isOnStage(i)&&i.onInitialize){var o=i.onInitialize;i.onInitialize=null,o()}for(n=0;n<r.length;n++)if(i=r[n],t.isOnStage(i)){if(i.onConstruct){o=i.onConstruct;i.onConstruct=null,o()}var a=i.adapter.executeConstructor;a&&(i.adapter.executeConstructor=null,a())}}}},t.execute_queue=function(){var e=t.get_queue();if(0!=e.queued_mcs.length||0!=e.queued_mcs_pass2.length){var n=e.queued_mcs.concat(),i=e.queued_scripts.concat();e.queued_mcs.length=0,e.queued_scripts.length=0;var r,o=e.queued_mcs_pass2.length,a=0;for(a=0;a<o;a++)n.push(e.queued_mcs_pass2[a]),i.push(e.queued_scripts_pass2[a]);if(e.queued_mcs_pass2.length=0,e.queued_scripts_pass2.length=0,t.useAVM1){for(a=0;a<n.length;a++)if(r=n[a],t.isOnStage(r)&&r.onInitialize){var s=r.onInitialize;r.onInitialize=null,s()}for(a=0;a<n.length;a++)if(r=n[a],t.isOnStage(r)){if(r.onConstruct){s=r.onConstruct;r.onConstruct=null,s()}var l=r.adapter.executeConstructor;l&&(r.adapter.executeConstructor=null,l())}}for(a=0;a<n.length;a++){if(r=n[a],t.useAVM1){if(!t.isOnStage(r))continue;if(r.onLoaded){s=r.onLoaded;r.onLoaded=null,s()}if(!r.adapter.hasOnLoadExecuted){r.adapter.hasOnLoadExecuted=!0;var u=r.adapter.alGet("onLoad");u&&u.alCall(r.adapter)}}null!=i[a]&&((r=n[a])&&r.adapter&&!r.adapter.constructorHasRun?(e.queued_mcs.push(r),e.queued_scripts.push(i[a])):r&&r.adapter&&r.adapter.executeScript&&r.adapter.executeScript(i[a]))}}},t.execute_dispose=function(){for(var t=this._queued_dispose.length,e=0;e<t;e++)this._queued_dispose[e].dispose();this._queued_dispose.length=0},t.invalidAS3Constructors=!1,t.frameScriptDebug=void 0,t.useAVM1=!1,t._queued_dispose=[],t._active_intervals=new Object,t._intervalID=0,t}(),gl=function(t){function e(e){return t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"bubbles",{get:function(){var t=this._iAllowedToPropagate&&this._iAllowedToImmediatlyPropagate;return this._iAllowedToPropagate=!0,this._iAllowedToImmediatlyPropagate=!0,t},enumerable:!1,configurable:!0}),e.prototype.stopPropagation=function(){this._iAllowedToPropagate=!1,this._iParentEvent&&this._iParentEvent.stopPropagation()},e.prototype.stopImmediatePropagation=function(){this._iAllowedToPropagate=!1,this._iAllowedToImmediatlyPropagate=!1,this._iParentEvent&&this._iParentEvent.stopImmediatePropagation()},Object.defineProperty(e.prototype,"scenePosition",{get:function(){return this.containerNode.getMatrix3D().transformVector(this.position)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sceneNormal",{get:function(){var t=this.containerNode.getMatrix3D().deltaTransformVector(this.normal);return t.normalize(),t},enumerable:!1,configurable:!0}),e.prototype._dispatchEvent=function(t,e){},e}(c),ml=function(t){function e(e){var n=t.call(this,e)||this;return n.buttons=0,n}return o(e,t),e.prototype.clone=function(){var t=new e(this.type);return t.screenX=this.screenX,t.screenY=this.screenY,t.view=this.view,t.containerNode=this.containerNode,t.rootNode=this.rootNode,t.traversable=this.traversable,t.material=this.material,t.uv=this.uv,t.position=this.position,t.normal=this.normal,t.elementIndex=this.elementIndex,t.delta=this.delta,t.ctrlKey=this.ctrlKey,t.shiftKey=this.shiftKey,t._iParentEvent=this,t._iAllowedToPropagate=this._iAllowedToPropagate,t.buttons=this.buttons,t},e.prototype._dispatchEvent=function(t,n){t.isMouseDisabled()&&this.type!=e.MOUSE_OUT&&this.type!=e.ROLL_OUT||(t.container.dispatchEvent(this,n),_l.execute_queue())},e.MOUSE_OVER="mouseOver3d",e.MOUSE_OUT="mouseOut3d",e.ROLL_OVER="rollOver3d",e.ROLL_OUT="rollOut3d",e.MOUSE_UP="mouseUp3d",e.MOUSE_UP_OUTSIDE="mouseUpOutside3d",e.MOUSE_DOWN="mouseDown3d",e.MOUSE_MOVE="mouseMove3d",e.DRAG_MOVE="dragMove3d",e.DRAG_OUT="dragOut3d",e.DRAG_OVER="dragOver3d",e.DRAG_START="dragStart3d",e.DRAG_STOP="dragStop3d",e.CLICK="click3d",e.DOUBLE_CLICK="doubleClick3d",e.MOUSE_WHEEL="mouseWheel3d",e}(gl),yl=function(t){function e(e,n){void 0===n&&(n=!1);var i=t.call(this)||this;return i.symbolID=0,i.preventScript=!1,i._scenes=[],i._buttonMode=!1,i._isButton=!1,i._time=0,i._currentFrameIndex=-1,i._isPlaying=!0,i._currentSceneIndex=0,i._sceneDirty=!1,i._isInit=!0,i._sessionID_childs={},i._sounds={},i._skipFramesForStream=0,i._isTimelinePass=!1,i._isSprite=!1,i.buttonEnabled=!0,i.loop=!0,i.constructedKeyFrameIndex=-1,i._soundVolume=1,i._isButton=!1,i._buttonMode=!1,i._useHandCursor=!0,i.doingSwap=!1,i.cursorType="pointer",i._onMouseOver=function(t){i.buttonEnabled?i.currentFrameIndex=1&t.buttons?0==i.currentFrameIndex?0:2:1:i.currentFrameIndex=0},i._onMouseOut=function(t){i.currentFrameIndex=1&t.buttons&&0!=i.currentFrameIndex?1:0},i._onMouseDown=function(t){i.buttonEnabled?i.currentFrameIndex=2:i.currentFrameIndex=0},i._onMouseUp=function(t){i.currentFrameIndex=1},i._onMouseUpOutside=function(t){i.currentFrameIndex=0},i._timeline=e,n&&i.transformToSprite(),i._onChannelCompleteStopError=i._onChannelCompleteStopError.bind(i),i}return o(e,t),e.stopSounds=function(t){if(t)e._activeSounds[t.id]&&e._activeSounds[t.id].stop();else for(var n in e._activeSounds)e._activeSounds[n].stop()},e.getNewMovieClip=function(t){if(e._movieClips.length){var n=e._movieClips.pop();return n.timeline=t,n}return new e(t)},e.clearPool=function(){e._movieClips=[]},Object.defineProperty(e.prototype,"isSprite",{get:function(){return this._isSprite},enumerable:!1,configurable:!0}),e.prototype.initSoundStream=function(t,n){this._soundStreams||(this._soundStreams=new e.movieClipSoundsManagerClass(this)),this._soundStreams.initSoundStream(t,n)},e.prototype.addSoundStreamBlock=function(t,n){this._soundStreams||(this._soundStreams=new e.movieClipSoundsManagerClass(this)),this._soundStreams.addSoundStreamBlock(t,n)},e.prototype.stopCurrentStream=function(t){if(this._soundStreams)return this._soundStreams.stopStream(t)},e.prototype.resetStreamStopped=function(){this._soundStreams&&this._soundStreams.resetStreamStopped()},e.prototype._syncSounds=function(t){return this._soundStreams?this._soundStreams.syncSounds(t,this._isPlaying,this.parent):0},e.prototype.transformToSprite=function(){if(!this._isSprite){this._isSprite=!0;var t=this._timeline;t.numFrames<=1||(t.frame_command_indices=[t.frame_command_indices[0]],t.frame_recipe=[t.frame_recipe[0]],t.keyframe_constructframes=[t.keyframe_constructframes[0]],t.keyframe_durations=[t.keyframe_durations[0]],t.keyframe_firstframes=[t.keyframe_firstframes[0]],t.keyframe_indices=[t.keyframe_indices[0]])}},e.prototype.startSound=function(t,n,i){var r=t.play(0,n);r.volume=this._soundVolume,i&&r.addEventListener(g.COMPLETE,i),r.addEventListener(g.COMPLETE,this._onChannelCompleteStopError),r.addEventListener(g.STOP,this._onChannelCompleteStopError),r.addEventListener(g.ERROR,this._onChannelCompleteStopError);var o=t.id;this._sounds[o]||(this._sounds[o]=[]),this._sounds[o].push(r),e._activeSounds[o]=t},e.prototype.stopSounds=function(t){if(void 0===t&&(t=null),t)this._sounds[t.id]&&this._stopChannels(t);else for(var n in this._sounds)this._stopChannels(t);for(var i,r=this._children.length,o=0;o<r;++o)(i=this._children[o]).isAsset(e)&&i.stopSounds(t);this.stopCurrentStream(this._currentFrameIndex),this._soundStreams&&this._soundStreams.syncSounds(0,!1,this.parent)},e.prototype.getSceneIndexByFrame=function(t){var e=this.scenes;if(e.length<=1)return 0;for(var n=0;n<e.length;n++)if(e[n].offset>t)return n-1;return e.length-1},e.prototype.getSceneIndex=function(t){for(var e=this.scenes,n=0;n<e.length&&t;n++)if(e[n].name===t)return n;return 0},Object.defineProperty(e.prototype,"currentSceneName",{get:function(){return this.scenes[this._currentSceneIndex].name},set:function(t){var e=this.getSceneIndex(t);this._sceneDirty=this._currentSceneIndex!==e,this._currentSceneIndex=e,this._currentFrameIndex=this._scenes[e].offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentScene",{get:function(){var t=this.scenes[this._currentSceneIndex];return-1===t.numFrames&&(t.numFrames=this.timeline.numFrames-t.offset),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scenes",{get:function(){return 0===this._scenes.length&&(this._scenes[0]={name:"Scene1",offset:0,labels:[],numFrames:this.timeline.numFrames}),this._scenes},set:function(t){this._scenes=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(t){var e;if(this._soundVolume!=t)for(var n in this._soundVolume=t,this._sounds)if(e=this._sounds[n])for(var i=0,r=e;i<r.length;i++){r[i].volume=t}},enumerable:!1,configurable:!0}),e.prototype.stopSound=function(t){e.stopSounds(t)},e.prototype.buttonReset=function(){this._isButton&&!this.buttonEnabled&&(this.currentFrameIndex=0)},e.prototype.getMouseCursor=function(){return"scene"==this.name?"initial":this._useHandCursor&&this.buttonMode?this.cursorType:"initial"},e.prototype.queueFrameScripts=function(t,e,n){console.warn("[MovieClip] - queueFrameScripts should only be called on AVM-Adapters")},e.prototype.registerScriptObject=function(t){this[t.name]=t,t.isAsset(e)&&t.removeButtonListeners()},e.prototype.unregisterScriptObject=function(t){delete this[t.name],t.isAsset(e)&&t.removeButtonListeners()},e.prototype.dispose=function(){this.disposeValues(),e._movieClips.push(this)},e.prototype.disposeValues=function(){t.prototype.disposeValues.call(this),this._sessionID_childs={},this._timeline=null},Object.defineProperty(e.prototype,"useHandCursor",{get:function(){return this._useHandCursor},set:function(t){this._useHandCursor=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonMode",{get:function(){return this._buttonMode},set:function(t){this._buttonMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isButton",{get:function(){return this._isButton},set:function(t){this._isButton=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInit",{get:function(){return this._isInit},set:function(t){this._isInit=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeline",{get:function(){return this._timeline},set:function(t){this._timeline!=t&&(this._timeline=t,this.reset(!1,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numFrames",{get:function(){return this._timeline.numFrames},enumerable:!1,configurable:!0}),e.prototype.jumpToLabel=function(t,e){void 0===e&&(e=0);var n=this._currentFrameIndex;return this._timeline.jumpToLabel(this,t,e),n!==this._currentFrameIndex},e.prototype.reset=function(e,n){void 0===e&&(e=!0),void 0===n&&(n=!0),this._isTimelinePass=!0,n&&t.prototype.reset.call(this),4115==this.id&&console.warn("reset",this.id),this.resetStreamStopped(),this._time=0,n&&this._adapter&&this.adapter.freeFromScript(),this.constructedKeyFrameIndex=-1;for(var i=this.numChildren-1;i>=0;i--)this.removeChildAt(i);if(this._graphics&&this._graphics.clear(),e){var r=this._timeline.keyframe_indices.length;this._isPlaying=Boolean(r>1),this._currentSceneIndex=0,r?(this._currentFrameIndex=0,this._timeline.constructNextFrame(this,e&&!this.doingSwap&&!this.preventScript,!0)):this._currentFrameIndex=-1}this._skipAdvance=!0,this._isTimelinePass=!1},Object.defineProperty(e.prototype,"currentFrameIndex",{get:function(){return this._currentFrameIndex},set:function(t){this.jumpToIndex(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrameIndexRelative",{get:function(){return this._currentFrameIndex-this.currentScene.offset},set:function(t){this.jumpToIndex(t,this._currentSceneIndex)},enumerable:!1,configurable:!0}),e.prototype.jumpToIndex=function(t,e){var n=!0,i=0,r=this._timeline.keyframe_indices.length;if(this.resetStreamStopped(),!r)return!1;var o=this.scenes;if(void 0===e)e=this.getSceneIndexByFrame(t);else{var a=o[e="string"==typeof e?this.getSceneIndex(e):e];-1===a.numFrames&&(a.numFrames=r-a.offset),i=a.offset,r=a.numFrames}return this._currentSceneIndex=e,t<0?t=0:t>=r&&(t=r-1,n=!1),t+=i,this._skipAdvance=!1,!(this._currentFrameIndex===t&&!this._sceneDirty)&&(this._sceneDirty=!1,this._currentFrameIndex=t,this._timeline.gotoFrame(this,t,n,!1,!1),!0)},e.prototype.addButtonListeners=function(){this._isButton=!0,this.stop(),this.addEventListener(ml.MOUSE_OVER,this._onMouseOver),this.addEventListener(ml.MOUSE_OUT,this._onMouseOut),this.addEventListener(ml.MOUSE_DOWN,this._onMouseDown),this.addEventListener(ml.MOUSE_UP,this._onMouseUp),this.addEventListener(ml.MOUSE_UP_OUTSIDE,this._onMouseUpOutside),this.mouseChildren=!1},e.prototype.removeButtonListeners=function(){this.removeEventListener(ml.MOUSE_OVER,this._onMouseOver),this.removeEventListener(ml.MOUSE_OUT,this._onMouseOut),this.removeEventListener(ml.MOUSE_DOWN,this._onMouseDown),this.removeEventListener(ml.MOUSE_UP,this._onMouseUp),this.removeEventListener(ml.MOUSE_UP_OUTSIDE,this._onMouseUpOutside)},e.prototype.getTimelineChildAtSessionID=function(t){return this._sessionID_childs[t]},e.prototype.constructFrame=function(t,e,n,i,r,o,a){console.warn("[scene/MovieClip] - constructFrame not implemented")},e.prototype.addTimelineChildAtDepth=function(t,e,n){return console.warn("[scene/MovieClip] - addTimelineChildAtDepth not implemented"),null},e.prototype.removeTimelineChildAtDepth=function(t){console.warn("[scene/MovieClip] - removeTimelineChildAtDepth not implemented")},e.prototype.removeChildAtInternal=function(e){var n=this._children[e];return n._adapter&&n.adapter.freeFromScript(),this._isTimelinePass&&this.adapter.unregisterScriptObject(n),delete this._sessionID_childs[n._sessionID],n._sessionID=-1,n.adapter&&n.adapter.dispatchStaticEvent&&n.adapter.dispatchStaticEvent("removed",n.adapter),this.isOnDisplayList()&&n.adapter.dispatch_REMOVED_FROM_STAGE&&n.adapter.dispatch_REMOVED_FROM_STAGE(n),t.prototype.removeChildAtInternal.call(this,e)},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.play=function(){this._timeline.keyframe_indices.length>1&&(this._isPlaying=!0)},e.prototype.stop=function(){this.resetStreamStopped(),this._isPlaying=!1},e.prototype.clone=function(){var t=e.getNewMovieClip(this._timeline);return this.copyTo(t),t},e.prototype.copyTo=function(e){t.prototype.copyTo.call(this,e),e.buttonMode=this.buttonMode,e.symbolID=this.symbolID,e.loop=this.loop,e._soundStreams=this._soundStreams,e._scenes=this._scenes,this._isSprite&&e.transformToSprite()},e.prototype.advanceFrameInternal=function(){this._timeline&&this._timeline.numFrames>0&&this._isPlaying&&!this._skipAdvance&&(this._currentFrameIndex===this._timeline.numFrames-1?this.loop?0!==this._currentFrameIndex&&(this._currentFrameIndex=0,this._currentSceneIndex=0,this.resetStreamStopped(),this._timeline.gotoFrame(this,0,!0,!0,!0)):this._isPlaying=!1:(this._currentFrameIndex++,this._currentSceneIndex=this.getSceneIndexByFrame(this._currentFrameIndex),this._timeline.constructNextFrame(this))),t.prototype.advanceFrame.call(this),this._skipAdvance=!1},e.prototype.advanceFrame=function(){for(this._isTimelinePass=!0,0==this._skipFramesForStream&&this.advanceFrameInternal(),this._skipFramesForStream=this._syncSounds(this._currentFrameIndex);this._skipFramesForStream>0;)_l.execute_queue(),this.advanceFrameInternal(),this._skipFramesForStream=this._syncSounds(this._currentFrameIndex);this._isTimelinePass=!1},e.prototype.logHierarchy=function(t){void 0===t&&(t=0),this.printHierarchyName(t,this);for(var n,i=this._children.length,r=0;r<i;r++)(n=this._children[r]).isAsset(e)?n.logHierarchy(t+1):this.printHierarchyName(t+1,n)},e.prototype.printHierarchyName=function(t,e){for(var n="",i=0;i<t;++i)n+="--";n+=" "+e.name+" = "+e.id,console.log(n)},e.prototype.clear=function(){this.resetStreamStopped(),t.prototype.clear.call(this)},e.prototype._onChannelCompleteStopError=function(t){var e=t.target,n=e.owner,i=this._sounds[n.id],r=i?i.indexOf(e):-1;-1!=r&&(i.splice(r,1),0===i.length&&this._removeSound(n))},e.prototype._stopChannels=function(t){for(var e=t.id,n=0,i=this._sounds[e];n<i.length;n++){i[n].stop()}},e.prototype._removeSound=function(t){delete this._sounds[t.id],t.isPlaying||delete e._activeSounds[t.id]},e.avm1ScriptQueue=[],e.avm1ScriptQueueScripts=[],e.avm1LoadedActions=[],e.movieClipSoundsManagerClass=null,e._movieClips=new Array,e._activeSounds={},e.assetType="[asset MovieClip]",e}(Zs);mr.registerAbstraction(Ar,yl);var Al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[asset SkyboxElements]",e}(io),vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._includeDependencies=function(t){},e.prototype._getVertexCode=function(t,e,n){var i="",r=t.globalPosDependencies>0?n.globalPositionVertex:n.animatedPosition,o=e.getFreeVertexConstant();e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.getFreeVertexConstant(),t.viewMatrixIndex=4*o.index;var a=e.getFreeVertexConstant();t.scenePositionIndex=4*a.index;var s=e.getFreeVertexConstant(),l=e.getFreeVertexVectorTemp();return i+="mul "+l+", "+r+", "+s+"\nadd "+l+", "+l+", "+a+"\n",t.projectionDependencies>0?(n.projectionFragment=e.getFreeVarying(),i+="m44 "+l+", "+l+", "+o+"\nmov "+n.projectionFragment+", "+l+"\nmov op, "+l+"\n"):i+="m44 op, "+l+", "+o+"\n",i},e.prototype._getFragmentCode=function(t,e,n){return""},e}(Mr),bl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._skyboxProjection=new U,e}return o(e,t),e.prototype.draw=function(t,e,n,i){var r=e.scenePositionIndex,o=e.view.projection.transform.matrix3D.position;e.vertexConstantData[r++]=2*o.x,e.vertexConstantData[r++]=2*o.y,e.vertexConstantData[r++]=2*o.z,e.vertexConstantData[r++]=1,e.vertexConstantData[r++]=e.vertexConstantData[r++]=e.vertexConstantData[r++]=e.view.projection.far/Math.sqrt(3),e.vertexConstantData[r]=1;var a=new L;this._skyboxProjection.copyFrom(e.view.viewMatrix3D),this._skyboxProjection.copyRowTo(2,a);var s=a.x,l=a.y,u=a.z,c=-(a.x*o.x+a.y*o.y+a.z*o.z+Math.sqrt(s*s+l*l+u*u)),h=new L(s>=0?1:-1,l>=0?1:-1,1,1),p=this._skyboxProjection.clone();p.invert();var d=p.transformVector(h);this._skyboxProjection.copyRowTo(3,h);var f=(d.x*h.x+d.y*h.y+d.z*h.z+d.w*h.w)/(s*d.x+l*d.y+u*d.z+c*d.w);this._skyboxProjection.copyRowFrom(2,new L(s*f,l*f,u*f,c*f)),e.sceneMatrixIndex>=0&&e.sceneMatrix.copyFrom(t.renderSceneTransform,!0),e.viewMatrix.copyFrom(this._skyboxProjection,!0);var _=this._stage.context;_.setProgramConstantsFromArray(kt.VERTEX,e.vertexConstantData),_.setProgramConstantsFromArray(kt.FRAGMENT,e.fragmentConstantData),this._indices?this.getIndexBufferGL().draw(Rt.TRIANGLES,0,this.numIndices):this._stage.context.drawVertices(Rt.TRIANGLES,i,n||this.numVertices)},e}(ro);no.registerElements(vl,Al),Pi.registerAbstraction(bl,Al);var xl=function(t){function e(e,n){void 0===e&&(e=16777215);var i=t.call(this)||this;return i._textures=new Array,i._blendMode=ze.NORMAL,i.animateUVs=!1,i.bothSides=!1,i.curves=!1,i.imageRect=!1,i.useColorTransform=!1,i.alphaThreshold=0,i.alphaBlending=!0,i._onTextureInvalidateDelegate=function(t){return i.onTextureInvalidate(t)},i._owners=[i],i.style=new Gr,e instanceof Fe?(i._style.image=e,i.texture=new ho):i._style.color=Number(e),i}return o(e,t),Object.defineProperty(e.prototype,"animationSet",{get:function(){return this._animationSet},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this._blendMode!=t&&(this._blendMode=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iOwners",{get:function(){return this._owners},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!=t&&(this._texture&&this.removeTexture(this._texture),this._texture=t,this._texture&&this.addTexture(this._texture),this.invalidatePasses())},enumerable:!1,configurable:!0}),e.prototype.getNumTextures=function(){return this._textures.length},e.prototype.getTextureAt=function(t){return this._textures[t]},e.prototype.getEntity=function(){return this},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.invalidatePasses=function(){this.dispatchEvent(new Pr(Pr.INVALIDATE_PASSES,this))},e.prototype.invalidateElements=function(){this.dispatchEvent(new Lr(Lr.INVALIDATE_ELEMENTS,this))},e.prototype.invalidateMaterial=function(){this.dispatchEvent(new Lr(Lr.INVALIDATE_MATERIAL,this))},e.prototype.invalidateStyle=function(){this.dispatchEvent(new Lr(Lr.INVALIDATE_STYLE,this))},e.prototype.addTexture=function(t){this._textures.push(t),t.addEventListener(h.INVALIDATE,this._onTextureInvalidateDelegate),this.onTextureInvalidate()},e.prototype.removeTexture=function(t){this._textures.splice(this._textures.indexOf(t),1),t.removeEventListener(h.INVALIDATE,this._onTextureInvalidateDelegate),this.onTextureInvalidate()},e.prototype.onTextureInvalidate=function(t){this.invalidate()},e.prototype._onInvalidateProperties=function(t){this.invalidateMaterial(),this.invalidatePasses()},e.prototype._acceptTraverser=function(t){t.applyTraversable(this)},e.prototype.iAddOwner=function(t){},e.prototype.iRemoveOwner=function(t){},e.prototype._getDefaultBoundingVolume=function(){return Ki.NULL},e.prototype.testCollision=function(t,e){return t.traversable=null,!1},e.assetType="[asset Skybox]",e}(Js),Cl=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._skybox=e,i._shader=new Dr(n,i,i,i._stage),i._texture=i._skybox.texture.getAbstraction(i._shader),i._pAddPass(i),i}return o(e,t),e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._texture.onClear(new h(h.CLEAR,this._skybox.texture)),this._texture=null,this._skybox=null},e.prototype._pUpdateRender=function(){t.prototype._pUpdateRender.call(this),this.requiresBlending=this._material.blendMode!=ze.NORMAL,this.shader.setBlendMode(this._material.blendMode==ze.NORMAL&&this.requiresBlending?ze.LAYER:this._material.blendMode)},e.prototype._includeDependencies=function(e){t.prototype._includeDependencies.call(this,e),e.usesPositionFragment=!0},e.prototype._getFragmentCode=function(t,e){return this._texture._getFragmentCode(e.shadedTarget,t,e,e.positionVarying)},e.prototype._setRenderState=function(e){t.prototype._setRenderState.call(this,e),this._texture._setRenderState(e)},e.prototype._activate=function(){t.prototype._activate.call(this),this._stage.context.setDepthTest(!1,Lt.LESS),this._texture.activate()},e}(Or),Il=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getStageElements=function(){var t=e._elements;return t||((t=new Al(new ki(11,4))).autoDeriveNormals=!1,t.autoDeriveTangents=!1,t.setIndices(Array(0,1,2,2,3,0,6,5,4,4,7,6,2,6,7,7,3,2,4,5,1,1,0,4,4,0,3,3,7,4,2,1,5,5,6,2)),t.setPositions(Array(-1,1,-1,1,1,-1,1,1,1,-1,1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1))),t.getAbstraction(this._stage)},e.prototype._getRenderMaterial=function(){return this._asset.getAbstraction(this.renderer.getRenderElements(this.stageElements.elements))},e.prototype._getStyle=function(){return this._asset.style},e}(Ur),El=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.isInFrustum=function(t,e,n,i){return!this.isInvisible()},e.prototype.isCastingShadow=function(){return!1},e}(Ar);yo.registerMaterial(Cl,xl),Vr.registerRenderable(Il,xl),mr.registerAbstraction(El,xl);var wl,Sl=function(){function t(){}return t.CENTER="center",t.LEFT="left",t.NONE="none",t.RIGHT="right",t}(),Dl=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t.STATIC="input",t}();!function(t){t.STANDART="standart",t.BOLD="bold",t.ITALIC="italic",t.BOLDITALIC="boldItalic"}(wl||(wl={}));var Tl=function(){function t(){}return t.CENTER="center",t.JUSTIFY="justify",t.LEFT="left",t.RIGHT="right",t}(),Pl=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.clone=function(){return new e(this.type)},e.CASTS_SHADOW_CHANGE="castsShadowChange",e}(c),Bl=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.clone=function(){return new e(this.type)},e.TEXTURE_CHANGE="textureChange",e}(c),Ol=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.SHADER_INVALIDATED="shaderInvalidated",e}(c),Ml=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[texture DepthTextureCube]",e}(ho),Ll=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._initVO=function(t){this._decodeReg=null,this._decodeIndex=-1},e.prototype._initConstants=function(){var t=this._shader.fragmentConstantData,e=this._decodeIndex;t[e]=1,t[e+1]=1/255,t[e+2]=1/65025,t[e+3]=1/16581375},e.prototype._getFragmentCode=function(e,n,i,r){-1==this._decodeIndex&&(this._decodeIndex=4*(this._decodeReg=n.getFreeFragmentConstant()).index);var o=n.getFreeFragmentVectorTemp();return t.prototype._getFragmentCode.call(this,o,n,i,r)+"dp4 "+e+".w, "+o+", "+this._decodeReg+"\n"},e}(po);Dr.registerAbstraction(Ll,Ml);var Rl=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[texture ShadowTexture2D]",e}(fo),Nl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFragmentCode=function(e,n,i,r){return t.prototype._getFragmentCode.call(this,e,n,i,r)+"slt "+e+".w, "+r+".z, "+e+".w\n"},e}(Ll);Dr.registerAbstraction(Nl,Rl);var Fl=function(t){function e(){var e=t.call(this)||this;return e._textures=new Array,e._owners=new Array,e._counts=new Array,e}return o(e,t),e.prototype.dispose=function(){},e.prototype.iAddOwner=function(t){var e=this._owners.indexOf(t);if(-1!=e)this._counts[e]++;else{this._owners.push(t),this._counts.push(1);for(var n=this._textures.length,i=0;i<n;i++)t.addTexture(this._textures[i])}},e.prototype.iRemoveOwner=function(t){var e=this._owners.indexOf(t);if(1!=this._counts[e])this._counts[e]--;else{this._owners.splice(e,1),this._counts.splice(e,1);for(var n=this._textures.length,i=0;i<n;i++)t.removeTexture(this._textures[i])}},e.prototype.iAddTexture=function(t){this._textures.push(t);for(var e=this._owners.length,n=0;n<e;n++)this._owners[n].addTexture(t)},e.prototype.iRemoveTexture=function(t){this._textures.splice(this._textures.indexOf(t),1);for(var e=this._owners.length,n=0;n<e;n++)this._owners[n].removeTexture(t)},e.prototype.invalidateShaderProgram=function(){this.invalidate(),this.dispatchEvent(new Ol(Ol.SHADER_INVALIDATED))},e.prototype.copyFrom=function(t){},e}(_),kl=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.chunkVO=new Yr,i}return o(e,t),e.prototype._isUsed=function(){return!0},e.prototype._usesTangentSpace=function(){return!0},e.prototype._initVO=function(t){},e.prototype._initConstants=function(){},e.prototype._reset=function(t){this._invalid=!0,t.useChunk=!1,t.needsProjection=!1,t.needsView=!1,t.needsNormals=!1,t.needsTangents=!1,t.needsGlobalVertexPos=!1,t.needsGlobalFragmentPos=!1,this._cleanCompilationData()},e.prototype._cleanCompilationData=function(){},e.prototype._getVertexCode=function(t,e){return""},e.prototype._getFragmentCode=function(t,e,n){return""},e.prototype._activate=function(){},e.prototype._setRenderState=function(t){},e.prototype._deactivate=function(){this._invalid=!1},e}(J),Ul=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._epsilon=.02,e._alpha=1,e.autoUpdate=!0,e}return o(e,t),Object.defineProperty(e.prototype,"textureMap",{get:function(){return this._textureMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"light",{get:function(){return this._light},set:function(t){this._light!=t&&(this._light=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"epsilon",{get:function(){return this._epsilon},set:function(t){this._epsilon=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size!=t&&(this._size=t,this._updateSize())},enumerable:!1,configurable:!0}),e.prototype.update=function(t){this._updateProjection(t.rootNode.view.projection),this._renderMap(t)},e.prototype._updateProjection=function(t){throw new u},e.prototype._renderMap=function(t){throw new u},e.prototype._updateSize=function(){throw new u},e.prototype.dispose=function(){this._light=null},e}(Fl),Vl=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.autoUpdate=!0,i._mapper=e,i._shader=n,i._shader.renderMaterial.renderer._addMapper(i._mapper),i}return o(e,t),e.prototype._cleanCompilationData=function(){t.prototype._cleanCompilationData.call(this),this._depthMapCoordReg=null},Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMapCoordReg",{get:function(){return this._depthMapCoordReg},enumerable:!1,configurable:!0}),e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._shader.renderMaterial.renderer._removeMapper(this._mapper)},e.prototype._initVO=function(t){this._texture=this._mapper.textureMap.getAbstraction(this._shader),this._texture._initVO(t)},e.prototype._initConstants=function(){this._texture._initConstants()},e.prototype._getFragmentCode=function(t,e,n){var i=e.getFreeFragmentConstant();return this._fragmentAlphaIndex=4*i.index,"add "+t+".w, "+t+".w, "+i+".x\nsat "+t+".w, "+t+".w\n"},e.prototype._activate=function(){this._shader.fragmentConstantData[this._fragmentAlphaIndex]=1-this._mapper.alpha,this._texture.activate()},e.prototype._setRenderState=function(t){this._texture._setRenderState(t)},e}(kl),jl=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._lightOffset=1e4,n._snap=64,n._size=2048,n._image2D=e||new fe(n._size,n._size),n._textureMap=new Rl(n._image2D),n.iAddTexture(n._textureMap),n._cullPlanes=[],n._overallDepthProjection=new bt,n._overallDepthProjection.transform=new V,n._localFrustum=[],n._matrix=new U,n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._textureMap.image=null,this._textureMap=null,this._image2D=null},Object.defineProperty(e.prototype,"snap",{get:function(){return this._snap},set:function(t){this._snap=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightOffset",{get:function(){return this._lightOffset},set:function(t){this._lightOffset=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthProjection",{get:function(){return this._overallDepthProjection.viewMatrix3D},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._maxZ-this._minZ},enumerable:!1,configurable:!0}),e.prototype._updateSize=function(){this._image2D._setSize(this._size,this._size)},e.prototype._updateProjection=function(t){this._updateProjectionFromFrustumCorners(t,t.viewFrustumCorners,this._matrix),this._overallDepthProjection.frustumMatrix3D=this._matrix,this._updateCullPlanes(t)},e.prototype._renderMap=function(t){var e=new gr(null,t.rootNode.view.stage);e.preservePixelRatio=!1,e.target=this._image2D,e.projection=this._overallDepthProjection;var n=no.getInstance(go).getRenderer(e.getNode(t.rootNode.container).partition);n.cullPlanes=this._cullPlanes,n.render()},e.prototype._updateCullPlanes=function(t){var e=this._overallDepthProjection.viewFrustumPlanes,n=t.viewFrustumPlanes;this._cullPlanes.length=4,this._cullPlanes[0]=e[0],this._cullPlanes[1]=e[1],this._cullPlanes[2]=e[2],this._cullPlanes[3]=e[3];for(var i=this._light.sceneDirection,r=i.x,o=i.y,a=i.z,s=4,l=0;l<6;++l){var u=n[l];u.a*r+u.b*o+u.c*a<0&&(this._cullPlanes[s++]=u)}},e.prototype._updateProjectionFromFrustumCorners=function(t,e,n){var i,r,o,a,s,l,u,c,h=t.transform.matrix3D.position,p=this._light.sceneDirection;for(this._overallDepthProjection.transform.matrix3D=this._light.transform.matrix3D,i=Math.floor((h.x-p.x*this._lightOffset)/this._snap)*this._snap,r=Math.floor((h.y-p.y*this._lightOffset)/this._snap)*this._snap,o=Math.floor((h.z-p.z*this._lightOffset)/this._snap)*this._snap,this._overallDepthProjection.transform.moveTo(i,r,o),this._overallDepthProjection.transform.inverseMatrix3D.transformVectors(e,this._localFrustum),a=l=this._localFrustum[0],s=u=this._localFrustum[1],this._maxZ=this._localFrustum[2],c=3;c<24;)(i=this._localFrustum[c])<a&&(a=i),i>l&&(l=i),(r=this._localFrustum[c+1])<s&&(s=r),r>u&&(u=r),(o=this._localFrustum[c+2])>this._maxZ&&(this._maxZ=o),c+=3;this._minZ=1;var d=l-a,f=u-s,_=1/(this._maxZ-this._minZ);a<0&&(a-=this._snap),s<0&&(s-=this._snap),a=Math.floor(a/this._snap)*this._snap,s=Math.floor(s/this._snap)*this._snap;var g=2*this._snap;l=a+(d=Math.floor(d/g+2)*g),u=s+(f=Math.floor(f/g+2)*g),d=1/d,f=1/f;var m=n._rawData;m[0]=2*d,m[5]=2*f,m[10]=_,m[12]=-(l+a)*d,m[13]=-(u+s)*f,m[14]=-this._minZ*_,m[15]=1,m[1]=m[2]=m[3]=m[4]=m[6]=m[7]=m[8]=m[9]=m[11]=0,n.invalidatePosition()},e.assetType="[asset DirectionalShadowMapper]",e}(Ul),Gl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._initVO=function(e){t.prototype._initVO.call(this,e),e.needsView=!0,e.needsGlobalVertexPos=!0},e.prototype._initConstants=function(){t.prototype._initConstants.call(this);var e=this._shader.vertexConstantData,n=this._vertexScalingIndex;e[n]=.5,e[n+1]=.5,e[n+2]=0,e[n+3]=1,this._depthProjectionMatrix=new U(new Float32Array(this._shader.vertexConstantData.buffer,4*(n+4),16))},e.prototype._getVertexCode=function(t,e){var n="",i=t.getFreeVertexVectorTemp(),r=t.getFreeVertexConstant();this._vertexScalingIndex=4*r.index;var o=t.getFreeVertexConstant();return t.getFreeVertexConstant(),t.getFreeVertexConstant(),t.getFreeVertexConstant(),this._depthMapCoordReg=t.getFreeVarying(),n+="m44 "+i+", "+e.globalPositionVertex+", "+o+"\ndiv "+i+", "+i+", "+i+".w\nmul "+i+".xy, "+i+".xy, "+r+".xy\nadd "+this._depthMapCoordReg+", "+i+", "+r+".xxwz\n"},e.prototype._activate=function(){t.prototype._activate.call(this),this._shader.vertexConstantData[this._vertexScalingIndex+3]=-1/(this._mapper.depth*this._mapper.epsilon),this._depthProjectionMatrix.copyFrom(this._mapper.depthProjection,!0)},e}(Vl);Dr.registerAbstraction(Gl,jl);var Ql=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._color=16777215,n._colorR=1,n._colorG=1,n._colorB=1,n._ambientColor=16777215,n._ambient=0,n._specular=1,n._diffuse=1,n._shadowsEnabled=!1,n._ambientR=0,n._ambientG=0,n._ambientB=0,n._specularR=1,n._specularG=1,n._specularB=1,n._diffuseR=1,n._diffuseG=1,n._diffuseB=1,n._onInvalidateConcatenatedMatrix3DDelegate=function(t){return n._onInvalidateConcatenatedMatrix3D(t)},n.transform=e||new V,n}return o(e,t),Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},set:function(t){this._transform!=t&&(this._transform&&this._transform.removeEventListener(P.INVALIDATE_MATRIX3D,this._onInvalidateConcatenatedMatrix3DDelegate),this._transform=t,this._transform&&this._transform.addEventListener(P.INVALIDATE_MATRIX3D,this._onInvalidateConcatenatedMatrix3DDelegate))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowsEnabled",{get:function(){return this._shadowsEnabled},set:function(t){this._shadowsEnabled!=t&&(this._shadowsEnabled=t,t&&null==this._shadowMapper?(this._shadowMapper=this._createShadowMapper(),this._shadowMapper.light=this):t||(this._shadowMapper.dispose(),this._shadowMapper=null),this.dispatchEvent(new Pl(Pl.CASTS_SHADOW_CHANGE)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specular",{get:function(){return this._specular},set:function(t){t<0&&(t=0),this._specular=t,this._updateSpecular()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diffuse",{get:function(){return this._diffuse},set:function(t){t<0&&(t=0),this._diffuse=t,this._updateDiffuse()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._colorR=(this._color>>16&255)/255,this._colorG=(this._color>>8&255)/255,this._colorB=(255&this._color)/255,this._updateDiffuse(),this._updateSpecular()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ambient",{get:function(){return this._ambient},set:function(t){t<0?t=0:t>1&&(t=1),this._ambient=t,this._updateAmbient()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ambientColor",{get:function(){return this._ambientColor},set:function(t){this._ambientColor!=t&&(this._ambientColor=t,this._updateAmbient())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowMapper",{get:function(){return this.shadowsEnabled=!0,this._shadowMapper},set:function(t){this._shadowMapper!=t&&(this._shadowMapper=t,this._shadowMapper.light=this)},enumerable:!1,configurable:!0}),e.prototype._createShadowMapper=function(){throw new u},e.prototype._updateSpecular=function(){this._specularR=this._colorR*this._specular,this._specularG=this._colorG*this._specular,this._specularB=this._colorB*this._specular},e.prototype._updateDiffuse=function(){this._diffuseR=this._colorR*this._diffuse,this._diffuseG=this._colorG*this._diffuse,this._diffuseB=this._colorB*this._diffuse},e.prototype._updateAmbient=function(){this._ambientR=(this._ambientColor>>16&255)/255*this._ambient,this._ambientG=(this._ambientColor>>8&255)/255*this._ambient,this._ambientB=(255&this._ambientColor)/255*this._ambient},e.prototype._onInvalidateConcatenatedMatrix3D=function(t){},e}(_),zl=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=t.call(this,n)||this;return i._sceneDirectionDirty=!0,e&&(i.direction=e),i._sceneDirection=new L,i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sceneDirection",{get:function(){return this._sceneDirectionDirty&&this._updateSceneDirection(),this._sceneDirection},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t,this._tmpLookAt||(this._tmpLookAt=new L),this._tmpLookAt.x=this.transform.position.x+this._direction.x,this._tmpLookAt.y=this.transform.position.y+this._direction.y,this._tmpLookAt.z=this.transform.position.z+this._direction.z,this.transform.lookAt(this._tmpLookAt)},enumerable:!1,configurable:!0}),e.prototype._onInvalidateConcatenatedMatrix3D=function(t){this._sceneDirectionDirty=!0},e.prototype._updateSceneDirection=function(){this._sceneDirectionDirty=!1,this.transform.matrix3D.copyColumnTo(2,this._sceneDirection),this._sceneDirection.normalize()},e.prototype._createShadowMapper=function(){return new jl},e.assetType="[light DirectionalLight]",e}(Ql),Hl=function(t){function e(e,n){void 0===n&&(n=null);var i=t.call(this)||this;return i.diffuseSampler=new Qe,i.specularSampler=new Qe,i.diffuseMap=e,i.specularMap=n,i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[light LightProbe]",e}(Ql),Xl=function(t){function e(e,n){void 0===n&&(n=null);var i=t.call(this,n)||this;return i._mapper=e,i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapper",{get:function(){return this._mapper},enumerable:!1,configurable:!0}),e.assetType="[texture ShadowTextureCube]",e}(ho),Yl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFragmentCode=function(e,n,i,r){var o=n.getFreeFragmentConstant();this._positionIndex=4*o.index;var a=n.getFreeFragmentConstant(),s="",l=n.getFreeFragmentVectorTemp();return s+="sub "+l+", "+r+", "+o+"\ndp3 "+l+".w, "+l+".xyz, "+l+".xyz\nnrm "+l+".xyz, "+l+".xyz\n",s+=t.prototype._getFragmentCode.call(this,e,n,i,l)+"add "+l+".w, "+l+".w, "+a+".x\nmul "+l+".w, "+l+".w, "+o+".w\nslt "+e+".w, "+l+".w, "+e+".w\n"},e.prototype._activate=function(){t.prototype.activate.call(this);var e=this._shader.fragmentConstantData,n=this._positionIndex,i=this._texture.mapper.light.transform.matrix3D.position,r=this._texture.mapper.light.fallOff;e[n]=i.x,e[n+1]=i.y,e[n+2]=i.z,e[n+3]=1/(2*r*r),e[n+4]=-Math.pow(1/(r*this._texture.mapper.epsilon),2)},e}(Ll);Dr.registerAbstraction(Yl,Xl);var ql=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._needsRender=new Array,n._size=512,n._imageCube=e||new Fe(n._size),n._textureMap=new Xl(n,n._imageCube),n.iAddTexture(n._textureMap),n.initCameras(),n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._textureMap.image=null,this._textureMap=null,this._imageCube=null},e.prototype.initCameras=function(){this._depthProjections=new Array,this.addProjection(0,90,0),this.addProjection(0,-90,0),this.addProjection(-90,0,0),this.addProjection(90,0,0),this.addProjection(0,0,0),this.addProjection(0,180,0)},e.prototype.addProjection=function(t,e,n){var i=new xt;i.transform=new V,i.transform.rotateTo(t,e,n),i.near=.01,i.fieldOfView=90,this._depthProjections.push(i)},e.prototype._updateSize=function(){this._imageCube._setSize(this._size)},e.prototype._updateProjection=function(t){for(var e=this._light.fallOff,n=this._light.transform.matrix3D.position,i=0;i<6;++i)this._depthProjections[i].far=e,this._depthProjections[i].transform.moveTo(n.x,n.y,n.z),this._needsRender[i]=!0},e.prototype._renderMap=function(t){for(var e=new gr(null,t.rootNode.view.stage),n=no.getInstance(mo).getRenderer(e.getNode(t.rootNode.container).partition),i=0;i<6;++i)this._needsRender[i]&&(e.target=this._imageCube,e.projection=this._depthProjections[i],n.render(null,i))},e.assetType="[asset PointShadowMapper]",e}(Ul),Kl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._initVO=function(e){t.prototype._initVO.call(this,e),e.needsGlobalFragmentPos=!0},e.prototype._getVertexCode=function(t,e){return this._depthMapCoordReg=e.globalPositionVarying,""},e}(Vl);Dr.registerAbstraction(Kl,ql);var Wl=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=t.call(this,n)||this;return i._radius=9e4,i._fallOff=1e5,e&&(i._transform.matrix3D._rawData[12]=e.x,i._transform.matrix3D._rawData[13]=e.y,i._transform.matrix3D._rawData[14]=e.z,i._transform.invalidatePosition()),i._fallOffFactor=1/(i._fallOff*i._fallOff-i._radius*i._radius),i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this._radius<0?this._radius=0:this._radius>this._fallOff&&(this._fallOff=this._radius),this._fallOffFactor=1/(this._fallOff*this._fallOff-this._radius*this._radius)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fallOff",{get:function(){return this._fallOff},set:function(t){this._fallOff=t,this._fallOff<0&&(this._fallOff=0),this._fallOff<this._radius&&(this._radius=this._fallOff),this._fallOffFactor=1/(this._fallOff*this._fallOff-this._radius*this._radius)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fallOffFactor",{get:function(){return this._fallOffFactor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._transform.position.x},set:function(t){this._transform.position.x!=t&&(this._transform.matrix3D._rawData[12]=t,this._transform.invalidatePosition())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._transform.position.y},set:function(t){this._transform.position.y!=t&&(this._transform.matrix3D._rawData[13]=t,this._transform.invalidatePosition())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._transform.position.z},set:function(t){this._transform.position.z!=t&&(this._transform.matrix3D._rawData[14]=t,this._transform.invalidatePosition())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scenePosition",{get:function(){return this._transform.matrix3D.position},enumerable:!1,configurable:!0}),e.prototype._createShadowMapper=function(){return new ql},e.assetType="[light PointLight]",e}(Ql),Jl=function(t){function e(){var e=t.call(this)||this;return e._alpha=1,e._strength=1,e}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){this._strength!=t&&(this._strength=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!=t&&(this._alpha=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!=t&&(this._texture&&this.iRemoveTexture(this._texture),this._texture=t,this._texture&&this.iAddTexture(this._texture),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.prototype.copyFrom=function(t){},e.assetType="[asset AmbientBasicMethod]",e}(Fl),Zl=function(t){function e(e,n){var i,r=this;return(r=t.call(this,e,n)||this)._method=e,r._shader=n,r._texture=null===(i=r._method.texture)||void 0===i?void 0:i.getAbstraction(r._shader),r}return o(e,t),e.prototype.onInvalidate=function(e){var n;t.prototype.onInvalidate.call(this,e);var i=null===(n=this._method.texture)||void 0===n?void 0:n.getAbstraction(this._shader);this._texture!=i&&(this._texture&&(this._texture.onClear(null),this._texture=null),this._texture=i)},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._texture&&(this._texture.onClear(new h(h.CLEAR,this._method.texture)),this._texture=null),this._method=null,this._shader=null},e.prototype._initVO=function(t){this._texture&&(this._texture._initVO(t),this._method.texture instanceof co?t.needsNormals=!0:this._shader.uvDependencies++)},e.prototype._initConstants=function(){this._texture&&this._texture._initConstants()},e.prototype._getFragmentCode=function(t,e,n){var i="";if(this._texture){if(i+=this._texture._getFragmentCode(t,e,n,this._method.texture instanceof co?n.normalFragment:n.uvVarying),this._shader.alphaThreshold>0){var r=e.getFreeFragmentConstant();this._colorIndex=4*r.index,i+="sub "+t+".w, "+t+".w, "+r+".x\nkil "+t+".w\nadd "+t+".w, "+t+".w, "+r+".x\n"}}else{var o=e.getFreeFragmentConstant();this._colorIndex=4*o.index,i+="mov "+t+", "+o+"\n"}return i},e.prototype._activate=function(){if(this._texture)this._texture.activate(),this._invalid&&this._shader.alphaThreshold>0&&(this._shader.fragmentConstantData[this._colorIndex]=this._shader.alphaThreshold);else if(this._invalid){var t=this._colorIndex,e=this._shader.fragmentConstantData,n=this._shader.numLights?16777215:this._shader.renderMaterial.style.color;e[t]=(n>>16&255)/255*this._method.strength,e[t+1]=(n>>8&255)/255*this._method.strength,e[t+2]=(255&n)/255*this._method.strength,e[t+3]=this._method.alpha}},e.prototype._setRenderState=function(t){this._texture&&this._texture._setRenderState(t)},e}(kl);Dr.registerAbstraction(Zl,Jl);var $l=function(t){function e(e){var n=t.call(this)||this;return n._castingLight=e,e.shadowsEnabled=!0,n._shadowMapper=e.shadowMapper,n.iAddTexture(e.shadowMapper.textureMap),n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"castingLight",{get:function(){return this._castingLight},enumerable:!1,configurable:!0}),e.assetType="[asset AmbientDepthMethod]",e}(Jl),tu=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=e.castingLight.shadowMapper.textureMap;return i._shadowTexture=r.getAbstraction(i._shader),i}return o(e,t),e.prototype._initVO=function(t){this._shadowTexture._initVO(t)},e.prototype._initConstants=function(){this._shadowTexture._initConstants();var t=this._shader.fragmentConstantData,e=this._decRegIndex;t[e]=1,t[e+1]=1/255,t[e+2]=1/65025,t[e+3]=1/16581375},e.prototype._getFragmentCode=function(t,e,n){var i="",r=e.getFreeFragmentConstant();return this._decRegIndex=4*r.index,i+=this._shadowTexture._getFragmentCode(t,e,n,n.uvVarying)+"dp4 "+t+".x, "+t+", "+r+"\nmov "+t+".yz, "+t+".xx\t\t\t\nmov "+t+".w, "+r+".x\nsub "+t+".xyz, "+r+".xxx, "+t+".xyz\n"},e}(Zl);Dr.registerAbstraction(tu,$l);var eu=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._onShaderInvalidatedDelegate=function(t){return n.onShaderInvalidated(t)},n._baseMethod=e||n.createBaseMethod(),n._baseMethod.addEventListener(Ol.SHADER_INVALIDATED,n._onShaderInvalidatedDelegate),n}return o(e,t),Object.defineProperty(e.prototype,"baseMethod",{get:function(){return this._baseMethod},set:function(t){this._baseMethod!=t&&(this._baseMethod.removeEventListener(Ol.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this._baseMethod=t,this._baseMethod.addEventListener(Ol.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.prototype.createBaseMethod=function(){throw new u},e.prototype.iAddOwner=function(e){t.prototype.iAddOwner.call(this,e),this._baseMethod.iAddOwner(e)},e.prototype.iRemoveOwner=function(e){t.prototype.iRemoveOwner.call(this,e),this._baseMethod.iRemoveOwner(e)},e.prototype.dispose=function(){this._baseMethod.removeEventListener(Ol.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate)},e.prototype.onShaderInvalidated=function(t){this.invalidateShaderProgram()},e}(Fl),nu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.chunkVO=new Yr,i._baseChunk=e.baseMethod.getAbstraction(n),i}return o(e,t),e.prototype._isUsed=function(){return!0},e.prototype._usesTangentSpace=function(){return this._baseChunk._usesTangentSpace()},e.prototype._initVO=function(t){this._baseChunk._initVO(t)},e.prototype._initConstants=function(){this._baseChunk._initConstants()},e.prototype._activate=function(){this._baseChunk._activate()},e.prototype._setRenderState=function(t){this._baseChunk._setRenderState(t)},e.prototype._deactivate=function(){this._baseChunk._deactivate(),this._invalid=!1},e.prototype._getVertexCode=function(t,e){return this._baseChunk._getVertexCode(t,e)},e.prototype._getFragmentCode=function(t,e,n){return this._baseChunk._getFragmentCode(t,e,n)},e.prototype._reset=function(t){this._baseChunk._reset(t),this._invalid=!0,this._cleanCompilationData()},e.prototype._cleanCompilationData=function(){this._baseChunk._cleanCompilationData()},e}(J),iu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFragmentPreLightingCode=function(t,e){return this._baseChunk._getFragmentPreLightingCode(t,e)},e.prototype._getFragmentCodePerLight=function(t,e,n,i){var r=this._baseChunk._getFragmentCodePerLight(t,e,n,i);return this._totalLightColorReg=this._baseChunk._totalLightColorReg,r},e.prototype._getFragmentCodePerProbe=function(t,e,n,i){var r=this._baseChunk._getFragmentCodePerProbe(t,e,n,i);return this._totalLightColorReg=this._baseChunk._totalLightColorReg,r},e}(nu),ru=function(t){function e(){var e=t.call(this)||this;return e._multiply=!0,e._ambientColorR=1,e._ambientColorG=1,e._ambientColorB=1,e._color=16777215,e._colorR=1,e._colorG=1,e._colorB=1,e}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multiply",{get:function(){return this._multiply},set:function(t){this._multiply!=t&&(this._multiply=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!=t&&(this._texture&&this.iRemoveTexture(this._texture),this._texture=t,this._texture&&this.iAddTexture(this._texture),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._texture=null},e.prototype.copyFrom=function(t){var e=t;this.texture=e.texture,this.multiply=e.multiply,this.color=e.color},e.assetType="[asset DiffuseBasicMethod]",e}(Fl),ou=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._ambientColorR=1,i._ambientColorG=1,i._ambientColorB=1,i._color=16777215,i._colorR=1,i._colorG=1,i._colorB=1,i._method=e,i._shader=n,i}return o(e,t),e.prototype.onInvalidate=function(e){t.prototype.onInvalidate.call(this,e),this._updateProperties()},e.prototype._isUsed=function(){return Boolean(this._shader.numLights)},e.prototype._initVO=function(t){this._method.texture?(this._texture=this._method.texture.getAbstraction(this._shader),this._texture._initVO(t),this._method.texture instanceof co?t.needsNormals=!0:this._shader.uvDependencies++):this._texture&&(this._texture=null),this._shader.numLights&&(this._shader.usesCommonData=!0,t.needsNormals=!0)},e.prototype._initConstants=function(){this._texture&&this._texture._initConstants(),this._updateProperties()},e.prototype._cleanCompilationData=function(){t.prototype._cleanCompilationData.call(this),this._totalLightColorReg=null},e.prototype._getFragmentPreLightingCode=function(t,e){return this._pIsFirstLight=!0,t.addFragmentTempUsages(this._totalLightColorReg=t.getFreeFragmentVectorTemp(),1),""},e.prototype._getFragmentCodePerLight=function(t,e,n,i){var r,o="";return this._pIsFirstLight?r=this._totalLightColorReg:(r=n.getFreeFragmentVectorTemp(),n.addFragmentTempUsages(r,1)),o+="dp3 "+r+".x, "+t+", "+i.normalFragment+"\nmax "+r+".w, "+r+".x, "+i.commons+".y\n",this._shader.usesLightFallOff&&(o+="mul "+r+".w, "+r+".w, "+t+".w\n"),null!=this._modulateFunction&&(o+=this._modulateFunction(r,n,i)),o+="mul "+r+", "+r+".w, "+e+"\n",this._pIsFirstLight||(o+="add "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+", "+r+"\n",n.removeFragmentTempUsage(r)),this._pIsFirstLight=!1,o},e.prototype._getFragmentCodePerProbe=function(t,e,n,i){var r,o="";return this._pIsFirstLight?r=this._totalLightColorReg:(r=n.getFreeFragmentVectorTemp(),n.addFragmentTempUsages(r,1)),o+="tex "+r+", "+i.normalFragment+", "+t+" <cube,linear,miplinear>\nmul "+r+".xyz, "+r+".xyz, "+e+"\n",null!=this._modulateFunction&&(o+=this._modulateFunction(r,n,i)),this._pIsFirstLight||(o+="add "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+", "+r+"\n",n.removeFragmentTempUsage(r)),this._pIsFirstLight=!1,o},e.prototype._getFragmentCode=function(t,e,n){var i,r="";n.shadowTarget&&(r+=this._applyShadow(e,n)),e.addFragmentTempUsages(i=e.getFreeFragmentVectorTemp(),1);var o=e.getFreeFragmentConstant();if(this._ambientColorRegister=4*o.index,this._texture)r+=this._texture._getFragmentCode(i,e,n,this._method.texture instanceof co?n.normalFragment:n.uvVarying);else{var a=e.getFreeFragmentConstant();this._diffuseColorRegister=4*a.index,r+="mov "+i+", "+a+"\n"}return r+="sat "+this._totalLightColorReg+", "+this._totalLightColorReg+"\nmul "+i+".xyz, "+i+", "+this._totalLightColorReg+"\n",this._method.multiply?r+="add "+i+".xyz, "+i+", "+o+"\nmul "+t+".xyz, "+t+", "+i+"\n":this._texture?r+="mul "+t+".xyz, "+t+", "+o+"\nmul "+this._totalLightColorReg+".xyz, "+t+", "+this._totalLightColorReg+"\nsub "+t+".xyz, "+t+", "+this._totalLightColorReg+"\nadd "+t+".xyz, "+t+", "+i+"\n":r+="mul "+this._totalLightColorReg+".xyz, "+o+", "+this._totalLightColorReg+"\nsub "+this._totalLightColorReg+".xyz, "+o+", "+this._totalLightColorReg+"\nadd "+i+".xyz, "+i+", "+this._totalLightColorReg+"\nmul "+t+".xyz, "+t+", "+i+"\n",e.removeFragmentTempUsage(this._totalLightColorReg),e.removeFragmentTempUsage(i),r},e.prototype._applyShadow=function(t,e){return"mul "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+", "+e.shadowTarget+".w\n"},e.prototype._activate=function(){if(this._texture)this._texture.activate();else{var t=this._diffuseColorRegister,e=this._shader.fragmentConstantData;this._method.multiply?(e[t]=this._colorR*this._ambientColorR,e[t+1]=this._colorG*this._ambientColorG,e[t+2]=this._colorB*this._ambientColorB):(e[t]=this._colorR,e[t+1]=this._colorG,e[t+2]=this._colorB),e[t+3]=1}},e.prototype._updateProperties=function(){this._ambientColor=this._shader.renderMaterial.style.color,this._ambientColorR=(this._ambientColor>>16&255)/255,this._ambientColorG=(this._ambientColor>>8&255)/255,this._ambientColorB=(255&this._ambientColor)/255,this._color=this._method.color,this._colorR=(this._color>>16&255)/255,this._colorG=(this._color>>8&255)/255,this._colorB=(255&this._color)/255},e.prototype._setRenderState=function(t){this._texture&&this._texture._setRenderState(t);var e=this._ambientColorRegister,n=this._shader.fragmentConstantData;n[e]=this._shader.ambientR*this._ambientColorR,n[e+1]=this._shader.ambientG*this._ambientColorG,n[e+2]=this._shader.ambientB*this._ambientColorB,n[e+3]=1},e}(kl);Dr.registerAbstraction(ou,ru);var au=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e)||this}return o(e,t),e.prototype.createBaseMethod=function(){return new ru},Object.defineProperty(e.prototype,"texture",{get:function(){return this._baseMethod.texture},set:function(t){this._baseMethod.texture=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._baseMethod.color},set:function(t){this._baseMethod.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multiply",{get:function(){return this._baseMethod.multiply},set:function(t){this._baseMethod.multiply=t},enumerable:!1,configurable:!0}),e}(eu),su=function(t){function e(e,n,i){void 0===e&&(e=3),void 0===n&&(n=.1),void 0===i&&(i=null);var r=t.call(this,i)||this;return r._levels=e,r._smoothness=n,r}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return this._levels},set:function(t){this._levels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"smoothness",{get:function(){return this._smoothness},set:function(t){this._smoothness=t},enumerable:!1,configurable:!0}),e.assetType="[asset DiffuseCelMethod]",e}(au),lu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i._baseChunk._modulateFunction=function(t,e,n){return i.clampDiffuse(t,e,n)},i}return o(e,t),e.prototype._initConstants=function(){t.prototype._initConstants.call(this);var e=this._shader.fragmentConstantData,n=this._clampDataIndex;e[n+1]=1,e[n+2]=0},e.prototype._cleanCompilationData=function(){t.prototype._cleanCompilationData.call(this),this._clampDataRegister=null},e.prototype._getFragmentPreLightingCode=function(e,n){return this._clampDataRegister=e.getFreeFragmentConstant(),this._clampDataIndex=4*this._clampDataRegister.index,t.prototype._getFragmentPreLightingCode.call(this,e,n)},e.prototype._activate=function(){if(t.prototype._activate.call(this),this._invalid){var e=this._shader.fragmentConstantData,n=this._clampDataIndex;e[n]=this._method.levels,e[n+3]=this._method.smoothness}},e.prototype.clampDiffuse=function(t,e,n){return"mul "+t+".w, "+t+".w, "+this._clampDataRegister+".x\nfrc "+t+".z, "+t+".w\nsub "+t+".y, "+t+".w, "+t+".z\nmov "+t+".x, "+this._clampDataRegister+".x\nsub "+t+".x, "+t+".x, "+this._clampDataRegister+".y\nrcp "+t+".x,"+t+".x\nmul "+t+".w, "+t+".y, "+t+".x\nsub "+t+".y, "+t+".w, "+t+".x\ndiv "+t+".z, "+t+".z, "+this._clampDataRegister+".w\nsat "+t+".z, "+t+".z\nmul "+t+".w, "+t+".w, "+t+".z\nsub "+t+".z, "+this._clampDataRegister+".y, "+t+".z\nmul "+t+".y, "+t+".y, "+t+".z\nadd "+t+".w, "+t+".w, "+t+".y\nsat "+t+".w, "+t+".w\n"},e}(iu);Dr.registerAbstraction(lu,su);var uu=function(t){function e(e){var n=t.call(this)||this;return n._gradient=e,n.iAddTexture(n._gradient),n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gradient",{get:function(){return this._gradient},set:function(t){this._gradient!=t&&(this._gradient&&this.iRemoveTexture(this._gradient),this._gradient=t,this._gradient&&this.iAddTexture(this._gradient),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.assetType="[asset DiffuseGradientMethod]",e}(ru),cu=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype._initVO=function(e){t.prototype._initVO.call(this,e);var n=this._method.gradient||new fo;this._gradient=n.getAbstraction(this._shader),this._gradient._initVO(e)},e.prototype._initConstants=function(){this._gradient._initConstants()},e.prototype._getFragmentPreLightingCode=function(e,n){var i=t.prototype._getFragmentPreLightingCode.call(this,e,n);return this._pIsFirstLight=!0,i},e.prototype._getFragmentCodePerLight=function(t,e,n,i){var r,o="";return this._pIsFirstLight?r=this._totalLightColorReg:(r=n.getFreeFragmentVectorTemp(),n.addFragmentTempUsages(r,1)),o+="dp3 "+r+".w, "+t+".xyz, "+i.normalFragment+".xyz\nmul "+r+".w, "+r+".w, "+i.commons+".x\nadd "+r+".w, "+r+".w, "+i.commons+".x\nmul "+r+".xyz, "+r+".w, "+t+".w\n",null!=this._modulateFunction&&(o+=this._modulateFunction(r,n,i)),o+=this._gradient._getFragmentCode(r,n,i,r)+"mul "+r+".xyz, "+r+".xyz, "+e+".xyz\n",this._pIsFirstLight||(o+="add "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+".xyz, "+r+".xyz\n",n.removeFragmentTempUsage(r)),this._pIsFirstLight=!1,o},e.prototype._activate=function(){t.prototype._activate.call(this),this._gradient.activate()},e.prototype._setRenderState=function(e){t.prototype._setRenderState.call(this,e),this._gradient._setRenderState(e)},e}(ou);Dr.registerAbstraction(cu,uu);var hu=function(t){function e(e,n,i,r){void 0===n&&(n="multiply"),void 0===i&&(i=!1),void 0===r&&(r=null);var o=t.call(this,r)||this;return o._lightMap=e,o.blendMode=n,o._useSecondaryUV=i,o._lightMap&&o.iAddTexture(o._lightMap),o}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){if(t!=e.ADD&&t!=e.MULTIPLY)throw new Error("Unknown blendmode!");this._blendMode!=t&&(this._blendMode=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightMap",{get:function(){return this._lightMap},set:function(t){this._lightMap!=t&&(this._lightMap&&this.iRemoveTexture(this._lightMap),this._lightMap=t,this._lightMap&&this.iAddTexture(this._lightMap),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useSecondaryUV",{get:function(){return this._useSecondaryUV},set:function(t){this._useSecondaryUV!=t&&(this._useSecondaryUV=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.MULTIPLY="multiply",e.ADD="add",e.assetType="[asset DiffuseLightMapMethod]",e}(au),pu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._initVO=function(t){var e=this._method.lightMap||new fo;this._lightMap=e.getAbstraction(this._shader),this._lightMap._initVO(t),this._method.useSecondaryUV?this._shader.secondaryUVDependencies++:this._shader.uvDependencies++},e.prototype._initConstants=function(){this._lightMap._initConstants()},e.prototype._getFragmentCode=function(e,n,i){var r,o=n.getFreeFragmentVectorTemp();switch(r=this._lightMap._getFragmentCode(o,n,i,this._method.useSecondaryUV?i.secondaryUVVarying:i.uvVarying),this._method.blendMode){case hu.MULTIPLY:r+="mul "+this._totalLightColorReg+", "+this._totalLightColorReg+", "+o+"\n";break;case hu.ADD:r+="add "+this._totalLightColorReg+", "+this._totalLightColorReg+", "+o+"\n"}return r+=t.prototype._getFragmentCode.call(this,e,n,i)},e.prototype._activate=function(){t.prototype._activate.call(this),this._lightMap.activate()},e.prototype._setRenderState=function(e){t.prototype._setRenderState.call(this,e),this._lightMap._setRenderState(e)},e}(iu);Dr.registerAbstraction(pu,hu);var du=function(t){function e(e){void 0===e&&(e=.5);var n=t.call(this)||this;return n.wrapFactor=e,n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapFactor",{get:function(){return this._wrapFactor},set:function(t){this._wrapFactor=t,this._wrapFactor=1/(t+1),this.invalidate()},enumerable:!1,configurable:!0}),e.assetType="[asset DiffuseWrapMethod]",e}(ru),fu=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype._cleanCompilationData=function(){t.prototype._cleanCompilationData.call(this),this._wrapDataRegister=null},e.prototype._getFragmentPreLightingCode=function(e,n){var i=t.prototype._getFragmentPreLightingCode.call(this,e,n);return this._pIsFirstLight=!0,this._wrapDataRegister=e.getFreeFragmentConstant(),this._wrapDataIndex=4*this._wrapDataRegister.index,i},e.prototype._getFragmentCodePerLight=function(t,e,n,i){var r,o="";return this._pIsFirstLight?r=this._totalLightColorReg:(r=n.getFreeFragmentVectorTemp(),n.addFragmentTempUsages(r,1)),o+="dp3 "+r+".x, "+t+".xyz, "+i.normalFragment+".xyz\nadd "+r+".y, "+r+".x, "+this._wrapDataRegister+".x\nmul "+r+".y, "+r+".y, "+this._wrapDataRegister+".y\nsat "+r+".w, "+r+".y\nmul "+r+".xz, "+r+".w, "+t+".wz\n",null!=this._modulateFunction&&(o+=this._modulateFunction(t,n,i)),o+="mul "+r+", "+r+".x, "+e+"\n",this._pIsFirstLight||(o+="add "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+".xyz, "+r+".xyz\n",n.removeFragmentTempUsage(r)),this._pIsFirstLight=!1,o},e.prototype._activate=function(){if(t.prototype._activate.call(this),this._invalid){var e=this._wrapDataIndex,n=this._shader.fragmentConstantData;n[e]=this._method.wrapFactor,n[e+1]=1/(this._method.wrapFactor+1)}},e}(ou);Dr.registerAbstraction(fu,du);var _u=function(t){function e(e,n){void 0===n&&(n=!1);var i=t.call(this)||this;return i._texture=e,i._useSecondaryUV=n,i._texture&&i.iAddTexture(i._texture),i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!=t&&(this._texture&&this.iRemoveTexture(this._texture),this._texture=t,this._texture&&this.iAddTexture(this._texture),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useSecondaryUV",{get:function(){return this._useSecondaryUV},set:function(t){this._useSecondaryUV!=t&&(this._useSecondaryUV=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.assetType="[asset EffectAlphaMaskMethod]",e}(Fl),gu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._initVO=function(t){var e=this._method.texture||new fo;this._alphaMask=e.getAbstraction(this._shader),this._alphaMask._initVO(t),this._method.useSecondaryUV?this._shader.secondaryUVDependencies++:this._shader.uvDependencies++},e.prototype._initConstants=function(){this._alphaMask._initConstants()},e.prototype._getFragmentCode=function(t,e,n){var i=e.getFreeFragmentVectorTemp();return this._alphaMask._getFragmentCode(i,e,n,this._method.useSecondaryUV?n.secondaryUVVarying:n.uvVarying)+"mul "+t+", "+t+", "+i+".x\n"},e.prototype._activate=function(){t.prototype._activate.call(this),this._alphaMask.activate()},e.prototype._setRenderState=function(t){this._alphaMask._setRenderState(t)},e}(kl);Dr.registerAbstraction(gu,_u);var mu=function(t){function e(e){var n=t.call(this)||this;if(20!=e.length)throw new Error("Matrix length must be 20!");return n._matrix=e,n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return this._matrix},set:function(t){if(20!=t.length)throw new Error("Matrix length must be 20!");this._matrix=t,this.invalidate()},enumerable:!1,configurable:!0}),e.assetType="[asset EffectColorMatrixMethod]",e}(Fl),yu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._getFragmentCode=function(t,e,n){var i="",r=e.getFreeFragmentConstant();e.getFreeFragmentConstant(),e.getFreeFragmentConstant(),e.getFreeFragmentConstant();var o=e.getFreeFragmentConstant();this._colorMatrixIndex=4*r.index;var a=e.getFreeFragmentVectorTemp();return i+="m44 "+a+", "+t+", "+r+"\nadd "+t+", "+a+", "+o+"\n"},e.prototype._activate=function(){if(this._invalid){var t=this._method.matrix,e=this._colorMatrixIndex,n=this._shader.fragmentConstantData;n[e]=t[0],n[e+1]=t[1],n[e+2]=t[2],n[e+3]=t[3],n[e+4]=t[5],n[e+5]=t[6],n[e+6]=t[7],n[e+7]=t[8],n[e+8]=t[10],n[e+9]=t[11],n[e+10]=t[12],n[e+11]=t[13],n[e+12]=t[15],n[e+13]=t[16],n[e+14]=t[17],n[e+15]=t[18],n[e+16]=t[4],n[e+17]=t[9],n[e+18]=t[14],n[e+19]=t[19]}},e}(kl);Dr.registerAbstraction(yu,mu);var Au=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._colorTransform=e,n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorTransform",{get:function(){return this._colorTransform},set:function(t){this._colorTransform=t,this.invalidate()},enumerable:!1,configurable:!0}),e.assetType="[asset EffectColorTransformMethod]",e}(Fl),vu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._getFragmentCode=function(t,e,n){var i="",r=e.getFreeFragmentConstant(),o=e.getFreeFragmentConstant();return this._colorTransformIndex=4*r.index,i+="mul "+t+", "+t+", "+r+"\nadd "+t+", "+t+", "+o+"\n"},e.prototype._activate=function(){if(this._invalid){var t=this._colorTransformIndex,e=this._shader.fragmentConstantData,n=this._method.colorTransform._rawData;e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7]}},e}(kl);Dr.registerAbstraction(vu,Au);var bu=function(t){function e(e,n){void 0===n&&(n=1);var i=t.call(this)||this;return i._envMap=e,i._alpha=n,i.iAddTexture(i._envMap),i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"envMap",{get:function(){return this._envMap},set:function(t){this._envMap!=t&&(this._envMap&&this.iRemoveTexture(this._envMap),this._envMap=t,this._envMap&&this.iAddTexture(this._envMap),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){t!=this._mask&&(this._mask&&this.iRemoveTexture(this._mask),this._mask=t,this._mask&&this.iAddTexture(this._mask),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t,this.invalidate()},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){},e.assetType="[asset EffectEnvMapMethod]",e}(Fl),xu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._initVO=function(t){t.needsNormals=!0,t.needsView=!0,this._envMap=this._method.envMap.getAbstraction(this._shader),this._envMap._initVO(t),this._method.mask?(this._maskMap=this._method.mask.getAbstraction(this._shader),this._shader.uvDependencies++):this._maskMap&&(this._maskMap=null)},e.prototype._initConstants=function(){this._envMap._initConstants()},e.prototype.dispose=function(){this._envMap=null,this._maskMap=null},e.prototype._activate=function(){this._envMap.activate(),this._maskMap&&this._maskMap.activate(),this._invalid&&this._updateProperties()},e.prototype._setRenderState=function(t){this._envMap._setRenderState(t),this._maskMap&&this._maskMap._setRenderState(t)},e.prototype._getFragmentCode=function(t,e,n){var i=e.getFreeFragmentConstant(),r="";this._fragmentIndex=4*i.index;var o=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(o,1);var a=e.getFreeFragmentVectorTemp();return e.addFragmentTempUsages(a,1),r+="dp3 "+o+".w, "+n.viewDirFragment+".xyz, "+n.normalFragment+".xyz\nadd "+o+".w, "+o+".w, "+o+".w\nmul "+o+".xyz, "+n.normalFragment+".xyz, "+o+".w\nsub "+o+".xyz, "+o+".xyz, "+n.viewDirFragment+".xyz\n"+this._envMap._getFragmentCode(o,e,n,o)+"sub "+a+".w, "+o+".w, fc0.x\nkil "+a+".w\nsub "+o+", "+o+", "+t+"\n",this._maskMap&&(r+=this._maskMap._getFragmentCode(a,e,n,n.uvVarying)+"mul "+o+", "+a+", "+o+"\n"),r+="mul "+o+", "+o+", "+i+".x\nadd "+t+", "+t+", "+o+"\n",e.removeFragmentTempUsage(o),e.removeFragmentTempUsage(a),r},e.prototype._updateProperties=function(){this._shader.fragmentConstantData[this._fragmentIndex]=this._method.alpha},e}(kl);Dr.registerAbstraction(xu,bu);var Cu=function(t){function e(e,n,i){void 0===e&&(e=0),void 0===n&&(n=1e3),void 0===i&&(i=8421504);var r=t.call(this)||this;return r._minDistance=e,r._maxDistance=n,r._fogColor=i,r}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minDistance",{get:function(){return this._minDistance},set:function(t){this._minDistance=t,this.invalidate()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxDistance",{get:function(){return this._maxDistance},set:function(t){this._maxDistance=t,this.invalidate()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fogColor",{get:function(){return this._fogColor},set:function(t){this._fogColor=t,this.invalidate()},enumerable:!1,configurable:!0}),e.assetType="[asset EffectFogMethod]",e}(Fl),Iu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._initVO=function(t){t.needsProjection=!0},e.prototype._activate=function(){if(this._invalid){var t=this._shader.fragmentConstantData,e=this._fogColorIndex,n=this._method.fogColor;t[e]=(n>>16&255)/255,t[e+1]=(n>>8&255)/255,t[e+2]=(255&n)/255,t[e+3]=1,t[e+4]=this._method.minDistance,t[e+5]=1/(this._method.maxDistance-this._method.minDistance),t[e+6]=0,t[e+7]=0}},e.prototype._getFragmentCode=function(t,e,n){var i=e.getFreeFragmentConstant(),r=e.getFreeFragmentConstant(),o=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(o,1);var a=e.getFreeFragmentVectorTemp(),s="";return this._fogColorIndex=4*i.index,s+="sub "+a+".w, "+n.projectionFragment+".z, "+r+".x\nmul "+a+".w, "+a+".w, "+r+".y\nsat "+a+".w, "+a+".w\nsub "+o+", "+i+", "+t+"\nmul "+o+", "+o+", "+a+".w\nadd "+t+", "+t+", "+o+"\n",e.removeFragmentTempUsage(o),s},e}(kl);Dr.registerAbstraction(Iu,Cu);var Eu=function(t){function e(e,n,i,r){void 0===n&&(n=1),void 0===i&&(i=5),void 0===r&&(r=0);var o=t.call(this,e,n)||this;return o._fresnelPower=i,o._normalReflectance=r,o}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fresnelPower",{get:function(){return this._fresnelPower},set:function(t){this._fresnelPower=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normalReflectance",{get:function(){return this._normalReflectance},set:function(t){this._normalReflectance!=t&&(this._normalReflectance=t,this.invalidate())},enumerable:!1,configurable:!0}),e.assetType="[asset EffectFresnelEnvMapMethod]",e}(bu),wu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFragmentCode=function(t,e,n){var i=e.getFreeFragmentConstant(),r="",o=n.viewDirFragment,a=n.normalFragment;this._fragmentIndex=4*i.index;var s=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(s,1);var l=e.getFreeFragmentVectorTemp();return e.addFragmentTempUsages(l,1),r+="dp3 "+s+".w, "+o+".xyz, "+a+".xyz\nadd "+s+".w, "+s+".w, "+s+".w\nmul "+s+".xyz, "+a+".xyz, "+s+".w\nsub "+s+".xyz, "+s+".xyz, "+o+".xyz\n"+this._envMap._getFragmentCode(s,e,n,s)+"sub "+l+".w, "+s+".w, fc0.x\nkil "+l+".w\nsub "+s+", "+s+", "+t+"\n",r+="dp3 "+o+".w, "+o+".xyz, "+a+".xyz\nsub "+o+".w, "+i+".w, "+o+".w\npow "+o+".w, "+o+".w, "+i+".z\nsub "+a+".w, "+i+".w, "+o+".w\nmul "+a+".w, "+i+".y, "+a+".w\nadd "+o+".w, "+o+".w, "+a+".w\nmul "+o+".w, "+i+".x, "+o+".w\n",this._maskMap&&(r+=this._maskMap._getFragmentCode(l,e,n,n.uvVarying)+"mul "+o+".w, "+l+".x, "+o+".w\n"),r+="mul "+s+", "+s+", "+o+".w\nadd "+t+", "+t+", "+s+"\n",e.removeFragmentTempUsage(s),e.removeFragmentTempUsage(l),r},e.prototype._updateProperties=function(){var t=this._fragmentIndex,e=this._shader.fragmentConstantData;e[t]=this._method.alpha,e[t+1]=this._method.normalReflectance,e[t+2]=this._method.fresnelPower},e}(xu);Dr.registerAbstraction(wu,Eu);var Su=function(t){function e(n,i,r){void 0===i&&(i="multiply"),void 0===r&&(r=!1);var o=t.call(this)||this;if(i!=e.ADD&&i!=e.MULTIPLY)throw new Error("Unknown blendmode!");return o._lightMap=n,o._blendMode=i,o._useSecondaryUV=r,o._lightMap&&o.iAddTexture(o._lightMap),o}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){if(this._blendMode!=t){if(t!=e.ADD&&t!=e.MULTIPLY)throw new Error("Unknown blendmode!");this._blendMode=t,this.invalidateShaderProgram()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightMap",{get:function(){return this._lightMap},set:function(t){this._lightMap!=t&&(this._lightMap&&this.iRemoveTexture(this._lightMap),this._lightMap=t,this._lightMap&&this.iAddTexture(this._lightMap),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useSecondaryUV",{get:function(){return this._useSecondaryUV},set:function(t){this._useSecondaryUV!=t&&(this._useSecondaryUV=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.MULTIPLY="multiply",e.ADD="add",e.assetType="[asset EffectLightMapMethod]",e}(Fl),Du=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._initVO=function(t){this._lightMap=this._method.lightMap.getAbstraction(this._shader),this._lightMap._initVO(t),this._method.useSecondaryUV?this._shader.secondaryUVDependencies++:this._shader.uvDependencies++},e.prototype._initConstants=function(){this._lightMap._initConstants()},e.prototype._getFragmentCode=function(t,e,n){var i,r=e.getFreeFragmentVectorTemp();switch(i=this._lightMap._getFragmentCode(r,e,n,this._method.useSecondaryUV?n.secondaryUVVarying:n.uvVarying),this._method.blendMode){case Su.MULTIPLY:i+="mul "+t+", "+t+", "+r+"\n";break;case Su.ADD:i+="add "+t+", "+t+", "+r+"\n"}return i},e.prototype._activate=function(){this._lightMap.activate()},e.prototype._setRenderState=function(t){this._lightMap._setRenderState(t)},e}(kl);Dr.registerAbstraction(Du,Su);var Tu=function(t){function e(e,n,i){void 0===n&&(n="multiply"),void 0===i&&(i=1);var r=t.call(this)||this;return r._onTextureChangedDelegate=function(t){return r._onTextureChanged(t)},r._projector=e,r._exposure=i,r._mode=n,r._projector.addEventListener(Bl.TEXTURE_CHANGE,r._onTextureChangedDelegate),r}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exposure",{get:function(){return this._exposure},set:function(t){this._exposure!=t&&(this._exposure=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode!=t&&(this._mode=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"projector",{get:function(){return this._projector},set:function(t){this._projector!=t&&(this._projector&&this._projector.removeEventListener(Bl.TEXTURE_CHANGE,this._onTextureChangedDelegate),this._projector=t,this._projector&&this._projector.addEventListener(Bl.TEXTURE_CHANGE,this._onTextureChangedDelegate),this.updateTexture())},enumerable:!1,configurable:!0}),e.prototype._onTextureChanged=function(t){this.updateTexture()},e.prototype.updateTexture=function(){this._texture&&this.iRemoveTexture(this._texture),this._texture=this._projector?this._projector.texture:null,this._texture&&this.iAddTexture(this._texture),this.invalidateShaderProgram()},e.OVERLAY="overlay",e.MULTIPLY="multiply",e.ADD="add",e.MIX="mix",e.assetType="[asset EffectProjectiveTextureMethod]",e}(Fl),Pu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._initVO=function(t){this._texture=this._method.projector.texture.getAbstraction(this._shader),this._texture._initVO(t)},e.prototype._initConstants=function(){this._texture._initConstants();var t=this._exposureIndex,e=this._shader.fragmentConstantData;e[t]=this._method.exposure,e[t+1]=.5,e[t+2]=4,e[t+3]=-1,this._projectionMatrix=new U(new Float32Array(this._shader.vertexConstantData.buffer,4*this._projectionIndex,16))},e.prototype._cleanCompilationData=function(){t.prototype._cleanCompilationData.call(this),this._uvVarying=null,this._projectionMatrix=null},e.prototype._getVertexCode=function(t,e){var n="",i=t.getFreeVertexConstant();return t.getFreeVertexConstant(),t.getFreeVertexConstant(),t.getFreeVertexConstant(),this._projectionIndex=4*i.index,this._uvVarying=t.getFreeVarying(),n+="m44 "+this._uvVarying+", "+e.animatedPosition+", "+i+"\n"},e.prototype._getFragmentCode=function(t,e,n){var i="",r=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(r,1);var o=e.getFreeFragmentVectorTemp(),a=e.getFreeFragmentConstant();if(this._exposureIndex=4*a.index,i+=this._texture._getFragmentCode(r,e,n,this._uvVarying),i+="mul "+r+", "+r+", "+a+".xxx\nadd "+r+", "+r+", "+a+".xxx\n",this._method.mode==Tu.MULTIPLY)i+="mul "+t+".xyz, "+t+".xyz, "+r+".xyz\t\t\t\n";else if(this._method.mode==Tu.ADD)i+="add "+t+".xyz, "+t+".xyz, "+r+".xyz\t\t\t\n";else if(this._method.mode==Tu.MIX)i+="sub "+r+".xyz, "+r+".xyz, "+t+".xyz\t\t\t\t\nmul "+r+".xyz, "+r+".xyz, "+r+".w\t\t\t\t\t\t\nadd "+t+".xyz, "+t+".xyz, "+r+".xyz\t\t\t\n";else{if(this._method.mode!=Tu.OVERLAY)throw new l('Unknown mode "'+this._method.mode+'"');i+="sge "+o+", "+t+", "+a+".yyy\n",i+="sub "+t+", "+t+", "+o+"\n",i+="sub "+r+", "+r+", "+o+"\n",i+="mul "+r+", "+r+", "+t+"\n",i+="sub "+t+", "+a+".yyy, "+o+"\n",i+="mul "+t+", "+a+".zzz, "+t+"\n",i+="mul "+r+", "+r+", "+t+"\n",i+="add "+t+", "+r+", "+o+"\n"}return e.removeFragmentTempUsage(r),i},e.prototype._setRenderState=function(t){var e=U.CALCULATION_MATRIX;e.copyFrom(this._method.projector.projection.viewMatrix3D),e.prepend(t.renderSceneTransform),this._projectionMatrix.copyFrom(e,!0),this._texture._setRenderState(t)},e.prototype._activate=function(){this._texture.activate(),this._invalid&&(this._shader.fragmentConstantData[this._exposureIndex]=this._method.exposure)},e}(kl);Dr.registerAbstraction(Pu,Tu);var Bu=function(t){function e(e,n,i,r,o,a){void 0===n&&(n=1),void 0===i&&(i=.1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0);var s=t.call(this,e,n)||this;return s._dispersionR=0,s._dispersionG=0,s._dispersionB=0,s._refractionIndex=i,s._dispersionR=r,s._dispersionG=o,s._dispersionB=a,s}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refractionIndex",{get:function(){return this._refractionIndex},set:function(t){this._refractionIndex=t,this.invalidate()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dispersionR",{get:function(){return this._dispersionR},set:function(t){this._dispersionR!=t&&(this._dispersionR=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dispersionG",{get:function(){return this._dispersionG},set:function(t){this._dispersionG!=t&&(this._dispersionG=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dispersionB",{get:function(){return this._dispersionB},set:function(t){this._dispersionB!=t&&(this._dispersionB=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.assetType="[asset EffectRefractionEnvMapMethod]",e}(bu),Ou=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._initVO=function(e){t.prototype._initVO.call(this,e),this._useDispersion=!(this._method.dispersionR==this._method.dispersionB&&this._method.dispersionR==this._method.dispersionG)},e.prototype._getFragmentCode=function(t,e,n){var i,r,o,a=e.getFreeFragmentConstant(),s=e.getFreeFragmentConstant(),l="";this._fragmentIndex=4*a.index,i=e.getFreeFragmentVectorTemp(),e.addFragmentTempUsages(i,1),r=e.getFreeFragmentVectorTemp(),e.addFragmentTempUsages(r,1),o=e.getFreeFragmentVectorTemp(),e.addFragmentTempUsages(o,1);var u=n.viewDirFragment,c=n.normalFragment;return l+="neg "+u+".xyz, "+u+".xyz\n",l+="dp3 "+o+".x, "+u+".xyz, "+c+".xyz\nmul "+o+".w, "+o+".x, "+o+".x\nsub "+o+".w, "+s+".x, "+o+".w\nmul "+o+".w, "+a+".x, "+o+".w\nmul "+o+".w, "+a+".x, "+o+".w\nsub "+o+".w, "+s+".x, "+o+".w\nsqt "+o+".y, "+o+".w\nmul "+o+".x, "+a+".x, "+o+".x\nadd "+o+".x, "+o+".x, "+o+".y\nmul "+o+".xyz, "+o+".x, "+c+".xyz\nmul "+i+", "+a+".x, "+u+"\nsub "+i+".xyz, "+i+".xyz, "+o+".xyz\nnrm "+i+".xyz, "+i+".xyz\n"+this._envMap._getFragmentCode(r,e,n,i)+"sub "+r+".w, "+r+".w, fc0.x\t\nkil "+r+".w\n",this._useDispersion&&(l+="dp3 "+o+".x, "+u+".xyz, "+c+".xyz\nmul "+o+".w, "+o+".x, "+o+".x\nsub "+o+".w, "+s+".x, "+o+".w\nmul "+o+".w, "+a+".y, "+o+".w\nmul "+o+".w, "+a+".y, "+o+".w\nsub "+o+".w, "+s+".x, "+o+".w\nsqt "+o+".y, "+o+".w\nmul "+o+".x, "+a+".y, "+o+".x\nadd "+o+".x, "+o+".x, "+o+".y\nmul "+o+".xyz, "+o+".x, "+c+".xyz\nmul "+i+", "+a+".y, "+u+"\nsub "+i+".xyz, "+i+".xyz, "+o+".xyz\nnrm "+i+".xyz, "+i+".xyz\n"+this._envMap._getFragmentCode(o,e,n,i)+"mov "+r+".y, "+o+".y\n",l+="dp3 "+o+".x, "+u+".xyz, "+c+".xyz\nmul "+o+".w, "+o+".x, "+o+".x\nsub "+o+".w, "+s+".x, "+o+".w\nmul "+o+".w, "+a+".z, "+o+".w\nmul "+o+".w, "+a+".z, "+o+".w\nsub "+o+".w, "+s+".x, "+o+".w\nsqt "+o+".y, "+o+".w\nmul "+o+".x, "+a+".z, "+o+".x\nadd "+o+".x, "+o+".x, "+o+".y\nmul "+o+".xyz, "+o+".x, "+c+".xyz\nmul "+i+", "+a+".z, "+u+"\nsub "+i+".xyz, "+i+".xyz, "+o+".xyz\nnrm "+i+".xyz, "+i+".xyz\n"+this._envMap._getFragmentCode(o,e,n,i)+"mov "+r+".z, "+o+".z\n"),l+="sub "+r+".xyz, "+r+".xyz, "+t+".xyz\nmul "+r+".xyz, "+r+".xyz, "+a+".w\nadd "+t+".xyz, "+t+".xyz, "+r+".xyz\n",e.removeFragmentTempUsage(o),e.removeFragmentTempUsage(i),e.removeFragmentTempUsage(r),l+="neg "+u+".xyz, "+u+".xyz\n"},e.prototype._updateProperties=function(){var t=this._fragmentIndex,e=this._shader.fragmentConstantData,n=this._method.refractionIndex;e[t]=this._method.dispersionR+n,this._useDispersion&&(e[t+1]=this._method.dispersionG+n,e[t+2]=this._method.dispersionB+n),e[t+3]=this._method.alpha},e}(xu);Dr.registerAbstraction(Ou,Bu);var Mu=function(t){function e(e,n,i,r){void 0===e&&(e=16777215),void 0===n&&(n=.4),void 0===i&&(i=2),void 0===r&&(r="mix");var o=t.call(this)||this;return o._blendMode=r,o._strength=n,o._power=i,o._color=e,o}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._power!=t&&(this._color=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){this._strength!=t&&(this._strength=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){return this._power},set:function(t){this._power!=t&&(this._power=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this._blendMode!=t&&(this._blendMode=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.ADD="add",e.MULTIPLY="multiply",e.MIX="mix",e.assetType="[asset EffectRimLightMethod]",e}(Fl),Lu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._initVO=function(t){t.needsNormals=!0,t.needsView=!0},e.prototype._activate=function(){if(this._invalid){var t=this._rimColorIndex,e=this._shader.fragmentConstantData,n=this._method.color;e[t]=(n>>16&255)/255,e[t+1]=(n>>8&255)/255,e[t+2]=(255&n)/255,e[t+3]=1,e[t+4]=this._method.strength,e[t+5]=this._method.power}},e.prototype._getFragmentCode=function(t,e,n){var i=e.getFreeFragmentConstant(),r=e.getFreeFragmentConstant(),o=e.getFreeFragmentVectorTemp(),a="";return this._rimColorIndex=4*i.index,a+="dp3 "+o+".x, "+n.viewDirFragment+".xyz, "+n.normalFragment+".xyz\nsat "+o+".x, "+o+".x\nsub "+o+".x, "+i+".w, "+o+".x\npow "+o+".x, "+o+".x, "+r+".y\nmul "+o+".x, "+o+".x, "+r+".x\nsub "+o+".x, "+i+".w, "+o+".x\nmul "+t+".xyz, "+t+".xyz, "+o+".x\nsub "+o+".w, "+i+".w, "+o+".x\n",this._method.blendMode==Mu.ADD?a+="mul "+o+".xyz, "+o+".w, "+i+".xyz\nadd "+t+".xyz, "+t+".xyz, "+o+".xyz\n":this._method.blendMode==Mu.MULTIPLY?a+="mul "+o+".xyz, "+o+".w, "+i+".xyz\nmul "+t+".xyz, "+t+".xyz, "+o+".xyz\n":a+="sub "+o+".xyz, "+i+".xyz, "+t+".xyz\nmul "+o+".xyz, "+o+".xyz, "+o+".w\nadd "+t+".xyz, "+t+".xyz, "+o+".xyz\n",a},e}(kl);Dr.registerAbstraction(Lu,Mu);var Ru=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._texture=e,n._texture&&n.iAddTexture(n._texture),n}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!=t&&(this._texture&&this.iRemoveTexture(this._texture),this._texture=t,this._texture&&this.iAddTexture(this._texture),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.prototype.copyFrom=function(t){var e=t;null!=e.texture&&(this.texture=e.texture)},e.prototype.dispose=function(){this._texture&&(this._texture=null)},e.assetType="[asset NormalBasicMethod]",e}(Fl),Nu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._isUsed=function(){return!(!this._texture||!this._shader.normalDependencies)},e.prototype._initVO=function(t){this._method.texture&&(this._texture=this._method.texture.getAbstraction(this._shader),this._texture._initVO(t),this._shader.uvDependencies++)},e.prototype._initConstants=function(){this._method.texture&&this._texture._initConstants()},e.prototype._outputsTangentNormals=function(){return!0},e.prototype._activate=function(){this._texture&&this._texture.activate()},e.prototype._setRenderState=function(t){this._texture&&this._texture._setRenderState(t)},e.prototype._getFragmentCode=function(t,e,n){var i="";return this._texture&&(i+=this._texture._getFragmentCode(t,e,n,n.uvVarying)),i+="sub "+t+".xyz, "+t+".xyz, "+n.commons+".xxx\nnrm "+t+".xyz, "+t+"\n"},e}(kl);Dr.registerAbstraction(Nu,Ru);var Fu=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.texture=e,o._worldXYRatio=n/i,o._worldXZRatio=r/i,o}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldXYRatio",{get:function(){return this._worldXYRatio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldXZRatio",{get:function(){return this._worldXZRatio},enumerable:!1,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this._worldXYRatio=e._worldXYRatio,this._worldXZRatio=e._worldXZRatio},e.assetType="[asset NormalHeightMapMethod]",e}(Ru),ku=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype._initConstants=function(){t.prototype._initConstants.call(this);var e=this._fragmentConstantsIndex,n=this._shader.fragmentConstantData,i=this._method.texture.image;n[e]=1/i.width,n[e+1]=1/i.height,n[e+2]=0,n[e+3]=1,n[e+4]=this._method.worldXYRatio,n[e+5]=this._method.worldXZRatio},Object.defineProperty(e.prototype,"tangentSpace",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype._getFragmentCode=function(t,e,n){var i="",r=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(r,1);var o=e.getFreeFragmentConstant(),a=e.getFreeFragmentConstant();return this._fragmentConstantsIndex=4*o.index,i+=this._texture._getFragmentCode(t,e,n,n.uvVarying)+"add "+r+", "+n.uvVarying+", "+o+".xzzz\n"+this._texture._getFragmentCode(r,e,n,r)+"sub "+t+".x, "+t+".x, "+r+".x\nadd "+r+", "+n.uvVarying+", "+o+".zyzz\n"+this._texture._getFragmentCode(r,e,n,r)+"sub "+t+".z, "+t+".z, "+r+".x\nmov "+t+".y, "+o+".w\nmul "+t+".xz, "+t+".xz, "+a+".xy\nnrm "+t+".xyz, "+t+".xyz\n",e.removeFragmentTempUsage(r),i},e}(Nu);Dr.registerAbstraction(ku,Fu);var Uu=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=t.call(this,e)||this;return i._water1OffsetX=0,i._water1OffsetY=0,i._water2OffsetX=0,i._water2OffsetY=0,i._secondaryNormalMap=n,i._secondaryNormalMap&&i.iAddTexture(i._secondaryNormalMap),i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"water1OffsetX",{get:function(){return this._water1OffsetX},set:function(t){this._water1OffsetX=t,this.invalidate()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"water1OffsetY",{get:function(){return this._water1OffsetY},set:function(t){this._water1OffsetY=t,this.invalidate()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"water2OffsetX",{get:function(){return this._water2OffsetX},set:function(t){this._water2OffsetX=t,this.invalidate()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"water2OffsetY",{get:function(){return this._water2OffsetY},set:function(t){this._water2OffsetY=t,this.invalidate()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondaryNormalMap",{get:function(){return this._secondaryNormalMap},set:function(t){this._secondaryNormalMap!=t&&(this._secondaryNormalMap&&this.iRemoveTexture(this._secondaryNormalMap),this._secondaryNormalMap=t,this._secondaryNormalMap&&this.iAddTexture(this._secondaryNormalMap),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._secondaryNormalMap=null},e.assetType="[asset NormalSimpleWaterMethod]",e}(Ru),Vu=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype._initConstants=function(){t.prototype._initConstants.call(this);var e=this._fragmentConstantsIndex,n=this._shader.fragmentConstantData;n[e]=.5,n[e+1]=0,n[e+2]=0,n[e+3]=1},e.prototype._initVO=function(e){t.prototype._initVO.call(this,e);var n=this._method.secondaryNormalMap;n&&(this._secondaryNormalMap=n.getAbstraction(this._shader),this._shader.uvDependencies++)},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._secondaryNormalMap=null},e.prototype._activate=function(){if(t.prototype._activate.call(this),this._invalid){var e=this._shader.fragmentConstantData,n=this._fragmentConstantsIndex;e[n+4]=this._method.water1OffsetX,e[n+5]=this._method.water1OffsetY,e[n+6]=this._method.water2OffsetX,e[n+7]=this._method.water2OffsetY}this._secondaryNormalMap&&this._secondaryNormalMap.activate()},e.prototype._setRenderState=function(e){t.prototype._setRenderState.call(this,e),this._secondaryNormalMap&&this._secondaryNormalMap._setRenderState(e)},e.prototype._getFragmentCode=function(t,e,n){var i="",r=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(r,1);var o=e.getFreeFragmentConstant(),a=e.getFreeFragmentConstant();return this._fragmentConstantsIndex=4*o.index,i+="add "+r+", "+n.uvVarying+", "+a+".xyxy\n",this._texture&&(i+=this._texture._getFragmentCode(t,e,n,r)),i+="add "+r+", "+n.uvVarying+", "+a+".zwzw\n",this._secondaryNormalMap&&(i+=this._secondaryNormalMap._getFragmentCode(r,e,n,r)),i+="add "+t+", "+t+", "+r+"\t\t\nmul "+t+", "+t+", "+o+".x\t\nsub "+t+".xyz, "+t+".xyz, "+n.commons+".xxx\t\nnrm "+t+".xyz, "+t+".xyz\t\t\t\t\t\t\t\n"},e}(Nu);Dr.registerAbstraction(Vu,Uu);var ju=function(t){function e(e){var n=t.call(this,e.shadowMapper)||this;return n._castingLight=e,n}return o(e,t),Object.defineProperty(e.prototype,"castingLight",{get:function(){return this._castingLight},enumerable:!1,configurable:!0}),e}(eu),Gu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._initVO=function(e){t.prototype._initVO.call(this,e),this._baseTexture=this._baseChunk.texture},e}(nu),Qu=function(t){function e(n,i,r){void 0===i&&(i=4),void 0===r&&(r=1);var o=t.call(this,n)||this;return o._depthMapSize=o._castingLight.shadowMapper.size,o.numSamples=i,o.range=r,++e._grainUsages,e._grainTexture||o.initGrainTexture(),o}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numSamples",{get:function(){return this._numSamples},set:function(t){t<1?t=1:t>24&&(t=24),this._numSamples!=t&&(this._numSamples=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return 2*this._range},set:function(t){this._range=t/2},enumerable:!1,configurable:!0}),e.prototype.initGrainTexture=function(){e._grainBitmapImage2D=new Le(64,64,!1);for(var t,n,i=new Array,r=1/(this._depthMapSize*this._range),o=0;o<4096;++o)(t=2*(Math.random()-.5))<0?t-=r:t+=r,(n=2*(Math.random()-.5))<0?n-=r:n+=r,t>1?t=1:t<-1&&(t=-1),n>1?n=1:n<-1&&(n=-1),i[o]=Math.floor(255*(.5*t+.5))<<16|Math.floor(255*(.5*n+.5))<<8;e._grainBitmapImage2D.setArray(e._grainBitmapImage2D.rect,i),e._grainTexture=new fo(e._grainBitmapImage2D)},e.prototype.dispose=function(){0==--e._grainUsages&&(e._grainTexture.dispose(),e._grainBitmapImage2D.dispose(),e._grainTexture=null)},e.assetType="[asset ShadowDitheredMethod]",e}(ju),zu=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype._initVO=function(e){t.prototype._initVO.call(this,e),e.needsProjection=!0,this._grainMap=Qu._grainTexture.getAbstraction(this._shader)},e.prototype._initConstants=function(){t.prototype._initConstants.call(this),this._shader.fragmentConstantData[this._fragmentConstantsIndex]=1/this._method.numSamples},e.prototype._activate=function(){t.prototype._activate.call(this);var e=this._shader.fragmentConstantData,n=this._fragmentConstantsIndex;e[n+1]=(this._shader.renderMaterial.renderer.view.width-1)/63,e[n+2]=(this._shader.renderMaterial.renderer.view.height-1)/63,e[n+3]=2*this._method.range/this._method.castingLight.shadowMapper.size,this._grainMap.activate()},e.prototype._getFragmentCode=function(e,n,i){var r=n.getFreeFragmentConstant();this._fragmentConstantsIndex=4*r.index;var o="",a=this._method.numSamples,s=n.getFreeFragmentVectorTemp();n.addFragmentTempUsages(s,1);var l=n.getFreeFragmentVectorTemp();n.addFragmentTempUsages(l,1);var u=i.projectionFragment;o+="div "+s+", "+u+", "+u+".w\nmul "+s+".xy, "+s+".xy, "+r+".yz\n";for(var c=a;c>0;)o+=c==a?this._grainMap._getFragmentCode(s,n,i,s):"mov "+l+", "+s+".zwxy \n"+this._grainMap._getFragmentCode(s,n,i,l),o+="sub "+s+".zw, "+s+".xy, fc0.xx\nmul "+s+".zw, "+s+".zw, "+r+".w\n",o+=c==a?"add "+s+".xy, "+s+".zw, "+this._baseChunk.depthMapCoordReg+".xy\n"+this._baseTexture._getFragmentCode(e,n,i,s):this._addSample(s,e,n,i),c>4&&(o+="add "+s+".xy, "+s+".xy, "+s+".zw\n"+this._addSample(s,e,n,i)),c>1&&(o+="sub "+s+".xy, "+this._baseChunk.depthMapCoordReg+".xy, "+s+".zw\n"+this._addSample(s,e,n,i)),c>5&&(o+="sub "+s+".xy, "+s+".xy, "+s+".zw\n"+this._addSample(s,e,n,i)),c>2&&(o+="neg "+s+".w, "+s+".w\nadd "+s+".xy, "+s+".wz, "+this._baseChunk.depthMapCoordReg+".xy\n"+this._addSample(s,e,n,i)),c>6&&(o+="add "+s+".xy, "+s+".xy, "+s+".wz\n"+this._addSample(s,e,n,i)),c>3&&(o+="sub "+s+".xy, "+this._baseChunk.depthMapCoordReg+".xy, "+s+".wz\n"+this._addSample(s,e,n,i)),c>7&&(o+="sub "+s+".xy, "+s+".xy, "+s+".wz\n"+this._addSample(s,e,n,i)),c-=8;return n.removeFragmentTempUsage(l),n.removeFragmentTempUsage(s),o+="mul "+e+".w, "+e+".w, "+r+".x\n"+t.prototype._getFragmentCode.call(this,e,n,i)},e.prototype._setRenderState=function(e){t.prototype._setRenderState.call(this,e),this._grainMap._setRenderState(e)},e.prototype._addSample=function(t,e,n,i){var r=n.getFreeFragmentVectorTemp();n.addFragmentTempUsages(r,1);var o=this._baseTexture._getFragmentCode(r,n,i,t)+"add "+e+".w, "+e+".w, "+r+".w\n";return n.removeFragmentTempUsage(r),o},e}(Gu);Dr.registerAbstraction(zu,Qu);var Hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[asset ShadowFilteredMethod]",e}(ju),Xu=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype._initConstants=function(){t.prototype._initConstants.call(this);var e=this._shader.fragmentConstantData,n=this._fragmentConstantsIndex;e[n]=.5;var i=this._method.castingLight.shadowMapper.size;e[n+1]=i,e[n+2]=1/i},e.prototype._getFragmentCode=function(e,n,i){var r=n.getFreeFragmentConstant();this._fragmentConstantsIndex=4*r.index;var o="",a=n.getFreeFragmentVectorTemp();n.addFragmentTempUsages(a,1);var s=n.getFreeFragmentVectorTemp();return n.addFragmentTempUsages(s,1),o+="mov "+a+", "+this._baseChunk.depthMapCoordReg+"\n"+this._baseTexture._getFragmentCode(s,n,i,a)+"mov "+a+".w, "+s+".w\nadd "+a+".x, "+this._baseChunk.depthMapCoordReg+".x, "+r+".z\n"+this._baseTexture._getFragmentCode(s,n,i,a)+"mul "+s+".x, "+this._baseChunk.depthMapCoordReg+".x, "+r+".y\nfrc "+s+".x, "+s+".x\nsub "+s+".w, "+s+".w, "+a+".w\nmul "+s+".w, "+s+".w, "+s+".x\nadd "+e+".w, "+a+".w, "+s+".w\nmov "+a+".x, "+this._baseChunk.depthMapCoordReg+".x\nadd "+a+".y, "+this._baseChunk.depthMapCoordReg+".y, "+r+".z\n"+this._baseTexture._getFragmentCode(s,n,i,a)+"mov "+a+".w, "+s+".w\nadd "+a+".x, "+this._baseChunk.depthMapCoordReg+".x, "+r+".z\n"+this._baseTexture._getFragmentCode(s,n,i,a)+"mul "+s+".x, "+this._baseChunk.depthMapCoordReg+".x, "+r+".y\nfrc "+s+".x, "+s+".x\nsub "+s+".w, "+s+".w, "+a+".w\nmul "+s+".w, "+s+".w, "+s+".x\nadd "+a+".w, "+a+".w, "+s+".w\nmul "+s+".x, "+this._baseChunk.depthMapCoordReg+".y, "+r+".y\nfrc "+s+".x, "+s+".x\nsub "+a+".w, "+a+".w, "+e+".w\nmul "+a+".w, "+a+".w, "+s+".x\nadd "+e+".w, "+e+".w, "+a+".w\n",n.removeFragmentTempUsage(s),n.removeFragmentTempUsage(a),t.prototype._getFragmentCode.call(this,e,n,i),o},e}(Gu);Dr.registerAbstraction(Xu,Hu);var Yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[asset ShadowHardMethod]",e}(ju),qu=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype._getFragmentCode=function(e,n,i){var r=this._baseTexture._getFragmentCode(e,n,i,this._baseChunk.depthMapCoordReg);return r+=t.prototype._getFragmentCode.call(this,e,n,i)},e}(Gu);Dr.registerAbstraction(qu,Yu);var Ku=function(t){function e(e,n,i){void 0===n&&(n=5),void 0===i&&(i=1);var r=t.call(this,e)||this;return r.numSamples=n,r.range=i,r}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return this._offsets},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numSamples",{get:function(){return this._numSamples},set:function(t){this._numSamples=t,this._numSamples<1?this._numSamples=1:this._numSamples>32&&(this._numSamples=32),this._offsets=K.getDistribution(this._numSamples),this.invalidateShaderProgram()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._range},set:function(t){this._range=t},enumerable:!1,configurable:!0}),e.assetType="[asset ShadowSoftMethod]",e}(ju),Wu=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype._initConstants=function(){t.prototype._initConstants.call(this),this._shader.fragmentConstantData[this._fragmentConstantsIndex]=1/this._method.numSamples,this._shader.fragmentConstantData[this._fragmentConstantsIndex+1]=0},e.prototype._activate=function(){t.prototype._activate.call(this);for(var e=.5*this._method.range/this._method.castingLight.shadowMapper.size,n=this._shader.fragmentConstantData,i=this._fragmentConstantsIndex+2,r=this._method.numSamples<<1,o=0;o<r;++o)n[i+o]=this._method.offsets[o]*e},e.prototype._getFragmentCode=function(e,n,i){var r=n.getFreeFragmentConstant();this._fragmentConstantsIndex=4*r.index;var o="",a=n.getFreeFragmentVectorTemp();n.addFragmentTempUsages(a,1);for(var s=new Array(r+".zw"),l=this._method.numSamples>>1,u=0;u<l;++u){var c=n.getFreeFragmentConstant();s.push(c+".xy"),s.push(c+".zw")}var h=n.getFreeFragmentVectorTemp();for(u=0;u<this._method.numSamples;++u)o+=0==u?"add "+a+", "+this._baseChunk.depthMapCoordReg+", "+r+".zwyy\n"+this._baseTexture._getFragmentCode(e,n,i,a):"add "+a+".xy, "+this._baseChunk.depthMapCoordReg+".xy, "+s[u]+"\n"+this._baseTexture._getFragmentCode(h,n,i,a)+"add "+e+".w, "+e+".w, "+h+".w\n";return n.removeFragmentTempUsage(a),o+="mul "+e+".w, "+e+".w, "+r+".x\n"+t.prototype._getFragmentCode.call(this,e,n,i)},e}(Gu);Dr.registerAbstraction(Wu,Ku);var Ju=function(t){function e(){var e=t.call(this)||this;return e._gloss=50,e._strength=1,e._color=16777215,e}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gloss",{get:function(){return this._gloss},set:function(t){this._gloss!=t&&(this._gloss=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){this._strength!=t&&(this._strength=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,0==this._color||0==t?this.invalidateShaderProgram():this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!=t&&(this._texture&&this.iRemoveTexture(this._texture),this._texture=t,this._texture&&this.iAddTexture(this._texture),this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._texture=null},e.prototype.copyFrom=function(t){var e=t;this.texture=e.texture,this.strength=e.strength,this.color=e.color,this.gloss=e.gloss},e.assetType="[asset SpecularBasicMethod]",e}(Fl),Zu=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i}return o(e,t),e.prototype._isUsed=function(){return!!this._shader.numLights},e.prototype._initVO=function(t){t.needsNormals=this._shader.numLights>0,t.needsView=this._shader.numLights>0,this._method.texture?(this._texture=this._method.texture.getAbstraction(this._shader),this._texture._initVO(t),this._shader.uvDependencies++):this._texture&&(this._texture=null)},e.prototype._initConstants=function(){this._method.texture&&this._texture._initConstants()},e.prototype._cleanCompilationData=function(){t.prototype._cleanCompilationData.call(this),this._totalLightColorReg=null,this._specularTexData=null,this._specularDataRegister=null},e.prototype._getFragmentPreLightingCode=function(t,e){var n="";return this._pIsFirstLight=!0,this._specularDataRegister=t.getFreeFragmentConstant(),this._specularDataIndex=4*this._specularDataRegister.index,this._texture&&(this._specularTexData=t.getFreeFragmentVectorTemp(),t.addFragmentTempUsages(this._specularTexData,1),n+=this._texture._getFragmentCode(this._specularTexData,t,e,e.uvVarying)),this._totalLightColorReg=t.getFreeFragmentVectorTemp(),t.addFragmentTempUsages(this._totalLightColorReg,1),n},e.prototype._getFragmentCodePerLight=function(t,e,n,i){var r,o="";return this._pIsFirstLight?r=this._totalLightColorReg:(r=n.getFreeFragmentVectorTemp(),n.addFragmentTempUsages(r,1)),o+="add "+r+", "+t+", "+i.viewDirFragment+"\nnrm "+r+".xyz, "+r+"\ndp3 "+r+".w, "+i.normalFragment+", "+r+"\nsat "+r+".w, "+r+".w\n",this._texture?o+="mul "+this._specularTexData+".w, "+this._specularTexData+".y, "+this._specularDataRegister+".w\npow "+r+".w, "+r+".w, "+this._specularTexData+".w\n":o+="pow "+r+".w, "+r+".w, "+this._specularDataRegister+".w\n",this._shader.usesLightFallOff&&(o+="mul "+r+".w, "+r+".w, "+t+".w\n"),null!=this._modulateFunction&&(o+=this._modulateFunction(r,n,i)),o+="mul "+r+".xyz, "+e+", "+r+".w\n",this._pIsFirstLight||(o+="add "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+", "+r+"\n",n.removeFragmentTempUsage(r)),this._pIsFirstLight=!1,o},e.prototype._getFragmentCodePerProbe=function(t,e,n,i){var r,o="";this._pIsFirstLight?r=this._totalLightColorReg:(r=n.getFreeFragmentVectorTemp(),n.addFragmentTempUsages(r,1));var a=i.normalFragment,s=i.viewDirFragment;return o+="dp3 "+r+".w, "+a+", "+s+"\nadd "+r+".w, "+r+".w, "+r+".w\nmul "+r+", "+r+".w, "+a+"\nsub "+r+", "+r+", "+s+"\ntex "+r+", "+r+", "+t+" <cube,linear,miplinear>\nmul "+r+".xyz, "+r+", "+e+"\n",null!=this._modulateFunction&&(o+=this._modulateFunction(r,n,i)),this._pIsFirstLight||(o+="add "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+", "+r+"\n",n.removeFragmentTempUsage(r)),this._pIsFirstLight=!1,o},e.prototype._getFragmentCode=function(t,e,n){var i="";return n.shadowTarget&&(i+="mul "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+", "+n.shadowTarget+".w\n"),this._texture&&(i+="mul "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+", "+this._specularTexData+".x\n",e.removeFragmentTempUsage(this._specularTexData)),i+="mul "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+", "+this._specularDataRegister+"\nadd "+t+".xyz, "+t+", "+this._totalLightColorReg+"\n",e.removeFragmentTempUsage(this._totalLightColorReg),i},e.prototype._activate=function(){if(this._texture&&this._texture.activate(),this._invalid){var t=this._specularDataIndex,e=this._shader.fragmentConstantData;e[t]=(this._method.color>>16&255)/255*this._method.strength,e[t+1]=(this._method.color>>8&255)/255*this._method.strength,e[t+2]=(255&this._method.color)/255*this._method.strength,e[t+3]=this._method.gloss}},e.prototype._setRenderState=function(t){this._texture&&this._texture._setRenderState(t)},e}(kl);Dr.registerAbstraction(Zu,Ju);var $u=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[asset SpecularAnisotropicMethod]",e}(Ju),tc=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype._initVO=function(e){t.prototype._initVO.call(this,e),e.needsTangents=this._shader.numLights>0},e.prototype._getFragmentCodePerLight=function(t,e,n,i){var r,o="";return this._pIsFirstLight?r=this._totalLightColorReg:(r=n.getFreeFragmentVectorTemp(),n.addFragmentTempUsages(r,1)),o+="nrm "+r+".xyz, "+i.tangentVarying+".xyz\ndp3 "+r+".w, "+r+".xyz, "+t+".xyz\ndp3 "+r+".z, "+r+".xyz, "+i.viewDirFragment+".xyz\n",o+="sin "+r+".x, "+r+".w\nsin "+r+".y, "+r+".z\nmul "+r+".x, "+r+".x, "+r+".y\ncos "+r+".z, "+r+".z\ncos "+r+".w, "+r+".w\nmul "+r+".w, "+r+".w, "+r+".z\nsub "+r+".w, "+r+".x, "+r+".w\n",this._texture?o+="mul "+this._specularTexData+".w, "+this._specularTexData+".y, "+this._specularDataRegister+".w\npow "+r+".w, "+r+".w, "+this._specularTexData+".w\n":o+="pow "+r+".w, "+r+".w, "+this._specularDataRegister+".w\n",o+="mul "+r+".w, "+r+".w, "+t+".w\n",null!=this._modulateFunction&&(o+=this._modulateFunction(r,n,i)),o+="mul "+r+".xyz, "+e+".xyz, "+r+".w\n",this._pIsFirstLight||(o+="add "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+".xyz, "+r+".xyz\n",n.removeFragmentTempUsage(r)),this._pIsFirstLight=!1,o},e}(Zu);Dr.registerAbstraction(tc,$u);var ec=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e)||this}return o(e,t),e.prototype.createBaseMethod=function(){return new Ju},Object.defineProperty(e.prototype,"gloss",{get:function(){return this._baseMethod.gloss},set:function(t){this._baseMethod.gloss=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this._baseMethod.strength},set:function(t){this._baseMethod.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._baseMethod.color},set:function(t){this._baseMethod.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._baseMethod.texture},set:function(t){this._baseMethod.texture=t},enumerable:!1,configurable:!0}),e}(eu),nc=function(t){function e(e,n,i){void 0===e&&(e=.5),void 0===n&&(n=.1),void 0===i&&(i=null);var r=t.call(this,i)||this;return r._specularCutOff=e,r._smoothness=n,r}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"smoothness",{get:function(){return this._smoothness},set:function(t){this._smoothness!=t&&(this._smoothness=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularCutOff",{get:function(){return this._specularCutOff},set:function(t){this._specularCutOff!=t&&(this._specularCutOff=t,this.invalidate())},enumerable:!1,configurable:!0}),e.assetType="[asset SpecularCelMethod]",e}(ec),ic=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i._baseChunk._modulateFunction=function(t,e,n){return i.clampSpecular(t,e,n)},i}return o(e,t),e.prototype._activate=function(){if(t.prototype._activate.call(this),this._invalid){var e=this._cutoffDataIndex,n=this._shader.fragmentConstantData;n[e]=this._method.smoothness,n[e+1]=this._method.specularCutOff}},e.prototype._cleanCompilationData=function(){t.prototype._cleanCompilationData.call(this),this._cutoffDataRegister=null},e.prototype.clampSpecular=function(t,e,n){return"sub "+t+".y, "+t+".w, "+this._cutoffDataRegister+".y\ndiv "+t+".y, "+t+".y, "+this._cutoffDataRegister+".x\nsat "+t+".y, "+t+".y\nsge "+t+".w, "+t+".w, "+this._cutoffDataRegister+".y\nmul "+t+".w, "+t+".w, "+t+".y\n"},e.prototype._getFragmentPreLightingCode=function(e,n){return this._cutoffDataRegister=e.getFreeFragmentConstant(),this._cutoffDataIndex=4*this._cutoffDataRegister.index,t.prototype._getFragmentPreLightingCode.call(this,e,n)},e}(iu);Dr.registerAbstraction(ic,nc);var rc=function(t){function e(e,n,i,r){void 0===e&&(e=!0),void 0===n&&(n=5),void 0===i&&(i=.028),void 0===r&&(r=null);var o=t.call(this,r)||this;return o._basedOnSurface=e,o._fresnelPower=n,o._normalReflectance=i,o}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"basedOnSurface",{get:function(){return this._basedOnSurface},set:function(t){this._basedOnSurface!=t&&(this._basedOnSurface=t,this.invalidateShaderProgram())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fresnelPower",{get:function(){return this._fresnelPower},set:function(t){this._fresnelPower!=t&&(this._fresnelPower=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normalReflectance",{get:function(){return this._normalReflectance},set:function(t){this._normalReflectance!=t&&(this._normalReflectance=t,this.invalidate())},enumerable:!1,configurable:!0}),e.assetType="[asset SpecularFresnelMethod]",e}(ec),oc=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._method=e,i._shader=n,i._baseChunk._modulateFunction=function(t,e,n){return i.modulateSpecular(t,e,n)},i}return o(e,t),e.prototype._cleanCompilationData=function(){t.prototype._cleanCompilationData.call(this),this._fresnelDataRegister=null},e.prototype._activate=function(){if(t.prototype._activate.call(this),this._invalid){var e=this._shader.fragmentConstantData,n=this._fresnelDataIndex;e[n]=this._method.normalReflectance,e[n+1]=this._method.fresnelPower,e[n+2]=1,e[n+3]=0}},e.prototype._getFragmentPreLightingCode=function(e,n){return this._fresnelDataRegister=e.getFreeFragmentConstant(),this._fresnelDataIndex=4*this._fresnelDataRegister.index,t.prototype._getFragmentPreLightingCode.call(this,e,n)},e.prototype.modulateSpecular=function(t,e,n){return"dp3 "+t+".y, "+n.viewDirFragment+".xyz, "+(this._method.basedOnSurface?n.normalFragment:t)+".xyz\nsub "+t+".y, "+this._fresnelDataRegister+".z, "+t+".y\npow "+t+".x, "+t+".y, "+this._fresnelDataRegister+".y\nsub "+t+".y, "+this._fresnelDataRegister+".z, "+t+".y\nmul "+t+".y, "+this._fresnelDataRegister+".x, "+t+".y\nadd "+t+".y, "+t+".x, "+t+".y\nmul "+t+".w, "+t+".w, "+t+".y\n"},e}(iu);Dr.registerAbstraction(oc,rc);var ac=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[asset SpecularPhongMethod]",e}(Ju),sc=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype._getFragmentCodePerLight=function(t,e,n,i){var r,o="";this._pIsFirstLight?r=this._totalLightColorReg:(r=n.getFreeFragmentVectorTemp(),n.addFragmentTempUsages(r,1));var a=i.viewDirFragment,s=i.normalFragment;return o+="dp3 "+r+".w, "+t+", "+s+"\nadd "+r+".w, "+r+".w, "+r+".w\nmul "+r+".xyz, "+s+", "+r+".w\nsub "+r+".xyz, "+r+", "+t+"\nadd "+r+".w, "+r+".w, "+i.commons+".w\nsat "+r+".w, "+r+".w\nmul "+r+".xyz, "+r+", "+r+".w\ndp3 "+r+".w, "+r+", "+a+"\nsat "+r+".w, "+r+".w\n",this._texture?o+="mul "+this._specularTexData+".w, "+this._specularTexData+".y, "+this._specularDataRegister+".w\npow "+r+".w, "+r+".w, "+this._specularTexData+".w\n":o+="pow "+r+".w, "+r+".w, "+this._specularDataRegister+".w\n",this._shader.usesLightFallOff&&(o+="mul "+r+".w, "+r+".w, "+t+".w\n"),null!=this._modulateFunction&&(o+=this._modulateFunction(r,n,i)),o+="mul "+r+".xyz, "+e+".xyz, "+r+".w\n",this._pIsFirstLight||(o+="add "+this._totalLightColorReg+".xyz, "+this._totalLightColorReg+".xyz, "+r+".xyz\n",n.removeFragmentTempUsage(r)),this._pIsFirstLight=!1,o},e}(Zu);Dr.registerAbstraction(sc,ac);var lc=function(){function t(){}return t.LIGHTS=1,t.PROBES=2,t.ALL=3,t}(),uc=function(t){function e(e,n){var i=t.call(this)||this;return i._preserveAlpha=!0,i._forceSeparateMVP=!1,i._renderMaterial=e,i._renderElements=n,i._stage=n.stage,i}return o(e,t),Object.defineProperty(e.prototype,"shader",{get:function(){return this._shader},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preserveAlpha",{get:function(){return this._preserveAlpha},set:function(t){this._preserveAlpha!=t&&(this._preserveAlpha=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forceSeparateMVP",{get:function(){return this._forceSeparateMVP},set:function(t){this._forceSeparateMVP!=t&&(this._forceSeparateMVP=t,this.invalidate())},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this._shader.invalidateProgram(),this.dispatchEvent(new Tr(Tr.INVALIDATE,this))},e.prototype.dispose=function(){this._renderMaterial=null,this._renderElements=null,this._stage=null,this._shader&&(this._shader.dispose(),this._shader=null)},e.prototype._setRenderState=function(t){this._shader._setRenderState(t)},e.prototype._activate=function(){this._shader._activate()},e.prototype._deactivate=function(){this._shader._deactivate()},e.prototype._includeDependencies=function(t){t.alphaThreshold=this._renderMaterial.material.alphaThreshold,t.useImageRect=this._renderMaterial.material.imageRect,t.usesCurves=this._renderMaterial.material.curves,t.useBothSides=this._renderMaterial.material.bothSides,t.usesUVTransform=this._renderMaterial.material.animateUVs,t.usesColorTransform=this._renderMaterial.material.useColorTransform,this._forceSeparateMVP&&this._shader.globalPosDependencies++},e.prototype._initConstantData=function(){},e.prototype._getVertexCode=function(t,e){return""},e.prototype._getFragmentCode=function(t,e){return""},e.prototype._getPostAnimationFragmentCode=function(t,e){return""},e.prototype._getNormalVertexCode=function(t,e){return""},e.prototype._getNormalFragmentCode=function(t,e){return""},e}(p),cc=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i,r)||this;return o._includeCasters=!0,o._lightingPass=i,o}return o(e,t),e.prototype._includeDependencies=function(){this.numPointLights=this._lightingPass.numPointLights,this.numDirectionalLights=this._lightingPass.numDirectionalLights,this.numLightProbes=this._lightingPass.numLightProbes;var e=this._lightingPass.numPointLights+this._lightingPass.numDirectionalLights,n=this._lightingPass.numLightProbes,i=this._lightingPass._iUsesDiffuse(this)?this._lightingPass.diffuseLightSources:0,r=this._lightingPass._iUsesSpecular(this)?this._lightingPass.specularLightSources:0,o=i|r;this.usesLightFallOff=this._lightingPass.enableLightFallOff&&this.profile!=Ft.BASELINE_CONSTRAINED,this.usesCommonData=this.usesLightFallOff||this.usesCommonData,this.numLights=e+n,this.usesLights=e>0&&!!(o&lc.LIGHTS),this.usesProbes=n>0&&!!(o&lc.PROBES),this.usesLightsForSpecular=e>0&&!!(r&lc.LIGHTS),this.usesProbesForSpecular=n>0&&!!(r&lc.PROBES),this.usesLightsForDiffuse=e>0&&!!(i&lc.LIGHTS),this.usesProbesForDiffuse=n>0&&!!(i&lc.PROBES),this.usesShadows=this._lightingPass._iUsesShadows(this),t.prototype._includeDependencies.call(this)},e.prototype._setRenderState=function(e){t.prototype._setRenderState.call(this,e),this._lightingPass.lightPicker&&this._lightingPass.lightPicker.collectLights(e.node),this.usesLights&&this.updateLights(),this.usesProbes&&this.updateProbes()},e.prototype._initRegisterIndices=function(){if(t.prototype._initRegisterIndices.call(this),this.lightVertexConstantIndex=-1,this.lightFragmentConstantIndex=-1,this.probeWeightsIndex=-1,this._numProbeRegisters=Math.ceil(this.numLightProbes/4),this.usesTangentSpace||!this.usesGlobalPosFragment?(this._pointLightVertexConstants=new Array(this.numPointLights),this._pointLightFragmentConstants=new Array(2*this.numPointLights)):(this._pointLightVertexConstants=null,this._pointLightFragmentConstants=new Array(3*this.numPointLights)),this.usesTangentSpace?(this._dirLightVertexConstants=new Array(this.numDirectionalLights),this._dirLightFragmentConstants=new Array(2*this.numDirectionalLights)):(this._dirLightVertexConstants=null,this._dirLightFragmentConstants=new Array(3*this.numDirectionalLights)),this.usesLights){var e=void 0,n=void 0;if(this._dirLightVertexConstants)for(n=this._dirLightVertexConstants.length,e=0;e<n;++e)this._dirLightVertexConstants[e]=this._registerCache.getFreeVertexConstant(),-1==this.lightVertexConstantIndex&&(this.lightVertexConstantIndex=4*this._dirLightVertexConstants[e].index);if(this._pointLightVertexConstants)for(n=this._pointLightVertexConstants.length,e=0;e<n;++e)this._pointLightVertexConstants[e]=this._registerCache.getFreeVertexConstant(),-1==this.lightVertexConstantIndex&&(this.lightVertexConstantIndex=4*this._pointLightVertexConstants[e].index);for(n=this._dirLightFragmentConstants.length,e=0;e<n;++e)this._dirLightFragmentConstants[e]=this._registerCache.getFreeFragmentConstant(),-1==this.lightFragmentConstantIndex&&(this.lightFragmentConstantIndex=4*this._dirLightFragmentConstants[e].index);for(n=this._pointLightFragmentConstants.length,e=0;e<n;++e)this._pointLightFragmentConstants[e]=this._registerCache.getFreeFragmentConstant(),-1==this.lightFragmentConstantIndex&&(this.lightFragmentConstantIndex=4*this._pointLightFragmentConstants[e].index)}},e.prototype._compileDependencies=function(){t.prototype._compileDependencies.call(this),this._vertexCode+=this._lightingPass._getPreLightingVertexCode(this._registerCache,this._sharedRegisters),this._postAnimationFragmentCode+=this._lightingPass._getPreLightingFragmentCode(this._registerCache,this._sharedRegisters),this.usesShadows&&this._compileShadowCode(),this.usesLights&&this._compileLightCode(),this.usesProbes&&this._compileLightProbeCode()},e.prototype._compileShadowCode=function(){this.normalDependencies>0?this._sharedRegisters.shadowTarget=this._sharedRegisters.normalFragment:(this._sharedRegisters.shadowTarget=this._registerCache.getFreeFragmentVectorTemp(),this._registerCache.addFragmentTempUsages(this._sharedRegisters.shadowTarget,1))},e.prototype._compileLightCode=function(){for(var t,e,n,i,r=0,o=0,a=this.usesLightsForSpecular,s=this.usesLightsForDiffuse,l=0;l<this.numDirectionalLights;++l){if(this.usesTangentSpace){i=this._dirLightVertexConstants[r++];var u=this._registerCache.getFreeVarying();this._vertexCode+="m33 "+u+".xyz, "+i+", "+this._sharedRegisters.animatedTangent+"\nmov "+u+".w, "+i+".w\n",i=this._registerCache.getFreeFragmentVectorTemp(),this._registerCache.addVertexTempUsages(i,1),this._postAnimationFragmentCode+="nrm "+i+".xyz, "+u+"\nmov "+i+".w, "+u+".w\n"}else i=this._dirLightFragmentConstants[o++];t=this._dirLightFragmentConstants[o++],e=this._dirLightFragmentConstants[o++],s&&(this._postAnimationFragmentCode+=this._lightingPass._getPerLightDiffuseFragmentCode(i,t,this._registerCache,this._sharedRegisters)),a&&(this._postAnimationFragmentCode+=this._lightingPass._getPerLightSpecularFragmentCode(i,e,this._registerCache,this._sharedRegisters)),this.usesTangentSpace&&this._registerCache.removeVertexTempUsage(i)}r=0,o=0;for(l=0;l<this.numPointLights;++l){if(n=this.usesTangentSpace||!this.usesGlobalPosFragment?this._pointLightVertexConstants[r++]:this._pointLightFragmentConstants[o++],t=this._pointLightFragmentConstants[o++],e=this._pointLightFragmentConstants[o++],i=this._registerCache.getFreeFragmentVectorTemp(),this._registerCache.addFragmentTempUsages(i,1),this.usesTangentSpace){u=this._registerCache.getFreeVarying();var c=this._registerCache.getFreeVertexVectorTemp();this._vertexCode+="sub "+c+", "+n+", "+this._sharedRegisters.animatedPosition+"\nm33 "+u+".xyz, "+c+", "+this._sharedRegisters.animatedTangent+"\nmov "+u+".w, "+this._sharedRegisters.animatedPosition+".w\n"}else this.usesGlobalPosFragment?(u=i,this._postAnimationFragmentCode+="sub "+i+", "+n+", "+this._sharedRegisters.globalPositionVarying+"\n"):(u=this._registerCache.getFreeVarying(),this._vertexCode+="sub "+u+", "+n+", "+this._sharedRegisters.globalPositionVertex+"\n");this.usesLightFallOff?this._postAnimationFragmentCode+="dp3 "+i+".w, "+u+", "+u+"\nsub "+i+".w, "+i+".w, "+t+".w\nmul "+i+".w, "+i+".w, "+e+".w\nsat "+i+".w, "+i+".w\nsub "+i+".w, "+this._sharedRegisters.commons+".w, "+i+".w\nnrm "+i+".xyz, "+u+"\n":this._postAnimationFragmentCode+="nrm "+i+".xyz, "+u+"\nmov "+i+".w, "+u+".w\n",-1==this.lightFragmentConstantIndex&&(this.lightFragmentConstantIndex=4*n.index),s&&(this._postAnimationFragmentCode+=this._lightingPass._getPerLightDiffuseFragmentCode(i,t,this._registerCache,this._sharedRegisters)),a&&(this._postAnimationFragmentCode+=this._lightingPass._getPerLightSpecularFragmentCode(i,e,this._registerCache,this._sharedRegisters)),this._registerCache.removeFragmentTempUsage(i)}},e.prototype._compileLightProbeCode=function(){var t,e,n,i=[".x",".y",".z",".w"],r=new Array,o=this.usesProbesForSpecular,a=this.usesProbesForDiffuse;for(a&&(this.lightProbeDiffuseIndices=new Array),o&&(this.lightProbeSpecularIndices=new Array),e=0;e<this._numProbeRegisters;++e)r[e]=this._registerCache.getFreeFragmentConstant(),0==e&&(this.probeWeightsIndex=4*r[e].index);for(e=0;e<this.numLightProbes;++e)t=r[Math.floor(e/4)].toString()+i[e%4],a&&(n=this._registerCache.getFreeTextureReg(),this.lightProbeDiffuseIndices[e]=n.index,this._postAnimationFragmentCode+=this._lightingPass._getPerProbeDiffuseFragmentCode(n,t,this._registerCache,this._sharedRegisters)),o&&(n=this._registerCache.getFreeTextureReg(),this.lightProbeSpecularIndices[e]=n.index,this._postAnimationFragmentCode+=this._lightingPass._getPerProbeSpecularFragmentCode(n,t,this._registerCache,this._sharedRegisters))},e.prototype.updateLights=function(){var t,e,n,i,r,o,a=0,s=0,l=0,u=this.usesShadows?2:1;this.ambientR=this.ambientG=this.ambientB=0,r=this.lightVertexConstantIndex,s=this.lightFragmentConstantIndex;var c=0,h=this._lightingPass.lightPicker.directionalLights;for((o=this._lightingPass.directionalLightsOffset)>(n=this._lightingPass.lightPicker.directionalLights.length)&&(c=1,o-=n);c<u;++c)for(c&&(h=this._lightingPass.lightPicker.castingDirectionalLights),(n=h.length)>this.numDirectionalLights&&(n=this.numDirectionalLights),a=0;a<n;++a){if(i=(t=h[o+a]).sceneDirection,this.ambientR+=t._ambientR,this.ambientG+=t._ambientG,this.ambientB+=t._ambientB,this.usesTangentSpace){var p=-i.x,d=-i.y,f=-i.z;this.vertexConstantData[r++]=this._pInverseSceneMatrix[0]*p+this._pInverseSceneMatrix[4]*d+this._pInverseSceneMatrix[8]*f,this.vertexConstantData[r++]=this._pInverseSceneMatrix[1]*p+this._pInverseSceneMatrix[5]*d+this._pInverseSceneMatrix[9]*f,this.vertexConstantData[r++]=this._pInverseSceneMatrix[2]*p+this._pInverseSceneMatrix[6]*d+this._pInverseSceneMatrix[10]*f,this.vertexConstantData[r++]=1}else this.fragmentConstantData[s++]=-i.x,this.fragmentConstantData[s++]=-i.y,this.fragmentConstantData[s++]=-i.z,this.fragmentConstantData[s++]=1;this.fragmentConstantData[s++]=t._diffuseR,this.fragmentConstantData[s++]=t._diffuseG,this.fragmentConstantData[s++]=t._diffuseB,this.fragmentConstantData[s++]=1,this.fragmentConstantData[s++]=t._specularR,this.fragmentConstantData[s++]=t._specularG,this.fragmentConstantData[s++]=t._specularB,this.fragmentConstantData[s++]=1,++l==this.numDirectionalLights&&(a=n,c=u)}if(this.numDirectionalLights>l)for(a=s+12*(this.numDirectionalLights-l);s<a;)this.fragmentConstantData[s++]=0;l=0;var _=this._lightingPass.lightPicker.pointLights;for((o=this._lightingPass.pointLightsOffset)>(n=this._lightingPass.lightPicker.pointLights.length)?(c=1,o-=n):c=0;c<u;++c)for(c&&(_=this._lightingPass.lightPicker.castingPointLights),n=_.length,a=0;a<n;++a){i=(e=_[o+a]).transform.matrix3D.position,this.ambientR+=e._ambientR,this.ambientG+=e._ambientG,this.ambientB+=e._ambientB,this.usesTangentSpace?(p=i.x,d=i.y,f=i.z,this.vertexConstantData[r++]=this._pInverseSceneMatrix[0]*p+this._pInverseSceneMatrix[4]*d+this._pInverseSceneMatrix[8]*f+this._pInverseSceneMatrix[12],this.vertexConstantData[r++]=this._pInverseSceneMatrix[1]*p+this._pInverseSceneMatrix[5]*d+this._pInverseSceneMatrix[9]*f+this._pInverseSceneMatrix[13],this.vertexConstantData[r++]=this._pInverseSceneMatrix[2]*p+this._pInverseSceneMatrix[6]*d+this._pInverseSceneMatrix[10]*f+this._pInverseSceneMatrix[14],this.vertexConstantData[r++]=1):this.usesGlobalPosFragment?(this.fragmentConstantData[s++]=i.x,this.fragmentConstantData[s++]=i.y,this.fragmentConstantData[s++]=i.z,this.fragmentConstantData[s++]=1):(this.vertexConstantData[r++]=i.x,this.vertexConstantData[r++]=i.y,this.vertexConstantData[r++]=i.z,this.vertexConstantData[r++]=1),this.fragmentConstantData[s++]=e._diffuseR,this.fragmentConstantData[s++]=e._diffuseG,this.fragmentConstantData[s++]=e._diffuseB;var g=e.radius;this.fragmentConstantData[s++]=g*g,this.fragmentConstantData[s++]=e._specularR,this.fragmentConstantData[s++]=e._specularG,this.fragmentConstantData[s++]=e._specularB,this.fragmentConstantData[s++]=e.fallOffFactor,++l==this.numPointLights&&(a=n,c=u)}if(this.numPointLights>l)for(a=s+12*(l-this.numPointLights);s<a;++s)this.fragmentConstantData[s]=0},e.prototype.updateProbes=function(){var t,e=this._lightingPass.lightPicker.lightProbes,n=this._lightingPass.lightPicker.lightProbeWeights,i=e.length-this._lightingPass.lightProbesOffset,r=this.usesProbesForDiffuse,o=this.usesProbesForSpecular;if(r||o){i>this.numLightProbes&&(i=this.numLightProbes);for(var a=0;a<i;++a)t=e[this._lightingPass.lightProbesOffset+a],r&&t.diffuseMap.getAbstraction(this).activate(this.lightProbeDiffuseIndices[a],t.diffuseSampler),o&&t.specularMap.getAbstraction(this).activate(this.lightProbeSpecularIndices[a],t.diffuseSampler);for(a=0;a<i;++a)this.fragmentConstantData[this.probeWeightsIndex+a]=n[this._lightingPass.lightProbesOffset+a]}},e}(Dr),hc=function(){function t(){}return t.EFFECTS=1,t.LIGHTING=2,t.SUPER_SHADER=3,t}(),pc=function(t){function e(e,n,i){var r=t.call(this,n,i)||this;return r._maxLights=3,r._mode=3,r._includeCasters=!0,r._chunks=new Array,r._methods=new Array,r._numEffectDependencies=0,r.numDirectionalLights=0,r.numPointLights=0,r.numLightProbes=0,r.pointLightsOffset=0,r.directionalLightsOffset=0,r.lightProbesOffset=0,r._mode=e,r._onLightsChangeDelegate=function(t){return r.onLightsChange(t)},r._onMethodInvalidatedDelegate=function(t){return r.onMethodInvalidated(t)},r.lightPicker=n.lightPicker,null==r._shader&&r._updateShader(),r}return o(e,t),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode!=t&&(this._mode=t,this._updateLights())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"includeCasters",{get:function(){return this._includeCasters},set:function(t){this._includeCasters!=t&&(this._includeCasters=t,this._updateLights())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightPicker",{get:function(){return this._lightPicker},set:function(t){this._lightPicker&&this._lightPicker.removeEventListener(h.INVALIDATE,this._onLightsChangeDelegate),this._lightPicker=t,this._lightPicker&&this._lightPicker.addEventListener(h.INVALIDATE,this._onLightsChangeDelegate),this._updateLights()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableLightFallOff",{get:function(){return this._renderMaterial.enableLightFallOff},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diffuseLightSources",{get:function(){return this._renderMaterial.diffuseLightSources},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularLightSources",{get:function(){return this._renderMaterial.specularLightSources},enumerable:!1,configurable:!0}),e.prototype._updateShader=function(){!(this.numDirectionalLights||this.numPointLights||this.numLightProbes)||this._shader instanceof cc?null==this._shader&&(null!=this._shader&&(this._shader.dispose(),this._shader=null),this._shader=new Dr(this._renderElements,this._renderMaterial,this,this._stage)):(null!=this._shader&&(this._shader.dispose(),this._shader=null),this._shader=new cc(this._renderElements,this._renderMaterial,this,this._stage))},e.prototype._initConstantData=function(){for(var t=this._chunks.length,e=0;e<t;++e)this._chunks[e]._initConstants()},Object.defineProperty(e.prototype,"colorTransform",{get:function(){return this.colorTransformMethod?this.colorTransformMethod.colorTransform:null},set:function(t){t?(null==this.colorTransformMethod&&(this.colorTransformMethod=new Au),this.colorTransformMethod.colorTransform=t):t||this.colorTransformMethod&&(this.colorTransformMethod=null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorTransformMethod",{get:function(){return this._colorTransformMethod},set:function(t){this._colorTransformMethod!=t&&(this._colorTransformMethod&&(this._removeDependency(this._colorTransformMethod),this._colorTransformChunk=null),this._colorTransformMethod=t,t&&(this._colorTransformChunk=t.getAbstraction(this._shader),this._addDependency(t)))},enumerable:!1,configurable:!0}),e.prototype._removeDependency=function(t,e){void 0===e&&(e=!1);var n=this._methods.indexOf(t);-1!=n&&(e||this._numEffectDependencies--,t.removeEventListener(Ol.SHADER_INVALIDATED,this._onMethodInvalidatedDelegate),this._chunks[n].onClear(null),this._methods.splice(n,1),this._chunks.splice(n,1),this.invalidate())},e.prototype._addDependency=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=-1),t.addEventListener(Ol.SHADER_INVALIDATED,this._onMethodInvalidatedDelegate);var i=t.getAbstraction(this._shader);e?(-1!=n?(this._methods.splice(n+this._methods.length-this._numEffectDependencies,0,t),this._chunks.splice(n+this._chunks.length-this._numEffectDependencies,0,i)):(this._methods.push(t),this._chunks.push(i)),this._numEffectDependencies++):(this._methods.splice(this._methods.length-this._numEffectDependencies,0,t),this._chunks.splice(this._chunks.length-this._numEffectDependencies,0,i)),this.invalidate()},e.prototype.addEffectMethod=function(t){this._addDependency(t,!0)},Object.defineProperty(e.prototype,"numEffectMethods",{get:function(){return this._numEffectDependencies},enumerable:!1,configurable:!0}),e.prototype.hasEffectMethod=function(t){return-1!=this._methods.indexOf(t)},e.prototype.getEffectMethodAt=function(t){return t<0||t>this._numEffectDependencies-1?null:this._methods[t+this._methods.length-this._numEffectDependencies]},e.prototype.addEffectMethodAt=function(t,e){this._addDependency(t,!0,e)},e.prototype.removeEffectMethod=function(t){this._removeDependency(t,!0)},e.prototype.removeEffectMethodAt=function(t){var e=this.getEffectMethodAt(t);null!=e&&this._removeDependency(e,!0)},Object.defineProperty(e.prototype,"normalMethod",{get:function(){return this._normalMethod},set:function(t){this._normalMethod!=t&&(this._normalMethod&&(this._removeDependency(this._normalMethod),this._normalChunk=null),this._normalMethod=t,t&&(this._normalChunk=t.getAbstraction(this._shader),this._addDependency(t)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ambientMethod",{get:function(){return this._ambientMethod},set:function(t){this._ambientMethod!=t&&(this._ambientMethod&&(this._removeDependency(this._ambientMethod),this._ambientChunk=null),this._ambientMethod=t,t&&(this._ambientChunk=t.getAbstraction(this._shader),this._addDependency(t)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowMethod",{get:function(){return this._shadowMethod},set:function(t){this._shadowMethod!=t&&(this._shadowMethod&&(this._removeDependency(this._shadowMethod),this._shadowChunk=null),this._shadowMethod=t,t&&(this._shadowChunk=t.getAbstraction(this._shader),this._addDependency(t)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diffuseMethod",{get:function(){return this._diffuseMethod},set:function(t){this._diffuseMethod!=t&&(this._diffuseMethod&&(this._removeDependency(this._diffuseMethod),this._diffuseChunk=null),this._diffuseMethod=t,t&&(this._diffuseChunk=t.getAbstraction(this._shader),this._addDependency(t)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularMethod",{get:function(){return this._specularMethod},set:function(t){this._specularMethod!=t&&(this._specularMethod&&(this._removeDependency(this._specularMethod),this._specularChunk=null),this._specularMethod=t,t&&(this._specularChunk=t.getAbstraction(this._shader),this._addDependency(t)))},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){for(this._lightPicker&&this._lightPicker.removeEventListener(h.INVALIDATE,this._onLightsChangeDelegate);this._methods.length;)this._removeDependency(this._methods[0]);t.prototype.dispose.call(this),this._chunks=null,this._methods=null},e.prototype.onMethodInvalidated=function(t){this.invalidate()},e.prototype._activate=function(){var e;t.prototype._activate.call(this);for(var n=this._chunks.length,i=0;i<n;++i)(e=this._chunks[i]).chunkVO.useChunk&&e._activate()},e.prototype._setRenderState=function(e){var n;t.prototype._setRenderState.call(this,e);for(var i=this._chunks.length,r=0;r<i;++r)(n=this._chunks[r]).chunkVO.useChunk&&n._setRenderState(e)},e.prototype._deactivate=function(){var e;t.prototype._deactivate.call(this);for(var n=this._chunks.length,i=0;i<n;++i)(e=this._chunks[i]).chunkVO.useChunk&&e._deactivate()},e.prototype._includeDependencies=function(e){var n;t.prototype._includeDependencies.call(this,e),e.usesFragmentAnimation=Boolean(this._mode==hc.SUPER_SHADER);var i=this._chunks.length;for(n=0;n<i;++n)this.setupAndCountDependencies(e,this._chunks[n]);var r,o=!0;for(n=0;n<i;++n)((r=this._chunks[n]).chunkVO.useChunk=r._isUsed())&&!r._usesTangentSpace()&&(o=!1);e.outputsNormals=this._normalChunk&&this._normalChunk.chunkVO.useChunk,e.outputsTangentNormals=e.outputsNormals&&this._normalChunk._outputsTangentNormals(),e.usesTangentSpace=e.outputsTangentNormals&&!e.usesProbes&&o,e.usesTangentSpace||(e.viewDirDependencies>0?e.globalPosDependencies++:this.numPointLights>0&&e.usesLights&&(e.globalPosDependencies++,this._mode&hc.EFFECTS&&(e.usesGlobalPosFragment=!0)))},e.prototype.setupAndCountDependencies=function(t,e){var n=e.chunkVO;e._reset(n),e._initVO(n),n.needsProjection&&t.projectionDependencies++,(n.needsGlobalVertexPos||n.needsGlobalFragmentPos)&&(t.globalPosDependencies++,n.needsGlobalFragmentPos&&(t.usesGlobalPosFragment=!0)),n.needsNormals&&t.normalDependencies++,n.needsTangents&&t.tangentDependencies++,n.needsView&&t.viewDirDependencies++},e.prototype._getPreLightingVertexCode=function(t,e){return""},e.prototype._getPreLightingFragmentCode=function(t,e){var n="";return this._diffuseChunk&&this._diffuseChunk.chunkVO.useChunk&&(n+=this._diffuseChunk._getFragmentPreLightingCode(t,e)),this._specularChunk&&this._specularChunk.chunkVO.useChunk&&(n+=this._specularChunk._getFragmentPreLightingCode(t,e)),n},e.prototype._getPerLightDiffuseFragmentCode=function(t,e,n,i){return this._diffuseChunk._getFragmentCodePerLight(t,e,n,i)},e.prototype._getPerLightSpecularFragmentCode=function(t,e,n,i){return this._specularChunk._getFragmentCodePerLight(t,e,n,i)},e.prototype._getPerProbeDiffuseFragmentCode=function(t,e,n,i){return this._diffuseChunk._getFragmentCodePerProbe(t,e,n,i)},e.prototype._getPerProbeSpecularFragmentCode=function(t,e,n,i){return this._specularChunk._getFragmentCodePerProbe(t,e,n,i)},e.prototype._getNormalVertexCode=function(t,e){return this._normalChunk._getVertexCode(t,e)},e.prototype._getNormalFragmentCode=function(t,e){var n=this._normalChunk._getFragmentCode(e.normalFragment,t,e);return this._normalChunk.chunkVO.needsView&&t.removeFragmentTempUsage(e.viewDirFragment),(this._normalChunk.chunkVO.needsGlobalFragmentPos||this._normalChunk.chunkVO.needsGlobalVertexPos)&&t.removeVertexTempUsage(e.globalPositionVertex),n},e.prototype._getVertexCode=function(t,e){var n,i="";this._ambientChunk&&this._ambientChunk.chunkVO.useChunk&&(i+=this._ambientChunk._getVertexCode(t,e)),this._shadowChunk&&(i+=this._shadowChunk._getVertexCode(t,e)),this._diffuseChunk&&this._diffuseChunk.chunkVO.useChunk&&(i+=this._diffuseChunk._getVertexCode(t,e)),this._specularChunk&&this._specularChunk.chunkVO.useChunk&&(i+=this._specularChunk._getVertexCode(t,e));for(var r=this._chunks.length,o=r-this._numEffectDependencies;o<r;o++)(n=this._chunks[o]).chunkVO.useChunk&&(i+=n._getVertexCode(t,e),(n.chunkVO.needsGlobalVertexPos||n.chunkVO.needsGlobalFragmentPos)&&t.removeVertexTempUsage(e.globalPositionVertex));return this._colorTransformChunk&&this._colorTransformChunk.chunkVO.useChunk&&(i+=this._colorTransformChunk._getVertexCode(t,e)),i},e.prototype._getFragmentCode=function(t,e){var n="";return this._ambientChunk&&this._ambientChunk.chunkVO.useChunk&&(n+=this._ambientChunk._getFragmentCode(e.shadedTarget,t,e),this._ambientChunk.chunkVO.needsNormals&&t.removeFragmentTempUsage(e.normalFragment),this._ambientChunk.chunkVO.needsView&&t.removeFragmentTempUsage(e.viewDirFragment)),n},e.prototype._getPostAnimationFragmentCode=function(t,e){var n,i,r="";this._shadowChunk&&(r+=this._shadowChunk._getFragmentCode(e.shadowTarget,t,e)),this._diffuseChunk&&this._diffuseChunk.chunkVO.useChunk&&(r+=this._diffuseChunk._getFragmentCode(e.shadedTarget,t,e),this._diffuseChunk.chunkVO.needsNormals&&t.removeFragmentTempUsage(e.normalFragment),this._diffuseChunk.chunkVO.needsView&&t.removeFragmentTempUsage(e.viewDirFragment)),this._specularChunk&&this._specularChunk.chunkVO.useChunk&&(r+=this._specularChunk._getFragmentCode(e.shadedTarget,t,e),this._specularChunk.chunkVO.needsNormals&&t.removeFragmentTempUsage(e.normalFragment),this._specularChunk.chunkVO.needsView&&t.removeFragmentTempUsage(e.viewDirFragment)),this._shadowChunk&&!this._shader.normalDependencies&&t.removeFragmentTempUsage(e.shadowTarget),this.preserveAlpha&&this._numEffectDependencies>0&&(n=t.getFreeFragmentSingleTemp(),t.addFragmentTempUsages(n,1),r+="mov "+n+", "+e.shadedTarget+".w\n");for(var o=this._chunks.length,a=o-this._numEffectDependencies;a<o;a++)(i=this._chunks[a]).chunkVO.useChunk&&(r+=i._getFragmentCode(e.shadedTarget,t,e),i.chunkVO.needsNormals&&t.removeFragmentTempUsage(e.normalFragment),i.chunkVO.needsView&&t.removeFragmentTempUsage(e.viewDirFragment));return this.preserveAlpha&&this._numEffectDependencies>0&&(r+="mov "+e.shadedTarget+".w, "+n+"\n",t.removeFragmentTempUsage(n)),this._colorTransformChunk&&this._colorTransformChunk.chunkVO.useChunk&&(r+=this._colorTransformChunk._getFragmentCode(e.shadedTarget,t,e)),r},e.prototype._iUsesShadows=function(t){return Boolean(this._shadowChunk&&(this._lightPicker.castingDirectionalLights.length>0||this._lightPicker.castingPointLights.length>0))},e.prototype._iUsesSpecular=function(t){return Boolean(this._specularChunk)},e.prototype._iUsesDiffuse=function(t){return Boolean(this._diffuseChunk)},e.prototype.onLightsChange=function(t){this._updateLights()},e.prototype._updateLights=function(){var t=this.numDirectionalLights,e=this.numPointLights,n=this.numLightProbes;this._lightPicker&&this._mode&hc.LIGHTING?(this.numDirectionalLights=this.calculateNumDirectionalLights(this._lightPicker.numDirectionalLights),this.numPointLights=this.calculateNumPointLights(this._lightPicker.numPointLights),this.numLightProbes=this.calculateNumProbes(this._lightPicker.numLightProbes),this._includeCasters&&(this.numDirectionalLights+=this._lightPicker.numCastingDirectionalLights,this.numPointLights+=this._lightPicker.numCastingPointLights)):(this.numDirectionalLights=0,this.numPointLights=0,this.numLightProbes=0),t==this.numDirectionalLights&&e==this.numPointLights&&n==this.numLightProbes||(this._updateShader(),this.invalidate())},e.prototype.calculateNumDirectionalLights=function(t){return Math.min(t-this.directionalLightsOffset,this._maxLights)},e.prototype.calculateNumPointLights=function(t){var e=this._maxLights-this.numDirectionalLights;return Math.min(t-this.pointLightsOffset,e)},e.prototype.calculateNumProbes=function(t){var e=0;return this._renderMaterial.specularLightSources&lc.PROBES&&++e,this._renderMaterial.diffuseLightSources&lc.PROBES&&++e,Math.min(t-this.lightProbesOffset,4/e|0)},e}(uc),dc=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._diffuseR=1,i._diffuseG=1,i._diffuseB=1,i._diffuseA=1,i._shader=new Dr(n,e,i,i._stage),i.invalidate(),i}return o(e,t),e.prototype._includeDependencies=function(e){t.prototype._includeDependencies.call(this,e),null!=this._shaderTexture&&e.uvDependencies++},e.prototype.invalidate=function(){t.prototype.invalidate.call(this);var e=this._renderMaterial.material.getTextureAt(0);this._shaderTexture=e?e.getAbstraction(this._shader):null},e.prototype.dispose=function(){this._shaderTexture&&(this._shaderTexture.onClear(new h(h.CLEAR,this._renderMaterial.material.getTextureAt(0))),this._shaderTexture=null),t.prototype.dispose.call(this)},e.prototype._getFragmentCode=function(t,e){var n,i="";this.preserveAlpha&&(n=t.getFreeFragmentSingleTemp(),t.addFragmentTempUsages(n,1),i+="mov "+n+", "+e.shadedTarget+".w\n");var r=e.shadedTarget;if(null!=this._shaderTexture){if(i+=this._shaderTexture._getFragmentCode(r,t,e,e.uvVarying),this._shader.alphaThreshold>0){var o=t.getFreeFragmentConstant();this._fragmentConstantsIndex=4*o.index,i+="sub "+r+".w, "+r+".w, "+o+".x\nkil "+r+".w\nadd "+r+".w, "+r+".w, "+o+".x\n"}}else if(-1!=this._shader.colorBufferIndex)i+="mov "+r+", "+e.colorVarying+"\n";else{var a=t.getFreeFragmentConstant();this._fragmentConstantsIndex=4*a.index,i+="mov "+r+", "+a+"\n"}return this.preserveAlpha&&(i+="mul "+e.shadedTarget+".w, "+e.shadedTarget+".w, "+n+"\n",t.removeFragmentTempUsage(n)),i},e.prototype._setRenderState=function(e){t.prototype._setRenderState.call(this,e),null!=this._shaderTexture&&this._shaderTexture._setRenderState(e)},e.prototype._activate=function(){if(t.prototype._activate.call(this),null!=this._shaderTexture)this._shaderTexture.activate(),this._shader.alphaThreshold>0&&(this._shader.fragmentConstantData[this._fragmentConstantsIndex]=this._shader.alphaThreshold);else if(-1==this._shader.colorBufferIndex){var e=this._fragmentConstantsIndex,n=this._shader.fragmentConstantData;n[e]=this._diffuseR,n[e+1]=this._diffuseG,n[e+2]=this._diffuseB,n[e+3]=this._diffuseA}},e}(uc),fc=function(t){function e(){var e=t.call(this)||this;return e._numPointLights=0,e._numDirectionalLights=0,e._numCastingPointLights=0,e._numCastingDirectionalLights=0,e._numLightProbes=0,e}return o(e,t),e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numDirectionalLights",{get:function(){return this._numDirectionalLights},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numPointLights",{get:function(){return this._numPointLights},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numCastingDirectionalLights",{get:function(){return this._numCastingDirectionalLights},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numCastingPointLights",{get:function(){return this._numCastingPointLights},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numLightProbes",{get:function(){return this._numLightProbes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointLights",{get:function(){return this._pointLights},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"directionalLights",{get:function(){return this._directionalLights},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"castingPointLights",{get:function(){return this._castingPointLights},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"castingDirectionalLights",{get:function(){return this._castingDirectionalLights},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightProbes",{get:function(){return this._lightProbes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightProbeWeights",{get:function(){return this._lightProbeWeights},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allPickedLights",{get:function(){return this._allPickedLights},enumerable:!1,configurable:!0}),e.prototype.collectLights=function(t){this.updateProbeWeights(t)},e.prototype.updateProbeWeights=function(t){var e,n,i,r,o,a,s=t.getPosition(),l=s.x,u=s.y,c=s.z,h=0;for(a=0;a<this._numLightProbes;++a)o=(o=(n=l-(e=this._lightProbes[a].transform.matrix3D.position).x)*n+(i=u-e.y)*i+(r=c-e.z)*r)>1e-5?1/o:5e7,this._lightProbeWeights[a]=o,h+=o;for(h=1/h,a=0;a<this._numLightProbes;++a)this._lightProbeWeights[a]*=h},e.assetType="[asset LightPicker]",e}(_),_c=function(t){function e(e){var n=t.call(this)||this;return n._onCastShadowChangeDelegate=function(t){return n.onCastShadowChange(t)},n.lights=e,n}return o(e,t),Object.defineProperty(e.prototype,"lights",{get:function(){return this._lights},set:function(t){var e,n=0,i=0,r=0,o=0,a=0;this._lights&&this.clearListeners(),this._lights=t,this._allPickedLights=t,this._pointLights=new Array,this._castingPointLights=new Array,this._directionalLights=new Array,this._castingDirectionalLights=new Array,this._lightProbes=new Array;for(var s=t.length,l=0;l<s;++l)(e=t[l]).addEventListener(Pl.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate),e instanceof Wl?e.shadowsEnabled?this._castingPointLights[r++]=e:this._pointLights[n++]=e:e instanceof zl?e.shadowsEnabled?this._castingDirectionalLights[o++]=e:this._directionalLights[i++]=e:e instanceof Hl&&(this._lightProbes[a++]=e);this._numDirectionalLights==i&&this._numPointLights==n&&this._numLightProbes==a&&this._numCastingPointLights==r&&this._numCastingDirectionalLights==o||(this._numDirectionalLights=i,this._numCastingDirectionalLights=o,this._numPointLights=n,this._numCastingPointLights=r,this._numLightProbes=a,this._lightProbeWeights=new Array(4*Math.ceil(a/4)),this.dispatchEvent(new h(h.INVALIDATE,this)))},enumerable:!1,configurable:!0}),e.prototype.clearListeners=function(){for(var t=this._lights.length,e=0;e<t;++e)this._lights[e].removeEventListener(Pl.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate)},e.prototype.onCastShadowChange=function(t){var e=t.target;e instanceof Wl?this.updatePointCasting(e):e instanceof zl&&this.updateDirectionalCasting(e),this.dispatchEvent(new h(h.INVALIDATE,this))},e.prototype.updateDirectionalCasting=function(t){var e=t;t.shadowsEnabled?(--this._numDirectionalLights,++this._numCastingDirectionalLights,this._directionalLights.splice(this._directionalLights.indexOf(e),1),this._castingDirectionalLights.push(t)):(++this._numDirectionalLights,--this._numCastingDirectionalLights,this._castingDirectionalLights.splice(this._castingDirectionalLights.indexOf(e),1),this._directionalLights.push(t))},e.prototype.updatePointCasting=function(t){var e=t;t.shadowsEnabled?(--this._numPointLights,++this._numCastingPointLights,this._pointLights.splice(this._pointLights.indexOf(e),1),this._castingPointLights.push(t)):(++this._numPointLights,--this._numCastingPointLights,this._castingPointLights.splice(this._castingPointLights.indexOf(e),1),this._pointLights.push(t))},e}(fc),gc=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=3);var i=t.call(this,e)||this;if(i._scissorRectsInvalid=!0,i._onClearDelegate=function(t){return i.onClear(t)},e.addEventListener(h.CLEAR,i._onClearDelegate),n<1||n>4)throw new Error("numCascades must be an integer between 1 and 4");return i._numCascades=n,i.init(),i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._image2D.removeEventListener(h.CLEAR,this._onClearDelegate),t.prototype.dispose.call(this)},e.prototype.getSplitRatio=function(t){return this._splitRatios[t]},e.prototype.setSplitRatio=function(t,e){if(e<0?e=0:e>1&&(e=1),t>=this._numCascades)throw new Error("index must be smaller than the number of cascades!");this._splitRatios[t]=e},e.prototype.getDepthProjections=function(t){return this._depthProjections[t].viewMatrix3D},e.prototype.init=function(){this._splitRatios=new Array(this._numCascades),this._nearPlaneDistances=new Array(this._numCascades);for(var t=1,e=this._numCascades-1;e>=0;--e)this._splitRatios[e]=t,t*=.4;for(this._texOffsetsX=Array(-1,1,-1,1),this._texOffsetsY=Array(1,1,-1,-1),this._pScissorRects=new Array(4),this._depthProjections=new Array,e=0;e<this._numCascades;++e)this._depthProjections[e]=new xt},e.prototype.onClear=function(t){this._scissorRectsInvalid=!0},Object.defineProperty(e.prototype,"numCascades",{get:function(){return this._numCascades},set:function(t){if(t!=this._numCascades){if(t<1||t>4)throw new Error("numCascades must be an integer between 1 and 4");this._numCascades=t,this._scissorRectsInvalid=!0,this.init(),this.dispatchEvent(new h(h.INVALIDATE,this))}},enumerable:!1,configurable:!0}),e.prototype._renderMap=function(t){this._scissorRectsInvalid&&this.updateScissorRects()},e.prototype.updateScissorRects=function(){var t=.5*this._image2D.width;this._pScissorRects[0]=new W(0,0,t,t),this._pScissorRects[1]=new W(t,0,t,t),this._pScissorRects[2]=new W(0,t,t,t),this._pScissorRects[3]=new W(t,t,t,t),this._scissorRectsInvalid=!1},e.prototype._updateProjection=function(t){var e,n=t.near,i=t.far-n;this._updateProjectionFromFrustumCorners(t,t.viewFrustumCorners,this._matrix),this._matrix.appendScale(.96,.96,1),this._overallDepthProjection.frustumMatrix3D=this._matrix,this._updateCullPlanes(t);for(var r=0;r<this._numCascades;++r)e=this._depthProjections[r].frustumMatrix3D,this._nearPlaneDistances[r]=n+this._splitRatios[r]*i,this._depthProjections[r].transform.matrix3D=this._overallDepthProjection.transform.matrix3D,this.updateProjectionPartition(e,this._splitRatios[r],this._texOffsetsX[r],this._texOffsetsY[r]),this._depthProjections[r].frustumMatrix3D=e},e.prototype.updateProjectionPartition=function(t,e,n,i){for(var r,o,a,s,l,u,c=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,_=0;_<12;)(r=this._localFrustum[_])<c&&(c=r),r>p&&(p=r),(o=this._localFrustum[_+1])<h&&(h=o),o>d&&(d=o),(a=this._localFrustum[_+2])>f&&(f=a),(s=r+(this._localFrustum[_+12]-r)*e)<c&&(c=s),s>p&&(p=s),(l=o+(this._localFrustum[_+13]-o)*e)<h&&(h=l),l>d&&(d=l),(u=a+(this._localFrustum[_+14]-a)*e)>f&&(f=u),_+=3;var g=p-c,m=d-h,y=1/(f-1);c<0&&(c-=this._snap),h<0&&(h-=this._snap),c=Math.floor(c/this._snap)*this._snap,h=Math.floor(h/this._snap)*this._snap;var A=2*this._snap;p=c+(g=Math.floor(g/A+1)*A),d=h+(m=Math.floor(m/A+1)*A),g=1/g,m=1/m;var v=t._rawData;v[0]=2*g,v[5]=2*m,v[10]=y,v[12]=-(p+c)*g,v[13]=-(d+h)*m,v[14]=-1*y,v[15]=1,v[1]=v[2]=v[3]=v[4]=v[6]=v[7]=v[8]=v[9]=v[11]=0,t.appendScale(.96,.96,1),t.appendTranslation(n,i,0),t.appendScale(.5,.5,1)},Object.defineProperty(e.prototype,"_iNearPlaneDistances",{get:function(){return this._nearPlaneDistances},enumerable:!1,configurable:!0}),e.assetType="[asset CascadeShadowMapper]",e}(jl),mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._initVO=function(e){t.prototype._initVO.call(this,e),e.needsProjection=!0},e.prototype._initConstants=function(){t.prototype._initConstants.call(this);var e=this._shader.fragmentConstantData,n=this._shader.vertexConstantData,i=this._fragmentConstantsIndex;e[i]=1,e[i+1]=1/255,e[i+2]=1/65025,e[i+3]=1/16581375,e[i+6]=.5,e[i+7]=-.5,n[i=this._vertexConstantsIndex]=.5,n[i+1]=-.5,n[i+2]=0;var r=this._mapper.numCascades;this._projectionMatrices=new Array(r);for(var o=0;o<r;++o)this._projectionMatrices[o]=new U(new Float32Array(this._shader.vertexConstantData.buffer,4*(this._vertexConstantsIndex+4+16*o),16))},e.prototype._cleanCompilationData=function(){t.prototype._cleanCompilationData.call(this),this._cascadeProjections=null,this._depthMapCoordVaryings=null,this._projectionMatrices=null},e.prototype._getVertexCode=function(t,e){var n="",i=t.getFreeVertexConstant();this._vertexConstantsIndex=4*i.index,this._cascadeProjections=new Array(this._mapper.numCascades),this._depthMapCoordVaryings=new Array(this._mapper.numCascades);for(var r=0;r<this._mapper.numCascades;++r)this._depthMapCoordVaryings[r]=t.getFreeVarying(),this._cascadeProjections[r]=t.getFreeVertexConstant(),t.getFreeVertexConstant(),t.getFreeVertexConstant(),t.getFreeVertexConstant();var o=t.getFreeVertexVectorTemp();for(r=0;r<this._mapper.numCascades;++r)n+="m44 "+o+", "+e.globalPositionVertex+", "+this._cascadeProjections[r]+"\nadd "+this._depthMapCoordVaryings[r]+", "+o+", "+i+".zzwz\n";return n},e.prototype._getFragmentCode=function(t,e,n){var i,r=this._mapper.numCascades,o=e.getFreeFragmentConstant(),a=e.getFreeFragmentConstant(),s=e.getFreeFragmentConstant(),l=Array(s+".x",s+".y",s+".z",s+".w");this._fragmentConstantsIndex=4*o.index;var u=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(u,1);var c=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(c,1),i="mov "+c+", "+this._depthMapCoordVaryings[r-1]+"\n";for(var h=r-2;h>=0;--h){var p=this._depthMapCoordVaryings[h];i+="slt "+u+".z, "+n.projectionFragment+".z, "+l[h]+"\n";var d=e.getFreeFragmentVectorTemp();i+="sub "+d+", "+p+", "+c+"\nmul "+d+", "+d+", "+u+".z\nadd "+c+", "+c+", "+d+"\n"}return e.removeFragmentTempUsage(u),i+="div "+c+", "+c+", "+c+".w\nmul "+c+".xy, "+c+".xy, "+a+".zw\nadd "+c+".xy, "+c+".xy, "+a+".zz\n",e.removeFragmentTempUsage(c),i},e.prototype._activate=function(){this._shader.vertexConstantData[this._vertexConstantsIndex+3]=-1/(this._mapper.depth*this._mapper.epsilon);for(var t=this._mapper.numCascades,e=0;e<t;++e)this._projectionMatrices[e].copyFrom(this._mapper.getDepthProjections(e),!0);var n=this._shader.fragmentConstantData,i=this._fragmentConstantsIndex;n[i+5]=1-this._mapper.alpha;var r=this._mapper._iNearPlaneDistances;i+=8;for(var o=0;o<t;++o)n[i+o]=r[o]},e.prototype._setRenderState=function(t){},e}(Gl);Dr.registerAbstraction(mc,gc);var yc=function(t){function e(e,n,i){void 0===e&&(e=null),void 0===n&&(n=.5),void 0===i&&(i=.1);var r=t.call(this,e)||this;return r.coverageRatio=n,r._fadeRatio=i,r}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coverageRatio",{get:function(){return this._coverageRatio},set:function(t){t>1?t=1:t<0&&(t=0),this._coverageRatio=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fadeRatio",{get:function(){return this._fadeRatio},set:function(t){this._fadeRatio=t},enumerable:!1,configurable:!0}),e.prototype._updateProjection=function(t){for(var e=t.viewFrustumCorners,n=0;n<12;++n){var i=e[n];this._localFrustum[n]=i,this._localFrustum[n+12]=i+(e[n+12]-i)*this._coverageRatio}this._updateProjectionFromFrustumCorners(t,this._localFrustum,this._matrix),this._overallDepthProjection.frustumMatrix3D=this._matrix},e.assetType="[asset NearDirectionalShadowMapper]",e}(jl),Ac=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._initConstants=function(){t.prototype._initConstants.call(this);var e=this._shader.fragmentConstantData,n=this._fragmentDistanceIndex;e[n+2]=0,e[n+3]=1},e.prototype._initVO=function(e){t.prototype._initVO.call(this,e),e.needsProjection=!0},e.prototype._getFragmentCode=function(e,n,i){var r=t.prototype._getFragmentCode.call(this,e,n,i),o=n.getFreeFragmentConstant(),a=n.getFreeFragmentSingleTemp();return this._fragmentDistanceIndex=4*o.index,r+="abs "+a+", "+i.projectionFragment+".w\nsub "+a+", "+a+", "+o+".x\nmul "+a+", "+a+", "+o+".y\nsat "+a+", "+a+"\nsub "+a+", "+o+".w,"+a+"\nsub "+e+".w, "+o+".w,"+e+".w\nmul "+e+".w, "+e+".w, "+a+"\nsub "+e+".w, "+o+".w,"+e+".w\n"},e.prototype._setRenderState=function(e){var n=this._shader.view.projection.near,i=this._shader.view.projection.far-n,r=this._mapper.coverageRatio,o=r*(1-this._mapper.fadeRatio);r=n+r*i,o=n+o*i;var a=this._shader.fragmentConstantData,s=this._fragmentDistanceIndex;a[s]=o,a[s+1]=1/(r-o),t.prototype._setRenderState.call(this,e)},e}(Gl);Dr.registerAbstraction(Ac,yc);var vc=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[texture DepthTexture2D]",e}(fo);Dr.registerAbstraction(Ll,vc);var bc=function(t){function e(e,n){void 0===e&&(e=16777215),void 0===n&&(n=1);var i=t.call(this)||this;return i._textures=new Array,i._pUseColorTransform=!1,i._alphaBlending=!1,i._alpha=1,i._pAlphaThreshold=0,i._pAnimateUVs=!1,i._style=new Gr,i._iBaseScreenPassIndex=0,i._bothSides=!1,i._pBlendMode=ze.NORMAL,i._imageRect=!1,i._curves=!1,i._onInvalidatePropertiesDelegate=function(t){return i._onInvalidateProperties(t)},i._onInvalidateImagesDelegate=function(t){return i._onInvalidateImages(t)},i._style.addEventListener(jr.INVALIDATE_PROPERTIES,i._onInvalidatePropertiesDelegate),i._style.addEventListener(jr.INVALIDATE_IMAGES,i._onInvalidateImagesDelegate),e instanceof pe?i._style.image=e:i._style.color=Number(e),i.alpha=n,i._onTextureInvalidateDelegate=function(t){return i.onTextureInvalidate(t)},i}return o(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t>1?t=1:t<0&&(t=0),this._alpha!=t&&(this._alpha=t,null==this._colorTransform&&(this._colorTransform=new T),this._colorTransform.alphaMultiplier=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorTransform",{get:function(){return this._colorTransform},set:function(t){this._colorTransform=t,this.invalidate()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaBlending",{get:function(){return this._alphaBlending},set:function(t){this._alphaBlending!=t&&(this._alphaBlending=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curves",{get:function(){return this._curves},set:function(t){this._curves!=t&&(this._curves=t,this.invalidatePasses())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageRect",{get:function(){return this._imageRect},set:function(t){this._imageRect!=t&&(this._imageRect=t,this.invalidatePasses())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style!=t&&(this._style&&(this._style.removeEventListener(jr.INVALIDATE_PROPERTIES,this._onInvalidatePropertiesDelegate),this._style.removeEventListener(jr.INVALIDATE_IMAGES,this._onInvalidateImagesDelegate)),this._style=t,this._style&&(this._style.addEventListener(jr.INVALIDATE_PROPERTIES,this._onInvalidatePropertiesDelegate),this._style.addEventListener(jr.INVALIDATE_IMAGES,this._onInvalidateImagesDelegate)),this.invalidatePasses())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animateUVs",{get:function(){return this._pAnimateUVs},set:function(t){this._pAnimateUVs!=t&&(this._pAnimateUVs=t,this.invalidatePasses())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useColorTransform",{get:function(){return this._pUseColorTransform},set:function(t){this._pUseColorTransform!=t&&(this._pUseColorTransform=t,this.invalidatePasses())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bothSides",{get:function(){return this._bothSides},set:function(t){this._bothSides!=t&&(this._bothSides=t,this.invalidatePasses())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._pBlendMode},set:function(t){this._pBlendMode!=t&&(this._pBlendMode=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaThreshold",{get:function(){return this._pAlphaThreshold},set:function(t){t<0?t=0:t>1&&(t=1),this._pAlphaThreshold!=t&&(this._pAlphaThreshold=t,this.invalidatePasses())},enumerable:!1,configurable:!0}),e.prototype.getNumTextures=function(){return this._textures.length},e.prototype.getTextureAt=function(t){return this._textures[t]},e.prototype.dispose=function(){this.clear()},e.prototype.invalidatePasses=function(){this.dispatchEvent(new Pr(Pr.INVALIDATE_PASSES,this))},e.prototype.invalidateTextures=function(){this.dispatchEvent(new Pr(Pr.INVALIDATE_TEXTURES,this))},e.prototype.addTextureAt=function(t,e){var n=this._textures.indexOf(t);n!=e&&(-1!=n&&this._textures.splice(n,1),this._textures.splice(e,0,t),t.addEventListener(h.INVALIDATE,this._onTextureInvalidateDelegate),this.onTextureInvalidate())},e.prototype.addTexture=function(t){-1==this._textures.indexOf(t)&&(this._textures.push(t),t.addEventListener(h.INVALIDATE,this._onTextureInvalidateDelegate),this.onTextureInvalidate())},e.prototype.removeTexture=function(t){this._textures.splice(this._textures.indexOf(t),1),t.removeEventListener(h.INVALIDATE,this._onTextureInvalidateDelegate),this.onTextureInvalidate()},e.prototype.onTextureInvalidate=function(t){this.invalidatePasses(),this.invalidateTextures()},e.prototype._onInvalidateProperties=function(t){this.invalidatePasses(),this.invalidateTextures()},e.prototype._onInvalidateImages=function(t){this.invalidate()},e}(_),xc=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._shader=new Dr(n,i,i,i._stage),i._pAddPass(i),i.invalidate(),i}return o(e,t),e.prototype.invalidate=function(){t.prototype.invalidate.call(this);var e=this._material.getTextureAt(0);this._shaderTexture=e?e.getAbstraction(this._shader):null},e.prototype._includeDependencies=function(e){t.prototype._includeDependencies.call(this,e),e.projectionDependencies++,e.alphaThreshold>0&&e.uvDependencies++},e.prototype._initConstantData=function(){var t=this._fragmentConstantsIndex,e=this._shader.fragmentConstantData;e[t]=1,e[t+1]=255,e[t+2]=65025,e[t+3]=16581375,e[t+4]=1/255,e[t+5]=1/255,e[t+6]=1/255,e[t+7]=0},e.prototype._getFragmentCode=function(t,e){var n="",i=e.shadedTarget,r=t.getFreeFragmentConstant(),o=t.getFreeFragmentConstant();this._fragmentConstantsIndex=4*r.index;var a=t.getFreeFragmentVectorTemp();t.addFragmentTempUsages(a,1);var s=t.getFreeFragmentVectorTemp();if(t.addFragmentTempUsages(s,1),n+="div "+a+", "+e.projectionFragment+", "+e.projectionFragment+".w\nmul "+a+", "+r+", "+a+".z\nfrc "+a+", "+a+"\nmul "+s+", "+a+".yzww, "+o+"\n",this._shaderTexture&&this._shader.alphaThreshold>0){var l=t.getFreeFragmentVectorTemp();n+=this._shaderTexture._getFragmentCode(l,t,e,e.uvVarying),n+="sub "+l+".w, "+l+".w, "+t.getFreeFragmentConstant()+".x\nkil "+l+".w\n"}return n+="sub "+i+", "+a+", "+s+"\n",t.removeFragmentTempUsage(a),t.removeFragmentTempUsage(s),n},e.prototype._activate=function(){t.prototype._activate.call(this),this._shaderTexture&&this._shader.alphaThreshold>0&&(this._shaderTexture.activate(),this._shader.fragmentConstantData[this._fragmentConstantsIndex+8]=this._shader.alphaThreshold)},e}(Or),Cc=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._shader=new Dr(n,i,i,i._stage),i._pAddPass(i),i.invalidate(),i}return o(e,t),e.prototype.invalidate=function(){t.prototype.invalidate.call(this);var e=this._material.getTextureAt(0);this._shaderTexture=e?e.getAbstraction(this._shader):null},e.prototype._initConstantData=function(){var t=this._fragmentConstantsIndex,e=this._shader.fragmentConstantData;e[t+4]=1/255,e[t+5]=1/255,e[t+6]=1/255,e[t+7]=0},e.prototype._includeDependencies=function(e){t.prototype._includeDependencies.call(this,e),e.projectionDependencies++,e.viewDirDependencies++,e.alphaThreshold>0&&e.uvDependencies++,e.viewDirDependencies>0&&e.globalPosDependencies++},e.prototype._getFragmentCode=function(t,e){var n,i=e.shadedTarget,r=t.getFreeFragmentConstant(),o=t.getFreeFragmentConstant();this._fragmentConstantsIndex=4*r.index;var a=t.getFreeFragmentVectorTemp();t.addFragmentTempUsages(a,1);var s=t.getFreeFragmentVectorTemp();if(t.addFragmentTempUsages(s,1),n="dp3 "+a+".z, "+e.viewDirVarying+".xyz, "+e.viewDirVarying+".xyz\nmul "+a+", "+r+", "+a+".z\nfrc "+a+", "+a+"\nmul "+s+", "+a+".yzww, "+o+"\n",this._shaderTexture&&this._shader.alphaThreshold>0){var l=t.getFreeFragmentVectorTemp();n+=this._shaderTexture._getFragmentCode(l,t,e,e.uvVarying),n+="sub "+l+".w, "+l+".w, "+t.getFreeFragmentConstant()+".x\nkil "+l+".w\n"}return n+="sub "+i+", "+a+", "+s+"\n"},e.prototype._activate=function(){t.prototype._activate.call(this);var e=this._shader.view.projection.far;e=1/(2*e*e);var n=this._fragmentConstantsIndex,i=this._shader.fragmentConstantData;i[n]=1*e,i[n+1]=255*e,i[n+2]=65025*e,i[n+3]=16581375*e,this._shaderTexture&&this._shader.alphaThreshold>0&&(this._shaderTexture.activate(),i[n+8]=this._shader.alphaThreshold)},e}(Or),Ic=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=1);var i=t.call(this,e,n)||this;return i._preserveAlpha=!1,e instanceof pe&&(i.texture=new fo),i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preserveAlpha",{get:function(){return this._preserveAlpha},set:function(t){this._preserveAlpha!=t&&(this._preserveAlpha=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!=t&&(this._texture&&this.removeTexture(this._texture),this._texture=t,this._texture&&this.addTexture(this._texture))},enumerable:!1,configurable:!0}),e.assetType="[materials BasicMaterial]",e}(bc),Ec=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._basicMaterial=e,i._pAddPass(i._pass=new dc(i,n)),i}return o(e,t),e.prototype.onClear=function(e){t.prototype.onClear.call(this,e),this._basicMaterial=null},e.prototype._pUpdateRender=function(){t.prototype._pUpdateRender.call(this),this.requiresBlending=this._basicMaterial.blendMode!=ze.NORMAL||this._basicMaterial.alphaBlending||this._basicMaterial.colorTransform&&this._basicMaterial.colorTransform.alphaMultiplier<1,this._pass.preserveAlpha=this._basicMaterial.preserveAlpha,this._pass.shader.setBlendMode(this._basicMaterial.blendMode==ze.NORMAL&&this.requiresBlending?ze.LAYER:this._basicMaterial.blendMode)},e}(Br);Ao.registerMaterial(Ec,Ic),yo.registerMaterial(Ec,Ic),go.registerMaterial(xc,Ic),mo.registerMaterial(Cc,Ic),Rr.setDefaultMaterialClass(Ic);var wc=function(){function t(){}return t.SINGLE_PASS="singlePass",t.MULTI_PASS="multiPass",t}(),Sc=function(t){function e(e,n){void 0===e&&(e=16777215),void 0===n&&(n=1);var i=t.call(this,e,n)||this;return i._effectMethods=new Array,i._enableLightFallOff=!0,i._specularLightSources=1,i._diffuseLightSources=3,i._ambientMethod=new Jl,i._diffuseMethod=new ru,i._normalMethod=new Ru,i._specularMethod=new Ju,i._depthCompareMode=Lt.LESS_EQUAL,i._mode=wc.SINGLE_PASS,i._ambientMethod.iAddOwner(i),i._diffuseMethod.iAddOwner(i),i._normalMethod.iAddOwner(i),i._specularMethod.iAddOwner(i),i._onLightChangeDelegate=function(t){return i.onLightsChange(t)},e instanceof pe&&(i._ambientMethod.texture=new fo),i}return o(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightPicker",{get:function(){return this._pLightPicker},set:function(t){this._pLightPicker!=t&&(this._pLightPicker&&this._pLightPicker.removeEventListener(h.INVALIDATE,this._onLightChangeDelegate),this._pLightPicker=t,this._pLightPicker&&this._pLightPicker.addEventListener(h.INVALIDATE,this._onLightChangeDelegate),this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableLightFallOff",{get:function(){return this._enableLightFallOff},set:function(t){this._enableLightFallOff!=t&&(this._enableLightFallOff=t,this.invalidatePasses())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diffuseLightSources",{get:function(){return this._diffuseLightSources},set:function(t){this._diffuseLightSources!=t&&(this._diffuseLightSources=t,this.invalidatePasses())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularLightSources",{get:function(){return this._specularLightSources},set:function(t){this._specularLightSources!=t&&(this._specularLightSources=t,this.invalidatePasses())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode!=t&&(this._mode=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthCompareMode",{get:function(){return this._depthCompareMode},set:function(t){this._depthCompareMode!=t&&(this._depthCompareMode=t,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ambientMethod",{get:function(){return this._ambientMethod},set:function(t){this._ambientMethod!=t&&(this._ambientMethod&&this._ambientMethod.iRemoveOwner(this),this._ambientMethod=t,this._ambientMethod&&this._ambientMethod.iAddOwner(this),this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowMethod",{get:function(){return this._shadowMethod},set:function(t){this._shadowMethod!=t&&(this._shadowMethod&&this._shadowMethod.iRemoveOwner(this),this._shadowMethod=t,this._shadowMethod&&this._shadowMethod.iAddOwner(this),this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diffuseMethod",{get:function(){return this._diffuseMethod},set:function(t){this._diffuseMethod!=t&&(this._diffuseMethod&&this._diffuseMethod.iRemoveOwner(this),this._diffuseMethod=t,this._diffuseMethod&&this._diffuseMethod.iAddOwner(this),this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularMethod",{get:function(){return this._specularMethod},set:function(t){this._specularMethod!=t&&(this._specularMethod&&this._specularMethod.iRemoveOwner(this),this._specularMethod=t,this._specularMethod&&this._specularMethod.iAddOwner(this),this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normalMethod",{get:function(){return this._normalMethod},set:function(t){this._normalMethod!=t&&(this._normalMethod&&this._normalMethod.iRemoveOwner(this),this._normalMethod=t,this._normalMethod&&this._normalMethod.iAddOwner(this),this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numEffectMethods",{get:function(){return this._effectMethods.length},enumerable:!1,configurable:!0}),e.prototype.addEffectMethod=function(t){t.iAddOwner(this),this._effectMethods.push(t),this.invalidate()},e.prototype.getEffectMethodAt=function(t){return this._effectMethods[t]},e.prototype.addEffectMethodAt=function(t,e){t.iAddOwner(this),this._effectMethods.splice(e,0,t),this.invalidate()},e.prototype.removeEffectMethod=function(t){t.iRemoveOwner(this),this._effectMethods.splice(this._effectMethods.indexOf(t),1),this.invalidate()},e.prototype.onLightsChange=function(t){this.invalidate()},e.assetType="[materials MethodMaterial]",e}(bc),Dc=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._methodMaterial=e,i._renderElements=n,i}return o(e,t),Object.defineProperty(e.prototype,"numLights",{get:function(){return this._methodMaterial.lightPicker?this._methodMaterial.lightPicker.numLightProbes+this._methodMaterial.lightPicker.numDirectionalLights+this._methodMaterial.lightPicker.numPointLights+this._methodMaterial.lightPicker.numCastingDirectionalLights+this._methodMaterial.lightPicker.numCastingPointLights:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numNonCasters",{get:function(){return this._methodMaterial.lightPicker?this._methodMaterial.lightPicker.numLightProbes+this._methodMaterial.lightPicker.numDirectionalLights+this._methodMaterial.lightPicker.numPointLights:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightPicker",{get:function(){return this._methodMaterial.lightPicker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableLightFallOff",{get:function(){return this._methodMaterial.enableLightFallOff},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diffuseLightSources",{get:function(){return this._methodMaterial.diffuseLightSources},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specularLightSources",{get:function(){return this._methodMaterial.specularLightSources},enumerable:!1,configurable:!0}),e.prototype._pUpdateRender=function(){if(t.prototype._pUpdateRender.call(this),this.initPasses(),this.setBlendAndCompareModes(),this._pClearPasses(),this._methodMaterial.mode==wc.MULTI_PASS&&(this._casterLightPass&&this._pAddPass(this._casterLightPass),this._nonCasterLightPasses))for(var e=0;e<this._nonCasterLightPasses.length;++e)this._pAddPass(this._nonCasterLightPasses[e]);this._pass&&this._pAddPass(this._pass)},e.prototype.initPasses=function(){0==this.numLights||this._methodMaterial.numEffectMethods>0||this._methodMaterial.mode==wc.SINGLE_PASS?this.initEffectPass():this._pass&&this.removeEffectPass(),this._methodMaterial.shadowMethod&&this._methodMaterial.mode==wc.MULTI_PASS?this.initCasterLightPass():this._casterLightPass&&this.removeCasterLightPass(),this.numNonCasters>0&&this._methodMaterial.mode==wc.MULTI_PASS?this.initNonCasterLightPasses():this._nonCasterLightPasses&&this.removeNonCasterLightPasses()},e.prototype.setBlendAndCompareModes=function(){var t=Boolean(this._casterLightPass||this._pass);if(this._casterLightPass&&(this._casterLightPass.forceSeparateMVP=t,this._casterLightPass.shader.setBlendMode(ze.NORMAL),this._casterLightPass.shader.depthCompareMode=this._methodMaterial.depthCompareMode),this._nonCasterLightPasses){var e=0;this._casterLightPass||(this._nonCasterLightPasses[0].forceSeparateMVP=t,this._nonCasterLightPasses[0].shader.setBlendMode(ze.NORMAL),this._nonCasterLightPasses[0].shader.depthCompareMode=this._methodMaterial.depthCompareMode,e=1);for(var n=e;n<this._nonCasterLightPasses.length;++n)this._nonCasterLightPasses[n].forceSeparateMVP=t,this._nonCasterLightPasses[n].shader.setBlendMode(ze.ADD),this._nonCasterLightPasses[n].shader.depthCompareMode=Lt.LESS_EQUAL}this._casterLightPass||this._nonCasterLightPasses?(this.requiresBlending=!1,this._pass&&(this._pass.mode=hc.EFFECTS,this._pass.forceSeparateMVP=t,this._pass.shader.depthCompareMode=Lt.LESS_EQUAL,this._pass.shader.setBlendMode(ze.LAYER))):this._pass&&(this.requiresBlending=this._methodMaterial.blendMode!=ze.NORMAL||this._methodMaterial.alphaBlending||this._methodMaterial.colorTransform&&this._methodMaterial.colorTransform.alphaMultiplier<1,this._pass.mode=hc.SUPER_SHADER,this._pass.preserveAlpha=this.requiresBlending,this._pass.forceSeparateMVP=!1,this._pass.colorTransform=this._methodMaterial.colorTransform,this._pass.shader.setBlendMode(this._methodMaterial.blendMode==ze.NORMAL&&this.requiresBlending?ze.LAYER:this._methodMaterial.blendMode),this._pass.shader.depthCompareMode=this._methodMaterial.depthCompareMode)},e.prototype.initCasterLightPass=function(){null==this._casterLightPass&&(this._casterLightPass=new pc(hc.LIGHTING,this,this._renderElements)),this._casterLightPass.lightPicker=new _c([this._methodMaterial.shadowMethod.castingLight]),this._casterLightPass.shadowMethod=this._methodMaterial.shadowMethod,this._casterLightPass.diffuseMethod=this._methodMaterial.diffuseMethod,this._casterLightPass.ambientMethod=this._methodMaterial.ambientMethod,this._casterLightPass.normalMethod=this._methodMaterial.normalMethod,this._casterLightPass.specularMethod=this._methodMaterial.specularMethod},e.prototype.removeCasterLightPass=function(){this._casterLightPass.dispose(),this._pRemovePass(this._casterLightPass),this._casterLightPass=null},e.prototype.initNonCasterLightPasses=function(){var t;this.removeNonCasterLightPasses();var e=this._methodMaterial.lightPicker.numDirectionalLights,n=this._methodMaterial.lightPicker.numPointLights,i=this._methodMaterial.lightPicker.numLightProbes,r=0,o=0,a=0;for(this._casterLightPass||(e+=this._methodMaterial.lightPicker.numCastingDirectionalLights,n+=this._methodMaterial.lightPicker.numCastingPointLights),this._nonCasterLightPasses=new Array;r<e||o<n||a<i;)(t=new pc(hc.LIGHTING,this,this._renderElements)).includeCasters=null==this._methodMaterial.shadowMethod,t.directionalLightsOffset=r,t.pointLightsOffset=o,t.lightProbesOffset=a,t.lightPicker=this._methodMaterial.lightPicker,t.diffuseMethod=this._methodMaterial.diffuseMethod,t.ambientMethod=this._methodMaterial.ambientMethod,t.normalMethod=this._methodMaterial.normalMethod,t.specularMethod=this._methodMaterial.specularMethod,this._nonCasterLightPasses.push(t),r+=t.numDirectionalLights,o+=t.numPointLights,a+=t.numLightProbes},e.prototype.removeNonCasterLightPasses=function(){if(this._nonCasterLightPasses){for(var t=0;t<this._nonCasterLightPasses.length;++t)this._pRemovePass(this._nonCasterLightPasses[t]);this._nonCasterLightPasses=null}},e.prototype.removeEffectPass=function(){this._pass.ambientMethod!=this._methodMaterial.ambientMethod&&this._pass.ambientMethod.dispose(),this._pass.diffuseMethod!=this._methodMaterial.diffuseMethod&&this._pass.diffuseMethod.dispose(),this._pass.specularMethod!=this._methodMaterial.specularMethod&&this._pass.specularMethod.dispose(),this._pass.normalMethod!=this._methodMaterial.normalMethod&&this._pass.normalMethod.dispose(),this._pRemovePass(this._pass),this._pass=null},e.prototype.initEffectPass=function(){null==this._pass&&(this._pass=new pc(hc.SUPER_SHADER,this,this._renderElements)),this._methodMaterial.mode==wc.SINGLE_PASS?(this._pass.ambientMethod=this._methodMaterial.ambientMethod,this._pass.diffuseMethod=this._methodMaterial.diffuseMethod,this._pass.specularMethod=this._methodMaterial.specularMethod,this._pass.normalMethod=this._methodMaterial.normalMethod,this._pass.shadowMethod=this._methodMaterial.shadowMethod):this._methodMaterial.mode==wc.MULTI_PASS&&(0==this.numLights?this._pass.ambientMethod=this._methodMaterial.ambientMethod:this._pass.ambientMethod=null,this._pass.preserveAlpha=!1,this._pass.normalMethod=this._methodMaterial.normalMethod);for(var t,e=0,n=Math.max(this._methodMaterial.numEffectMethods,this._pass.numEffectMethods);e<n;)(t=this._methodMaterial.getEffectMethodAt(e))!=this._pass.getEffectMethodAt(e)&&(this._pass.removeEffectMethodAt(e),null!=t&&(e<this._pass.numEffectMethods?this._pass.addEffectMethodAt(t,e):this._pass.addEffectMethod(t))),e++},e.prototype.onClear=function(e){t.prototype.onClear.call(this,e)},e}(Br);Ao.registerMaterial(Dc,Sc),yo.registerMaterial(Dc,Sc),go.registerMaterial(xc,Sc),mo.registerMaterial(Cc,Sc),console.debug("AwayJS - Materials - 0.6.16");var Tc=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),this.fill_data=t,this.stroke_data=e,this.fill_data_path=n,this.fnt_channel=0,this.lastTesselatedScale=0,this.kerningCharCodes=[],this.kerningValues=[]}return t.prototype.dispose=function(){this.stroke_data&&(this.stroke_data=null),this.fill_data&&(this.fill_data=null),this.fill_data_path&&(this.fill_data_path=null)},t}(),Pc=function(){return function(t){this._stage=t}}(),Bc=function(){function t(){this.left=Number.MAX_VALUE,this.right=Number.MIN_VALUE,this.top=Number.MAX_VALUE,this.bottom=Number.MIN_VALUE}return t.prototype.grown=function(t,e){t<this.left&&(this.left=t),t>this.right&&(this.right=t),e<this.top&&(this.top=e),e>this.bottom&&(this.bottom=e)},t.prototype.toRect=function(){return new W(this.left,this.top,this.right-this.left,this.bottom-this.top)},t}(),Oc=function(t){function e(e,n){void 0===n&&(n=!1);var i=t.call(this,e)||this;return i.debug=!1,i.debug=n,i}return o(e,t),e.getCanvasContext=function(t,e,n){void 0===t&&(t=100),void 0===e&&(e=100),void 0===n&&(n=!1);var i="OffscreenCanvas"in self&&!n?new self.OffscreenCanvas(t,e):document.createElement("canvas");return i.width=t,i.height=e,i.getContext("2d",{desynchronized:!0,alpha:!0})},e.freeCanvasContext=function(t){t.canvas instanceof self.OffscreenCanvas||(t.canvas.width=0,t.canvas.height=0)},e.transformChar=function(t){var e=t.fill_data_path;if(0===e.commands[0].length&&1===e.commands.length)return null;for(var n=new Path2D,i=new Bc,r=0;r<e.commands.length;r++)for(var o=e.data[r],a=0,s=0,l=e.commands[r];s<l.length;s++){switch(l[s]){case Rs.MOVE_TO:var u=o[a++]/20,c=o[a++]/20;i.grown(u,c),n.moveTo(u,c);break;case Rs.LINE_TO:u=o[a++]/20,c=o[a++]/20;i.grown(u,c),n.lineTo(u,c);break;case Rs.CURVE_TO:var h=o[a++]/20,p=o[a++]/20,d=o[a++]/20,f=o[a++]/20;i.grown(h,p),i.grown(d,f),n.quadraticCurveTo(h,p,d,f)}}return{path:n,char:t,rect:i.toRect()}},e.sortPatches=function(t,e){return t.rect.height-e.rect.height},e.render=function(t,n,i,r,o){void 0===r&&(r=0),void 0===o&&(o=0);for(var a=[],s=2*o,l=1,u=0,c=t.get_font_chars();u<c.length;u++){var h=c[u];(m=e.transformChar(h))&&((s+m.rect.width)*(s+m.rect.height),a.push(m))}a.sort(e.sortPatches),r&&(t.initFontSize(r),l=i/t.get_font_em_size()),n.save(),n.clearRect(0,0,i,i),n.fillStyle="#fff";for(var p=o,d=o,f=0,_=0,g=a;_<g.length;_++){var m;(m=g[_]).path&&(p+m.rect.width+s>=i/l&&(p=o,d+=f+s,f=0),d+m.rect.height>i/l&&console.warn("[FNTGeneratorCanvas] Font image overflow, font will corrupted!"),f=Math.max(m.rect.height,f),n.setTransform(l,0,0,l,(p-m.rect.x)*l,(d-m.rect.y)*l),n.fill(m.path),m.char.fnt_rect=new W(m.rect.x/m.char.char_width,m.rect.y/t.get_font_em_size(),m.rect.width/m.char.char_width,m.rect.height/t.get_font_em_size()),m.char.fnt_uv=new W(p*l/i,d*l/i,m.rect.width*l/i,m.rect.height*l/i),m.char.fnt_channel=0,p+=m.rect.width+s)}n.restore()},e.prototype.generate=function(t,n,i,r){var o=e.getCanvasContext(n,n,this.debug),a=[];for(var s in t.font_styles){var l=t.font_styles[s];e.render(l,o,n,i,r);var u=o.getImageData(0,0,n,n),c=new Le(n,n,!0,0,!0,this._stage);c.setPixels(new W(0,0,n,n),u.data),a.push(c),l.addFNTChannel(c)}return this.debug?this.canvas=o.canvas:e.freeCanvasContext(o),a},e}(Pc),Mc=Object.create(null);function Lc(t,e){void 0===e&&(e="");var n=Mc[t._id+e];return Mc[t._id+e]=!0,!n}var Rc=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._fntSizeLimit=-1,n._font_chars=[],n._font_chars_dic=Object.create(null),n._current_size=0,n._size_multiply=0,n._ascent=0,n._descent=0,n._usesCurves=!1,n._glyphIdxToChar={},n._fnt_channels=[],n._font_em_size=32,e?(n._opentype_font=e,n._font_em_size=72,n._ascent=e.tables.hhea.ascender/(n._opentype_font.unitsPerEm/72),n._descent=e.tables.hhea.descender/(n._opentype_font.unitsPerEm/72)-2,n._current_size=0,n._size_multiply=0,n._opentype_font.charToGlyph(String.fromCharCode(32)),n):n}return o(e,t),e.prototype.addFNTChannel=function(t){this._fnt_channels.push(t)},e.prototype.getGlyphCount=function(){return this._font_chars.length},e.prototype.generateFNTData=function(t){if(!(this._fntSizeLimit>0)){var e=new Oc(t,!1).generate(this.font,this._font_em_size,this._current_size,4);e&&e.length>0&&(this._fntSizeLimit=4*this._current_size)}},e.prototype.generateFNTTextures=function(t,e,n){if(console.log("generateFNTTextures"),e&&(this._fntSizeLimit=.5*e,this.initFontSize(e)),this._opentype_font)for(var i=0;i<this._opentype_font.glyphs.length;i++){var r=this._opentype_font.charToGlyph(String.fromCharCode(this._opentype_font.glyphs.glyphs[i].unicode));if(r){var o=r.getPath(),a=new ks,s=0,l=o.commands.length,u=0,c=0,h=this._ascent;for(s=0;s<l;s++){var p=o.commands[s];"M"===p.type?(a.moveTo(p.x,p.y+h),u=p.x,c=p.y+h):"L"===p.type?a.lineTo(p.x,p.y+h):"Q"===p.type?a.curveTo(p.x1,p.y1+h,p.x,p.y+h):"C"===p.type?a.cubicCurveTo(p.x1,p.y1+h,p.x2,p.y2+h,p.x,p.y+h):"Z"===p.type&&a.lineTo(u,c)}var d=new Tc(null,null,a);d.char_width=r.advanceWidth*(1/r.path.unitsPerEm*72),d.fill_data=Ls.pathToAttributesBuffer(a,!0),d.fill_data?(this._font_chars.push(d),this._font_chars_dic[this._opentype_font.glyphs.glyphs[i].unicode]=d):console.log("error tesselating opentype glyph",this._opentype_font.glyphs.glyphs[i])}else console.log("no char found for",this._opentype_font.glyphs.glyphs[i])}var f,_,g,m,y=0,A=0,v=[[]],b=0,x=[],C=Number.MIN_VALUE,I=Number.MIN_VALUE,E=Number.MAX_VALUE,w=Number.MAX_VALUE,S=0,D=0,T=0;for(s=0;s<this._font_chars.length;s++){for(f=this._font_chars[s].fill_data,_=new Float32Array(f.buffer),C=Number.MIN_VALUE,I=Number.MIN_VALUE,E=Number.MAX_VALUE,w=Number.MAX_VALUE,S=0,D=0,g=0;g<f.count;g++)(S=_[2*g])<w&&(w=S),S>I&&(I=S),(D=_[2*g+1])<E&&(E=D),D>C&&(C=D);this._font_chars[s].fnt_rect=new W(w/this._font_chars[s].char_width,E/this._font_em_size,(I-w)/this._font_chars[s].char_width,(C-E)/this._font_em_size),T+=(I-w+t+t)*(C-E+t+t),x[x.length]={idx:s,minx:w,miny:E,width:I-w,height:C-E}}x.sort((function(t,e){return t.height>e.height?-1:1}));var P=0;m=n;var B,O=1;if(e)this.initFontSize(e),O=this._size_multiply;else{O=m/Math.sqrt(T)*1.2;for(var L=!0,R=0;L;){L=!1,y=0,A=t;for(s=0;s<x.length;s++){if(R=x[s].height*O,S=0,D=0,(y+=t)+x[s].width*O+t>=m&&(y=t,A+=P+2*t,P=0),R>P&&(P=R),A+R+2*t>=m){L=!0,O*=.995;break}y+=x[s].width*O+t}}}this._fntSizeLimit=O*this._font_em_size*.5,y=0,A=t;for(s=0;s<x.length;s++){for(f=(B=this._font_chars[x[s].idx]).fill_data,_=new Float32Array(f.buffer),w=x[s].minx,I=Number.MIN_VALUE,E=x[s].miny,C=Number.MIN_VALUE,S=0,D=0,(y+=t)+x[s].width*O+t>=m&&(y=t,A+=P+2*t,P=0),x[s].height*=O,x[s].height>P&&(P=x[s].height),A+P+2*t>=m&&(y=t,A=t,P=0,v[++b]=[]),B.fnt_channel=b,g=0;g<f.count;g++)S=(_[2*g]-w)*O+y,D=(_[2*g+1]-E)*O+A,v[b][v[b].length]=S,v[b][v[b].length]=D,S>I&&(I=S),D>C&&(C=D);B.fnt_uv=new W(y/m,1-A/m,(I-y)/m,(C-A)/m),y+=x[s].width*O+t}var N=[];for(s=0;s<v.length;s++){var F=new ji(Float32Array,2);F.set(v[s]);var k=F.attributesBuffer.cloneBufferView();F.dispose();var U=new io(k);U.setPositions(new zi(k));var V=is.getShape(U),j=new Qe;V.style=new Gr;var G=us.getMaterialForColor(16777215,1);V.material=G.material,G.colorPos&&(V.style.addSamplerAt(j,V.material.getTextureAt(0)),V.material.animateUVs=!0,V.style.uvMatrix=new M(0,0,0,0,G.colorPos.x,G.colorPos.y)),N[s]=V}return N},e.prototype.getRatio=function(t){return this._size_multiply},e.prototype.hasChar=function(t){var e=!!this._font_chars_dic[t];return!e&&this._opentype_font&&(e=!!this._opentype_font.charToGlyph(String.fromCharCode(parseInt(t)))),e},e.prototype.changeOpenTypeFont=function(t,e){void 0===e&&(e=!0),e&&this._opentype_font,this._opentype_font=t,this._ascent=t.ascender,this._descent=t.descender,this._font_em_size=t.unitsPerEm;var n=this.getChar("32");n&&(this._whitespace_width=n.char_width)},e.prototype.initFontSize=function(t){this._current_size!==t&&(this._current_size=t,this._size_multiply=t/this._font_em_size,this._size_multiply)},e.prototype.getCharVertCnt=function(t){var e=this._font_chars_dic[t];return e?e.fill_data.length:0},e.prototype.getCharWidth=function(t){var n=this._whitespace_width*this._size_multiply||e.DEFAULT_SPACE;if("32"==t)return(20*n|0)/20;if("9"==t)return 2*n*20/20;var i=this.getChar(t,!1);return i?(i.char_width*this._size_multiply*20|0)/20:"9679"==t?((i=this.createPointGlyph_9679()).char_width*this._size_multiply*20|0)/20:0},Object.defineProperty(e.prototype,"usesCurves",{get:function(){return this._usesCurves},enumerable:!1,configurable:!0}),e.prototype.getLineHeight=function(){return this._size_multiply*(this._ascent-this.descent)},e.prototype.getUnderLineHeight=function(){return this._size_multiply*(this._ascent-this.descent/2)},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){for(var t=0;t<this._font_chars.length;t++)this._font_chars[t].dispose();this._font_chars.length=0,this._font_chars_dic=null},Object.defineProperty(e.prototype,"fntSizeLimit",{get:function(){return this._fntSizeLimit},set:function(t){this._fntSizeLimit=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ascent",{get:function(){return this._ascent},set:function(t){this._ascent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"descent",{get:function(){return this._descent},set:function(t){this._descent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset_x",{get:function(){return this._offset_x},set:function(t){this._offset_x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset_y",{get:function(){return this._offset_y},set:function(t){this._offset_y=t},enumerable:!1,configurable:!0}),e.prototype.get_font_chars=function(){return this._font_chars},e.prototype.get_font_em_size=function(){return this._font_em_size},e.prototype.set_whitespace_width=function(t){this._whitespace_width=t},e.prototype.get_whitespace_width=function(){return this._whitespace_width},e.prototype.set_font_em_size=function(t){this._font_em_size=t},e.prototype.buildTextLineFromIndices=function(t,e,n,i,r,o){var a=t.getTextShapeForIdentifierAndFormat(e.color.toString(),e),s=n,l=r.length,u=[],c=0;i-=this._ascent*this._size_multiply;for(var h=0;h<l;h++){var p=r[h],d=this._glyphIdxToChar[p];if(d){null===d.fill_data&&(1==d.fill_data_path.commands[0][0]&&0==d.fill_data_path.data[0][0]&&0==d.fill_data_path.data[0][1]&&(d.fill_data_path.data[0].shift(),d.fill_data_path.data[0].shift(),d.fill_data_path.commands[0].shift(),d.fill_data_path.commands[0][0]=2),d.fill_data=Ls.pathToAttributesBuffer(d.fill_data_path,!0));var f=d.fill_data;f&&(u.push({char:d,x:n,y:i,selected:!1}),c+=f.buffer.byteLength/4),n+=o[h]}else n+=o[h]}var _=new Float32Array(c);return this._fillBuffer(_,u,!1),a.addChunk(_),new O(n-s,this.getLineHeight())},e.prototype.fillTextRun=function(t,e,n,i){if(this._fntSizeLimit>=0&&this._fntSizeLimit>=e.size)return this.fillTextRunFNT(t,e,n,i);var r,o,a=this._queryShape(t,e),s=n+i,l=this._size_multiply,u=t.selectionBeginIndex,c=t.selectionEndIndex,h=0;t.selectable&&((o=e.clone()).color=16777215,r=this._queryShape(t,o),o.underline&&n+1<t.words.length&&(h=t.words.get(n).x),t.selectionEndIndex<t.selectionBeginIndex&&(u=t.selectionEndIndex,c=t.selectionBeginIndex));for(var p=0,d=0,f=[],_=[],g=[],m=n;m<s;m+=1){for(var y=t.words.get(m),A=y.x,v=y.y,b=y.start,x=b+y.len,C=b;C<x;C++){var I=t.isInFocus&&C>=u&&C<c?r:a,E=t.chars_codes[C];if(32!==E&&9!==E){var w=this.getChar(E,!0);w?(I===r?(_.push({char:w,x:A,y:v,selected:!0}),p+=w.fill_data.buffer.byteLength/4):(f.push({char:w,x:A,y:v,selected:!1}),d+=w.fill_data.buffer.byteLength/4),A+=w.char_width*l):Lc(this,"miss"+t.chars_codes[C])&&console.debug("[TesselatedFontTable] Error: char not found in fontTable",t.chars_codes[C],String.fromCharCode(t.chars_codes[C]))}}var S=.25*t.internalScale.y,D=v+this.getUnderLineHeight()+S,T=v+this.getUnderLineHeight()-S;if(t.selectable&&o.underline&&n+1<t.words.length){var P=new Float32Array(12);P[0]=h,P[1]=T,P[2]=h,P[3]=D,P[4]=A,P[5]=D,P[6]=A,P[7]=D,P[8]=A,P[9]=T,P[10]=h,P[11]=T,g.push(P)}}if(d>0){d+=12*g.length;for(var B=new Float32Array(d),O=this._fillBuffer(B,f,!1),M=0,L=g;M<L.length;M++){var R=L[M];B.set(R,O),O+=R.length}a.addChunk(B)}if(p>0){B=new Float32Array(p);this._fillBuffer(B,_,!0),r.addChunk(B)}},e.prototype._cacheKey=function(t,e){void 0===t&&(t=16777215),void 0===e&&(e=-1);var n=e>=0;return"".concat(t).concat(n).concat(n?e:0)},e.prototype._queryShape=function(t,e,n){void 0===n&&(n=-1);var i=t.getTextShapeForIdentifierAndFormat(this._cacheKey(e.color,n),e);if(n>=0&&!i.fntMaterial){var r=D.float32ColorToARGB(e.color),o=new Sc(this._fnt_channels[n]);o.colorTransform=new T(r[1]/255,r[2]/255,r[3]/255),o.bothSides=!0,o.alphaBlending=!0,o.useColorTransform=!0,o.style.sampler=new Qe(!1,!0,!0),i.fntMaterial=o}return i},e.prototype.fillTextRunFNT=function(t,e,n,i){var r,o=this._queryShape(t,e,0),a={},s={},l=n+i,u=this._size_multiply,c=t.selectionBeginIndex,h=t.selectionEndIndex;if(t.selectable){var p=e.clone();p.color=16777215,s[(r=this._queryShape(t,p,0)).cacheId]=r,p.underline&&n+1<t.words.length&&t.words.get(n).x,t.selectionEndIndex<t.selectionBeginIndex&&(c=t.selectionEndIndex,h=t.selectionBeginIndex)}a[o.cacheId]=o;for(var d=new Map,f=n;f<l;f+=1)for(var _=t.words.get(f),g=_.x,m=_.y,y=_.start,A=y+_.len,v=null,b=null,x=0,C=-1,I=y;I<A;I++)if(32!==t.chars_codes[I]&&9!==t.chars_codes[I]){var E=this.getChar(t.chars_codes[I],!1);if(E){var w=o,S=a;t.isInFocus&&I>=c&&I<h&&(w=r,S=s);var D=w.format,T=v?v.cacheId:"";T&&x===D.color&&E.fnt_channel===C||(T=this._cacheKey(D.color,E.fnt_channel),x=D.color,C=E.fnt_channel);var P=v&&v.cacheId!==T?S[T]:v;P||(S[(P=this._queryShape(t,D,E.fnt_channel)).cacheId]=P),v===P&&b||(b=d.get(P)||{uv:[],pos:[]},d.set(P,b),v=P),this._emitCharFNT(b,E,g,m),g+=E.char_width*u}else Lc(this,"miss"+t.chars_codes[I])&&console.debug("[TesselatedFontTable] Error: char not found in fontTable",t.chars_codes[I],String.fromCharCode(t.chars_codes[I]))}for(var B=0,O=Array.from(d.keys());B<O.length;B++){var M=O[B],L=d.get(M);M.addChunk(new Float32Array(L.pos),new Float32Array(L.uv))}},e.prototype._emitCharFNT=function(t,e,n,i){var r=this._size_multiply,o=this._font_em_size*r,a=e.fnt_rect,s=e.fnt_uv,l=e.char_width*r;if(a){var u=n+l*a.x*20,c=u+l*a.width*20,h=i+o*a.y*20,p=h+o*a.height*20;t.pos.push(u,h,u,p,c,h,c,h,u,p,c,p),t.uv.push(s.x,s.y,s.x,s.bottom,s.right,s.y,s.right,s.y,s.x,s.bottom,s.right,s.bottom)}},e.prototype.createPointGlyph_9679=function(){var t=[];cs.drawElipse(this._font_em_size/2,this._font_em_size/2,this._font_em_size/8,this._font_em_size/8,t,0,360,5,!1);var e=new ji(Float32Array,2);e.set(t);var n=e.attributesBuffer.cloneBufferView();e.dispose();var i=new Tc(n,null,null);return i.char_width=this._font_em_size,this._font_chars.push(i),this._font_chars_dic[9679]=i,i},e.prototype.getCharOpenType=function(t){if(!this._opentype_font)return null;var e=this._opentype_font.charToGlyph(String.fromCharCode(parseInt(t)));if(!e)return null;var n=e.getPath(),i=new ks,r=0,o=n.commands.length,a=0,s=0,l=this._ascent,u=this._opentype_font.unitsPerEm/72;for(r=0;r<o;r++){var c=n.commands[r];if("M"===c.type)i.moveTo(u*c.x,u*c.y+l),a=u*c.x,s=u*c.y+l;else if("L"===c.type)i.lineTo(u*c.x,u*c.y+l);else if("Q"===c.type)i.curveTo(u*c.x1,u*c.y1+l,u*c.x,u*c.y+l);else if("C"===c.type){var h=c.x1+(c.x2-c.x1)/2,p=c.y1+(c.y2-c.y1)/2;i.curveTo(u*c.x1,u*c.y1+l,u*h,u*p+l),i.curveTo(u*c.x2,u*c.y2+l,u*c.x,u*c.y+l)}else"Z"===c.type&&i.lineTo(a,s)}var d=new Tc(null,null,i);if(d.char_width=e.advanceWidth,d.fill_data=Ls.pathToAttributesBuffer(i,!0,null,u*Ks.FONT_TESSELATION_QUALITY),d.lastTesselatedScale=u,!d.fill_data)return Lc(this,"tess"+t)&&console.debug("[TesselatedFontTable] Error:tesselating opentype glyph:",t.charCodeAt(0)),null;this._font_chars.push(d),this._font_chars_dic[t]=d},e.prototype.getChar=function(t,e){void 0===e&&(e=!0),t=""+t;var n=this._font_chars_dic[t];if(!e&&n)return n;if(!n)return this._opentype_font?this.getCharOpenType(t):"9679"==t?this.createPointGlyph_9679():null;var i=this._size_multiply,r=Math.max(.01,Math.round(100*i)/100);if(null===n.fill_data_path)return null;if((null!=n.fill_data||null!=n.stroke_data)&&n.lastTesselatedScale>=r)return n;var o=n.fill_data_path;return 1==o.commands[0][0]&&0==o.data[0][0]&&0==o.data[0][1]&&(o.data[0].shift(),o.data[0].shift(),o.commands[0].shift(),o.commands[0][0]=2),n.fill_data&&n.fill_data.clear(),n.fill_data=Ls.pathToAttributesBuffer(n.fill_data_path,!0,null,r*Ks.FONT_TESSELATION_QUALITY),n.lastTesselatedScale>0&&console.debug("[TesselatedFontTable] Retesselate char from scale:",n.lastTesselatedScale,r,String.fromCharCode(+t)),n.lastTesselatedScale=r,n.fill_data?n:(Lc(this,"tess"+t)&&console.debug("[TesselatedFontTable] Error:tesselating glyph:",t.charCodeAt(0)),null)},e.prototype.setChar=function(t,e,n,i,r,o,a){if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=!1),void 0===o&&(o=0),void 0===a&&(a=null),e=Math.floor(20*e)/20,null==n&&null==i&&null==a)throw"TesselatedFontTable: trying to create a TesselatedFontChar with no data \n\t\t\t\t(fills_data, stroke_data and fill_data_path is null)";if(this._font_chars.length>0){if(r!=this._usesCurves)throw"TesselatedFontTable: Can not set different types of graphic-glyphs\n\t\t\t\t\t(curves vs non-cuves) on the same FontTable!"}else this._usesCurves=r;var s=new Tc(n,i,a);s.char_width=e,s.glyph_idx=o,s.name=t,this._glyphIdxToChar[o]=s,this._font_chars.push(s),this._font_chars_dic[t]=s},e.prototype.roundTo=function(t){var e=Ks.TEXT_SHAPE_ROUND_PRECISION,n=1/(e||1);return Math.floor(t*n)*e},e.prototype._fillBuffer=function(t,e,n){void 0===n&&(n=!1);for(var i=this._size_multiply,r=0,o=0,a=e;o<a.length;o++){var s=a[o];if(s.selected===n){for(var l=s.x,u=s.y,c=s.char,h=new Float32Array(c.fill_data.buffer),p=h.length,d=0;d<p;d+=2)t[r+d+0]=this.roundTo(h[d+0]*i+l),t[r+d+1]=this.roundTo(h[d+1]*i+u);r+=h.length}}return r},e.assetType="[asset TesselatedFontTable]",e.DEFAULT_SPACE=14,e}(_),Nc=function(){return function(t,e,n,i,r,o,a,s,l,u){this.id=t,this.x=e,this.y=n,this.width=i,this.height=r,this.x_offset=o,this.y_offset=a,this.x_advance=s,this.page=l,this.channel=u}}(),Fc=function(t){function e(){var e=t.call(this)||this;return e._font_chars=[],e._materials=[],e._font_chars_dic=new Object,e._ascent=0,e._descent=0,e._current_size=0,e._size_multiply=0,e._init_size=0,e._texture_width=0,e._texture_height=0,e._adjust_size=0,e}return o(e,t),e.prototype.getGlyphCount=function(){return this._font_chars.length},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.initFontSize=function(t){this._adjust_size&&(t*=this._adjust_size),this._current_size!=t&&(this._current_size=t,this._size_multiply=t/this._init_size)},e.prototype.getCharDataCanvas=function(t){var e=this._font_chars_dic[t];return e?[e.x,e.y,e.width,e.height,e.x_offset*this._size_multiply,e.y_offset*this._size_multiply]:[]},e.prototype.getCharData=function(t){var e=this._font_chars_dic[t];if(e){var n=e.height/this._init_size*this._current_size,i=e.width/this._init_size*this._current_size;return[e.x/this._texture_width,e.y/this._texture_height,e.width/this._texture_width,e.height/this._texture_height,e.x_offset*this._size_multiply,e.y_offset*this._size_multiply,n,i]}return[]},e.prototype.getCharVertCnt=function(t){return 24},Object.defineProperty(e.prototype,"texture_width",{get:function(){return this._texture_width},set:function(t){this._texture_width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture_height",{get:function(){return this._texture_height},set:function(t){this._texture_height=t},enumerable:!1,configurable:!0}),e.prototype.hasChar=function(t){return null!=this._font_chars_dic[t]},e.prototype.getCharWidth=function(t){var e=this._font_chars_dic[t];return e?this._size_multiply*e.x_advance:0},e.prototype.fillTextRun=function(t,e,n,i){},e.prototype.getLineHeight=function(){return this._current_size},e.prototype.dispose=function(){for(var t=this._materials.length,e=0;e<t;++e)this._materials[e].dispose();this._materials.length=0,this._font_chars.length=0,this._font_chars_dic=null},e.prototype.addMaterial=function(t){this._materials.push(t)},e.prototype.getMaterial=function(t){return void 0===t&&(t=0),this._materials[t]},Object.defineProperty(e.prototype,"ascent",{get:function(){return this._ascent},set:function(t){this._ascent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"descent",{get:function(){return this._descent},set:function(t){this._descent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset_x",{get:function(){return this._offset_x},set:function(t){this._offset_x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset_y",{get:function(){return this._offset_y},set:function(t){this._offset_y=t},enumerable:!1,configurable:!0}),e.prototype.get_font_chars=function(){return this._font_chars},e.prototype.get_font_em_size=function(){return this._font_em_size},e.prototype.set_whitespace_width=function(t){this._whitespace_width=t},e.prototype.get_whitespace_width=function(){return this._whitespace_width},e.prototype.set_font_em_size=function(t){this._font_em_size=t},e.prototype.getChar=function(t){return this._font_chars_dic[t]},e.prototype.setChar=function(t,e,n,i,r,o,a,s,l,u){var c=new Nc(t,e,n,i,r,o,a,s,l,u);this._font_chars.push(c),this._font_chars_dic[t]=c},e.assetType="[asset BitmapFontTable]",e}(_),kc=function(t){function e(){var e=t.call(this)||this;return e._font_styles={},e.fontName=null,e.regularFontStyle=null,e}return o(e,t),Object.defineProperty(e,"emptyFontTable",{get:function(){return this._emptyFontTable||(this._emptyFontTable=new Rc),this._emptyFontTable},enumerable:!1,configurable:!0}),e.registerFont=function(t){},Object.defineProperty(e.prototype,"font_styles",{get:function(){return this._font_styles},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){for(var t in this._font_styles)this._font_styles[t].dispose();this._font_styles=null},e.prototype.replace_font_table=function(t,e){this._font_styles[t]=e},e.prototype.create_font_table=function(t,e,n){void 0===e&&(e=Rc.assetType),void 0===n&&(n=null),this.get_font_table(t,e,n)&&console.warn("[Font] - create_font_table - ".concat(t," - already exists"));var i=null;return e==Rc.assetType?i=new Rc(n):e==Fc.assetType&&(i=new Fc),i.name=t,i.font=this,this._font_styles[t]=i,i},e.prototype.get_font_table=function(t,e,n,i){void 0===e&&(e=Rc.assetType),void 0===i&&(i=!1);var r=this._font_styles[t];if(r){if(r.assetType!=e)throw"[Font] - get_font_table - existing table has wrong assetType";return r}if(i&&Object.keys(this._font_styles).length>0)for(var o in this._font_styles)return console.log("font style not found return different",o),this._font_styles[o];return null},e.assetType="[asset Font]",e}(_),Uc=function(){function t(){}return t.getDeviceFont=function(t){if(t=this.getDeviceFontName(t),this._deviceFonts[t])return this._deviceFonts[t];var e=new kc;return e.name=t,this._deviceFonts[t]=e,this._deviceFonts[t]},t.getDeviceFontName=function(t){if(!t)return"sans";for(var e in this.deviceFontMap){if(this.deviceFontMap[e].indexOf(t)>=0)return e}return console.warn("[DeviceFontManager] - no mapping exists for ".concat(t,"\n\t\t - falling back to ").concat("sans")),"sans"},t.deviceFontMap={},t._deviceFonts={},t}();Uc.deviceFontMap.sans=["_sans","Arial"],Uc.deviceFontMap["Arial Narrow"]=["Arial Narrow"],Uc.deviceFontMap["Arial Black"]=["Arial Black"],Uc.deviceFontMap.serif=[],Uc.deviceFontMap.typewriter=[];var Vc,jc=function(){function t(){}return t.defineFont_CFF=function(t,e){void 0===e&&(e=_.DEFAULT_NAMESPACE),this._embbedCFF_fonts||(this._embbedCFF_fonts={}),this._embbedCFF_fonts[e]||(this._embbedCFF_fonts[e]={});var n=this._embbedCFF_fonts[e][t];return n||((n=new kc).name=t,this._embbedCFF_fonts[e][t]=n,n)},t.getFont_CFF=function(t,e){if(void 0===e&&(e=_.DEFAULT_NAMESPACE),!t)return Uc.getDeviceFont(t);var n=e||_.DEFAULT_NAMESPACE;this._embbedCFF_fonts||(this._embbedCFF_fonts={}),this._embbedCFF_fonts[n]||(this._embbedCFF_fonts[n]={});var i=this._embbedCFF_fonts[n][t];if(i)return i;for(var r in this._embbedCFF_fonts)if(this._embbedCFF_fonts[r][t])return this._embbedCFF_fonts[r][t];return Uc.getDeviceFont(t)},t.defineFont=function(t,e){if(void 0===e&&(e=_.DEFAULT_NAMESPACE),this._registered_fonts||(this._registered_fonts={}),this._registered_fonts[e]||(this._registered_fonts[e]={}),this.deviceFontsLoading)return Uc.getDeviceFont(t);var n=this._registered_fonts[e][t];return n||((n=new kc).name=t,-1===this._namespaces.indexOf(e)&&this._namespaces.push(e),this._registered_fonts[e][t]=n,n)},t.registerFontForClassName=function(t,e){this._registered_fonts_by_className[e]=t},t.getFont=function(t,e){if(void 0===e&&(e=void 0),!t)return null;if(this._registered_fonts_by_className[t])return this._registered_fonts_by_className[t];var n=e||_.DEFAULT_NAMESPACE;this._registered_fonts||(this._registered_fonts={}),this._registered_fonts[n]||(this._registered_fonts[n]={});var i=this._registered_fonts[n][t];if(i)return i;if(this._namespaces.length>0&&!e)for(var r=0,o=this._namespaces;r<o.length;r++){var a=o[r];if(this._registered_fonts[a][t])return this._registered_fonts[a][t]}return Uc.getDeviceFont(t)},t.clearAll=function(){this.deviceFontsLoading=!1,this._registered_fonts={}},t.deviceFontsLoading=!1,t._registered_fonts={},t._registered_fonts_by_className={},t._namespaces=[],t._embbedCFF_fonts={},t}();!function(t){t.DEFAULT="DEFAULT",t.DEVICE="device",t.EMBED_CFF="embeddedCFF"}(Vc||(Vc={}));var Gc,Qc=["font","align","leftMargin","rightMargin","indent","size","color","bold","italic","underline","leading","letterSpacing"],zc=function(t){function e(e,n,i,r,o,a,s,l,u,c,h,p,d){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=null),void 0===u&&(u=null),void 0===c&&(c=null),void 0===h&&(h=null),void 0===p&&(p=null),void 0===d&&(d=null);var f=t.call(this)||this;return f.fontLookUpMode=Vc.DEFAULT,f._updateID=0,f._fontTableDirty=!0,f.tabStops=[],f._size=n,f._color=i,f._bold=r,f._italic=o,f._underline=a,f.url=s,f.link_target=l,f._align=u,f._leftMargin=c,f._rightMargin=h,f._indent=p,f._leading=d,"string"==typeof e?f.font_name=e:f.font=e,f}return o(e,t),Object.defineProperty(e.prototype,"updateID",{get:function(){return this._updateID},enumerable:!1,configurable:!0}),e.prototype.hasPropertySet=function(t){return null!==this["_"+t]},Object.defineProperty(e.prototype,"align",{get:function(){return this._align?this._align:Tl.LEFT},set:function(t){this._align!==t&&this._updateID++,this._align=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blockIndent",{get:function(){return this._blockIndent?this._blockIndent:0},set:function(t){this._blockIndent!==t&&this._updateID++,this._blockIndent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftMargin",{get:function(){return this._leftMargin?this._leftMargin:0},set:function(t){t!==this._leftMargin&&this._updateID++,this._leftMargin=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightMargin",{get:function(){return this._rightMargin?this._rightMargin:0},set:function(t){t!==this._rightMargin&&this._updateID++,this._rightMargin=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indent",{get:function(){return this._indent?this._indent:0},set:function(t){t!==this._indent&&this._updateID++,this._indent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return null!==this._color?this._color:0},set:function(t){t!==this._color&&this._updateID++,this._color=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kerning",{get:function(){return!!this._kerning&&this._kerning},set:function(t){t!==this._kerning&&this._updateID++,this._kerning=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading?this._leading:0},set:function(t){t!==this._leading&&this._updateID++,this._leading=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing?this._letterSpacing:0},set:function(t){t!==this._letterSpacing&&this._updateID++,this._letterSpacing=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size?this._size:12},set:function(t){t!==this._size&&this._updateID++,this._size=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bold",{get:function(){return!!this._bold&&this._bold},set:function(t){t!==this._bold&&this._updateID++,this._bold=t,this._fontTableDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"italic",{get:function(){return!!this._italic&&this._italic},set:function(t){t!==this._italic&&this._updateID++,this._italic=t,this._fontTableDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"underline",{get:function(){return!!this._underline&&this._underline},set:function(t){t!==this._underline&&this._updateID++,this._underline=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font_table",{get:function(){return this._font_table&&!this._fontTableDirty||this.update_font_table(),this._font_table},set:function(t){this._font_table=t,this._fontTableDirty=!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font_name",{get:function(){var t;return null===(t=this.font)||void 0===t?void 0:t.name},set:function(t){var e;(null===(e=this.font)||void 0===e?void 0:e.name)!=t&&(this.fontLookUpMode==Vc.DEFAULT?this._font=jc.getFont(t):this.fontLookUpMode==Vc.DEVICE?this._font=Uc.getDeviceFont(t):this.fontLookUpMode==Vc.EMBED_CFF&&(this._font=jc.getFont_CFF(t)),this._fontTableDirty=!0,this._updateID++)},enumerable:!1,configurable:!0}),e.prototype.update_font_table=function(){this._fontTableDirty=!1;var t=wl.STANDART;if(this._italic&&!this._bold?t=wl.ITALIC:!this._italic&&this._bold?t=wl.BOLD:this._italic&&this._bold&&(t=wl.BOLDITALIC),this._font){var e=this._font.get_font_table(t,Rc.assetType,null,!0);if(this._font_table&&!e)return;this._font_table=e||kc.emptyFontTable}},Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(t){this._font!=t&&(this._font=t,this._fontTableDirty=!0,this._updateID++)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){var t=new e(this._font,this._size,this._color,this._bold,this._italic,this._underline,this.url,this.link_target,this._align,this._leftMargin,this._rightMargin,this._indent,this._leading);return t.font_table=this._font_table,t},e.prototype.equal=function(t){for(var e=0,n=Qc;e<n.length;e++){var i=n[e];if(this[i]!==t[i])return!1}return!0},e.prototype.applyToFormat=function(t){for(var e=!1,n=0,i=Qc;n<i.length;n++){var r=i[n];null!==this["_"+r]&&t[r]!==this["_"+r]&&(e=!0,t[r]=this["_"+r])}return e},e.prototype.mergeFormat=function(t){for(var e=0,n=Qc;e<n.length;e++){var i=n[e];this["_"+i]!==t[i]&&(this["_"+i]=null)}},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.assetType="[asset TextFormat]",e}(_),Hc=function(){return function(t,e,n,i,r,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),this.x=t,this.width=e,this.height=n,this.ascent=i,this.descent=r,this.leading=o}}(),Xc=function(t){function e(e,n,i){void 0===i&&(i=0);var r=t.call(this,e)||this;return r._char=n,r._charCode=i,r.isShift=!1,r.isCTRL=!1,r.isAlt=!1,r}return o(e,t),Object.defineProperty(e.prototype,"char",{get:function(){return this._char},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"charCode",{get:function(){return this._charCode},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._char,this._charCode)},e.KEYDOWN="keydown",e.KEYUP="keyup",e}(c),Yc=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.clone=function(){return new e(this.type)},e.CHANGED="onChanged",e}(c),qc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._iInternalUpdate=function(){t.prototype._iInternalUpdate.call(this);var e=this.parentTextField;!e._textFormats[0]||e._textFormats[0].font_table.isAsset(Rc)||e._textFormats[0].material||(this.transform.colorTransform.color=null!=e.textColor?e.textColor:e._textFormats[0].color,this._invalidateHierarchicalProperty(tr.COLOR_TRANSFORM))},e}(Zs),Kc=function(){function t(t,e){this.format=t,this.cacheId=e,this.verts=[],this.uvs=[],this._length=0,this.verts=[],this.uvs=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){if(!(t>this._length)){var e=this.verts,n=this.uvs;if(0===t)return this._length=0,e.length=0,void(n.length=0);for(var i=0,r=t;i<e.length&&r>0;)r-=e[i].length,i++;r<0&&(e[i-1]=e[i-1].subarray(0,r+e[i-1].length),n[i-1]&&(n[i-1]=n[i-1].subarray(0,r+n[i-1].length))),e.length=i,this._length=t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasUV",{get:function(){return this.uvs.length>0},enumerable:!1,configurable:!0}),t.prototype.addChunk=function(t,e){if(this.verts.length!==this.uvs.length&&e)throw"You can't mix TextShape with UV and without in same place";if(e&&t.length!==e.length)throw"Position buffer and UV buffer should  has equal size";this._length+=t.length,this.verts.push(t),e&&this.uvs.push(e)},Object.defineProperty(t.prototype,"tall",{get:function(){return this.verts[this.verts.length-1]},enumerable:!1,configurable:!0}),t}();class Wc{constructor(){this.childNodes=[]}get innerText(){return this.rawText}}!function(t){t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE"}(Gc||(Gc={}));var Jc=Gc;class Zc extends Wc{constructor(t){super(),this.rawText=t,this.nodeType=Jc.COMMENT_NODE}get text(){return this.rawText}toString(){return`\x3c!--${this.rawText}--\x3e`}}var $c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function th(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function eh(t){var e={exports:{}};return t(e,e.exports),e.exports}function nh(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}
/*! https://mths.be/he v1.2.0 by @mathias | MIT license */var ih=eh((function(t,e){!function(n){var i=e,r=t&&t.exports==i&&t,o="object"==typeof $c&&$c;o.global!==o&&o.window!==o||(n=o);var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[\x01-\x7F]/g,l=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,u=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,c={"­":"shy","‌":"zwnj","‍":"zwj","‎":"lrm","⁣":"ic","⁢":"it","⁡":"af","‏":"rlm","​":"ZeroWidthSpace","⁠":"NoBreak","̑":"DownBreve","⃛":"tdot","⃜":"DotDot","\t":"Tab","\n":"NewLine"," ":"puncsp"," ":"MediumSpace"," ":"thinsp"," ":"hairsp"," ":"emsp13"," ":"ensp"," ":"emsp14"," ":"emsp"," ":"numsp"," ":"nbsp","  ":"ThickSpace","‾":"oline",_:"lowbar","‐":"dash","–":"ndash","—":"mdash","―":"horbar",",":"comma",";":"semi","⁏":"bsemi",":":"colon","⩴":"Colone","!":"excl","¡":"iexcl","?":"quest","¿":"iquest",".":"period","‥":"nldr","…":"mldr","·":"middot","'":"apos","‘":"lsquo","’":"rsquo","‚":"sbquo","‹":"lsaquo","›":"rsaquo",'"':"quot","“":"ldquo","”":"rdquo","„":"bdquo","«":"laquo","»":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","⌈":"lceil","⌉":"rceil","⌊":"lfloor","⌋":"rfloor","⦅":"lopar","⦆":"ropar","⦋":"lbrke","⦌":"rbrke","⦍":"lbrkslu","⦎":"rbrksld","⦏":"lbrksld","⦐":"rbrkslu","⦑":"langd","⦒":"rangd","⦓":"lparlt","⦔":"rpargt","⦕":"gtlPar","⦖":"ltrPar","⟦":"lobrk","⟧":"robrk","⟨":"lang","⟩":"rang","⟪":"Lang","⟫":"Rang","⟬":"loang","⟭":"roang","❲":"lbbrk","❳":"rbbrk","‖":"Vert","§":"sect","¶":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","‰":"permil","‱":"pertenk","†":"dagger","‡":"Dagger","•":"bull","⁃":"hybull","′":"prime","″":"Prime","‴":"tprime","⁗":"qprime","‵":"bprime","⁁":"caret","`":"grave","´":"acute","˜":"tilde","^":"Hat","¯":"macr","˘":"breve","˙":"dot","¨":"die","˚":"ring","˝":"dblac","¸":"cedil","˛":"ogon","ˆ":"circ","ˇ":"caron","°":"deg","©":"copy","®":"reg","℗":"copysr","℘":"wp","℞":"rx","℧":"mho","℩":"iiota","←":"larr","↚":"nlarr","→":"rarr","↛":"nrarr","↑":"uarr","↓":"darr","↔":"harr","↮":"nharr","↕":"varr","↖":"nwarr","↗":"nearr","↘":"searr","↙":"swarr","↝":"rarrw","↝̸":"nrarrw","↞":"Larr","↟":"Uarr","↠":"Rarr","↡":"Darr","↢":"larrtl","↣":"rarrtl","↤":"mapstoleft","↥":"mapstoup","↦":"map","↧":"mapstodown","↩":"larrhk","↪":"rarrhk","↫":"larrlp","↬":"rarrlp","↭":"harrw","↰":"lsh","↱":"rsh","↲":"ldsh","↳":"rdsh","↵":"crarr","↶":"cularr","↷":"curarr","↺":"olarr","↻":"orarr","↼":"lharu","↽":"lhard","↾":"uharr","↿":"uharl","⇀":"rharu","⇁":"rhard","⇂":"dharr","⇃":"dharl","⇄":"rlarr","⇅":"udarr","⇆":"lrarr","⇇":"llarr","⇈":"uuarr","⇉":"rrarr","⇊":"ddarr","⇋":"lrhar","⇌":"rlhar","⇐":"lArr","⇍":"nlArr","⇑":"uArr","⇒":"rArr","⇏":"nrArr","⇓":"dArr","⇔":"iff","⇎":"nhArr","⇕":"vArr","⇖":"nwArr","⇗":"neArr","⇘":"seArr","⇙":"swArr","⇚":"lAarr","⇛":"rAarr","⇝":"zigrarr","⇤":"larrb","⇥":"rarrb","⇵":"duarr","⇽":"loarr","⇾":"roarr","⇿":"hoarr","∀":"forall","∁":"comp","∂":"part","∂̸":"npart","∃":"exist","∄":"nexist","∅":"empty","∇":"Del","∈":"in","∉":"notin","∋":"ni","∌":"notni","϶":"bepsi","∏":"prod","∐":"coprod","∑":"sum","+":"plus","±":"pm","÷":"div","×":"times","<":"lt","≮":"nlt","<⃒":"nvlt","=":"equals","≠":"ne","=⃥":"bne","⩵":"Equal",">":"gt","≯":"ngt",">⃒":"nvgt","¬":"not","|":"vert","¦":"brvbar","−":"minus","∓":"mp","∔":"plusdo","⁄":"frasl","∖":"setmn","∗":"lowast","∘":"compfn","√":"Sqrt","∝":"prop","∞":"infin","∟":"angrt","∠":"ang","∠⃒":"nang","∡":"angmsd","∢":"angsph","∣":"mid","∤":"nmid","∥":"par","∦":"npar","∧":"and","∨":"or","∩":"cap","∩︀":"caps","∪":"cup","∪︀":"cups","∫":"int","∬":"Int","∭":"tint","⨌":"qint","∮":"oint","∯":"Conint","∰":"Cconint","∱":"cwint","∲":"cwconint","∳":"awconint","∴":"there4","∵":"becaus","∶":"ratio","∷":"Colon","∸":"minusd","∺":"mDDot","∻":"homtht","∼":"sim","≁":"nsim","∼⃒":"nvsim","∽":"bsim","∽̱":"race","∾":"ac","∾̳":"acE","∿":"acd","≀":"wr","≂":"esim","≂̸":"nesim","≃":"sime","≄":"nsime","≅":"cong","≇":"ncong","≆":"simne","≈":"ap","≉":"nap","≊":"ape","≋":"apid","≋̸":"napid","≌":"bcong","≍":"CupCap","≭":"NotCupCap","≍⃒":"nvap","≎":"bump","≎̸":"nbump","≏":"bumpe","≏̸":"nbumpe","≐":"doteq","≐̸":"nedot","≑":"eDot","≒":"efDot","≓":"erDot","≔":"colone","≕":"ecolon","≖":"ecir","≗":"cire","≙":"wedgeq","≚":"veeeq","≜":"trie","≟":"equest","≡":"equiv","≢":"nequiv","≡⃥":"bnequiv","≤":"le","≰":"nle","≤⃒":"nvle","≥":"ge","≱":"nge","≥⃒":"nvge","≦":"lE","≦̸":"nlE","≧":"gE","≧̸":"ngE","≨︀":"lvnE","≨":"lnE","≩":"gnE","≩︀":"gvnE","≪":"ll","≪̸":"nLtv","≪⃒":"nLt","≫":"gg","≫̸":"nGtv","≫⃒":"nGt","≬":"twixt","≲":"lsim","≴":"nlsim","≳":"gsim","≵":"ngsim","≶":"lg","≸":"ntlg","≷":"gl","≹":"ntgl","≺":"pr","⊀":"npr","≻":"sc","⊁":"nsc","≼":"prcue","⋠":"nprcue","≽":"sccue","⋡":"nsccue","≾":"prsim","≿":"scsim","≿̸":"NotSucceedsTilde","⊂":"sub","⊄":"nsub","⊂⃒":"vnsub","⊃":"sup","⊅":"nsup","⊃⃒":"vnsup","⊆":"sube","⊈":"nsube","⊇":"supe","⊉":"nsupe","⊊︀":"vsubne","⊊":"subne","⊋︀":"vsupne","⊋":"supne","⊍":"cupdot","⊎":"uplus","⊏":"sqsub","⊏̸":"NotSquareSubset","⊐":"sqsup","⊐̸":"NotSquareSuperset","⊑":"sqsube","⋢":"nsqsube","⊒":"sqsupe","⋣":"nsqsupe","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊕":"oplus","⊖":"ominus","⊗":"otimes","⊘":"osol","⊙":"odot","⊚":"ocir","⊛":"oast","⊝":"odash","⊞":"plusb","⊟":"minusb","⊠":"timesb","⊡":"sdotb","⊢":"vdash","⊬":"nvdash","⊣":"dashv","⊤":"top","⊥":"bot","⊧":"models","⊨":"vDash","⊭":"nvDash","⊩":"Vdash","⊮":"nVdash","⊪":"Vvdash","⊫":"VDash","⊯":"nVDash","⊰":"prurel","⊲":"vltri","⋪":"nltri","⊳":"vrtri","⋫":"nrtri","⊴":"ltrie","⋬":"nltrie","⊴⃒":"nvltrie","⊵":"rtrie","⋭":"nrtrie","⊵⃒":"nvrtrie","⊶":"origof","⊷":"imof","⊸":"mumap","⊹":"hercon","⊺":"intcal","⊻":"veebar","⊽":"barvee","⊾":"angrtvb","⊿":"lrtri","⋀":"Wedge","⋁":"Vee","⋂":"xcap","⋃":"xcup","⋄":"diam","⋅":"sdot","⋆":"Star","⋇":"divonx","⋈":"bowtie","⋉":"ltimes","⋊":"rtimes","⋋":"lthree","⋌":"rthree","⋍":"bsime","⋎":"cuvee","⋏":"cuwed","⋐":"Sub","⋑":"Sup","⋒":"Cap","⋓":"Cup","⋔":"fork","⋕":"epar","⋖":"ltdot","⋗":"gtdot","⋘":"Ll","⋘̸":"nLl","⋙":"Gg","⋙̸":"nGg","⋚︀":"lesg","⋚":"leg","⋛":"gel","⋛︀":"gesl","⋞":"cuepr","⋟":"cuesc","⋦":"lnsim","⋧":"gnsim","⋨":"prnsim","⋩":"scnsim","⋮":"vellip","⋯":"ctdot","⋰":"utdot","⋱":"dtdot","⋲":"disin","⋳":"isinsv","⋴":"isins","⋵":"isindot","⋵̸":"notindot","⋶":"notinvc","⋷":"notinvb","⋹":"isinE","⋹̸":"notinE","⋺":"nisd","⋻":"xnis","⋼":"nis","⋽":"notnivc","⋾":"notnivb","⌅":"barwed","⌆":"Barwed","⌌":"drcrop","⌍":"dlcrop","⌎":"urcrop","⌏":"ulcrop","⌐":"bnot","⌒":"profline","⌓":"profsurf","⌕":"telrec","⌖":"target","⌜":"ulcorn","⌝":"urcorn","⌞":"dlcorn","⌟":"drcorn","⌢":"frown","⌣":"smile","⌭":"cylcty","⌮":"profalar","⌶":"topbot","⌽":"ovbar","⌿":"solbar","⍼":"angzarr","⎰":"lmoust","⎱":"rmoust","⎴":"tbrk","⎵":"bbrk","⎶":"bbrktbrk","⏜":"OverParenthesis","⏝":"UnderParenthesis","⏞":"OverBrace","⏟":"UnderBrace","⏢":"trpezium","⏧":"elinters","␣":"blank","─":"boxh","│":"boxv","┌":"boxdr","┐":"boxdl","└":"boxur","┘":"boxul","├":"boxvr","┤":"boxvl","┬":"boxhd","┴":"boxhu","┼":"boxvh","═":"boxH","║":"boxV","╒":"boxdR","╓":"boxDr","╔":"boxDR","╕":"boxdL","╖":"boxDl","╗":"boxDL","╘":"boxuR","╙":"boxUr","╚":"boxUR","╛":"boxuL","╜":"boxUl","╝":"boxUL","╞":"boxvR","╟":"boxVr","╠":"boxVR","╡":"boxvL","╢":"boxVl","╣":"boxVL","╤":"boxHd","╥":"boxhD","╦":"boxHD","╧":"boxHu","╨":"boxhU","╩":"boxHU","╪":"boxvH","╫":"boxVh","╬":"boxVH","▀":"uhblk","▄":"lhblk","█":"block","░":"blk14","▒":"blk12","▓":"blk34","□":"squ","▪":"squf","▫":"EmptyVerySmallSquare","▭":"rect","▮":"marker","▱":"fltns","△":"xutri","▴":"utrif","▵":"utri","▸":"rtrif","▹":"rtri","▽":"xdtri","▾":"dtrif","▿":"dtri","◂":"ltrif","◃":"ltri","◊":"loz","○":"cir","◬":"tridot","◯":"xcirc","◸":"ultri","◹":"urtri","◺":"lltri","◻":"EmptySmallSquare","◼":"FilledSmallSquare","★":"starf","☆":"star","☎":"phone","♀":"female","♂":"male","♠":"spades","♣":"clubs","♥":"hearts","♦":"diams","♪":"sung","✓":"check","✗":"cross","✠":"malt","✶":"sext","❘":"VerticalSeparator","⟈":"bsolhsub","⟉":"suphsol","⟵":"xlarr","⟶":"xrarr","⟷":"xharr","⟸":"xlArr","⟹":"xrArr","⟺":"xhArr","⟼":"xmap","⟿":"dzigrarr","⤂":"nvlArr","⤃":"nvrArr","⤄":"nvHarr","⤅":"Map","⤌":"lbarr","⤍":"rbarr","⤎":"lBarr","⤏":"rBarr","⤐":"RBarr","⤑":"DDotrahd","⤒":"UpArrowBar","⤓":"DownArrowBar","⤖":"Rarrtl","⤙":"latail","⤚":"ratail","⤛":"lAtail","⤜":"rAtail","⤝":"larrfs","⤞":"rarrfs","⤟":"larrbfs","⤠":"rarrbfs","⤣":"nwarhk","⤤":"nearhk","⤥":"searhk","⤦":"swarhk","⤧":"nwnear","⤨":"toea","⤩":"tosa","⤪":"swnwar","⤳":"rarrc","⤳̸":"nrarrc","⤵":"cudarrr","⤶":"ldca","⤷":"rdca","⤸":"cudarrl","⤹":"larrpl","⤼":"curarrm","⤽":"cularrp","⥅":"rarrpl","⥈":"harrcir","⥉":"Uarrocir","⥊":"lurdshar","⥋":"ldrushar","⥎":"LeftRightVector","⥏":"RightUpDownVector","⥐":"DownLeftRightVector","⥑":"LeftUpDownVector","⥒":"LeftVectorBar","⥓":"RightVectorBar","⥔":"RightUpVectorBar","⥕":"RightDownVectorBar","⥖":"DownLeftVectorBar","⥗":"DownRightVectorBar","⥘":"LeftUpVectorBar","⥙":"LeftDownVectorBar","⥚":"LeftTeeVector","⥛":"RightTeeVector","⥜":"RightUpTeeVector","⥝":"RightDownTeeVector","⥞":"DownLeftTeeVector","⥟":"DownRightTeeVector","⥠":"LeftUpTeeVector","⥡":"LeftDownTeeVector","⥢":"lHar","⥣":"uHar","⥤":"rHar","⥥":"dHar","⥦":"luruhar","⥧":"ldrdhar","⥨":"ruluhar","⥩":"rdldhar","⥪":"lharul","⥫":"llhard","⥬":"rharul","⥭":"lrhard","⥮":"udhar","⥯":"duhar","⥰":"RoundImplies","⥱":"erarr","⥲":"simrarr","⥳":"larrsim","⥴":"rarrsim","⥵":"rarrap","⥶":"ltlarr","⥸":"gtrarr","⥹":"subrarr","⥻":"suplarr","⥼":"lfisht","⥽":"rfisht","⥾":"ufisht","⥿":"dfisht","⦚":"vzigzag","⦜":"vangrt","⦝":"angrtvbd","⦤":"ange","⦥":"range","⦦":"dwangle","⦧":"uwangle","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","⦰":"bemptyv","⦱":"demptyv","⦲":"cemptyv","⦳":"raemptyv","⦴":"laemptyv","⦵":"ohbar","⦶":"omid","⦷":"opar","⦹":"operp","⦻":"olcross","⦼":"odsold","⦾":"olcir","⦿":"ofcir","⧀":"olt","⧁":"ogt","⧂":"cirscir","⧃":"cirE","⧄":"solb","⧅":"bsolb","⧉":"boxbox","⧍":"trisb","⧎":"rtriltri","⧏":"LeftTriangleBar","⧏̸":"NotLeftTriangleBar","⧐":"RightTriangleBar","⧐̸":"NotRightTriangleBar","⧜":"iinfin","⧝":"infintie","⧞":"nvinfin","⧣":"eparsl","⧤":"smeparsl","⧥":"eqvparsl","⧫":"lozf","⧴":"RuleDelayed","⧶":"dsol","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨄":"xuplus","⨆":"xsqcup","⨍":"fpartint","⨐":"cirfnint","⨑":"awint","⨒":"rppolint","⨓":"scpolint","⨔":"npolint","⨕":"pointint","⨖":"quatint","⨗":"intlarhk","⨢":"pluscir","⨣":"plusacir","⨤":"simplus","⨥":"plusdu","⨦":"plussim","⨧":"plustwo","⨩":"mcomma","⨪":"minusdu","⨭":"loplus","⨮":"roplus","⨯":"Cross","⨰":"timesd","⨱":"timesbar","⨳":"smashp","⨴":"lotimes","⨵":"rotimes","⨶":"otimesas","⨷":"Otimes","⨸":"odiv","⨹":"triplus","⨺":"triminus","⨻":"tritime","⨼":"iprod","⨿":"amalg","⩀":"capdot","⩂":"ncup","⩃":"ncap","⩄":"capand","⩅":"cupor","⩆":"cupcap","⩇":"capcup","⩈":"cupbrcap","⩉":"capbrcup","⩊":"cupcup","⩋":"capcap","⩌":"ccups","⩍":"ccaps","⩐":"ccupssm","⩓":"And","⩔":"Or","⩕":"andand","⩖":"oror","⩗":"orslope","⩘":"andslope","⩚":"andv","⩛":"orv","⩜":"andd","⩝":"ord","⩟":"wedbar","⩦":"sdote","⩪":"simdot","⩭":"congdot","⩭̸":"ncongdot","⩮":"easter","⩯":"apacir","⩰":"apE","⩰̸":"napE","⩱":"eplus","⩲":"pluse","⩳":"Esim","⩷":"eDDot","⩸":"equivDD","⩹":"ltcir","⩺":"gtcir","⩻":"ltquest","⩼":"gtquest","⩽":"les","⩽̸":"nles","⩾":"ges","⩾̸":"nges","⩿":"lesdot","⪀":"gesdot","⪁":"lesdoto","⪂":"gesdoto","⪃":"lesdotor","⪄":"gesdotol","⪅":"lap","⪆":"gap","⪇":"lne","⪈":"gne","⪉":"lnap","⪊":"gnap","⪋":"lEg","⪌":"gEl","⪍":"lsime","⪎":"gsime","⪏":"lsimg","⪐":"gsiml","⪑":"lgE","⪒":"glE","⪓":"lesges","⪔":"gesles","⪕":"els","⪖":"egs","⪗":"elsdot","⪘":"egsdot","⪙":"el","⪚":"eg","⪝":"siml","⪞":"simg","⪟":"simlE","⪠":"simgE","⪡":"LessLess","⪡̸":"NotNestedLessLess","⪢":"GreaterGreater","⪢̸":"NotNestedGreaterGreater","⪤":"glj","⪥":"gla","⪦":"ltcc","⪧":"gtcc","⪨":"lescc","⪩":"gescc","⪪":"smt","⪫":"lat","⪬":"smte","⪬︀":"smtes","⪭":"late","⪭︀":"lates","⪮":"bumpE","⪯":"pre","⪯̸":"npre","⪰":"sce","⪰̸":"nsce","⪳":"prE","⪴":"scE","⪵":"prnE","⪶":"scnE","⪷":"prap","⪸":"scap","⪹":"prnap","⪺":"scnap","⪻":"Pr","⪼":"Sc","⪽":"subdot","⪾":"supdot","⪿":"subplus","⫀":"supplus","⫁":"submult","⫂":"supmult","⫃":"subedot","⫄":"supedot","⫅":"subE","⫅̸":"nsubE","⫆":"supE","⫆̸":"nsupE","⫇":"subsim","⫈":"supsim","⫋︀":"vsubnE","⫋":"subnE","⫌︀":"vsupnE","⫌":"supnE","⫏":"csub","⫐":"csup","⫑":"csube","⫒":"csupe","⫓":"subsup","⫔":"supsub","⫕":"subsub","⫖":"supsup","⫗":"suphsub","⫘":"supdsub","⫙":"forkv","⫚":"topfork","⫛":"mlcp","⫤":"Dashv","⫦":"Vdashl","⫧":"Barv","⫨":"vBar","⫩":"vBarv","⫫":"Vbar","⫬":"Not","⫭":"bNot","⫮":"rnmid","⫯":"cirmid","⫰":"midcir","⫱":"topcir","⫲":"nhpar","⫳":"parsim","⫽":"parsl","⫽⃥":"nparsl","♭":"flat","♮":"natur","♯":"sharp","¤":"curren","¢":"cent",$:"dollar","£":"pound","¥":"yen","€":"euro","¹":"sup1","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","²":"sup2","⅔":"frac23","⅖":"frac25","³":"sup3","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78","𝒶":"ascr","𝕒":"aopf","𝔞":"afr","𝔸":"Aopf","𝔄":"Afr","𝒜":"Ascr","ª":"ordf","á":"aacute","Á":"Aacute","à":"agrave","À":"Agrave","ă":"abreve","Ă":"Abreve","â":"acirc","Â":"Acirc","å":"aring","Å":"angst","ä":"auml","Ä":"Auml","ã":"atilde","Ã":"Atilde","ą":"aogon","Ą":"Aogon","ā":"amacr","Ā":"Amacr","æ":"aelig","Æ":"AElig","𝒷":"bscr","𝕓":"bopf","𝔟":"bfr","𝔹":"Bopf","ℬ":"Bscr","𝔅":"Bfr","𝔠":"cfr","𝒸":"cscr","𝕔":"copf","ℭ":"Cfr","𝒞":"Cscr","ℂ":"Copf","ć":"cacute","Ć":"Cacute","ĉ":"ccirc","Ĉ":"Ccirc","č":"ccaron","Č":"Ccaron","ċ":"cdot","Ċ":"Cdot","ç":"ccedil","Ç":"Ccedil","℅":"incare","𝔡":"dfr","ⅆ":"dd","𝕕":"dopf","𝒹":"dscr","𝒟":"Dscr","𝔇":"Dfr","ⅅ":"DD","𝔻":"Dopf","ď":"dcaron","Ď":"Dcaron","đ":"dstrok","Đ":"Dstrok","ð":"eth","Ð":"ETH","ⅇ":"ee","ℯ":"escr","𝔢":"efr","𝕖":"eopf","ℰ":"Escr","𝔈":"Efr","𝔼":"Eopf","é":"eacute","É":"Eacute","è":"egrave","È":"Egrave","ê":"ecirc","Ê":"Ecirc","ě":"ecaron","Ě":"Ecaron","ë":"euml","Ë":"Euml","ė":"edot","Ė":"Edot","ę":"eogon","Ę":"Eogon","ē":"emacr","Ē":"Emacr","𝔣":"ffr","𝕗":"fopf","𝒻":"fscr","𝔉":"Ffr","𝔽":"Fopf","ℱ":"Fscr","ﬀ":"fflig","ﬃ":"ffilig","ﬄ":"ffllig","ﬁ":"filig",fj:"fjlig","ﬂ":"fllig","ƒ":"fnof","ℊ":"gscr","𝕘":"gopf","𝔤":"gfr","𝒢":"Gscr","𝔾":"Gopf","𝔊":"Gfr","ǵ":"gacute","ğ":"gbreve","Ğ":"Gbreve","ĝ":"gcirc","Ĝ":"Gcirc","ġ":"gdot","Ġ":"Gdot","Ģ":"Gcedil","𝔥":"hfr","ℎ":"planckh","𝒽":"hscr","𝕙":"hopf","ℋ":"Hscr","ℌ":"Hfr","ℍ":"Hopf","ĥ":"hcirc","Ĥ":"Hcirc","ℏ":"hbar","ħ":"hstrok","Ħ":"Hstrok","𝕚":"iopf","𝔦":"ifr","𝒾":"iscr","ⅈ":"ii","𝕀":"Iopf","ℐ":"Iscr","ℑ":"Im","í":"iacute","Í":"Iacute","ì":"igrave","Ì":"Igrave","î":"icirc","Î":"Icirc","ï":"iuml","Ï":"Iuml","ĩ":"itilde","Ĩ":"Itilde","İ":"Idot","į":"iogon","Į":"Iogon","ī":"imacr","Ī":"Imacr","ĳ":"ijlig","Ĳ":"IJlig","ı":"imath","𝒿":"jscr","𝕛":"jopf","𝔧":"jfr","𝒥":"Jscr","𝔍":"Jfr","𝕁":"Jopf","ĵ":"jcirc","Ĵ":"Jcirc","ȷ":"jmath","𝕜":"kopf","𝓀":"kscr","𝔨":"kfr","𝒦":"Kscr","𝕂":"Kopf","𝔎":"Kfr","ķ":"kcedil","Ķ":"Kcedil","𝔩":"lfr","𝓁":"lscr","ℓ":"ell","𝕝":"lopf","ℒ":"Lscr","𝔏":"Lfr","𝕃":"Lopf","ĺ":"lacute","Ĺ":"Lacute","ľ":"lcaron","Ľ":"Lcaron","ļ":"lcedil","Ļ":"Lcedil","ł":"lstrok","Ł":"Lstrok","ŀ":"lmidot","Ŀ":"Lmidot","𝔪":"mfr","𝕞":"mopf","𝓂":"mscr","𝔐":"Mfr","𝕄":"Mopf","ℳ":"Mscr","𝔫":"nfr","𝕟":"nopf","𝓃":"nscr","ℕ":"Nopf","𝒩":"Nscr","𝔑":"Nfr","ń":"nacute","Ń":"Nacute","ň":"ncaron","Ň":"Ncaron","ñ":"ntilde","Ñ":"Ntilde","ņ":"ncedil","Ņ":"Ncedil","№":"numero","ŋ":"eng","Ŋ":"ENG","𝕠":"oopf","𝔬":"ofr","ℴ":"oscr","𝒪":"Oscr","𝔒":"Ofr","𝕆":"Oopf","º":"ordm","ó":"oacute","Ó":"Oacute","ò":"ograve","Ò":"Ograve","ô":"ocirc","Ô":"Ocirc","ö":"ouml","Ö":"Ouml","ő":"odblac","Ő":"Odblac","õ":"otilde","Õ":"Otilde","ø":"oslash","Ø":"Oslash","ō":"omacr","Ō":"Omacr","œ":"oelig","Œ":"OElig","𝔭":"pfr","𝓅":"pscr","𝕡":"popf","ℙ":"Popf","𝔓":"Pfr","𝒫":"Pscr","𝕢":"qopf","𝔮":"qfr","𝓆":"qscr","𝒬":"Qscr","𝔔":"Qfr","ℚ":"Qopf","ĸ":"kgreen","𝔯":"rfr","𝕣":"ropf","𝓇":"rscr","ℛ":"Rscr","ℜ":"Re","ℝ":"Ropf","ŕ":"racute","Ŕ":"Racute","ř":"rcaron","Ř":"Rcaron","ŗ":"rcedil","Ŗ":"Rcedil","𝕤":"sopf","𝓈":"sscr","𝔰":"sfr","𝕊":"Sopf","𝔖":"Sfr","𝒮":"Sscr","Ⓢ":"oS","ś":"sacute","Ś":"Sacute","ŝ":"scirc","Ŝ":"Scirc","š":"scaron","Š":"Scaron","ş":"scedil","Ş":"Scedil","ß":"szlig","𝔱":"tfr","𝓉":"tscr","𝕥":"topf","𝒯":"Tscr","𝔗":"Tfr","𝕋":"Topf","ť":"tcaron","Ť":"Tcaron","ţ":"tcedil","Ţ":"Tcedil","™":"trade","ŧ":"tstrok","Ŧ":"Tstrok","𝓊":"uscr","𝕦":"uopf","𝔲":"ufr","𝕌":"Uopf","𝔘":"Ufr","𝒰":"Uscr","ú":"uacute","Ú":"Uacute","ù":"ugrave","Ù":"Ugrave","ŭ":"ubreve","Ŭ":"Ubreve","û":"ucirc","Û":"Ucirc","ů":"uring","Ů":"Uring","ü":"uuml","Ü":"Uuml","ű":"udblac","Ű":"Udblac","ũ":"utilde","Ũ":"Utilde","ų":"uogon","Ų":"Uogon","ū":"umacr","Ū":"Umacr","𝔳":"vfr","𝕧":"vopf","𝓋":"vscr","𝔙":"Vfr","𝕍":"Vopf","𝒱":"Vscr","𝕨":"wopf","𝓌":"wscr","𝔴":"wfr","𝒲":"Wscr","𝕎":"Wopf","𝔚":"Wfr","ŵ":"wcirc","Ŵ":"Wcirc","𝔵":"xfr","𝓍":"xscr","𝕩":"xopf","𝕏":"Xopf","𝔛":"Xfr","𝒳":"Xscr","𝔶":"yfr","𝓎":"yscr","𝕪":"yopf","𝒴":"Yscr","𝔜":"Yfr","𝕐":"Yopf","ý":"yacute","Ý":"Yacute","ŷ":"ycirc","Ŷ":"Ycirc","ÿ":"yuml","Ÿ":"Yuml","𝓏":"zscr","𝔷":"zfr","𝕫":"zopf","ℨ":"Zfr","ℤ":"Zopf","𝒵":"Zscr","ź":"zacute","Ź":"Zacute","ž":"zcaron","Ž":"Zcaron","ż":"zdot","Ż":"Zdot","Ƶ":"imped","þ":"thorn","Þ":"THORN","ŉ":"napos","α":"alpha","Α":"Alpha","β":"beta","Β":"Beta","γ":"gamma","Γ":"Gamma","δ":"delta","Δ":"Delta","ε":"epsi","ϵ":"epsiv","Ε":"Epsilon","ϝ":"gammad","Ϝ":"Gammad","ζ":"zeta","Ζ":"Zeta","η":"eta","Η":"Eta","θ":"theta","ϑ":"thetav","Θ":"Theta","ι":"iota","Ι":"Iota","κ":"kappa","ϰ":"kappav","Κ":"Kappa","λ":"lambda","Λ":"Lambda","μ":"mu","µ":"micro","Μ":"Mu","ν":"nu","Ν":"Nu","ξ":"xi","Ξ":"Xi","ο":"omicron","Ο":"Omicron","π":"pi","ϖ":"piv","Π":"Pi","ρ":"rho","ϱ":"rhov","Ρ":"Rho","σ":"sigma","Σ":"Sigma","ς":"sigmaf","τ":"tau","Τ":"Tau","υ":"upsi","Υ":"Upsilon","ϒ":"Upsi","φ":"phi","ϕ":"phiv","Φ":"Phi","χ":"chi","Χ":"Chi","ψ":"psi","Ψ":"Psi","ω":"omega","Ω":"ohm","а":"acy","А":"Acy","б":"bcy","Б":"Bcy","в":"vcy","В":"Vcy","г":"gcy","Г":"Gcy","ѓ":"gjcy","Ѓ":"GJcy","д":"dcy","Д":"Dcy","ђ":"djcy","Ђ":"DJcy","е":"iecy","Е":"IEcy","ё":"iocy","Ё":"IOcy","є":"jukcy","Є":"Jukcy","ж":"zhcy","Ж":"ZHcy","з":"zcy","З":"Zcy","ѕ":"dscy","Ѕ":"DScy","и":"icy","И":"Icy","і":"iukcy","І":"Iukcy","ї":"yicy","Ї":"YIcy","й":"jcy","Й":"Jcy","ј":"jsercy","Ј":"Jsercy","к":"kcy","К":"Kcy","ќ":"kjcy","Ќ":"KJcy","л":"lcy","Л":"Lcy","љ":"ljcy","Љ":"LJcy","м":"mcy","М":"Mcy","н":"ncy","Н":"Ncy","њ":"njcy","Њ":"NJcy","о":"ocy","О":"Ocy","п":"pcy","П":"Pcy","р":"rcy","Р":"Rcy","с":"scy","С":"Scy","т":"tcy","Т":"Tcy","ћ":"tshcy","Ћ":"TSHcy","у":"ucy","У":"Ucy","ў":"ubrcy","Ў":"Ubrcy","ф":"fcy","Ф":"Fcy","х":"khcy","Х":"KHcy","ц":"tscy","Ц":"TScy","ч":"chcy","Ч":"CHcy","џ":"dzcy","Џ":"DZcy","ш":"shcy","Ш":"SHcy","щ":"shchcy","Щ":"SHCHcy","ъ":"hardcy","Ъ":"HARDcy","ы":"ycy","Ы":"Ycy","ь":"softcy","Ь":"SOFTcy","э":"ecy","Э":"Ecy","ю":"yucy","Ю":"YUcy","я":"yacy","Я":"YAcy","ℵ":"aleph","ℶ":"beth","ℷ":"gimel","ℸ":"daleth"},h=/["&'<>`]/g,p={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},d=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,f=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,g={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},m={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},y={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},A=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],v=String.fromCharCode,b={}.hasOwnProperty,x=function(t,e){return b.call(t,e)},C=function(t,e){if(!t)return e;var n,i={};for(n in e)i[n]=x(t,n)?t[n]:e[n];return i},I=function(t,e){var n="";return t>=55296&&t<=57343||t>1114111?(e&&S("character reference outside the permissible Unicode range"),"�"):x(y,t)?(e&&S("disallowed character reference"),y[t]):(e&&function(t,e){for(var n=-1,i=t.length;++n<i;)if(t[n]==e)return!0;return!1}(A,t)&&S("disallowed character reference"),t>65535&&(n+=v((t-=65536)>>>10&1023|55296),t=56320|1023&t),n+=v(t))},E=function(t){return"&#x"+t.toString(16).toUpperCase()+";"},w=function(t){return"&#"+t+";"},S=function(t){throw Error("Parse error: "+t)},D=function(t,e){(e=C(e,D.options)).strict&&f.test(t)&&S("forbidden code point");var n=e.encodeEverything,i=e.useNamedReferences,r=e.allowUnsafeSymbols,o=e.decimal?w:E,p=function(t){return o(t.charCodeAt(0))};return n?(t=t.replace(s,(function(t){return i&&x(c,t)?"&"+c[t]+";":p(t)})),i&&(t=t.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),i&&(t=t.replace(u,(function(t){return"&"+c[t]+";"})))):i?(r||(t=t.replace(h,(function(t){return"&"+c[t]+";"}))),t=(t=t.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;")).replace(u,(function(t){return"&"+c[t]+";"}))):r||(t=t.replace(h,p)),t.replace(a,(function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return o(1024*(e-55296)+n-56320+65536)})).replace(l,p)};D.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var T=function(t,e){var n=(e=C(e,T.options)).strict;return n&&d.test(t)&&S("malformed character reference"),t.replace(_,(function(t,i,r,o,a,s,l,u,c){var h,p,d,f,_,y;return i?g[_=i]:r?(_=r,(y=o)&&e.isAttributeValue?(n&&"="==y&&S("`&` did not start a character reference"),t):(n&&S("named character reference was not terminated by a semicolon"),m[_]+(y||""))):a?(d=a,p=s,n&&!p&&S("character reference was not terminated by a semicolon"),h=parseInt(d,10),I(h,n)):l?(f=l,p=u,n&&!p&&S("character reference was not terminated by a semicolon"),h=parseInt(f,16),I(h,n)):(n&&S("named character reference was not terminated by a semicolon"),t)}))};T.options={isAttributeValue:!1,strict:!1};var P={version:"1.2.0",encode:D,decode:T,escape:function(t){return t.replace(h,(function(t){return p[t]}))},unescape:T};if(i&&!i.nodeType)if(r)r.exports=P;else for(var B in P)x(P,B)&&(i[B]=P[B]);else n.he=P}($c)}));class rh extends Wc{constructor(t){super(),this.rawText=t,this.nodeType=Jc.TEXT_NODE}get text(){return this.rawText}get isWhitespace(){return/^(\s|&nbsp;)*$/.test(this.rawText)}toString(){return this.text}}let oh={};function ah(t,e){return t?e?t.toLowerCase()===e.toLowerCase():!t:!e}const sh={f145(t,e,n){if(e=e||"",n=n||[],t.id!==e.substr(1))return!1;for(let e=n,i=0;i<e.length;i++)if(-1===t.classNames.indexOf(e[i]))return!1;return!0},f45(t,e,n){for(let e=n=n||[],i=0;i<e.length;i++)if(-1===t.classNames.indexOf(e[i]))return!1;return!0},f15:(t,e)=>(e=e||"",t.id===e.substr(1)),f1(t,e){if(e=e||"",t.id!==e.substr(1))return!1},f5:()=>!0,f55(t,e,n,i){i=i||"";return t.attributes.hasOwnProperty(i)},f245(t,e,n,i,r){i=(i||"").toLowerCase(),r=r||"";const o=t.attributes;return Object.keys(o).some((t=>{const e=o[t];return t.toLowerCase()===i&&e===r}))},f25(t,e,n,i,r){i=(i||"").toLowerCase(),r=r||"";const o=t.attributes;return Object.keys(o).some((t=>{const e=o[t];return t.toLowerCase()===i&&e===r}))},f2(t,e,n,i,r){i=(i||"").toLowerCase(),r=r||"";const o=t.attributes;return Object.keys(o).some((t=>{const e=o[t];return t.toLowerCase()===i&&e===r}))},f345(t,e,n){if(e=e||"",n=n||[],!ah(t.tagName,e))return!1;for(let e=n,i=0;i<e.length;i++)if(-1===t.classNames.indexOf(e[i]))return!1;return!0},f35:(t,e)=>(e=e||"",ah(t.tagName,e)),f3:(t,e)=>(e=e||"",ah(t.tagName,e))};class lh{constructor(t){this.nextMatch=0,this.matchers=t.split(" ").map((t=>{if(oh[t])return oh[t];const e=t.split("."),n=e[0],i=e.slice(1).sort();let r="f",o="",a="";if(n&&"*"!==n)if(n.startsWith("#"))r+="1";else{const t=/\[\s*([\w-]+)(\s*=\s*(('\s*(.*)'|"\s*(.*)")|(\S*)))?\s*\]/.exec(n);t?(o=t[1],a=t[5]||t[6]||t[7],r+="2"):r+="3"}i.length>0&&(r+="4"),r+="5";const s={func:sh[r],tagName:n||"",classes:i||"",attr_key:o||"",value:a||""};return oh[t]=s}))}advance(t){return!!(this.nextMatch<this.matchers.length&&this.matchers[this.nextMatch].func(t,this.matchers[this.nextMatch].tagName,this.matchers[this.nextMatch].classes,this.matchers[this.nextMatch].attr_key,this.matchers[this.nextMatch].value))&&(this.nextMatch++,!0)}rewind(){this.nextMatch--}get matched(){return this.nextMatch===this.matchers.length}reset(){this.nextMatch=0}flushCache(){oh={}}}function uh(t){return t[t.length-1]}const ch=new Map;ch.set("DIV",!0),ch.set("div",!0),ch.set("P",!0),ch.set("p",!0),ch.set("LI",!0),ch.set("li",!0),ch.set("TD",!0),ch.set("td",!0),ch.set("SECTION",!0),ch.set("section",!0),ch.set("BR",!0),ch.set("br",!0);class hh extends Wc{constructor(t,e,n="",i=null){if(super(),this.rawAttrs=n,this.parentNode=i,this.classNames=[],this.nodeType=Jc.ELEMENT_NODE,this.rawTagName=t,this.rawAttrs=n||"",this.parentNode=i||null,this.childNodes=[],e.id&&(this.id=e.id,n||(this.rawAttrs=`id="${e.id}"`)),e.class&&(this.classNames=e.class.split(/\s+/),!n)){const t=`class="${this.classNames.join(" ")}"`;this.rawAttrs?this.rawAttrs+=` ${t}`:this.rawAttrs=t}}remove(){if(this.parentNode){const t=this.parentNode.childNodes;this.parentNode.childNodes=t.filter((t=>this!==t))}}removeChild(t){this.childNodes=this.childNodes.filter((e=>e!==t))}exchangeChild(t,e){const n=this.childNodes;this.childNodes=n.map((n=>n===t?e:n))}get tagName(){return this.rawTagName?this.rawTagName.toUpperCase():this.rawTagName}get rawText(){return this.childNodes.reduce(((t,e)=>t+e.rawText),"")}get text(){return ih.decode(this.rawText)}get structuredText(){let t=[];const e=[t];return function n(i){if(i.nodeType===Jc.ELEMENT_NODE)ch.get(i.rawTagName)?(t.length>0&&e.push(t=[]),i.childNodes.forEach(n),t.length>0&&e.push(t=[])):i.childNodes.forEach(n);else if(i.nodeType===Jc.TEXT_NODE)if(i.isWhitespace)t.prependWhitespace=!0;else{let e=i.text;t.prependWhitespace&&(e=` ${e}`,t.prependWhitespace=!1),t.push(e)}}(this),e.map((t=>t.join("").trim().replace(/\s{2,}/g," "))).join("\n").replace(/\s+$/,"")}toString(){const t=this.rawTagName;if(t){const e=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/i.test(t),n=this.rawAttrs?` ${this.rawAttrs}`:"";return e?`<${t}${n}>`:`<${t}${n}>${this.innerHTML}</${t}>`}return this.innerHTML}get innerHTML(){return this.childNodes.map((t=>t.toString())).join("")}set_content(t,e={}){if(t instanceof Wc)t=[t];else if("string"==typeof t){const n=yh(t,e);t=n.childNodes.length?n.childNodes:[new rh(t)]}this.childNodes=t}get outerHTML(){return this.toString()}trimRight(t){for(let e=0;e<this.childNodes.length;e++){const n=this.childNodes[e];if(n.nodeType===Jc.ELEMENT_NODE)n.trimRight(t);else{const i=n.rawText.search(t);i>-1&&(n.rawText=n.rawText.substr(0,i),this.childNodes.length=e+1)}}return this}get structure(){const t=[];let e=0;function n(n){t.push("  ".repeat(e)+n)}return function t(i){const r=i.id?`#${i.id}`:"",o=i.classNames.length?`.${i.classNames.join(".")}`:"";n(i.rawTagName+r+o),e++,i.childNodes.forEach((e=>{e.nodeType===Jc.ELEMENT_NODE?t(e):e.nodeType===Jc.TEXT_NODE&&(e.isWhitespace||n("#text"))})),e--}(this),t.join("\n")}removeWhitespace(){let t=0;return this.childNodes.forEach((e=>{if(e.nodeType===Jc.TEXT_NODE){if(e.isWhitespace)return;e.rawText=e.rawText.trim()}else e.nodeType===Jc.ELEMENT_NODE&&e.removeWhitespace();this.childNodes[t++]=e})),this.childNodes.length=t,this}querySelectorAll(t){let e;if(t instanceof lh)e=t,e.reset();else{if(t.includes(",")){const e=t.split(",");return Array.from(e.reduce(((t,e)=>this.querySelectorAll(e.trim()).reduce(((t,e)=>t.add(e)),t)),new Set))}e=new lh(t)}const n=[];return this.childNodes.reduce(((i,r)=>{for(n.push([r,0,!1]);n.length;){const r=uh(n),o=r[0];if(0===r[1]){if(o.nodeType!==Jc.ELEMENT_NODE){n.pop();continue}const a=o;if(r[2]=e.advance(a),r[2]&&e.matched){i.push(a),i.push(...a.querySelectorAll(t)),e.rewind(),n.pop();continue}}r[1]<o.childNodes.length?n.push([o.childNodes[r[1]++],0,!1]):(r[2]&&e.rewind(),n.pop())}return i}),[])}querySelector(t){let e;t instanceof lh?(e=t,e.reset()):e=new lh(t);const n=[];for(const t of this.childNodes)for(n.push([t,0,!1]);n.length;){const t=uh(n),i=t[0];if(0===t[1]){if(i.nodeType!==Jc.ELEMENT_NODE){n.pop();continue}if(t[2]=e.advance(i),t[2]&&e.matched)return i}t[1]<i.childNodes.length?n.push([i.childNodes[t[1]++],0,!1]):(t[2]&&e.rewind(),n.pop())}return null}appendChild(t){return this.childNodes.push(t),t instanceof hh&&(t.parentNode=this),t}get firstChild(){return this.childNodes[0]}get lastChild(){return uh(this.childNodes)}get attributes(){if(this._attrs)return this._attrs;this._attrs={};const t=this.rawAttributes;for(const e in t){const n=t[e]||"";this._attrs[e]=ih.decode(n)}return this._attrs}get rawAttributes(){if(this._rawAttrs)return this._rawAttrs;const t={};if(this.rawAttrs){const e=/\b([a-z][a-z0-9-]*)(?:\s*=\s*(?:"([^"]*)"|'([^']*)'|(\S+)))?/gi;let n;for(;n=e.exec(this.rawAttrs);)t[n[1]]=n[2]||n[3]||n[4]||null}return this._rawAttrs=t,t}removeAttribute(t){const e=this.rawAttributes;delete e[t],this._attrs&&delete this._attrs[t],this.rawAttrs=Object.keys(e).map((t=>{const n=JSON.stringify(e[t]);return void 0===n||"null"===n?t:`${t}=${n}`})).join(" ")}hasAttribute(t){return t in this.attributes}getAttribute(t){return this.attributes[t]}setAttribute(t,e){if(arguments.length<2)throw new Error("Failed to execute 'setAttribute' on 'Element'");const n=this.rawAttributes;n[t]=String(e),this._attrs&&(this._attrs[t]=ih.decode(n[t])),this.rawAttrs=Object.keys(n).map((t=>{const e=JSON.stringify(n[t]);return"null"===e||'""'===e?t:`${t}=${e}`})).join(" ")}setAttributes(t){this._attrs&&delete this._attrs,this._rawAttrs&&delete this._rawAttrs,this.rawAttrs=Object.keys(t).map((e=>{const n=t[e];return"null"===n||'""'===n?e:`${e}=${JSON.stringify(String(n))}`})).join(" ")}insertAdjacentHTML(t,e){if(arguments.length<2)throw new Error("2 arguments required");const n=yh(e);if("afterend"===t){const t=this.parentNode.childNodes.findIndex((t=>t===this));this.parentNode.childNodes.splice(t+1,0,...n.childNodes),n.childNodes.forEach((t=>{t instanceof hh&&(t.parentNode=this.parentNode)}))}else if("afterbegin"===t)this.childNodes.unshift(...n.childNodes);else if("beforeend"===t)n.childNodes.forEach((t=>{this.appendChild(t)}));else{if("beforebegin"!==t)throw new Error(`The value provided ('${t}') is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'`);{const t=this.parentNode.childNodes.findIndex((t=>t===this));this.parentNode.childNodes.splice(t,0,...n.childNodes),n.childNodes.forEach((t=>{t instanceof hh&&(t.parentNode=this.parentNode)}))}}}get nextSibling(){if(this.parentNode){const t=this.parentNode.childNodes;let e=0;for(;e<t.length;){if(this===t[e++])return t[e]||null}return null}}get nextElementSibling(){if(this.parentNode){const t=this.parentNode.childNodes;let e=0,n=!1;for(;e<t.length;){const i=t[e++];if(n){if(i instanceof hh)return i||null}else this===i&&(n=!0)}return null}}}const ph=/<!--[^]*?(?=-->)-->|<(\/?)([a-z][-.:0-9_a-z]*)\s*([^>]*?)(\/?)>/gi,dh=/(^|\s)(id|class)\s*=\s*("([^"]+)"|'([^']+)'|(\S+))/gi,fh={area:!0,AREA:!0,base:!0,BASE:!0,br:!0,BR:!0,col:!0,COL:!0,hr:!0,HR:!0,img:!0,IMG:!0,input:!0,INPUT:!0,link:!0,LINK:!0,meta:!0,META:!0,source:!0,SOURCE:!0,embed:!0,EMBED:!0,param:!0,PARAM:!0,track:!0,TRACK:!0,wbr:!0,WBR:!0},_h={li:{li:!0,LI:!0},LI:{li:!0,LI:!0},p:{p:!0,div:!0,P:!0,DIV:!0},P:{p:!0,div:!0,P:!0,DIV:!0},b:{div:!0,DIV:!0},B:{div:!0,DIV:!0},td:{td:!0,th:!0,TD:!0,TH:!0},TD:{td:!0,th:!0,TD:!0,TH:!0},th:{td:!0,th:!0,TD:!0,TH:!0},TH:{td:!0,th:!0,TD:!0,TH:!0},h1:{h1:!0,H1:!0},H1:{h1:!0,H1:!0},h2:{h2:!0,H2:!0},H2:{h2:!0,H2:!0},h3:{h3:!0,H3:!0},H3:{h3:!0,H3:!0},h4:{h4:!0,H4:!0},H4:{h4:!0,H4:!0},h5:{h5:!0,H5:!0},H5:{h5:!0,H5:!0},h6:{h6:!0,H6:!0},H6:{h6:!0,H6:!0}},gh={li:{ul:!0,ol:!0,UL:!0,OL:!0},LI:{ul:!0,ol:!0,UL:!0,OL:!0},a:{div:!0,DIV:!0},A:{div:!0,DIV:!0},b:{div:!0,DIV:!0},B:{div:!0,DIV:!0},i:{div:!0,DIV:!0},I:{div:!0,DIV:!0},p:{div:!0,DIV:!0},P:{div:!0,DIV:!0},td:{tr:!0,table:!0,TR:!0,TABLE:!0},TD:{tr:!0,table:!0,TR:!0,TABLE:!0},th:{tr:!0,table:!0,TR:!0,TABLE:!0},TH:{tr:!0,table:!0,TR:!0,TABLE:!0}},mh="documentfragmentcontainer";function yh(t,e={lowerCaseTagName:!1,comment:!1}){const n=e.blockTextElements||{script:!0,noscript:!0,style:!0,pre:!0},i=Object.keys(n),r=i.map((t=>new RegExp(t,"i"))),o=i.filter((t=>n[t])).map((t=>new RegExp(t,"i")));function a(t){return o.some((e=>e.test(t)))}function s(t){return r.some((e=>e.test(t)))}const l=new hh(null,{});let u=l;const c=[l];let h,p=-1;for(t=`<${mh}>${t}</${mh}>`;h=ph.exec(t);){if(p>-1&&p+h[0].length<ph.lastIndex){const e=t.substring(p,ph.lastIndex-h[0].length);u.appendChild(new rh(e))}if(p=ph.lastIndex,h[2]!==mh)if("!"!==h[0][1]){if(e.lowerCaseTagName&&(h[2]=h[2].toLowerCase()),!h[1]){const n={};for(let t;t=dh.exec(h[3]);)n[t[2].toLowerCase()]=t[4]||t[5]||t[6];const i=u.rawTagName;if(!h[4]&&_h[i]&&_h[i][h[2]]&&(c.pop(),u=uh(c)),u=u.appendChild(new hh(h[2],n,h[3])),c.push(u),s(h[2])){const n=`</${h[2]}>`,i=e.lowerCaseTagName?t.toLocaleLowerCase().indexOf(n,ph.lastIndex):t.indexOf(n,ph.lastIndex);if(a(h[2])){let e;e=-1===i?t.substr(ph.lastIndex):t.substring(ph.lastIndex,i),e.length>0&&u.appendChild(new rh(e))}-1===i?p=ph.lastIndex=t.length+1:(p=ph.lastIndex=i+n.length,h[1]="true")}}if(h[1]||h[4]||fh[h[2]])for(;;){if(u.rawTagName===h[2]){c.pop(),u=uh(c);break}{const t=u.tagName;if(gh[t]&&gh[t][h[2]]){c.pop(),u=uh(c);continue}break}}}else if(e.comment){const e=t.substring(p-3,p-h[0].length+4);u.appendChild(new Zc(e))}}const d=Boolean(1===c.length);if(!e.noFix){const t=l;for(t.valid=d;c.length>1;){const t=c.pop(),e=uh(c);t.parentNode&&t.parentNode.parentNode&&(t.parentNode===e&&t.tagName===e.tagName?(e.removeChild(t),t.childNodes.forEach((t=>{e.parentNode.appendChild(t)})),c.pop()):(e.removeChild(t),t.childNodes.forEach((t=>{e.appendChild(t)}))))}return t.childNodes.forEach((t=>{t instanceof hh&&(t.parentNode=null)})),t}const f=new rh(t);return f.valid=d,f}var Ah=[{test:/\&gt;/g,replace:">"}],vh=function(){function t(){}return t.get=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.processHTML=function(t,e){e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&apos;/g,"'")).replace(new RegExp("&nbsp;","g")," ")).replace(new RegExp("â","g"),String.fromCharCode(8730))).replace(new RegExp("Ã","g"),String.fromCharCode(215))).replace(new RegExp("<\\\\","g"),"</")).replace(new RegExp("<br>","g"),"<br/>")).replace(new RegExp("<BR>","g"),"<br/>")).replace(new RegExp("<BR/>","g"),"<br/>")).replace(new RegExp("<B","g"),"<b")).replace(new RegExp("</B>","g"),"</b>")).replace(new RegExp("<I","g"),"<i")).replace(new RegExp("</I>","g"),"</i>")).replace(new RegExp("<P","g"),"<p")).replace(new RegExp("</P>","g"),"</p>")).replace(new RegExp("<U","g"),"<u")).replace(new RegExp("</U>","g"),"</u>")).replace(new RegExp("<LI","g"),"<li")).replace(new RegExp("</LI>","g"),"</li>")).replace(new RegExp("<FONT","g"),"<font")).replace(new RegExp("</FONT>","g"),"</font>")).replace(new RegExp("& ","g"),"&amp; ");for(var n=0,i=[],r=[],o=[];n<e.length;)if("<"==e[n]){if("p"==e[n+1])i[i.length]="p";else if("b"==e[n+1]&&"r"!=e[n+2])i[i.length]="b";else if("i"==e[n+1])i[i.length]="i";else if("u"==e[n+1])i[i.length]="u";else if("f"==e[n+1]&&"o"==e[n+2]&&"n"==e[n+3]&&"t"==e[n+4])i[i.length]="font",n+=2;else if("l"==e[n+1]&&"i"==e[n+2])i[i.length]="li",n++;else if("/"==e[n+1]&&"p"==e[n+2]){for(var a=i.length,s=-1;a>0;)if("p"==i[--a]){s=a;break}if(s<0)r[r.length]=n,o[o.length]=4;else{for(a=i.length-1;a>s;)r[r.length]=n,o[o.length]="</"+i[a]+">",i.pop(),a--;i.pop()}}else if("/"==e[n+1]&&"b"==e[n+2]){var l=i.length;for(s=-1;l>0;)if("b"==i[--l]){s=l;break}if(s<0)r[r.length]=n,o[o.length]=4;else{for(l=i.length-1;l>s;)r[r.length]=n,o[o.length]="</"+i[l]+">",i.pop(),l--;i.pop()}}else if("/"==e[n+1]&&"i"==e[n+2]){var u=i.length;for(s=-1;u>0;)if("i"==i[--u]){s=u;break}if(s<0)r[r.length]=n,o[o.length]=4;else{for(u=i.length-1;u>s;)r[r.length]=n,o[o.length]="</"+i[u]+">",i.pop(),u--;i.pop()}}else if("/"==e[n+1]&&"u"==e[n+2]){var c=i.length;for(s=-1;c>0;)if("u"==i[--c]){s=c;break}if(s<0)r[r.length]=n,o[o.length]=4;else{for(c=i.length-1;c>s;)r[r.length]=n,o[o.length]="</"+i[c]+">",i.pop(),c--;i.pop()}}else if("/"==e[n+1]&&"l"==e[n+2]&&"i"==e[n+3]){var h=i.length;for(s=-1;h>0;)if("li"==i[--h]){s=h;break}if(s<0)r[r.length]=n,o[o.length]=7;else{for(h=i.length-1;h>s;)r[r.length]=n,o[o.length]="</"+i[h]+">",i.pop(),h--;i.pop()}}else if("/"==e[n+1]&&"f"==e[n+2]&&"o"==e[n+3]&&"n"==e[n+4]&&"t"==e[n+5]){var p=i.length;for(s=-1;p>0;)if("font"==i[--p]){s=p;break}if(s<0)r[r.length]=n,o[o.length]=7;else{for(p=i.length-1;p>s;)r[r.length]=n,o[o.length]="</"+i[p]+">",i.pop(),p--;i.pop()}}n++}else n++;for(var d=i.length;d>0;)d--,r[r.length]=n,o[o.length]="</"+i[d]+">";for(var f=0,_=o.length,g=0;g<_;g++)"number"==typeof o[g]?(e=e.slice(0,r[g]+f)+e.slice(r[g]+f+o[g]),f-=o[g]):(e=e.slice(0,r[g]+f)+o[g]+e.slice(r[g]+f),f+=o[g].length);var m={text:""},y=t.newTextFormat;t._textFormats=[y],t._textFormatsIdx=[0];var A=yh(e);return A&&A.firstChild&&(m.multiline=A.firstChild.childNodes.length>0,this.readHTMLTextPropertiesRecursive(t,A,m,y)),""==m.text||13!=m.text.charCodeAt(m.text.length-1)&&10!=m.text.charCodeAt(m.text.length-1)||(m.text=m.text.slice(0,m.text.length-1)),""!=m.text&&m.text.length>=2&&"n"==m.text[m.text.length-1]&&"\\"==m.text[m.text.length-2]&&(m.text=m.text.slice(0,m.text.length-2)),""!=m.text&&m.text.length>=2&&"n"==m.text[m.text.length-1]&&"\\"==m.text[m.text.length-2]&&(m.text=m.text.slice(0,m.text.length-2)),t._textFormatsIdx[t._textFormatsIdx.length-1]=m.text.length,m.text},t.prototype.readHTMLTextPropertiesRecursive=function(t,e,n,i){var r=[],o=[];if(e.attributes){if(e.attributes.size||e.attributes.SIZE)a=(a=e.attributes.size?e.attributes.size:e.attributes.SIZE).replace(/[^0-9.]/g,""),r[r.length]=parseInt(a),o[o.length]="size";if(e.attributes.color||e.attributes.COLOR)a=(a=e.attributes.color?e.attributes.color:e.attributes.COLOR).replace("#","0x"),r[r.length]=parseInt(a),o[o.length]="color";if(e.attributes.indent||e.attributes.INDENT)a=(a=e.attributes.indent?e.attributes.indent:e.attributes.INDENT).replace(/[^0-9.]/g,""),r[r.length]=parseInt(a),o[o.length]="indent";if(e.attributes.leftMargin||e.attributes.LEFTMARGIN)a=(a=e.attributes.leftMargin?e.attributes.leftMargin:e.attributes.LEFTMARGIN).replace(/[^0-9.]/g,""),r[r.length]=parseInt(a),o[o.length]="leftMargin";if(e.attributes.rightMargin||e.attributes.RIGHTMARGIN)a=(a=e.attributes.rightMargin?e.attributes.rightMargin:e.attributes.RIGHTMARGIN).replace(/[^0-9.]/g,""),r[r.length]=parseInt(a),o[o.length]="rightMargin";if(e.attributes.align||e.attributes.ALIGN){var a=e.attributes.align?e.attributes.align:e.attributes.ALIGN;r[r.length]=a,o[o.length]="align"}if(e.attributes.face||e.attributes.FACE){a=e.attributes.face?e.attributes.face:e.attributes.FACE;r[r.length]=a,o[o.length]="font_name"}}"b"==e.tagName||"b"==e.rawTagName?i.bold||(r[r.length]=!0,o[o.length]="bold"):"i"==e.tagName||"i"==e.rawTagName?i.italic||(r[r.length]=!0,o[o.length]="italic"):"u"==e.tagName||"u"==e.rawTagName?i.underline||(r[r.length]=!0,o[o.length]="underline"):"font"==e.tagName||"font"==e.rawTagName||("li"==e.tagName||"li"==e.rawTagName?n.text+="\n    ●    ":("br"!=e.tagName&&"br"!=e.rawTagName||!t.multiline)&&("sbr"!=e.tagName&&"sbr"!=e.rawTagName||!t.multiline)||(n.text+="\n"));for(var s=!1,l=r.length;l>0;)if(i[o[--l]]!=r[l]){s=!0;break}var u=i;if(s){for(u=i.clone(),l=r.length;l>0;)u[o[--l]]=r[l];t._textFormats.push(u),t._textFormatsIdx[t._textFormatsIdx.length-1]=n.text.length,t._textFormatsIdx.push(n.text.length)}if(e.childNodes&&e.childNodes.length>0)for(var c=0;c<e.childNodes.length;c++)t._textFormats[t._textFormats.length-1]!=u&&(t._textFormats.push(u),t._textFormatsIdx[t._textFormatsIdx.length-1]=n.text.length,t._textFormatsIdx.push(n.text.length)),this.readHTMLTextPropertiesRecursive(t,e.childNodes[c],n,u);else if(""!=e.text.replace(/[\s\r\n]/gi,"")){for(var h=e.text,p=0,d=Ah;p<d.length;p++){var f=d[p];h=h.replace(f.test,f.replace)}n.text+=h}"ul"==e.tagName||"ul"==e.rawTagName||"li"==e.tagName||"li"==e.rawTagName||"p"!=e.tagName&&"p"!=e.rawTagName||(n.text+="\n")},t}(),bh=function(){function t(t){void 0===t&&(t=40),this.index=-1,this.store=Array.from({length:t},(function(t){return{x:1/0,y:1/0,start:0,width:0,len:0}}))}return t.prototype.put=function(t,e,n,i,r){this.index++;var o=this.store[this.index]||(this.store[this.index]={});return o.start=t,o.x=e,o.y=n,o.width=i,o.len=r,o},Object.defineProperty(t.prototype,"last",{get:function(){return this.store[this.index]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.index+1},set:function(t){this.index=t-1},enumerable:!1,configurable:!0}),t.prototype.get=function(t){return this.store[t]},t.prototype.free=function(){this.index=-1},t.prototype.dispose=function(){this.store=null,this.index=0},t}(),xh=[{test:/&apos;/g,replace:"'"},{test:/&gt;/g,replace:">"}],Ch=function(t){function e(){var e=t.call(this)||this;return e.textOffsetX=0,e.textOffsetY=0,e._selectionBeginIndex=0,e._selectionEndIndex=0,e._biggestLine=0,e._iText="",e._iTextDiffStart=0,e._text="",e._iTextWoLineBreaks="",e._newTextFormat=new zc,e.cursorIntervalID=-1,e.chars_codes=[],e.chars_width=[],e.tf_per_char=[],e.words=new bh(10),e._textRuns_formats=[],e._textRuns_words=[],e._paragraph_textRuns_indices=[],e._maxWidthLine=0,e._labelData=null,e.lines_wordStartIndices=[],e.lines_wordEndIndices=[],e.lines_start_y=[],e.lines_start_x=[],e.lines_charIdx_start=[],e.lines_charIdx_end=[],e.lines_width=[],e.lines_height=[],e.lines_numSpacesPerline=[],e.char_positions_x=[],e.char_positions_y=[],e.sourceTextField=null,e._maskWidth=0,e._maskHeight=0,e._maskTextOffsetX=0,e._maskTextOffsetY=0,e.isStatic=!1,e._internalScale=new L(1,1,1),e.onKeyDelegate=function(t){return e.onKey(t)},e.startSelectionByMouseDelegate=function(t){return e.startSelectionByMouse(t)},e.stopSelectionByMouseDelegate=function(t){return e.stopSelectionByMouse(t)},e.updateSelectionByMouseDelegate=function(t){return e.updateSelectionByMouse(t)},e._onClipboardPasteDelegate=function(t){return e.onClipboardPaste(t)},e.cursorIntervalID=-1,e._tabEnabled=!0,e.cursorType="",e.textOffsetX=0,e.textOffsetY=0,e.textShapes={},e._textColor=0,e._width=100,e._height=100,e._textWidth=0,e._textHeight=0,e._type=Dl.DYNAMIC,e._selectable=!1,e._numLines=0,e.multiline=!1,e._autoSize=Sl.NONE,e._wordWrap=!1,e._background=!1,e._backgroundColor=16777215,e._border=!1,e._borderColor=0,e.html=!1,e.maxChars=0,e._selectionBeginIndex=0,e._selectionEndIndex=0,e._scrollH=0,e._scrollV=0,e._textFormats=[],e._graphics=zs.getGraphics(),e.mouseEnabled=e._selectable,e}return o(e,t),e.getNewTextField=function(){return e._textFields.length?e._textFields.pop():new e},e.clearPool=function(){e._textFields=[]},e.prototype.updateMaskMode=function(){this.inMaskMode&&(this._maskWidth==this._width&&this._maskHeight==this._height&&this._maskTextOffsetX==this.textOffsetX&&this._maskTextOffsetY==this.textOffsetY||(this._maskWidth=this._width,this._maskHeight=this._height,this._maskTextOffsetX=this.textOffsetX,this._maskTextOffsetY=this.textOffsetY,this.maskChild.graphics.clear(),this.maskChild.graphics.beginFill(16777215),this.maskChild.graphics.drawRect(this.textOffsetX,this.textOffsetY,this._width,this._height),this.maskChild.graphics.endFill()),this._graphics.clear()),this.inMaskMode||(this.inMaskMode=!0,this.maskChild||(this.maskChild=new Zs),this.textChild||(this.textChild=new qc),this.textChild.mouseEnabled=!1,this.textChild.parentTextField=this,this.maskChild.mouseEnabled=!1,this.maskChild.graphics.beginFill(16777215),this.maskChild.graphics.drawRect(this.textOffsetX,this.textOffsetY,this._width,this._height),this.maskChild.graphics.endFill(),this.addChild(this.maskChild),this.addChild(this.textChild),this.maskChild.visible=!1,this._graphics.clear(),this.targetGraphics=this.textChild.graphics),this._textWidth>this._width||this._textHeight>this._height?this.textChild.scriptMask=this.maskChild:this.textChild.scriptMask=null},e.prototype.getMouseCursor=function(){return this.cursorType},Object.defineProperty(e.prototype,"isInFocus",{get:function(){return this._isInFocus},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.setFocus=function(e,n,i){void 0===n&&(n=!1),void 0===i&&(i=!0),this._isInFocus!=e&&(t.prototype.setFocus.call(this,e,n,i),this.enableInput(e),this._selectable&&(this.setSelection(0,0),this._glyphsDirty=!0,this.invalidate()))},e.prototype.enableInput=function(t){if(void 0===t&&(t=!0),this.cursorIntervalID>=0&&(window.clearInterval(this.cursorIntervalID),this.cursorIntervalID=-1),t&&this._isInFocus&&this.selectable){this.drawSelectionGraphics();var e=this;this.cursorIntervalID=window.setInterval((function(){e.cursorBlinking=!e.cursorBlinking,e.selectable||(e.cursorBlinking=!0),e._shapesDirty=!0,e.invalidate()}),500)}},e.prototype.findCharIdxForMouse=function(t){var e=new O(t.position.x,t.position.y),n=this.getLineIndexAtPoint(e.x,e.y),i=this.getCharIndexAtPoint(e.x,e.y,n);return n>=this.lines_start_x.length&&(n=this.lines_start_x.length-1),n<0&&(n=0),n>=0&&i<0&&void 0!==this.lines_start_x[n]&&(i=e.x<=this.lines_start_x[n]?this.lines_charIdx_start[n]:this.lines_charIdx_end[n]),(n<0||i<0)&&(i=0),i},e.prototype.startSelectionByMouse=function(t){this._selectionBeginIndex=this.findCharIdxForMouse(t),this._selectionEndIndex=this._selectionBeginIndex,this.cursorShape&&this.cursorShape.invalidate(),this.cursorShape=void 0,this.bgShapeSelect&&this.bgShapeSelect.invalidate(),this.bgShapeSelect=void 0,this._glyphsDirty=!0,this._shapesDirty=!0,this._textShapesDirty=!0,this.cursorBlinking=!1,this.drawSelectionGraphics()},e.prototype.stopSelectionByMouse=function(t){this._selectionEndIndex=this.findCharIdxForMouse(t),this._glyphsDirty=!0,this.reConstruct(),this.drawSelectionGraphics()},e.prototype.updateSelectionByMouse=function(t){this._selectionEndIndex=this.findCharIdxForMouse(t),this.bgShapeSelect&&this.bgShapeSelect.invalidate(),this.bgShapeSelect=void 0,this._glyphsDirty=!0,this.reConstruct(),this.drawSelectionGraphics()},e.prototype.drawSelectionGraphics=function(){this._selectionBeginIndex<0&&(this._selectionBeginIndex=0),this._selectionBeginIndex>this.char_positions_x.length&&(this._selectionBeginIndex=this.char_positions_x.length),this._selectionEndIndex<0&&(this._selectionEndIndex=0),this._selectionEndIndex>this.char_positions_x.length&&(this._selectionEndIndex=this.char_positions_x.length),this._selectionBeginIndex===this._selectionEndIndex?(this.showSelection=!1,this.drawCursor()):(this.showSelection=!0,this.cursorBlinking=!0,this.drawSelectedBG())},e.prototype.scrollToCursor=function(t,e){},e.prototype.drawCursor=function(){if(this._shapesDirty=!0,!this.cursorBlinking&&this.selectable&&this.selectionBeginIndex===this.selectionEndIndex){var t=0,e=0,n=this._newTextFormat;0==this.char_positions_x.length?(t=this.textOffsetX+this._width/2+this._textWidth/2,"justify"==n.align||"center"==n.align||("right"==n.align?t=this.textOffsetX+this._width-2:"left"==n.align&&(t=this.textOffsetX+4+this._textWidth))):this._selectionBeginIndex==this.char_positions_x.length?(t=this.char_positions_x[this._selectionBeginIndex-1]+this.chars_width[this._selectionBeginIndex-1],e=this.char_positions_y[this._selectionBeginIndex-1],n=this.tf_per_char[this._selectionBeginIndex-1]):(t=this.char_positions_x[this._selectionBeginIndex],e=this.char_positions_y[this._selectionBeginIndex],n=this.tf_per_char[this._selectionBeginIndex]),n.font_table.initFontSize(n.size);var i=n.font_table.getLineHeight(),r=this.getTextColorForTextFormat(n),o=this.internalScale.x;o<=0&&(o=1);var a=[t-.5*o,e,o,i];if(this.cursorShape?cs.updateRectanglesShape(this.cursorShape,a):(this.cursorShape=cs.drawRectangles(a,r,1),this.cursorShape.usages++),this.cursorShape.style.color!==r){var s=D.float32ColorToARGB(r)[0],l=us.getMaterialForColor(r,s/255||1);if(l.colorPos){this.cursorShape.style=new Gr;var u=new Qe;l.material.animateUVs=!0,this.cursorShape.style.color=r,this.cursorShape.style.addSamplerAt(u,l.material.getTextureAt(0)),this.cursorShape.style.uvMatrix=new M(0,0,0,0,l.colorPos.x,l.colorPos.y)}}this.scrollToCursor(t,e)}},e.prototype.drawSelectedBG=function(){this._shapesDirty=!0,this._textShapesDirty=!0,this._selectionBeginIndex<0&&(this._selectionBeginIndex=0),this._selectionBeginIndex>this.char_positions_x.length&&(this._selectionBeginIndex=this.char_positions_x.length);var t=this._selectionBeginIndex,e=this._selectionEndIndex;this._selectionEndIndex<this._selectionBeginIndex&&(t=this._selectionEndIndex,e=this._selectionBeginIndex);var n=0,i=0,r=-1,o=null,a=-1,s=0,l=0,u=[];if(0!=this.char_positions_x.length&&this._selectionEndIndex!=this._selectionBeginIndex)for(var c=e>this.char_positions_x.length?this.char_positions_x.length:e,h=t;h<c;h++)h==this.char_positions_x.length?(n=this.char_positions_x[h-1]+this.chars_width[h-1],i=this.char_positions_y[h-1],o=this.tf_per_char[h-1]):(n=this.char_positions_x[h],i=this.char_positions_y[h],o=this.tf_per_char[h]),a<0&&(a=n),r>=0&&r!=i&&(u.push(a,r,s,l),s=0,a=n),s+=this.chars_width[h],r=i,o.font_table.initFontSize(o.size),l=Math.max(l,o.font_table.getLineHeight());if(s>0)return u.push(a,r,s,l),void(this.bgShapeSelect?cs.updateRectanglesShape(this.bgShapeSelect,u):(this.bgShapeSelect=cs.drawRectangles(u,0,1),this.bgShapeSelect.usages++));this.scrollToCursor(a+s,r+l)},e.prototype.drawBG=function(){this._background&&(this._graphics.beginFill(this.backgroundColor,1),this._graphics.drawRect(this.textOffsetX,this.textOffsetY,this.width,this.height),this._graphics.endFill());var t=this.pickObject;t||(this.pickObject=t||(t=new Zs),t.pickObjectFromTimeline=!0);var e=t.graphics;e.clear(),e.beginFill(0,1),e.drawRect(this.textOffsetX,this.textOffsetY,this.width,this.height),e.endFill()},e.prototype.drawBorder=function(){var t=this.border?.25*this.internalScale.x:0,e=this.border?.25*this.internalScale.y:0;this._graphics.beginFill(this._borderColor,1),this._graphics.drawRect(this.textOffsetX,this.textOffsetY,this._width,2*e),this._graphics.drawRect(this.textOffsetX,this.textOffsetY+this._height-2*e,this._width,2*e),this._graphics.drawRect(this.textOffsetX,this.textOffsetY+2*e,2*t,this._height-2*e),this._graphics.drawRect(this.textOffsetX+this._width-2*t,this.textOffsetY+2*e,2*t,this._height-2*e),this._graphics.endFill()},e.prototype.getTextShapeForIdentifierAndFormat=function(t,e){return this.textShapes[t]?this.textShapes[t]:this.textShapes[t]=new Kc(e,t)},Object.defineProperty(e.prototype,"autoSize",{get:function(){return this._autoSize},set:function(t){if(this._autoSize!=t){if("string"==typeof t){if(t!=Sl.CENTER&&t!=Sl.NONE&&t!=Sl.LEFT&&t!=Sl.RIGHT)return}else"boolean"==typeof t&&(t=t?Sl.LEFT:Sl.NONE),"number"==typeof t&&(t=t>0?Sl.LEFT:Sl.NONE);this._autoSize=t,this._positionsDirty=!0,this._autoSize!=Sl.NONE&&this.invalidate()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"internalScale",{get:function(){return this._internalScale},enumerable:!1,configurable:!0}),e.prototype._iInternalUpdate=function(){t.prototype._iInternalUpdate.call(this),this.reConstruct(!0)},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!=t&&(this._background=t,this._shapesDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._shapesDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"border",{get:function(){return this._border},set:function(t){t!=this._border&&(this._border=t,this._shapesDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor},set:function(t){t!=this.borderColor&&(this._borderColor=t,this._shapesDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomScrollV",{get:function(){return this._bottomScrollV},set:function(t){t!=this._bottomScrollV&&(this._bottomScrollV=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"caretIndex",{get:function(){return this._caretIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._autoSize!=Sl.NONE&&this.reConstruct(),this._height},set:function(t){this._height!=t&&this._autoSize==Sl.NONE&&(this._height=t,this._positionsDirty=!0,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"htmlText",{get:function(){return this._htmlText},set:function(t){if(t!=this._htmlText){this._htmlText=t;var e=vh.get().processHTML(this,t);this._labelData=null,this._text=e,this._iText=e,this._iTextWoLineBreaks=e.replace(/(\r\n|\n|\\n|\r)/gm,""),this._textDirty=!0,this.invalidate()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._iText.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollH",{get:function(){return this.reConstruct(),this._maxScrollH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollV",{get:function(){return this.reConstruct(),this._maxScrollV},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numLines",{get:function(){return this.reConstruct(),this._numLines},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"restrict",{get:function(){return this._restrict},set:function(t){t!=this._restrict&&(this._restrict=t,this._restrictRegex=null,void 0!==t&&((t=t.toString()).length>=2&&"-"==t[0]&&!isNaN(parseInt(t[1]))&&(t="0"+t),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\\/g,"")).replace(/\^/g,"")).replace(/([^a-zA-Z0-9])\-/g,"$1\\-")).replace(/\./g,"\\.")).replace(/\</g,"\\<")).replace(/\>/g,"\\>")).replace(/\+/g,"\\+")).replace(/\*/g,"\\*")).replace(/\?/g,"\\?")).replace(/\[/g,"\\[")).replace(/\]/g,"\\]")).replace(/\$/g,"\\$")).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")).replace(/\{/g,"\\{")).replace(/\}/g,"\\}")).replace(/\=/g,"\\=")).replace(/\!/g,"\\!")).replace(/\:/g,"\\:")).replace(/\|/g,"\\|")).replace(/\//g,"\\/")).replace(/\%/g,"\\%"),this._restrictRegex=new RegExp("[^"+t+"]","g")))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollH",{get:function(){return this._scrollH},set:function(t){t!=this._scrollH&&(this._scrollH=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollV",{get:function(){return this._scrollV},set:function(t){var e=Math.round(t);e!==this._scrollV&&(this._scrollV=e,this._scrollV>this._maxScrollV&&(this._scrollV=this._maxScrollV),this._scrollV<=0&&(this._scrollV=0),this.textChild&&(this.textChild.y=-this.lines_start_y[this._scrollV]))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this._selectable},set:function(t){this.selectable!=t&&(this._selectable=t,this.mouseEnabled=t,this.cursorType=t?"text":"",t?(this.addEventListener(ml.DRAG_START,this.startSelectionByMouseDelegate),this.addEventListener(ml.DRAG_STOP,this.stopSelectionByMouseDelegate),this.addEventListener(ml.DRAG_MOVE,this.updateSelectionByMouseDelegate)):(this.removeEventListener(ml.DRAG_START,this.startSelectionByMouseDelegate),this.removeEventListener(ml.DRAG_STOP,this.stopSelectionByMouseDelegate),this.removeEventListener(ml.DRAG_MOVE,this.updateSelectionByMouseDelegate)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionBeginIndex",{get:function(){return this._selectionBeginIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionEndIndex",{get:function(){return this._selectionEndIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){if(t=(t=void 0===t?"":t.toString()).replace(String.fromCharCode(160)," "),this._text!=t||this._newFormatDirty){this._newFormatDirty=!1,this._labelData=null,this._text=t,""==t||13!=t.charCodeAt(t.length-1)&&10!=t.charCodeAt(t.length-1)||(t=t.slice(0,t.length-1)),""!=t&&t.length>=3&&"n"==t[t.length-1]&&"\\"==t[t.length-2]&&"\\"==t[t.length-3]&&(t=t.slice(0,t.length-3)),""!=t&&t.length>=3&&"n"==t[t.length-1]&&"\\"==t[t.length-2]&&(t=t.slice(0,t.length-2));for(var e=0,n=xh;e<n.length;e++){var i=n[e];t=t.replace(i.test,i.replace)}this._iText=t,this._iTextWoLineBreaks=t.replace(/(\r\n|\n|\\n|\r)/gm,""),this._textFormats=[this.newTextFormat],this._textFormatsIdx=[this._iText.length],this._textDirty=!0,this.invalidate()}},enumerable:!1,configurable:!0}),e.prototype.setLabelData=function(t){this._labelData=t,this.isStatic=!0,this._iText="",this._iTextWoLineBreaks="",this._textDirty=!1,this._positionsDirty=!1,this._glyphsDirty=!0,this.invalidate()},Object.defineProperty(e.prototype,"newTextFormat",{get:function(){return this._newTextFormat.clone()},set:function(t){if(!t)throw new Error("TextField::: set newTextFormat - no value!");t.equal(this._newTextFormat)||(this._newTextFormat=t.clone(),this._newFormatDirty=!0,this._textShapesDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._transform.scale.x},set:function(t){this._transform.scale.x!=t&&this._setScaleX(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._transform.scale.y},set:function(t){this._transform.scale.y!=t&&this._setScaleY(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._textColor},set:function(t){if(this._textColor!=t){if(this._textColor=t,this._textFormats){for(var e=this._textFormats.length;e>0;)e--,this._textFormats[e]&&(this._textFormats[e].color=t);this._textDirty=!0}this._glyphsDirty=!0,this.invalidate()}},enumerable:!1,configurable:!0}),e.prototype.getTextColorForTextFormat=function(t){return t.hasPropertySet("color")?t.color:this._textColor},Object.defineProperty(e.prototype,"textInteractionMode",{get:function(){return this._textInteractionMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.reConstruct(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.reConstruct(),this.type==Dl.INPUT&&""==this._iText?(this._newTextFormat.font_table.initFontSize(this._newTextFormat.size),this._newTextFormat.font_table.getLineHeight()):this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type!=t&&(this._type=t,this._textDirty=!0,t==Dl.INPUT?(this.enableInput(!0),this.addEventListener(Xc.KEYDOWN,this.onKeyDelegate)):(this.enableInput(!1),this.removeEventListener(Xc.KEYDOWN,this.onKeyDelegate)),this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._autoSize==Sl.NONE||this._wordWrap||this.reConstruct(),this._transform.position.x},set:function(t){this._autoSize==Sl.NONE||this._wordWrap||this.reConstruct(),this._transform.position.x!=t&&(this._transform.matrix3D._rawData[12]=t,this._transform.invalidatePosition())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._autoSize==Sl.NONE||this._wordWrap||this.reConstruct(),this._width},set:function(t){this._width!=t&&(this._width=t,this._positionsDirty=!0,this.invalidate())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!=t&&(this._wordWrap=t,this._positionsDirty=!0,t||this.invalidate())},enumerable:!1,configurable:!0}),e.prototype.advanceFrame=function(){},e.prototype.getEntity=function(){return this._graphics},e.prototype.clear=function(){t.prototype.clear.call(this)},e.prototype.dispose=function(){this.disposeValues(),e._textFields.push(this)},e.prototype.disposeValues=function(){t.prototype.disposeValues.call(this),this.maskChild&&(this.maskChild.dispose(),this.maskChild=null),this.textChild&&(this.textChild.dispose(),this.textChild=null),this.cursorShape&&(this.cursorShape.dispose(),this.cursorShape=null),this.bgShapeSelect&&(this.bgShapeSelect.dispose(),this.bgShapeSelect=null),this._labelData&&(this._labelData=null),this._resetParagraph(),this._clearTextShapes()},e.prototype.reConstruct=function(t){void 0===t&&(t=!1),(this._textDirty||this._positionsDirty||this._glyphsDirty||this._shapesDirty)&&(this._textDirty&&(this._positionsDirty=!0,this._lastWordsCount=this.words.length,this.char_positions_x.length=0,this.char_positions_y.length=0,this.words.length=0,this.lines_wordStartIndices.length=0,this.lines_wordEndIndices.length=0,this.lines_start_y.length=0,this.lines_start_x.length=0,this.lines_charIdx_start.length=0,this.lines_charIdx_end.length=0,this.lines_width.length=0,this.lines_height.length=0,this.lines_numSpacesPerline.length=0,this._maxScrollH=0,this._maxScrollV=0,this._maxWidthLine=0,this.buildParagraphs()),this._positionsDirty&&(this._glyphsDirty=!0,""!=this._iText&&null!=this._textFormats[0]?this.getWordPositions(this._textFormats[0]):(this._textWidth=0,this._textHeight=0,this._autoSize!=Sl.NONE&&(this.wordWrap||this.adjustPositionForAutoSize(0),this._height=4,this._type==Dl.INPUT&&(this._newTextFormat.font_table.initFontSize(this._newTextFormat.size),this._height=this._newTextFormat.font_table.getLineHeight()+4)),this._type==Dl.INPUT&&this.drawSelectionGraphics()),this.updateMaskMode()),this._textDirty=!1,this._positionsDirty=!1,t&&(this._glyphsDirty&&(this._labelData?this.buildGlyphsForLabelData():this.buildGlyphs()),this._glyphsDirty=!1,this._labelData||(this.buildShapes(),this._shapesDirty=!1)))},e.prototype.reset=function(){t.prototype.reset.call(this),this.sourceTextField&&this.sourceTextField.copyTo(this)},e.prototype.onClipboardPaste=function(t){var e=(t.clipboardData||self.clipboardData).getData("text");e&&(t.preventDefault(),this._selectionBeginIndex>0||this._selectionEndIndex>this.length?this._insertNewText(e):this.text=e)},e.prototype._resetParagraph=function(){this._textShapesDirty=this._textShapesDirty||this.chars_codes.length>0,this.tf_per_char.length=0,this.chars_width.length=0,this.chars_codes.length=0,this._paragraph_textRuns_indices.length=0,this._textRuns_formats.length=0,this._textRuns_words.length=0},e.prototype.buildParagraphs=function(){if(this._textDirty)if(""!==this._iText&&this._textFormats[0]){var t=0,e=0,n=0,i=0,r=0,o=0,a=0,s=this._iText,l=this._textFormatsIdx.length,u=this._paragraph_textRuns_indices,c=this._textRuns_formats,h=this._textRuns_words,p=this.chars_codes,d=this.tf_per_char,f=this.chars_width,_=function(e){u[t]=e,t++},g=function(t,n){return void 0===n&&(n=!1),n&&_(e),c[e++]=t,t},m=function(t){return h[n++]=t,t},y=function(t,e,n){r+=+(t!==p[i]),r+=+(e!==d[i]),r+=+(n!==f[i]),p[i]=t,d[i]=e,f[i]=n,i++};_(e);for(var A=0;A<l;A++){var v=0,b=0,x=!0,C=this._textFormats[A],I=this._width-(C.indent+C.leftMargin+C.rightMargin);C.font_table.initFontSize(C.size);var E=A===l-1?s.length:this._textFormatsIdx[A];if(E>a){g(C);for(var w=m({start:this.words.length,count:0,width:0,space:0}),S=a;S<E;S++){var D=s.charCodeAt(S),T=s.charCodeAt(S+1);if(13===D&&(D=10),92!==D||114!==T)if(92===D&&110===T&&(S+=1,D=10,T=s.charCodeAt(S+1)),10===D)w.count=v,w.width=o,w.space=b,g(C,!0),w=m({start:this.words.length,count:0,width:0,space:0}),x=!0,b=0,v=0,this._maxWidthLine<o&&(this._maxWidthLine=o),o=0;else{var P=C.font_table.getCharWidth(D.toString()),B=9==D||32==D;!B&&S<E-1&&9!=T&&32!=T&&(P+=C.letterSpacing),o+=P,y(D,C,P),B?(b++,this.words.put(i-1,0,0,P,1),v++,x=!0):(v>0&&this._autoSize==Sl.NONE&&this._wordWrap&&this.words.last.width+P>=I&&(x=!0),x?(this.words.put(i-1,0,0,P,1),v++):(this.words.last.width+=P,this.words.last.len+=1),x=!1)}else S+=1}w.count=v,w.width=o,w.space=b,this._maxWidthLine<o&&(this._maxWidthLine=o)}a=E}this._textShapesDirty=this._textShapesDirty||r>0||p.length!==i,u.length=t,h.length=n,c.length=e,p.length=i,d.length=i,f.length=i}else this._resetParagraph()},e.prototype.adjustPositionForAutoSize=function(t){var e=this._width;this._width=4+t,this._autoSize==Sl.RIGHT?(this._transform.matrix3D._rawData[12]-=this._width-e,this._transform.invalidatePosition()):this._autoSize==Sl.CENTER&&(this._transform.matrix3D._rawData[12]-=(this._width-e)/2,this._transform.invalidatePosition())},e.prototype.getWordPositions=function(t){var e,n=0,i=this._textRuns_formats.length,r=0,o=0,a=0,s=0,l=0;this._numLines=0;var u=0,c=0,h=0,p=this.textOffsetY+2;if(this._autoSize!=Sl.NONE&&!this._wordWrap&&this._textDirty){var d=this._maxWidthLine+t.indent+t.leftMargin+t.rightMargin;this.adjustPositionForAutoSize(d)}var f=this._width-(t.indent+t.leftMargin+t.rightMargin),_=0,g=this._paragraph_textRuns_indices.length;u=0,this.lines_wordStartIndices.length=0,this.lines_wordEndIndices.length=0,this.lines_start_y.length=0,this.lines_start_x.length=0,this.lines_width.length=0,this.lines_height.length=0,this.lines_numSpacesPerline.length=0,this.lines_charIdx_start.length=0,this.lines_charIdx_end.length=0;var m=[],y=[];for(_=0;_<g;_++){for(i=_==g-1?this._textRuns_formats.length:this._paragraph_textRuns_indices[_+1],a=0,m[m.length]=0,n=this._paragraph_textRuns_indices[_];n<i;n++)(e=this._textRuns_formats[n]).font_table.initFontSize(e.size),m[m.length-1]<e.font_table.getLineHeight()+e.leading&&(m[m.length-1]=e.font_table.getLineHeight()+e.leading),o=this._textRuns_words[n].start+this._textRuns_words[n].count,a+=this._textRuns_words[n].width;this.lines_wordStartIndices[this.lines_wordStartIndices.length]=this._textRuns_words[this._paragraph_textRuns_indices[_]].start,this.lines_wordEndIndices[this.lines_wordEndIndices.length]=o,this.lines_width[this.lines_width.length]=0,this.lines_numSpacesPerline[this.lines_numSpacesPerline.length]=0;var A=0;for(this.lines_height[this.lines_height.length]=m[A],y[u]=e,n=this._paragraph_textRuns_indices[_];n<i;n++)if((e=this._textRuns_formats[n]).font_table.initFontSize(e.size),l=e.indent,o=this._textRuns_words[n].start+this._textRuns_words[n].count,a<=f||!this.wordWrap)for(r=this._textRuns_words[n].start;r<o;r+=1){c+=h=(M=this.words.get(r)).width,this.lines_wordEndIndices[u]=r+1,this.lines_width[u]+=h,y[u]=e,32!=this.chars_codes[M.start]&&9!=this.chars_codes[M.start]||(this.lines_numSpacesPerline[u]+=1)}else for(h=0,l=0,r=this._textRuns_words[n].start;r<o;r+=1){h=(M=this.words.get(r)).width;var v=!1;32!=this.chars_codes[M.start]&&9!=this.chars_codes[M.start]||(this.lines_numSpacesPerline[u]+=1,v=!0),v||this.lines_width[u]+h<=f-l-1*e.font_table.getCharWidth("32")||0==this.lines_width[u]?(this.lines_wordEndIndices[u]=r+1,this.lines_width[u]+=h,y[u]=e):(u++,this.lines_wordStartIndices[u]=r,this.lines_wordEndIndices[u]=r+1,this.lines_width[u]=h,this.lines_numSpacesPerline[u]=0,this.lines_height[this.lines_height.length]=m[A],y[u]=e,l=e.indent)}A++,u++}var b,x,C,I,E,w=this.textOffsetX,S=0,D=this.lines_wordStartIndices.length,T=0;for(this._biggestLine=0,this._numLines=D,E=0;E<D;E++){c=this.lines_width[E],x=this.lines_height[E],b=this.lines_wordStartIndices[E],C=this.lines_wordEndIndices[E],this.lines_numSpacesPerline[E],e=y[E],I=f-c,w=this.textOffsetX+e.leftMargin+e.indent,e.align==Tl.JUSTIFY?0!=E&&(w-=e.indent):e.align==Tl.CENTER?w+=I>0?I/2:2:e.align==Tl.RIGHT?w+=I>0?I-2:2:e.align==Tl.LEFT&&(w+=2);var P=0,B=w;this.lines_start_x[E]=w,this.lines_start_y[E]=p,this.lines_charIdx_start[E]=T;var O=0;for(r=b;r<C;r+=1){var M;(M=this.words.get(r)).x=w,B=0,P=(b=M.start)+M.len;var L=this.tf_per_char[b];L.font_table.initFontSize(L.size);var R=x-(L.font_table.getLineHeight()+L.leading);for(R=R>0?R-2:0,M.y=p+R,S=b;S<P;S++)this.char_positions_x[this.char_positions_x.length]=w+B,this.char_positions_y[this.char_positions_y.length]=p+R,B+=this.chars_width[S],T++;w+=B,O+=B}this.lines_charIdx_end[E]=T,p+=x,O>s&&(this._biggestLine=E,s=O)}if(this._textWidth=s,this._textHeight=p,this.autoSize!=Sl.NONE&&(this._height=this._textHeight+4),this._textWidth>this._width){b=this.lines_charIdx_start[this._biggestLine],S=this.lines_charIdx_end[this._biggestLine];for(var N=0;S>b;)if(S--,(N+=this.chars_width[S])>this._width){this._maxScrollH=S;break}}if(this._textHeight>this._height){var F=this.lines_height.length;for(N=4;F>0;)if(F--,(N+=this.lines_height[F])>this._height){this._maxScrollV=F+1;break}}},e.prototype.buildGlyphsForLabelData=function(){this._clearTextShapes();for(var t,e,n=[],i=[],r=[],o=[],a=this.staticMatrix.tx/20,s=this.staticMatrix.ty/20,l=0,u=0;u<this._labelData.records.length;u++){n[u]=new zc,i[u]=[],r[u]=[],(t=this._labelData.records[u]).font_table?n[u].font_table=t.font_table:u>0?n[u].font_table=n[u-1].font_table:console.log("error - no font for label"),t.fontHeight?n[u].size=t.fontHeight/20:u>0&&(n[u].size=n[u-1].size),t.color?n[u].color=D.f32_RGBA_To_f32_ARGB(t.color):u>0&&(n[u].color=n[u-1].color),null!=t.moveY&&(l=s+=t.moveY/20-l),null!=t.moveX&&(a=this.staticMatrix.tx/20+t.moveX/20),o.push(a),o.push(s);for(var c=0;c<t.entries.length;c++)i[u][c]=t.entries[c].glyphIndex,r[u][c]=t.entries[c].advance/20,a+=r[u][c]}var h,p=0,d=n.length,f=0,_=0;for(p=0;p<d;p++)n[p].font_table.initFontSize(n[p].size),_+=(h=n[p].font_table.buildTextLineFromIndices(this,n[p],o[2*p],o[2*p+1],i[p],r[p])).y,f=h.x>f?h.x:f;for(var g in this._textWidth=f,this._textHeight=_,this.targetGraphics=this._graphics,this.targetGraphics.clear(),this.drawBG(),(this.border||!this._background&&this._type!=Dl.INPUT)&&this.drawBorder(),this.textShapes){e=this.textShapes[g];for(var m=new zi(e.length/2),y=new Float32Array(m.attributesBuffer.buffer),A=0,v=0,b=e.verts;v<b.length;v++){var x=b[v];y.set(x,A),A+=x.length}e.elements=new io,e.elements.setPositions(m),e.elements.invalidate(),e.shape=this.targetGraphics.addShape(is.getShape(e.elements)),e.shape.deepHitCheck=!0,e.shape.usages++;var C=new Qe;if(e.shape.style=new Gr,e.format.material&&0==this._textColor)e.shape.material=this._textFormats[0].material,e.shape.style.addSamplerAt(C,e.shape.material.getTextureAt(0)),e.shape.material.animateUVs=!0,e.shape.style.uvMatrix=new M(0,0,0,0,e.format.uv_values[0],e.format.uv_values[1]);else{var I=this.getTextColorForTextFormat(e.format),E=D.float32ColorToARGB(I)[0];0==E&&(E=255);var w=us.getMaterialForColor(I,E/255);e.shape.material=w.material,w.colorPos&&(e.shape.style.addSamplerAt(C,e.shape.material.getTextureAt(0)),e.shape.material.animateUVs=!0,e.shape.style.uvMatrix=new M(0,0,0,0,w.colorPos.x,w.colorPos.y))}}},e.prototype.buildGlyphs=function(){var t,e=this._textRuns_formats,n=this._textRuns_words,i=e.length;this._textShapesDirty&&this._clearTextShapes();for(var r=0;r<i;r++){var o=n[r];0!=o.count&&(e[r].font_table.initFontSize(e[r].size),Ks.USE_UNSAFE_FNT&&e[r].font_table.generateFNTData(null),e[r].font_table.fillTextRun(this,e[r],o.start,o.count))}for(var a in this.textShapes)if(0!==(t=this.textShapes[a]).length){for(var s=new zi(t.length/2),l=new Float32Array(s.attributesBuffer.buffer),u=t.hasUV?new zi(t.length/2):null,c=u?new Float32Array(u.attributesBuffer.buffer):null,h=0,p=0;p<t.verts.length;p++){var d=t.verts[p];l.set(d,h),c&&c.set(t.uvs[p],h),h+=d.length}if(t.length=0,t.addChunk(l,c),t.shape){var f=t.shape.elements;f.setPositions(l),c&&f.setUVs(c),f.invalidate(),s.dispose(),u&&u.dispose()}else{var _=this.getTextColorForTextFormat(t.format),g=D.float32ColorToARGB(_)[0]||255;t.elements=new io,t.elements.setPositions(s),u&&t.elements.setUVs(u),t.elements.invalidate(),t.shape=is.getShape(t.elements),t.shape.deepHitCheck=!0,t.shape.usages++;var m=new Qe(!1,!0,!0);if(t.shape.style=new Gr,t.fntMaterial)t.shape.material=t.fntMaterial,t.shape.style.addSamplerAt(m,t.shape.material.getTextureAt(0));else if(t.format.material&&0==this._textColor)t.shape.material=this._textFormats[0].material,t.shape.style.addSamplerAt(m,t.shape.material.getTextureAt(0)),t.shape.material.animateUVs=!0,t.shape.style.uvMatrix=new M(0,0,0,0,t.format.uv_values[0],t.format.uv_values[1]);else{var y=us.getMaterialForColor(_,g/255);t.shape.material=y.material,y.colorPos&&(t.shape.style.addSamplerAt(m,t.shape.material.getTextureAt(0)),t.shape.material.animateUVs=!0,t.shape.style.uvMatrix=new M(0,0,0,0,y.colorPos.x,y.colorPos.y))}}}},e.prototype.buildShapes=function(){var t;for(var e in this.targetGraphics?this._graphics.clear():this.targetGraphics=this._graphics,this.targetGraphics.clear(),this.drawBG(),!this._border&&this._background||this.drawBorder(),this.drawSelectionGraphics(),this.bgShapeSelect&&this.isInFocus&&this.showSelection&&this.targetGraphics.addShape(this.bgShapeSelect),this.textShapes)(t=this.textShapes[e]).shape&&this.targetGraphics.addShape(t.shape);this.type===Dl.INPUT&&this.isInFocus&&this.cursorShape&&!this.cursorBlinking&&this.targetGraphics.addShape(this.cursorShape)},e.prototype.appendText=function(t){t.length&&(this._iText+=t,this._textDirty=!0,this.invalidate())},e.prototype.closeParagraph=function(){this._iText+="\n",this._textDirty=!0,this.invalidate()},e.prototype.getCharBoundaries=function(t){var e=new W;return t>=this.char_positions_x.length||(e.x=this.char_positions_x[t],e.width=this.chars_width[t],e.y=this.char_positions_y[t],e.height=10),e},e.prototype.getCharIndexAtPoint=function(t,e,n){void 0===n&&(n=-1),n<0&&(n=this.getLineIndexAtPoint(t,e));for(var i=this.lines_charIdx_start[n],r=this.lines_charIdx_end[n],o=i;o<r;o++)if(t>=this.char_positions_x[o]){if(t<=this.char_positions_x[o]+this.chars_width[o]/2)return o;if(t<=this.char_positions_x[o]+this.chars_width[o])return o+1}return-1},e.prototype.getFirstCharInParagraph=function(t){return console.log("Textfield.getFirstCharInParagraph() not implemented"),this._firstCharInParagraph},e.prototype.getImageReference=function(t){return console.log("TextField.getImageReference() not implemented"),this._imageReference},e.prototype.getLineIndexAtPoint=function(t,e){for(var n=this.lines_start_y.length,i=0;i<n-1;i++)if(e>=this.lines_start_y[i]&&e<=this.lines_start_y[i+1])return i;return e>=this.lines_start_y[n-1]?n-1:0},e.prototype.getLineIndexOfChar=function(t){this.buildParagraphs();for(var e=this.lines_charIdx_start.length-1,n=void 0;n<e;n++)if(t>=this.lines_charIdx_start[n]&&t<=this.lines_charIdx_end[n+1])return n;return e},e.prototype.getLineLength=function(t){return 0==this.lines_width.length?0:t>=this.lines_width.length?this.lines_width[this.lines_width.length-1]:this.lines_width[t]},e.prototype.getLineMetrics=function(t){var e=new Hc;return this.lines_width.length?(t>=this.lines_width.length&&(t=this.lines_width.length-1),e.x=this.lines_start_x[t],e.width=this.lines_width[t],e.height=this.lines_height[t],e):e},e.prototype.getLineOffset=function(t){return 0==this.lines_charIdx_start.length?0:t>=this.lines_charIdx_start.length?this.lines_charIdx_start[this.lines_charIdx_start.length-1]:this.lines_charIdx_start[t]},e.prototype.getLineText=function(t){return 0==this.lines_charIdx_start.length?"":(t>=this.lines_width.length&&(t=this.lines_width.length-1),this._iText.slice(this.lines_charIdx_start[t],this.lines_charIdx_end[t]))},e.prototype.getParagraphLength=function(t){return this._paragraphLength},e.prototype.getTextFormat=function(t,e){var n;if(void 0===t&&(t=-1),void 0===e&&(e=-1),!this.tf_per_char||!this.tf_per_char.length)return(null===(n=this._textFormats[0])||void 0===n?void 0:n.clone())||new zc;t<0&&(t=0),e>this.tf_per_char.length&&(e=this.tf_per_char.length);for(var i=this.tf_per_char[t].clone(),r=this.tf_per_char[t],o=t+1;o<e;o++)this.tf_per_char[o]!=r&&(i.mergeFormat(this.tf_per_char[o]),r=this.tf_per_char[o]);return i},e.prototype.replaceSelectedText=function(t){return this._insertNewText(t)},e.prototype.replaceText=function(t,e,n){var i=this._iTextWoLineBreaks.slice(0,t-1),r=this._iTextWoLineBreaks.slice(e,this._iTextWoLineBreaks.length);this.text=i+n+r,this._selectionEndIndex=this._selectionBeginIndex+n.length},e.prototype.setSelection=function(t,e){this._selectionBeginIndex==t&&this._selectionBeginIndex==e||(this._selectionBeginIndex=t,this._selectionEndIndex=e,this._glyphsDirty=!0,this.reConstruct(),this.drawSelectionGraphics())},e.prototype.setTextFormat=function(t,e,n){if(void 0===e&&(e=-1),void 0===n&&(n=-1),t&&0!=this._iTextWoLineBreaks.length){if(-1==e&&-1==n||0==e&&-1==n||(-1==e||0==e)&&n>=this._iTextWoLineBreaks.length){var i=this._textFormats.length;if(1===this._textFormats.length&&this._textFormats[0].equal(t))return;for(var r=0;r<i;r++)this._textFormats[r]=this._textFormats[r].clone(),t.applyToFormat(this._textFormats[r]);return this._textDirty=!0,void(this._textShapesDirty=!0)}var o,a=0,s=[],l=[],u=0,c=-1,h=this._textFormats.length,p=this._iTextWoLineBreaks.length;if(-1==e&&(e=0),-1==n&&(n=p),n<e){var d=n;n=e,e=d}n==e&&n++;for(var f=0;f<h;f++)if(f>0&&(u=c),c=this._textFormatsIdx[f],o=this._textFormats[f],u<=e&&c>e){for(u<e&&(s.push(o),l.push(e));c<n;){var _=this._textFormats[f].clone();t.applyToFormat(_),s.push(_),l.push(c),++f<h?(c=this._textFormatsIdx[f],o=this._textFormats[f]):c=n+1}if(c==n){_=o.clone();t.applyToFormat(_),s.push(_),l.push(n)}if(c>n){_=o.clone();t.applyToFormat(_),s.push(_),l.push(n),s.push(o),l.push(c)}}else s.push(this._textFormats[f]),l.push(this._textFormatsIdx[f]);for(this._textFormats.length=0,this._textFormatsIdx.length=0,a=0;a<s.length;a++)this._textFormats[a]=s[a],this._textFormatsIdx[a]=l[a];this._textDirty=!0,this._textShapesDirty=!0}},e.isFontCompatible=function(t,e){return!1},e.prototype.onKey=function(t){var e=t;this.addChar(e.char,e.isShift,e.isCTRL,e.isAlt)},e.prototype.addCharCode=function(t){this.addChar(String.fromCharCode(t))},e.prototype.deleteSelectedText=function(t){if(void 0===t&&(t="Backspace"),0!=this.text.length){if(this._selectionBeginIndex!=this._selectionEndIndex){var e=0!=this._selectionBeginIndex?this._iText.slice(0,this._selectionBeginIndex):"",n=this._selectionEndIndex<this._iText.length?this._iText.slice(this._selectionEndIndex,this._iText.length):"";return this.text=e+n,void(this._selectionEndIndex=this._selectionBeginIndex)}if("Backspace"==t){if(0==this._selectionBeginIndex)return;e=this._iText.slice(0,this._selectionBeginIndex-1),n=this._iText.slice(this._selectionEndIndex,this._iText.length);this.text=e+n,this._selectionBeginIndex-=1,this._selectionEndIndex=this._selectionBeginIndex}else if("Delete"==t){e=this._iText.slice(0,this._selectionBeginIndex),n=this._iText.slice(this._selectionEndIndex+1,this._iText.length);this.text=e+n,this._selectionEndIndex=this._selectionBeginIndex}}},e.prototype.addChar=function(t,n,i,r){var o=this;void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=!1);var a=!1,s=this._iText;if(this._selectionBeginIndex||(this._selectionBeginIndex=0),this._selectionEndIndex||(this._selectionEndIndex=0),this._selectionEndIndex<this._selectionBeginIndex){var l=this._selectionEndIndex;this._selectionEndIndex=this._selectionBeginIndex,this._selectionBeginIndex=l}if(r||i)i&&!n&&"v"===t&&navigator.clipboard.readText&&navigator.clipboard.readText().then((function(t){o._insertNewText(t)})).catch((function(t){console.warn("[TextField] Can't paste text:",t.message)}));else{if("Backspace"==t||"Delete"==t)this.deleteSelectedText(t),a=!0;else if("ArrowRight"==t)n||this._selectionEndIndex==this._selectionBeginIndex?this._selectionEndIndex>this._selectionBeginIndex?(this._selectionEndIndex+=1,n||(this._selectionBeginIndex=this._selectionEndIndex)):(this._selectionBeginIndex+=1,n||(this._selectionEndIndex=this._selectionBeginIndex)):this._selectionEndIndex>this._selectionBeginIndex?this._selectionBeginIndex=this._selectionEndIndex:this._selectionEndIndex=this._selectionBeginIndex,a=!0;else if("ArrowLeft"==t)n||this._selectionEndIndex==this._selectionBeginIndex?this._selectionEndIndex>this._selectionBeginIndex?(this._selectionBeginIndex-=1,n||(this._selectionEndIndex=this._selectionBeginIndex)):(this._selectionEndIndex-=1,n||(this._selectionBeginIndex=this._selectionEndIndex)):this._selectionEndIndex>this._selectionBeginIndex?this._selectionEndIndex=this._selectionBeginIndex:this._selectionBeginIndex=this._selectionEndIndex,a=!0;else if("Enter"==t&&this.multiline)this._insertNewText("\n"),a=!0;else if(1==t.length){if(this._restrictRegex){var u=t.replace(this._restrictRegex,"");if(u.length<t.length){var c=t.toUpperCase().replace(this._restrictRegex,""),h=t.toLowerCase().replace(this._restrictRegex,"");t=c,c.length<h.length&&(t=h),u.length>t.length&&(t=u)}if(""==t)return}if(this._newTextFormat.font_table){var p=this._newTextFormat.font_table,d=t.charCodeAt(0).toString(),f=!1;if(!(f=(f=(f=f||p.hasChar(d))||p.hasChar(d.toLowerCase()))||p.hasChar(d.toUpperCase())))return void console.log("Char not found",d)}this._insertNewText(t),a=!0}else t.length>1&&console.log("invalid keyboard input: ",t);a&&(this._glyphsDirty=!0,this.invalidate(),s!==this._iText&&this.dispatchEvent(e._onChangedEvent))}if(t&&t.length>0&&this.adapter!=this){var _=void 0;switch(t){case"Backspace":_=8;break;case"Delete":_=46;break;case"ArrowRight":_=39;break;case"ArrowLeft":_=37;break;case".":_=189;break;default:_=t.charCodeAt(0)}this.adapter.dispatchKeyEvent(_,n,i,r)}},e.prototype._insertNewText=function(t){if(this._selectionBeginIndex!=this._selectionEndIndex){var e=this._iText.slice(0,this._selectionBeginIndex),n=this._iText.slice(this._selectionEndIndex,this._iText.length);if(this.maxChars>0&&e.length+n.length+t.length>this.maxChars){var i=this.maxChars-e.length+n.length;i>0&&(t=t.slice(0,i))}this.text=e+t+n,this._textShapesDirty=!0,this._selectionBeginIndex+=1,this._selectionEndIndex=this._selectionBeginIndex}else if(this.maxChars>0&&this._iText.length>=this.maxChars);else{e=this._iText.slice(0,this._selectionBeginIndex),n=this._iText.slice(this._selectionEndIndex,this._iText.length);this.text=e+t+n,this._textShapesDirty=!0,this._selectionBeginIndex+=1,this._selectionEndIndex=this._selectionBeginIndex}},e.prototype.clone=function(){var t=e.getNewTextField();return this.copyTo(t),t},e.prototype.copyTo=function(e){t.prototype.copyTo.call(this,e),e.autoSize=this.autoSize,e.type=this._type,e.html=this.html,e.width=this._width,e.height=this._height,e.newTextFormat=this._newTextFormat.clone(),e.textColor=this._textColor,e.border=this._border,e.borderColor=this._borderColor,e.background=this._background,e.backgroundColor=this._backgroundColor,e.textOffsetX=this.textOffsetX,e.textOffsetY=this.textOffsetY,e.staticMatrix=this.staticMatrix,e.selectable=this._selectable,e.multiline=this.multiline,e.wordWrap=this.wordWrap,e.maxChars=this.maxChars,e.sourceTextField=this,e.html?e.htmlText=this.htmlText:e.text=this.text,this._labelData&&e.setLabelData(this._labelData)},e.prototype._clearTextShapes=function(){var t;for(var e in this._textShapesDirty=!1,this._lastWordsCount=0,this.targetGraphics&&this.targetGraphics.clear(),this.textShapes)(t=this.textShapes[e]).shape&&t.shape.dispose(),t.shape=null,t.elements=null,t.length=0,delete this.textShapes[e]},e._textFields=[],e.assetType="[asset TextField]",e._onChangedEvent=new Yc(Yc.CHANGED),e}(Js),Ih=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.clone=function(){var t=new e(this.type);return t.view=this.view,t.entity=this.entity,t},e.prototype._dispatchEvent=function(t){t.container.dispatchEvent(this),_l.execute_queue()},e.FOCUS_IN="focusIn3d",e.FOCUS_OUT="focusOut3d",e}(c),Eh=function(t){function e(e){var n=t.call(this,e)||this;return n.touchPointID=0,n}return o(e,t),e.prototype.clone=function(){var t=new e(this.type);return t.screenX=this.screenX,t.screenY=this.screenY,t.view=this.view,t.containerNode=this.containerNode,t.rootNode=this.rootNode,t.traversable=this.traversable,t.material=this.material,t.uv=this.uv,t.position=this.position,t.normal=this.normal,t.elementIndex=this.elementIndex,t.touchPointID=this.touchPointID,t.ctrlKey=this.ctrlKey,t.shiftKey=this.shiftKey,t._iParentEvent=this,t._iAllowedToPropagate=this._iAllowedToPropagate,t},e.prototype._dispatchEvent=function(t,n){t.isMouseDisabled()&&this.type!=e.TOUCH_OUT&&this.type!=e.TOUCH_ROLL_OUT||(t.container.dispatchEvent(this,n),_l.execute_queue())},e.TOUCH_OVER="touchOver3d",e.TOUCH_OUT="touchOut3d",e.TOUCH_ROLL_OVER="touchRollOver3d",e.TOUCH_ROLL_OUT="touchRollOut3d",e.TOUCH_END="touchUp3d",e.TOUCH_BEGIN="touchDown3d",e.TOUCH_MOVE="touchMove3d",e.TOUCH_TAP="tap3d",e}(gl),wh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.awaySymbols={},e}return o(e,t),e.prototype.createMovieClip=function(t,e){return void 0===t&&(t=null),new yl(t||new rl(this))},e.prototype.createSprite=function(t,e,n){return void 0===t&&(t=null),t?t.getNewObject():new Zs},e.prototype.createDisplayObjectContainer=function(t){return new Js},e.prototype.createTextField=function(t){return new Ch},e.prototype.createBillboard=function(t,e){return new ol(t)},e.prototype.createMaterial=function(t,e,n){return new Sc(t,e)},e.prototype.createFrameScripts=function(t,e,n,i){throw"[DefaultSceneGraphFactory] - createFrameScripts should be overwritten by AVM"},e.prototype.createChildInstanceForTimeline=function(t,e,n){throw"[DefaultSceneGraphFactory] - createChildInstanceForTimeline should be overwritten by AVM"},e}(Oi),Sh=new O(0,0),Dh=function(t){function e(e,n,i,r,o,a){void 0===i&&(i=!0),void 0===r&&(r=4294967295),void 0===o&&(o=!0),void 0===a&&(a=null);var s=t.call(this,e,n,i,null,o,a)||this;return s._initalFillColor=null,s._lastUsedFill=null,s._internalSync=!1,s._msaaNeedDrop=!1,s._enforceMSAASupport=!1,s._antialiasQuality=Ks.ALLOW_FORCE_MSAA,s._clearFromDispose=!1,s._initalFillColor=r,s._lastUsedFill=r,s}return o(e,t),e.getImage=function(t,n,i,r,o,a,s){void 0===i&&(i=!0),void 0===r&&(r=4294967295),void 0===o&&(o=!0),void 0===a&&(a=null),void 0===s&&(s=!1);var l=new e(t,n,i,r,o,a);return s?l._enforceMSAASupport=!0:(l._msaaNeedDrop=!0,l._antialiasQuality=0),l},e.tryStoreImage=function(t,e){e.filterManager.pushTemp(t)},e.getTemp=function(t,e,n,i){void 0===i&&(i=!1);var r=n.filterManager.popTemp(t,e,i&&Ks.ALLOW_FORCE_MSAA>1);return r.antialiasQuality=i?Ks.ALLOW_FORCE_MSAA:0,r},e.prototype._dropMSAA=function(){!this._msaaNeedDrop&&this.canUseMSAAInternaly&&(this._enforceMSAASupport=!1,this._msaaNeedDrop=!0,this.wasUpload&&t.prototype.unload.call(this),console.debug("[SceneImage2D Experemental] Drop MSAA support because a setPixel* operation called after upload.",this.id))},Object.defineProperty(e.prototype,"canUseMSAAInternaly",{get:function(){if(this._enforceMSAASupport)return!0;var t=Ks.MSAA_MINIMAL_IMAGE_SIZE,e=Ks.MSAA_MINIMAL_IMAGE_SIZE;return this._stage&&(e=Math.min(this._stage.height,e),t=Math.min(this._stage.width,t)),this.width>=t&&this.height>=e&&!this._msaaNeedDrop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"antialiasQuality",{get:function(){return this.canUseMSAAInternaly?this._antialiasQuality:0},enumerable:!1,configurable:!0}),e.prototype.syncData=function(t){var e=this;if(void 0===t&&(t=!1),t&&this._asyncRead)return this._asyncRead;if(!t&&this._asyncRead)throw"[SceneImage2D] Synced read not allowed while async read is requested!";if(this.applySymbol(),!this._imageDataDirty)return!!t&&Promise.resolve(!1);var n=this._stage.context;return this._stage.setRenderTarget(this,!1),this._data||(this._data=new Uint8ClampedArray(this.width*this.height*4)),this._internalSync=!0,this._asyncRead=n.drawToBitmapImage2D(this,!1,t),this._internalSync=!1,this._stage.setRenderTarget(null),t?this._asyncRead.then((function(t){return e._imageDataDirty=!1,e._unpackPMA=!1,e._asyncRead=null,!0})):(this._imageDataDirty=!1,this._unpackPMA=!1,!0)},e.prototype.getDataInternal=function(e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!1),!n&&this._imageDataDirty&&!this._internalSync)return this.syncData(!1),this._data;if(null===this._initalFillColor)return t.prototype.getDataInternal.call(this,e,!0);var i=t.prototype.getDataInternal.call(this,!1,!0);return i||(t.prototype.fillRect.call(this,this.rect,this._initalFillColor),this._initalFillColor=null,this._data)},Object.defineProperty(e.prototype,"assetType",{get:function(){return e.assetType},enumerable:!1,configurable:!0}),e.prototype.createRenderer=function(){var t=new xt;t.coordinateSystem=gt.RIGHT_HANDED,t.originX=-1,t.originY=1,t.transform=new V,t.transform.scaleTo(1,-1,1),t.transform.moveTo(0,0,-1e3),e._view=new gr(t,this._stage),e._root=new Js,e._rootNode=e._view.getNode(e._root),e._renderer=no.getInstance(yo).getRenderer(e._rootNode.partition),e._view.backgroundAlpha=0,e._view.backgroundColor=0,e._renderer.disableClear=!0,e._renderer.renderableSorter=null},e.prototype.createBillboardRenderer=function(){var t=new xt;t.coordinateSystem=gt.RIGHT_HANDED,t.originX=-1,t.originY=1,t.transform=new V,t.transform.moveTo(0,0,-1e3),t.transform.lookAt(new L),e._billboardView=new gr(t,this._stage),e._billboardRoot=new Js,e._billboardRenderer=no.getInstance(yo).getRenderer(e._billboardView.getNode(e._billboardRoot).partition),e._billboardView.backgroundAlpha=0,e._billboardView.backgroundColor=0,e._billboardRenderer.disableClear=!0,e._billboardRenderer.renderableSorter=null;var n=new Sc(new Le(128,128,!0,0));n.bothSides=!0,n.alphaBlending=!0,e._billboard=new ol(n),e._billboard.style=new Gr,e._billboardRoot.addChild(e._billboard)},e.prototype.dispose=function(){this._clearFromDispose=!0,this.dropAllReferences(),this.unmarkToUnload(),this.unuseWeakRef(),this._data=null,this._locked=!1,t.prototype.dispose.call(this),this._clearFromDispose=!1},e.prototype.unload=function(){var e=this,n=this.syncData(!0);"boolean"==typeof n?t.prototype.unload.call(this):n.then((function(){return t.prototype.unload.call(e)}))},e.prototype.deepClone=function(t){this.copyPixels(t,this._rect,new O(0,0))},e.prototype.fillRect=function(t,e){this.dropAllReferences();var n=D.float32ColorToARGB(e),i=this._transparent?n[0]/255:1,r=t!==this._rect&&!this._rect.equals(t);this._stage.setRenderTarget(this,!0,0,0,!0),this._stage.setScissor(t),this._lastUsedFill=r?null:e,this._stage.clear(n[1]/255*i,n[2]/255*i,n[3]/255*i,i),this._stage.setScissor(null),this._imageDataDirty=!0},e.prototype.copyPixels=function(t,e,n,i,r,o){if(this._lastUsedFill=null,this.dropAllReferences(),this.unmarkToUnload(),o=this.transparent!==t.transparent||o,!t._imageDataDirty&&e.equals(this._rect)&&this._rect.equals(t.rect)&&!o&&(!this.wasUpload||!t.wasUpload)){var a=t.getDataInternal(!0);return this._data?this._data.set(a):this._data=a.slice(),this._unpackPMA=t._unpackPMA,this._initalFillColor=null,this._imageDataDirty=!1,void this.invalidateGPU()}t.width,t.height,Ks.CPU_COPY_PIXELS_COUNT,null!==this._initalFillColor&&(this.fillRect(this._rect,this._initalFillColor),this._initalFillColor=null);var s=t;i&&(s=this._stage.filterManager.popTemp(t.width,t.height),this._stage.filterManager.copyPixels(i,s,new W(r.x,r.y,e.width,e.height),new O(0,0)),this._stage.filterManager.copyPixels(t,s,t.rect,new O(0,0),!0,"alpha_back")),this._stage.filterManager.copyPixels(s,this,e,n,o),i&&this._stage.filterManager.pushTemp(s),this._imageDataDirty=!0},e.prototype.threshold=function(t,e,n,i,r,o,a,s){this._lastUsedFill=null,this.dropAllReferences(),this.unmarkToUnload(),this._stage.threshold(t,this,e,n,i,r,o,a,s),this._imageDataDirty=!0},e.prototype.applyFilter=function(t,e,n,i){if(!Ks.USE_UNSAFE_FILTERS||!i||!i.filterName)return!1;this.dropAllReferences(!1);var r=this._stage.filterManager.applyFilter(t,this,e,n,i.filterName,i);return this._imageDataDirty=r,r},e.prototype.colorTransform=function(t,e){this.dropAllReferences(),this.unmarkToUnload(),this._lastUsedFill=null,this._stage.colorTransform(this,this,t,e),this._imageDataDirty=!0},e.prototype.setPixel=function(e,n,i){this.canUseMSAAInternaly&&this._dropMSAA(),t.prototype.setPixel.call(this,e,n,i)},e.prototype.setPixel32=function(e,n,i){this.canUseMSAAInternaly&&this._dropMSAA(),t.prototype.setPixel32.call(this,e,n,i)},e.prototype.setPixels=function(e,n){this.wasUpload&&this.canUseMSAAInternaly&&this._dropMSAA(),t.prototype.setPixels.call(this,e,n)},e.prototype.clear=function(){var e=this;if(this._clearFromDispose)t.prototype.clear.call(this);else{var n=this.syncData(!0);if(this.unmarkToUnload(),this.lastUsedTime=-1,"boolean"==typeof n)return this.wasUpload=!1,void t.prototype.clear.call(this);n.then((function(){e.wasUpload=!1,t.prototype.clear.call(e)}))}},e.prototype.getPixel32=function(e,n){return this.syncData(),t.prototype.getPixel32.call(this,e,n)},e.prototype.getPixel=function(t,e){return 16777215&this.getPixel32(t,e)},e.prototype.draw=function(t,e,n,i,r,o){this.dropAllReferences(),this.unmarkToUnload(),t instanceof Ws?this._drawAsDisplay(t,e,n,i,r,o):this._drawAsBitmap(t,e,n,i,r,o),this._lastUsedFill=null,this._imageDataDirty=!0,this.invalidate()},e._mapSupportedBlendMode=function(t){switch(void 0===t&&(t=""),t){case null:case"":case ze.NORMAL:case ze.LAYER:return ze.LAYER;case ze.MULTIPLY:case ze.ADD:case ze.ALPHA:return t}return ze.LAYER},e.prototype._drawAsBitmap=function(t,n,i,r,o,a){e._billboardRenderer||this.createBillboardRenderer(),null!==this._initalFillColor&&(this.fillRect(this._rect,this._initalFillColor),this._initalFillColor=null);var s=this._stage,l=e._mapSupportedBlendMode(r),u=!(!r||l!==ze.LAYER||r==ze.LAYER)||this===t,c=u?s.filterManager.popTemp(this.width,this.height,!1):this,h=e._billboardRenderer,p=e._billboardRoot,d=e._billboard;if(d.sampler.smooth=a,h.disableClear=!u,h.view.target=c,h.view.projection.scale=1e3/c.height,d.material.style.image=t,d.material.blendMode=u?ze.LAYER:e._mapSupportedBlendMode(r),d.material.useColorTransform=!!i,n){var f=p.transform.matrix3D;f.identity(),f._rawData[0]=n.a,f._rawData[1]=-n.b,f._rawData[4]=n.c,f._rawData[5]=-n.d,f._rawData[12]=n.tx,f._rawData[13]=c.height-n.ty,p.transform.invalidateComponents()}else p.transform.rotateTo(0,0,0),p.transform.scaleTo(1,-1,1),p.transform.moveTo(0,c.height,0);p.transform.colorTransform=i,h.render(),u&&(s.filterManager.copyPixels(c,this,this.rect,Sh,!0,r),s.filterManager.pushTemp(c))},e.prototype._drawAsDisplay=function(t,n,i,r,o,a){void 0===r&&(r=""),r=r||ze.LAYER,e._renderer||this.createRenderer();var s=e._root,l=e._rootNode,u=e._renderer,c=this.canUseMSAAInternaly,h=!t.isAsset(ol)&&2===this._stage.context.glVersion&&Ks.ALLOW_FORCE_MSAA>1&&!c,p=this,d=r!==ze.LAYER||null===this._lastUsedFill,f=d||h;h&&!d||null===this._initalFillColor||(this.fillRect(this._rect,this._initalFillColor),this._initalFillColor=null),f&&(p=e.getTemp(this.width,this.height,this._stage,h),d||null===this._lastUsedFill?(u.disableClear=!1,u.view.backgroundColor=0,u.view.backgroundAlpha=0):(u.disableClear=!1,u.view.backgroundColor=16777215&this._lastUsedFill,u.view.backgroundAlpha=this._transparent?(this._lastUsedFill>>>24&255)/255:1));var _=u.view.projection.transform,g=_.matrix3D;if(g.identity(),n){var m=g._rawData;m[0]=n.a,m[1]=n.b,m[4]=n.c,m[5]=n.d,m[10]=1,m[12]=n.tx,m[13]=n.ty}g.appendScale(1,-1,1),g.appendTranslation(0,this._rect.height,1e3),g.invert(),_.matrix3D=g,u.antiAlias=(c?this.antialiasQuality:p.antialiasQuality)||0,u.view.target=p,u.view.projection.scale=1e3/this._rect.height,u.view.projection.ratio=this._rect.width/this._rect.height,u.view.x=-(p.width-this.width),u.view.y=-(p.height-this.height),u.view.width=this.width,u.view.height=this.height;var y=l.addChildAt(t,0),A=y.transformDisabled;y.transformDisabled=!0,y.colorTransformDisabled=!1,s.transform.colorTransform=i,s.blendMode=e._mapSupportedBlendMode(r),u.render(),u.antiAlias=0,u.disableClear=!0,l.removeChildAt(0),y.transformDisabled=A,f&&(this._stage.filterManager.copyPixels(p,this,this._rect,Sh,d,r),e.tryStoreImage(p,this._stage))},e.prototype.reset=function(){},e.prototype.clone=function(){var t=e.getImage(this.width,this.height,this.transparent,null,!1,this._stage,!1);return t.deepClone(this),t},e.assetType="[image SceneImage2D]",e}(Le);Pi.registerAbstraction(Re,Dh);var Th,Ph=function(){function t(t){this._pickerLookup=new Array,this._pointerDataArray={},this.allowKeyInput=!0,this._eventBubbling=!0,this._allowFocusOnUnfocusable=!0,this._cursorType="auto",this._nullVector=new L,this._dragOut=new ml(ml.DRAG_OUT),this._dragOver=new ml(ml.DRAG_OVER),this._dragMove=new ml(ml.DRAG_MOVE),this._dragStart=new ml(ml.DRAG_START),this._dragStop=new ml(ml.DRAG_STOP),this._focusIn=new Ih(Ih.FOCUS_IN),this._focusOut=new Ih(Ih.FOCUS_OUT),this._useSoftkeyboard=!1,this._isAVM1Dragging=!1,this._stage=t,this.onDoubleClick=this.onDoubleClick.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseWheel=this.onMouseWheel.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this._showCursor=!0;var e=this._stage.container;e.addEventListener("touchstart",this.onMouseDown),e.addEventListener("mousedown",this.onMouseDown),window.addEventListener("touchmove",this.onMouseMove),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),e.addEventListener("touchend",this.onMouseUp),e.addEventListener("mousewheel",this.onMouseWheel),e.addEventListener("mouseover",this.onMouseOver),e.addEventListener("mouseout",this.onMouseOut),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),e.addEventListener("contextmenu",(function(t){return t.preventDefault()}))}return t.prototype.startDragObject=function(t,e){void 0===e&&(e=!1),this._isAVM1Dragging=e,t&&(this._pointerDataArray[0].dragCollision=t)},t.prototype.stopDragObject=function(){this._isAVM1Dragging=!1},Object.defineProperty(t.prototype,"showCursor",{get:function(){return this._showCursor},set:function(t){this._showCursor=t,this.cursorType=this._cursorType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursorType",{get:function(){return this._cursorType},set:function(t){this._cursorType=t,this._stage.container.style.cursor=this._showCursor?t:"none"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eventBubbling",{get:function(){return this._eventBubbling},set:function(t){this._eventBubbling=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useSoftkeyboard",{get:function(){return this._useSoftkeyboard},set:function(t){this._useSoftkeyboard=t,t?t&&(window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)):(window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp))},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t=this._stage.container;t.removeEventListener("dblclick",this.onDoubleClick),t.removeEventListener("touchstart",this.onMouseDown),t.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("touchmove",this.onMouseMove),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("touchend",this.onMouseUp),t.removeEventListener("wheel",this.onMouseWheel),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),this._stage=null,this._dragOut=null,this._dragOver=null,this._dragMove=null,this._dragStart=null,this._dragStop=null},t.clearInstance=function(t){this._instancePool[t.id]&&(this._instancePool[t.id].dispose(),delete this._instancePool[t.id])},t.getInstance=function(e){return this._instancePool[e.id]||(this._instancePool[e.id]=new t(e))},t.prototype.setFocus=function(t){this._focusNode!=t&&(this._allowFocusOnUnfocusable||this._focusNode.container.tabEnabled)&&(this._focusNode&&(this.dispatchEvent(this._focusOut,this._focusNode),this._focusNode.container.setFocus(!1,!0)),this._focusNode=t,this._focusNode&&(this.dispatchEvent(this._focusIn,this._focusNode),this._focusNode.container.setFocus(!0,!0)))},t.prototype.getFocus=function(){return this._focusNode},t.prototype.dispatchEvent=function(t,e){if(this._eventBubbling)for(var n=null==e?void 0:e.container;e;){if(t.commonAncestor&&e==t.commonAncestor)return;t._dispatchEvent(e,n),e=t._iAllowedToPropagate?e.parent:null}else e&&t._dispatchEvent(e,e.container)},t.prototype.setupAndDispatchEvent=function(t,e,n,i){void 0===i&&(i=null);var r=e.sourceEvent;r&&(t instanceof ml&&(t.delta=r.deltaY,t.buttons=r.buttons),t.ctrlKey=r.ctrlKey,t.altKey=r.altKey,t.shiftKey=r.shiftKey),t=this.setUpEvent(t,e,n,i),this.dispatchEvent(t,t.rootNode)},t.prototype.fireMouseEvents=function(t){if(void 0===t&&(t=null),t||this._updateDirty)for(var e in this._pointerDataArray)this._fireMouseEventsInternal(this._pointerDataArray[e],t)},t.prototype._fireMouseEventsInternal=function(t,e){var n,i,r,o,a,s;if(void 0===e&&(e=null),e)o=e.getViewCollision(t.screenX,t.screenY);else if(this._updateDirty)for(var l=0;l<this._pickerLookup.length;l++)o&&!this._pickerLookup[l].layeredView||(o=this._pickerLookup[l].getViewCollision(t.screenX,t.screenY,!1,o));var u=t.queuedEvents.length;for(l=0;l<u;++l)if(a=t.queuedEvents[l],s=null==o?void 0:o.rootNode,this.setUpEvent(a,t,o),a.type==t.down.type)this._eventBubbling||this._stage.dispatchEvent(a),t.isMouse||this.setupAndDispatchEvent(t.over,t,o),0==t.id&&(t.dragCollision=o),s?this.dispatchEvent(a,s):this._eventBubbling&&this._stage.dispatchEvent(a),t.dragCollision&&(this.setFocus(t.dragCollision.rootNode),this.setupAndDispatchEvent(this._dragStart,t,t.dragCollision));else if(a.type==t.up.type){this._eventBubbling||this._stage.dispatchEvent(a);var c=null,h=null;this._isAVM1Dragging&&t.dragCollision?(h=t.dragCollision.rootNode,c=t.dragCollision.containerNode):t.dragCollision&&t.dragCollision.rootNode!=s||t.dragCollision&&t.dragCollision.rootNode==s&&(h=t.dragCollision.rootNode,c=t.dragCollision.containerNode),h?this.dispatchEvent(a,h):this._eventBubbling&&s?this.dispatchEvent(a,s):this._eventBubbling&&this._stage.dispatchEvent(a),c?(this._isAVM1Dragging||this.setupAndDispatchEvent(t.click,t,t.dragCollision),this.setupAndDispatchEvent(this._dragStop,t,t.dragCollision)):t.dragCollision&&this.setupAndDispatchEvent(t.upOutside,t,t.dragCollision),t.dragCollision=null,this._isAVM1Dragging=!1,0!=t.id&&delete this._pointerDataArray[t.id]}else a.type==t.move.type?(this._eventBubbling||this._stage.dispatchEvent(a),s&&this.dispatchEvent(a,s),t.dragCollision&&this.setupAndDispatchEvent(this._dragMove,t,t.dragCollision),this._eventBubbling&&this._stage.dispatchEvent(a)):this.dispatchEvent(a,s);t.queuedEvents.length=0,t.rollOut.commonAncestor=null,t.rollOver.commonAncestor=null;var p=null==o?void 0:o.rootNode,d=null===(n=t.prevCollision)||void 0===n?void 0:n.rootNode;if(p!=d){if(d&&(this.setupAndDispatchEvent(t.out,t,t.prevCollision),(null===(i=t.dragCollision)||void 0===i?void 0:i.rootNode)==d&&this.setupAndDispatchEvent(this._dragOut,t,t.prevCollision)),!d&&p&&(this.setupAndDispatchEvent(t.rollOut,t,t.prevCollision),this.setupAndDispatchEvent(t.rollOver,t,o)),d&&!p&&(this.setupAndDispatchEvent(t.rollOut,t,t.prevCollision),this.setupAndDispatchEvent(t.rollOver,t,o)),d&&p){for(var f=[],_=d;_&&!_.container.isAVMScene;)f.push(_),_=_.parent;var g=null;for(_=p;_&&!_.container.isAVMScene;){-1==f.indexOf(_)?_=_.parent:(g=_,_=null)}g!=d&&this.setupAndDispatchEvent(t.rollOut,t,t.prevCollision,g),g!=p&&this.setupAndDispatchEvent(t.rollOver,t,o,g)}t.collisionIsEnabledButton=!!p&&p.buttonEnabled,p&&(this.setupAndDispatchEvent(t.over,t,o),t.dragCollision&&this.setupAndDispatchEvent(this._dragOver,t,o)),t.prevCollision=o}else{var m=!!p&&p.buttonEnabled;t.collisionIsEnabledButton!=m&&m&&(t.isMouse?this.setupAndDispatchEvent(t.over,t,o):(null===(r=t.dragCollision)||void 0===r?void 0:r.rootNode)==p&&this.setupAndDispatchEvent(this._dragOver,t,o)),t.collisionIsEnabledButton=m}t.dragCollision||(this.cursorType=p?p.container.getMouseCursor():"auto"),this._updateDirty=!1},t.prototype.registerPicker=function(t){this._pickerLookup.push(t)},t.prototype.unregisterPicker=function(t){this._pickerLookup.splice(this._pickerLookup.indexOf(t),1)},t.prototype.addEventsForSceneBinary=function(t,e){var n={clientX:null,clientY:null,touches:[],changedTouches:[],preventDefault:function(){}},i=new Float32Array(t),r=0,o=0;o++;var a=i[o++],s=i[o++],l=i[o++];if(1!=s&&6!=s&&12!=s&&262!=s&&518!=s){for(r=0;r<a;r++){(u={}).identifier=i[o++],u.clientX=i[o++],u.clientY=i[o++],n.touches[r]=u}n.changedTouches[0]=n.touches[l]}else{if(1==a)(u={}).identifier=i[o++],u.clientX=i[o++],u.clientY=i[o++],n.clientX=u.clientX,n.clientY=u.clientY;else for(r=0;r<a;r++){var u;(u={}).identifier=i[o++],u.clientX=i[o++],u.clientY=i[o++],r!=l?n.touches[0]=u:(n.clientX=u.clientX,n.clientY=u.clientY)}}0==s||5==s||11==s||261==s||517==s?this.onMouseDown(n):1==s||6==s||12==s||262==s||518==s?this.onMouseUp(n):2==s?this.onMouseMove(n):console.log("recieved unknown touch event-type: "+s)},t.prototype.fireEventsForSceneFromString=function(t,e){var n={clientX:null,clientY:null,preventDefault:function(){}},i=t.split(","),r=0,o=0,a=parseInt(i[o++]),s=parseInt(i[o++]),l=parseInt(i[o++]);if(n.touches=[],n.changedTouches=[],1!=s&&6!=s){for(r=0;r<a;r++){(u={}).identifier=i[o++],u.clientX=i[o++],u.clientY=i[o++],n.touches[r]=u,n.changedTouches[r]=u}n.changedTouches[r]=n.touches[l]}else for(r=0;r<a;r++){var u;if(r!=l)(u={}).identifier=i[o++],u.clientX=i[o++],u.clientY=i[o++],n.touches[r]=u,n.changedTouches[r]=u;else n.clientX=i[o++],n.clientY=i[o++],o++}0==s?this.onMouseDown(n):1==s?this.onMouseUp(n):2==s?this.onMouseMove(n):261==s?this.onMouseDown(n):6==s&&this.onMouseUp(n)},t.prototype.setUpEvent=function(t,e,n,i){var r,o;return void 0===i&&(i=null),t._iAllowedToImmediatlyPropagate=!0,t._iAllowedToPropagate=!0,t.screenX=e.screenX,t.screenY=e.screenY,t instanceof Eh&&(t.touchPointID=e.id),n?(t.containerNode=n.containerNode,t.rootNode=n.rootNode,t.traversable=n.traversable,t.uv=n.uv,t.position=null===(r=n.position)||void 0===r?void 0:r.clone(),t.normal=null===(o=n.normal)||void 0===o?void 0:o.clone(),t.elementIndex=n.elementIndex):(t.containerNode=null,t.rootNode=null,t.traversable=null,t.uv=null,t.position=this._nullVector,t.normal=this._nullVector,t.elementIndex=0),t.commonAncestor=i,t},t.prototype.queueDispatch=function(t,e,n){e instanceof ml&&(e.delta=n instanceof WheelEvent?-3*n.deltaY/100:0,e.buttons=n instanceof MouseEvent?n.buttons:0),e.ctrlKey=n.ctrlKey,e.altKey=n.altKey,e.shiftKey=n.shiftKey,t.queuedEvents.push(e),t.sourceEvent=n},t.prototype.onKeyDown=function(e){if(!t.inputRecorder||t.inputRecorder.recordEvent(e),this.allowKeyInput){switch(e.keyCode){case 32:case 37:case 39:case 38:case 40:e.preventDefault()}if(this._focusNode||this._stage){var n=new Xc(Xc.KEYDOWN,e.key,e.code);n.isShift=e.shiftKey,n.isCTRL=e.ctrlKey,n.isAlt=e.altKey,n.keyCode=e.keyCode,this._focusNode&&this._focusNode.container.dispatchEvent(n),this._stage&&this._stage.dispatchEvent(n)}}},t.prototype.onKeyUp=function(e){if(!t.inputRecorder||t.inputRecorder.recordEvent(e),this.allowKeyInput){switch(e.keyCode){case 32:case 37:case 39:case 38:case 40:e.preventDefault()}if(this._focusNode||this._stage){var n=new Xc(Xc.KEYUP,e.key,e.code);n.isShift=e.shiftKey,n.isCTRL=e.ctrlKey,n.isAlt=e.altKey,n.keyCode=e.keyCode,this._focusNode&&this._focusNode.container.dispatchEvent(n),this._stage&&this._stage.dispatchEvent(n)}}},t.prototype.onMouseMove=function(e){!t.inputRecorder||t.inputRecorder.recordEvent(e),this.updateColliders(e)},t.prototype.onMouseOut=function(e){!t.inputRecorder||t.inputRecorder.recordEvent(e),this.updateColliders(e)},t.prototype.onMouseOver=function(e){!t.inputRecorder||t.inputRecorder.recordEvent(e),this.updateColliders(e)},t.prototype.onDoubleClick=function(e){!t.inputRecorder||t.inputRecorder.recordEvent(e),this.updateColliders(e),e instanceof MouseEvent&&6&e.buttons&&e.preventDefault()},t.prototype.onMouseDown=function(e){!t.inputRecorder||t.inputRecorder.recordEvent(e),this.updateColliders(e);var n="mousedown"!==e.type;e instanceof MouseEvent&&6&e.buttons&&(n=!0),n&&(e.preventDefault(),this._stage.container.focus())},t.prototype.onMouseUp=function(e){!t.inputRecorder||t.inputRecorder.recordEvent(e),this.updateColliders(e);var n="mouseup"!==e.type;e instanceof MouseEvent&&1===e.button&&(n=!0),n&&(e.preventDefault(),this._stage.container.focus())},t.prototype.onMouseWheel=function(e){!t.inputRecorder||t.inputRecorder.recordEvent(e),this.updateColliders(e)},t.prototype.updateColliders=function(e){this._stage.interactionHandler(e),this._updateDirty=!0;var n=this._pointerDataArray[0]||(this._pointerDataArray[0]=new Bh(0,!0));n.isMouse=e instanceof MouseEvent;var i=n.isMouse?e.type:t._touchToMouseDict[e.type];if(this.queueDispatch(n,t._pointerDict[i],e),n.screenX=this._stage.screenX,n.screenY=this._stage.screenY,e.changedTouches)for(var r=0;r<e.changedTouches.length;r++){var o=e.changedTouches[r],a=this._pointerDataArray[o.identifier]||(this._pointerDataArray[o.identifier]=new Bh(o.identifier)),s=this._stage.mapWindowToStage(o.clientX,o.clientY);a.screenX=s.x,a.screenY=s.y,this.queueDispatch(a,t._pointerDict[e.type],e)}},t._instancePool={},t._touchToMouseDict={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"},t._pointerDict={mouseup:new ml(ml.MOUSE_UP),mouseupoutside:new ml(ml.MOUSE_UP_OUTSIDE),click:new ml(ml.CLICK),mouseout:new ml(ml.MOUSE_OUT),mousedown:new ml(ml.MOUSE_DOWN),mousemove:new ml(ml.MOUSE_MOVE),mouseover:new ml(ml.MOUSE_OVER),mousewheel:new ml(ml.MOUSE_WHEEL),dblclick:new ml(ml.DOUBLE_CLICK),rollover:new ml(ml.ROLL_OVER),rollout:new ml(ml.ROLL_OUT),touchend:new Eh(Eh.TOUCH_END),touchtap:new Eh(Eh.TOUCH_TAP),touchout:new Eh(Eh.TOUCH_OUT),touchstart:new Eh(Eh.TOUCH_BEGIN),touchmove:new Eh(Eh.TOUCH_MOVE),touchover:new Eh(Eh.TOUCH_OVER),touchrollover:new Eh(Eh.TOUCH_ROLL_OVER),touchrollout:new Eh(Eh.TOUCH_ROLL_OUT)},t}(),Bh=function(){return function(t,e){void 0===e&&(e=!1),this.id=t,this.isMouse=e,this.collisionIsEnabledButton=!1,this.queuedEvents=new Array,e?(this.up=Ph._pointerDict.mouseup,this.upOutside=Ph._pointerDict.mouseupoutside,this.click=Ph._pointerDict.click,this.out=Ph._pointerDict.mouseout,this.down=Ph._pointerDict.mousedown,this.move=Ph._pointerDict.mousemove,this.over=Ph._pointerDict.mouseover,this.wheel=Ph._pointerDict.mousewheel,this.doubleClick=Ph._pointerDict.dblclick,this.rollOver=Ph._pointerDict.rollover,this.rollOut=Ph._pointerDict.rollout):(this.up=Ph._pointerDict.touchend,this.click=Ph._pointerDict.touchtap,this.out=Ph._pointerDict.touchout,this.down=Ph._pointerDict.touchstart,this.move=Ph._pointerDict.touchmove,this.over=Ph._pointerDict.touchover,this.rollOver=Ph._pointerDict.touchrollover,this.rollOut=Ph._pointerDict.touchrollout)}}();us.materialClass=Sc,console.debug("AwayJS - Scene - 0.13.277"),function(t){t[t.None=0]="None",t[t.Deflate=1]="Deflate",t[t.LZMA=2]="LZMA"}(Th||(Th={}));var Oh,Mh=function(){function t(){this.hash="",this.compression=Th.None,this.swfVersion=0,this.useAVM1=!0,this.backgroundColor=4294967295,this.bounds=null,this.frameRate=0,this.frameCount=0,this.attributes=null,this.sceneAndFrameLabelData=null,this.bytesLoaded=0,this.bytesTotal=length,this.pendingUpdateDelays=0,this.framesLoaded=0}return t.prototype.mapSWFVersionToFPVersion=function(){var t={6:"FP6",7:"FP7",8:"FP8",9:"FP9",10:"FP10",11:"FP10_2",12:"FP10_3",13:"FP11_0",14:"FP11_1",15:"FP11_2",16:"FP11_3",17:"FP11_4",18:"FP11_5",19:"FP11_6",20:"FP11_7",21:"FP11_8",22:"FP11_9",23:"FP12",24:"FP13",25:"FP14",26:"FP15",27:"FP16",28:"FP17",29:"FP18",30:"FP19",31:"FP20",32:"FP21",33:"FP22",34:"FP23",35:"FP24",36:"FP25",37:"FP26",38:"FP27",39:"FP28",40:"FP29",41:"FP30",42:"FP31"};this.fpVersion=t[this.swfVersion]?t[this.swfVersion]:"unmappedSWFVersion:"+this.swfVersion},t}();!function(t){t.AVM1="AVM1",t.AVM2="AVM2"}(Oh||(Oh={}));var Lh=function(t){function e(e,n){var i=t.call(this,e)||this;return i._avmVersion=n,i}return o(e,t),Object.defineProperty(e.prototype,"avmVersion",{get:function(){return this._avmVersion},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._avmVersion)},e.AVM_COMPLETE="avmComplete",e}(c),Rh=Function("return this")();function Nh(t,e,n){return Math.max(e,Math.min(n,t))}function Fh(t){return"string"==typeof t?'"'+t+'"':"number"==typeof t||"boolean"==typeof t?String(t):t instanceof Array?"[] "+t.length:typeof t}function kh(t){for(var e=new Uint8Array(4*t.length),n=0,i=0,r=t.length;i<r;i++){var o=t.charCodeAt(i);if(o<=127)e[n++]=o;else{if(55296<=o&&o<=56319){var a=t.charCodeAt(i+1);56320<=a&&a<=57343&&(o=((1023&o)<<10)+(1023&a)+65536,++i)}4292870144&o?(e[n++]=248|o>>>24&3,e[n++]=128|o>>>18&63,e[n++]=128|o>>>12&63,e[n++]=128|o>>>6&63,e[n++]=128|63&o):4294901760&o?(e[n++]=240|o>>>18&7,e[n++]=128|o>>>12&63,e[n++]=128|o>>>6&63,e[n++]=128|63&o):4294965248&o?(e[n++]=224|o>>>12&15,e[n++]=128|o>>>6&63,e[n++]=128|63&o):(e[n++]=192|o>>>6&31,e[n++]=128|63&o)}}return e.slice(0,n)}function Uh(t){for(var e=0,n="";e<t.length;){var i=255&t[e++];if(i<=127)n+=String.fromCharCode(i);else{var r=192,o=5;do{if((i&(r>>1|128))===r)break;r=r>>1|128,--o}while(o>=0);if(o<=0){n+=String.fromCharCode(i);continue}for(var a=i&(1<<o)-1,s=!1,l=5;l>=o;--l){var u=t[e++];if(128!=(192&u)){s=!0;break}a=a<<6|63&u}if(s){for(var c=e-(7-l);c<e;++c)n+=String.fromCharCode(255&t[c]);continue}n+=a>=65536?String.fromCharCode(a-65536>>10&1023|55296,1023&a|56320):String.fromCharCode(a)}}return n}var Vh=self.TextEncoder?new self.TextEncoder:null,jh=self.TextDecoder?new self.TextDecoder:null;function Gh(t){for(var e="",n=0;n<t.length;n+=5120){var i=Math.min(t.length-n,5120);e+=String.fromCharCode.apply(null,t.subarray(n,n+i))}return e}var Qh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_";function zh(t){return t>=65&&t<=90?t-65:t>=97&&t<=122?t-71:t>=48&&t<=57?t+4:36===t?62:95===t?63:void 0}var Hh=new Array(3),Xh=new Array(4),Yh=new Array(9);var qh={repeatString:function(t,e){for(var n="",i=0;i<e;i++)n+=t;return n},memorySizeToString:function(t){var e=1024,n=e*e;return(t|=0)<e?t+" B":t<n?(t/e).toFixed(2)+"KB":(t/n).toFixed(2)+"MB"},toSafeString:Fh,toSafeArrayString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(Fh(t[n]));return e.join(", ")},utf8decode:function(t){if(!Vh)return kh(t);try{return Vh.encode(t)}catch(e){return kh(t)}},utf8encode:function(t){if(!jh)return Uh(t);try{return jh.decode(t)}catch(e){return Uh(t)}},base64EncodeBytes:function(t){return self.btoa(Gh(t))},base64DecodeMap:[62,0,0,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,0,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],base64DecodeMapOffset:43,base64EOF:61,decodeRestrictedBase64ToBytes:function(t){for(var e=window.atob(t),n=e.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.charCodeAt(r);return i},escapeString:function(t){return void 0!==t&&(t=t.replace(/[^\w$]/gi,"$"),/^\d/.test(t)&&(t="$"+t)),t},fromCharCodeArray:Gh,variableLengthEncodeInt32:function(t){for(var e=Qh,n=32-Math.clz32(t),i=Math.ceil(n/6),r=e[i],o=i-1;o>=0;o--){r+=e[t>>6*o&63]}return r},toEncoding:function(t){return Qh[t]},fromEncoding:zh,variableLengthDecodeInt32:function(t){for(var e=zh(t.charCodeAt(0)),n=0,i=0;i<e;i++){var r=6*(e-i-1);n|=zh(t.charCodeAt(1+i))<<r}return n},trimMiddle:function(t,e){if(t.length<=e)return t;var n=e>>1,i=e-n-1;return t.substr(0,n)+"…"+t.substr(t.length-i,i)},multiple:function(t,e){for(var n="",i=0;i<e;i++)n+=t;return n},indexOfAny:function(t,e,n){for(var i=t.length,r=0;r<e.length;r++){var o=t.indexOf(e[r],n);o>=0&&(i=Math.min(i,o))}return i===t.length?-1:i},_concat3array:Hh,_concat4array:Xh,_concat9array:Yh,concat3:function(t,e,n){return Hh[0]=t,Hh[1]=e,Hh[2]=n,Hh.join("")},concat4:function(t,e,n,i){return Xh[0]=t,Xh[1]=e,Xh[2]=n,Xh[3]=i,Xh.join("")},concat9:function(t,e,n,i,r,o,a,s,l){return Yh[0]=t,Yh[1]=e,Yh[2]=n,Yh[3]=i,Yh[4]=r,Yh[5]=o,Yh[6]=a,Yh[7]=s,Yh[8]=l,Yh.join("")}};function Kh(t){return function(t){return t/256}(function(t){return 256*t<<16>>16}(t))}function Wh(t){return t<<16>>16}new Int8Array(new Int32Array([1]).buffer)[0],Math.imul||(Math.imul=function(t,e){var n=65535&t,i=65535&e;return n*i+((t>>>16&65535)*i+n*(e>>>16&65535)<<16>>>0)|0}),Math.clz32||(Math.clz32=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,32-function(t){return 16843009*((t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135)>>24}(t|=t>>16)});var Jh="undefined"!=typeof window&&"document"in window&&"plugins"in window.document;"undefined"!=typeof navigator&&navigator.userAgent.indexOf("Firefox"),Rh.performance||(Rh.performance={}),Rh.performance.now||(Rh.performance.now=function(){return Date.now()}),performance.now();var Zh=10,$h=429496729,tp=5;function ep(t){return"number"==typeof t}function np(t){return"object"==typeof t||"function"==typeof t}function ip(t){return+t}function rp(t){if("number"==typeof t)return!0;if("string"==typeof t){var e=t.charCodeAt(0);return!(65<=e&&e<=90||97<=e&&e<=122||36===e||95===e)&&(op(t)||function(t){return String(Number(t))===t}(t))}return!1}function op(t){var e=0;if("number"==typeof t)return t===(e=0|t)&&e>=0||t>>>0===t;if("string"!=typeof t)return!1;var n=t.length;if(0===n)return!1;if("0"===t)return!0;if(n>Zh)return!1;var i=0;if((e=t.charCodeAt(i++)-48)<1||e>9)return!1;for(var r=0,o=0;i<n;){if((o=t.charCodeAt(i++)-48)<0||o>9)return!1;r=e,e=10*e+o}return r<$h||r===$h&&o<=tp}function ap(t){return null==t}!function(){if("function"!=typeof Rh.WeakMap){var t=0;e.prototype={has:function(t){return t.hasOwnProperty(this.id)},get:function(t,e){return t.hasOwnProperty(this.id)?t[this.id]:e},set:function(t,e){Object.defineProperty(t,this.id,{value:e,enumerable:!1,configurable:!0})},delete:function(t){delete t[this.id]}},Rh.WeakMap=e}function e(){this.id="$weakmap"+t++}}();var sp,lp=function(){function t(e,n){void 0===e&&(e=!1),this._tab="  ",this._padding="",this._suppressOutput=e,this._out=n||t._consoleOut,this._outNoNewline=n||t._consoleOutNoNewline}return Object.defineProperty(t.prototype,"suppressOutput",{get:function(){return this._suppressOutput},set:function(t){this._suppressOutput=t},enumerable:!1,configurable:!0}),t.prototype.write=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1),this._suppressOutput||this._outNoNewline((e?this._padding:"")+t)},t.prototype.writeLn=function(t){void 0===t&&(t=""),this._suppressOutput||this._out(this._padding+t)},t.prototype.writeObject=function(t,e){void 0===t&&(t=""),this._suppressOutput||this._out(this._padding+t,e)},t.prototype.writeTimeLn=function(t){void 0===t&&(t=""),this._suppressOutput||this._out(this._padding+performance.now().toFixed(2)+" "+t)},t.prototype.writeComment=function(t){var e=(t||"").split("\n");if(1===e.length)this.writeLn("// "+e[0]);else{this.writeLn("/**");for(var n=0;n<e.length;n++)this.writeLn(" * "+e[n]);this.writeLn(" */")}},t.prototype.writeLns=function(t){for(var e=(t||"").split("\n"),n=0;n<e.length;n++)this.writeLn(e[n])},t.prototype.errorLn=function(e){1&t.logLevel&&this.boldRedLn(e)},t.prototype.warnLn=function(e){2&t.logLevel&&this.yellowLn(e)},t.prototype.debugLn=function(e){4&t.logLevel&&this.purpleLn(e)},t.prototype.logLn=function(e){8&t.logLevel&&this.writeLn(e)},t.prototype.infoLn=function(e){16&t.logLevel&&this.writeLn(e)},t.prototype.yellowLn=function(e){this.colorLn(t.YELLOW,e)},t.prototype.greenLn=function(e){this.colorLn(t.GREEN,e)},t.prototype.boldRedLn=function(e){this.colorLn(t.BOLD_RED,e)},t.prototype.redLn=function(e){this.colorLn(t.RED,e)},t.prototype.purpleLn=function(e){this.colorLn(t.PURPLE,e)},t.prototype.colorLn=function(e,n){this._suppressOutput||(Jh?this._out(this._padding+n):this._out(this._padding+e+n+t.ENDC))},t.prototype.redLns=function(e){this.colorLns(t.RED,e)},t.prototype.colorLns=function(t,e){for(var n=(e||"").split("\n"),i=0;i<n.length;i++)this.colorLn(t,n[i])},t.prototype.enter=function(t){this._suppressOutput||this._out(this._padding+t),this.indent()},t.prototype.leaveAndEnter=function(t){this.leave(t),this.indent()},t.prototype.leave=function(t){this.outdent(),!this._suppressOutput&&t&&this._out(this._padding+t)},t.prototype.indent=function(){this._padding+=this._tab},t.prototype.outdent=function(){this._padding.length>0&&(this._padding=this._padding.substring(0,this._padding.length-this._tab.length))},t.prototype.writeArray=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),e=e||!1;for(var i=0,r=t.length;i<r;i++){var o="";e&&(o=null===t[i]?"null":void 0===t[i]?"undefined":t[i].constructor.name,o+=" ");var a=n?"":(""+i).padRight(" ",4);this.writeLn(a+o+t[i])}},t.PURPLE="33[94m",t.YELLOW="33[93m",t.GREEN="33[92m",t.RED="33[91m",t.BOLD_RED="33[1;91m",t.ENDC="33[0m",t.logLevel=31,t._consoleOut=console.log.bind(console),t._consoleOutNoNewline=console.log.bind(console),t}();!function(t){t[t.None=0]="None",t[t.PremultipliedAlphaARGB=1]="PremultipliedAlphaARGB",t[t.StraightAlphaARGB=2]="StraightAlphaARGB",t[t.StraightAlphaRGBA=3]="StraightAlphaRGBA",t[t.JPEG=4]="JPEG",t[t.PNG=5]="PNG",t[t.GIF=6]="GIF"}(sp||(sp={}));var up=function(){function t(){this.promise=new Promise(function(t,e){this.resolve=t,this.reject=e}.bind(this))}return t.prototype.then=function(t,e){return this.promise.then(t,e)},t}();"undefined"!=typeof exports&&(exports.Shumway={version:"",build:""}),function(){function t(t,e,n){t[e]||Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0,enumerable:!1})}t(String.prototype,"padRight",(function(t,e){var n,i=this,r=(n=i,n.replace(/\033\[[0-9]*m/g,"")).length;if(!t||r>=e)return i;for(var o=(e-r)/t.length,a=0;a<o;a++)i+=t;return i})),t(String.prototype,"padLeft",(function(t,e){var n=this,i=n.length;if(!t||i>=e)return n;for(var r=(e-i)/t.length,o=0;o<r;o++)n=t+n;return n})),t(String.prototype,"trim",(function(){return this.replace(/^\s+|\s+$/g,"")})),t(String.prototype,"endsWith",(function(t){return-1!==this.indexOf(t,this.length-t.length)})),t(Array.prototype,"replace",(function(t,e){if(t===e)return 0;for(var n=0,i=0;i<this.length;i++)this[i]===t&&(this[i]=e,n++);return n}))}();var cp=function(){function t(t,e){void 0===e&&(e=null),this.open=!1,this.name=t,this.settings=e||{},this.options=[]}return t.isOptionSet=function(e){return e instanceof t||!("object"!=typeof e||null===e||e instanceof hp)&&("options"in e&&"name"in e&&"settings"in e)},t.prototype.register=function(e){if(t.isOptionSet(e))for(var n=0;n<this.options.length;n++){var i=this.options[n];if(t.isOptionSet(i)&&i.name===e.name)return i}if(this.options.push(e),this.settings)if(t.isOptionSet(e)){var r=this.settings[e.name];np(r)&&(e.settings=r.settings,e.open=r.open)}else if(void 0!==this.settings[e.longName])switch(e.type){case"boolean":e.value=!!this.settings[e.longName];break;case"number":e.value=+this.settings[e.longName];break;default:e.value=this.settings[e.longName]}return e},t.prototype.trace=function(t){t.enter(this.name+" {"),this.options.forEach((function(e){e.trace(t)})),t.leave("}")},t.prototype.getSettings=function(){var e={};return this.options.forEach((function(n){t.isOptionSet(n)?e[n.name]={settings:n.getSettings(),open:n.open}:e[n.longName]=n.value})),e},t.prototype.setSettings=function(e){e&&this.options.forEach((function(n){t.isOptionSet(n)?n.name in e&&n.setSettings(e[n.name].settings):n.longName in e&&(n.value=e[n.longName])}))},t}(),hp=function(){function t(t,e,n,i,r,o){void 0===o&&(o=null),this.longName=e,this.shortName=t,this.type=n,this.defaultValue=i,this.value=i,this.description=r,this.config=o}return t.prototype.parse=function(t){this.value=t},t.prototype.trace=function(t){t.writeLn(("-"+this.shortName+"|--"+this.longName).padRight(" ",30)+" = "+this.type+" "+this.value+" ["+this.defaultValue+"] ("+this.description+")")},t}(),pp=new cp("Shumway Options");pp.register(new cp("Logging Options")).register(new hp("wo","warnOnce","boolean",!0,"Omit Repeated Warnings"));var dp=!0,fp=function(){function t(){}return t.release=dp,t.assert=yp,t.error=mp,t.assertUnreachable=Ap,t.assertNotImplemented=vp,t.warning=xp,t.notImplemented=_p,t.dummyConstructor=Ip,t.warnCounts=Cp,t.abstractMethod=Ep,t.somewhatImplemented=gp,t.unexpected=wp,t.unexpectedCase=Sp,t}();function _p(t){}function gp(t){}function mp(t){throw console.error(t),new Error(t)}function yp(t,e){if(void 0===e&&(e="assertion failed"),""===t&&(t=!0),!t){if("undefined"!=typeof console&&"assert"in console)throw console.assert(!1,e),new Error(e);mp(e.toString())}}function Ap(t){var e=(new Error).stack.split("\n")[1];throw new Error("Reached unreachable location "+e+t)}function vp(t,e){t||mp("notImplemented: "+e)}var bp=Object.create(null);function xp(t,e,n){}function Cp(){var t=[];for(var e in bp)t.push({key:e,count:bp[e]});return t.sort((function(t,e){return e.count-t.count})),t.reduce((function(t,e){return t+"\n"+e.count+"\t"+e.key}),"")}function Ip(t){}function Ep(t){}function wp(t){yp(!1,"Unexpected: "+t)}function Sp(t){yp(!1,"Unexpected Case: "+t)}function Dp(t,e){var n=e.name;if(delete e.name,!e||!n)throw new Error("Method name should not be empty");var i=window._AWAY_DEBUG_=window._AWAY_DEBUG_||{};i.hasOwnProperty(n)&&console.warn("Overrides existed debug method definition: ".concat(n)),Object.assign(t,e),i[n]=t}var Tp=1,Pp=1,Bp=0,Op=1,Mp=2,Lp=3,Rp=[5512,11025,22050,44100],Np=new Uint8Array([82,73,70,70,0,0,0,0,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,0,0,0,0]);function Fp(t,e,n,i,r){var o=i>>3,a=n*e*o,s=n*o,l=t.length+(1&t.length),u=new ArrayBuffer(Np.length+l),c=new Uint8Array(u);if(c.set(Np),r)for(var h=0,p=Np.length;h<t.length;h+=2,p+=2)c[p]=t[h+1],c[p+1]=t[h];else c.set(t,Np.length);var d=new DataView(u);return d.setUint32(4,l+36,!0),d.setUint16(22,n,!0),d.setUint32(24,e,!0),d.setUint32(28,a,!0),d.setUint16(32,s,!0),d.setUint16(34,i,!0),d.setUint32(40,l,!0),{data:c,mimeType:"audio/wav"}}function kp(t){var e,n,i=t.soundType==Pp?2:1,r=t.samplesCount,o=Rp[t.soundRate],a=t.soundData;switch(t.soundFormat){case Bp:if(e=new Float32Array(r*i),t.soundSize==Tp){for(var s=0,l=0;s<e.length;s++,l+=2)e[s]=(a[l]<<24|a[l+1]<<16)/2147483648;n=Fp(a,o,i,16,!0)}else{for(s=0;s<e.length;s++)e[s]=(a[s]-128)/128;n=Fp(a,o,i,8,!1)}break;case Lp:if(e=new Float32Array(r*i),t.soundSize==Tp){for(s=0,l=0;s<e.length;s++,l+=2)e[s]=(a[l+1]<<24|a[l]<<16)/2147483648;n=Fp(a,o,i,16,!1)}else{for(s=0;s<e.length;s++)e[s]=(a[s]-128)/128;n=Fp(a,o,i,8,!1)}break;case Mp:n={seek:a[0]|a[1]<<8,data:new Uint8Array(a.subarray(2)),mimeType:"audio/mpeg"};break;case Op:var u=new Int16Array(r*i);!function(t,e,n){function i(e){for(;a<e;)o=o<<8|t[r++],a+=8;return o>>>(a-=e)&(1<<e)-1}var r=0,o=0,a=0,s=0,l=i(2),u=Up[l];for(;s<e.length;){var c,h,p=e[s++]=i(16)<<16>>16,d=i(6);n>1&&(c=e[s++]=i(16)<<16>>16,h=i(6));for(var f=1<<l+1,_=0;_<4095;_++){for(var g=i(l+2),m=Vp[d],y=0,A=f>>1;A;A>>=1,m>>=1)g&A&&(y+=m);if(p+=(g&f?-1:1)*(y+m),e[s++]=p=p<-32768?-32768:p>32767?32767:p,d=(d+=u[g&~f])<0?0:d>88?88:d,n>1){g=i(l+2),m=Vp[h],y=0;for(A=f>>1;A;A>>=1,m>>=1)g&A&&(y+=m);c+=(g&f?-1:1)*(y+m),e[s++]=c=c<-32768?-32768:c>32767?32767:c,h=(h+=u[g&~f])<0?0:h>88?88:h}}}}(a,u,i),e=new Float32Array(r*i);for(s=0;s<e.length;s++)e[s]=u[s]/32768;n=Fp(new Uint8Array(u.buffer),o,i,16,!new Uint8Array(new Uint16Array([1]).buffer)[0])}var c={type:"sound",id:t.id,sampleRate:o,samplesCount:r,channels:i,pcm:e,packaged:null};return n&&(c.packaged=n),c}var Up=[[-1,2],[-1,-1,2,4],[-1,-1,-1,-1,2,4,6,8],[-1,-1,-1,-1,-1,-1,-1,-1,1,2,4,6,8,10,13,16]],Vp=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];var jp=0,Gp=function(){function t(t,e,n,i){this.streamId=jp++,this.samplesCount=t,this.sampleRate=e,this.channels=n,this.streamSize=i,this.format=null,this.currentSample=0,this.allChunks=[]}return t.FromTag=function(e){var n=e.streamType==Pp?2:1,i=new t(e.samplesCount,Rp[e.streamRate],n,e.streamSize);switch(e.streamCompression){case Bp:case Lp:i.format="wave",e.soundSize==Tp?i.decode=e.streamCompression===Bp?zp:Hp:i.decode=Qp;break;case Mp:i.format="mp3",i.decode=Xp;break;default:return null}return i},t}();function Qp(t){for(var e=new Float32Array(t.length),n=0;n<e.length;n++)e[n]=(t[n]-128)/128;return this.currentSample+=e.length/this.channels,{streamId:this.streamId,samplesCount:e.length/this.channels,pcm:e,data:t,seek:0}}function zp(t){for(var e=new Float32Array(t.length/2),n=0,i=0;n<e.length;n++,i+=2)e[n]=(t[i]<<24|t[i+1]<<16)/2147483648;return this.currentSample+=e.length/this.channels,{streamId:this.streamId,samplesCount:e.length/this.channels,pcm:e,data:t,seek:0}}function Hp(t){for(var e=new Float32Array(t.length/2),n=0,i=0;n<e.length;n++,i+=2)e[n]=(t[i+1]<<24|t[i]<<16)/2147483648;return this.currentSample+=e.length/this.channels,{streamId:this.streamId,samplesCount:e.length/this.channels,pcm:e,data:t,seek:0}}function Xp(t){var e=t[1]<<8|t[0],n=t[3]<<8|t[2];return this.currentSample+=e,{streamId:this.streamId,samplesCount:e,data:new Uint8Array(t.subarray(4)),seek:n}}var Yp,qp=function(){function t(t){this._byteLength=0,this._sound=null,this._frameData=[],this._data=t,this._position=0}return Object.defineProperty(t.prototype,"byteLength",{get:function(){return this._byteLength},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._byteLength>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._sound.currentTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sound",{get:function(){return this._sound},enumerable:!1,configurable:!0}),t.prototype.playFrom=function(t){this.stop(),this._sound.play(t)},t.prototype.stop=function(){this._sound&&this._sound.stop()},Object.defineProperty(t.prototype,"paused",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this._sound.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReady",{get:function(){return!!this._sound},enumerable:!1,configurable:!0}),t.prototype.queueData=function(t){t.pcm&&(this._frameData.push(t),this._byteLength+=t.data.length)},t.prototype.finish=function(){for(var t=new Int8Array(this._byteLength),e=0;e<this._frameData.length;e++)t.set(this._frameData[e].data,this._position),this._position+=this._frameData[e].data.length;var n=Fp(t,this._data.sampleRate,this._data.channels,this._data.streamSize,!1),i=new w(new S(n.data.buffer));this._sound=i},t}(),Kp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.queueData=function(t){t.data&&(this._frameData.push(t),this._byteLength+=t.data.length)},e.prototype.finish=function(){if(!this._byteLength)throw"Can't finish empty stream!";for(var t=new Uint8Array(this._byteLength),e=0;e<this._frameData.length;e++)t.set(this._frameData[e].data,this._position),this._position+=this._frameData[e].data.length;var n=new w(new S(t.buffer));this._sound=n},e}(qp),Wp=function(){function t(t){this._stopped=!1,this.decode=t.decode.bind(t),this.data={sampleRate:t.sampleRate,channels:t.channels,streamSize:t.streamSize},this.seekIndex=[],this.position=0,this.isMP3="mp3"===t.format,this.soundStreamAdapter=this.isMP3?new Kp(this.data):new qp(this.data)}return t.prototype.appendBlock=function(t,e){var n=this.decode(e),i=this.position;this.seekIndex[t]=i+n.seek,this.position=i+n.samplesCount,this.soundStreamAdapter.queueData(n)},Object.defineProperty(t.prototype,"stopped",{get:function(){return this._stopped},set:function(t){this._stopped=t},enumerable:!1,configurable:!0}),t.prototype.stop=function(){this.soundStreamAdapter.stop()},t.prototype.playFrame=function(t){if(this._stopped||isNaN(this.seekIndex[t]))return 0;if(!this.soundStreamAdapter.isComplete)return 0;this.finalized||(this.finalized=!0,this.soundStreamAdapter.finish()),this.isPlaying=!0;var e=this.data,n=this.seekIndex[t]/e.channels/e.sampleRate;this.isMP3&&(n*=e.channels),Jp.addActiveSound(this.soundStreamAdapter.sound),this.soundStreamAdapter.isPlaying||this.soundStreamAdapter.playFrom(n);var i=this.soundStreamAdapter.currentTime,r=(i-n)*Jp.frameRate;return r=i-n<0?Math.ceil(r):Math.floor(r)},t}(),Jp=function(){function t(){this.lastFrameNum=-2,this._soundStreams=[],this._frameToSoundStream={}}return t.addActiveSound=function(e){t.activeSounds[e.id]||(t.activeSounds[e.id]={}),t.activeSounds[e.id].active=!0,t.activeSounds[e.id].sound=e},t.enterFrame=function(){for(var e in t.activeSounds){t.activeSounds[e].active=!1}},t.exitFrame=function(){for(var e in t.activeSounds){var n=t.activeSounds[e];n.active||(n.sound.stop(),delete t.activeSounds[e])}},t.prototype.initSoundStream=function(t){this.soundStreamHead=t},t.prototype.addSoundStreamBlock=function(t,e){this.soundStreamHead&&((0==this._soundStreams.length||t-this.lastFrameNum>1)&&this._soundStreams.push(new Wp(this.soundStreamHead)),this.lastFrameNum=t,this._soundStreams[this._soundStreams.length-1].appendBlock(t,e),this._frameToSoundStream[t]=this._soundStreams[this._soundStreams.length-1])},t.prototype.stopStream=function(t){this._frameToSoundStream[t]&&(this._frameToSoundStream[t].stopped=!0)},t.prototype.resetStreamStopped=function(){for(var t=0;t<this._soundStreams.length;t++)this._soundStreams[t].stopped=!1},t.prototype.syncSounds=function(t,e,n){return e&&n&&this._frameToSoundStream[t]&&!this._frameToSoundStream[t].stopped?this._frameToSoundStream[t].playFrame(t):0},t.frameRate=24,t.activeSounds={},t}(),Zp=function(){function t(){}return t.EXACT_FIT="exactFit",t.NO_BORDER="noBorder",t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t}(),$p=function(){function t(){}return t.BOTTOM="B",t.BOTTOM_LEFT="BL",t.BOTTOM_RIGHT="BR",t.LEFT="L",t.RIGHT="R",t.TOP="T",t.TOP_LEFT="TL",t.TOP_RIGHT="TR",t}(),td=!1;function ed(t){td||(td=!0,alert("Can not connect to Server. Is Server.js running ?"))}!function(t){t.TESTING="TESTING",t.RECORDING="RECORDING"}(Yp||(Yp={}));for(var nd=function(){function t(t,e){var n=this;this.frameIdx=0,this.snapshotCnt=0,this.snapShotsUploaded=0,this.config=t,this._avmStage=e,this.frameIdx=0,this.events={},this.reportedSWFInfos=!1,this.frames=[{messages:[],frameIdx:this.frameIdx}],this._finished=!1,this.snapshotCnt=0,this.config.recordtest&&(Ph.inputRecorder=this),window.addEventListener("keydown",(function(t){t.ctrlKey&&69==t.keyCode&&n.finishTest()}))}return t.prototype.addMessage=function(t){this._finished||(this.frames[this.frames.length-1].messages.push(t),this.checkIfFinished())},t.prototype.setSWF=function(t){this.swfInfo={frameRate:t.frameRate,swfVersion:t.swfVersion,asVersion:t.useAVM1?2:3,width:t.bounds.width/20,height:t.bounds.height/20}},t.prototype.recordEvent=function(t){if(this.config.settings.snapShotOnMouseDown&&"mousedown"==t.type&&this.takeSnapshot(),this.config.settings.snapShotOnMouseUP&&"mouseup"==t.type&&this.takeSnapshot(),this.config.recordtest&&this.config.settings.recordInput){this.events[this.frameIdx]||(this.events[this.frameIdx]=[]);var e={type:t.type,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey};this.events[this.frameIdx].push(e)}},t.prototype.dispatchEvents=function(){if(!this.config.recordtest&&this.config.events&&this.config.events[this.frameIdx])for(var t=0;t<this.config.events[this.frameIdx].length;t++){var e=this.config.events[this.frameIdx][t];switch(e.preventDefault=function(){},e.type){case"dblclick":Ph.getInstance(null).onDoubleClick(e);break;case"touchstart":Ph.getInstance(null).onMouseDown(e);break;case"mousedown":this.config.settings.snapShotOnMouseDown&&this.takeSnapshot(),Ph.getInstance(null).onMouseDown(e);break;case"touchmove":case"mousemove":Ph.getInstance(null).onMouseMove(e);break;case"mouseup":this.config.settings.snapShotOnMouseUP&&this.takeSnapshot(),Ph.getInstance(null).onMouseUp(e);break;case"touchend":Ph.getInstance(null).onMouseUp(e);break;case"mousewheel":Ph.getInstance(null).onMouseWheel(e);break;case"mouseover":Ph.getInstance(null).onMouseOver(e);break;case"mouseout":Ph.getInstance(null).onMouseOut(e);break;case"keydown":Ph.getInstance(null).onKeyDown(e);break;case"keyup":Ph.getInstance(null).onKeyUp(e)}}},t.prototype.closeBrowserTab=function(){this._finished&&(0==this.snapShotsUploaded&&0==this.snapshotCnt||this.snapShotsUploaded==this.snapshotCnt)&&this.finishAndUploadTest()},t.prototype.takeSnapshot=function(){if(!this._finished){var t=this,e=this.snapshotCnt++;this.addMessage("AWAYFLTEST SNAPSHOT "+e),this._avmStage.snapshot((function(n){n.toBlob((function(n){return function(n){console.log("snapshot done");var i=new FormData,r="snapshot_"+e+".png";i.append("file",n,r);var o=new XMLHttpRequest;o.onreadystatechange=function(e){4==o.readyState&&(200==o.status||0==o.status?(t.snapShotsUploaded++,t.closeBrowserTab()):ed((o.statusText,o.readyState,o.responseText,o.status)))},o.onerror=function(t){ed((o.statusText,o.readyState,o.responseText,o.status))};try{o.open("POST","http://localhost:"+t.config.port+"/uploadImage",!0),o.send(i)}catch(t){ed()}}(n)}))}))}},t.prototype.nextFrame=function(){this.frameIdx++,this.config.settings.stopRecAfterFrame>0&&this.frameIdx>this.config.settings.stopRecAfterFrame&&this.finishTest(),this._finished||(0!=this.config.settings.snapShotFrames&&this.frameIdx%this.config.settings.snapShotFrames==0&&this.takeSnapshot(),this.config.settings.onlyTraces||(this.frames[this.frames.length-1].messages.length>0?this.frames.push({messages:[],frameIdx:this.frameIdx}):this.frames[this.frames.length-1].frameIdx=this.frameIdx))},t.prototype.checkIfFinished=function(){if(this.config.frames){if(this.config.frames.length<this.frames.length)return void this.finishTest();for(var t=-1,e=0;e<this.config.frames.length;e++)this.config.frames[e].frameIdx==this.frames[this.frames.length-1].frameIdx&&(t=e);if(-1==t)return void this.finishTest();if(t==this.config.frames.length-1){var n=this.config.frames[t].messages.length;this.frames[this.frames.length-1].messages.length>=n&&this.finishTest()}}},t.prototype.finishTest=function(){this._finished||(this._finished=!0,this.closeBrowserTab())},t.prototype.finishAndUploadTest=function(){0==this.frames[this.frames.length-1].messages.length&&this.frames.pop();var t=window.location.pathname.split("/").pop().replace(".html",""),e={player:"awayflplayer",duration:Date.now()-this.config.startRecTime,date:(new Date).toLocaleString(),url:t,swf:this.config.swfPath,swfInfos:this.swfInfo,settings:this.config.settings,frames:this.frames,events:this.events,seed:this.config.seed},n=JSON.stringify(e),i=new FormData,r=new Blob([n],{type:"text/xml"});if(this.config.recordtest){var o=this.config.swfPath.replace(/\\/g,"/");i.append("file",r,o),i.append("record","true")}else{o=this.config.swfPath.replace(/\\/g,"/")+"/"+this.config.testPath;i.append("file",r,o)}var a=new XMLHttpRequest;a.onreadystatechange=function(t){4==a.readyState&&(200==a.status||0==a.status?console.log("AWAYFLTEST END"):ed((a.statusText,a.readyState,a.responseText,a.status)))},a.onerror=function(t){ed((a.statusText,a.readyState,a.responseText,a.status))};try{a.open("POST","http://localhost:"+this.config.port+"/upload",!0),a.send(i)}catch(t){ed()}},t}(),id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.proceedParsing=function(){var t=this.data.definition,e={sampleRate:t.sampleRate,samplesCount:t.samplesCount,startOffset:t.packaged.seek};this._content=new w(new S(t.packaged.data.buffer,e)),this.finalizeAsset(this._content,this.fileName),this.finishParsing()},e}(At),rd={},od=new Uint32Array(33),ad=1,sd=0;ad<=32;++ad)od[ad]=sd=sd<<1|1;var ld,ud,cd,hd,pd,dd=function(){function t(t,e,n,i){void 0===e&&(e=0),t.buffer instanceof ArrayBuffer&&(e+=t.byteOffset,t=t.buffer),void 0===n&&(n=t.byteLength-e),void 0===i&&(i=n),this.bytes=new Uint8Array(t,e,i),this.view=new DataView(t,e,i),this.pos=0,this.end=n,this.bitBuffer=0,this.bitLength=0}return t.prototype.align=function(){this.bitBuffer=this.bitLength=0},t.prototype.ensure=function(t){if(this.pos+t>this.end)throw rd},t.prototype.remaining=function(){return this.end-this.pos},t.prototype.substream=function(e,n){var i=new t(this.bytes);return i.pos=e,i.end=n,i},t.prototype.push=function(t){var e=this.bytes,n=this.end+t.length;if(n>e.length)throw"stream buffer overfow";e.set(t,this.end),this.end=n},t.prototype.readSi8=function(){return this.view.getInt8(this.pos++)},t.prototype.readSi16=function(){var t=this.view.getInt16(this.pos,!0);return this.pos+=2,t},t.prototype.readSi32=function(){var t=this.view.getInt32(this.pos,!0);return this.pos+=4,t},t.prototype.readUi8=function(){return this.bytes[this.pos++]},t.prototype.readUi16=function(){var t=this.view.getUint16(this.pos,!0);return this.pos+=2,t},t.prototype.readUi32=function(){var t=this.view.getUint32(this.pos,!0);return this.pos+=4,t},t.prototype.readFixed=function(){var t=this.view.getInt32(this.pos,!0)/65536;return this.pos+=4,t},t.prototype.readFixed8=function(){var t=this.view.getInt16(this.pos,!0)/256;return this.pos+=2,t},t.prototype.readFloat16=function(){var t=this.view.getUint16(this.pos,!1);this.pos+=2;var e=t>>15?-1:1,n=(31744&t)>>10,i=1023&t;return n?31===n?i?NaN:e*(1/0):e*Math.pow(2,n-15)*(1+i/1024):e*Math.pow(2,-14)*(i/1024)},t.prototype.readFloat=function(){var t=this.view.getFloat32(this.pos,!0);return this.pos+=4,t},t.prototype.readDouble=function(){var t=this.view.getFloat64(this.pos,!0);return this.pos+=8,t},t.prototype.readEncodedU32=function(){var t=this.bytes,e=t[this.pos++];return 128&e&&16384&(e=127&e|t[this.pos++]<<7)&&2097152&(e=16383&e|t[this.pos++]<<14)&&268435456&(e=2097151&e|t[this.pos++]<<21)?268435455&e|t[this.pos++]<<28:e},t.prototype.readBool=function(){return!!this.bytes[this.pos++]},t.prototype.readSb=function(t){return this.readUb(t)<<32-t>>32-t},t.prototype.readUb=function(t){for(var e=this.bitBuffer,n=this.bitLength,i=0;t>n;)n>24&&(i=e<<(t-=n),n=0),e=e<<8|this.bytes[this.pos++],n+=8;return i|=e>>>(n-=t)&od[t],this.bitBuffer=e,this.bitLength=n,i},t.prototype.readFb=function(t){return this.readSb(t)/65536},t.prototype.readString=function(t){var e,n=this.bytes,i=this.pos;if(t>-1)e=n.subarray(i,i+=t);else{t=0;for(var r=i;n[r];r++)t++;e=n.subarray(i,i+=t),i++}this.pos=i;var o=ko(e);return o.indexOf("\0")>=0&&(o=o.split("\0").join("")),o},t}();function fd(t){t.align();var e=t.readUb(5),n=t.readSb(e),i=t.readSb(e),r=t.readSb(e),o=t.readSb(e);return t.align(),{xMin:n,xMax:i,yMin:r,yMax:o}}function _d(t){return(t.readUi8()<<24|t.readUi8()<<16|t.readUi8()<<8|255)>>>0}function gd(t){return t.readUi8()<<24|t.readUi8()<<16|t.readUi8()<<8|t.readUi8()}function md(t){var e={a:1,b:0,c:0,d:1,tx:0,ty:0};if(t.align(),t.readUb(1)){var n=t.readUb(5);e.a=t.readFb(n),e.d=t.readFb(n)}if(t.readUb(1)){n=t.readUb(5);e.b=t.readFb(n),e.c=t.readFb(n)}n=t.readUb(5);return e.tx=t.readSb(n),e.ty=t.readSb(n),t.align(),e}function yd(t,e){var n={redMultiplier:255,greenMultiplier:255,blueMultiplier:255,alphaMultiplier:255,redOffset:0,greenOffset:0,blueOffset:0,alphaOffset:0};t.align();var i=t.readUb(1),r=t.readUb(1),o=t.readUb(4);return r&&(n.redMultiplier=t.readSb(o),n.greenMultiplier=t.readSb(o),n.blueMultiplier=t.readSb(o),e&&(n.alphaMultiplier=t.readSb(o))),i&&(n.redOffset=t.readSb(o),n.greenOffset=t.readSb(o),n.blueOffset=t.readSb(o),e&&(n.alphaOffset=t.readSb(o))),t.align(),n}function Ad(t,e,n,i){var r={code:n};if(r.actionBlocksPrecedence=t.pos,4===n)return r.symbolId=t.readUi16(),r.depth=t.readUi16(),r.flags|=4,r.matrix=md(t),t.pos<i&&(r.flags|=8,r.cxform=yd(t,!1)),r;var o=r.flags=n>26?t.readUi16():t.readUi8();if(r.depth=t.readUi16(),2048&o&&(r.className=t.readString(-1)),2&o&&(r.symbolId=t.readUi16()),4&o&&(r.matrix=md(t)),8&o&&(r.cxform=yd(t,!0)),16&o&&(r.ratio=t.readUi16()),32&o&&(r.name=t.readString(-1)),64&o&&(r.clipDepth=t.readUi16()),256&o)for(var a=t.readUi8(),s=r.filters=[];a--;)s.push(bd(t));if(512&o&&(r.blendMode=t.readUi8()),1024&o&&(r.bmpCache=t.readUi8()),8192&o&&(r.visibility=t.readBool()),16384&o&&(r.backgroundColor=function(t){return t.readUi8()|t.readUi8()<<24|t.readUi8()<<16|t.readUi8()<<8}(t)),128&o){t.readUi16(),e>=6?t.readUi32():t.readUi16();for(var l=r.events=[],u=void 0;u=vd(t,e);){if(t.pos>i){console.log("PlaceObject handler attempted to read clip events beyond tag end"),t.pos=i;break}l.push(u)}}return r}function vd(t,e){var n=e>=6?t.readUi32():t.readUi16();if(!n)return null;var i={};6===e&&(n&=-262145),i.flags=n;var r=t.readUi32();131072&n&&(i.keyCode=t.readUi8(),r--);var o=t.pos+r;return i.actionsBlock=t.bytes.subarray(t.pos,o),t.pos=o,i}function bd(t){var e={},n=e.type=t.readUi8();switch(n){case ld.DROPSHADOW:case ld.GLOW:case ld.BEVEL:case ld.GRADIENTGLOW:case ld.GRADIENTBEVEL:var i,r=e;i=n===ld.GRADIENTGLOW||n===ld.GRADIENTBEVEL?t.readUi8():n===ld.BEVEL?2:1;for(var o=r.colors=[],a=i;a--;)o.push(gd(t));if(n===ld.GRADIENTGLOW||n===ld.GRADIENTBEVEL){var s=r.ratios=[];for(a=i;a--;)s.push(t.readUi8())}return r.blurX=t.readFixed(),r.blurY=t.readFixed(),n!==ld.GLOW&&(r.angle=t.readFixed(),r.distance=t.readFixed()),r.strength=t.readFixed8(),r.inner=!!t.readUb(1),r.knockout=!!t.readUb(1),r.compositeSource=!!t.readUb(1),n===ld.BEVEL||n===ld.GRADIENTGLOW||n===ld.GRADIENTBEVEL?(r.onTop=!!t.readUb(1),r.quality=t.readUb(4)):r.quality=t.readUb(5),r;case ld.BLUR:var l=e;return l.blurX=t.readFixed(),l.blurY=t.readFixed(),l.quality=t.readUb(5),t.readUb(3),l;case ld.CONVOLUTION:var u=e,c=u.matrixX=t.readUi8(),h=u.matrixY=t.readUi8();u.divisor=t.readFloat(),u.bias=t.readFloat();var p=u.matrix=[];for(a=c*h;a--;)p.push(t.readFloat());return u.color=gd(t),t.readUb(6),u.clamp=!!t.readUb(1),u.preserveAlpha=!!t.readUb(1),u;case ld.COLORMATRIX:var d=e;for(p=d.matrix=[],a=20;a--;)p.push(t.readFloat());return d}return e}function xd(t,e,n){var i={code:n};return 5===n?(i.depth=t.readUi16(),i.symbolId=t.readUi16()):i.depth=t.readUi16(),i}function Cd(t,e,n,i,r){var o,a={code:n};if(a.id=t.readUi16(),n>21){var s=t.readUi32();90===n&&(a.deblock=t.readFixed8()),s+=t.pos,o=a.imgData=t.bytes.subarray(t.pos,s),a.alphaData=t.bytes.subarray(s,i),t.pos=i}else o=a.imgData=t.bytes.subarray(t.pos,i),t.pos=i;switch(o[0]<<8|o[1]){case 65496:case 65497:a.mimeType="image/jpeg";break;case 35152:a.mimeType="image/png";break;case 18249:a.mimeType="image/gif";break;default:a.mimeType="application/octet-stream"}return 6===n&&(a.jpegTables={data:r}),a}function Id(t,e,n,i){var r={code:n};r.id=t.readUi16();var o,a=r.characters=[];if(7==n){for(;o=Ed(t,e,n);)a.push(o);r.actionsData=t.bytes.subarray(t.pos,i),t.pos=i}else{var s=t.readUi8();r.trackAsMenu=!!(s>>7&1);for(var l=t.readUi16();o=Ed(t,e,n);)a.push(o);if(l){for(var u=r.buttonActions=[];t.pos<i;){var c=wd(t,i);if(t.pos>i)break;u.push(c)}t.pos=i}}return r}function Ed(t,e,n){var i=t.readUi8();if(!i)return null;var r={};if(e<8&&(i&=-769),r.flags=i,r.symbolId=t.readUi16(),r.depth=t.readUi16(),r.matrix=md(t),34===n&&(r.cxform=yd(t,!0)),16&r.flags)for(var o=t.readUi8(),a=r.filters=[],s=o;s--;)a.push(bd(t));return 32&r.flags&&(r.blendMode=t.readUi8()),r}function wd(t,e){var n=t.pos,i=t.readUi16(),r=i?n+i:e,o=t.readUi16();return t.pos=r,{keyCode:(65024&o)>>9,stateTransitionFlags:511&o,actionsData:t.bytes.subarray(n+4,r)}}function Sd(t,e,n){t.align();var i=t.readUb(4),r=t.readUb(4);return kd(t,e,n,!1,i,r,!1)}function Dd(t,e,n){var i={code:n};i.id=t.readUi16(),i.bbox=fd(t),i.matrix=md(t);for(var r,o=t.readUi8(),a=t.readUi8(),s=i.records=[];r=Td(t,e,n,o,a);)s.push(r);return i}function Td(t,e,n,i,r){t.align();var o=t.readUb(8);if(!o)return null;var a={};a.flags=o,8&o&&(a.fontId=t.readUi16()),4&o&&(a.color=33===n?gd(t):_d(t)),1&o&&(a.moveX=t.readSi16()),2&o&&(a.moveY=t.readSi16()),8&o&&(a.fontHeight=t.readUi16());for(var s=t.readUi8(),l=a.entries=[],u=s;u--;)l.push({glyphIndex:t.readUb(i),advance:t.readSb(r)});return a}function Pd(t,e,n){var i={code:n};return 15==n&&(i.soundId=t.readUi16()),89==n&&(i.soundClassName=t.readString(-1)),i.soundInfo=Bd(t),i}function Bd(t){var e={},n=e.flags=t.readUi8();if(1&n&&(e.inPoint=t.readUi32()),2&n&&(e.outPoint=t.readUi32()),4&n&&(e.loopCount=t.readUi16()),8&n)for(var i=t.readUi8(),r=e.envelopes=[],o=i;o--;)r.push({pos44:t.readUi32(),volumeLeft:t.readUi16(),volumeRight:t.readUi16()});return e}function Od(t,e){var n={},i=t.readUi8();n.playbackRate=i>>2&3,n.playbackSize=i>>1&1,n.playbackType=1&i;var r=t.readUi8(),o=n.streamCompression=r>>4&15;return n.streamRate=r>>2&3,n.streamSize=r>>1&1?16:8,n.streamType=1&r,n.samplesCount=t.readUi16(),2==o&&e-t.pos>=2&&(n.latencySeek=t.readSi16()),n}function Md(t,e,n,i){var r={code:n};r.id=t.readUi16();var o=r.format=t.readUi8();return r.width=t.readUi16(),r.height=t.readUi16(),r.hasAlpha=36===n,3===o&&(r.colorTableSize=t.readUi8()),r.bmpData=t.bytes.subarray(t.pos,i),t.pos=i,r}function Ld(t,e,n,i){var r={code:n};r.id=t.readUi16();var o=r.flags=t.readUi8(),a=!!(4&o);e>5?r.language=t.readUi8():(o=r.flags=-65&o,t.pos+=1,r.language=0);var s=t.readUi8();r.name=t.readString(s),75===n&&(r.resolution=20);var l=t.readUi16();if(0===l)return r;var u=t.pos,c=r.offsets=[],h=l;if(8&o){for(;h--;)c.push(t.readUi32());r.mapOffset=t.readUi32()}else{for(;h--;)c.push(t.readUi16());r.mapOffset=t.readUi16()}var p=r.glyphs=[];for(h=l;h--;){1!==r.offsets[l-h]+u-t.pos?p.push(Sd(t,e,n)):(t.pos+=1,p.push([]))}var d=r.codes=[];for(h=l;h--;)d.push(a?t.readUi16():t.readUi8());if(128&o){r.ascent=t.readUi16(),r.descent=t.readUi16(),r.leading=t.readSi16();var f=r.advance=[];for(h=l;h--;)f.push(t.readSi16());var _=r.bbox=[];for(h=l;h--;)_.push(fd(t));var g=t.readUi16(),m=r.kerning=[];for(h=g;h--&&i-t.pos>=2+(a?4:2);)m.push(Rd(t,a))}return r}function Rd(t,e){var n={};return e?(n.code1=t.readUi16(),n.code2=t.readUi16()):(n.code1=t.readUi8(),n.code2=t.readUi8()),n.adjustment=t.readUi16(),n}function Nd(t,e){for(var n={code:e},i=t.readEncodedU32(),r=n.scenes=[],o=i;o--;)r.push({offset:t.readEncodedU32(),name:t.readString(-1),labels:[],numFrames:-1}),r.length>1&&(r[r.length-2].numFrames=r[r.length-1].offset-r[r.length-2].offset);var a=t.readEncodedU32(),s=n.labels=[];for(o=a;o--;){var l={frame:t.readEncodedU32(),name:t.readString(-1)};s.push(l);for(var u=r[0],c=1;c<r.length;c++){var h=r[c];if(h.offset>l.frame)break;u=h}u.labels.push(l)}return n}function Fd(t,e,n,i){var r={code:n,needParse:!0},o=0;r.id=t.readUi16(),r.lineBounds=fd(t);var a=46===n||84===n;a&&(o|=8,r.lineBoundsMorph=fd(t)),(83===n||84===n)&&(r.fillBounds=fd(t),a&&(r.fillBoundsMorph=fd(t)),o|=7&t.readUi8()),r.flags=o,a&&(t.pos+=4);var s=t.substream(t.pos,t.end);return r.lazyParser=function(){r.needParse=!1,r.lazyParser=function(){return r};var t=performance.now();return function(t,e,n){var i=83===e.code||84===e.code,r=!!(8&e.flags);e.fillStyles=Ud(t,n,e.code,r),e.lineStyles=Gd(t,n,e.code,r,i),t.align();var o=t.readUb(4),a=t.readUb(4);e.records=kd(t,n,e.code,r,o,a,i),r&&(t.align(),o=t.readUb(4),a=t.readUb(4),e.recordsMorph=kd(t,n,e.code,r,o,a,i))}(s,r,e),r.parsingTime=performance.now()-t,r},t.pos=i,r}function kd(t,e,n,i,r,o,a){for(var s,l,u=new Array(10),c=0;;){var h={},p=h.type=t.readUb(1);if(l=t.readUb(5),!p&&!l)break;if(p)if(s=2+(15&l),32&(l=(240&l)<<1))if(h.isGeneral=t.readUb(1))l|=64,h.deltaX=t.readSb(s),h.deltaY=t.readSb(s);else(h.isVertical=t.readUb(1))?(l|=128,h.deltaY=t.readSb(s)):h.deltaX=t.readSb(s);else h.controlDeltaX=t.readSb(s),h.controlDeltaY=t.readSb(s),h.anchorDeltaX=t.readSb(s),h.anchorDeltaY=t.readSb(s);else n<=2&&(l&=-17),1&l&&(s=t.readUb(5),h.moveX=t.readSb(s),h.moveY=t.readSb(s)),2&l&&(h.fillStyle0=t.readUb(r)),4&l&&(h.fillStyle1=t.readUb(r)),8&l&&(h.lineStyle=t.readUb(o)),16&l&&(h.fillStyles=Ud(t,e,n,i),h.lineStyles=Gd(t,e,n,i,a),t.align(),r=t.readUb(4),o=t.readUb(4));h.flags=l,u[c++]=h}return u.length>c&&(u.length=c),u}function Ud(t,e,n,i){var r=t.readUi8();n>2&&255===r&&(r=t.readUi16());for(var o=[],a=r;a--;)o.push(Vd(t,e,n,i));return o}function Vd(t,e,n,i){var r={},o=r.type=t.readUi8();switch(o){case 0:var a=r;return a.color=n>22||i?gd(t):_d(t),i&&(a.colorMorph=gd(t)),a;case 16:case 18:case 19:var s=r;s.matrix=md(t),i&&(s.matrixMorph=md(t)),83===n?(s.spreadMode=t.readUb(2),s.interpolationMode=t.readUb(2)):t.readUb(4);for(var l=t.readUb(4),u=s.records=[],c=l;c--;)u.push(jd(t,n,i));return 19===o&&(s.focalPoint=t.readSi16(),i&&(s.focalPointMorph=t.readSi16())),s;case 64:case 65:case 66:case 67:var h=r;return h.bitmapId=t.readUi16(),h.condition=64===o||67===o,h.matrix=md(t),i&&(h.matrixMorph=md(t)),h}return r}function jd(t,e,n){var i={};return i.ratio=t.readUi8(),i.color=e>22?gd(t):_d(t),n&&(i.ratioMorph=t.readUi8(),i.colorMorph=gd(t)),i}function Gd(t,e,n,i,r){var o=t.readUi8();n>2&&255===o&&(o=t.readUi16());for(var a=[],s=o;s--;){var l={};if(l.width=t.readUi16(),i&&(l.widthMorph=t.readUi16()),r){t.align(),l.startCapsStyle=t.readUb(2);var u=l.jointStyle=t.readUb(2),c=l.hasFill=t.readUb(1);l.noHscale=!!t.readUb(1),l.noVscale=!!t.readUb(1),l.pixelHinting=!!t.readUb(1),t.readUb(5),l.noClose=!!t.readUb(1),l.endCapsStyle=t.readUb(2),2===u&&(l.miterLimitFactor=t.readFixed8()),c?l.fillStyle=Vd(t,0,n,i):(l.color=gd(t),i&&(l.colorMorph=gd(t)))}else l.color=n>22?gd(t):_d(t),i&&(l.colorMorph=gd(t));a.push(l)}return a}!function(t){t[t.DROPSHADOW=0]="DROPSHADOW",t[t.BLUR=1]="BLUR",t[t.GLOW=2]="GLOW",t[t.BEVEL=3]="BEVEL",t[t.GRADIENTGLOW=4]="GRADIENTGLOW",t[t.CONVOLUTION=5]="CONVOLUTION",t[t.COLORMATRIX=6]="COLORMATRIX",t[t.GRADIENTBEVEL=7]="GRADIENTBEVEL"}(ld||(ld={})),function(t){t[t.CODE_DEFINE_SHAPE=2]="CODE_DEFINE_SHAPE",t[t.CODE_DEFINE_BITS=6]="CODE_DEFINE_BITS",t[t.CODE_DEFINE_BUTTON=7]="CODE_DEFINE_BUTTON",t[t.CODE_DEFINE_FONT=10]="CODE_DEFINE_FONT",t[t.CODE_DEFINE_TEXT=11]="CODE_DEFINE_TEXT",t[t.CODE_DEFINE_SOUND=14]="CODE_DEFINE_SOUND",t[t.CODE_DEFINE_BITS_LOSSLESS=20]="CODE_DEFINE_BITS_LOSSLESS",t[t.CODE_DEFINE_BITS_JPEG2=21]="CODE_DEFINE_BITS_JPEG2",t[t.CODE_DEFINE_SHAPE2=22]="CODE_DEFINE_SHAPE2",t[t.CODE_DEFINE_SHAPE3=32]="CODE_DEFINE_SHAPE3",t[t.CODE_DEFINE_TEXT2=33]="CODE_DEFINE_TEXT2",t[t.CODE_DEFINE_BUTTON2=34]="CODE_DEFINE_BUTTON2",t[t.CODE_DEFINE_BITS_JPEG3=35]="CODE_DEFINE_BITS_JPEG3",t[t.CODE_DEFINE_BITS_LOSSLESS2=36]="CODE_DEFINE_BITS_LOSSLESS2",t[t.CODE_DEFINE_EDIT_TEXT=37]="CODE_DEFINE_EDIT_TEXT",t[t.CODE_DEFINE_SPRITE=39]="CODE_DEFINE_SPRITE",t[t.CODE_DEFINE_MORPH_SHAPE=46]="CODE_DEFINE_MORPH_SHAPE",t[t.CODE_DEFINE_FONT2=48]="CODE_DEFINE_FONT2",t[t.CODE_DEFINE_VIDEO_STREAM=60]="CODE_DEFINE_VIDEO_STREAM",t[t.CODE_DEFINE_FONT3=75]="CODE_DEFINE_FONT3",t[t.CODE_DEFINE_SHAPE4=83]="CODE_DEFINE_SHAPE4",t[t.CODE_DEFINE_MORPH_SHAPE2=84]="CODE_DEFINE_MORPH_SHAPE2",t[t.CODE_DEFINE_BINARY_DATA=87]="CODE_DEFINE_BINARY_DATA",t[t.CODE_DEFINE_BITS_JPEG4=90]="CODE_DEFINE_BITS_JPEG4",t[t.CODE_DEFINE_FONT4=91]="CODE_DEFINE_FONT4"}(ud||(ud={})),function(t){t[t.CODE_DEFINE_BITS=6]="CODE_DEFINE_BITS",t[t.CODE_DEFINE_BITS_JPEG2=21]="CODE_DEFINE_BITS_JPEG2",t[t.CODE_DEFINE_BITS_JPEG3=35]="CODE_DEFINE_BITS_JPEG3",t[t.CODE_DEFINE_BITS_JPEG4=90]="CODE_DEFINE_BITS_JPEG4"}(cd||(cd={})),function(t){t[t.CODE_DEFINE_FONT=10]="CODE_DEFINE_FONT",t[t.CODE_DEFINE_FONT2=48]="CODE_DEFINE_FONT2",t[t.CODE_DEFINE_FONT3=75]="CODE_DEFINE_FONT3",t[t.CODE_DEFINE_FONT4=91]="CODE_DEFINE_FONT4"}(hd||(hd={})),function(t){t[t.CODE_PLACE_OBJECT=4]="CODE_PLACE_OBJECT",t[t.CODE_PLACE_OBJECT2=26]="CODE_PLACE_OBJECT2",t[t.CODE_PLACE_OBJECT3=70]="CODE_PLACE_OBJECT3",t[t.CODE_REMOVE_OBJECT=5]="CODE_REMOVE_OBJECT",t[t.CODE_REMOVE_OBJECT2=28]="CODE_REMOVE_OBJECT2",t[t.CODE_START_SOUND=15]="CODE_START_SOUND",t[t.CODE_START_SOUND2=89]="CODE_START_SOUND2",t[t.CODE_VIDEO_FRAME=61]="CODE_VIDEO_FRAME"}(pd||(pd={}));var Qd={0:void 0,1:void 0,2:Fd,4:Ad,5:xd,6:Cd,7:Id,8:void 0,9:void 0,10:function(t,e,n){var i={code:n};i.id=t.readUi16();for(var r=t.readUi16(),o=r/2,a=[],s=o-1;s--;)a.push(t.readUi16());i.offsets=[r].concat(a);var l=i.glyphs=[];for(s=o;s--;)l.push(Sd(t,e,n));return i},11:Dd,12:void 0,13:void 0,14:function(t,e,n,i){var r={code:n};r.id=t.readUi16();var o=t.readUi8();return r.soundFormat=o>>4&15,r.soundRate=o>>2&3,r.soundSize=o>>1&1,r.soundType=1&o,r.samplesCount=t.readUi32(),r.soundData=t.bytes.subarray(t.pos,i),t.pos=i,r},15:Pd,17:void 0,18:void 0,19:void 0,20:Md,21:Cd,22:Fd,23:void 0,24:void 0,26:Ad,28:xd,32:Fd,33:Dd,34:Id,35:Cd,36:Md,37:function(t,e,n){var i={code:n};i.id=t.readUi16(),i.bbox=fd(t);var r=i.flags=t.readUi16();return 1&r&&(i.fontId=t.readUi16()),32768&r&&(i.fontClass=t.readString(-1)),1&r&&(i.fontHeight=t.readUi16()),4&r&&(i.color=gd(t)),2&r&&(i.maxLength=t.readUi16()),8192&r&&(i.align=t.readUi8(),i.leftMargin=t.readUi16(),i.rightMargin=t.readUi16(),i.indent=t.readSi16(),i.leading=t.readSi16()),i.variableName=t.readString(-1),128&r&&(i.initialText=t.readString(-1)),i},39:void 0,43:void 0,45:void 0,46:Fd,48:Ld,56:void 0,57:void 0,58:void 0,59:void 0,60:function(t,e,n){var i={code:n};return i.id=t.readUi16(),i.numFrames=t.readUi16(),i.width=t.readUi16(),i.height=t.readUi16(),t.readUb(4),i.deblocking=t.readUb(3),i.smoothing=!!t.readUb(1),i.codecId=t.readUi8(),i},61:function(t,e,n,i){var r={code:n};return r.streamId=t.readUi16(),r.frameNum=t.readUi16(),r.videoData=t.bytes.subarray(t.pos,i),t.pos=i,r},62:void 0,64:void 0,65:void 0,66:void 0,69:void 0,70:Ad,71:void 0,72:void 0,73:void 0,74:void 0,75:Ld,76:void 0,77:void 0,78:function(t,e,n){var i={code:n};return i.symbolId=t.readUi16(),i.splitter=fd(t),i},82:void 0,83:Fd,84:Fd,86:Nd,87:function(t,e,n,i){var r={code:n};return r.id=t.readUi16(),t.pos+=4,r.data=t.bytes.subarray(t.pos,i),t.pos=i,r},88:void 0,89:Pd,90:Cd,91:function(t,e,n,i){var r={code:n};r.id=t.readUi16();var o=r.flags=t.readUi8();return r.name=t.readString(-1),4&o&&(r.data=t.bytes.slice(t.pos,i),t.pos=i),r}};var zd=function(){function t(){}return t.parseData=function(e){var n=t.openType;return n||console.error("[OpenTypeParser] - opentype.js is not registered"),n.parse(e.data.buffer)},t}(),Hd=Math.pow,Xd=Math.log,Yd=String.fromCharCode;function qd(t){for(var e=0,n=t;n>=2;)n/=2,++e;return Hd(2,e)}function Kd(t){return Yd(t>>8&255,255&t)}function Wd(t,e){var n,i="swf-font-"+t.id,r=t.name||i;"Helvetica"==r&&(r="arial"),91==t.code&&(n=zd.parseData(t));var o,a=t.glyphs,s=a?a.length:0,l={type:"font",id:t.id,name:r,bold:!!(1&t.flags),italic:!!(2&t.flags),codes:t.codes,metrics:null,data:t.data,originalSize:!1,away:null,fontStyleName:wl.STANDART},u=wl.STANDART;if(l.bold&&!l.italic?u=wl.BOLD:!l.bold&&l.italic?u=wl.ITALIC:l.bold&&l.italic&&(u=wl.BOLDITALIC),l.fontStyleName=u,!s&&!n)return l.away=Uc.getDeviceFont(r),l;o=n?jc.defineFont_CFF(r,e):jc.defineFont(r,e),l.away=o,o.name=r;var c=o.create_font_table(u,Rc.assetType);if(n)return c.changeOpenTypeFont(n),l;var h=[],p={},d=[],f=!("advance"in t),_=48===t.code,g=75===t.code;f&&(t.advance=[]);var m=Math.max.apply(null,t.codes)||35;if(t.codes){for(var y=0;y<t.codes.length;y++){((D=t.codes[y])<32||D in p)&&(8232==++m&&(m=8240),D=m),h.push(D),p[D]=y}h.sort((function(t,e){return t-e}));var A;for(y=0;void 0!==(D=h[y++]);){var v=S=D;for(A=[y-1];void 0!==(D=h[y])&&v+1===D;)++v,A.push(y),++y;d.push([S,v,A])}}else{A=[];var b=57344;for(y=0;y<s;y++)D=b+y,h.push(D),p[D]=y,A.push(y);d.push([b,b+s-1,A])}var x=t.resolution||1;_&&function(t){for(var e=0,n=0,i=0,r=0,o=0;o<t.length;o++){var a=t[o];if(a)for(var s,l=0,u=0,c=0;c<a.length;c++)(s=a[c]).type?32&s.flags?(l+=s.deltaX||0,u+=-(s.deltaY||0)):(l+=s.controlDeltaX,u+=-s.controlDeltaY,l+=s.anchorDeltaX,u+=-s.anchorDeltaY):1&s.flags&&(l=s.moveX,u=-s.moveY),e>l&&(e=l),n>u&&(n=u),i<l&&(i=l),r<u&&(r=u)}return Math.max(i-e,r-n)>5e3}(a)&&(x=20,l.originalSize=!0);var C=Math.ceil(t.ascent/x)||1024,I=-Math.ceil(t.descent/x)||0;0!=c.ascent||(c.ascent=C,c.descent=I);var E=c.ascent;t.leading;var w;for(y=0;w=d[y++];)var S=w[0],D=(v=w[1],w[2][0]);for(var T=2*qd(d.length+1),P=[],B=(y=0,{});void 0!==(D=h[y++]);){for(var O=a[p[D]],M=0,L=0,R=[],N=-1,F=0;F<O.length;F++){if((nt=O[F]).type)if(N<0&&(R[N=0]={data:[],commands:[],xMin:0,xMax:0,yMin:0,yMax:0}),32&nt.flags)R[N].commands.push(2),M+=(nt.deltaX||0)/x,L+=-(nt.deltaY||0)/x,R[N].data.push(M,L);else R[N].commands.push(3),M+=Z=nt.controlDeltaX/x,L+=$=-nt.controlDeltaY/x,R[N].data.push(M,L),M+=nt.anchorDeltaX/x,L+=-nt.anchorDeltaY/x,R[N].data.push(M,L);else if(1&nt.flags){R[++N]={data:[],commands:[],xMin:0,xMax:0,yMin:0,yMax:0},R[N].commands.push(1);var k=nt.moveX/x,U=-nt.moveY/x;M=k,L=U,R[N].data.push(M,L)}N>-1&&(R[N].xMin>M&&(R[N].xMin=M),R[N].yMin>L&&(R[N].yMin=L),R[N].xMax<M&&(R[N].xMax=M),R[N].yMax<L&&(R[N].yMax=L))}g||R.sort((function(t,e){return(e.xMax-e.xMin)*(e.yMax-e.yMin)-(t.xMax-t.xMin)*(t.yMax-t.yMin)})),B[D]=R}var V=0;for(y=0;void 0!==(D=h[y++]);){var j=new ks,G=p[D];O=a[G];R=B[D];M=0,L=0;var Q=0,z=-1024,H=0,X=(N=-1,[]),Y=[];for(F=0;F<R.length;F++)X=X.concat(R[F].data),Y=Y.concat(R[F].commands);M=0,L=0;var q=0,K=0,W=0;for(F=0;F<Y.length;F++){var J=Y[F];if(1===J){q=X[W++],K=X[W++];j.moveTo(q,-1*K+E),M=q,L=K}else if(2===J){q=X[W++],K=X[W++];M=q,L=K,j.lineTo(q,-1*K+E)}else if(3===J){var Z=(q=X[W++])-M,$=(K=X[W++])-L;M=q,L=K;Z=q,$=K,q=X[W++],K=X[W++];M=q,L=K,j.curveTo(Z,-1*$+E,q,-1*K+E)}Q>M&&(Q=M),H>L&&(H=L),z<M&&(z=M)}F||(Q=z=H=0),P.push(H);var tt=0;f?(t.advance.push((z-Q)*x*1.3),tt=z-Q):(tt=t.advance[G]/x)<0&&(tt=Math.abs(tt)),32==D&&(V=t.advance[G]/x)<0&&(V=Math.abs(V)),c.setChar(D.toString(),tt,null,null,!1,G,j)}if(!g){var et=Math.min.apply(null,P);et<0&&(I=I||et)}if(t.kerning&&t.kerning.length){var nt,it=t.kerning,rt=it.length;for(T=2*qd(rt),Kd(14+6*rt),Kd(rt),Kd(T),Kd(Xd(rt)/Xd(2)),Kd(2*rt-T),y=0;nt=it[y++];)Kd(p[nt.code1])+Kd(p[nt.code2])+Kd(nt.adjustment)}return c.set_font_em_size(1024),V&&c.set_whitespace_width(V),l}function Jd(t){var e=t.width,n=t.height,i=t.hasAlpha,r=function(t){return t+3&-4}(e)-e,o=i?4:3,a=(t.colorTableSize+1)*o,s=a+(e+r)*n,l=ca.inflate(t.bmpData,s,!0),u=new Uint32Array(e*n),c=a,h=0,p=0;if(i)for(var d=0;d<n;d++){for(var f=0;f<e;f++){var _=l[(p=l[c++]<<2)+3],g=_/255;u[h++]=(_<<24|l[p+2]*g<<16|l[p+1]*g<<8|l[p+0]*g)>>>0}c+=r}else for(d=0;d<n;d++){for(f=0;f<e;f++)p=l[c++]*o,u[h++]=(255<<24|l[p+2]<<16|l[p+1]<<8|l[p+0])>>>0;c+=r}return new Uint8ClampedArray(u.buffer)}function Zd(t){for(var e=t.width,n=t.height*e*4,i=ca.inflate(t.bmpData,n,!0),r=new Uint32Array(i.buffer),o=0,a=r.length;o<a;o++){var s=r[o],l=255&s,u=s>>24&255,c=s>>16&255,h=s>>8&255;r[o]=(l<<24|u<<16|c<<8|h)>>>0}return new Uint8ClampedArray(i.buffer)}function $d(t){return console.log("parse15BPP"),null}function tf(t,e){return t[e]<<8|t[e+1]}function ef(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function nf(t,e){for(var n=0,i=t.length;n<i&&(255!==t[n]||n+1<i&&(0===t[n+1]||255===t[n+1]));)++n;if(!(n>=i))do{var r=n++,o=t[n++];if(o>=192&&o<=199||o>=201&&o<=207||o>=218&&o<=239||254===o)n+=tf(t,n);for(;n<i&&(255!==t[n]||n+1<i&&(0===t[n+1]||255===t[n+1]));)++n;216!==o&&217!==o&&e.push(t.subarray(r,n))}while(n<i)}var rf=new Uint8Array([255,216]),of=new Uint8Array([255,217]);function af(t){var e={type:"image",id:t.id,mimeType:t.mimeType},n=t.imgData;if("image/jpeg"===t.mimeType){var i=[];i.push(rf),nf(n,i),t.jpegTables&&function(t,e){if(!e.parsedChunks){var n=[];nf(e.data,n),e.parsedChunks=n}for(var i=0;i<t.length&&!(t[i][1]>=192&&t[i][1]<=192);)i++;Array.prototype.splice.apply(t,Array.prototype.concat.call([i,0],e.parsedChunks))}(i,t.jpegTables),i.push(of),i.forEach((function(t){var n=t[1];n>=192&&n<=195&&(e.height=tf(t,5),e.width=tf(t,7))})),e.data=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new Uint8Array(e),r=0;for(n=0;n<t.length;n++){var o=t[n];i.set(o,r),r+=o.length}return i}(i),e.dataType=To.JPEG;var r=t.alphaData;if(r){var o=e.width*e.height;try{e.alphaData=ca.inflate(r,o,!0)}catch(t){e.alphaData=new Uint8Array(o)}}}else!function(t,e){if(73===e[12]&&72===e[13]&&68===e[14]&&82===e[15]){t.width=ef(e,16),t.height=ef(e,20);var n=e[26];t.hasAlpha=4===n||6===n}}(e,n),e.data=n,e.dataType=To.PNG;return e}var sf=function(){return function(t,e,n,i,r,o,a){t&&Object.freeze(t),this.controlTags=t,this.labelNames=e,r&&Object.freeze(r),this.soundStreamHead=n,this.soundStreamBlock=i,this.actionBlocks=r,o&&Object.freeze(o),this.initActionBlocks=o,this.buttonStateName="",a&&Object.freeze(a),this.exports=a}}(),lf=["up","over","down","hitTest"];function uf(t,e,n){return t[e++]=n.a,t[e++]=n.b,t[e++]=n.c,t[e++]=n.d,t[e++]=n.tx/20,t[e++]=n.ty/20,e}var cf=[Tl.LEFT,Tl.RIGHT,Tl.CENTER,Tl.JUSTIFY],hf=function(){function t(t){this.parser=t,this._buttonIds={},this._mcIds={},this.reqursive=!0}return Object.defineProperty(t.prototype,"factory",{get:function(){return this.parser.factory},enumerable:!1,configurable:!0}),t.prototype._createShape=function(t,e,n){var i=new zs;return i.queueShapeTag(t),i.name=n||"instance_shape_"+t.id.toString(),i.className=t.className,"morphshape"===t.type?new nl(i):i},t.prototype._createFont=function(t,e,n){return t.away.className=t.className,t.className&&jc.registerFontForClassName(t.away,t.className),t},t.prototype._createSprite=function(t,e,n){var i=this.framesToTimeline(e,t,t.frames,null,null);if(t.scalingGrid){var r=t.scalingGrid,o=r.xMin,a=r.xMax,s=r.yMin,l=r.yMax;i.scale9Grid=new W(o/20,s/20,(a-o)/20,(l-s)/20)}return i.className=t.className,i.name=n||"instance_mc_"+t.id.toString(),i.buttonMode?this._buttonIds[t.id]=!0:this._mcIds[t.id]=!0,i},t.prototype._createText=function(t,e,n){(e=e||this.factory.createTextField(t))._symbol=t;var i=new zc;e.className=t.className;var r=this.reqursive?this.createAwaySymbol(t.tag.fontId):this.factory.awaySymbols[t.tag.fontId];r&&(i.font=r.away,i.font_table=r.away.get_font_table(r.fontStyleName,Rc.assetType));var o=t.tag;return i.size=o.fontHeight/20,e.textColor=4&o.flags?D.f32_RGBA_To_f32_ARGB(o.color):16777215,i.leftMargin=o.leftMargin/20,i.rightMargin=o.rightMargin/20,i.letterSpacing=o.letterSpacing/20,i.leading=o.leading/20,i.align=cf[o.align],e.newTextFormat=i,e.textOffsetX=t.fillBounds.xMin/20,e.textOffsetY=t.fillBounds.yMin/20,e.width=(t.fillBounds.xMax-t.fillBounds.xMin)/20,e.height=(t.fillBounds.yMax-t.fillBounds.yMin)/20,e.border=!!(2048&o.flags),e.background=e.border,e.multiline=!!(32&o.flags),e.wordWrap=!!(64&o.flags),e.selectable=!!o.flags&&!(4096&o.flags),o.maxLength&&o.maxLength>0&&(e.maxChars=o.maxLength),8&o.flags?e.type="dynamic":e.type="input",512&o.flags?(e.html=!0,o.initialText&&""!=o.initialText&&(e.htmlText=o.initialText)):(e.html=!1,o.initialText&&""!=o.initialText&&(e.text=o.initialText)),e.name=n||"tf_"+t.id.toString(),e},t.prototype._createSound=function(t,e,n){var i=this.parser.awayUnresolvedSymbols[t.id];return i?(i.className=this.parser.symbolClassesMap[t.id]||null,i.name=i.className):console.warn("SWF-parser: no sound loaded for sound-id:",t.id),i},t.prototype._createButton=function(t,e,n){return(e=this.framesToTimeline(e,t,null,t.states,t.buttonActions,t.buttonSounds)).name=n||"instance_button_"+t.id.toString(),e.className=t.className,this._buttonIds[t.id]=!0,e},t.prototype._createLabel=function(t,e,n){var i=null,r=!1;(e=e||this.factory.createTextField(t)).className=t.className;for(var o=0;o<t.records.length;o++){var a=t.records[o];a.fontId&&(i=this.reqursive?this.createAwaySymbol(a.fontId):this.factory.awaySymbols[a.fontId])&&(a.font=i,a.font_table=i.away.get_font_table(i.fontStyleName,Rc.assetType),a.font_table||(r=!0,console.log("no font_table set")))}return e.staticMatrix=t.matrix,e.textOffsetX=t.fillBounds.xMin/20,e.textOffsetY=t.fillBounds.yMin/20,e.width=t.fillBounds.xMax/20-t.fillBounds.xMin/20-1,e.height=t.fillBounds.yMax/20-t.fillBounds.yMin/20-1,r||e.setLabelData(t),e.name=n||"instance_label_"+t.id.toString(),e.selectable=t.tag.flags&&!(4096&t.tag.flags),e},t.prototype._createImage=function(t,e,n){if(!(e=e||this.parser.awayUnresolvedSymbols[t.id])&&t.definition){var i=t.definition;(e=new Le(i.width,i.height,!0,null,!1)).addLazySymbol(t)}return e&&(e.className=this.parser.symbolClassesMap[t.id]?this.parser.symbolClassesMap[t.id]:t.className,e.name=e.className),e},t.prototype._createBinary=function(t,e,n){return this.factory.createBinarySymbol&&this.factory.createBinarySymbol(t),null},t.prototype._createVideo=function(t,e,n){var i=new Le(t.width,t.height,!1,65280,!1);return i._symbol=t,i.className=this.parser.symbolClassesMap[t.id]?this.parser.symbolClassesMap[t.id]:t.className,i.name=i.className,i},t.prototype.createAwaySymbol=function(t,e,n){if("number"==typeof t){if(!e&&this.factory.awaySymbols[t])return this.factory.awaySymbols[t];t=this.parser.getSymbol(t)}if(!t)throw new Error("Symbol can't be null");if(!e&&this.factory.awaySymbols[t.id])return this.factory.awaySymbols[t.id];var i;switch(t.type){case"morphshape":i=this._createShape(t,e,n||"instance_morphshape_"+t.id.toString());break;case"shape":i=this._createShape(t,e,n);break;case"font":i=this._createFont(t,e,n);break;case"sprite":i=this._createSprite(t,e,n);break;case"text":i=this._createText(t,e,n);break;case"sound":i=this._createSound(t,e,n);break;case"button":i=this._createButton(t,e,n);break;case"label":i=this._createLabel(t,e,n);break;case"image":i=this._createImage(t,e,n);break;case"binary":i=this._createBinary(t,e,n);break;case"video":i=this._createVideo(t,e,n);break;default:throw Error("Unknown symbol type:"+t.type)}return this.factory.awaySymbols[t.id]=i,this.parser.registerAwayAsset(i,t),i},t.prototype.framesToTimeline=function(t,e,n,i,r,o){var a=this;if(void 0===o&&(o=null),!i&&!n)throw"error when creating timeline - neither movieclip frames nor button-states present";var s,l=this.reqursive?function(t){return a.factory.awaySymbols[t]||a.createAwaySymbol(t)}:function(t){return a.factory.awaySymbols[t]},u=!1;if(e.isButton=!1,i&&!n){u=!0,e.isButton=!0,n=[];for(var c=0;c<4;c++){var h=new sf,p=lf[c];h.controlTags=i[p],h.controlTags||console.warn("[SymbolDecoder - parsing Button: no state provided for ",p),h.buttonStateName=p,n[n.length]=h}}(t=t||this.factory.createMovieClip(null,e)).symbolID=e.id;var d,f,_,g,m,y,A,v,b,x,C,I,E,w,S=0,D=t.timeline,T=[],P=[],B=[],O=[],M=[],L=[],R=[],N=[],F=[],k=[],U=[],V=[],j=[],G=[],Q=[],z=[],H=[],X=[],Y={},q=0,K=[],W=[],J=[],Z=[],$={},tt=0,et=n.length,nt=0,it=0,rt=null,ot=-1,at=-1,st=-1,lt=!0;yl.movieClipSoundsManagerClass=Jp;var ut,ct,ht,pt=1===et;for(f=0;f<et;f++){if(K.length=0,W.length=0,J.length=0,Z.length=0,n[f].soundStreamHead&&t.initSoundStream(n[f].soundStreamHead,et),n[f].soundStreamBlock&&t.addSoundStreamBlock(f,n[f].soundStreamBlock),n[f].initActionBlocks&&(D.avm1InitActions[f]=n[f].initActionBlocks),n[f].exports)for(s in D.avm1Exports[f]=n[f].exports,n[f].exports){var dt=n[f].exports[s],ft=l(dt.symbolId);ft?ft.isAsset&&(ft.name=dt.className):console.log("\n\nerror: no away-asset for export\n\n",n[f].exports[s])}if(y=!(n[f].controlTags&&0!=n[f].controlTags.length||n[f].labelNames&&0!=n[f].labelNames.length||n[f].actionBlocks&&0!=n[f].actionBlocks.length),0!=T.length&&y)if(u){for(s in nt=0,nt|=1,P.push(M.length),T[T.length]=1,B.push(nt),Y)d=Y[s];Y={},q++}else T[T.length-1]+=1;else{if(nt=0,u){for(s in nt|=1,Y)d=Y[s];Y={}}if(P.push(M.length),T[T.length]=1,!y&&n[f].labelNames&&n[f].labelNames.length>0)for(m=n[f].labelNames.length,g=0;g<m;g++){var _t=_=n[f].labelNames[g];this.parser.swfFile.useAVM1&&(_=_.toLowerCase()),D._labels[_]||(D._labels[_]={keyFrameIndex:q,name:_t})}if(!y&&n[f].actionBlocks&&n[f].actionBlocks.length>0&&D.add_framescript(n[f].actionBlocks,f,t,!0),o&&o[q]&&0!=o[q].id&&(rt=l(o[q].id))&&(D.audioPool[it]={cmd:15,id:o[q].id,sound:rt,props:o[q].info},Z.push(it++)),q++,!y&&n[f].controlTags&&n[f].controlTags.length>0){for(A=n[f].controlTags.length,v=0;v<A;v++)switch(w=void 0===(b=n[f].controlTags[v]).tagCode?b:this.parser.getParsedTag(b),pt=pt&&(4===w.code||26===w.code||70===w.code),w.code){case 15:rt=l(w.soundId),w.soundInfo&&32&w.soundInfo.flags?D.audioPool[it]={cmd:16,id:w.soundId,sound:l(w.soundId),props:w.soundInfo}:D.audioPool[it]={cmd:15,id:w.soundId,sound:l(w.soundId),props:w.soundInfo},Z.push(it++);break;case 16:D.audioPool[it]={cmd:16,id:w.soundId,sound:l(w.soundId),props:w.soundInfo},Z.push(it++);break;case 5:case 28:(d=Y[w.depth])||console.log("Error in timeline. remove cant find the object to remove"),this.parser.swfFile.useAVM1?K[K.length]={depth:0|w.depth}:K[K.length]={depth:0|d.sessionID},Y[w.depth]=null,$[w.depth.toString()]=null,delete Y[w.depth];break;case 4:case 26:case 70:if(x=w,d=Y[w.depth],C=x.symbolId>-1,1&x.flags&&!d)break;if(rt=null,ot=-1,at=-1,st=-1,C){if(!(rt=l(x.symbolId))){console.warn("Symbol missed:",x.symbolId);break}I=this.parser.dictionary[x.symbolId],rt.isAsset(zs)?(rt.tryOptimiseSigleImage=pt,at=x.symbolId,D.graphicsPool[x.symbolId]||(D.graphicsPool[x.symbolId]=rt),(E=this.factory.createSprite(null,rt,I)).mouseEnabled=!1,d&&d.awayChild.isAsset(Zs)?ot=d.sessionID:(null!=x&&(x.name&&""!=x.name||this._mcIds[x.symbolId]||this._buttonIds[x.symbolId])&&(x.name&&""!=x.name||(x.name="instance"+x.symbolId+"_"+tt++)),d&&(this.parser.swfFile.useAVM1?K[K.length]={depth:0|w.depth}:K[K.length]={depth:0|d.sessionID},Y[w.depth]=null,$[w.depth.toString()]=null,delete Y[w.depth]),ot=S++,(x.name||x.variableName||x.events&&x.events.length>0)&&(D.placeObjectTagsForSessionIDs[ot]=x),d=Y[w.depth]={sessionID:ot,id:x.symbolId,masks:[],isMask:!1,clipDepth:0,depth:0,awayChild:E,name:x.name?x.name:"noname"},W[W.length]={sessionID:ot,depth:w.depth,id:x.symbolId,name:x.name})):(x.name&&""!=x.name||(x.name="instance"+x.symbolId+"_"+tt++),ot=S++,(x.name||x.variableName||x.events&&x.events.length>0)&&(D.placeObjectTagsForSessionIDs[ot]=x),lt=!0,Y[w.depth]&&Y[w.depth].id==x.symbolId?lt=!1:Y[w.depth]&&(this.parser.swfFile.useAVM1?K[K.length]={depth:0|w.depth}:K[K.length]={depth:0|Y[w.depth].sessionID}),d=Y[w.depth]={sessionID:ot,id:x.symbolId,masks:[],isMask:!1,clipDepth:0,depth:0,awayChild:rt,name:x.name?x.name:"noname"},lt&&(W[W.length]={sessionID:ot,depth:w.depth,id:x.symbolId,name:x.name}))}if(16&x.flags&&(rt||(rt=l(d.id)),rt.isAsset(nl)&&(st=x.ratio)),!d)throw"error in add command";J[J.length]={child:d,placeObjectTag:x,swapGraphicsID:at,ratio:st,depth:w.depth};break;default:console.log("unknown timeline command tag",w)}var gt=N.length,mt=K.length;if(mt){gt=N.length;for(var yt=0;yt<mt;yt++)N.push(K[yt].depth);nt|=2,O.push(N.length-gt),M.push(gt)}if(mt=W.length){gt=L.length;for(yt=0;yt<mt;yt++)L.push(W[yt].sessionID),L.push(W[yt].depth),L.push(W[yt].id);nt|=4,O.push(mt),M.push(gt/3)}for(s in mt=J.length,Y)Y[s].oldMasks=Y[s].masks,Y[s].masks=[],Y[s].maskingChanged=!1;if(mt)for(yt=0;yt<mt;yt++)x=J[yt].placeObjectTag,(d=J[yt].child).maskingChanged=!0,64&x.flags&&(Y[x.depth].isMask=!0,Y[x.depth].clipDepth=x.clipDepth-1,Y[x.depth].depth=x.depth);for(s in Y)if(Y[s].isMask)for(var At=Y[s].clipDepth;At>Y[s].depth;)Y[At]&&Y[At].masks.push(Y[s].sessionID),At--;var vt=0,bt=0,xt=[];for(s in Y){var Ct=Y[s];if(Ct.masks.sort(),Ct.oldMasks.sort(),Ct.masks.length!=Ct.oldMasks.length)xt.push(Ct),Ct.maskingChanged=!0;else for(vt=0,bt=Ct.masks.length,vt=0;vt<bt;vt++)if(Ct.masks[vt]!=Ct.oldMasks[vt]){xt.push(Ct),Ct.maskingChanged=!0;break}}for(bt=xt.length,vt=0;vt<bt;vt++){var It=!1;if(mt)for(yt=0;yt<mt;yt++)J[yt].child==xt[vt]&&(It=!0);It||(J[J.length]={child:xt[vt],placeObjectTag:null,swapGraphicsID:null,ratio:null,depth:null})}if(mt=J.length){gt=F.length;var Et=0;for(yt=0;yt<mt;yt++){var wt=J[yt];x=wt.placeObjectTag,d=wt.child;var St=V.length,Dt=0;null!=wt.swapGraphicsID&&wt.swapGraphicsID>=0&&(Dt++,V.push(202),j.push(G.length),G.push(wt.swapGraphicsID));var Tt=x&&(this._buttonIds[x.symbolId]||this._mcIds[x.symbolId]);if(x&&(x.name&&""!=x.name||Tt)&&(Dt++,this._buttonIds[x.symbolId]?V.push(5):V.push(4),j.push(X.length),X.push(x.name)),null!=x&&4&x.flags)Dt++,V.push(1),j.push(z.length/6),0==x.matrix.a&&0==x.matrix.b&&0==x.matrix.c&&0!=x.matrix.d?x.matrix.a=1:0==x.matrix.d&&0==x.matrix.b&&0==x.matrix.c&&0!=x.matrix.a&&(x.matrix.d=1),uf(z,z.length,x.matrix),$[wt.depth.toString()]=x.matrix;else if(null!=wt.depth){var Pt=$[wt.depth.toString()];Pt&&(Dt++,V.push(1),j.push(z.length/6),uf(z,z.length,Pt))}if(null!=x&&8&x.flags&&(V.push(2),j.push(H.length/8),Dt++,ut=H,ct=H.length,ht=x.cxform,ut[ct++]=ht.redMultiplier/256,ut[ct++]=ht.greenMultiplier/256,ut[ct++]=ht.blueMultiplier/256,ut[ct++]=ht.alphaMultiplier/256,ut[ct++]=ht.redOffset,ut[ct++]=ht.greenOffset,ut[ct++]=ht.blueOffset,ut[ct++]=ht.alphaOffset),null!=wt.ratio&&wt.ratio>=0&&(Dt++,V.push(203),j.push(G.length),G.push(0|wt.ratio)),d.maskingChanged){Dt++,V.push(3),j.push(G.length),G.push(d.masks.length);for(var Bt=0,Ot=d.masks;Bt<Ot.length;Bt++){var Mt=Ot[Bt];G.push(Mt)}}if(null!=x&&64&x.flags&&(Dt++,V.push(200),j.push(0)),null!=x&&256&x.flags){Dt++,V.push(9),j.push(G.length),G.push(Q.length),G.push(x.filters.length);for(var Lt=0;Lt<x.filters.length;Lt++)Q.push(x.filters[Lt])}null!=x&&8192&x.flags&&(Dt++,V.push(6),j.push(x.visibility?1:0)),null!=x&&512&x.flags&&(Dt++,V.push(7),j.push(x.blendMode)),Dt>0&&(Et++,F.push(d.sessionID),k.push(St),U.push(Dt))}Et>0&&(nt|=8,O.push(mt),M.push(gt))}if(mt=Z.length){nt|=16,gt=R.length;for(yt=0;yt<mt;yt++)R.push(Z[yt]);O.push(mt),M.push(gt)}}0==B.length&&(nt|=1),B.push(nt)}}var Rt=["_up","_over","_down","_hit"];if(4==et){var Nt=0;for(f=0;f<et;f++)n[f].labelNames&&n[f].labelNames.length>0&&n[f].labelNames[0]==Rt[f]&&Nt++;4==Nt&&(u=!0)}return D.numKeyFrames=q,D.keyframe_durations=new Uint32Array(T),D.frame_command_indices=new Uint32Array(P),D.frame_recipe=new Uint32Array(B),D.command_length_stream=new Uint32Array(O),D.command_index_stream=new Uint32Array(M),D.add_child_stream=new Uint32Array(L),D.add_sounds_stream=new Uint32Array(R),D.remove_child_stream=new Uint32Array(N),D.update_child_stream=new Uint32Array(F),D.update_child_props_indices_stream=new Uint32Array(k),D.update_child_props_length_stream=new Uint32Array(U),D.property_type_stream=new Uint32Array(V),D.property_index_stream=new Uint32Array(j),D.properties_stream_int=new Uint32Array(G),D.properties_stream_f32_mtx_scale_rot=new Float32Array([]),D.properties_stream_f32_mtx_pos=new Float32Array([]),D.properties_stream_f32_mtx_all=new Float32Array(z),D.properties_stream_f32_ct=new Float32Array(H),D.properties_stream_strings=X,D.properties_stream_filters=Q,D.init(),u?(t.buttonMode=!0,D.isButton=!0,r&&(D.avm1ButtonActions=r),D.extractHitArea(t)):t.mouseEnabled=!1,t},t}(),pf=function(){function t(t,e){void 0===e&&(e=!1),this.name=t,this._subrecord=e,this._records={},this._startTime=0,this._endTime=0,this._subs=[],this._state=0}return t.prototype.rec=function(e,n){if(void 0===n&&(n=!1),this._subrecord)throw"Suprecord can't support nested records!";var i=this._subs[this._subs.length-1];return i&&1===i._state||(i=this),i._records[e]||(i._records[e]=new t(e,n))},t.prototype.begin=function(){if(0===this._state){if(!this._subrecord){this._subs[this._subs.length-1]&&this._subs[this._subs.length-1].end();var t=this.rec(this.name+"_"+this._subs.length,!0);return this._subs.push(t),t.begin()}return this._state=1,this._startTime=performance.now()}},t.prototype.end=function(){for(var t in this._records)this._records[t].end();if(1===this._state)return this._subrecord?(this._state=2,this._endTime=performance.now(),this._endTime-this._startTime):this._subs[this._subs.length-1].end()},t.prototype.drop=function(){if(this.end(),!this._subrecord)return this._subs[this._subs.length-1].drop();this._state=3,this._startTime=this._endTime=0},Object.defineProperty(t.prototype,"startTime",{get:function(){if(3==this._state)return 0;var t=this._startTime||Number.MAX_VALUE;for(var e in this._records){var n=this._records[e];t=Math.min(t,n.startTime)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){if(3==this._state)return 0;var t=this._endTime||-Number.MAX_VALUE;for(var e in this._records){var n=this._records[e];t=Math.max(t,n.endTime)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){if(3==this._state)return 0;if(!Object.keys(this._records).length)return this._endTime-this._startTime;var t=0;for(var e in this._records)t+=this._records[e].duration;return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selfDuration",{get:function(){return Object.keys(this._records).length?this.endTime-this.startTime:this._endTime-this._startTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"density",{get:function(){return 3==this._state?0:this.duration/this.selfDuration},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.selfDuration;return"Name: ".concat(this.name,", duration: ").concat(this.duration.toFixed(2),"ms, self: ").concat(t.toFixed(2),"ms, density:").concat((100*this.density).toFixed(0),"%")},t.prototype.toTable=function(t,e){void 0===t&&(t=0);var n="  ".repeat(t)+this.toString()+"\n";if(1===this._subs.length&&1===Object.keys(this._records).length)return n;for(var i in this._records){var r=this._records[i];3!==r._state&&(e&&e(r)||(n+=r.toTable(t+1,e)))}return n},t}(),df=function(t){function e(){var e=t.call(this,"ROOT")||this;return window.AWAY_ROOT_STAT=e,e}return o(e,t),e.rec=function(t){return this._instance||(this._instance=new e),this._instance.rec(t)},e}(pf),ff=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),_f=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);function gf(t,e,n){var i,r,o,a=ff,s=_f,l=1732584193,u=-271733879,c=-1732584194,h=271733878,p=n+72&-64,d=new Uint8Array(p);for(i=0;i<n;++i)d[i]=t[e++];for(d[i++]=128,o=p-8;i<o;)d[i++]=0;d[i++]=n<<3&255,d[i++]=n>>5&255,d[i++]=n>>13&255,d[i++]=n>>21&255,d[i++]=n>>>29&255,d[i++]=0,d[i++]=0,d[i++]=0;var f=new Int32Array(16);for(i=0;i<p;){for(r=0;r<16;++r,i+=4)f[r]=d[i]|d[i+1]<<8|d[i+2]<<16|d[i+3]<<24;var _,g,m=l,y=u,A=c,v=h;for(r=0;r<64;++r){r<16?(_=y&A|~y&v,g=r):r<32?(_=v&y|~v&A,g=5*r+1&15):r<48?(_=y^A^v,g=3*r+5&15):(_=A^(y|~v),g=7*r&15);var b=v,x=m+_+s[r]+f[g]|0,C=a[r];v=A,A=y,y=y+(x<<C|x>>>32-C)|0,m=b}l=l+m|0,u=u+y|0,c=c+A|0,h=h+v|0}return new Uint32Array([l,u,c,h])}var mf={_md5R:ff,_md5K:_f,hashBytesTo32BitsMD5:function(t,e,n){return gf(t,e,n)[0]},hashBytesTo128BitsMD5:gf,mixHash:function(t,e){return(31*t|0)+e|0}},yf=function(t){function e(n){void 0===n&&(n=null);var i=t.call(this,ot.ARRAY_BUFFER)||this;return i._awayUnresolvedSymbols={},i._isEncrypted=!1,i._currentEncrActionBlocks=[],i.soundExports={},i.id=0,i.externalDependenciesCount=0,i._lockFinalize=!1,i.textFormatAlignMap=[Tl.LEFT,Tl.RIGHT,Tl.CENTER,Tl.JUSTIFY],i._buttonSounds={},i.id=e.ID++,i._swfFile=new Mh,i._factory=n,i._progressState=0,i._symbolDecoder=new hf(i),i}return o(e,t),Object.defineProperty(e.prototype,"awayUnresolvedSymbols",{get:function(){return this._awayUnresolvedSymbols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"swfFile",{get:function(){return this._swfFile},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"factory",{get:function(){return this._factory},set:function(t){this._factory=t,e.factory=t,this._progressState=5,this.hasTime()&&this.proceedParsing()},enumerable:!1,configurable:!0}),e.prototype.onFactoryRequest=function(t){this.factory=e.factory||new wh},e.supportsType=function(t){return t=t.toLowerCase(),console.log("SWFParser supportsType extension: ",t,"result: ","swf"==t),"swf"==t},e.supportsData=function(t){return(67===t[0]||70===t[0]||90===t[0])&&87===t[1]&&83===t[2]},e.prototype.resolveDependency=function(t){if(1!=t.assets.length)throw"SWFParser: error when resolving dependency";var e=this.eagerlyParsedSymbolsMap[t.id];if(e)switch(e.type){case"image":var n=t.assets[0];this._awayUnresolvedSymbols[t.id]=n;break;case"font":break;case"sound":var i=t.assets[0];this._awayUnresolvedSymbols[t.id]=i;break;default:console.log("finished unknown parsing",t)}else console.log("no eagerlyParsedSymbolsMap for id",t.id);this.externalDependenciesCount--,0==this.externalDependenciesCount&&(this.parseSymbolsToAwayJS(),this._progressState=6,this.finishParsing())},e.prototype.resolveDependencyFailure=function(t){this.externalDependenciesCount--,0==this.externalDependenciesCount&&(this.parseSymbolsToAwayJS(),this._progressState=6,this.finishParsing())},e.prototype.resolveDependencyName=function(t,e){var n=e.name,i=e.name;return e.name=n,i},e.prototype.proceedParsing=function(){if(0===this._progressState){this._progressState=1;var t=this.getByteData(),n=new Uint8Array(t.arraybytes,0,t.length);if(!e.supportsData(n)){var i=n.slice(0,3).reduce((function(t,e){return t+String.fromCharCode(e)}),"");return void this.dieWithError("SWFParser unknown file type: "+i)}df.rec("parser").begin(),this._swfFile.url=this.fileName,this.initSWFLoading(n,n.length)}else if(2===this._progressState)if(this._progressState=3,this._factory)this.parseSymbols();else{if(!this.onFactoryRequest)throw"Error in SWFParser. no factory and noFactoryRequest method exists.";this.onFactoryRequest(this._swfFile)}else if(5===this._progressState){if(!this.onFactoryRequest)throw"Error in SWFParser. no factory and noFactoryRequest method exists.";this._factory&&this.parseSymbols(),df.rec("parser").end()}},e.prototype.parseSymbols=function(){if(df.rec("parser").rec("symbols").begin(),this._factory.url=this.fileName,this._content=this._factory.createDisplayObjectContainer(),this._awayUnresolvedSymbols={},this.abcBlocks.length&&this._factory.executeABCBytes&&this._factory.executeABCBytes(this.abcBlocks),this.externalDependenciesCount=0,this.eagerlyParsedSymbolsList.length>0)for(var t=0;t<this.eagerlyParsedSymbolsList.length;t++){var e=this.eagerlyParsedSymbolsList[t];if(e)switch(e.type){case"image":this.addDependency(e.id.toString(),null,new Li(this._factory,e.definition.alphaData),new Blob([e.definition.data],{type:e.definition.mimeType}),!1,!0),this.externalDependenciesCount++;break;case"sound":var n=e;if(!n.definition.packaged){console.warn("SWF-parser: Missed packaged data for sound-id:",n.id.toString());break}this.addDependency(n.id.toString(),null,new id,n,!1,!0),this.externalDependenciesCount++;break;case"font":break;default:console.log("encountered eagerly parsed unknown type: ",e)}}this.externalDependenciesCount>0?(this._progressState=4,this.pauseAndRetrieveDependencies()):(this.parseSymbolsToAwayJS(),this._progressState=6,df.rec("parser").rec("symbols").end(),this.finishParsing())},e.prototype.registerAwayAsset=function(t,e){this._lockFinalize||("font"!==e.type?this.finalizeAsset(t):this.finalizeAsset(e.away))},e.prototype.parseSymbolsToAwayJS=function(){df.rec("parser").rec("symbols").rec("away").begin();var t=0,e=Object.keys(this.dictionary).length,n=e/100|0,i={};this._symbolDecoder.reqursive=!1,this._lockFinalize=!0,console.debug("[Away Symbols] Start");for(var r=0,o=this.dictionary;r<o.length;r++){var a=o[r];if(a){t++,!n||t%100||console.debug("[Away Symbols] Decoded (".concat(t,"/").concat(e,"), ").concat(100*t/e|0));var s=this.getSymbol(a.id),l=this._symbolDecoder.createAwaySymbol(s,null,null);l&&("font"!==s.type?i[a.id]=l:i[s.name]=s.away)}}var u=this.dictionary[0]||{id:0,className:this.symbolClassesMap[0]},c=this._symbolDecoder.framesToTimeline(null,u,this._swfFile.frames,null,null);for(var h in c.isAVMScene=!0,i)this.finalizeAsset(i[h]);this._swfFile.sceneAndFrameLabelData&&(c.scenes=this._swfFile.sceneAndFrameLabelData.scenes),this.finalizeAsset(c,"scene"),this._lockFinalize=!1,this._symbolDecoder.reqursive=!0,df.rec("parser").rec("symbols").rec("away").end()},e.prototype.dispose=function(){this.swfData=null,this._dataStream=null},e.prototype.updateTimers=function(t){},e.prototype.initSWFLoading=function(t,e){So(67===t[0]||70===t[0]||90===t[0],"Unsupported compression format: "+t[0]),So(87===t[1]),So(83===t[2]),So(t.length>=30,"At least the header must be complete here."),this._swfFile.bytesTotal=e,this._swfFile.frames=[],this.abcBlocks=[],this.dictionary=[],this.fonts=[],this.symbolClassesMap=[],this.symbolClassesList=[],this.eagerlyParsedSymbolsMap=[],this.eagerlyParsedSymbolsList=[],this._jpegTables=null,this._currentFrameLabels=[],this._currentSoundStreamHead=null,this._currentSoundStreamBlock=null,this._currentControlTags=null,this._currentActionBlocks=null,this._currentInitActionBlocks=null,this._currentExports=null,this._endTagEncountered=!1,this._isEncrypted=!1,this._currentEncrActionBlocks=null,this._readHeaderAndInitialize(t)},e.prototype.computeHash=function(t){if(!crypto||!crypto.subtle){console.warn("[SWF Loader] crypto.subtle unavailable, use MD5");var e=mf.hashBytesTo128BitsMD5(t,0,t.length),n=Array.from(new Uint8Array(e.buffer));return Promise.resolve("MD5:"+n.map((function(t){return t.toString(16)})).join(""))}return crypto.subtle.digest("SHA-1",t).then((function(t){return"SHA-1:"+Array.from(new Uint8Array(t)).map((function(t){return t.toString(16)})).join("")}))},e.prototype.finishLoading=function(){var t=this;this._decompressor&&(this._decompressor.close(),this._decompressor=null),this.computeHash(this.swfData).then((function(e){t.swfFile.hash=e,t._progressState=2,t._scanLoadedData(),t.hasTime()&&t.proceedParsing()}))},e.prototype.getSymbol=function(t){if(this.eagerlyParsedSymbolsMap[t])return this.eagerlyParsedSymbolsMap[t];var e,n=this.dictionary[t];return n?((e=39===n.tagCode?this._parseSpriteTimeline(n):this.getParsedTag(n)).className=this.symbolClassesMap[t]||null,e.env=this.env,this._buttonSounds[e.id]&&(e.buttonSounds=this._buttonSounds[e.id]),n.scalingGrid&&(e.scalingGrid=n.scalingGrid),e):null},e.prototype.getParsedTag=function(t){this._dataStream.align(),this._dataStream.pos=t.byteOffset;var e=Qd[t.tagCode],n=Math.min(t.byteOffset+t.byteLength,this._dataStream.end),i=e(this._dataStream,this._swfFile.swfVersion,t.tagCode,n,this._jpegTables);this._dataStream.pos!==n&&this._emitTagSlopWarning(t,n);var r=function(t,e,n){var i;switch(t.code){case 6:case 21:case 35:case 90:i=af(t);break;case 20:case 36:i=function(t){var e,n=To.None;switch(t.format){case 3:e=Jd,n=To.PremultipliedAlphaARGB;break;case 5:e=Zd,n=To.PremultipliedAlphaARGB;break;case 4:e=$d,n=To.PremultipliedAlphaARGB;break;default:console.log("invalid bitmap format")}var i={definition:{type:"image",id:t.id,width:t.width,height:t.height,mimeType:"application/octet-stream",data:null,dataType:n,isPMA:n===To.PremultipliedAlphaARGB,image:null},needParse:!0,lazyParser:function(){var n=this;return this.needParse=!1,this.definition.data=e(t),this.lazyParser=function(){return n},i},type:"image",id:t.id};return i}(t);break;case 7:case 34:i=function(t,e){for(var n,i=t.characters,r={up:[],over:[],down:[],hitTest:[]},o=0;n=i[o++];){var a=e[n.symbolId];if(a){var s={symbolId:a.id,code:4,depth:n.depth,flags:0,matrix:null,cxform:null,blendMode:null,filters:null};n.filters&&(s.flags|=256,s.filters=n.filters),n.blendMode&&(s.flags|=512,s.blendMode=n.blendMode),n.matrix&&(s.flags|=4,s.matrix=n.matrix),n.cxform&&(s.flags|=8,s.cxform=n.cxform),1&n.flags&&r.up.push(s),2&n.flags&&r.over.push(s),4&n.flags&&r.down.push(s),8&n.flags&&r.hitTest.push(s)}else console.log("undefined character in button "+t.id)}return{type:"button",id:t.id,buttonActions:t.buttonActions,states:r}}(t,e);break;case 37:i=function(t){return{type:"text",id:t.id,fillBounds:t.bbox,variableName:t.variableName,tag:t,bold:!1,italic:!1}}(t);break;case 10:case 48:case 75:case 91:i=Wd(t,n.fileName);break;case 46:case 84:case 2:case 22:case 32:case 83:i=function(t,e){var n=8&t.flags;return t.factory=e,t.type=n?"morphshape":"shape",t}(t,n.factory);break;case 14:i=kp(t);break;case 60:return{type:"video",id:t.id,width:t.width,height:t.height,deblocking:t.deblocking,smoothing:t.smoothing,codec:t.codecId};case 39:default:return t;case 87:return{type:"binary",id:t.id,data:t.data};case 11:case 33:i=function(t){return{type:"label",id:t.id,fillBounds:t.bbox,matrix:t.matrix,tag:{hasText:!0,initialText:"",html:!0,readonly:!0},records:t.records,coords:null,static:!0,require:null}}(t)}return i}(i,this.dictionary,this);return r},e.prototype._readHeaderAndInitialize=function(t){var e,n=this,i=this._swfFile;if(i.swfVersion=t[3],i.mapSWFVersionToFPVersion(),this._loadStarted=Date.now(),this._uncompressedLength=((e=t)[4]|e[5]<<8|e[6]<<16|e[7]<<24)>>>0,67===t[0]?(this._decompressor=ca.create(!0,this._uncompressedLength,!0),i.compression=Th.Deflate):90===t[0]&&(this._decompressor=new Fa(!0),i.compression=Th.LZMA),i.bytesLoaded=t.length,this.swfData=new Uint8Array(i.compression===Th.None?i.bytesTotal:this._uncompressedLength),this._dataStream=new dd(this.swfData.buffer),this._dataStream.pos=8,this._dataView=this._dataStream.view,this._decompressor){this.swfData.set(t.subarray(0,8)),this._uncompressedLoadedLength=8,this._decompressor.onData=function(t){df.rec("parser").rec("unzip").begin(),n._processDecompressedData(t),n._decompressor.onData=n._processDecompressedData.bind(n)},this._decompressor.onError=function(t){throw new Error(t+" from:"+n.id)};var r=t.subarray(8);this._decompressor.push(r)}else this.swfData.set(t),this._uncompressedLoadedLength=t.length,this._decompressor=null,this.parseHeaderContents(),this.finishLoading()},e.prototype.parseHeaderContents=function(){var t=function(t){var e=t.readUb(5),n=t.readSb(e),i=t.readSb(e),r=t.readSb(e),o=t.readSb(e);t.align();var a=t.readUi8();return{frameRate:t.readUi8()+a/256,frameCount:t.readUi16(),bounds:new Po(n,r,i,o)}}(this._dataStream);this._swfFile.bounds=this._swfFile.bounds=t.bounds,this._swfFile.frameRate=this._swfFile.frameRate=t.frameRate,this._swfFile.frameCount=this._swfFile.frameCount=t.frameCount,this._lastScanPosition=this._dataStream.pos},e.prototype._processDecompressedData=function(t){df.rec("parser").rec("unzip").end();var e=Math.min(t.length,this._uncompressedLength-this._uncompressedLoadedLength);Do(this.swfData,t,this._uncompressedLoadedLength,0,e),this._uncompressedLoadedLength+=e,this._uncompressedLoadedLength===this._uncompressedLength&&(this._decompressor&&(this._decompressor.onData=null),this.parseHeaderContents(),this.finishLoading())},e.prototype._scanLoadedData=function(){this._dataStream.pos=this._lastScanPosition,df.rec("parser").rec("scanTags").begin(),this._scanTagsToOffset(this._uncompressedLoadedLength,!0),df.rec("parser").rec("scanTags").end(),this._lastScanPosition=this._dataStream.pos},e.prototype._scanTagsToOffset=function(t,e){for(var n,i=new Qo(0,0,0);(n=this._dataStream.pos)<t-1&&this.parseNextTagHeader(i);){if(0===i.tagCode)return void(e&&(this._endTagEncountered=!0));var r=i.byteOffset+i.byteLength;if(r>t)return void(this._dataStream.pos=n);this._scanTag(i,e),this._dataStream.pos!==r&&this._emitTagSlopWarning(i,r)}},e.prototype.parseNextTagHeader=function(t){var e=this._dataStream.pos,n=this._dataView.getUint16(e,!0);e+=2,t.tagCode=n>>6;var i=63&n;if(63===i){if(e+4>this._uncompressedLoadedLength)return!1;i=this._dataView.getUint32(e,!0),e+=4}return this._dataStream.pos=e,t.byteOffset=e,t.byteLength=i,!0},e.prototype.Utf8ArrayToStr=function(t){var e,n,i,r,o;e="";var a=t.length;for(n=0;n<a;)switch((i=t[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(i);break;case 12:case 13:r=t[n++],e+=String.fromCharCode((31&i)<<6|63&r);break;case 14:r=t[n++],o=t[n++],e+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o)}return e},e.prototype._scanTag=function(t,e){var n,i,r=this._dataStream,o=r.pos;So(o===t.byteOffset);var a=t.tagCode,s=t.byteLength;if(39===a){this._addLazySymbol(a,o,s);var l=o+s;return r.pos+=4,this._scanTagsToOffset(l,!1),void(this._dataStream.pos!==l&&this._emitTagSlopWarning(t,l))}if(cd[a]){var u=this._addLazySymbol(a,o,s);this._decodeEmbeddedImage(u)}else{if(14===a){u=this._addLazySymbol(a,o,s);var c=this.getParsedTag(u),h=new Ho(c.id,u,"sound",c);return this.eagerlyParsedSymbolsMap[h.id]=h,void this.eagerlyParsedSymbolsList.push(h)}if(hd[a]){u=this._addLazySymbol(a,o,s);this.registerEmbeddedFont(u)}else{if(ud[a])return this._addLazySymbol(a,o,s),void this._jumpToNextTag(s);if(e||76===a||56===a)if(pd[a])this._addControlTag(a,o,s);else switch(a){case 69:this._setFileAttributes(s);break;case 86:this._setSceneAndFrameLabelData(s);break;case 9:this._swfFile.backgroundColor=this._swfFile.backgroundColor=_d(this._dataStream);break;case 8:this._jpegTables||(this._jpegTables=0===s?new Uint8Array(0):this.swfData.subarray(r.pos,r.pos+s-2)),this._jumpToNextTag(s);break;case 82:case 72:if(this._swfFile.useAVM1)this._jumpToNextTag(s);else{var p=o+s,d=new jo;82===a?(d.flags=r.readUi32(),d.name=r.readString(-1)):(d.flags=0,d.name=""),d.data=this.swfData.subarray(r.pos,p),this.abcBlocks.push(d),r.pos=p}break;case 76:for(var f=o+s,_=r.readUi16();_--;){var g=r.readUi16(),m=r.readString(-1);this.symbolClassesMap[g]=m,this.symbolClassesList.push({id:g,className:m})}r.pos=f;break;case 59:if(this._swfFile.useAVM1){var y=this._currentInitActionBlocks||(this._currentInitActionBlocks=[]),A=this._dataView.getUint16(r.pos,!0),v=this.swfData.subarray(o+2,o+s),b=this._isEncrypted?null===(n=this._currentEncrActionBlocks)||void 0===n?void 0:n.pop():void 0;y.push({spriteId:A,actionsData:v,encryptedData:b})}this._jumpToNextTag(s);break;case 12:if(this._swfFile.useAVM1){var x=this._currentActionBlocks||(this._currentActionBlocks=[]);v=this.swfData.subarray(r.pos,r.pos+s),b=this._isEncrypted?null===(i=this._currentEncrActionBlocks)||void 0===i?void 0:i.pop():void 0;x.push({actionsData:v,precedence:r.pos,encryptedData:b})}this._jumpToNextTag(s);break;case 18:case 45:var C=Od(this._dataStream,o+s);this._currentSoundStreamHead=Gp.FromTag(C);break;case 19:this._currentSoundStreamBlock=this.swfData.subarray(r.pos,r.pos+=s);break;case 43:f=r.pos+s;this._currentFrameLabels[this._currentFrameLabels.length]=r.readString(-1),r.pos=f;break;case 1:this._finishFrame();break;case 0:return;case 56:f=r.pos+s;for(var I=r.readUi16(),E=this._currentExports||(this._currentExports=[]);I--;){g=r.readUi16();var w=r.readString(-1);if(r.pos>f){r.pos=f;break}E.push(new Go(g,w))}r.pos=f;break;case 17:f=r.pos+s;var S=r.readUi16();this._buttonSounds[S]={};for(var D=0;D<4;D++)this._buttonSounds[S][D]={},this._buttonSounds[S][D].id=r.readUi16(),0!=this._buttonSounds[S][D].id&&(this._buttonSounds[S][D].info=Bd(r));r.pos=f;break;case 78:var T=this.getParsedTag(t);this.dictionary[T.symbolId].scalingGrid=T.splitter;break;case 23:case 13:case 62:case 57:case 71:case 74:case 73:case 65:case 66:case 58:case 64:case 63:case 88:case 40:case 41:case 24:case 25:case 93:case 55:case 49:case 51:case 44:case 50:case 53:case 42:case 38:case 52:case 3:case 31:case 47:case 16:case 29:this._jumpToNextTag(s);break;case 77:this._parseMetaData(s);break;case 255:console.log("Tag 255 present. SWF is encrypted"),this._isEncrypted=!0,this._jumpToNextTag(s);break;case 253:if(this._isEncrypted){var P=this._currentEncrActionBlocks||(this._currentEncrActionBlocks=[]),B=this.swfData.subarray(o+2,o+s);P.push({data:B,bytePos:o+2,size:s,rawTagId:a})}this._jumpToNextTag(s);break;default:a>100?console.log("Encountered undefined tag "+a+", probably used for AVM1 obfuscation. See http://ijs.mtasa.com/files/swfdecrypt.cpp."):console.log("Tag not handled by the parser: "+a+": "+function(t){return"SwfTagCode: "+t}(a)),this._jumpToNextTag(s)}else this._jumpToNextTag(s)}}},e.prototype._parseSpriteTimeline=function(t){var e=this.swfData,n=this._dataStream,i=this._dataView,r={id:t.id,type:"sprite",frames:[]},o=t.byteOffset+t.byteLength,a=r.frames,s=[],l=[],u=null,c=null,h=null,p=null;n.pos=t.byteOffset+2,r.frameCount=i.getUint16(n.pos,!0),n.pos+=2;for(var d=new Qo(0,0,0);n.pos<o;){this.parseNextTagHeader(d);var f=d.byteLength,_=d.tagCode;if(n.pos+f>o){console.log("DefineSprite child tags exceed DefineSprite tag length and are dropped");break}if(pd[_])l.push(new Qo(_,n.pos,f)),n.pos+=f;else{switch(_){case 12:if(this._swfFile.useAVM1){h||(h=[]);var g=e.subarray(n.pos,n.pos+f);h.push({actionsData:g,precedence:n.pos})}break;case 59:if(this._swfFile.useAVM1){p||(p=[]);var m=i.getUint16(n.pos,!0);n.pos+=2;g=e.subarray(n.pos,n.pos+f);p.push({spriteId:m,actionsData:g})}break;case 43:var y=n.pos+f;s[s.length]=n.readString(-1),n.pos=y,f=0;break;case 1:a.push(new sf(l,s.concat(),u,c,h,p,null)),s.length=0,l=[],u=null,c=null,h=null,p=null;break;case 0:n.pos=o,f=0;break;case 18:case 45:var A=n.pos,v=Od(n,y=n.pos+f);u=Gp.FromTag(v),n.pos=A;break;case 19:A=n.pos,y=n.pos+f;c=this.swfData.subarray(n.pos,y),n.pos=A}n.pos+=f,So(n.pos<=o)}}return r},e.prototype._parseMetaData=function(t){this._dataStream.pos+=t},e.prototype._jumpToNextTag=function(t){this._dataStream.pos+=t},e.prototype._emitTagSlopWarning=function(t,e){this._dataStream.pos=e},e.prototype._finishFrame=function(){0===this.pendingUpdateDelays&&this._swfFile.framesLoaded++,this._swfFile.frames.push(new sf(this._currentControlTags,this._currentFrameLabels.concat(),this._currentSoundStreamHead,this._currentSoundStreamBlock,this._currentActionBlocks,this._currentInitActionBlocks,this._currentExports)),this._currentFrameLabels.length=0,this._currentControlTags=null,this._currentSoundStreamHead=null,this._currentSoundStreamBlock=null,this._currentActionBlocks=null,this._currentInitActionBlocks=null,this._currentExports=null},e.prototype._setFileAttributes=function(t){this._swfFile.attributes&&this._jumpToNextTag(t);var e=this.swfData[this._dataStream.pos];this._dataStream.pos+=4,this._swfFile.attributes={network:1&e,relativeUrls:2&e,noCrossDomainCaching:4&e,doAbc:8&e,hasMetadata:16&e,useGpu:32&e,useDirectBlit:64&e},this._swfFile.useAVM1=!this._swfFile.attributes.doAbc},e.prototype._setSceneAndFrameLabelData=function(t){this._swfFile.sceneAndFrameLabelData?this._jumpToNextTag(t):this._swfFile.sceneAndFrameLabelData=this._swfFile.sceneAndFrameLabelData=Nd(this._dataStream,86)},e.prototype._addControlTag=function(t,e,n){(this._currentControlTags||(this._currentControlTags=[])).push(new Qo(t,e,n)),this._jumpToNextTag(n)},e.prototype._addLazySymbol=function(t,e,n){var i=this._dataView.getUint16(this._dataStream.pos,!0),r=new zo(i,t,e,n);return this.dictionary[i]=r,r},e.prototype.decodeEmbeddedFont=function(t){var e=this.getParsedTag(t),n=new Ho(e.id,t,"font",e);this.eagerlyParsedSymbolsMap[n.id]=n,this.eagerlyParsedSymbolsList.push(n);var i=Af(e.bold,e.italic);this.fonts.push({name:e.name,id:e.id,style:i})},e.prototype.registerEmbeddedFont=function(t){var e,n,i=this._dataStream,r=this._dataView.getUint16(i.pos,!0);if(10===t.tagCode)n="__autofont__"+t.byteOffset,e="regular";else{var o=this.swfData[i.pos+2];e=Af(!!(1&o),!!(2&o));var a=this.swfData[i.pos+4];i.pos+=5,n=i.readString(a)}this.fonts.push({name:n,id:r,style:e}),i.pos=t.byteOffset+t.byteLength},e.prototype._decodeEmbeddedImage=function(t){var e=this.getParsedTag(t),n=new Ho(e.id,t,"image",e);this.eagerlyParsedSymbolsMap[n.id]=n,this.eagerlyParsedSymbolsList.push(n)},e.factory=null,e.ID=0,e}(yt);function Af(t,e){return t&&e?"boldItalic":t?"bold":e?"italic":"regular"}var vf=[];function bf(t,e){var n=void 0;return(e?vf.concat(e):vf).forEach((function(e){var i=e.test,r=e.resolve,o=e.supressErrors,a=void 0!==o&&o,s=e.supressLoad,l=void 0!==s&&s,u=!1;"function"==typeof i?u=i(t):i instanceof RegExp?u=i.test(t):"string"==typeof i&&(u=i===t),u&&(n&&console.warn("[LOADER] Duplicate redirect rules, latest rule would be used!"),n={url:t,supressErrors:a,supressLoad:l},"function"==typeof r?n.url=r(t):r instanceof RegExp?n.url=t.match(r)[0]:"string"==typeof r?n.url=r:"string"==typeof u&&(n.url=u),void 0===n.url&&(console.warn("[LOADER] Redirect url is null, would be used  original url!"),n.url=t))})),n}function xf(t,e){return"string"==typeof t&&t.includes("%")?e*parseFloat(t)/100:+t}var Cf=function(t){function e(n){var i=t.call(this)||this;return i._trapResize=!1,i._volume=1,i._gameConfig=null,i._curFile=null,i._requestedRender=!1,e._instance=i,ht.enableParsers([At,yf,Li]),i._time=0,i._currentFps=0,i._avmHandlers={},i._baseStageWidth=i._stageWidth=550,i._baseStageHeight=i._stageHeight=400,i._scaleMode=Zp.SHOW_ALL,i._align=$p.TOP_LEFT,i._scaleModeAllowUpdate=!0,i._alignAllowUpdate=!0,n.stageScaleMode&&(i._scaleMode=n.stageScaleMode,i._scaleModeAllowUpdate=!1),n.stageAlign&&(i._align=n.stageAlign,i._alignAllowUpdate=!1),n.forceINT&&(e.forceINT=n.forceINT),i._frameRate=30,i._showFrameRateIntervalID=-1,i._x=n.x?n.x:0,i._y=n.y?n.y:0,i._w=n.w?n.w:"100%",i._h=n.h?n.h:"100%",i._isPaused=!1,i._gameConfig=n,i.initAwayEninge(),i._renderer.view.backgroundColor=16777215,E.setVolume(1),i._resizeCallbackDelegate=function(t){return i.resizeCallback(t)},window.addEventListener("resize",i._resizeCallbackDelegate),i._onLoaderStartDelegate=function(t){return i.onLoaderStart(t)},i._onLoaderCompleteDelegate=function(t){return i.onLoaderComplete(t)},i._onAssetCompleteDelegate=function(t){return i._onAssetComplete(t)},i._onLoadErrorDelegate=function(t){return i._onLoadError(t)},i._gameConfig.testConfig&&(i.avmTestHandler=new nd(i._gameConfig.testConfig,i)),i.showFrameRate=i._gameConfig.showFPS,document.addEventListener("fullscreenchange",i.onFullscreenChanged.bind(i)),i}return o(e,t),e.instance=function(){if(!e._instance)throw"AVMStage._instance should exists but does not";return e._instance},Object.defineProperty(e.prototype,"factory",{get:function(){return this._avmHandler.factory},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){console.log("dispose"),this._timer.stop(),this._timer=null,this._avmHandler.dispose()},Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pickGroup",{get:function(){return this._pickGroup},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mousePicker",{get:function(){return this._mousePicker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseManager",{get:function(){return this._mouseManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._gameConfig},enumerable:!1,configurable:!0}),e.prototype.registerAVMStageHandler=function(t){this._avmHandlers[t.avmVersion]=t},Object.defineProperty(e.prototype,"displayState",{get:function(){return this._displayState},set:function(t){var e=this;if(document.fullscreenEnabled)switch(t){case"fullScreenInteractive":case"fullScreen":Element.prototype.requestFullscreen&&document.body.requestFullscreen().then((function(){e._displayState=t}));break;default:this._displayState=t,document.fullscreenElement&&document.exitFullscreen()}else this._displayState="normal"},enumerable:!1,configurable:!0}),e.prototype.onFullscreenChanged=function(t){document.fullscreenElement||(this._displayState="normal")},e.prototype.initAwayEninge=function(){this._projection=new xt,this._projection.coordinateSystem=gt.RIGHT_HANDED,this._projection.originX=-1,this._projection.originY=1,this._projection.transform.moveTo(0,0,-1e3),this._projection.fieldOfView=360*Math.atan(window.innerHeight/1e3/2)/Math.PI,this._view=new gr(this._projection),this._root=new Js,this._root.partitionClass=yr,this._rootNode=this._root.getAbstraction(this._view),this._partition=this._rootNode.partition,this._pickGroup=Cr.getInstance(),this._mousePicker=this._pickGroup.getRaycastPicker(this._partition),this._mousePicker.shapeFlag=!0,this._mouseManager=Ph.getInstance(this._view.stage),this._renderer=this._partition.getAbstraction(no.getInstance(yo)),this._rendererStage=this._view.stage,this._rendererStage.container.style.visibility="hidden",this._rendererStage.antiAlias=0,this._renderer.renderableSorter=null},e.prototype.playSWF=function(t,e){var n=this;this._gameConfig={files:[{data:t,path:e,resourceType:"GAME"}]},this.addEventListener(Q.LOADER_COMPLETE,(function(t){return n.play()})),this.loadNextResource()},e.prototype.snapshot=function(t){var e=new Le(this._stageWidth,this._stageHeight,!0,4294967295,!1);this._renderer.queueSnapshot(e),this._renderer.view.target=e,this._renderer.render(),this._renderer.view.target=null,e.invalidate();for(var n=e.data,i=new Le(this._stageWidth,this._stageHeight,!0,4278255615,!1),r=0,o=0,a=0;a<this._stageHeight;a++)for(var s=0;s<this._stageWidth;s++)r=4*((this._stageHeight-1-a)*this._stageWidth+s),o=D.ARGBtoFloat32(n[r+3],n[r],n[r+1],n[r+2]),i.setPixel32(s,a,o);i.invalidate();var l=document.createElement("canvas");l.width=i.width,l.height=i.height;var u=l.getContext("2d"),c=u.getImageData(0,0,i.width,i.height);c.data.set(i.data),u.putImageData(c,0,0),t&&t(l)},e.prototype.loadNextResource=function(t){var e=this;if(void 0===t&&(t=null),this._curFile=this._gameConfig.files.shift(),this._curFile){var n=new yf;if(n.fileName=this._curFile.path,"GAME"!=this._curFile.resourceType)jc.deviceFontsLoading=!0;else{if(jc.deviceFontsLoading=!1,this._swfFile)throw"Only playing of 1 SWF file is supported at the moment";n.onFactoryRequest=function(t){e._swfFile=t,e.frameRate=e._swfFile.frameRate,e.color=D.f32_RGBA_To_f32_ARGB(t.backgroundColor),e._stageWidth=e._swfFile.bounds.width/20,e._stageHeight=e._swfFile.bounds.height/20,e._baseStageHeight=e._stageHeight,e._baseStageWidth=e._stageWidth,e.resizeCallback();var i=e._swfFile.useAVM1?Oh.AVM1:Oh.AVM2;if(e._avmHandler=e._avmHandlers[i],e.avmTestHandler&&!e.avmTestHandler.config.settings.onlyTraces&&e.avmTestHandler.setSWF(e._swfFile),!e._avmHandler)throw"no avm-handler installed for "+i;e._avmHandler.init(e,e._swfFile,(function(t){n.factory=e._avmHandler.factory,yf.factory=e._avmHandler.factory,t&&e.dispatchEvent(new Lh(Lh.AVM_COMPLETE,i))}))}}dt.addEventListener(Q.LOADER_START,this._onLoaderStartDelegate),dt.addEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),dt.addEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),dt.addEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),this._curFile.data?dt.loadData(this._curFile.data,null,this._curFile.path,n):dt.load(new ft(this._curFile.path),null,this._curFile.path,n)}else{if(!this._swfFile)throw"no valid SWFFile was loaded!";t&&this.dispatchEvent(t)}},e.prototype.load=function(){if(!this._gameConfig.files||!this._gameConfig.files.length)throw"AVMStage: gameConfig.files must have positive length";vf.push.apply(vf,this._gameConfig.redirects),this.loadNextResource(new Q(Q.LOADER_COMPLETE))},e.prototype.onLoaderStart=function(t){this.dispatchEvent(t)},e.prototype._onAssetComplete=function(t){"GAME"==this._curFile.resourceType&&(0==e.runtimeStartTime&&(e.runtimeStartTime=Date.now()),this._avmHandler.addAsset(t.asset,!0)),this.dispatchEvent(t)},e.prototype.onLoaderComplete=function(t){this._root&&this._root.dispatchEvent(t),dt.removeEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),dt.removeEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),dt.removeEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),this.loadNextResource(t)},e.prototype._onLoadError=function(t){dt.removeEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),dt.removeEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),dt.removeEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),console.log("error loading swf"),this.dispatchEvent(t)},e.prototype.play=function(t){void 0===t&&(t=0),this.resizeCallback(null),this._timer=new mt(this.main_loop,this),this._timer.start();var e=this._root.getChildAt(0);e?(t&&(e.currentFrameIndex=t),this.showNextFrame(0),this._rendererStage.container.style.visibility="visible"):console.warn("warning: AVMPlayer.play called, but no scene is loaded")},e.prototype.updateFPS=function(){this._fpsTextField.style.visibility=this._currentFps&&this._frameRate?"visible":"hidden",this._fpsTextField.innerText=this._currentFps.toFixed(2)+"/"+this._frameRate+" fps",this._currentFps=0},e.prototype.setStageDimensions=function(t,e,n,i){this._x=t,this._y=e,this._w=n,this._h=i,this.resizeStageInternal()},e.prototype.resizeStageInternal=function(t){void 0===t&&(t=!1);var e=xf(this._x,window.innerWidth),n=xf(this._y,window.innerHeight),i=xf(this._w,window.innerWidth),r=xf(this._h,window.innerHeight),o=!!this._gameConfig.maxStageScale,a=+this._gameConfig.maxStageScale||10,s=a*this._baseStageWidth,l=a*this._baseStageHeight,u=this._baseStageWidth/this._baseStageHeight,c=this._rendererStage.container,h=o?self.devicePixelRatio:1,p=e,d=n,f=i,_=r,g=i,m=r;switch(this._scaleMode){case Zp.NO_SCALE:this._projection.fieldOfView=360*Math.atan(r/1e3/2)/Math.PI,this._stageWidth=i,this._stageHeight=r;break;case Zp.SHOW_ALL:m=r,g=u*r,f=u*(_=Math.min(l,m*h)),(g>i||f>s)&&(g=i,m=i/u,_=(f=Math.min(s,g*h))/u),p+=(i-g)/2,d+=(r-m)/2,o&&(this._rendererStage.pixelRatio=1),this._projection.fieldOfView=360*Math.atan(this._stageHeight/1e3/2)/Math.PI;break;case Zp.EXACT_FIT:case Zp.NO_BORDER:m=i/u,g=i,_=(f=Math.min(s,g*h))/u,(m<r||_>l)&&(g=r*u,m=r,f=(_=Math.min(l,m*h))*u),p+=(i-g)/2,d+=(r-m)/2,o&&(this._rendererStage.pixelRatio=1),this._projection.fieldOfView=360*Math.atan(this._stageHeight/1e3/2)/Math.PI;break;default:console.log("Stage: only implemented StageScaleMode are NO_SCALE, SHOW_ALL")}if(this._align===$p.TOP_LEFT)this._view.x=p,this._view.y=d;else this._view.x=p,this._view.y=d,console.log("Stage: only implemented StageAlign is TOP_LEFT");this._view.width=f,this._view.height=_,c.style.width=g+"px",c.style.height=m+"px",this._fpsTextField&&(this._fpsTextField.style.left=.5*window.innerWidth-50+"px"),this._avmHandler&&!t&&(this._trapResize=!0)},e.prototype.resizeCallback=function(t){this.resizeStageInternal()},e.prototype.pause=function(){this._volume=E.getVolume(),this._isPaused=!0,E.setVolume(0)},e.prototype.unPause=function(){E.setVolume(this._volume),this._isPaused=!1},Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},set:function(t){this._isPaused=t},enumerable:!1,configurable:!0}),e.prototype.main_loop=function(t){if(!this._isPaused&&this._frameRate){if(this._trapResize&&(this._avmHandler&&this._avmHandler.resizeStage(),this._trapResize=!1),!this._avmHandler)throw"error - can not render when no avm-stage is available";var e=Math.floor(1e3/this._frameRate);this._time+=Math.min(t,e),this._time>=e?(this._currentFps++,this.showNextFrame(this._time),this._time-=e):this._requestedRender&&(_l.execute_queue(),this._renderer.render()),this._requestedRender=!1}},e.prototype.requestRender=function(){this._requestedRender=!0},e.prototype.showNextFrame=function(t){if(this._isPaused)return Jp.enterFrame(),void Jp.exitFrame();Jp.enterFrame(),this.avmTestHandler&&this.avmTestHandler.dispatchEvents(),this._mouseManager.fireMouseEvents(this._mousePicker),this._avmHandler.enterFrame(t),this.avmTestHandler&&this.avmTestHandler.nextFrame(),this._renderer.render(),Jp.exitFrame()},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._alignAllowUpdate&&(this._align=t,this.resizeStageInternal(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accessibilityImplementation",{get:function(){return console.log("AVMStage: get accessibilityImplementation not implemented"),this._align},set:function(t){console.log("AVMStage:  accessibilityImplementation not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._renderer.view.backgroundColor},set:function(t){this._renderer.view.backgroundColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameRate",{get:function(){return this._frameRate},set:function(t){this._frameRate=t,Jp.frameRate=t},enumerable:!1,configurable:!0}),e.prototype.getLocalMouseX=function(t){return t.getInverseMatrix3D().transformVector(this._renderer.view.unproject(this._view.stage.screenX,this._view.stage.screenY,1e3)).x},e.prototype.getLocalMouseY=function(t){return t.getInverseMatrix3D().transformVector(this._renderer.view.unproject(this._view.stage.screenX,this._view.stage.screenY,1e3)).y},e.prototype.getLocalTouchPoints=function(t){for(var e,n=new Array,i=this._view.stage.touchPoints.length,r=0;r<i;r++)e=t.getInverseMatrix3D().transformVector(this._renderer.view.unproject(this._view.stage.touchPoints[r].x,this._view.stage.touchPoints[r].y,1e3)),n.push(new le(e.x,e.y,this._view.stage.touchPoints[r].id));return n},e.prototype.unprojectPoint=function(t,e){var n=this._view.getNode(e).getInverseMatrix3D().transformVector(this._view.unproject(t.x,t.y,1e3));return new O(n.x,n.y)},Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleModeAllowUpdate&&(this._scaleMode=t,this.resizeStageInternal(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showFrameRate",{get:function(){return this._showFrameRate},set:function(t){var e=this;t!=this._showFrameRate&&(this._showFrameRate=t,t?(this._fpsTextField=document.createElement("div"),this._fpsTextField.style.cssFloat="none",this._fpsTextField.style.backgroundColor="#000",this._fpsTextField.style.position="fixed",this._fpsTextField.style.top="5px",this._fpsTextField.style.width="100px",this._fpsTextField.style.height="20px",this._fpsTextField.style.right="5px",this._fpsTextField.style.textAlign="center",this._fpsTextField.style.color="#ffffff",this._fpsTextField.style.fontSize="16",this._fpsTextField.style.visibility="hidden",this._fpsTextField.innerHTML="",document.body.appendChild(this._fpsTextField),this._showFrameRateIntervalID=window.setInterval((function(){return e.updateFPS()}),999)):-1!=this._showFrameRateIntervalID&&(clearInterval(this._showFrameRateIntervalID),this._showFrameRateIntervalID=-1,document.body.removeChild(this._fpsTextField),this._fpsTextField=null))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageHeight",{get:function(){return this._stageHeight},set:function(t){this._stageHeight=t,this.resizeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageWidth",{get:function(){return this._stageWidth},set:function(t){this._stageWidth=t,this.resizeCallback()},enumerable:!1,configurable:!0}),e.runtimeStartTime=0,e._instance=null,e.forceINT=!1,e}(p),If={instance:undefined};function Ef(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wf(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!0,enumerable:!1})}function Sf(t,e,n,i,r){void 0===n&&(n=null),void 0===i&&(i=!0),void 0===r&&(r=!1);for(var o=0,a=Object.getOwnPropertyNames(e);o<a.length;o++){var s=a[o];if("constructor"!=s&&Ef(e,s)&&(!n||n(s))){var l=Object.getOwnPropertyDescriptor(e,s);if(!i&&Ef(t,s))continue;try{r&&!1===l.writable&&(l.writable=!0),Object.defineProperty(t,s,l)}catch(t){yp("Can't define: "+s)}}}}function Df(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0,enumerable:!1})}function Tf(t,e,n){for(var i=e-1;i>=0;i--)n[i]=t.pop();n.length=e}function Pf(t,e){for(var n=0;n<e.length;n++)t.push(e[n])}var Bf={setClipboard:function(t){}},Of=function t(e){var n;switch(typeof e){case"boolean":return e?"<true/>":"<false/>";case"number":return"<number>"+e+"</number>";case"object":if(null===e)return"<null/>";if("hasOwnProperty"in e&&e.hasOwnProperty("length")){n="<array>";for(var i=0;i<e.length;i++)n+='<property id="'+i+'">'+t(e[i])+"</property>";return n+"</array>"}for(var r in n="<object>",e)n+='<property id="'+r+'">'+t(e[r])+"</property>";return n+"</object>";case"string":return"<string>"+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</string>";case"undefined":return"<undefined/>"}},Mf=function(){function t(){}return Object.defineProperty(t,"interfaceID",{get:function(){return t._interfaceID},set:function(e){t._interfaceID=e},enumerable:!1,configurable:!0}),t.ensureInit=function(){window[t._interfaceID]||(window[t._interfaceID]={}),window[t._interfaceID].__flash__toXML=Of},t.initJS=function(e){t.callback=e},t.registerCallback=function(e){t.ensureInit(),window[t._interfaceID][e]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.callback(e,n)}},t.unregisterCallback=function(e){t.ensureInit(),delete window[t._interfaceID][e]},t.eval=function(e){t.ensureInit();try{return window.eval(e)}catch(t){console.warn("[ExternalInterfaceService] Eval crashed:\n",e,"\n"+t.message)}},t.call=function(t){},t.getId=function(){return null},t.enabled=!0,t._interfaceID="flash",t}();console.debug("AwayFL - SWF-Loader - 0.4.127");var Lf=function(){return function(t,e,n,i,r){this.flags=t,this.value=e,this.get=n,this.set=i,this.watcher=r}}(),Rf=function(t){function e(e){var n=t.call(this)||this;n.initialDepth=0,n.scriptRefsToChilds={},n._isGhost=!1,n._avm1Context=e,n._ownProperties=Object.create(null),n.scriptRefsToChilds={},n._prototype=null,n._blockedByScript=!1,n._ctBlockedByScript=!1,n._visibilityByScript=!1;var i=n,r=new Lf(131,null,{alCall:function(t,e){return i.alPrototype}},{alCall:function(t,e){i.alPrototype=e[0]}});return n.alSetOwnProperty("__proto__",r),n}return o(e,t),Object.defineProperty(e.prototype,"isGhost",{get:function(){return this._isGhost},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventObserver",{get:function(){return this._eventObserver},set:function(t){this._eventObserver=t},enumerable:!1,configurable:!0}),e.prototype.makeGhost=function(){this.deleteOwnProperties(),this.alPut("__proto__",null),this._isGhost=!0},e.prototype.dispose=function(){},e.prototype.updateFilters=function(t){},e.prototype.isBlockedByScript=function(){return this._blockedByScript},e.prototype.isColorTransformByScript=function(){return this._ctBlockedByScript},e.prototype.isVisibilityByScript=function(){return this._visibilityByScript},e.prototype.initAdapter=function(){},e.prototype.freeFromScript=function(){this.protoTypeChanged=!1,this._blockedByScript=!1,this._ctBlockedByScript=!1,this._visibilityByScript=!1},e.prototype.clone=function(){return new e(this._avm1Context)},Object.defineProperty(e.prototype,"context",{get:function(){return this._avm1Context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alPrototype",{get:function(){return this._prototype},set:function(t){for(var e=t;e;){if(e===this)return;e=e.alPrototype}this._prototype=t},enumerable:!1,configurable:!0}),e.prototype.alGetPrototypeProperty=function(){return this.alGet("prototype")},e.prototype.alSetOwnPrototypeProperty=function(t){this.alSetOwnProperty("prototype",new Lf(65,t))},e.prototype.alGetConstructorProperty=function(){return this.alGet("__constructor__")},e.prototype.alSetOwnConstructorProperty=function(t){this.alSetOwnProperty("__constructor__",new Lf(65,t))},e.prototype._debugEscapeProperty=function(t){var e=this.context,n=ym(e,t);return e.isPropertyCaseSensitive||(n=n.toLowerCase()),"$Bg"+n},e.prototype.alGetOwnProperty=function(t){return this._isGhost?null:("string"!=typeof t||this.context.isPropertyCaseSensitive||(t=t.toLowerCase()),this._ownProperties[t])},e.prototype.alSetOwnProperty=function(t,e){if(!this._isGhost){var n=this.context.normalizeName(t);e.originalName||this.context.isPropertyCaseSensitive||(e.originalName=t),this._ownProperties[n]=e}},e.prototype.alHasOwnProperty=function(t){if(this._isGhost)return!1;var e=this.context.normalizeName(t);return!!this._ownProperties[e]},e.prototype.alDeleteOwnProperty=function(t){var e=this.context.normalizeName(t);delete this._ownProperties[e]},e.prototype.deleteOwnProperties=function(){for(var t=this.alGetOwnPropertiesKeys(),e=0;e<t.length;e++)this.alDeleteOwnProperty(t[e])},e.prototype.alGetOwnPropertiesKeys=function(){var t,e=[];if(this._isGhost)return e;if(this.context.isPropertyCaseSensitive)for(var n in this._ownProperties)1&(t=this._ownProperties[n]).flags||e.push(n);else for(var i in this._ownProperties)1&(t=this._ownProperties[i]).flags||e.push(t.originalName);return e},e.prototype.alGetProperty=function(t){if(this._isGhost)return null;var e=this.alGetOwnProperty(t);return e||(this._prototype?this._prototype.alGetProperty(t):void 0)},e.prototype.alGet=function(t){if(!this._isGhost){var e=this.context.normalizeName(t),n=this.alGetProperty(e);if(n){if(64&n.flags)return n.value;var i=n.get;return i?i.alCall(this):void 0}}},e.prototype.alCanPut=function(t){if(this._isGhost)return!1;var e=this.alGetOwnProperty(t);if(e)return 128&e.flags?!!e.set:!(4&e.flags);var n=this._prototype;return!n||n.alCanPut(t)},e.prototype.alPut=function(t,e){if(!this._isGhost){var n=t;if(t=this.context.normalizeName(t),e&&"object"==typeof e&&"symbol"===e.avmType&&"this"!=t&&"_parent"!=t&&!e.dynamicallyCreated&&e.adaptee&&e.adaptee.parent&&e.adaptee.parent.adapter&&e.adaptee.parent.adapter.scriptRefsToChilds&&(e.adaptee.parent.adapter.scriptRefsToChilds[e.adaptee.name]={obj:this,name:t}),this.alCanPut(t)){var i=this.alGetOwnProperty(t);if(i&&64&i.flags)return i.watcher&&(e=i.watcher.callback.alCall(this,[i.watcher.name,i.value,e,i.watcher.userData])),void(t in this._ownProperties?i.value=e:this.alSetOwnProperty(n,new Lf(i.flags,e)));if(void 0!==e||"_x"!=t&&"_y"!=t&&"_xscale"!=t&&"_yscale"!=t&&"_width"!=t&&"_height"!=t){var r=this.alGetProperty(t);if(r&&128&r.flags){if(r.watcher){var o=r.get?r.get.alCall(this):void 0;e=r.watcher.callback.alCall(this,[r.watcher.name,o,e,r.watcher.userData])}r.set.alCall(this,[e])}else if(r&&r.watcher&&(e=r.watcher.callback.alCall(this,[r.watcher.name,r.value,e,r.watcher.userData])),e&&e.isTextVar){e=e.value,(a=new Lf(r?r.flags:64,e)).isTextVar=!0,this.alSetOwnProperty(n,a)}else{var a=new Lf(r?r.flags:64,e);this.alSetOwnProperty(n,a)}}}}},e.prototype.alHasProperty=function(t){return!this._isGhost&&!!this.alGetProperty(t)},e.prototype.alDeleteProperty=function(t){var e=this.alGetOwnProperty(t);return!e||!(2&e.flags)&&(this.alDeleteOwnProperty(t),!0)},e.prototype.alAddPropertyWatcher=function(t,e,n){if(this._isGhost)return!1;var i=this.alGetProperty(t);return!!i&&(i.watcher={name:t,callback:e,userData:n},!0)},e.prototype.alRemotePropertyWatcher=function(t){var e=this.alGetProperty(t);return!(!e||!e.watcher)&&(e.watcher=void 0,!0)},e.prototype.alDefaultValue=function(t){if(void 0===t&&(t=0),1===t){var e=this.alGet(this.context.normalizeName("toString"));if(wm(e))return e.alCall(this);if(wm(n=this.alGet(this.context.normalizeName("valueOf"))))return n.alCall(this)}else{var n;if(wm(n=this.alGet(this.context.normalizeName("valueOf"))))return n.alCall(this);var i=this.alGet(this.context.normalizeName("toString"));if(wm(i))return i.alCall(this)}return this},e.prototype.alGetKeys=function(){if(this._isGhost)return[];var t=this.alGetOwnPropertiesKeys(),e=this._prototype;if(!e)return t;var n=e.alGetKeys();if(0===t.length)return n;var i,r=this.context;if(r.isPropertyCaseSensitive){var o=Object.create(null),a=t.length;for(i=0;i<a;i++)o[t[i]]=!0;var s=n.length;for(i=0;i<s;i++)o[n[i]]=!0;return Object.getOwnPropertyNames(o)}var l=[t,n],u=Object.create(null),c=[],h=void 0,p=void 0,d=void 0;for(i=0;i<l.length;i++){h=l[i];for(var f=0;f<h.length;f++)p=h[f],u[d=r.normalizeName(p)]||(u[d]=!0,c.push(p))}return c},e}(function(){return function(){}}()),Nf=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Function.alGetPrototypeProperty(),n.isOnEnter=!1,n}return o(e,t),e.prototype.alConstruct=function(t){throw new Error("not implemented AVM1Function.alConstruct")},e.prototype.alCall=function(t,e){throw new Error("not implemented AVM1Function.alCall")},e.prototype.toJSFunction=function(t){void 0===t&&(t=null);var e=this,n=this.context;return function(){var i=Array.prototype.slice.call(arguments,0);return n.executeFunction(e,t,i)}},e}(Rf);function Ff(t){if(!t)return new O(0,0);var e,n,i=t.context;return t instanceof Rf&&(e=Cm(i,t.alGet("x")),n=Cm(i,t.alGet("y"))),new O(e,n)}function kf(t,e){e.alPut("x",t.x),e.alPut("y",t.y)}var Uf=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.alPrototype=e.globals.Point.alGetPrototypeProperty(),r.alPut("x",n),r.alPut("y",i),r}return o(e,t),e.fromAS3Point=function(t,n){return new e(t,n.x,n.y)},e}(Rf),Vf=function(t){function e(e){var n=t.call(this,e)||this;return Om(n,{prototype:{value:new jf(e,n)},distance:{value:n.distance,writable:!0},interpolate:{value:n.interpolate,writable:!0},polar:{value:n.polar,writable:!0}}),n}return o(e,t),e.prototype.alCall=function(t,e){return this.alConstruct(e)},e.prototype.alConstruct=function(t){return t&&t.length>0?new Uf(this.context,t[0],t[1]):new Uf(this.context,0,0)},e.prototype.distance=function(t,e){return O.distance(Ff(t),Ff(e))},e.prototype.interpolate=function(t,e,n){n=_m(this.context,n);var i=O.interpolate(Ff(t),Ff(e),n);return Uf.fromAS3Point(this.context,i)},e.prototype.polar=function(t,e){return t=_m(this.context,t),e=_m(this.context,e),Uf.fromAS3Point(this.context,O.polar(t,e))},e}(Nf),jf=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(i,{constructor:{value:n,writable:!0},length:{get:i.getLength},add:{value:i.add,writable:!0},clone:{value:i.clone,writable:!0},equals:{value:i.equals,writable:!0},normalize:{value:i.normalize,writable:!0},offset:{value:i.offset,writable:!0},subtract:{value:i.subtract,writable:!0},toString:{value:i._toString,writable:!0}}),i}return o(e,t),e.prototype.getLength=function(){return Ff(this).length},e.prototype.add=function(t){return Uf.fromAS3Point(this.context,Ff(this).add(Ff(t)))},e.prototype.clone=function(){var t=new Uf(this.context);return this instanceof Rf&&(t.alPut("x",this.alGet("x")),t.alPut("y",this.alGet("y"))),t},e.prototype.equals=function(t){return Ff(this).equals(Ff(t))},e.prototype.normalize=function(t){t=_m(this.context,t);var e=Ff(this);e.normalize(t),kf(e,this)},e.prototype.offset=function(t,e){t=_m(this.context,t),e=_m(this.context,e);var n=Ff(this);n.offset(t,e),kf(n,this)},e.prototype.subtract=function(t){return Uf.fromAS3Point(this.context,Ff(this).subtract(Ff(t)))},e.prototype._toString=function(){return"(x="+this.alGet("x")+", y="+this.alGet("y")+")"},e}(Rf);function Gf(t){var e,n,i,r,o=t.context;return t instanceof Rf&&(e=Cm(o,t.alGet("x")),n=Cm(o,t.alGet("y")),i=Cm(o,t.alGet("width")),r=Cm(o,t.alGet("height"))),new W(e,n,i,r)}function Qf(t,e){e.alPut("x",t.x),e.alPut("y",t.y),e.alPut("width",t.width),e.alPut("height",t.height)}var zf=function(t){function e(e,n,i,r,o){var a=t.call(this,e)||this;return a.alPrototype=e.globals.Rectangle.alGetPrototypeProperty(),a.alPut("x",n),a.alPut("y",i),a.alPut("width",r),a.alPut("height",o),a}return o(e,t),e.fromAS3Rectangle=function(t,n){return new e(t,n.x,n.y,n.width,n.height)},e}(Rf),Hf=function(t){function e(e){var n=t.call(this,e)||this;return Om(n,{prototype:{value:new Xf(e,n)}}),n}return o(e,t),e.prototype.alConstruct=function(t){return t&&t.length>0?new zf(this.context,t[0],t[1],t[2],t[3]):new zf(this.context,0,0,0,0)},e}(Nf),Xf=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(i,{constructor:{value:n,writable:!0},bottom:{get:i.getBottom,set:i.setBottom},bottomRight:{get:i.getBottomRight,set:i.setBottomRight},left:{get:i.getLeft,set:i.setLeft},right:{get:i.getRight,set:i.setRight},size:{get:i.getSize,set:i.setSize},top:{get:i.getTop,set:i.setTop},topLeft:{get:i.getTopLeft,set:i.setTopLeft},clone:{value:i.clone,writable:!0},contains:{value:i.contains,writable:!0},containsPoint:{value:i.containsPoint,writable:!0},containsRectangle:{value:i.containsRectangle,writable:!0},equals:{value:i.equals,writable:!0},inflate:{value:i.inflate,writable:!0},inflatePoint:{value:i.inflatePoint,writable:!0},intersection:{value:i.intersection,writable:!0},intersects:{value:i.intersects,writable:!0},isEmpty:{value:i.isEmpty,writable:!0},offset:{value:i.offset,writable:!0},offsetPoint:{value:i.offsetPoint,writable:!0},setEmpty:{value:i.setEmpty,writable:!0},toString:{value:i._toString,writable:!0},union:{value:i.union,writable:!0}}),i}return o(e,t),e.prototype.getBottom=function(){return _m(this.context,this.alGet("y"))+_m(this.context,this.alGet("height"))},e.prototype.setBottom=function(t){this.alPut("height",_m(this.context,t)-_m(this.context,this.alGet("y")))},e.prototype.getBottomRight=function(){return new Uf(this.context,e.prototype.getRight.call(this),e.prototype.getBottom.call(this))},e.prototype.setBottomRight=function(t){e.prototype.setRight.call(this,t.alGet("x")),e.prototype.setBottom.call(this,t.alGet("y"))},e.prototype.getLeft=function(){return _m(this.context,this.alGet("x"))},e.prototype.setLeft=function(t){this.alPut("x",_m(this.context,t))},e.prototype.getSize=function(){return new Uf(this.context,this.alGet("width"),this.alGet("height"))},e.prototype.setSize=function(t){this.alPut("width",t.alGet("x")),this.alPut("height",t.alGet("y"))},e.prototype.getRight=function(){return _m(this.context,this.alGet("x"))+_m(this.context,this.alGet("width"))},e.prototype.setRight=function(t){this.alPut("width",_m(this.context,t)-_m(this.context,this.alGet("x")))},e.prototype.getTop=function(){return _m(this.context,this.alGet("y"))},e.prototype.setTop=function(t){this.alPut("y",_m(this.context,t))},e.prototype.getTopLeft=function(){return new Uf(this.context,e.prototype.getLeft.call(this),e.prototype.getTop.call(this))},e.prototype.setTopLeft=function(t){e.prototype.setLeft.call(this,t.alGet("x")),e.prototype.setTop.call(this,t.alGet("y"))},e.prototype.clone=function(){var t=new zf(this.context);return this instanceof Rf&&(t.alPut("x",this.alGet("x")),t.alPut("y",this.alGet("y")),t.alPut("width",this.alGet("width")),t.alPut("height",this.alGet("height"))),t},e.prototype.contains=function(t,e){return t=_m(this.context,t),e=_m(this.context,e),Gf(this).contains(t,e)},e.prototype.containsPoint=function(t){var e=Gf(this),n=Ff(t);return e.containsPoint(n)},e.prototype.containsRectangle=function(t){var e=Gf(this),n=Gf(t);return e.containsRect(n)},e.prototype.equals=function(t){var e=Gf(this),n=Gf(t);return e.equals(n)},e.prototype.inflate=function(t,e){t=_m(this.context,t),e=_m(this.context,e);var n=Gf(this);n.inflate(t,e),Qf(n,this)},e.prototype.inflatePoint=function(t){var e=Gf(this),n=Ff(t);e.inflatePoint(n),Qf(e,this)},e.prototype.intersection=function(t){var e=Gf(this),n=Gf(t);return zf.fromAS3Rectangle(this.context,e.intersection(n))},e.prototype.intersects=function(t){var e=Gf(this),n=Gf(t);return e.intersects(n)},e.prototype.isEmpty=function(){return Gf(this).isEmpty()},e.prototype.offset=function(t,e){t=_m(this.context,t),e=_m(this.context,e);var n=Gf(this);n.offset(t,e),Qf(n,this)},e.prototype.offsetPoint=function(t){var e=Gf(this),n=Ff(t);e.offsetPoint(n),Qf(e,this)},e.prototype.setEmpty=function(){this.alPut("x",0),this.alPut("y",0),this.alPut("width",0),this.alPut("height",0)},e.prototype._toString=function(){return"(x="+this.alGet("x")+", y="+this.alGet("y")+", w="+this.alGet("width")+", h="+this.alGet("height")+")"},e.prototype.union=function(t){var e=Gf(this),n=Gf(t);return zf.fromAS3Rectangle(this.context,e.union(n))},e}(Rf);function Yf(t,e){return void 0===t?e:t}function qf(t){var e=t.context;return t instanceof Kf?new T(Cm(e,Yf(t._rawData[0],1)),Cm(e,Yf(t._rawData[1],1)),Cm(e,Yf(t._rawData[2],1)),Cm(e,Yf(t._rawData[3],1)),Cm(e,Yf(t._rawData[4],0)),Cm(e,Yf(t._rawData[5],0)),Cm(e,Yf(t._rawData[6],0)),Cm(e,Yf(t._rawData[7],0))):new T(1,1,1,1,0,0,0,0)}var Kf=function(t){function e(e,n,i,r,o,a,s,l,u){void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=1),void 0===o&&(o=1),void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0);var c=t.call(this,e)||this;return c._rawData=[n,i,r,o,a,s,l,u],c.alPrototype=e.globals.ColorTransform.alGetPrototypeProperty(),Om(c,{rgb:{get:c.getRgb,set:c.setRgb},ra:{get:c.getRM,set:c.setRM},ga:{get:c.getGM,set:c.setGM},ba:{get:c.getBM,set:c.setBM},aa:{get:c.getAM,set:c.setAM},rb:{get:c.getRO,set:c.setRO},gb:{get:c.getGO,set:c.setGO},bb:{get:c.getBO,set:c.setBO},ab:{get:c.getAO,set:c.setAO},redMultiplier:{get:c.getRedMultiplier,set:c.setRedMultiplier},greenMultiplier:{get:c.getGreenMultiplier,set:c.setGreenMultiplier},blueMultiplier:{get:c.getBlueMultiplier,set:c.setBlueMultiplier},alphaMultiplier:{get:c.getAlphaMultiplier,set:c.setAlphaMultiplier},redOffset:{get:c.getRedOffset,set:c.setRedOffset},greenOffset:{get:c.getGreenOffset,set:c.setGreenOffset},blueOffset:{get:c.getBlueOffset,set:c.setBlueOffset},alphaOffset:{get:c.getAlphaOffset,set:c.setAlphaOffset},concat:{value:c.concat,writable:!0},toString:{value:c._toString,writable:!0}}),c}return o(e,t),e.prototype.getRedMultiplier=function(){return this._rawData[0]},e.prototype.setRedMultiplier=function(t){this._rawData[0]=t},e.prototype.getGreenMultiplier=function(){return this._rawData[1]},e.prototype.setGreenMultiplier=function(t){this._rawData[1]=t},e.prototype.getBlueMultiplier=function(){return this._rawData[2]},e.prototype.setBlueMultiplier=function(t){this._rawData[2]=t},e.prototype.getAlphaMultiplier=function(){return this._rawData[3]},e.prototype.setAlphaMultiplier=function(t){this._rawData[3]=t},e.prototype.getRedOffset=function(){return this._rawData[4]},e.prototype.setRedOffset=function(t){this._rawData[4]=t},e.prototype.getGreenOffset=function(){return this._rawData[5]},e.prototype.setGreenOffset=function(t){this._rawData[5]=t},e.prototype.getBlueOffset=function(){return this._rawData[6]},e.prototype.setBlueOffset=function(t){this._rawData[6]=t},e.prototype.getAlphaOffset=function(){return this._rawData[7]},e.prototype.setAlphaOffset=function(t){this._rawData[7]=t},e.prototype.getRM=function(){return 100*this._rawData[0]},e.prototype.setRM=function(t){this._rawData[0]=t/100},e.prototype.getGM=function(){return 100*this._rawData[1]},e.prototype.setGM=function(t){this._rawData[1]=t/100},e.prototype.getBM=function(){return 100*this._rawData[2]},e.prototype.setBM=function(t){this._rawData[2]=t/100},e.prototype.getAM=function(){return 100*this._rawData[3]},e.prototype.setAM=function(t){this._rawData[3]=t/100},e.prototype.getRO=function(){return this._rawData[4]},e.prototype.setRO=function(t){this._rawData[4]=t},e.prototype.getGO=function(){return this._rawData[5]},e.prototype.setGO=function(t){this._rawData[5]=t},e.prototype.getBO=function(){return this._rawData[6]},e.prototype.setBO=function(t){this._rawData[6]=t},e.prototype.getAO=function(){return this._rawData[7]},e.prototype.setAO=function(t){this._rawData[7]=t},e.prototype.getRgb=function(){return this._rawData[4]<<16|this._rawData[5]<<8|this._rawData[6]},e.prototype.setRgb=function(t){var e=D.float32ColorToARGB(t);this._rawData[4]=e[1],this._rawData[5]=e[2],this._rawData[6]=e[3],this._rawData[0]=0,this._rawData[1]=0,this._rawData[2]=0},e.prototype.concat=function(t){console.warn("AVM1ColorTransform concat is not implemented")},e.prototype._toString=function(){return"[object Object]"},e.fromAwayColorTransform=function(t,n){return new e(t,n.redMultiplier,n.greenMultiplier,n.blueMultiplier,n.alphaMultiplier,n.redOffset,n.greenOffset,n.blueOffset,n.alphaOffset)},e}(Rf),Wf=function(t){function e(e){var n=t.call(this,e)||this;return Om(n,{prototype:{value:new Jf(e,n)}}),n}return o(e,t),e.prototype.alConstruct=function(t){var e=Object.create(Kf.prototype);return t=t||[],Kf.apply(e,[this.context].concat(t)),e},e}(Nf),Jf=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(i,{constructor:{value:n,writable:!0}}),i}return o(e,t),e}(Rf);function Zf(t){var e,n,i,r,o,a,s=t.context;return t instanceof Rf&&(e=Cm(s,t.alGet("a")),n=Cm(s,t.alGet("b")),i=Cm(s,t.alGet("c")),r=Cm(s,t.alGet("d")),o=Cm(s,t.alGet("tx")),a=Cm(s,t.alGet("ty"))),new M(e,n,i,r,o,a)}function $f(t,e){e.alPut("a",t.a),e.alPut("b",t.b),e.alPut("c",t.c),e.alPut("d",t.d),e.alPut("tx",t.tx),e.alPut("ty",t.ty)}var t_=function(t){function e(e,n,i,r,o,a,s){void 0===n&&(n=1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=1),void 0===a&&(a=0),void 0===s&&(s=0);var l=t.call(this,e)||this;return l.alPrototype=e.globals.Matrix.alGetPrototypeProperty(),l.alPut("a",n),l.alPut("b",i),l.alPut("c",r),l.alPut("d",o),l.alPut("tx",a),l.alPut("ty",s),l}return o(e,t),e.fromAS3Matrix=function(t,n){return new e(t,n.a,n.b,n.c,n.d,n.tx,n.ty)},e}(Rf),e_=function(t){function e(e){var n=t.call(this,e)||this;return Om(n,{prototype:{value:new n_(e,n)}}),n}return o(e,t),e.prototype.alConstruct=function(t){return t&&t.length>0?new t_(this.context,t[0],t[1],t[2],t[3],t[4],t[5]):new t_(this.context)},e}(Nf),n_=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(i,{constructor:{value:n,writable:!0},clone:{value:i.clone,writable:!0},concat:{value:i.concat,writable:!0},createBox:{value:i.createBox,writable:!0},createGradientBox:{value:i.createGradientBox,writable:!0},deltaTransformPoint:{value:i.deltaTransformPoint,writable:!0},identity:{value:i.identity,writable:!0},invert:{value:i.invert,writable:!0},rotate:{value:i.rotate,writable:!0},scale:{value:i.scale,writable:!0},toString:{value:i._toString,writable:!0},transformPoint:{value:i.transformPoint,writable:!0},translate:{value:i.translate,writable:!0}}),i}return o(e,t),e.prototype.clone=function(){var t=new t_(this.context);return this instanceof Rf&&(t.alPut("a",this.alGet("a")),t.alPut("b",this.alGet("b")),t.alPut("c",this.alGet("c")),t.alPut("d",this.alGet("d")),t.alPut("tx",this.alGet("tx")),t.alPut("ty",this.alGet("ty"))),t},e.prototype.concat=function(t){var e=Zf(this),n=Zf(t);e.concat(n),$f(e,this)},e.prototype.createBox=function(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),t=Cm(this.context,t),e=Cm(this.context,e),n=Cm(this.context,n),i=Cm(this.context,i),r=Cm(this.context,r);var o=Zf(this);o.createBox(t,e,n,i,r),$f(o,this)},e.prototype.createGradientBox=function(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),t=Cm(this.context,t),e=Cm(this.context,e),n=Cm(this.context,n),i=Cm(this.context,i),r=Cm(this.context,r);var o=Zf(this);o.createGradientBox(t,e,n,i,r),$f(o,this)},e.prototype.deltaTransformPoint=function(t){var e=Ff(t),n=Zf(this);return Uf.fromAS3Point(this.context,n.deltaTransformPoint(e))},e.prototype.identity=function(){this.alPut("a",1),this.alPut("b",0),this.alPut("c",0),this.alPut("d",1),this.alPut("tx",0),this.alPut("ty",0)},e.prototype.invert=function(){var t=Zf(this);t.invert(),$f(t,this)},e.prototype.rotate=function(t){t=Cm(this.context,t);var e=Zf(this);e.rotate(t),$f(e,this)},e.prototype.scale=function(t,e){t=Cm(this.context,t),e=Cm(this.context,e);var n=Zf(this);n.scale(t,e),$f(n,this)},e.prototype._toString=function(){return Zf(this).toString()},e.prototype.transformPoint=function(t){var e=Ff(t),n=Zf(this);return Uf.fromAS3Point(this.context,n.transformPoint(e))},e.prototype.translate=function(t,e){t=Cm(this.context,t),e=Cm(this.context,e);var n=Zf(this);n.translate(t,e),$f(n,this)},e}(Rf),i_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){var n=new e(t);return jm(t,n,e.prototype,["align#","displayState#","fullScreenSourceRect#","height#","scaleMode#","showMenu#","width#"],!1),n},e.bindStage=function(t,n,i,r,o){n.avmStage=i,n.avm1Handler=r,e.avmStage=i},e.prototype.getAlign=function(){return this.avmStage.align},e.prototype.setAlign=function(t){this.avmStage.align=t},e.prototype.getDisplayState=function(){return this.avmStage.displayState},e.prototype.setDisplayState=function(t){this.avmStage.displayState=t},e.prototype.getFullScreenSourceRect=function(){return null},e.prototype.setFullScreenSourceRect=function(t){},e.prototype.getHeight=function(){return this.avmStage.stageHeight},e.prototype.getScaleMode=function(){return this.avmStage.scaleMode},e.prototype.setScaleMode=function(t){this.avmStage.scaleMode=t},e.prototype.getShowMenu=function(){return null},e.prototype.setShowMenu=function(t){},e.prototype.getWidth=function(){return this.avmStage.stageWidth},e}(Rf);function r_(t){return t instanceof a_?t.as3BitmapData:null}var o_,a_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._linkedBillboards=[],e._isSymbolSource=!1,e}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,["loadBitmap"],["height#","rectangle#","transparent#","width#","applyFilter","clone","colorTransform","compare","copyChannel","copyPixels","dispose","draw","fillRect","floodFill","generateFilterRect","getColorBoundsRect","getPixel","getPixel32","hitTest","merge","noise","paletteMap","perlinNoise","pixelDissolve","scroll","setPixel","setPixel32","threshold"],null,e.prototype.avm1Constructor)},e.prototype.getBillboard=function(t,e){var n=us.getMaterialForBitmap(this.adaptee),i=new ol(n,t,e);return this._linkedBillboards.push(i),i},Object.defineProperty(e.prototype,"as3BitmapData",{get:function(){return this.adaptee},enumerable:!1,configurable:!0}),e.prototype.avm1Constructor=function(t,e,n,i){t=_m(this.context,t),e=_m(this.context,e),n=arguments.length<3||fm(this.context,n),i=arguments.length<4?4294967295:mm(this.context,i),isNaN(t*e)||t*e==0||(this.adaptee=Dh.getImage(t,e,n,i,!1,i_.avmStage.view.stage))},e.fromAS3BitmapData=function(t,n){var i=new e(t);return i.alPrototype=t.globals.BitmapData.alGetPrototypeProperty(),i.adaptee=n,i},e.loadBitmap=function(t,n){n=ym(t,n);for(var i,r=dt.getBundle(),o=0,a=Object.keys(r._assetDictionary);o<a.length;o++){var s=a[o];if(i=r.getAsset(n,s))break}if(!i||!i.isAsset(Le))return console.warn("[AVM1 BitmapData] Missing bitmap:",n),null;var l=Dh.getImage(i.width,i.height,i.transparent,null,null,i_.avmStage.view.stage);l.copyPixels(i,l.rect,new O(0,0));var u=new e(t);return u.alPrototype=t.globals.BitmapData.alGetPrototypeProperty(),u.adaptee=l,u._isSymbolSource=!0,u},e.prototype.getHeight=function(){return this.adaptee?this.adaptee.height:0},e.prototype.getRectangle=function(){var t=this.adaptee;return t?new zf(this.context,0,0,t.width,t.height):new zf(this.context,0,0,0,0)},e.prototype.getTransparent=function(){return!this.adaptee||this.adaptee.transparent},e.prototype.getWidth=function(){return this.adaptee?this.adaptee.width:0},e.prototype.applyFilter=function(t,e,n,i){return console.warn("[avm1/AVM1BitmapData] - applyFilter not implemented"),0},e.prototype.clone=function(){var t=new e(this.context);return t.alPrototype=this.context.globals.BitmapData.alGetPrototypeProperty(),t.adaptee=this.adaptee?this.adaptee.clone():null,t._isSymbolSource=this._isSymbolSource,t},e.prototype.colorTransform=function(t,e){var n=Gf(t),i=qf(e);this.adaptee.colorTransform(n,i)},e.prototype.compare=function(t){return t instanceof e&&(console.warn("[avm1/AVM1BitmapData] - compare not implemented"),!0)},e.prototype.copyChannel=function(t,e,n,i,r){var o=t.as3BitmapData;if(this.adaptee&&o){var a=Gf(e),s=Ff(n);i=Cm(this.context,i),r=Cm(this.context,r),this.adaptee.copyChannel(o,a,s,i,r)}},e.prototype.copyPixels=function(t,e,n,i,r,o){if(t){var a=this.adaptee,s=t.as3BitmapData;if(this.adaptee&&s){var l=Gf(e),u=Ff(n),c=i?i.as3BitmapData:null,h=r?Ff(r):null;o=fm(this.context,o),a.copyPixels(s,l,u,c,h,o)}}else console.warn("[AVM1BitmapData::copyPixels] Empty source!")},e.prototype.dispose=function(){if(this.adaptee){for(var t=0,e=this._linkedBillboards;t<e.length;t++){var n=e[t];n.parent.removeChild(n),n.dispose()}this._linkedBillboards=[],this._isSymbolSource||this.adaptee.dispose(),this.adaptee=null}},e.prototype.draw=function(t,e,n,i,r,o){if(this.adaptee)if(t){var a=t;if("string"!=typeof t||(a=this.context.resolveTarget(t))){var s=a.adaptee,l=e?Zf(e):null,u=n?qf(n):null,c=r?Gf(r):null;i=(i="number"==typeof i?Nm[i]:xm(this.context,i))||null,o=fm(this.context,o),a._locked=!0,this.as3BitmapData.draw(s,l,u,i,c,o),a._locked=!1}else console.warn("[AVM1BitmapData::draw] Source ".concat(t,"  not resolved!"))}else console.warn("[AVM1BitmapData::draw] Empty source!")},e.prototype.fillRect=function(t,e){if(this.adaptee){var n=Gf(t);e=mm(this.context,e),this.as3BitmapData.fillRect(n,e)}},e.prototype.floodFill=function(t,e,n){t=Cm(this.context,t),e=Cm(this.context,e),n=mm(this.context,n),this.as3BitmapData.floodFill(t,e,n)},e.prototype.generateFilterRect=function(t,e){console.warn("[avm1/AVM1BitmapData] - generateFilterRect not implemented")},e.prototype.getColorBoundsRect=function(t,e,n){var i;if(void 0===n&&(n=!0),this.adaptee){t=mm(this.context,t)>>>0,e=mm(this.context,e)>>>0,n=fm(this.context,n);var r=null===(i=this.as3BitmapData)||void 0===i?void 0:i.getColorBoundsRect(t,e,n);return r?new zf(this.context,r.x,r.y,r.width,r.height):null}},e.prototype.getPixel=function(t,e){return this.adaptee?this.adaptee.getPixel(t,e):0},e.prototype.getPixel32=function(t,e){return this.adaptee?this.adaptee.getPixel32(t,e):0},e.prototype.hitTest=function(t,e,n,i,r){return console.warn("[avm1/AVM1BitmapData] - hitTest not implemented"),!1},e.prototype.merge=function(t,e,n,i,r,o,a){var s=t.as3BitmapData;if(this.adaptee&&s){var l=Gf(e),u=Ff(n);i=mm(this.context,i),r=mm(this.context,r),o=mm(this.context,o),a=mm(this.context,a),this.as3BitmapData.merge(s,l,u,i,r,o,a)}},e.prototype.noise=function(t,e,n,i,r){t=mm(this.context,t),e=arguments.length<2?0:mm(this.context,e),n=arguments.length<3?255:mm(this.context,n),i=arguments.length<4?7:mm(this.context,i),r=!(arguments.length<5)&&fm(this.context,r),console.warn("[avm1/AVM1BitmapData] - noise not implemented")},e.prototype.paletteMap=function(t,e,n,i,r,o,a){console.warn("[avm1/AVM1BitmapData] - paletteMap not implemented")},e.prototype.perlinNoise=function(t,e,n,i,r,o,a,s,l){t=Cm(this.context,t),e=Cm(this.context,e),n=Cm(this.context,n),i=Cm(this.context,i),r=fm(this.context,r),o=fm(this.context,o),a=void 0===a?7:Cm(this.context,a),s=fm(this.context,s),console.warn("[avm1/AVM1BitmapData] - perlinNoise not implemented")},e.prototype.pixelDissolve=function(t,e,n,i,r,o){var a=Gf(e);return i=arguments.length<4?0:mm(this.context,i),r=arguments.length<5?a.width*a.height/30:mm(this.context,r),o=arguments.length<6?0:mm(this.context,o),console.warn("[avm1/AVM1BitmapData] - pixelDissolve not implemented"),0},e.prototype.scroll=function(t,e){if(t=0|Cm(this.context,t),e=0|Cm(this.context,e),(t||e)&&this.adaptee){var n=this.as3BitmapData;n.copyPixels(n,n.rect,new O(t,e),null,null,!1)}},e.prototype.setPixel=function(t,e,n){this.adaptee&&(t=Cm(this.context,t),e=Cm(this.context,e),n=mm(this.context,n),this.adaptee.setPixel(t,e,n))},e.prototype.setPixel32=function(t,e,n){this.adaptee&&(t=Cm(this.context,t),e=Cm(this.context,e),n=mm(this.context,n),this.adaptee.setPixel32(t,e,n))},e.prototype.threshold=function(t,e,n,i,r,o,a,s){var l=this.as3BitmapData,u=t.as3BitmapData;if(this.adaptee&&u){var c=Gf(e),h=Ff(n);return i=xm(this.context,i),r=mm(this.context,r)>>>0,o=arguments.length<6?0:mm(this.context,o),a=arguments.length<7?4294967295:mm(this.context,a),s=!(arguments.length<8)&&fm(this.context,s),l.threshold(u,c,h,i,r,o,a,s),0}},e}(Rf);!function(t){t[t._x=0]="_x",t[t._y=1]="_y",t[t._xscale=2]="_xscale",t[t._yscale=3]="_yscale",t[t._currentframe=4]="_currentframe",t[t._totalframes=5]="_totalframes",t[t._alpha=6]="_alpha",t[t._visible=7]="_visible",t[t._width=8]="_width",t[t._height=9]="_height",t[t._rotation=10]="_rotation",t[t._target=11]="_target",t[t._framesloaded=12]="_framesloaded",t[t._name=13]="_name",t[t._droptarget=14]="_droptarget",t[t._url=15]="_url",t[t._highquality=16]="_highquality",t[t._focusrect=17]="_focusrect",t[t._soundbuftime=18]="_soundbuftime",t[t._quality=19]="_quality",t[t._xmouse=20]="_xmouse",t[t._ymouse=21]="_ymouse"}(o_||(o_={}));var s_,l_,u_,c_,h_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){var n=["align#","blockIndent#","bold#","bullet#","color#","font#","getTextExtent","indent#","italic#","kerning#","leading#","leftMargin#","letterSpacing#","rightMargin#","size#","tabStops#","target#","adaptee#","underline#","url#"],i=Gm(t,!0,e,[],n,null,e.prototype.avm1Constructor),r=i.alGetPrototypeProperty(),o=null;return n.forEach((function(t){"#"===t[t.length-1]&&(t=t.slice(0,-1)),(o=r.alGetOwnProperty(t)).flags&=-2,r.alSetOwnProperty(t,o)})),i},e.createFromNative=function(t,n){var i=t.globals.TextFormat,r=new e(t);return r.alPrototype=i.alGetPrototypeProperty(),r.adaptee=n,r},e.prototype.alPut=function(e,n){"font"==e&&this.setFont(n),t.prototype.alPut.call(this,e,n)},e.prototype.avm1Constructor=function(t,e,n,i,r,o,a,s,l,u,c,h,p){var d=this.context;t=null==t?null:ym(d,t),e=null==e?null:_m(d,e),n=null==n?null:_m(d,n),i=null==i?null:fm(d,i),r=null==r?null:fm(d,r),o=null==o?null:fm(d,o),a=null==a?null:ym(d,a),s=null==s?null:ym(d,s),l=null==l?null:ym(d,l),u=null==u?null:_m(d,u),c=null==c?null:_m(d,c),h=null==h?null:_m(d,h),p=null==p?null:_m(d,p);var f=new zc(t,e,n,i,r,o,a,s,l,u,c,h,p);this.adaptee=f},e.alInitStatic=function(t){var e=new Ch;e.multiline=!0,this._measureTextField=e},e.prototype.getAdaptee=function(){return this.adaptee.id},e.prototype.setAdaptee=function(t){},e.prototype.getAlign=function(){return this.adaptee.align},e.prototype.setAlign=function(t){var e=ym(this.context,t);""==e&&(e="center"),this.adaptee.align=e},e.prototype.getBlockIndent=function(){return this.adaptee.blockIndent},e.prototype.setBlockIndent=function(t){this.adaptee.blockIndent=_m(this.context,t)},e.prototype.getBold=function(){return this.adaptee.bold},e.prototype.setBold=function(t){this.adaptee.bold=fm(this.context,t)},e.prototype.getBullet=function(){return this.adaptee.bullet},e.prototype.setBullet=function(t){this.adaptee.bullet=fm(this.context,t)},e.prototype.getColor=function(){return this.adaptee.color},e.prototype.setColor=function(t){this.adaptee.color=_m(this.context,t)},e.prototype.getFont=function(){return this.adaptee.font_name},e.prototype.setFont=function(t){this.adaptee.font_name=ym(this.context,t)},e.prototype.getIndent=function(){return this.adaptee.indent},e.prototype.setIndent=function(t){this.adaptee.indent=_m(this.context,t)},e.prototype.getItalic=function(){return this.adaptee.italic},e.prototype.setItalic=function(t){this.adaptee.italic=fm(this.context,t)},e.prototype.getKerning=function(){return this.adaptee.kerning},e.prototype.setKerning=function(t){this.adaptee.kerning=fm(this.context,t)},e.prototype.getLeading=function(){return this.adaptee.leading},e.prototype.setLeading=function(t){this.adaptee.leading=_m(this.context,t)},e.prototype.getLeftMargin=function(){return this.adaptee.leftMargin},e.prototype.setLeftMargin=function(t){this.adaptee.leftMargin=_m(this.context,t)},e.prototype.getLetterSpacing=function(){return this.adaptee.letterSpacing},e.prototype.setLetterSpacing=function(t){this.adaptee.letterSpacing=_m(this.context,t)},e.prototype.getRightMargin=function(){return this.adaptee.rightMargin},e.prototype.setRightMargin=function(t){this.adaptee.rightMargin=_m(this.context,t)},e.prototype.getSize=function(){return this.adaptee.size},e.prototype.setSize=function(t){this.adaptee.size=_m(this.context,t)},e.prototype.getTabStops=function(){return new Zg(this.context,this.adaptee.tabStops)},e.prototype.setTabStops=function(t){var e=this;this.adaptee.tabStops=Zg.mapToJSArray(t,(function(t){return _m(e.context,t)}))},e.prototype.getTarget=function(){return""},e.prototype.setTarget=function(t){},e.prototype.getTextExtent=function(t,n){t=xm(this.context,t),n=+n;var i=this.context.getStaticState(e)._measureTextField;!isNaN(n)&&n>0?(i.width=n+4,i.wordWrap=!0):i.wordWrap=!1,i.newTextFormat=this.adaptee,i.text=t;var r=vm(this.context),o=i.textWidth,a=i.textHeight;return r.alPut("width",o),r.alPut("height",a),r.alPut("textFieldWidth",o+4),r.alPut("textFieldHeight",a+4),r},e.prototype.getUnderline=function(){return this.adaptee.underline},e.prototype.setUnderline=function(t){this.adaptee.underline=fm(this.context,t)},e.prototype.getUrl=function(){return this.adaptee.url},e.prototype.setUrl=function(t){this.adaptee.url=ym(this.context,t)},e}(Rf),p_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!1,e,["BACKSPACE","CAPSLOCK","CONTROL","DELETEKEY","DOWN","END","ENTER","ESCAPE","HOME","INSERT","LEFT","PGDN","PGUP","RIGHT","SHIFT","SPACE","TAB","UP","isDown","getCode","getAscii"],[])},e.alInitStatic=function(t){this._keyStates=[],this._lastKeyCode=0},e.bindStage=function(t,n,i,r){e.keyDownDelegate&&r.removeEventListener("keydown",e.keyDownDelegate),e.keyUpDelegate&&r.removeEventListener("keyup",e.keyUpDelegate),e.keyDownDelegate=function(i){var r=t.getStaticState(e);r._lastKeyCode=i.keyCode,r._keyStates[i.keyCode]=1,Sm(n,"broadcastMessage",["onKeyDown"])},e.keyUpDelegate=function(i){var r=t.getStaticState(e);r._lastKeyCode=i.keyCode,delete r._keyStates[i.keyCode],Sm(n,"broadcastMessage",["onKeyUp"])},r.addEventListener("keydown",e.keyDownDelegate),r.addEventListener("keyup",e.keyUpDelegate)},e.isDown=function(t,n){return!!t.getStaticState(e)._keyStates[n]},e.getCode=function(t){return t.getStaticState(e)._lastKeyCode},e.getAscii=function(t){return t.getStaticState(e)._lastKeyCode},e.BACKSPACE=8,e.CAPSLOCK=20,e.CONTROL=17,e.DELETEKEY=46,e.DOWN=40,e.END=35,e.ENTER=13,e.ESCAPE=27,e.HOME=36,e.INSERT=45,e.LEFT=37,e.PGDN=34,e.PGUP=33,e.RIGHT=39,e.SHIFT=16,e.SPACE=32,e.TAB=9,e.UP=38,e.keyDownDelegate=null,e.keyUpDelegate=null,e}(Rf),d_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,[],["matrix#","concatenatedMatrix#","colorTransform#","pixelBounds#"],null,e.prototype.avm1Constructor)},Object.defineProperty(e.prototype,"as3Transform",{get:function(){return this._targetAwayObject.transform},enumerable:!1,configurable:!0}),e.prototype.avm1Constructor=function(t){this._target=this.context.resolveTarget(t),this._targetAwayObject=this._target.adaptee},e.prototype.getMatrix=function(){var t=this._targetAwayObject.transform;return t_.fromAS3Matrix(this.context,t.matrix)},e.prototype.setMatrix=function(t){this._targetAwayObject.transform.matrix=Zf(t)},e.prototype.getConcatenatedMatrix=function(){var t=this._target.node.getMatrix3D()._rawData;return new t_(this.context,t[0],t[1],t[4],t[5],t[12],t[13])},e.prototype.getColorTransform=function(){var t=this._targetAwayObject.transform;return Kf.fromAwayColorTransform(this.context,t.colorTransform)},e.prototype.setColorTransform=function(t){this._targetAwayObject.transform.colorTransform=qf(t)},e.prototype.getPixelBounds=function(){var t=this._targetAwayObject.transform;return zf.fromAS3Rectangle(this.context,t.pixelBounds)},e}(Rf);!function(t){t[t.DISPLACEMENT=8]="DISPLACEMENT"}(c_||(c_={}));var f_=a(a({},ld),c_),__=((s_={})[f_.DROPSHADOW]="DropShadowFilter",s_[f_.GLOW]="GlowFilter",s_[f_.BEVEL]="BevelFilter",s_[f_.GRADIENTGLOW]="GradientGlowFilter",s_[f_.GRADIENTBEVEL]="GradientBevelFilter",s_[f_.BLUR]="BlurFilter",s_[f_.CONVOLUTION]="ConvolutionFilter",s_[f_.COLORMATRIX]="ColorMatrixFilter",s_[f_.DISPLACEMENT]="DisplacementMapFilter",s_),g_=((l_={})[f_.DROPSHADOW]="dropShadow",l_[f_.GLOW]="glow",l_[f_.BEVEL]="bevel",l_[f_.GRADIENTGLOW]="gradientGlow",l_[f_.GRADIENTBEVEL]="bevel",l_[f_.BLUR]="blur",l_[f_.CONVOLUTION]="convolution",l_[f_.COLORMATRIX]="colorMatrix",l_[f_.DISPLACEMENT]="displacement",l_),m_=((u_={})[f_.DROPSHADOW]=function(t){var e=t.colors[0]>>>8,n=(255&t.colors[0])/255,i=180*t.angle/Math.PI,r=!t.compositeSource;return{distance:t.distance,angle:i,color:e,alpha:n,blurX:t.blurX,blurY:t.blurY,strength:t.strength,quality:t.quality,inner:t.inner,knockout:t.knockout,hideObject:r}},u_[f_.GLOW]=function(t){return{color:t.colors[0]>>>8,alpha:(255&t.colors[0])/255,blurX:t.blurX,blurY:t.blurY,strength:t.strength,quality:t.quality,inner:t.inner,knockout:t.knockout}},u_[f_.BEVEL]=function(t){var e=t.colors[0]>>>8,n=(255&t.colors[0])/255,i=t.colors[1]>>>8,r=(255&t.colors[1])/255,o="outer";t.onTop?o="full":t.inner&&(o="inner");var a=180*t.angle/Math.PI;return{distance:t.distance,angle:a,highlightColor:e,highlightAlpha:n,shadowColor:i,shadowAlpha:r,blurX:t.blurX,blurY:t.blurY,strength:t.strength,quality:t.quality,type:o,knockout:t.knockout}},u_[f_.GRADIENTGLOW]=function(t){return null},u_[f_.GRADIENTBEVEL]=function(t){return null},u_[f_.BLUR]=function(t){return{blurX:t.blurX,blurY:t.blurY,quality:t.quality}},u_[f_.CONVOLUTION]=function(t){return null},u_[f_.COLORMATRIX]=function(t){return{matrix:t.matrix}},u_),y_=function(t){function e(e){var n=t.call(this,e)||this;return n.alSetOwnPrototypeProperty(new A_(e,n)),n}return o(e,t),e.prototype.alConstruct=function(t){var e=new Rf(this.context);return e.alPrototype=this.alGetPrototypeProperty(),e},e}(Nf),A_=function(t){function e(e,n){var i=t.call(this,e)||this;return Om(i,{constructor:{value:n,writable:!0},clone:{value:i.clone,writable:!0}}),i}return o(e,t),e.prototype.clone=function(){var t=new Rf(this.context);return t.alPrototype=this.alGetPrototypeProperty(),t},e}(Rf);function v_(t,e,n,i,r){var o=__[i];function a(e){var n=new Rf(t);n.alPrototype=l;for(var i=0;i<r.length;i+=2)n.alPut(r[i],x_(t,e[r[i]],r[i+1]));return n}var s=n.alGetPrototypeProperty(),l=Object.create(A_.prototype);Rf.call(l,t),l.alPrototype=s;var u=Object.create(y_.prototype);Nf.call(u,t),u.alSetOwnPrototypeProperty(l),u.alConstruct=function(e){var n=new Rf(t);if(n.alPrototype=l,e)for(var i=0;i<e.length;i++)n.alPut(r[i<<1],e[i]);return n},Om(l,{constructor:{value:u,writable:!0},clone:{value:function(){var e=new Rf(t);e.alPrototype=l;for(var n=0;n<r.length;n+=2)e.alPut(r[n],this.alGet(r[n]));return e},writable:!0}}),l.asFilterConverter={toAS3Filter:function(e){for(var n={filterName:o,filterType:i},a=0;a<r.length;a+=2){var s=e.alGet(r[a]);void 0!==s&&(n[r[a]]=b_(t,s,r[a+1]))}return n},fromAS3Filter:a,fromTimelineFilter:function(t){var e=m_[t.type],n=e?e(t):null;if(n)return a(n);console.warn("[AVM1 FILTER] Timeline filter converter not implemented for:",g_[t.type])},getAS3Class:null},e.alPut(o,u)}function b_(t,e,n){switch(n){case"String":return ym(t,e);case"Boolean":return fm(t,e);case"Number":return _m(t,e);case"Numbers":var i=[];if(e)for(var r=0,o=e.alGet("length");r<o;r++)i[r]=_m(t,e.alGet(r));return i;case"BitmapData":return r_(e);case"Point":return Ff(e);default:console.warn("Filters","Unknown convertFromAS3Field type: "+n)}}function x_(t,e,n){switch(n){case"String":case"Boolean":case"Number":return e;case"Numbers":var i=[];if(e)for(var r=0,o=e.length;r<o;r++)i[r]=+e[r];return new Zg(t,i);case"BitmapData":return a_.fromAS3BitmapData(t,e);case"Point":return Uf.fromAS3Point(t,e);default:console.warn("Filters","Unknown convertFromAS3Field type: "+n)}}function C_(t,e){for(var n=e?e.alPrototype:null;n&&!n.asFilterConverter;)n=n.alPrototype;if(n)return n.asFilterConverter.toAS3Filter(e)}var I_=pp.register(new cp("AVM1")),E_=I_.register(new hp("t1","traceAvm1","boolean",!1,"trace AVM1 execution")),w_=I_.register(new hp("e1","errorsAvm1","boolean",!1,"fail on AVM1 warnings and errors")),S_=I_.register(new hp("w1","warningsAvm1","boolean",!0,"Emit messages for AVM1 warnings and errors")),D_=I_.register(new hp("ha1","nohangAvm1","boolean",!1,"disable fail on AVM1 hang")),T_=I_.register(new hp("ca1","compileAvm1","boolean",!0,"compiles AVM1 code")),P_=I_.register(new hp("da1","debugAvm1","boolean",!1,"allows AVM1 code debugging"));I_.register(new hp("cw1","wellknownAvm1","boolean",!0,"Replaces well-known actions patterns instead of compilation"));var B_=Tt.instance.addStore("avm1",{LAZY_EVENT_REGISTERING:!0}),O_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasSwappedDepth=!1,e.dynamicallyCreated=!1,e._filterModels=[],e._eventsMap={},e._eventsListeners={},e._eventHandlers={},e.enabled=!0,e}return o(e,t),e.CompleteEventRegistering=function(){var t=e.LAZY_EVENT_QUEUE.slice();e.LAZY_EVENT_QUEUE=[];for(var n=0,i=t;n<i.length;n++){var r=i[n];r.target.addEventListenerOnAdapter(r.event,r.callback,r.eventProps)}},e.prototype.initAVM1SymbolInstance=function(t,e){this.constructorHasRun=!0,this.avmType="symbol",this.scriptRefsToChilds={},this._mouseListenerCount=0,this._avm1Context=t,this._ownProperties=Object.create(null),this._prototype=null;var n=this;this._onClipEventsListeners=[];var i=new Lf(131,null,{alCall:function(t,e){return n.alPrototype}},{alCall:function(t,e){n.alPrototype=e[0]}});this.alSetOwnProperty("__proto__",i),this.adaptee=e,this.adaptee.partitionClass=yr,this.node=i_.avmStage.view.getNode(this.adaptee);var r=e.name,o=this.get_parent();r&&o&&o._addChildName(this,r)},e.prototype.bindEvents=function(t,e){var n=this;this._events=t,t.forEach((function(t){var e=t.propertyName=n.context.normalizeName(t.propertyName);n._eventsMap[e]=t,n._updateEvent(t)}))},e.prototype.unbindEvents=function(){var t=this;this._events.forEach((function(e){t.context.unregisterEventPropertyObserver(e.propertyName,t),t._removeEventListener(e)})),this._events=null,this._eventsMap=null,this._eventsListeners=null,this._eventHandlers=null},e.prototype._initEventsHandlers=function(){throw"AVM1SymbolBase _initEventsHandlers must be overwritten"},e.prototype.updateEventByPropName=function(t){this._eventsMap?this._eventsMap[t]&&this._updateEvent(this._eventsMap[t]):(this._initEventsHandlers(),console.log("no eventsmap set",this))},e.prototype.updateAllEvents=function(){this._events.forEach((function(t){this._updateEvent(t)}),this)},e.prototype._updateEvent=function(t){!function(t,e,n){if(e.alHasProperty(n)&&e.alGet(n)instanceof Nf)return!0;if(e.alHasProperty(n)&&e._ownProperties[n]&&e._ownProperties[n].value)return!0;var i=e.alGet("_listeners");if(!(i instanceof Zg))return!1;return i.value.some((function(t){return t instanceof Rf&&t.alHasProperty(n)}))}(this.context,this,t.propertyName)?this._removeEventListener(t):this._addEventListener(t)},e.prototype._addOnClipEventListener=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null),t.propertyName=this.context.normalizeName(t.propertyName),!this.enabled&&t.allowDisable||(B_.LAZY_EVENT_REGISTERING?e.LAZY_EVENT_QUEUE.push({target:this,event:t,callback:n,eventProps:i}):(this._onClipEventsListeners.push({event:t,callback:n}),this.addEventListenerOnAdapter(t,n,i)))},e.prototype._addEventListener=function(t,e){void 0===e&&(e=null);var n=this.context.normalizeName(t.propertyName),i=this._eventsListeners[n],r=this;i||(i=e||function(){var t=null;"onchanged"==n.toLowerCase()&&(t=[r]),function(t,e,n,i){void 0===i&&(i=null);var r=e.alGet(n);r instanceof Nf&&("onenterframe"==n.toLowerCase()&&(r.isOnEnter=!0),t.executeFunction(r,e,i));var o=e.alGet("_listeners");if(o instanceof Zg){var a=null;o.value.forEach((function(r){r instanceof Rf&&(a=r.alGet(n))instanceof Nf&&t.executeFunction(a,e,i)}))}}(this.context,this,n,t)}.bind(this),this._eventsListeners[n]=i,this._eventHandlers[n]=t),!this.enabled&&t.allowDisable||this.addEventListenerOnAdapter(t,i)},e.prototype.addEventListenerOnAdapter=function(t,e,n){(void 0===n&&(n=null),t.stageEvent)?this.context.globals.Stage.avm1Handler.addAVM1EventListener(this.adaptee,t.eventName,e,n):(this.adaptee.addEventListener(t.eventName,e),this._updateMouseEnabled(t,!0))},e.prototype.removeEventListenerOnAdapter=function(t,e){if(t.stageEvent){var n=this.context.globals.Stage.avm1Handler;n&&n.removeAVM1EventListener(this.adaptee,t.eventName,e)}else this.adaptee.removeEventListener(t.eventName,e),this._updateMouseEnabled(t,!1)},e.prototype._updateMouseEnabled=function(t,e){this.adaptee.isAVMScene||t.isMouse&&(e?(this._mouseListenerCount++,this.adaptee.mouseEnabled=!0,this.adaptee.mouseChildren=!1):(this._mouseListenerCount--,this._mouseListenerCount<=0&&(this._mouseListenerCount=0,this.adaptee.mouseEnabled=!1,this.adaptee.mouseChildren=!0)))},e.prototype.freeFromScript=function(){for(var e in t.prototype.freeFromScript.call(this),this.enabled=!0,this.adaptee.mouseEnabled=!1,this.adaptee.mouseChildren=!0,Sm(this.context.globals.Key,"removeListener",[this]),this._eventsListeners)this.removeEventListenerOnAdapter(this._eventHandlers[e],this._eventsListeners[e]);this._eventsListeners={};for(var n=this._onClipEventsListeners.length;n>0;)n--,this.removeEventListenerOnAdapter(this._onClipEventsListeners[n].event,this._onClipEventsListeners[n].callback);this._onClipEventsListeners=[],this._mouseListenerCount=0},e.prototype._removeEventListener=function(t){var e=this.context.normalizeName(t.propertyName),n=this._eventsListeners[e];n&&(this.removeEventListenerOnAdapter(t,n),delete this._eventsListeners[e])},e.prototype.onEventPropertyModified=function(t){t=this.context.normalizeName(t);var e=this._eventsMap[t];this._updateEvent(e)},e.prototype.getEnabled=function(){return this.enabled},e.prototype.setEnabled=function(t){t!=this.enabled&&(this.enabled=t,this.setEnabledListener(t))},e.prototype.setEnabledListener=function(t){if(!1!==t&&0!==t){for(var e in this._eventsListeners)this._eventHandlers[e].allowDisable&&this.addEventListenerOnAdapter(this._eventHandlers[e],this._eventsListeners[e]);for(var e in this._onClipEventsListeners)this._onClipEventsListeners[e].event.allowDisable&&this.addEventListenerOnAdapter(this._onClipEventsListeners[e].event,this._onClipEventsListeners[e].callback)}else{for(var e in this._eventsListeners)this._eventHandlers[e].allowDisable&&this.removeEventListenerOnAdapter(this._eventHandlers[e],this._eventsListeners[e]);for(var e in this._onClipEventsListeners)this._onClipEventsListeners[e].event.allowDisable&&this.removeEventListenerOnAdapter(this._onClipEventsListeners[e].event,this._onClipEventsListeners[e].callback)}},e.prototype.get_alpha=function(){return 100*this.adaptee.alpha},e.prototype.set_alpha=function(t){this._ctBlockedByScript=!0,t=_m(this.context,t),isNaN(t)||(this.adaptee.alpha=t/100)},e.prototype.getBlendMode=function(){return""},e.prototype.setBlendMode=function(t){},e.prototype.getCacheAsBitmap=function(){return this.adaptee.cacheAsBitmap},e.prototype.setCacheAsBitmap=function(t){t=fm(this.context,t),this.adaptee.cacheAsBitmap=t},e.prototype.getFilters=function(){return this._as2Filters},e.prototype.setFilters=function(t){this.adaptee.filters=function(t,e){var n=[];if(!e)return n;for(var i=e.alGet("length"),r=0;r<i;r++){var o=C_(0,e.alGet(r));o&&g_[o.filterType]&&(o.filterName=g_[o.filterType],n.push(o))}return n}(this.context,t),this._as2Filters=t},e.prototype.updateFilters=function(t){if(!t)return this.setFilters(null);this.setFilters(function(t,e){if(e&&e.length){for(var n=t.globals.filters,i=[],r=0,o=e;r<o.length;r++){var a=o[r],s=n.alGet(__[a.type]);if(s){var l=s.alGetPrototypeProperty();if(l.asFilterConverter){var u=l.asFilterConverter.fromTimelineFilter(a);if(!u)continue;i.push(u)}}}return new Zg(t,i)}}(this.context,t))},e.prototype.get_focusrect=function(){return!1},e.prototype.set_focusrect=function(t){},e.prototype.get_height=function(){var t=i_.avmStage.pickGroup.getBoundsPicker(this.node.partition).getBoxBounds(i_.avmStage.view.getNode(this.adaptee.parent||i_.avmStage.root));return null==t?0:Qm(t.height)},e.prototype.set_height=function(t){t=Qm(_m(this.context,t)),this._blockedByScript=!0,isNaN(t)||(i_.avmStage.pickGroup.getBoundsPicker(this.node.partition).height=t)},e.prototype.get_highquality=function(){switch(this.get_quality()){case"BEST":return 2;case"HIGH":return 1;default:return 0}},e.prototype.set_highquality=function(t){var e;switch(gm(this.context,t)){case 2:e="BEST";break;case 1:e="HIGH";break;default:e="LOW"}this.set_quality(e)},e.prototype.getMenu=function(){},e.prototype.setMenu=function(t){},e.prototype.get_name=function(){return this.adaptee?this.adaptee.name:void 0},e.prototype.set_name=function(t){t=xm(this.context,t);var e=this.adaptee.name;this.adaptee.name=t;var n=this.get_parent();n&&(n.registerScriptObject(this.adaptee),n._updateChildName(this,e,t))},e.prototype.get_parent=function(){return Vm(this.adaptee.parent,this.context)||void 0},e.prototype.set_parent=function(t){},e.prototype.getOpaqueBackground=function(){return 0},e.prototype.setOpaqueBackground=function(t){},e.prototype.get_quality=function(){return"HIGH"},e.prototype.set_quality=function(t){},e.prototype.set_root=function(t){},e.prototype.get_root=function(){for(var t=this.adaptee,e=null;t&&!t.isAVMScene;){if((e=Vm(t,this.context))&&e.get_lockroot())return e;t=t.parent}if(t)return Vm(t,this.context)},e.prototype.get_rotation=function(){for(var t=Math.round(this.adaptee.rotationZ);t>180;)t-=360;for(;t<-180;)t+=360;return t},e.prototype.set_rotation=function(t){t=_m(this.context,t),this._blockedByScript=!0,isNaN(t)||(this.adaptee.rotationZ=t)},e.prototype.getScale9Grid=function(){return zf.fromAS3Rectangle(this.context,this.adaptee.scale9Grid)},e.prototype.setScale9Grid=function(t){this.adaptee.scale9Grid=ap(t)?null:Gf(t)},e.prototype.getScrollRect=function(){return zf.fromAS3Rectangle(this.context,this.adaptee.scrollRect)},e.prototype.setScrollRect=function(t){this.adaptee.scrollRect=ap(t)?null:Gf(t)},e.prototype.get_soundbuftime=function(){return 0},e.prototype.set_soundbuftime=function(t){},e.prototype.getTabEnabled=function(){return!!this.adaptee&&this.adaptee.tabEnabled},e.prototype.setTabEnabled=function(t){this.adaptee&&(this.adaptee.tabEnabled=t)},e.prototype.getTabIndex=function(){return this.adaptee.tabIndex},e.prototype.setTabIndex=function(t){this.adaptee.tabIndex=t},e.prototype.get_target=function(){var t=this.adaptee;if(t===t.root)return"/";var e="";do{if(ap(t))return;e="/"+t.name+e,t=t.parent}while(t&&!t.isAVMScene);return e},e.prototype.getTransform=function(){return this.context.swfVersion<8?this.transformPreFP8:(this._avmTransform||(this._avmTransform=this.context.globals.Transform.alConstruct([this])),this._avmTransform)},e.prototype.setTransform=function(t){this.context.swfVersion<8?this.transformPreFP8=t:t instanceof d_&&console.log("not implemented: AVM1SymbolBase.setTransform")},e.prototype.get_visible=function(){if(this.adaptee)return this.adaptee.visible},e.prototype.set_visible=function(t){this._visibilityByScript=!0,t=fm(this.context,t),this.adaptee.visible=t},e.prototype.get_url=function(){return new URL(this.adaptee.assetNamespace,document.baseURI).href},e.prototype.get_width=function(){var t=i_.avmStage.pickGroup.getBoundsPicker(this.node.partition).getBoxBounds(i_.avmStage.view.getNode(this.adaptee.parent||i_.avmStage.root));return null==t?0:zm(t.width)},e.prototype.set_width=function(t){t=zm(_m(this.context,t)),this._blockedByScript=!0,isNaN(t)||(i_.avmStage.pickGroup.getBoundsPicker(this.node.partition).width=t)},e.prototype.get_x=function(){return this.adaptee?Qm(this.adaptee.x):void 0},e.prototype.set_x=function(t){this.adaptee&&(t=Qm(_m(this.context,t)),this._blockedByScript=!0,isNaN(t)||(this.adaptee.x=t))},e.prototype.get_xmouse=function(){return Qm(i_.avmStage.getLocalMouseX(this.node))},e.prototype.get_xscale=function(){return this.adaptee?100*this.adaptee.scaleX:void 0},e.prototype.set_xscale=function(t){this.adaptee&&(t=_m(this.context,t),this._blockedByScript=!0,isNaN(t)||(this.adaptee.scaleX=t/100))},e.prototype.get_y=function(){return this.adaptee?Qm(this.adaptee.y):void 0},e.prototype.set_y=function(t){this.adaptee&&(t=Qm(_m(this.context,t)),this._blockedByScript=!0,isNaN(t)||(this.adaptee.y=t))},e.prototype.get_ymouse=function(){return Qm(i_.avmStage.getLocalMouseY(this.node))},e.prototype.get_yscale=function(){return this.adaptee?100*this.adaptee.scaleY:void 0},e.prototype.set_yscale=function(t){this.adaptee&&(t=_m(this.context,t),this._blockedByScript=!0,isNaN(t)||(this.adaptee.scaleY=t/100))},e.prototype.getDepth=function(){return this.protoTypeChanged||!this.adaptee?null:Xm(this.adaptee._avmDepthID)},e.prototype.toString=function(){for(var t=this.adaptee,e=[];t;)t.isAVMScene?(e.push("_level0"),t=null):(e.push(t.name),t=t.parent);for(var n=e.length,i="";n>0;)i+=e[--n],n>0&&(i+=".");return i},e.LAZY_EVENT_QUEUE=[],e}(Rf),M_=function(){return function(t,e,n,i,r,o){this.propertyName=t,this.eventName=e,this.stageEvent=n,this.allowDisable=i,this.isMouse=r,this.isButton=o}}(),L_=function(){return function(){}}(),R_=[-1,37,39,36,35,45,46,-1,8,-1,-1,-1,-1,13,38,40,33,34,9,27],N_=Object.create(null),F_=N_,k_=M_;F_[262144]=!0,F_[512]=!0,F_[131072]=new k_("onKey",Xc.KEYDOWN,!0,!0,!1,!1),F_[1]=new k_("onLoad","load",!1,!1,!1,!1),F_[4]=new k_("onUnload","unload",!1,!1,!1,!1),F_[256]=new k_("onData","data",!1,!1,!1,!1),F_[2]=new k_("onEnterFrame","enterFrame",!1,!1,!1,!1),F_[64]=new k_("onKeyDown",Xc.KEYDOWN,!0,!0,!1,!1),F_[128]=new k_("onKeyUp",Xc.KEYUP,!0,!0,!1,!1),F_[8]=new k_("onMouseMove",ml.MOUSE_MOVE,!0,!0,!0,!1),F_[16]=new k_("onMouseDown",ml.MOUSE_DOWN,!0,!0,!0,!1),F_[32]=new k_("onMouseUp",ml.MOUSE_UP,!0,!0,!0,!1),F_[1024]=new k_("onPress",ml.MOUSE_DOWN,!1,!0,!0,!0),F_[2048]=new k_("onRelease",ml.MOUSE_UP,!1,!0,!0,!0),F_[4096]=new k_("onReleaseOutside",ml.MOUSE_UP_OUTSIDE,!1,!0,!0,!0),F_[8192]=new k_("onRollOver",ml.MOUSE_OVER,!1,!0,!0,!0),F_[16384]=new k_("onRollOut",ml.MOUSE_OUT,!1,!0,!0,!0),F_[32768]=new k_("onDragOver",ml.DRAG_OVER,!1,!0,!0,!0),F_[65536]=new k_("onDragOut",ml.DRAG_OUT,!1,!0,!0,!0);var U_=new k_("onSetFocus",Ih.FOCUS_IN,!1,!0,!1,!1),V_=new k_("onKillFocus",Ih.FOCUS_OUT,!1,!0,!1,!1),j_=new k_("onChanged",Yc.CHANGED,!1,!0,!1,!1),G_=[N_[1],N_[4],N_[256],N_[2],N_[64],N_[128],N_[8],N_[16],N_[32],N_[1024],N_[2048],N_[4096],N_[8192],N_[16384],N_[32768],N_[65536],N_[131072],U_,V_,j_],Q_=[N_[1],N_[4],N_[256],N_[2],N_[64],N_[128],N_[1024],N_[2048],N_[4096],N_[8192],N_[16384],N_[32768],N_[65536],N_[131072],U_,V_,j_],z_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._prevTextVarContent="",e._textVarHolder=null,e._textVarPropName="",e}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,[],["_alpha#","addListener","antiAliasType#","autoSize#","background#","backgroundColor#","border#","borderColor#","bottomScroll#","condenseWhite#","embedFonts#","filters#","getAwayJSID","getNewTextFormat","getTextFormat","gridFitType#","getDepth","_height#","_highquality#","hscroll#","html#","htmlText#","length#","maxChars#","maxhscroll#","maxscroll#","multiline#","_name#","_parent#","password#","_quality#","_rotation#","replaceSel","removeMovieClip","removeTextField","restrict#","scroll#","selectable#","setNewTextFormat","setTextFormat","_soundbuftime#","tabEnabled#","tabIndex#","_target#","toString","text#","textColor#","textHeight#","textWidth#","type#","_url#","variable#","_visible#","_width#","wordWrap#","_x#","_xmouse#","_xscale#","_y#","_ymouse#","_yscale#"])},e.prototype.dispatchKeyEvent=function(t,e,n,i){if(this.context.globals.Stage&&this.context.globals.Stage.avmStage&&this.context.globals.Stage.avmStage.mouseManager.useSoftkeyboard){var r=this.context.getStaticState(p_);r._lastKeyCode=t,r._keyStates[t]=1,Sm(Ng.instance.Key,"broadcastMessage",["onKeyDown"]);var o=new Xc(Xc.KEYDOWN,"",t);o.isShift=e,o.isCTRL=n,o.isAlt=i,this.context.globals.Stage.avmStage.dispatchEvent(o),delete r._keyStates[t],Sm(Ng.instance.Key,"broadcastMessage",["onKeyUp"]),(o=new Xc(Xc.KEYUP,"",t)).isShift=e,o.isCTRL=n,o.isAlt=i,this.context.globals.Stage.avmStage.dispatchEvent(o)}},e.syncAllTextfields=function(){for(var t in e.allTextfields)e.allTextfields[t]?e.allTextfields[t].syncTextFieldValue():delete e.allTextfields[t]},e.syncQueedTextfields=function(){if(e.textFieldVars.length>0){for(var t=e.textFieldVars.length,n=0;n<t;n++)e.textFieldVars[n].syncTextFieldValue();e.textFieldVars.length=0}},e.prototype.getAwayJSID=function(){return this.adaptee.id},e.prototype.selectTextField=function(t){void 0===t&&(t=!1),Ng.softKeyboardManager&&("dummy_txt"!=this.adaptee.name&&0!=this.adaptee.name.indexOf("temp")||(t=!0),Ng.softKeyboardManager.openKeyboard(this.adaptee,t))},e.prototype.removeMovieClip=function(){this.adaptee.isAVMScene||this.adaptee.parent&&Xm(this.adaptee._avmDepthID)>=-1&&this.adaptee.parent.adapter.removeChildAtDepth(this.adaptee._avmDepthID)},e.prototype.alPut=function(e,n){t.prototype.alPut.call(this,e,n)},e.prototype.initAdapter=function(){var t=this;this.adaptee._symbol&&this.setVariable(this.adaptee._symbol.variableName||""),this.adaptee.addEventListener(Yc.CHANGED,(function(){t.updateVarFromText(),t.syncTextFieldValue()}))},e.prototype.initAVM1SymbolInstance=function(e,n){t.prototype.initAVM1SymbolInstance.call(this,e,n),this.adaptee=n,this._initEventsHandlers(),this._variable="",this._exitFrameHandler=null,this.adaptee=n},e.prototype.clone=function(){return Vm(this.adaptee.clone(),this._avm1Context)},e.prototype.getAntiAliasType=function(){return""},e.prototype.setAntiAliasType=function(t){},e.prototype.get_width=function(){return this.syncTextFieldValue(),zm(this.adaptee.width)},e.prototype.get_height=function(){return this.syncTextFieldValue(),zm(this.adaptee.height)},e.prototype.set_width=function(t){t=zm(_m(this.context,t)),this._blockedByScript=!0,isNaN(t)||(this.adaptee.width=t)},e.prototype.set_height=function(t){t=zm(_m(this.context,t)),this._blockedByScript=!0,isNaN(t)||(this.adaptee.height=t)},e.prototype.get_x=function(){return this.syncTextFieldValue(),Qm(this.adaptee.x+this.adaptee.scaleX*this.adaptee.textOffsetX)},e.prototype.get_y=function(){return this.syncTextFieldValue(),Qm(this.adaptee.y+this.adaptee.scaleY*this.adaptee.textOffsetY)},e.prototype.set_x=function(t){this.syncTextFieldValue(),this.adaptee.x=Qm(t-this.adaptee.scaleX*this.adaptee.textOffsetX)},e.prototype.set_y=function(t){this.syncTextFieldValue(),this.adaptee.y=Qm(t-this.adaptee.scaleY*this.adaptee.textOffsetY)},e.prototype.getAutoSize=function(){return this.adaptee.autoSize},e.prototype.setAutoSize=function(t){!0===t?t="left":!1===t&&(t="none"),t=xm(this.context,t),this.adaptee.autoSize=t},e.prototype.getBackground=function(){return this.adaptee.background},e.prototype.setBackground=function(t){t=fm(this.context,t),this.adaptee.background=t},e.prototype.getBackgroundColor=function(){return this.adaptee.backgroundColor},e.prototype.setBackgroundColor=function(t){t=mm(this.context,t),this.adaptee.backgroundColor=t},e.prototype.getBorder=function(){return this.adaptee.border},e.prototype.setBorder=function(t){t=fm(this.context,t),this.adaptee.border=t},e.prototype.getBorderColor=function(){return this.adaptee.borderColor},e.prototype.setBorderColor=function(t){t=mm(this.context,t),this.adaptee.borderColor=t},e.prototype.getBottomScroll=function(){return this.adaptee.bottomScrollV+1},e.prototype.getCondenseWhite=function(){return this.adaptee.condenseWhite},e.prototype.setCondenseWhite=function(t){t=fm(this.context,t),this.adaptee.condenseWhite=t},e.prototype.getEmbedFonts=function(){return this.adaptee.embedFonts},e.prototype.setEmbedFonts=function(t){t=fm(this.context,t),this.adaptee.embedFonts=t},e.prototype.getNewTextFormat=function(){return h_.createFromNative(this.context,this.adaptee.newTextFormat)},e.prototype.getTextFormat=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=-1),t=gm(this.context,t),e=gm(this.context,e);var n=this.adaptee.getTextFormat(t,e);return h_.createFromNative(this.context,n)},e.prototype.getGridFitType=function(){return""},e.prototype.setGridFitType=function(t){},e.prototype.getHscroll=function(){return this.adaptee.scrollH+1},e.prototype.setHscroll=function(t){(t=Cm(this.context,t))<=0&&(t=1),this.adaptee.scrollH=t-1},e.prototype.getHtml=function(){return this.adaptee.html},e.prototype.setHtml=function(t){this.adaptee.html=!!t},e.prototype.getHtmlText=function(){return this.adaptee.html?this.adaptee.htmlText:this.adaptee.text},e.prototype.setHtmlText=function(t){t=void 0===t?"undefined":ym(this.context,t),this.adaptee.html?this.adaptee.htmlText=t:this.adaptee.text=t,this.updateVarFromText(),this.syncTextFieldValue()},e.prototype.getLength=function(){return this.adaptee.length},e.prototype.getMaxChars=function(){return 0==this.adaptee.maxChars?null:this.adaptee.maxChars},e.prototype.setMaxChars=function(t){t=Cm(this.context,t),this.adaptee.maxChars=t},e.prototype.getRestrict=function(){return this.adaptee.restrict},e.prototype.setRestrict=function(t){t=xm(this.context,t),this.adaptee.restrict=t},e.prototype.getMaxhscroll=function(){return this.adaptee.maxScrollH+1},e.prototype.getMaxscroll=function(){return this.adaptee.maxScrollV+1},e.prototype.getMultiline=function(){return this.adaptee.multiline},e.prototype.setMultiline=function(t){t=fm(this.context,t),this.adaptee.multiline=t},e.prototype.getPassword=function(){return this.adaptee.displayAsPassword},e.prototype.setPassword=function(t){t=fm(this.context,t),this.adaptee.displayAsPassword=t},e.prototype.getScroll=function(){return this.adaptee.scrollV+1},e.prototype.setScroll=function(t){(t=Cm(this.context,t))<=0&&(t=1),this.adaptee.scrollV=t-1},e.prototype.getSelectable=function(){return this.adaptee.selectable},e.prototype.setSelectable=function(t){"false"==t&&(t=!1),(t=fm(this.context,t))||this.context.globals.Stage.avmStage.mouseManager.getFocus().container!=this.adaptee||this.context.globals.Stage.avmStage.mouseManager.setFocus(null),this.adaptee.selectable=t},e.prototype.replaceSel=function(t){t=ym(this.context,t),this.adaptee.replaceSelectedText(t)},e.prototype.setNewTextFormat=function(t){var e;t instanceof h_?(e=t.adaptee,this.adaptee.newTextFormat=e):console.log("AVM1Textfield.setNewtextFormat - trying to set something other than a TextFormat",t)},e.prototype.setTextFormat=function(){this._variable&&this.syncTextFieldValue();var t,e,n=-1,i=-1;switch(arguments.length){case 0:return;case 1:t=arguments[0];break;case 2:n=_m(this.context,arguments[0]),t=arguments[1];break;default:n=_m(this.context,arguments[0]),i=_m(this.context,arguments[1]),t=arguments[2]}n>=0&&-1==i&&(i=n),t instanceof h_&&(e=t.adaptee,this.adaptee.setTextFormat(e,n,i))},e.prototype.getText=function(){return this._variable&&this.syncTextFieldValue(),this.adaptee.text},e.prototype.setText=function(t){t=void 0===t?"":ym(this.context,t);var e=this.context.utils;if(this.adaptee.parent){var n=Vm(this.adaptee.parent,this.context);e.setProperty(n,this._variable,t)}this.adaptee.text=t,this._variable&&(this.updateVarFromText(),this.syncTextFieldValue())},e.prototype.getTextColor=function(){return this.adaptee.textColor},e.prototype.setTextColor=function(t){t=mm(this.context,t),this.adaptee.textColor=t},e.prototype.getTextHeight=function(){return this._variable&&this.syncTextFieldValue(),this.adaptee.textHeight},e.prototype.setTextHeight=function(t){},e.prototype.getTextWidth=function(){return this._variable&&this.syncTextFieldValue(),this.adaptee.textWidth},e.prototype.setTextWidth=function(t){},e.prototype.getType=function(){return this.adaptee.type},e.prototype.setType=function(t){(t=xm(this.context,t))&&(t=t.toLowerCase()),this.adaptee.type=t},e.prototype.getVariable=function(){return this._variable},e.prototype.setVariable=function(t){if((t=xm(this.context,t))!==this._variable){var n=this.adaptee;e.allTextfields[n.id]=this,this._prevTextVarContent=this.adaptee.text,this._syncTextFieldValue(n,t),this._exitFrameHandler&&!t&&(n.removeEventListener("exitFrame",this._exitFrameHandler),this._exitFrameHandler=null),this._variable=t,!this._exitFrameHandler&&t&&(this._exitFrameHandler=this._onAS3ObjectExitFrame.bind(this),n.addEventListener("exitFrame",this._exitFrameHandler))}},e.prototype._onAS3ObjectExitFrame=function(){this._variable&&this._syncTextFieldValue(this.adaptee,this._variable)},e.prototype.syncTextFieldValue=function(){this._syncTextFieldValue(this.adaptee,this._variable)},e.prototype.updateVarFromText=function(){this._textVarHolder&&(this.context.utils.setProperty(this._textVarHolder,this._textVarPropName,this.adaptee.html?this.adaptee.htmlText:this.adaptee.text),this._prevTextVarContent=this.adaptee.text)},e.prototype._syncTextFieldValue=function(t,n){if(n&&""!=n){var i=this.context.utils;if(null==this._textVarHolder)if(n.indexOf(".")>=0||n.indexOf(":")>=0){var r=n.split(/[.:\/]/g);if(this._textVarPropName=r.pop(),"_root"==r[0]||"_level0"==r[0]||"_level"==r[0]||""===r[0]){var o=t.parent;for(this._textVarHolder=null;o;)o.isAVMScene?(this._textVarHolder=o.adapter,o=null):o=o.parent;if(null===this._textVarHolder)return;r.shift(),""===r[0]&&r.shift()}else if("_global"==r[0])r.shift(),this._textVarHolder=this.context.globals;else{if(!t.parent)return;this._textVarHolder=Vm(t.parent,this.context)}for(var a=null;r.length>0;)if(a=r.shift(),this._textVarHolder=i.getProperty(this._textVarHolder,a),!this._textVarHolder)return}else if(this._textVarPropName=n,t.parent&&t.parent.parent){this._textVarHolder=Vm(t.parent,this.context);for(var s=void 0,l=t.parent.parent,u=l.numChildren,c=0;c<u;c++)(s=l.getChildAt(c))!=t.parent&&s.name==t.parent.name&&i.hasProperty(s.adapter,this._textVarPropName)&&(this._textVarHolder=s.adapter)}if(!this._textVarHolder)return e.textFieldVars.push(this),t.html?this._prevTextVarContent=t.htmlText:void(this._prevTextVarContent=t.text);if(!i.hasProperty(this._textVarHolder,this._textVarPropName)){var h=void 0;return t.html?(h={isTextVar:!0,value:void 0},""!=t.htmlText&&(h.value=t.htmlText),i.setProperty(this._textVarHolder,this._textVarPropName,h),i.setProperty(this._textVarHolder,this._textVarPropName+"_internal_TF",this),void(this._prevTextVarContent=t.htmlText)):(h={isTextVar:!0,value:void 0},""!=t.text&&(h.value=t.text),i.setProperty(this._textVarHolder,this._textVarPropName,h),i.setProperty(this._textVarHolder,this._textVarPropName+"_internal_TF",this),void(this._prevTextVarContent=t.text))}i.hasProperty(this._textVarHolder,this._textVarPropName+"_internal_TF")||i.setProperty(this._textVarHolder,this._textVarPropName+"_internal_TF",this);var p=i.getProperty(this._textVarHolder,this._textVarPropName);if("string"!=typeof p&&(p=ym(this.context,p)),t.html){if(p!==this._prevTextVarContent)return t.htmlText=void 0===p?"":p,void(this._prevTextVarContent=p);t.htmlText===p||void 0===p&&""===t.htmlText||(t.htmlText=void 0===p?"":p)}else{if(p!==this._prevTextVarContent)return t.text=void 0===p?"":p,void(this._prevTextVarContent=p);t.text===p||void 0===p&&""===t.text||(t.text=void 0===p?"":p)}}},e.prototype.getWordWrap=function(){return this.adaptee.wordWrap},e.prototype.setWordWrap=function(t){t=fm(this.context,t),this.adaptee.wordWrap=t},e.prototype._initEventsHandlers=function(){this.bindEvents(G_)},e.allTextfields={},e.textFieldVars=[],e}(O_),H_=function(){function t(t){var e=this;this.result=new up,this._context=t,this._onAssetCompleteDelegate=function(t){return e.onAssetComplete(t)},this._onLoaderCompleteDelegate=function(t){return e.onLoaderComplete(t)},this._onLoadErrorDelegate=function(t){return e.onLoadError(t)},this._loader=new ht}return Object.defineProperty(t.prototype,"loader",{get:function(){return this._loader},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),t.prototype.onAssetComplete=function(t){var e=t.asset;if(e.isAsset(yl)){if(e.assetNamespace!=this._url)return;e.isAVMScene&&(this._content=e,this.result.resolve(e),e.adapter.initAdapter())}},t.prototype.onLoaderComplete=function(t){t.url==this._url&&(dt.removeEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),dt.removeEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),dt.removeEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate))},t.prototype.onLoadError=function(t){dt.removeEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),dt.removeEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),dt.removeEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),console.log("load error in loadMovie",t)},t.prototype._loadingCallback=function(t,e){var n=e.adaptee,i=t;n.isAVMScene=i.isAVMScene,n.timeline=i.timeline,n.assetNamespace=i.assetNamespace,n.reset(!0,!1)},t.prototype.loadMovieAt=function(e,n,i){var r=this;if(!i)throw new Error("Target can't be null");var o=t._loaderCache[e];return o?(this._loadingCallback(o,i),Promise.resolve(i)):this.load(e,n).then((function(){return(o=r.content)?(t._loaderCache[e]=o,r._loadingCallback(o,i),i):null}))},t.prototype.load=function(t,e){return this._url=t,this.result=new up,dt.addEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),dt.addEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),dt.addEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),dt.load(new ft(t),null,t,new yf(Ng._scenegraphFactory)),this.result.promise},t._loaderCache={},t}();function X_(t,e){var n=vm(e);return n.alPut("xMin",t.left),n.alPut("yMin",t.top),n.alPut("xMax",t.right),n.alPut("yMax",t.bottom),n}var Y_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hitReportCount=0,e._depthToChilds={},e._nextHighestDepth=1,e.executeConstructor=null,e._locked=!1,e.unregisteredColors={},e.isDragging=!1,e.startDragPoint=new O,e.startDragMCPosition=new O,e}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,[],["$version#","_alpha#","getAwayJSID","attachAudio","attachBitmap","attachMovie","attachVideo","beginFill","beginBitmapFill","beginGradientFill","blendMode#","cacheAsBitmap#","_callFrame","clear","createEmptyMovieClip","createTextField","_currentframe#","curveTo","_droptarget#","duplicateMovieClip","enabled#","endFill","filters#","_framesloaded#","_focusrect#","forceSmoothing#","getBounds","getBytesLoaded","getBytesTotal","getDepth","getInstanceAtDepth","getNextHighestDepth","getRect","getSWFVersion","getTextSnapshot","getURL","globalToLocal","gotoAndPlay","gotoAndStop","_height#","_highquality#","hitArea#","hitTest","lineGradientStyle","lineStyle","lineTo","loadMovie","loadVariables","localToGlobal","_lockroot#","menu#","moveTo","_name#","nextFrame","opaqueBackground#","_parent#","play","prevFrame","_quality#","removeMovieClip","_root#","_rotation#","scale9Grid#","scrollRect#","setMask","_soundbuftime#","startDrag","stop","stopDrag","swapDepths","tabChildren#","tabEnabled#","tabIndex#","_target#","_totalframes#","trackAsMenu#","transform#","toString","unloadMovie","_url#","useHandCursor#","_visible#","_width#","_x#","_xmouse#","_xscale#","_y#","_ymouse#","_yscale#"])},Object.defineProperty(e.prototype,"_stage",{get:function(){return i_.avmStage},enumerable:!1,configurable:!0}),e.prototype.setDepthToChild=function(t,e){e?this._depthToChilds[t]=e:delete this._depthToChilds[t]},e.prototype.getDepthToChild=function(t){return this._depthToChilds[t]},e.prototype.addTimelineChildAtDepth=function(t,e){e-=16383,t.adapter!=t&&t.adapter.deleteOwnProperties&&t.adapter.deleteOwnProperties(),t.reset(),this.addChildAtDepth(t,e,!0)},e.prototype.removeTimelineChildAt=function(t){t-=16383,this.removeChildAtDepth(t)},e.prototype.removeAllTimelineChilds=function(){for(var t=this.adaptee.numChildren-1;t>=0;t--){this.adaptee.getChildAt(t)._avmDepthID<0&&this.adaptee.removeChildAt(t)}},e.prototype.getTimelineChildAtSessionID=function(t){return this.adaptee.getTimelineChildAtSessionID(t)},e.prototype.getDepthIndexInternal=function(t){var e=this.getDepthToChild(t);return e?e.parent!==this.adaptee?-1:this.adaptee.getChildIndex(e):-1},e.prototype.getIndexFromDepthOrTop=function(t){for(var e=0;e<this.adaptee.numChildren;e++)if(this.adaptee.getChildAt(e)._avmDepthID>t)return e;return this.adaptee.numChildren},e.prototype.removeChildAtDepth=function(t){var e=this.getDepthIndexInternal(t);-1!==e&&this.removeChildAt(e)},e.prototype.removeChildAt=function(t){var e=this.adaptee.removeChildAt(t);e._adapter&&e.adapter.freeFromScript(),this.unregisterScriptObject(e),delete this.adaptee._sessionID_childs[e._sessionID],this.setDepthToChild(e._avmDepthID),e._sessionID=-1,e._avmDepthID=-16384},e.prototype.addChildAtDepth=function(t,e,n){if(void 0===n&&(n=!1),null==t)throw"Parameter child cannot be null.";var i=this.getDepthIndexInternal(e);if(-1!=i){if(n)return console.log("depth is occupied"),null;this.removeChildAt(i),this.adaptee.addChildAt(t,i)}else this.adaptee.addChildAt(t,this.getIndexFromDepthOrTop(e));this.adaptee.isSlice9ScaledMC&&"[asset Sprite]"==t.assetType&&(t.isSlice9ScaledSprite=!0),this._nextHighestDepth<e+1&&(this._nextHighestDepth=e+1),t._avmDepthID=e,t.adapter!=t&&t.adapter.initAdapter(),this.setDepthToChild(e,t),n&&(this.adaptee._sessionID_childs[t._sessionID]=t);var r=Vm(t,this._avm1Context);return this.registerScriptObject(t,n),r},e.prototype.sortVirtualSceneGraph=function(t,e){return t.depth-e.depth},e.prototype.queueFrameScripts=function(t,e,n){var i=t.get_script_for_frame(this.adaptee,e,!0);i&&(n?_l.add_script_to_queue(this.adaptee,i):_l.add_script_to_queue_pass2(this.adaptee,i))},e.prototype.constructFrame=function(t,e,n,i,r,o,a){for(var s,l,u={},c={},h=this.adaptee.numChildren,p=0;p<h;p++){var d=this.adaptee.getChildAt(p);(i||-1==d._sessionID)&&(u[d._avmDepthID]={sessionID:d._sessionID,addedOnTargetFrame:!1,depth:d._avmDepthID,child:d}),d._sessionID>=0&&(c[d._sessionID]=d)}t._update_indices.length=0,t._update_frames.length=0;var f,_,g=0;for(l=e;l<=n;l++){var m=t.frame_command_indices[l],y=t.frame_recipe[l];if(2&y)for(_=(f=t.command_index_stream[m])+t.command_length_stream[m++],s=f;s<_;s++)delete u[t.remove_child_stream[s]-16383];if(4&y)if(_=(f=t.command_index_stream[m])+t.command_length_stream[m++],o)for(s=_-1;s>=f;s--)u[t.add_child_stream[3*s+1]-16383]||(u[t.add_child_stream[3*s+1]-16383]={sessionID:t.add_child_stream[3*s],symbolID:t.add_child_stream[3*s+2],addedOnTargetFrame:l==n,depth:t.add_child_stream[3*s+1]-16383});else for(s=f;s<_;s++)u[t.add_child_stream[3*s+1]-16383]||(u[t.add_child_stream[3*s+1]-16383]={sessionID:t.add_child_stream[3*s],symbolID:t.add_child_stream[3*s+2],addedOnTargetFrame:l==n,depth:t.add_child_stream[3*s+1]-16383});8&y&&(t._update_frames[g]=t.keyframe_firstframes[l],t._update_indices[g++]=m++),16&y&&l==n&&t.start_sounds(this.adaptee,m)}var A=[];for(var v in u)A[A.length]=u[v];A.sort(this.sortVirtualSceneGraph);var b,x=[],C=[],I=[];this._depthToChilds={},this.adaptee._sessionID_childs={},this.adaptee.preventScript=!0,h=x.length=A.length;for(var E=0;E<h;E++)if(-1==(b=A[E]).sessionID&&b.child)x[E]=b.child,this.setDepthToChild(b.depth,b.child);else if(c[b.sessionID]){var w=c[b.sessionID],S=b.depth;w._avmDepthID=S,w._sessionID=b.sessionID,this.setDepthToChild(S,w),this.adaptee._sessionID_childs[b.sessionID]=w,x[E]=w,i||(x[E]._adapter?(x[E].adapter.isColorTransformByScript()||x[E].transform.clearColorTransform(),x[E].adapter.isBlockedByScript()||x[E].noTimelineUpdate||(x[E].transform.clearMatrix3D(),x[E].updateTimelineMask(null)),x[E].adapter.isVisibilityByScript()||(x[E].visible=!0)):(x[E].transform.clearColorTransform(),x[E].transform.clearMatrix3D(),x[E].visible=!0,x[E].updateTimelineMask(null)))}else{var D=t.getChildInstance(b.symbolID,b.sessionID);this.adaptee.isSlice9ScaledMC&&"[asset Sprite]"==D.assetType&&(D.isSlice9ScaledSprite=!0);S=D._avmDepthID=b.depth;D._sessionID=b.sessionID,this.setDepthToChild(S,D),this.adaptee._sessionID_childs[b.sessionID]=D,x[E]=D,b.addedOnTargetFrame?I[I.length]=D:C[C.length]=D}for(var T=this.adaptee.numChildren-1;T>=0;T--)x.indexOf(this.adaptee.getChildAt(T))<0&&this.adaptee.removeChildAt(T);for(var P=0;P<x.length;P++)this.adaptee.contains(x[P])||this.adaptee.addChildAt(x[P],P);this.adaptee.preventScript=!0,this.finalizeChildren(C),this.adaptee.preventScript=!1,a&&this.queueFrameScripts(t,r,!o),this.finalizeChildren(I)},e.prototype.finalizeChildren=function(t){for(var e=t.length,n=0;n<e;n++){var i=t[n];i.adapter!=i&&i.adapter.deleteOwnProperties&&i.adapter.deleteOwnProperties(),i.reset(),i.adapter!=i&&i.adapter.initAdapter()}},e.prototype.removeMovieClip=function(){this.adaptee.isAVMScene||(!this.adaptee.parent||Xm(this.adaptee._avmDepthID)<0||(this.adaptee.parent.adapter.removeChildAtDepth(this.adaptee._avmDepthID),this.scriptMaskee&&this.scriptMaskee.setMask(null),this.freeFromScript(),this._childrenByName={},this._depthToChilds={},this.makeGhost()))},e.prototype._updateMouseEnabled=function(t,e){this.adaptee.isAVMScene||t.isMouse&&(e?(this._mouseListenerCount++,this.adaptee.mouseEnabled=!0,this.adaptee.mouseChildren=!1,t.isButton&&(this._mouseButtonListenerCount++,this.adaptee.buttonMode=!0)):(this._mouseListenerCount--,this._mouseListenerCount<=0&&(this._mouseListenerCount=0,this.adaptee.mouseEnabled=!1,this.adaptee.mouseChildren=!0),t.isButton&&(this._mouseButtonListenerCount--,this._mouseButtonListenerCount<=0&&(this._mouseButtonListenerCount=0,this.adaptee.buttonMode=!1)))),this.enabled||(this.adaptee.mouseChildren=!1)},e.prototype.clone=function(){var t=Vm(this.adaptee.clone(),this._avm1Context);if("piratefont"==this.adaptee.name){var e=t.adaptee.timeline,n=e;n.frame_command_indices=[e.frame_command_indices[0]],n.frame_recipe=[e.frame_recipe[0]],n.keyframe_constructframes=[e.keyframe_constructframes[0]],n.keyframe_durations=[e.keyframe_durations[0]],n.keyframe_firstframes=[e.keyframe_firstframes[0]],n.keyframe_indices=[e.keyframe_indices[0]]}return t},e.prototype.attachCustomConstructor=function(){if(this.adaptee){var t=this.adaptee.avm1Symbol;if(t){this.alPut("__proto__",t._ownProperties.prototype.value);var e=this;this.executeConstructor=function(){t.alCall(e),e.updateAllEvents()}}}},e.prototype.executeScript=function(t){if(e.currentMCAssetNameSpace=this.adaptee.assetNamespace,z_.syncQueedTextfields(),t){if(this.adaptee.parent)for(var n=0;n<t.length;n++){var i=t[n],r=function(t){this._avm1Context.executeActions(t,this)}.bind(this,i.data);r.precedence=i.precedence,r.context=this.adaptee,r.call(this.adaptee)}}else{var o=this.adaptee.name.replace(/[^\w]/g,"");window.alert("actionsBlocks is empty, can not execute framescript"+o+this.adaptee.currentFrameIndex)}},e.prototype.stopAllSounds=function(){for(var t,e=this.alGetKeys(),n=0;n<e.length;n++){var i=this.alGetProperty(e[n]),r=i?i.value:null;r&&r._sound&&r._sound.isAsset&&r._sound.isAsset(w)&&r.stop()}for(n=this.adaptee.numChildren-1;n>=0;n--)(t=this.adaptee.getChildAt(n)).isAsset(yl)&&t.adapter!==t&&t.adapter.freeFromScript()},e.prototype.freeFromScript=function(){this._locked||(this.hasSwappedDepth=!1,t.prototype.freeFromScript.call(this),this._mouseButtonListenerCount=0)},e.prototype.initAdapter=function(){for(var t in this._dropTarget="",this._mouseButtonListenerCount=0,e.currentMCAssetNameSpace=this.adaptee.assetNamespace,this.adaptee.timeline.avm1InitActions)this.executeScript(Ng._scenegraphFactory.createFrameScripts(this.adaptee.timeline.avm1InitActions[t],0,"initActionsData"+t,this.adaptee.id));this.initEvents&&function(t,e,n){var i=Vm(t,e);n.variableName&&i.alPut("variable",n.variableName);var r,o,a,s,l,u,c=n.events;if(!c)return;for(var h=null,p=0;p<c.length;p++)for(var d in(r=c[p]).actionsBlock?(o=e.actionsDataFactory.createActionsData(r.actionsBlock,"s"+n.symbolId+"d"+n.depth+"e"+p),r.actionsBlock=null,r.compiled=o):o=r.compiled,a=Ym.bind(null,o,i),s=r.flags,N_)l=parseInt(d),s&(l|=0)&&(262144!=l?512!=l?1!=l?(u=N_[l]).eventName?(r.keyCode&&((h=new L_).keyCode=r.keyCode,r.keyCode<32&&R_[r.keyCode]&&(h.keyCode=R_[r.keyCode])),i._addOnClipEventListener(u,a,h)):fp.warning("ClipEvent: "+l+" not implemented"):t.onLoaded=a:t.onInitialize=a:t.onConstruct=a)}(this.adaptee,this._avm1Context,this.initEvents),this.attachCustomConstructor(),this.initialDepth=this.adaptee._avmDepthID,(this.adaptee.onLoaded||this.adaptee.onConstruct||this.adaptee.onInitialize||this.executeConstructor)&&_l.add_loaded_action_to_queue(this.adaptee)},e.prototype.registerScriptObject=function(t,e){void 0===e&&(e=!0),t.adapter!=t&&t.adapter.setEnabled(!0);var n=t.name;if(n){this.context.swfVersion<8&&(n=n.toLowerCase());var i=this.alHasOwnProperty(n);if(e&&i){if(!this.alGetOwnProperty(n).isTextVar)return;this.alPut(n,Vm(t,this.context))}(!this._childrenByName[n]||this._childrenByName[n].adaptee&&null==this._childrenByName[n].adaptee.parent||this._childrenByName[n].adaptee&&this._childrenByName[n].adaptee._avmDepthID>t._avmDepthID)&&(this._childrenByName[n]=Vm(t,this.context),e||this.alPut(n,this._childrenByName[n]))}},e.prototype.unregisterScriptObject=function(t){if(!t.adapter._locked){var e=t.name;if(e){this.context.swfVersion<8&&(e=e.toLowerCase());var n=this.alGetOwnProperty(e);if(n&&n.value instanceof O_&&this.alDeleteOwnProperty(e),this._childrenByName[e]&&this._childrenByName[e].adaptee.id==t.id){for(var i=null,r=null,o=0;o<this.adaptee.numChildren;o++)(i=this.adaptee.getChildAt(o))!=t&&i.name&&i.name.toLowerCase()==e&&(!r||r._avmDepthID>i._avmDepthID)&&(r=i);r?this._childrenByName[e]=Vm(r,this.context):delete this._childrenByName[e]}}}},e.prototype.getLatestObjectForName=function(t){if(!this.alHasOwnProperty(t)){for(var e,n,i=0;i<this.adaptee.numChildren;i++)(e=this.adaptee.getChildAt(i)).name==t&&(!n||n._avmDepthID>e._avmDepthID)&&(n=e);n&&(this.context.swfVersion<8&&(t=t.toLowerCase()),this._childrenByName[t]=Vm(n,this.context),this.unregisteredColors[t]&&(this.unregisteredColors[t].changeTarget(n.adapter),this.unregisteredColors[t]=null))}},Object.defineProperty(e.prototype,"graphics",{get:function(){return this.adaptee.graphics},enumerable:!1,configurable:!0}),e.prototype.initAVM1SymbolInstance=function(e,n){var i=this;this._childrenByName=Object.create(null),this._depthToChilds=Object.create(null),t.prototype.initAVM1SymbolInstance.call(this,e,n),this.dragListenerDelegate=function(t){return i.dragListener(t)},this.stopDragDelegate=function(t){return i.stopDrag(t)},this.dynamicallyCreated=!1,this.adaptee=n,this._initEventsHandlers()},e.prototype._lookupChildByName=function(t){return this._childrenByName[t]},e.prototype._lookupChildInAS3Object=function(t){return Vm(this.adaptee.getChildByName(t),this.context)},Object.defineProperty(e.prototype,"__targetPath",{get:function(){var t=this.get_target(),e=this.adaptee.root,n="_level"+this.context.globals._getLevelForRoot(e);return"/"!=t?n+t.replace(/\//g,"."):n},enumerable:!1,configurable:!0}),e.prototype.getAwayJSID=function(){return this.adaptee.id},e.prototype.attachAudio=function(t){ap(t)||!1!==t&&console.warn("[AVM1MovieClip] attachAudio not implemented")},e.prototype.attachBitmap=function(t,e,n,i){if(void 0===n&&(n="auto"),void 0===i&&(i=!1),t){n=xm(this.context,n),i=fm(this.context,i),t.as3BitmapData.transparent=!0;var r=t.getBillboard(n,i);r.mouseEnabled=!1,this.addChildAtDepth(r,e)}else console.error("[AVM1MovieClip:attachBitmap] Bitmap not resolved! Skip attach for prevent crash",this.adaptee.id)},e.prototype._constructMovieClipSymbol=function(t,e){t=ym(this.context,t),e=ym(this.context,e);var n=dt.getAsset(t,this.adaptee.assetNamespace);if(n){var i=n.adaptee.clone();return i.name=e,Vm(i,this._avm1Context),i}},e.prototype.get$version=function(){return""},e.prototype.rgbaToArgb=function(t){return(255&t)<<24|(4278190080&t)>>>24<<16|(16711680&t)>>>16<<8|(65280&t)>>>8},e.prototype.attachMovie=function(t,e,n,i){if(this._constructMovieClipSymbol){e&&Tm(this.context,e)&&(e=e.value[0]);var r=this._constructMovieClipSymbol(t,e);if(r)return r.name||(r.name=""),n=_m(this.context,n),this.initChildMovie(r,e,n,i,!0)}},e.prototype.initChildMovie=function(t,e,n,i,r){void 0===r&&(r=!1);var o=this._childrenByName[e.toLowerCase()];t.reset(),t.name=e;var a=this.addChildAtDepth(t,Hm(n));i&&a._init(i),o&&o.avmColor&&o.avmColor.changeTarget(a),t.timeline&&t.timeline.isButton&&t.addButtonListeners(),a.dynamicallyCreated=!0,e&&this.registerScriptObject(t,r);var s=a.executeConstructor;return a.executeConstructor=null,s&&s(),a},e.prototype.beginFill=function(t,e){t=mm(this.context,t),void 0===e&&(2==arguments.length?e=0:arguments.length<=1&&(e=100)),e=_m(this.context,e),this.graphics.beginFill(t,e/100)},e.prototype.beginBitmapFill=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=!1);var r=r_(t);if(r){var o=ap(e)?null:Zf(e);n=fm(this.context,n),i=fm(this.context,i),this.graphics.beginBitmapFill(r,o,n,i)}},e.prototype.beginGradientFill=function(t,e,n,i,r,o,a,s){void 0===o&&(o="pad"),void 0===a&&(a="rgb"),void 0===s&&(s=0);var l=this.context,u=Zg.mapToJSArray(e,(function(t){return mm(l,t)})),c=Zg.mapToJSArray(n,(function(t){return _m(l,t)/100})),h=Zg.mapToJSArray(i,(function(t){return _m(l,t)}));ap(r)&&console.warn("[AVM1MovieClip] beginGradientFill not fully implemented"),o=ym(l,o),a=ym(l,a),s=_m(l,s),this.graphics.beginGradientFill(t,u,c,h,null,o,a,s)},e.prototype._callFrame=function(t){var e;"string"==typeof t?(t=t.toLowerCase(),e=this.adaptee.timeline.getScriptForLabel(this.adaptee,t,!0)):"number"==typeof t&&(e=this.adaptee.timeline.get_script_for_frame(this.adaptee,t-1,!0)),e&&this.executeScript(e)},e.prototype.clear=function(){this.graphics.clear()},e.prototype._updateChildName=function(t,e,n){e!==n&&(e&&this._removeChildName(t,e),n&&this._addChildName(t,n))},e.prototype._removeChildName=function(t,e){if(this.context.isPropertyCaseSensitive||(e=e.toLowerCase()),this._childrenByName&&this._childrenByName[e]&&this._childrenByName[e]===t){var n=this._lookupChildInAS3Object(e);n?this._childrenByName[e]=n:delete this._childrenByName[e]}},e.prototype._addChildName=function(t,e){this.context.isPropertyCaseSensitive||(e=e.toLowerCase());var n=this._childrenByName[e];(!n||n.getDepth()>t.getDepth())&&(this._childrenByName[e]=t)},e.prototype.createEmptyMovieClip=function(t,e){t=ym(this.context,t);var n=Ng._scenegraphFactory.createMovieClip();n.name=t,n.assetNamespace=this.adaptee.assetNamespace;var i=this.addChildAtDepth(n,Hm(e));return i.dynamicallyCreated=!0,this.registerScriptObject(n,!1),n.mouseEnabled=!1,i},e.prototype.createTextField=function(t,e,n,i,r,o){t=ym(this.context,t);var a=new Ch;a.name=t,Vm(a,this._avm1Context);var s=this.addChildAtDepth(a,Hm(e));return this.registerScriptObject(a,!1),a.x=n,a.y=i,a.width=r,a.height=o,s.dynamicallyCreated=!0,s},e.prototype.get_currentframe=function(){return this.adaptee.currentFrameIndex+1},e.prototype.curveTo=function(t,e,n,i){t=_m(this.context,t),e=_m(this.context,e),n=_m(this.context,n),i=_m(this.context,i),this.graphics.curveTo(t,e,n,i)},e.prototype.setDropTarget=function(t){if(t){for(var e=[];t;)t.isAVMScene?t=null:(null!=t.name&&e.push(t.name),t=t.parent);for(var n=e.length,i="";n>0;)""!=e[--n]&&(i+="/"),i+=e[n];this._dropTarget=i}else this._dropTarget=""},e.prototype.get_droptarget=function(){return this._dropTarget},e.prototype.duplicateMovieClip=function(t,e,n){if((t=ym(this.context,t))==this.adaptee.name)return this;var i=this.get_parent();i||(console.warn("[AVM1MovieClip] duplicateMovieClip could not get parent"),i=this.context.resolveTarget(null));var r=this.clone().adaptee,o=i.initChildMovie(r,t,e,null,!1);o.placeObjectTag=this.placeObjectTag,o.initEvents=this.initEvents;var a=r.transform.matrix3D,s=this.adaptee.transform.matrix3D._rawData;a._rawData[0]=s[0],a._rawData[1]=s[1],a._rawData[4]=s[4],a._rawData[5]=s[5],a._rawData[12]=s[12],a._rawData[13]=s[13],r.transform.invalidateComponents(),r.alpha=this.adaptee.alpha,r.blendMode=this.adaptee.blendMode,r.cacheAsBitmap=this.adaptee.cacheAsBitmap;var l=this.getFilters();return l&&o.setFilters(new Zg(this.context,l.value.slice())),n&&o._init(n),o},e.prototype.endFill=function(){this.graphics.endFill()},e.prototype.getForceSmoothing=function(){return console.warn("[AVM1MovieClip] getForceSmoothing"),!1},e.prototype.setForceSmoothing=function(t){t=fm(this.context,t),console.warn("[AVM1MovieClip] setForceSmoothing")},e.prototype.get_framesloaded=function(){return console.warn("[AVM1MovieClip] get_framesloaded"),this.adaptee.numFrames},e.prototype.getBounds=function(t){if(t){var e=this._stage.pickGroup.getBoundsPicker(this.node.partition).getBoxBounds(t.node,!0,!0);if(e)return X_(e,this.context);console.warn("[AVM1 MovieClip::getBounds] Bounds is null!",this.adaptee.id)}},e.prototype.getBytesLoaded=function(){return this.adaptee.currentFrameIndex>=0?100:-1},e.prototype.getBytesTotal=function(){return 100},e.prototype.getInstanceAtDepth=function(t){var e=this.getDepthToChild(Hm(t));return e?Vm(e,this.context):null},e.prototype.getNextHighestDepth=function(){return this.context.swfVersion<7?0:Xm(this._nextHighestDepth)},e.prototype.getRect=function(t){if(t&&t.node)return X_(this._stage.pickGroup.getBoundsPicker(this.node.partition).getBoxBounds(t.node,!1,!0),this.context)},e.prototype.getSWFVersion=function(){return this.context.swfVersion},e.prototype.getTextSnapshot=function(){console.warn("[AVM1MovieClip] getTextSnapshot")},e.prototype.getURL=function(t,e,n){0!==(t=String(t)).toLowerCase().indexOf("fscommand:")?window.open(t,e):console.warn("[AVM1MovieClip] fsCommand not implemented ")},e.prototype.globalToLocal=function(t){if(t){var e=Ff(t);this.node.globalToLocal(e,e),kf(e,t)}},e.prototype.gotoAndPlay=function(t){if(!this.protoTypeChanged&&null!=t){if(Array.isArray(t)){if(0==t.length)return;t=t[0]}if(t instanceof Zg){if(!t.value||0==t.value.length)return;t=t.value[0]}if("string"==typeof t){var e=t.toLowerCase();if(null==this.adaptee.timeline._labels[e])return t=parseInt(t),void(isNaN(t)||(this.adaptee.currentFrameIndex=t-1,this.adaptee.play()))}"number"==typeof t&&t<=0||(this.adaptee.play(),this._gotoFrame(t))}},e.prototype.gotoAndStop=function(t){if(!this.protoTypeChanged&&null!=t){if(Array.isArray(t)){if(0==t.length)return;t=t[0]}if(t instanceof Zg){if(!t.value||0==t.value.length)return;t=t.value[0]}"number"==typeof t&&t<=0||(this.adaptee.stop(),this._gotoFrame(t))}},e.prototype._gotoFrame=function(t){if("number"==typeof t&&t%1!=0&&(t=t.toString()),"string"==typeof t){var e=t.toLowerCase();if(null==this.adaptee.timeline._labels[e])return t=parseInt(t),void(isNaN(t)||(this.adaptee.currentFrameIndex=t-1));this.adaptee.jumpToLabel(e)}else this.adaptee.currentFrameIndex=t-1},e.prototype.getHitArea=function(){return this._hitArea},e.prototype.setHitArea=function(t){this._hitArea=t;var e=t?t.node:null;e&&!e.container.isAsset(yl)&&(e=null)},e.prototype.hitTest=function(t,e,n){if(arguments.length<2){var i=t;return"string"==typeof i&&(i=this.context.resolveTarget(i)),!(null==i||!i.node)&&i_.avmStage.pickGroup.getBoundsPicker(this.node.partition).hitTestObject(i_.avmStage.pickGroup.getBoundsPicker(i.node.partition))}t=_m(this.context,t),e=_m(this.context,e);var r=this.get_root();return r?(t+=r.get_x(),e+=r.get_y(),n=fm(this.context,n),this._stage.pickGroup.getBoundsPicker(this.node.partition).hitTestPoint(t,e,n)):(this._hitReportCount<10&&(console.warn("[AVM1MovieClip:: hitTest] Root return undef! Return false to prevent crash!",this.adaptee.id),this._hitReportCount++,10===this._hitReportCount&&console.warn("[AVM1MovieClip:: hitTest] To many reports, supress other!")),!1)},e.prototype.lineGradientStyle=function(t,e,n,i,r,o,a,s){void 0===o&&(o="pad"),void 0===a&&(a="rgb"),void 0===s&&(s=0);var l=this.context,u=Zg.mapToJSArray(e,(function(t){return mm(l,t)})),c=Zg.mapToJSArray(n,(function(t){return _m(l,t)/100})),h=Zg.mapToJSArray(i,(function(t){return _m(l,t)}));o=ym(l,o),a=ym(l,a),s=_m(l,s),this.graphics.lineGradientStyle(t,u,c,h,null,o,a,s)},e.prototype.lineStyle=function(t,n,i,r,o,a,s,l){void 0===t&&(t=NaN),void 0===n&&(n=0),void 0===i&&(i=100),void 0===r&&(r=!1),void 0===o&&(o="normal"),void 0===a&&(a="round"),void 0===s&&(s="round"),void 0===l&&(l=3),t=_m(this.context,t),n=mm(this.context,n),r=fm(this.context,r),o=ym(this.context,o);var u=e.capStyleMapStringToInt[ym(this.context,a)],c=e.jointStyleMapStringToInt[ym(this.context,s)];l=_m(this.context,l),this.graphics.lineStyle(t,n,i/100,r,e.noScaleDictionary[o],u,c,l)},e.prototype.lineTo=function(t,e){t=Qm(_m(this.context,t)),e=Qm(_m(this.context,e)),this.graphics.lineTo(t,e)},e.prototype.loadMovie=function(t,e){new H_(this.context).loadMovieAt(t,e,this).then((function(t){}))},e.prototype.loadVariables=function(t,e){this.context.actions._loadVariables(this,t,e)},e.prototype.localToGlobal=function(t){if(t){var e=Ff(t);this.node.localToGlobal(e,e),kf(e,t)}},e.prototype.get_lockroot=function(){return this._lockroot},e.prototype.set_lockroot=function(t){this._lockroot=fm(this.context,t)},e.prototype.moveTo=function(t,e){t=Qm(_m(this.context,t)),e=Qm(_m(this.context,e)),this.graphics.moveTo(t,e)},e.prototype.nextFrame=function(){this.adaptee.stop(),++this.adaptee.currentFrameIndex},e.prototype.nextScene=function(){console.warn("[AVM1MovieClip] nextScene not implemented")},e.prototype.play=function(){this.adaptee.play()},e.prototype.prevFrame=function(){this.adaptee.stop(),--this.adaptee.currentFrameIndex},e.prototype.prevScene=function(){console.warn("[AVM1MovieClip] prevScene not implemented")},e.prototype.setMask=function(t){null!=t?(t.scriptMaskee=this,(t=this.context.resolveTarget(t))&&(this.adaptee.scriptMask=t.adaptee)):this.adaptee.scriptMask=null},e.prototype.startDrag=function(t,n,i,r,o){var a,s,l=this._stage;if(e.currentDraggedMC&&e.currentDraggedMC!=this&&e.currentDraggedMC.stopDrag(),e.currentDraggedMC=this,t=fm(this.context,t),this._dragBounds=null,n>r&&(r=(a=[n,r])[0],n=a[1]),i>o&&(i=(s=[o,i])[0],o=s[1]),arguments.length>1&&(n=_m(this.context,n),i=_m(this.context,i),r=_m(this.context,r),o=_m(this.context,o),this._dragBounds=new W(n,i,r-n,o-i)),!this.isDragging){this.isDragging=!0;var u=l.view.getNode(this.adaptee.parent),c=l.getLocalMouseX(u),h=l.getLocalMouseY(u);this.startDragPoint=this.startDragPoint||new O,this.startDragPoint.setTo(c,h),t&&(this.adaptee.x=this.startDragPoint.x,this.adaptee.y=this.startDragPoint.y),this._dragBounds&&this.checkBounds(),this.startDragMCPosition.x=this.adaptee.x,this.startDragMCPosition.y=this.adaptee.y;var p=this.node;l.view.stage.addEventListener(ml.MOUSE_MOVE,this.dragListenerDelegate);var d=this.adaptee.getAbstraction(p.partition);d.setParent(p);var f=d.getAbstraction(l.mousePicker.pickGroup).pickingCollision;f.rootNode=p,l.mouseManager.startDragObject(f,!0)}},e.prototype.dragListener=function(t){if(this.adaptee.parent){var e=this._stage.view.getNode(this.adaptee.parent),n=this._stage.getLocalMouseX(e),i=this._stage.getLocalMouseY(e);this.adaptee.x=this.startDragMCPosition.x+(n-this.startDragPoint.x),this.adaptee.y=this.startDragMCPosition.y+(i-this.startDragPoint.y),this._dragBounds&&this.checkBounds()}},e.prototype.checkBounds=function(){this.adaptee.x<this._dragBounds.left&&(this.adaptee.x=this._dragBounds.left),this.adaptee.x>this._dragBounds.right&&(this.adaptee.x=this._dragBounds.right),this.adaptee.y<this._dragBounds.top&&(this.adaptee.y=this._dragBounds.top),this.adaptee.y>this._dragBounds.bottom&&(this.adaptee.y=this._dragBounds.bottom)},e.prototype.stop=function(){return this.adaptee.stop()},e.prototype.stopDrag=function(t){e.currentDraggedMC&&e.currentDraggedMC!=this&&e.currentDraggedMC.stopDrag(),this.isDragging=!1,e.currentDraggedMC=null,this._stage.mousePicker.dragNode=null,this._stage.mouseManager.stopDragObject(),this._stage.view.stage.removeEventListener(ml.MOUSE_MOVE,this.dragListenerDelegate)},e.prototype.swapChildrenToDepth=function(t,e,n,i){e&&this._depthToChilds[n]&&(e=this.getDepthToChild(n).adapter),delete this.adaptee._sessionID_childs[t.adaptee._sessionID],t.adaptee._avmDepthID=n,t.adaptee._sessionID=-1,this.adaptee.addChildAt(t.adaptee,this.getIndexFromDepthOrTop(n)),t.hasSwappedDepth=!0,this.setDepthToChild(n,t.adaptee),e?(delete this.adaptee._sessionID_childs[e.adaptee._sessionID],this.setDepthToChild(i,e.adaptee),e.adaptee._avmDepthID=i,e.adaptee._sessionID=-1,this.adaptee.addChildAt(e.adaptee,this.getIndexFromDepthOrTop(i)),e.hasSwappedDepth=!0):this.setDepthToChild(i),t&&t.updateAllEvents(),e&&e.updateAllEvents(),this.adaptee.name&&parent&&(this.getLatestObjectForName(t.adaptee.name),e&&this.getLatestObjectForName(e.adaptee.name))},e.prototype.swapDepths=function(t){if(!this.adaptee.isAVMScene&&this.get_parent()){var e=this.get_parent(),n=null;if(e)if(void 0!==t){if("number"==typeof t){if(t=Hm(t),this.adaptee._avmDepthID==t)return;(n=e.getDepthToChild(t))&&(n=n.adapter)}else if(t.adaptee){if(t.get_parent()!=e)return;t=(n=t).adaptee._avmDepthID}e.swapChildrenToDepth(this,n,t,this.adaptee._avmDepthID)}else console.warn("[AVM1MovieClip] swapDepth called with undefined as target depth");else console.warn("[AVM1MovieClip] swapDepth called for object with no parent")}},e.prototype.getTabChildren=function(){return Rm(this).tabChildren},e.prototype.setTabChildren=function(t){Rm(this).tabChildren=fm(this.context,t)},e.prototype.get_totalframes=function(){return this.adaptee.numFrames},e.prototype.getTrackAsMenu=function(){return console.warn("[AVM1MovieClip] getTrackAsMenu not implemented"),Rm(this).trackAsMenu},e.prototype.setTrackAsMenu=function(t){console.warn("[AVM1MovieClip] setTrackAsMenu not implemented"),Rm(this).trackAsMenu=fm(this.context,t)},e.prototype.unloadMovie=function(){var t=this.adaptee;this.adaptee.constructedKeyFrameIndex=0,this.adaptee.stop(),t.removeChildren(0,t.numChildren),(this.dynamicallyCreated||this.hasSwappedDepth)&&t.parent&&t.parent.adapter&&t.parent.adapter.unregisterScriptObject(t)},e.prototype.getUseHandCursor=function(){return this.adaptee.useHandCursor},e.prototype.setUseHandCursor=function(t){this.adaptee&&(this.adaptee.useHandCursor=t)},e.prototype.setParameters=function(t){for(var e in t)this.alHasProperty(e)||this.alPut(e,t[e])},e.prototype._resolveLevelNProperty=function(t){if("_level0"===t||"_level"===t)return this.context.resolveRoot();if("_root"===t)return this.context.resolveRoot();if(0===t.indexOf("_level")){var e=t.substring(6),n=0|e;if(n>0&&e==n)return this.context.resolveLevel(n)}return null},e.prototype._getCachedPropertyResult=function(t){return this._cachedPropertyResult?this._cachedPropertyResult.value=t:this._cachedPropertyResult={flags:65,value:t},this._cachedPropertyResult},e.prototype.alGetOwnProperty=function(e){var n=t.prototype.alGetOwnProperty.call(this,e);if(n)return n;if("_"===e[0])if("l"===e[1]&&0===e.indexOf("_level")||"r"===e[1]&&0===e.indexOf("_root")){var i=this._resolveLevelNProperty(e);if(i)return this._getCachedPropertyResult(i)}else if(e.toLowerCase()in o_)return t.prototype.alGetOwnProperty.call(this,e.toLowerCase());if(Lm(this)){var r=this._lookupChildByName(e);if(r)return this._getCachedPropertyResult(r)}},e.prototype.alGetOwnPropertiesKeys=function(){var e=t.prototype.alGetOwnPropertiesKeys.call(this);if(!Lm(this))return e;for(var n=Object.assign(Object.create(null),this._childrenByName),i=0,r=e;i<r.length;i++){n[r[i]]=!0}return Object.keys(n)},e.prototype._init=function(t){var e=this;t instanceof Rf&&Em(t,(function(n){e.alPut(n,t.alGet(n))}),null)},e.prototype._initEventsHandlers=function(){this.bindEvents(G_)},e.currentMCAssetNameSpace="",e.currentDraggedMC=null,e.pokiSDKonStopActionChildName=null,e.pokiSDKonStopAction=null,e.capStyleMapStringToInt={none:0,round:1,square:2},e.jointStyleMapStringToInt={round:0,bevel:1,miter:2},e.noScaleDictionary={normal:bo.NORMAL,none:bo.NONE,vertical:bo.VERTICAL,horizontal:bo.HORIZONTAL},e}(O_);function q_(t){Lm(t)&&t.updateAllEvents()}var K_,W_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,["initialize"],[])},e.initialize=function(t,e){var n=new Lf(65,new Zg(t,[]));e.alSetOwnProperty("_listeners",n),n=new Lf(65,new cm(t,(function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this.alGet("_listeners")instanceof Zg&&Fm(t,this,e,n)}))),e.alSetOwnProperty("broadcastMessage",n),n=new Lf(65,new cm(t,(function(t){var e=this.alGet("_listeners");return e instanceof Zg&&(e.value.push(t),q_(this),!0)}))),e.alSetOwnProperty("addListener",n),n=new Lf(65,new cm(t,(function(t){var e=this.alGet("_listeners");if(!(e instanceof Zg))return!1;var n=e.value,i=n.indexOf(t);return!(i<0)&&(n.splice(i,1),q_(this),!0)}))),e.alSetOwnProperty("removeListener",n)},e}(Rf),J_=["avHardwareDisable","hasAccessibility","hasAudio","hasAudioEncoder","hasEmbeddedVideo","hasIME","hasMP3","hasPrinting","hasScreenBroadcast","hasScreenPlayback","hasStreamingAudio","hasStreamingVideo","hasVideoEncoder","isDebugger","language","localFileReadDisable","manufacturer","os","pixelAspectRatio","playerType","screenColor","screenDPI","screenResolutionX","screenResolutionY","serverString","version"],Z_=function(t){function e(e){var n=t.call(this,e)||this;n.alPrototype=e.builtins.Object.alGetPrototypeProperty();var i=null;return J_.forEach((function(t){i=new Lf(131,null,{alCall:function(){return null}}),n.alSetOwnProperty(t,i)}),n),n}return o(e,t),e}(Rf),$_=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(n,{sandboxType:{get:n.getSandboxType},allowDomain:{value:n.allowDomain},allowInsecureDomain:{value:n.allowInsecureDomain},loadPolicyFile:{value:n.loadPolicyFile}}),n}return o(e,t),e.prototype.getSandboxType=function(){return null},e.prototype.allowDomain=function(t){t=xm(this.context,t)},e.prototype.allowInsecureDomain=function(t){t=xm(this.context,t)},e.prototype.loadPolicyFile=function(t){t=xm(this.context,t)},e}(Rf),tg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.alInitStatic=function(t){this._capabilities=new Z_(t),this._security=new $_(t)},e.createAVM1Class=function(t){return Gm(t,!1,e,["capabilities#","security#"],[])},e.getCapabilities=function(t){return t.getStaticState(e)._capabilities},e.getSecurity=function(t){return t.getStaticState(e)._security},e}(Rf),eg=[-1,37,39,36,35,45,46,-1,8,-1,-1,-1,-1,13,38,40,33,34,9,27],ng={1:N_[8192],2:N_[16384],4:N_[1024],8:N_[2048],64:N_[4096],160:N_[32768],272:N_[65536]},ig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,[],["$version#","_alpha#","getAwayJSID","attachAudio","attachBitmap","attachMovie","beginFill","beginBitmapFill","beginGradientFill","blendMode#","cacheAsBitmap#","_callFrame","clear","createEmptyMovieClip","createTextField","_currentframe#","curveTo","_droptarget#","duplicateMovieClip","enabled#","endFill","filters#","_framesloaded#","_focusrect#","forceSmoothing#","getBounds","getBytesLoaded","getBytesTotal","getDepth","getInstanceAtDepth","getNextHighestDepth","getRect","getSWFVersion","getTextSnapshot","getURL","globalToLocal","gotoAndPlay","gotoAndStop","_height#","_highquality#","hitArea#","hitTest","lineGradientStyle","lineStyle","lineTo","loadMovie","loadVariables","localToGlobal","_lockroot#","menu#","moveTo","_name#","nextFrame","opaqueBackground#","_parent#","play","prevFrame","_quality#","removeMovieClip","_root#","_rotation#","scale9Grid#","scrollRect#","setMask","_soundbuftime#","startDrag","stop","stopDrag","swapDepths","tabChildren#","tabEnabled#","tabIndex#","_target#","_totalframes#","trackAsMenu#","toString","unloadMovie","_url#","useHandCursor#","_visible#","_width#","_x#","_xmouse#","_xscale#","_y#","_ymouse#","_yscale#"])},e.prototype.freeFromScript=function(){t.prototype.freeFromScript.call(this),this.adaptee.mouseEnabled=!0,this.adaptee.mouseChildren=!1},e.prototype._updateMouseEnabled=function(t,e){!this.adaptee.isAVMScene&&t.isMouse&&(this.adaptee.mouseEnabled=!0,this.adaptee.mouseChildren=!1,e?(this._mouseListenerCount++,t.isButton&&(this._mouseButtonListenerCount++,this.adaptee.buttonMode=!0)):(this._mouseListenerCount--,this._mouseListenerCount<=0&&(this._mouseListenerCount=0),t.isButton&&(this._mouseButtonListenerCount--,this._mouseButtonListenerCount<=0&&(this._mouseButtonListenerCount=0,this.adaptee.buttonMode=!1))))},e.prototype.initAVM1SymbolInstance=function(e,n){t.prototype.initAVM1SymbolInstance.call(this,e,n),this._requiredListeners=Object.create(null),this._actions=this.adaptee.timeline.avm1ButtonActions;for(var i=null,r=null,o=!1,a=this._actions.length,s=0;s<a;s++)if((i=this._actions[s]).actionsBlock||(i.actionsBlock=e.actionsDataFactory.createActionsData(i.actionsData,"s"+this.adaptee.id+"e"+s)),i.keyCode,0!=i.stateTransitionFlags){for(var l in r=this._mouseEventHandler.bind(this,i.stateTransitionFlags),o=!1,ng)i.stateTransitionFlags&parseInt(l)&&(o=!0,this._requiredListeners[ng[l].eventName]={handler:ng[l],boundListener:r});o||console.warn("unknown button event flag",i.stateTransitionFlags)}this.adaptee.addButtonListeners(),this._initEventsHandlers(),this._addListeners()},e.prototype.initAdapter=function(){t.prototype.initAdapter.call(this),this._addListeners()},e.prototype.stop=function(){return this.adaptee.stop()},e.prototype.getEnabled=function(){return this.enabled},e.prototype.setEnabled=function(t){this.adaptee.buttonEnabled=t,this.adaptee.mouseEnabled=t,t!=this.enabled&&(this.enabled=t,this.setEnabledListener(t))},e.prototype.getTrackAsMenu=function(){return!1},e.prototype.setTrackAsMenu=function(t){},e.prototype._addListeners=function(){for(var t in this._requiredListeners)this._eventHandlers[t]=this._requiredListeners[t].handler,this._eventsListeners[t]=this._requiredListeners[t].boundListener;this.setEnabledListener(this.enabled)},e.prototype._removeListeners=function(){for(var t in this._requiredListeners)this.adaptee.removeEventListener(t,this._requiredListeners[t].boundListener)},e.prototype._keyDownHandler=function(t){for(var e=this._actions,n=e.length,i=0;i<n;i++){var r=e[i];r.keyCode&&((r.keyCode<32&&eg[r.keyCode]===t.axGetPublicProperty("keyCode")||r.keyCode===t.axGetPublicProperty("charCode"))&&this._runAction(r))}},e.prototype._mouseEventHandler=function(t){for(var e=this._actions,n=e.length,i=0;i<n;i++){var r=e[i];r.stateTransitionFlags===t&&this._runAction(r)}},e.prototype._runAction=function(t){var e=this._avm1Context;this.adaptee.parent&&e.executeActions(t.actionsBlock,Vm(this.adaptee.parent,this.context))},e.prototype._initEventsHandlers=function(){this.bindEvents(Q_)},e}(Y_),rg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,[],["getRGB","getTransform","setRGB","setTransform"],null,e.prototype.avm1Constructor)},e.prototype.avm1Constructor=function(t){t&&(this._target=this.context.resolveTarget(t),this._target&&this._target.adaptee&&!this._target.adaptee.isAVMScene&&(this._target.avmColor=this,this._targetAwayObject=this._target.adaptee))},e.prototype.changeTarget=function(t){t&&t instanceof O_?(this._target=t,this._target.avmColor=this,this._target._ctBlockedByScript=!0,this._targetAwayObject=this._target.adaptee):this._target=null},e.prototype.getRGB=function(){var t=e.prototype.getTransform.call(this);return t?t.getRgb():null},e.prototype.getTransform=function(){return this._targetAwayObject?Kf.fromAwayColorTransform(this.context,this._targetAwayObject.transform.colorTransform):null},e.prototype.setRGB=function(t){var n=e.prototype.getTransform.call(this);n&&(n.setRgb(t),e.prototype.setTransform.call(this,n)),this._target&&(this._target._ctBlockedByScript=!0)},e.prototype.setTransform=function(t){if(this._targetAwayObject&&t){var e=t;t instanceof Kf||t instanceof Rf&&(e=function(t){var e=t.context;if(!(t instanceof Rf))return new Kf(e,1,1,1,1,0,0,0,0);var n=t.alGet("alphaOffset");null==n&&(n=t.alGet("ab"));var i=t.alGet("alphaMultiplier");null==i&&null!=(i=t.alGet("aa"))&&(i/=100);var r=t.alGet("redOffset");null==r&&(r=t.alGet("rb"));var o=t.alGet("redMultiplier");null==o&&null!=(o=t.alGet("ra"))&&(o/=100);var a=t.alGet("greenOffset");null==a&&(a=t.alGet("gb"));var s=t.alGet("greenMultiplier");null==s&&null!=(s=t.alGet("ga"))&&(s/=100);var l=t.alGet("blueOffset");null==l&&(l=t.alGet("bb"));var u=t.alGet("blueMultiplier");return null==u&&null!=(u=t.alGet("ba"))&&(u/=100),new Kf(e,Cm(e,Yf(o,1)),Cm(e,Yf(s,1)),Cm(e,Yf(u,1)),Cm(e,Yf(i,1)),Cm(e,Yf(r,0)),Cm(e,Yf(a,0)),Cm(e,Yf(l,0)),Cm(e,Yf(n,0)))}(t)),e&&(this._targetAwayObject.transform.colorTransform._rawData[0]=e._rawData[0],this._targetAwayObject.transform.colorTransform._rawData[1]=e._rawData[1],this._targetAwayObject.transform.colorTransform._rawData[2]=e._rawData[2],this._targetAwayObject.transform.colorTransform._rawData[3]=e._rawData[3],this._targetAwayObject.transform.colorTransform._rawData[4]=e._rawData[4],this._targetAwayObject.transform.colorTransform._rawData[5]=e._rawData[5],this._targetAwayObject.transform.colorTransform._rawData[6]=e._rawData[6],this._targetAwayObject.transform.colorTransform._rawData[7]=e._rawData[7],this._targetAwayObject.transform.invalidateColorTransform(),this._targetAwayObject.invalidate(),this._targetAwayObject._invalidateHierarchicalProperty(tr.COLOR_TRANSFORM))}this._target&&(this._target._ctBlockedByScript=!0)},e}(Rf),og=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!1,e,["show","hide"],[])},e.bindStage=function(t,n,i,r){e.mouseButtonsState[1]=0,e.mouseButtonsState[4]=0,e.mouseButtonsState[2]=0;var o=i.view.stage;e.mouseDownDelegate&&o.removeEventListener(ml.MOUSE_DOWN,e.mouseDownDelegate),e.mouseMoveDelegate&&o.removeEventListener(ml.MOUSE_MOVE,e.mouseMoveDelegate),e.mouseOutDelegate&&o.removeEventListener(ml.MOUSE_OUT,e.mouseOutDelegate),e.mouseUpDelegate&&o.removeEventListener(ml.MOUSE_UP,e.mouseUpDelegate),e.mouseDownDelegate=function(t){var i,r=null!==(i=t.buttons)&&void 0!==i?i:0;e.mouseButtonsState[1&r]=1,e.mouseButtonsState[2&r]=1,e.mouseButtonsState[4&r]=1,4!==r&&Sm(n,"broadcastMessage",["onMouseDown"])},e.mouseMoveDelegate=function(t){Sm(n,"broadcastMessage",["onMouseMove"])},e.mouseOutDelegate=function(t){Sm(n,"broadcastMessage",["onMouseOut"])},e.mouseUpDelegate=function(t){var i,r=null!==(i=t.buttons)&&void 0!==i?i:0;e.mouseButtonsState[1&r]=1,e.mouseButtonsState[2&r]=1,e.mouseButtonsState[4&r]=1,4!==r&&Sm(n,"broadcastMessage",["onMouseUp"])},o.addEventListener(ml.MOUSE_DOWN,e.mouseDownDelegate),o.addEventListener(ml.MOUSE_MOVE,e.mouseMoveDelegate),o.addEventListener(ml.MOUSE_OUT,e.mouseOutDelegate),o.addEventListener(ml.MOUSE_UP,e.mouseUpDelegate)},e.hide=function(){Ng.instance.Stage.avmStage.mouseManager.showCursor=!1},e.show=function(){Ng.instance.Stage.avmStage.mouseManager.showCursor=!0},e.mouseButtonsState=((K_={})[1]=0,K_[4]=0,K_[2]=0,K_),e.mouseDownDelegate=null,e.mouseMoveDelegate=null,e.mouseOutDelegate=null,e.mouseUpDelegate=null,e}(Rf),ag=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,[],["loadClip","unloadClip","getProgress"],null,e.prototype.avm1Constructor)},e.prototype.avm1Constructor=function(){W_.initialize(this.context,this)},e.prototype.loadClip=function(t,e){var n=this;if("number"==typeof e){if(0===e)return!1}else if(!this.context.resolveTarget(e))return!1;var i=new H_(this.context);if(this._loaderHelper=i,this._target=null,!t)return!1;var r=e;return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")&&(t=this.context.globals.SWF_BASE_URL+t),i.loadMovieAt(t,"get",r).then((function(t){t?(Sm(n,"broadcastMessage",["onLoadComplete",e]),setTimeout((function(){Sm(n,"broadcastMessage",["onLoadInit",e])}))):console.warn("load - content is null")})),!0},e.prototype.unloadClip=function(t){return!0},e.prototype.getProgress=function(t){return 0},e}(Rf);function sg(t,e,n,i,r,o){var a=new ft(e),s=a.url||"",l=s.replace(/\?.*$/,""),u=bf(s,null);if(u){if(u.supressLoad)return void console.log("[LOADER] Load supressed ",u.url);console.log("[LOADER] Override loading url:",u.url),a.url=u.url}else console.log("[LOADER] start loading the url:",l);n&&(a.method=n),r&&(a.data="application/x-www-form-urlencoded"===i?new st(r):r);var c=new lt;c.dataFormat="text";var h=function(e){c.removeEventListener(X.LOAD_COMPLETE,h),Fm(t,o,"onData",[c.data])};c.addEventListener(X.LOAD_COMPLETE,h),o._as3Loader=c,u&&u.supressErrors&&c.addEventListener(X.LOAD_ERROR,(function(t){console.log("[LOADER] Error supressed by redirect rule as empty complete events!",t),c.dispatchEvent(new X(X.LOAD_COMPLETE,c))})),c.load(a)}var lg,ug=function(t){function e(e){var n=t.call(this,e)||this;return n.alSetOwnPrototypeProperty(new cg(e,n)),n}return o(e,t),e.prototype.alConstruct=function(t){var e=new Rf(this.context);return e.alPrototype=this.alGetPrototypeProperty(),e.isAVM1DataObject=!0,e},e.prototype.alCall=function(t,e){return this.alConstruct(e)},e}(Nf),cg=function(t){function e(e,n){var i=t.call(this,e)||this;return Om(i,{constructor:{value:n,writable:!0},toString:{value:i._toString},load:{value:i.load},onData:{value:i.defaultOnData},decode:{value:i.decode},send:{value:i.load},sendAndLoad:{value:i.sendAndLoad}}),i}return o(e,t),e.prototype.getBytesLoaded=function(){if(this._as3Loader)return this._as3Loader.bytesLoaded},e.prototype.getBytesTotal=function(){if(this._as3Loader)return this._as3Loader.bytesTotal},e.prototype.load=function(t){return!!(t=xm(this.context,t))&&(sg(this.context,t,null,null,null,this),!0)},e.prototype.defaultOnData=function(t){ap(t)?Fm(this.context,this,"onLoad",[!1]):(e.prototype.decode.call(this,t),this.alPut("loaded",!0),Fm(this.context,this,"onLoad",[!0]))},e.prototype.decode=function(t){t=xm(this.context,t);var e=new st(t);for(var n in e.variables)this.alPut(n,e.variables[n])},e.prototype._toString=function(){var t={};for(var e in this._ownProperties)t[e]=this.alGet(e);return new URLSearchParams(t).toString()},e.prototype.send=function(t,e,n){return t=xm(this.context,t),n=ap(n)?"POST":xm(this.context,n),!1},e.prototype.sendAndLoad=function(t,e,n){if(t=xm(this.context,t),n=ap(n)?"POST":xm(this.context,n),!(t&&e instanceof Rf))return!1;if(!e.isAVM1DataObject)return!1;var i=this.alGet("contentType");i=ap(i)?"application/x-www-form-urlencoded":xm(this.context,i);var r=ym(this.context,this);return sg(this.context,t,n,i,r,e),!0},e}(Rf),hg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,[],["attachSound","duration#","getBytesLoaded","getBytesTotal","loadSound","getPan","setPan","getTransform","setTransform","getVolume","setVolume","start","stop","onSoundComplete"],null,e.prototype.avm1Constructor)},e.prototype.avm1Constructor=function(t){this._target=this.context.resolveTarget(t),this._sound=null,this._playAfterLoading=!1,this._assetNameSpace=Y_.currentMCAssetNameSpace,this._soundCompleteInternal=this._soundCompleteInternal.bind(this)},e.prototype.alPut=function(e,n){t.prototype.alPut.call(this,e,n),e&&"onsoundcomplete"==e.toLowerCase()&&this.onSoundComplete(n)},e.prototype.alDeleteProperty=function(e){return t.prototype.alDeleteProperty.call(this,e),e&&"onsoundcomplete"==e.toLowerCase()&&this.onSoundComplete(),!0},e.prototype.attachSound=function(t){"string"==typeof t&&(this._sound=dt.getAsset(t,this._assetNameSpace),this._sound)},e.prototype.onSoundComplete=function(t){var e=this;void 0===t&&(t=null),this._onSoundCompleteInternal=t?function(){return t.alCall(e)}:null},e.prototype.loadSound=function(t,e){var n=this;e?(this._playAfterLoading=!0,console.warn("[AVM1Sound] - loadSound called with isStreaming=true, but streaming not implemented yet",t,e)):this._playAfterLoading=!1;var i=new ht;i.addEventListener(h.ASSET_COMPLETE,(function(t){return n.onAssetComplete(t)})),i.addEventListener(Q.LOADER_COMPLETE,(function(t){return n.onLoadComplete(t)})),i.addEventListener(X.LOAD_ERROR,(function(t){return n.onLoadError(t)})),i.load(new ft(t),null,t,new At)},e.prototype.onAssetComplete=function(t){var e=t.asset;e.isAsset(w)&&(this._sound=e,this._playAfterLoading&&this._sound.play(0))},e.prototype.onLoadComplete=function(t){this._sound||console.warn("[AVM1Sound] - loadSound: Soundloading is complete, but no WaveAudio was created.")},e.prototype.onLoadError=function(t){console.warn("[AVM1Sound] - loadSound: onLoadError")},e.prototype.getBytesLoaded=function(){return console.warn("AVM1Sound.getBytesLoaded"),0},e.prototype.getBytesTotal=function(){return console.warn("AVM1Sound.getBytesTotal"),1},e.prototype.getDuration=function(){return console.warn("AVM1Sound.getDuration"),0},e.prototype.getPan=function(){return 0},e.prototype.setPan=function(t){},e.prototype.getTransform=function(){return console.warn("AVM1Sound.getTransform"),null},e.prototype.setTransform=function(t){console.warn("AVM1Sound.setTransform")},e.prototype.getVolume=function(){return this._sound?100*this._sound.volume:this._target&&this._target.adaptee?100*this._target.adaptee.soundVolume:(console.warn("AVM1Sound.getVolume called, but no Sound object attached or target mc set"),100)},e.prototype.setVolume=function(t){isNaN(t)&&(t=0),this._sound||this._target&&!this._target.adaptee.isAVMScene?(this._target&&this._target.adaptee&&(this._target.adaptee.soundVolume=t/100),this._sound&&(this._sound.volume=t/100)):E.setVolume(t/100)},e.prototype.start=function(t,e){this._sound&&(e=isNaN(e)||e<1?1:Math.floor(e),this._target&&this._target.adaptee&&this._target.adaptee.startSound(this._sound,e,this._soundCompleteInternal))},e.prototype.stop=function(t){var e=t?dt.getAsset(t,this._assetNameSpace):this._sound;this._target&&this._target.adaptee?this._target.adaptee.stopSounds(e):yl.stopSounds(e)},e.prototype._soundCompleteInternal=function(){this._onSoundCompleteInternal&&this._onSoundCompleteInternal()},e}(Rf),pg=function(){function t(){this._values={},this._realStorage=null}return t.prototype.getItem=function(t){return this._realStorage&&(this._values[t]=this._realStorage.getItem(t)),this._values[t]},t.prototype.setItem=function(t,e){this._realStorage&&this._realStorage.setItem(t,e),this._values[t]=e},t.prototype.removeItem=function(t){this._realStorage&&this._realStorage.removeItem(t),delete this._values[t]},t}();function dg(){if(!lg&&(lg=new pg,"undefined"!=typeof Storage))try{lg._realStorage=window.localStorage}catch(t){console.warn("[Shared Storage] ",t)}return lg}var fg,_g=function(){function t(){}return t.decodedData=function(){var t=dg()._values,e={};for(var n in t)e[n]=JSON.parse(t[n]);return this._lastRawData=e,e},t.encodeAndApplyData=function(){if(!this._lastRawData)throw"Need call decode before encode for detecting a model";var t=dg();for(var e in this._lastRawData)t.setItem(e,JSON.stringify(this._lastRawData[e]));return t._values},t._lastRawData=null,t}(),gg=function(t){function e(e){var n=t.call(this,e)||this;return n._flushPending=0,Om(n,{data:{get:n.getData,enumerable:!0},clear:{value:n.clear,writable:!0},flush:{value:n.flush,writable:!0}}),n._bindedFlush=n.flush.bind(n),n}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,["getLocal"],["data#","flush","clear"])},e.prototype.setName=function(t){t=xm(this.context,t),this._storage_name=t;var e=dg().getItem(t);if(e)try{return void(this._data=this.getAVM1Value(JSON.parse(e)))}catch(t){console.warn("[AVM1 SharedObject]","Invalid data:",e)}return this._data=vm(this.context),console.warn("[AVM1 SharedObject]","No shared object found"),null},e.getLocal=function(t,n,i,r){(i||r)&&console.warn("SharedObject.getLocal: params 'localPath' and 'secure' not supported");var o=new e(t);return o.setName(n),o},e.prototype.applyDataHook=function(t){var e=this;return t.__alPutHookApplyed||(t.__alPutHookApplyed=!0,t.alPut=function(n,i){Rf.prototype.alPut.call(t,n,i),e.requestFlush()}),t},e.prototype.requestFlush=function(){clearTimeout(this._flushPending),this._flushPending=setTimeout(this._bindedFlush,100)},e.prototype.getData=function(){return this.applyDataHook(this._data)},e.prototype.clear=function(){dg().removeItem(this._storage_name)},e.prototype.getAVM1Value=function(t){if("number"==typeof t||"string"==typeof t||"boolean"==typeof t)return t;if(Array.isArray(t)){for(var e=0;e<t.length;e++)t[e]=this.getAVM1Value(t[e]);return new Zg(this.context,t)}if("object"==typeof t){var n=vm(this.context);for(var i in t)n.alSetOwnProperty(i,new Lf(64,this.getAVM1Value(t[i])));return n}},e.prototype.getJSValue=function(t){if("number"==typeof t||"string"==typeof t||"boolean"==typeof t)return t;if(Tm(this.context,t)){console.log("array");var e=t.value,n=[];if(e)for(var i=e.length,r=0;r<i;r++)n[r]=this.getJSValue(e[r]);return n}if(t instanceof Rf){var o={};for(var a in t._ownProperties)"__proto__"!=a&&"__constructor__"!=a&&(o[a]=this.getJSValue(t._ownProperties[a].value));return o}console.log("unknown datatype")},e.prototype.flush=function(t){this._flushPending&&(clearTimeout(this._flushPending),this._flushPending=null);var e=this.getJSValue(this._data);return dg().setItem(this._storage_name,JSON.stringify(e)),!1},e}(Rf),mg=function(){function t(t,e){}return t.prototype.axCallPublicProperty=function(t,e){return null},t.prototype.axGetPublicProperty=function(t){return null},t.prototype.axSetPublicProperty=function(t,e){return null},t.prototype.removeChild=function(t){},Object.defineProperty(t.prototype,"attributes",{get:function(){return console.log("attributes not implemented yet in flash/XMLNode"),null},set:function(t){console.log("attributes not implemented yet in flash/XMLNode")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return console.log("childNodes not implemented yet in flash/XMLNode"),[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localName",{get:function(){return console.log("localName not implemented yet in flash/XMLNode"),""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return console.log("namespaceURI not implemented yet in flash/XMLNode"),""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prefix",{get:function(){return console.log("prefix not implemented yet in flash/XMLNode"),""},enumerable:!1,configurable:!0}),t.prototype.appendChild=function(t){console.log("appendChild not implemented yet in flash/XMLNode")},t.prototype.cloneNode=function(t){return console.log("cloneNode not implemented yet in flash/XMLNode"),null},t.prototype.getNamespaceForPrefix=function(t){return console.log("getNamespaceForPrefix not implemented yet in flash/XMLNode"),""},t.prototype.getPrefixForNamespace=function(t){return console.log("getPrefixForNamespace not implemented yet in flash/XMLNode"),""},t.prototype.hasChildNodes=function(){return console.log("hasChildNodes not implemented yet in flash/XMLNode"),!1},t.prototype.insertBefore=function(t,e){console.log("insertBefore not implemented yet in flash/XMLNode")},t.prototype.removeNode=function(){console.log("removeNode not implemented yet in flash/XMLNode")},t.prototype.toString=function(){return console.log("toString not implemented yet in flash/XMLNode"),""},t}();function yg(t){if(!(t instanceof Rf))return null;var e=t.context;return Dm(e,t,e.globals.XMLNode)?t.as3XMLNode:null}function Ag(t,e){if(!ap(e)){var n=e._as2Node;return n||((n=new Rf(t)).alPrototype=t.globals.XMLNode.alGetPrototypeProperty(),Cg.prototype.initializeFromAS3Node.call(n,e)),n}}!function(t){t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.TEXT_NODE=3]="TEXT_NODE"}(fg||(fg={}));var vg=function(t){function e(e){var n=t.call(this,e)||this;return n.alSetOwnPrototypeProperty(new Cg(e,n)),n}return o(e,t),e.prototype.alConstruct=function(t){if(!t&&t.length<2)fp.notImplemented("Unsupported amount of parameters for AVM1XMLNode constructor");else{var e=Cm(this.context,t[0]),n=xm(this.context,t[1]);if(e===fg.ELEMENT_NODE||e===fg.TEXT_NODE){var i=new Rf(this.context);return i.alPrototype=this.alGetPrototypeProperty(),Cg.prototype.initializeNode.call(i,e,n),i}fp.notImplemented("Unsupported AVM1XMLNode type: "+e)}},e.prototype.alCall=function(t,e){return this.alConstruct(e)},e}(Nf),bg=function(t){function e(e,n){var i=t.call(this,e)||this;return i._as3XMLNode=n,i._cachedNodePropertyDescriptor=new Lf(70,void 0),Om(i,{length:{get:i.getLength}}),i}return o(e,t),Object.defineProperty(e.prototype,"as3ChildNodes",{get:function(){return this._as3XMLNode.childNodes},enumerable:!1,configurable:!0}),e.prototype.getLength=function(){return this.as3ChildNodes.length},e.prototype.alGetOwnProperty=function(e){if(Im(this.context,e)){var n=gm(this.context,e);if(n>=0&&n<this.as3ChildNodes.length)return this._cachedNodePropertyDescriptor.value=Ag(this.context,this.as3ChildNodes[n]),this._cachedNodePropertyDescriptor}return t.prototype.alGetOwnProperty.call(this,e)},e}(Rf),xg=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.Object.alGetPrototypeProperty(),i._nativeAttr=n,i._cachedNodePropertyDescriptor=new Lf(64,void 0),i}return o(e,t),e.prototype.alGetOwnProperty=function(t){var e=xm(this.context,t),n=this._nativeAttr.getNamedItem(e);if(n)return this._cachedNodePropertyDescriptor.value=n.nodeValue,this._cachedNodePropertyDescriptor},e.prototype.alSetOwnProperty=function(t,e){var n=xm(this.context,t);if(64&e.flags){var i=xm(this.context,e.value);this._nativeAttr[n]=i}},e.prototype.alHasOwnProperty=function(t){var e=xm(this.context,t);return!!this._nativeAttr.getNamedItem(e)},e.prototype.alDeleteOwnProperty=function(t){var e=xm(this.context,t);this._nativeAttr.removeNamedItem(e)},e.prototype.alGetOwnPropertiesKeys=function(){for(var t=[],e=0;e<this._nativeAttr.length;e++)t[e]=xm(this.context,this._nativeAttr.item(e).name);return t},e}(Rf),Cg=function(t){function e(e,n){var i=t.call(this,e)||this;return Om(i,{constructor:{value:n,writable:!0},attributes:{get:i.getAttributes,set:i.setAttributes},childNodes:{get:i.getChildNodes},firstChild:{get:i.getFirstChild},lastChild:{get:i.getLastChild},localName:{get:i.getLocalName},namespaceURI:{get:i.getNamespaceURI},nextSibling:{get:i.getNextSibling},nodeName:{get:i.getNodeName,set:i.setNodeName},nodeType:{get:i.getNodeType},nodeValue:{get:i.getNodeValue,set:i.setNodeValue},parentNode:{get:i.getParentNode},prefix:{get:i.getPrefix},previousSibling:{get:i.getPreviousSibling},appendChild:{value:i.appendChild},cloneNode:{value:i.cloneNode},getNamespaceForPrefix:{value:i.getNamespaceForPrefix},getPrefixForNamespace:{value:i.getPrefixForNamespace},hasChildNodes:{value:i.hasChildNodes},insertBefore:{value:i.insertBefore},removeNode:{value:i.removeNode},toString:{value:i._toString}}),i}return o(e,t),e.prototype.initializeNode=function(t,n){this.as3XMLNode=new mg(t,n),this._attributes=void 0,this._childNodes=void 0,e.addMap(this.as3XMLNode,this)},e.prototype.initializeFromAS3Node=function(t){this.as3XMLNode=t,this._attributes=void 0,this._childNodes=void 0,e.addMap(this.as3XMLNode,this)},e.prototype._toString=function(){return(new XMLSerializer).serializeToString(this.as3XMLNode).replace(/\/>/g," />")},e.prototype.appendChild=function(t){this.as3XMLNode.appendChild(yg(t))},e.prototype.getAttributes=function(){var t=this.as3XMLNode.attributes;if(!ap(t))return this._attributes||(this._attributes=new xg(this.context,t)),this._attributes},e.prototype.setAttributes=function(t){var e=this;if(ap(t))this._attributes=void 0;else if(t instanceof xg)this._attributes=t;else{var n=this.context,i=this.as3XMLNode.attributes;Em(t,(function(t){var r=xm(n,t),o=xm(n,e.alGet(t)),a=document.createAttribute(r);a.value=o,i.setNamedItem(a)}),this),console.warn("[XMLNode] Invalid attribute implementation"),this._attributes=new xg(n,this.as3XMLNode.attributes)}},e.prototype.getChildNodes=function(){return this._childNodes||(this._childNodes=new bg(this.context,this.as3XMLNode)),this._childNodes},e.prototype.cloneNode=function(t){t=fm(this.context,t);var e=this.as3XMLNode.axCallPublicProperty("cloneNode",[t]);return Ag(this.context,e)},e.prototype.getFirstChild=function(){return Ag(this.context,this.as3XMLNode.firstChild)},e.prototype.getNamespaceForPrefix=function(t){return this.as3XMLNode.axCallPublicProperty("getNamespaceForPrefix",[t])},e.prototype.getPrefixForNamespace=function(t){return this.as3XMLNode.axCallPublicProperty("getNamespaceForPrefix",[t])},e.prototype.hasChildNodes=function(){return this.as3XMLNode.hasChildNodes()},e.prototype.insertBefore=function(t,e){this.as3XMLNode.axCallPublicProperty("insertBefore",[yg(t),yg(e)])},e.prototype.getLastChild=function(){return Ag(this.context,this.as3XMLNode.lastChild)},e.prototype.getLocalName=function(){return this.as3XMLNode.localName},e.prototype.getNamespaceURI=function(){return this.as3XMLNode.namespaceURI},e.prototype.getNextSibling=function(){return Ag(this.context,this.as3XMLNode.nextSibling)},e.prototype.getNodeName=function(){return this.as3XMLNode.nodeName},e.prototype.setNodeName=function(t){t=xm(this.context,t),this.as3XMLNode.nodeName=t},e.prototype.getNodeType=function(){return this.as3XMLNode.nodeType},e.prototype.getNodeValue=function(){return this.as3XMLNode.nodeValue},e.prototype.setNodeValue=function(t){t=xm(this.context,t),this.as3XMLNode.nodeValue=t},e.prototype.getParentNode=function(){return Ag(this.context,this.as3XMLNode.parentNode)},e.prototype.getPrefix=function(){return this.as3XMLNode.prefix},e.prototype.getPreviousSibling=function(){return Ag(this.context,this.as3XMLNode.previousSibling)},e.prototype.removeNode=function(){this.as3XMLNode.removeNode()},e.addMap=function(t,e){t._as2Node=e},e}(Rf),Ig=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alSetOwnPrototypeProperty(new Eg(e,i,n)),i}return o(e,t),e.prototype.alConstruct=function(t){var e=t&&xm(this.context,t[0]),n=new Rf(this.context);return n.alPrototype=this.alGetPrototypeProperty(),n.isAVM1DataObject=!0,e||(e=""),Eg.prototype.initializeDocument.call(n,e),n},e.prototype.alCall=function(t,e){return this.alConstruct(e)},e}(Nf),Eg=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.alPrototype=i.alGetPrototypeProperty(),Om(r,{constructor:{value:n,writable:!0},addRequestHeader:{value:r.addRequestHeader},createElement:{value:r.createElement},createTextNode:{value:r.createTextNode},getBytesLoaded:{value:r.getBytesLoaded},getBytesTotal:{value:r.getBytesTotal},ignoreWhite:{value:!1,writable:!0},load:{value:r.load},parseXML:{value:r.parseXML},send:{value:r.send},sendAndLoad:{value:r.sendAndLoad},onData:{value:r.defaultOnData,writable:!0}}),r}return o(e,t),e.prototype.initializeDocument=function(t){t=xm(this.context,t)||null;var e=(new DOMParser).parseFromString(t,"application/xml");Cg.prototype.initializeFromAS3Node.call(this,e),this.as3XMLDocument=e},e.prototype.addRequestHeader=function(t,e){fp.notImplemented("AVM1XMLPrototype.addRequestHeader")},e.prototype.createElement=function(t){t=xm(this.context,t);var e=this.as3XMLDocument.axCallPublicProperty("createElement",[t]);return Ag(this.context,e)},e.prototype.createTextNode=function(t){t=xm(this.context,t);var e=this.as3XMLDocument.axCallPublicProperty("createTextNode",[t]);return Ag(this.context,e)},e.prototype.getBytesLoaded=function(){if(this._as3Loader)return this._as3Loader.bytesLoaded},e.prototype.getBytesTotal=function(){if(this._as3Loader)return this._as3Loader.bytesTotal},e.prototype.load=function(t){return!!(t=xm(this.context,t))&&(sg(this.context,t,null,null,null,this),!0)},e.prototype.defaultOnData=function(t){ap(t)?Fm(this.context,this,"onLoad",[!1]):(e.prototype.parseXML.call(this,t),this.alPut("loaded",!0),Fm(this.context,this,"onLoad",[!0]))},e.prototype.parseXML=function(t){t=xm(this.context,t);var e=(new DOMParser).parseFromString("<syntheticRoot>"+t+"</syntheticRoot>","application/xml"),n=e.getElementsByTagName("parsererror");if(n.length>0){var i=1===e.childElementCount,r=n[0].textContent;if(i)throw"[AVM1XML] Сritical parsing error:"+r;console.warn("[AVM1XML] Parsing error:",r),console.groupCollapsed("[XML Source]:"),console.log(t),console.groupEnd()}this.as3XMLDocument=e.childNodes[0],Cg.prototype.initializeFromAS3Node.call(this,this.as3XMLDocument)},e.prototype.send=function(t,e,n){return t=xm(this.context,t),e=ap(e)?void 0:xm(this.context,e),n=ap(n)?void 0:xm(this.context,n),fp.notImplemented("AVM1XMLPrototype.send"),!1},e.prototype.sendAndLoad=function(t,e){if((t=xm(this.context,t))&&e.isAVM1DataObject){fp.somewhatImplemented("AVM1XMLPrototype.send");var n=this.alGet("contentType");n=ap(n)?void 0:xm(this.context,n);var i=ym(this.context,this);sg(this.context,t,"POST",n,i,e)}},e}(Rf),wg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,["available#","addCallback","call"],[])},e.getAvailable=function(t){return!0},e.addCallback=function(t,e,n,i){if(e=xm(t,e),!wm(i))return!1;try{return window.flashObject||(window.flashObject={}),window.flashObject[e]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=n.alGet(e.toLowerCase());r&&wm(r)?r.alCall(n,t):r&&r.value&&r.value.alCall(n,t)},!0}catch(t){console.warn("[AVM1ExternalInterface] - error in addCallback",t)}return!1},e.call=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];n.length;var r=0;try{var o=e.split("."),a=window;for(r=0;r<o.length;r++)a=a[o[r]];return a.apply(window,n)}catch(t){return}},e}(Rf),Sg=eh((function(t,e){function n(t,e){var n=[],i=[];return null==e&&(e=function(t,e){return n[0]===e?"[Circular ~]":"[Circular ~."+i.slice(0,n.indexOf(e)).join(".")+"]"}),function(r,o){if(n.length>0){var a=n.indexOf(this);~a?n.splice(a+1):n.push(this),~a?i.splice(a,1/0,r):i.push(r),~n.indexOf(o)&&(o=e.call(this,r,o))}else n.push(o);return null==t?o:t.call(this,r,o)}}(t.exports=function(t,e,i,r){return JSON.stringify(t,n(e,r),i)}).getSerialize=n})),Dg=function(){var t=4022871197;return function(e){if(e){e=e.toString();for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)}t=4022871197}},Tg=function(t){return function(){var e,n,i=48,r=1,o=i,a=new Array(i),s=0,l=new Dg;for(e=0;e<i;e++)a[e]=l(Math.random());var u=function(){++o>=i&&(o=0);var t=1768863*a[o]+2.3283064365386963e-10*r;return a[o]=t-(r=0|t)},c=function(t){return Math.floor(t*(u()+11102230246251565e-32*(2097152*u()|0)))};c.string=function(t){var e,n="";for(e=0;e<t;e++)n+=String.fromCharCode(33+c(94));return n};return c.cleanString=function(t){return t=(t=(t=t.replace(/(^\s*)|(\s*$)/gi,"")).replace(/[\x00-\x1F]/gi,"")).replace(/\n /,"\n")},c.hashString=function(t){for(t=c.cleanString(t),l(t),e=0;e<t.length;e++)for(s=t.charCodeAt(e),n=0;n<i;n++)a[n]-=l(s),a[n]<0&&(a[n]+=1)},c.seed=function(t){null==t&&(t=Math.random()),"string"!=typeof t&&(t=Sg(t,(function(t,e){return"function"==typeof e?e.toString():e}))),c.initState(),c.hashString(t)},c.addEntropy=function(){var t=[];for(e=0;e<arguments.length;e++)t.push(arguments[e]);!function(){var t=Array.prototype.slice.call(arguments);for(e=0;e<t.length;e++)for(n=0;n<i;n++)a[n]-=l(t[e]),a[n]<0&&(a[n]+=1)}(s+++(new Date).getTime()+t.join("")+Math.random())},c.initState=function(){for(l(),e=0;e<i;e++)a[e]=l(" ");r=1,o=i},c.done=function(){l=null},void 0!==t&&c.seed(t),c.range=function(t){return c(t)},c.random=function(){return c(Number.MAX_VALUE-1)/Number.MAX_VALUE},c.floatBetween=function(t,e){return c.random()*(e-t)+t},c.intBetween=function(t,e){return Math.floor(c.random()*(e-t+1))+t},c}()};Tg.create=function(t){return new Tg(t)};var Pg,Bg=Tg,Og=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url="",e.targetMC=null,e._queued_focus_value=null,e._queued_focus=!1,e.callbackName="",e.callbackTarget=null,e}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,[],["addListener","getFocus","getBeginIndex","getEndIndex","removeListener","setFocus","setSelection","getCaretIndex"],null,e.prototype.avm1Constructor)},e.prototype.avm1Constructor=function(t,e){this.url=t,this.targetMC=e,this._queued_focus=!1},e.prototype.addListener=function(t){},e.prototype.removeListener=function(t){return!0},e.prototype.getBeginIndex=function(){var t,e=null===(t=Cf.instance().mouseManager.getFocus())||void 0===t?void 0:t.container;return e&&e.isAsset(Ch)?e.selectionBeginIndex:-1},e.prototype.getEndIndex=function(){var t,e=null===(t=Cf.instance().mouseManager.getFocus())||void 0===t?void 0:t.container;return e&&e.isAsset(Ch)?e.selectionEndIndex:-1},e.prototype.getCaretIndex=function(){var t,e=null===(t=Cf.instance().mouseManager.getFocus())||void 0===t?void 0:t.container;return e&&e.isAsset(Ch)?e.selectionBeginIndex:-1},e.prototype.getFocus=function(){var t,e=null===(t=Cf.instance().mouseManager.getFocus())||void 0===t?void 0:t.container;if(e){for(var n=[];e;)e.isAVMScene?e=null:(n.push(e.name),e=e.parent);for(var i=n.length,r="";i>0;)r+=n[--i],i>0&&(r+=".");return r}return""},e.prototype.setFocus=function(t){var e;if(""!==t)return"string"==typeof t?(e=this.context.resolveTarget(t))&&e.node||(e=this.context.resolveTarget(t+"_internal_TF"))&&e.node?void Cf.instance().mouseManager.setFocus(e.node):void console.warn("AVM1Selection.setFocus - no object found for string "+t):((e=this.context.resolveTarget(t))&&e.node?Cf.instance().mouseManager.setFocus(e.node):console.warn("AVM1Selection.setFocus - no object found '"+t.toString()+"'"),!0)},e.prototype.setSelection=function(t,e){var n,i=null===(n=Cf.instance().mouseManager.getFocus())||void 0===n?void 0:n.container;i&&i.isAsset(Ch)&&i.setSelection(t,e)},e}(Rf),Mg=Rh.escape,Lg=[],Rg=function(){function t(){}return t.ALL="all",t.NONE="none",t.IMPORTANT="important",t}(),Ng=function(t){function e(e){var n=t.call(this,e)||this;return n.SWF_BASE_URL="",n.registeredLevels={},n.NaN=Number.NaN,n.Infinity=Number.POSITIVE_INFINITY,n.newline="\n",n.undefined=void 0,n._initBuiltins(e),n._initializeFlashObject(e),n.buttonCheckFunc=new Nf(e),n.buttonCheckFunc.alCall=function(t,e){return og.mouseButtonsState[e[0]]},n}return o(e,t),e.generateRandomSeed=function(){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",e=10+Math.round(10*Math.random()),n="",i=0;i<e;i++)n+=t[Math.floor(62*Math.random())];return n},e.setRandom=function(t){return void 0===t&&(t=null),t?(t==e.GENERATE_SEED&&(t=e.generateRandomSeed()),e.randomProvider=Bg.create(t),t):(e.randomProvider=null,null)},e.registerCustomClass=function(t,n){e._registeredCustomClasses[t]=n,e.instance&&e.instance.alPut(t,n)},e.registerCustomClassInstance=function(t,n){e._registeredCustomClassInstances[t]=n,e.instance&&e.instance.alPut(t,n)},e.createGlobalsObject=function(t){var n=new e(t);return jm(t,n,n,["flash","ASnative","ASSetPropFlags","BitmapData","clearInterval","clearTimeout","ExternalInterface","escape","unescape","setInterval","setTimeout","showRedrawRegions","trace","updateAfterEvent","myName","NaN","Infinity","isFinite","isNaN","parseFloat","parseInt","undefined","Object","Function","Array","Number","Math","Boolean","Date","Selection","String","Error","MovieClip","AsBroadcaster","System","Stage","Button","TextField","Color","Key","Mouse","MovieClipLoader","newline","XML","XMLNode","LoadVars","Sound","SharedObject","ContextMenu","ContextMenuItem","TextFormat"],!1),e.instance=n,n},e.prototype._getLevelForRoot=function(t){for(var e in this.registeredLevels)if(this.registeredLevels[e]===t)return+e;return-1},e.prototype._getRootForLevel=function(t){return this.registeredLevels[t]},e.prototype._addRoot=function(t,e){return this.registeredLevels[t]?this.registeredLevels[t]:(Vm(e,this.context).adaptee,i_.avmStage.root.addChildAt(e,t),e.adapter!=e&&e.adapter.initAdapter(),this.registeredLevels[t]=e,e)},e.prototype._removeRoot=function(t){this.registeredLevels[t]&&(i_.avmStage.root.removeChild(this.registeredLevels[t]),delete this.registeredLevels[t])},e.prototype.ASnative=function(t,e){return 800===t&&2===e?this.buttonCheckFunc:(console.log("ASnatives",t,e),null)},e.prototype.ASSetPropFlags=function(t,e,n,i){},e.prototype.clearIntervals=function(){var t=0,e=Lg.length;for(t=0;t<e;t++)_l.clearInterval(Lg[t]);Lg.length=0},e.prototype.clearInterval=function(t){var e=Lg[t-1];e&&(_l.clearInterval(e),delete Lg[t-1])},e.prototype.clearTimeout=function(t){var e=Lg[t-1];e&&(_l.clearTimeout(e),delete Lg[t-1])},e.prototype.escape=function(t){return encodeURIComponent(t).replace(/!|'|\(|\)|\*|-|\.|_|~/g,(function(t){switch(t){case"*":return"%2A";case"-":return"%2D";case".":return"%2E";case"_":return"%5F";default:return Mg(t)}}))},e.prototype.unescape=function(t){return decodeURIComponent(t)},e.prototype.setInterval=function(){if(!(arguments.length<2)){var t,e=arguments,n=this.context,i=void 0,r=2;if(wm(e[0]))t=e[0].toJSFunction(),i=e[1];else{if(e.length<3)return;var o=e[0],a=e[1];if(i=e[2],r=3,!(o instanceof Rf)||"string"!=typeof a)return;t=function(){var t=o.alGet(a);if(wm(t)){var e=Array.prototype.slice.call(arguments,0);n.executeFunction(t,o,e)}}}if(void 0!==i){i=gm(n,i);var s,l=Array.prototype.slice.call(e,r);if(t){s=_l.setInterval((function(){t.apply(null,l)}),i)}return Lg.push(s)}}},e.prototype.setTimeout=function(){var t=arguments;if(!(t.length<2)&&wm(t[0])){for(var e=t[0].toJSFunction(),n=gm(this.context,t[1]),i=[],r=t.length,o=2;o<r;o++)i.push(t[o]);var a=_l.setTimeOut((function(){e.apply(null,i)}),n);return Lg.push(a)}},e.prototype.showRedrawRegions=function(t,e){},e.prototype.trace=function(t){this&&this.context.actions.trace(t)},e.prototype.updateAfterEvent=function(){},e.prototype.isFinite=function(t){return isFinite(_m(this.context,t))},e.prototype.isNaN=function(t){return" "===t||isNaN(_m(this.context,t))},e.prototype.parseFloat=function(t){return parseFloat(ym(this.context,t))},e.prototype.parseInt=function(t,e){return parseInt(ym(this.context,t),mm(this.context,e))},e.prototype._initBuiltins=function(t){var n=t.builtins;for(var i in this.Object=n.Object,this.Function=n.Function,this.Array=n.Array,this.Number=n.Number,this.Math=n.Math,this.Boolean=n.Boolean,this.Date=n.Date,this.String=n.String,this.Error=n.Error,this.Selection=Og.createAVM1Class(t)._ownProperties.prototype.value,this.ExternalInterface=wg.createAVM1Class(t),this.MovieClip=Y_.createAVM1Class(t),this.AsBroadcaster=W_.createAVM1Class(t),this.System=tg.createAVM1Class(t),this.Stage=i_.createAVM1Class(t),this.Button=ig.createAVM1Class(t),this.TextField=z_.createAVM1Class(t),this.Color=rg.createAVM1Class(t),this.Key=p_.createAVM1Class(t),this.Mouse=og.createAVM1Class(t),this.MovieClipLoader=ag.createAVM1Class(t),this.LoadVars=new ug(t),this.Sound=hg.createAVM1Class(t),this.SharedObject=gg.createAVM1Class(t),this.ContextMenu=void 0,this.ContextMenuItem=void 0,this.TextFormat=h_.createAVM1Class(t),this.XMLNode=new vg(t),this.XML=new Ig(t,this.XMLNode),this.BitmapData=a_.createAVM1Class(t),this.Matrix=new e_(t),this.Point=new Vf(t),this.Rectangle=new Hf(t),this.Transform=d_.createAVM1Class(t),this.ColorTransform=new Wf(t),W_.initialize(t,this.Stage),W_.initialize(t,this.Key),W_.initialize(t,this.Mouse),e._registeredCustomClasses)this.alPut(i,e._registeredCustomClasses[i]);for(var i in e._registeredCustomClassInstances)this.alPut(i,e._registeredCustomClassInstances[i])},e.prototype._initializeFlashObject=function(t){this.flash=vm(t);var e=vm(t);e.alPut("BitmapData",this.BitmapData),this.flash.alPut("display",e);var n=vm(t);n.alPut("ExternalInterface",wg.createAVM1Class(t)),this.flash.alPut("external",n);var i=function(t){var e=vm(t),n=new y_(t);return e.alPut("BitmapFilter",n),v_(t,e,n,f_.BEVEL,["distance","Number","angle","Number","highlightColor","Number","highlightAlpha","Number","shadowColor","Number","shadowAlpha","Number","blurX","Number","blurY","Number","strength","Number","quality","Number","type","String","knockout","Boolean"]),v_(t,e,n,f_.BLUR,["blurX","Number","blurY","Number","quality","Number"]),v_(t,e,n,f_.COLORMATRIX,["matrix","Numbers"]),v_(t,e,n,f_.CONVOLUTION,["matrixX","Number","matrixY","Number","matrix","Numbers","divisor","Number","bias","Number","preserveAlpha","Boolean","clamp","Boolean","color","Number","alpha","Number"]),v_(t,e,n,f_.DISPLACEMENT,["mapBitmap","BitmapData","mapPoint","Point","componentX","Number","componentY","Number","scaleX","Number","scaleY","Number","mode","String","color","Number","alpha","Number"]),v_(t,e,n,f_.DROPSHADOW,["distance","Number","angle","Number","color","Number","alpha","Number","blurX","Number","blurY","Number","strength","Number","quality","Number","inner","Boolean","knockout","Boolean","hideObject","Boolean"]),v_(t,e,n,f_.GLOW,["color","Number","alpha","Number","blurX","Number","blurY","Number","strength","Number","quality","Number","inner","Boolean","knockout","Boolean"]),v_(t,e,n,f_.GRADIENTBEVEL,["distance","Number","angle","Number","colors","Numbers","alphas","Numbers","ratios","Numbers","blurX","Number","blurY","Number","strength","Number","quality","Number","type","String","knockout","Boolean"]),v_(t,e,n,f_.GRADIENTGLOW,["distance","Number","angle","Number","colors","Numbers","alphas","Numbers","ratios","Numbers","blurX","Number","blurY","Number","strength","Number","quality","Number","type","String","knockout","Boolean"]),e}(t);this.flash.alPut("filters",i),this.filters=i;var r=vm(t);r.alPut("ColorTransform",this.ColorTransform),r.alPut("Matrix",this.Matrix),r.alPut("Point",this.Point),r.alPut("Rectangle",this.Rectangle),r.alPut("Transform",this.Transform),this.flash.alPut("geom",r);var o=vm(t);this.flash.alPut("text",o)},e.swfStartTime=Date.now(),e._registeredCustomClasses={},e._registeredCustomClassInstances={},e.GENERATE_SEED="GENERATE_SEED",e.tracelevel=Rg.NONE,e.toStringPrecision=-1,e}(Rf),Fg=function(){function t(t){this.context=t}return t.prototype.asfunction=function(t){},t.prototype.call=function(t){this.context.resolveTarget(null)._callFrame(t)},t.prototype.chr=function(t){return t=gm(this.context,t),this.context.swfVersion<=5&&(t&=255),t?String.fromCharCode(t):""},t.prototype.duplicateMovieClip=function(t,e,n){var i=Cm(this.context,n)-Mm;this.context.resolveTarget(t).duplicateMovieClip(e,i,null)},t.prototype.fscommand=function(t,e){},t.prototype.getTimer=function(){return Date.now()-Ng.swfStartTime},t.prototype.getURL=function(t,e,n){t=String(t),"string"!=typeof e||0!==e.indexOf("_level")?0!==t.toLowerCase().indexOf("fscommand:")?window.open(t,e):console.log("fsCommand not implemented "):this.loadMovieNum(t,+e.substr(6),n)},t.prototype.gotoAndPlay=function(t,e){var n=this.context.resolveTarget(null);n.adaptee.play(),this._gotoFrame(n.adaptee,t,e)},t.prototype.gotoAndStop=function(t,e){var n=this.context.resolveTarget(null);"number"==typeof e&&e<=0||(n.adaptee.stop(),this._gotoFrame(n.adaptee,t,e))},t.prototype._gotoFrame=function(t,e,n){if(void 0!==e){if(Array.isArray(e)){if(0==e.length)return;e=e[0]}if(e instanceof Zg){if(!e.value||0==e.value.length)return;e=e.value[0]}if("number"==typeof e&&e%1!=0&&(e=e.toString()),"string"==typeof e){var i=e.toLowerCase();if(null===t.timeline._labels[i])return e=parseInt(e),void(isNaN(e)||(t.currentFrameIndex=e-1));t.jumpToLabel(i,n)}else t.currentFrameIndex=e-1}},t.prototype.ifFrameLoaded=function(t,e){var n=this.context.resolveTarget(null),i=arguments.length<2?arguments[0]:arguments[1],r=n.alGet("_framesloaded"),o=n.alGet("_totalframes");return Math.min(i+1,o)<=r},t.prototype.length_=function(t){return(""+t).length},t.prototype.loadMovie=function(t,e,n){if(t&&0===t.toLowerCase().indexOf("fscommand:"))this.fscommand(t.substring(10),e);else if(""===t&&e)e.unloadMovie();else{""!=t&&0!==t.indexOf("http://")&&0!==t.indexOf("https://")&&(t=this.context.globals.SWF_BASE_URL+t);var i,r="string"==typeof e&&0===e.indexOf("_level");if(r){var o=e.substr(6);r=(i=parseInt(o,10)).toString()===o}if(r)this.loadMovieNum(t,i,n);else this.context.resolveTarget(e).loadMovie(t,n)}},t.prototype.loadMovieNum=function(t,e,n){if(t=xm(this.context,t),e=gm(this.context,e),n=xm(this.context,n),t&&0===t.toLowerCase().indexOf("fscommand:"))return this.fscommand(t.substring(10));if(""!=t){var i=this.context.globals._addRoot(e,new yl(new rl(Ng._scenegraphFactory)));0!==t.indexOf("http://")&&0!==t.indexOf("https://")&&(t=this.context.globals.SWF_BASE_URL+t),i.adapter.loadMovie(t,n)}else this.context.globals._removeRoot(e)},t.prototype.loadVariables=function(t,e,n){void 0===n&&(n=""),t=xm(this.context,t),n=xm(this.context,n);var i=this.context.resolveTarget(e);i&&this._loadVariables(i,t,n)},t.prototype.loadVariablesNum=function(t,e,n){void 0===n&&(n=""),t=xm(this.context,t),e=gm(this.context,e),n=xm(this.context,n);var i=this.context.resolveLevel(e);i&&this._loadVariables(i,t,n)},t.prototype._loadVariables=function(t,e,n){var i=this.context,r=new ft(e);n&&(r.method=n);var o=new lt;o.dataFormat="variables";var a=function(e){if(o.removeEventListener(X.LOAD_COMPLETE,a),o.dataFormat==ot.VARIABLES)for(var n in o.data)i.utils.setProperty(t,n,o.data[n]);t instanceof Y_&&Fm(i,t,"onData")};o.addEventListener(X.LOAD_COMPLETE,a),o.load(r)},t.prototype.mbchr=function(t){return(t=gm(this.context,t))?String.fromCharCode(t):""},t.prototype.mblength=function(t){return(""+t).length},t.prototype.mbord=function(t){return(""+t).charCodeAt(0)},t.prototype.mbsubstring=function(t,e,n){return e!==(0|e)||n!==(0|n)?"":(n<0&&(n=void 0),(""+t).substr(e=e<1?0:e-1,n))},t.prototype.nextFrame=function(){var t=this.context.resolveTarget(null).adaptee;t.stop(),++t.currentFrameIndex},t.prototype.nextScene=function(){},t.prototype.ord=function(t){return(""+t).charCodeAt(0)},t.prototype.play=function(){this.context.resolveTarget(null).play()},t.prototype.prevFrame=function(){var t=this.context.resolveTarget(null).adaptee;--t.currentFrameIndex,t.stop()},t.prototype.prevScene=function(){},t.prototype.print=function(t,e){},t.prototype.printAsBitmap=function(t,e){},t.prototype.printAsBitmapNum=function(t,e){},t.prototype.printNum=function(t,e){},t.prototype.random=function(t){return Ng.randomProvider?0|Ng.randomProvider.random()*(0|t):0|Math.random()*(0|t)},t.prototype.removeMovieClip=function(t){if(t){var e=this.context.resolveTarget(t);e&&e.removeMovieClip()}},t.prototype.startDrag=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.context.resolveTarget(t);i&&i.startDrag.apply(i,e)},t.prototype.stop=function(){this.context.resolveTarget(null).stop()},t.prototype._stopSoundsOnObjectsRecursivly=function(t){if(t.numChildren)for(var e=0;e<t.numChildren;e++)t.getChildAt(e).isAsset(yl)?t.getChildAt(e).stopSounds():this._stopSoundsOnObjectsRecursivly(t.getChildAt(e))},t.prototype.stopAllSounds=function(){E.stopAllSounds(),this._stopSoundsOnObjectsRecursivly(i_.avmStage.root)},t.prototype.stopDrag=function(){Y_.currentDraggedMC&&Y_.currentDraggedMC.stopDrag()},t.prototype.substring=function(t,e,n){return this.mbsubstring(t,e,n)},t.prototype.toggleHighQuality=function(){},t.prototype.trace=function(t){if(Ng.tracelevel!=Rg.NONE){var e,n=!1;switch(typeof t){case"undefined":e="undefined";break;case"string":n=(e=t).length>0&&"!"==e[0];break;default:e=ym(this.context,t)}(Ng.tracelevel!=Rg.IMPORTANT||n)&&console.log("%cAVM1 trace: %c "+e+" ","color: #054996","background: #eee; color: #054996")}},t.prototype.unloadMovie=function(t){var e=this.context.resolveTarget(t);e&&e.unloadMovie()},t.prototype.unloadMovieNum=function(t){0!==(t=mm(this.context,t))&&this.context.globals._removeRoot(t)},t}(),kg=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._initializePrototype=function(){Om(this,{constructor:{value:this.context.builtins.Object,writable:!0},valueOf:{value:this._valueOf,writable:!0},toString:{value:this._toString,writable:!0},addProperty:{value:this.addProperty},hasOwnProperty:{value:this.hasOwnProperty},isPropertyEnumerable:{value:this.isPropertyEnumerable},isPrototypeOf:{value:this.isPrototypeOf},unwatch:{value:this.unwatch},watch:{value:this.watch}})},e.prototype._valueOf=function(){return this},e.prototype._toString=function(){return wm(this)?"[type "+bm(this)+"]":"[object "+bm(this)+"]"},e.prototype.addProperty=function(t,e,n){if("string"!=typeof t||""===t)return!1;if(!wm(e))return!1;if(!wm(n)&&null!==n)return!1;var i=this.alGetOwnProperty(t);return!(i&&2&i.flags)&&(this.alSetOwnProperty(t,new Lf(128,null,e,n||void 0)),!0)},e.prototype.hasOwnProperty=function(t){return this.alHasOwnProperty(t)},e.prototype.isPropertyEnumerable=function(t){return!(1&this.alGetProperty(t).flags)},e.prototype.isPrototypeOf=function(t){return Dm(this.context,this,t)},e.prototype.unwatch=function(t){return t=xm(this.context,t),this.alRemotePropertyWatcher(t)},e.prototype.watch=function(t,e,n){return t=xm(this.context,t),!!wm(e)&&this.alAddPropertyWatcher(t,e,n)},e}(Rf),Ug=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Function.alGetPrototypeProperty(),Om(n,{prototype:{value:e.builtins.Object.alGetPrototypeProperty()},registerClass:{value:n.registerClass}}),n}return o(e,t),e.prototype.registerClass=function(t,e){this.context.registerClass(t,e)},e.prototype.alConstruct=function(t){if(t){var e=t[0];if(e instanceof Rf)return e;switch(typeof e){case"string":case"boolean":case"number":return Am(this.context,e)}}return vm(this.context)},e.prototype.alCall=function(t,e){return e&&null!==e[0]&&void 0!==e[0]?Am(this.context,e[0]):vm(this.context)},e}(Nf),Vg=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._initializePrototype=function(){var t=this.context;this.alPrototype=t.builtins.Object.alGetPrototypeProperty(),Om(this,{constructor:{value:t.builtins.Function,writable:!0},call:this.call,apply:this.apply})},e.prototype.call=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return um(this,Nf).alCall(t,e)},e.prototype.apply=function(t,e){var n=um(this,Nf),i=e?um(e,Zg).value:void 0;return n.alCall(t,i)},e}(Rf),jg=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Function.alGetPrototypeProperty(),Om(n,{prototype:{value:e.builtins.Function.alGetPrototypeProperty()}}),n}return o(e,t),e.prototype.alConstruct=function(t){return t?t[0]:void 0},e.prototype.alCall=function(t,e){return e?e[0]:void 0},e}(Nf),Gg=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.Boolean.alGetPrototypeProperty(),i.alSetOwnConstructorProperty(e.builtins.Boolean),i.value=n,i}return o(e,t),e.prototype.valueOf=function(){return this.value},e}(Rf),Qg=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(n,{constructor:{value:e.builtins.Boolean,writable:!0},valueOf:{value:n._valueOf,writable:!0},toString:{value:n._toString,writable:!0}}),n}return o(e,t),e.prototype._valueOf=function(){return um(this,Gg).value},e.prototype._toString=function(){return um(this,Gg).value?"true":"false"},e}(Rf),zg=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Function.alGetPrototypeProperty(),Om(n,{prototype:{value:new Qg(e)}}),n}return o(e,t),e.prototype.alConstruct=function(t){var e=!!t&&fm(this.context,t[0]);return new Gg(this.context,e)},e.prototype.alCall=function(t,e){return!!e&&fm(this.context,e[0])},e}(Nf),Hg=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.Number.alGetPrototypeProperty(),i.alSetOwnConstructorProperty(e.builtins.Number),i.value=n,i}return o(e,t),e.prototype.valueOf=function(){return this.value},e}(Rf),Xg=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(n,{constructor:{value:e.builtins.Number,writable:!0},valueOf:{value:n._valueOf,writable:!0},toString:{value:n._toString,writable:!0}}),n}return o(e,t),e.prototype._valueOf=function(){return um(this,Hg).value},e.prototype._toString=function(t){return um(this,Hg).value.toString(t||10)},e}(Rf),Yg=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Function.alGetPrototypeProperty(),Om(n,{prototype:{value:new Xg(e)},MAX_VALUE:Number.MAX_VALUE,MIN_VALUE:Number.MIN_VALUE,NaN:Number.NaN,NEGATIVE_INFINITY:Number.NEGATIVE_INFINITY,POSITIVE_INFINITY:Number.POSITIVE_INFINITY}),n}return o(e,t),e.prototype.alConstruct=function(t){var e=t?_m(this.context,t[0]):0;return new Hg(this.context,e)},e.prototype.alCall=function(t,e){return e?_m(this.context,e[0]):0},e}(Nf),qg=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.String.alGetPrototypeProperty(),i.alSetOwnConstructorProperty(e.builtins.String),i.value=n,i}return o(e,t),e.prototype.toString=function(){return this.value},e}(Rf),Kg=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(n,{constructor:{value:e.builtins.String,writable:!0},valueOf:{value:n._valueOf,writable:!0},toString:{value:n._toString,writable:!0},length:{get:n.getLength},charAt:{value:n.charAt,writable:!0},charCodeAt:{value:n.charCodeAt,writable:!0},concat:{value:n.concat,writable:!0},indexOf:{value:n.indexOf,writable:!0},lastIndexOf:{value:n.lastIndexOf,writable:!0},slice:{value:n.slice,writable:!0},split:{value:n.split,writable:!0},substr:{value:n.substr,writable:!0},substring:{value:n.substring,writable:!0},toLowerCase:{value:n.toLowerCase,writable:!0},toUpperCase:{value:n.toUpperCase,writable:!0}}),n}return o(e,t),e.prototype._valueOf=function(){return um(this,qg).value},e.prototype._toString=function(){return um(this,qg).value},e.prototype.getLength=function(){return um(this,qg).value.length},e.prototype.charAt=function(t){return ym(this.context,this).charAt(gm(this.context,t))},e.prototype.charCodeAt=function(t){return ym(this.context,this).charCodeAt(gm(this.context,t))},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[ym(this.context,this)],i=0;i<t.length;++i)n.push(ym(this.context,t[i]));return n.join("")},e.prototype.indexOf=function(t,e){var n=ym(this.context,this);return t=ym(this.context,t),e=gm(this.context,e),n.indexOf(t,e)},e.prototype.lastIndexOf=function(t,e){var n=ym(this.context,this);return t=ym(this.context,t),(e=arguments.length<2?NaN:_m(this.context,e))<0?-1:n.lastIndexOf(t,isNaN(e)?void 0:e)},e.prototype.slice=function(t,e){if(0!==arguments.length){var n=ym(this.context,this);return t=gm(this.context,t),e=void 0===e?void 0:gm(this.context,e),n.slice(t,e)}},e.prototype.split=function(t,e){var n=ym(this.context,this);return void 0!==t?(t=ym(this.context,t),e=(void 0===e?-1:mm(this.context,e))>>>0,new Zg(this.context,n.split(t,e))):new Zg(this.context,[n])},e.prototype.substr=function(t,e){var n=ym(this.context,this),i=n.length;if(t=gm(this.context,t),e=void 0===e?i:gm(this.context,e),t<0&&(t=Math.max(0,i+t)),e<0){if(-e<=t)return"";e=Math.max(0,i+e)}return n.substr(t,e)},e.prototype.substring=function(t,e){var n=ym(this.context,this);return(t=gm(this.context,t))>=n.length?"":(e=void 0===e?void 0:gm(this.context,e),n.substring(t,e))},e.prototype.toLowerCase=function(){return ym(this.context,this).toLowerCase()},e.prototype.toUpperCase=function(){return ym(this.context,this).toUpperCase()},e}(Rf),Wg=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Function.alGetPrototypeProperty(),Om(n,{prototype:{value:new Kg(e)},fromCharCode:{value:n.fromCharCode}}),n}return o(e,t),e.prototype.alConstruct=function(t){var e=t?ym(this.context,t[0]):"";return new qg(this.context,e)},e.prototype.alCall=function(t,e){return e?ym(this.context,e[0]):""},e.prototype.fromCharCode=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e=e.map((function(e){return 65535&mm(t.context,e)})),String.fromCharCode.apply(String,e)},e}(Nf),Jg=new Lf(64,void 0),Zg=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.Array.alGetPrototypeProperty(),i.alSetOwnConstructorProperty(e.builtins.Array),i.value=n,i}return o(e,t),e.prototype.alGetOwnProperty=function(e){if(Im(this.context,e)){var n=mm(this.context,e);if(Object.getOwnPropertyDescriptor(this.value,n))return Jg.value=this.value[n],Jg}return t.prototype.alGetOwnProperty.call(this,e)},e.prototype.alSetOwnProperty=function(e,n){if(Im(this.context,e)){var i=mm(this.context,e);if(!(64&n.flags)||1&n.flags||2&n.flags)throw new Error("Special property is non-supported for array");this.value[i]=n.value}else t.prototype.alSetOwnProperty.call(this,e,n)},e.prototype.alDeleteOwnProperty=function(e){if(Im(this.context,e)){var n=mm(this.context,e);delete this.value[n]}else t.prototype.alDeleteOwnProperty.call(this,e)},e.prototype.alGetOwnPropertiesKeys=function(){var e=t.prototype.alGetOwnPropertiesKeys.call(this),n=[];for(var i in this.value)n.push(i);return n.concat(e)},e.mapToJSArray=function(t,n,i){if(t instanceof e)return t.value.map(n,i);if(!Pm(t.context,t))throw new Error("Invalid type");var r=[];return Bm(t.context,t,(function(t,e){r.push(n.call(i,t,e))})),r},e}(Rf);!function(t){t[t.CASEINSENSITIVE=1]="CASEINSENSITIVE",t[t.DESCENDING=2]="DESCENDING",t[t.UNIQUESORT=4]="UNIQUESORT",t[t.RETURNINDEXEDARRAY=8]="RETURNINDEXEDARRAY",t[t.NUMERIC=16]="NUMERIC"}(Pg||(Pg={}));var $g=function(t,e){var n=um(t,Zg).value;if(wm(e)){var i=[void 0,void 0];n.sort((function(t,n){return i[0]=t,i[1]=n,e.alCall(null,i)}))}else{var r="number"==typeof e&&(e&Pg.NUMERIC||-1==e),o="number"==typeof e&&e&Pg.DESCENDING;if(r)n.sort((function(t,e){for(;t instanceof Zg;)(t=um(t,Zg).value)&&t.length>0&&(t=t[0]);for(;e instanceof Zg;)(e=um(e,Zg).value)&&e.length>0&&(e=e[0]);return t-e}));else{for(var a=n.length;a>0;)void 0!==n[--a]&&null!==n[a]||(n[a]="00000000000AwayInternal");for(n.sort((function(t,e){for(;t instanceof Zg;)(t=um(t,Zg).value)&&t.length>0&&(t=t[0]);for(;e instanceof Zg;)(e=um(e,Zg).value)&&e.length>0&&(e=e[0]);return t<e?-1:1})),a=n.length;a>0;)"00000000000AwayInternal"==n[--a]&&(n[a]=void 0)}o&&n.reverse()}return t},tm=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(n,{constructor:{value:e.builtins.Array,writable:!0},join:{value:n.join,writable:!0},length:{get:n.getLength,set:n.setLength},concat:{value:n.concat,writable:!0},pop:{value:n.pop,writable:!0},push:{value:n.push,writable:!0},reverse:{value:n.reverse,writable:!0},shift:{value:n.shift,writable:!0},slice:{value:n.slice,writable:!0},splice:{value:n.splice,writable:!0},sort:{value:n.sort,writable:!0},sortOn:{value:n.sortOn,writable:!0},toString:{value:n._toString,writable:!0},unshift:{value:n.unshift,writable:!0}}),n}return o(e,t),e.prototype._toString=function(){var t,e=this.alGet("length"),n=0,i="";for(n=0;n<e;n++)i+=void 0!==(t=this.alGet(n))?ym(this.context,t)+(n==e-1?"":","):n==e-1?"":",";return i},e.prototype.getLength=function(){return um(this,Zg).value.length},e.prototype.setLength=function(t){(null===t&&(t=0),op(t))&&(t=mm(this.context,t)>>>0,um(this,Zg).value.length=t)},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof Zg){for(var n=um(this,Zg).value,i=0;i<t.length;i++)t[i]instanceof Zg&&(t[i]=um(t[i],Zg).value);return new Zg(this.context,Array.prototype.concat.apply(n,t))}for(var r=[],o=this,a=Pm(this.context,this),s=0;a?Bm(this.context,o,(function(t){return r.push(t)})):r.push(ym(this.context,o)),!(s>=t.length);)o=t[s++],a=Tm(this.context,o);return new Zg(this.context,r)},e.prototype.join=function(t){if(t=void 0===t?",":xm(this.context,t),this instanceof Zg){var e=um(this,Zg).value;if(0===e.length)return"";if(e.every((function(t){return!(t instanceof Rf)})))return e.join(t)}var n=this.context,i=mm(n,this.alGet("length"))>>>0;if(0===i)return"";for(var r=[],o=0;o<i;o++){var a=this.alGet(o);r[o]=null==a?"":xm(n,a)}return r.join(t)},e.prototype.pop=function(){if(this instanceof Zg)return um(this,Zg).value.pop();var t=mm(this.context,this.alGet("length"))>>>0;if(0!==t){var e=t-1,n=this.alGet(e);return this.alDeleteProperty(e),this.alPut("length",e),n}},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof Zg){var n=um(this,Zg).value;return Array.prototype.push.apply(n,t)}for(var i=mm(this.context,this.alGet("length"))>>>0,r=0;r<t.length;r++)this.alPut(i,t[r]),i++;return this.alPut("length",i),i},e.prototype.reverse=function(){var t=[],e=this.alGet("length"),n=0;for(n=0;n<e;n++)t[n]=this.alGet(n);for(n=e-1;n>=0;)this.alPut(e-1-n,t[n]),n--;return this.value},e.prototype.shift=function(){if(this instanceof Zg)return um(this,Zg).value.shift();var t=mm(this.context,this.alGet("length"))>>>0;if(0!==t){for(var e=this.alGet(0),n=1;n<t;n++)this.alHasProperty(n)?this.alPut(n-1,this.alGet(n)):this.alDeleteProperty(n-1);return this.alDeleteProperty(t-1),this.alPut("length",t-1),e}},e.prototype.slice=function(t,e){if(t=gm(this.context,t),e=void 0!==e?gm(this.context,e):void 0,this instanceof Zg){var n=um(this,Zg).value;return new Zg(this.context,n.slice(t,e))}var i=[],r=mm(this.context,this.alGet("length"))>>>0;t=t<0?Math.max(r+t,0):Math.min(r,t),e=void 0===e?r:e<0?Math.max(r+e,0):Math.min(r,e);for(var o=t,a=0;o<e;o++,a++)this.alHasProperty(o)&&(i[a]=this.alGet(o));return new Zg(this.context,i)},e.prototype.splice=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];t=gm(this.context,t);var r=mm(this.context,this.alGet("length"))>>>0;if(t=t<0?Math.max(r+t,0):Math.min(r,t),e=e||"number"==typeof e?gm(this.context,e):r-t,this instanceof Zg){var o=um(this,Zg).value;return new Zg(this.context,Array.prototype.splice.apply(o,[t,e].concat(n)))}for(var a=[],s=0;s<e;s++)this.alHasProperty(t+s)&&(a[s]=this.alGet(t+s));var l=n.length-e;if(l<0){for(s=t-l;s<r;s++)this.alHasProperty(s)?this.alPut(s+l,this.alGet(s)):this.alDeleteProperty(s+l);for(s=l;s<0;s++)this.alDeleteProperty(r+s)}else if(l>0)for(s=r-1;s>=t+l;s--)this.alHasProperty(s)?this.alPut(s+l,this.alGet(s)):this.alDeleteProperty(s+l);for(s=0;s<n.length;s++)this.alPut(t+s,n[s]);return this.alPut("length",r+l),new Zg(this.context,a)},e.prototype.sort=function(t){return $g(this,t)},e.prototype.sortOn=function(t,e){var n=this.context,i=[],r=[];if("string"==typeof t)i=[ym(n,t)],r=[mm(n,e)];else{if(!Tm(n,t))return $g(this,e);i=[],r=[];var o=Tm(n,e)?e:null,a=gm(n,t.alGet("length"));o&&a!==gm(n,o.alGet("length"))&&(o=null);for(var s=0;s<a;s++)i.push(ym(n,t.alGet(s))),r.push(o?mm(n,o.alGet(s)):0)}r[0];return um(this,Zg).value.sort((function(t,e){for(;t instanceof Zg;)(t=um(t,Zg).value)&&t.length>0&&(t=t[0]);for(;e instanceof Zg;)(e=um(e,Zg).value)&&e.length>0&&(e=e[0]);for(var o=Am(n,t),a=Am(n,e),s=0;s<i.length;s++){var l=o.alGet(i[s]),u=a.alGet(i[s]),c=void 0;if(r[s]&Pg.NUMERIC){var h=_m(n,l),p=_m(n,u);c=h<p?-1:h>p?1:0}else{var d=ym(n,l),f=ym(n,u);r[s]&Pg.CASEINSENSITIVE&&(d=d.toLowerCase(),f=f.toLowerCase()),c=d<f?-1:d>f?1:0}if(0!==c)return r[s]&Pg.DESCENDING?-c:c}return 0})),this},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof Zg){var n=um(this,Zg).value;return Array.prototype.unshift.apply(n,t)}for(var i=mm(this.context,this.alGet("length"))>>>0,r=t.length,o=i-1;o>=0;o--)this.alHasProperty(o)?this.alPut(o+r,this.alGet(o)):this.alDeleteProperty(o+r);for(o=0;o<t.length;o++)this.alPut(o,t[o]);return i+=r,this.alPut("length",i),i},e}(Rf),em=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Function.alGetPrototypeProperty(),Om(n,{prototype:{value:new tm(e)}}),Om(n,{NUMERIC:{value:Pg.NUMERIC}}),Om(n,{DESCENDING:{value:Pg.DESCENDING}}),n}return o(e,t),e.prototype.alConstruct=function(t){if(!t)return new Zg(this.context,[]);if(1===t.length&&"number"==typeof t[0]){var e=t[0];if(e>>>0!==e)throw new Error("Range error");return new Zg(this.context,new Array(e))}return new Zg(this.context,t)},e.prototype.alCall=function(t,e){return this.alConstruct.apply(this,e)},e}(Nf),nm=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(n,{E:Math.E,LN10:Math.LN10,LN2:Math.LN2,LOG10E:Math.LOG10E,LOG2E:Math.LOG2E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,abs:n.abs,acos:n.acos,asin:n.asin,atan:n.atan,atan2:n.atan2,ceil:n.ceil,cos:n.cos,exp:n.exp,floor:n.floor,log:n.log,max:n.max,min:n.min,pow:n.pow,random:n.random,round:n.round,sin:n.sin,sqrt:n.sqrt,tan:n.tan}),n}return o(e,t),e.prototype.abs=function(t){return Math.abs(_m(this.context,t))},e.prototype.acos=function(t){return Math.acos(_m(this.context,t))},e.prototype.asin=function(t){return Math.asin(_m(this.context,t))},e.prototype.atan=function(t){return Math.atan(_m(this.context,t))},e.prototype.atan2=function(t,e){return Math.atan2(_m(this.context,t),_m(this.context,e))},e.prototype.ceil=function(t){return Math.ceil(_m(this.context,t))},e.prototype.cos=function(t){return Math.cos(_m(this.context,t))},e.prototype.exp=function(t){return Math.exp(_m(this.context,t))},e.prototype.floor=function(t){return Math.floor(_m(this.context,t))},e.prototype.log=function(t){return Math.log(_m(this.context,t))},e.prototype.max=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e=e.map((function(e){return _m(t.context,e)})),Math.max.apply(null,e)},e.prototype.min=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e=e.map((function(e){return _m(t.context,e)})),Math.min.apply(null,e)},e.prototype.pow=function(t,e){return Math.pow(_m(this.context,t),_m(this.context,e))},e.prototype.random=function(){return Ng.randomProvider?Ng.randomProvider.random():Math.random()},e.prototype.round=function(t){return Math.round(_m(this.context,t))},e.prototype.sin=function(t){return Math.sin(_m(this.context,t))},e.prototype.sqrt=function(t){return Math.sqrt(_m(this.context,t))},e.prototype.tan=function(t){return Math.tan(_m(this.context,t))},e}(Rf),im=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.Date.alGetPrototypeProperty(),i.alSetOwnConstructorProperty(e.builtins.Date),i.value=n,i}return o(e,t),e.prototype.alDefaultValue=function(e){return void 0!==e?t.prototype.alDefaultValue.call(this,e):this.context.swfVersion>=6?t.prototype.alDefaultValue.call(this,1):t.prototype.alDefaultValue.call(this,0)},e}(Rf),rm=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(n,{constructor:{value:e.builtins.Date,writable:!0},valueOf:{value:n._valueOf,writable:!0},toString:{value:n._toString,writable:!0},toLocaleString:{value:n._toLocaleString,writable:!0},toDateString:{value:n.toDateString,writable:!0},toTimeString:{value:n.toTimeString,writable:!0},toLocaleDateString:{value:n.toLocaleDateString,writable:!0},toLocaleTimeString:{value:n.toLocaleTimeString,writable:!0},getTime:{value:n.getTime,writable:!0},getFullYear:{value:n.getFullYear,writable:!0},getUTCFullYear:{value:n.getUTCFullYear,writable:!0},getMonth:{value:n.getMonth,writable:!0},getUTCMonth:{value:n.getUTCMonth,writable:!0},getDate:{value:n.getDate,writable:!0},getUTCDate:{value:n.getUTCDate,writable:!0},getDay:{value:n.getDay,writable:!0},getUTCDay:{value:n.getUTCDay,writable:!0},getHours:{value:n.getHours,writable:!0},getUTCHours:{value:n.getUTCHours,writable:!0},getMinutes:{value:n.getMinutes,writable:!0},getUTCMinutes:{value:n.getUTCMinutes,writable:!0},getSeconds:{value:n.getSeconds,writable:!0},getUTCSeconds:{value:n.getUTCSeconds,writable:!0},getMilliseconds:{value:n.getMilliseconds,writable:!0},getUTCMilliseconds:{value:n.getUTCMilliseconds,writable:!0},getTimezoneOffset:{value:n.getTimezoneOffset,writable:!0},setTime:{value:n.setTime,writable:!0},setMilliseconds:{value:n.setMilliseconds,writable:!0},setUTCMilliseconds:{value:n.setUTCMilliseconds,writable:!0},setSeconds:{value:n.setSeconds,writable:!0},setUTCSeconds:{value:n.setUTCSeconds,writable:!0},setMinutes:{value:n.setMinutes,writable:!0},setUTCMinutes:{value:n.setUTCMinutes,writable:!0},setHours:{value:n.setHours,writable:!0},setUTCHours:{value:n.setUTCHours,writable:!0},setDate:{value:n.setDate,writable:!0},setUTCDate:{value:n.setUTCDate,writable:!0},setMonth:{value:n.setMonth,writable:!0},setUTCMonth:{value:n.setUTCMonth,writable:!0},setFullYear:{value:n.setFullYear,writable:!0},setUTCFullYear:{value:n.setUTCFullYear,writable:!0},toUTCString:{value:n.toUTCString,writable:!0}}),n}return o(e,t),e.prototype._valueOf=function(){return um(this,im).value.valueOf()},e.prototype._toString=function(){return um(this,im).value.toString()},e.prototype._toLocaleString=function(){return um(this,im).value.toLocaleString()},e.prototype.toDateString=function(){return um(this,im).value.toDateString()},e.prototype.toTimeString=function(){return um(this,im).value.toTimeString()},e.prototype.toLocaleDateString=function(){return um(this,im).value.toLocaleDateString()},e.prototype.toLocaleTimeString=function(){return um(this,im).value.toLocaleTimeString()},e.prototype.getTime=function(){return um(this,im).value.getTime()},e.prototype.getFullYear=function(){return um(this,im).value.getFullYear()},e.prototype.getUTCFullYear=function(){return um(this,im).value.getUTCFullYear()},e.prototype.getMonth=function(){return um(this,im).value.getMonth()},e.prototype.getUTCMonth=function(){return um(this,im).value.getUTCMonth()},e.prototype.getDate=function(){return um(this,im).value.getDate()},e.prototype.getUTCDate=function(){return um(this,im).value.getUTCDate()},e.prototype.getDay=function(){return um(this,im).value.getDay()},e.prototype.getUTCDay=function(){return um(this,im).value.getUTCDay()},e.prototype.getHours=function(){return um(this,im).value.getHours()},e.prototype.getUTCHours=function(){return um(this,im).value.getUTCHours()},e.prototype.getMinutes=function(){return um(this,im).value.getMinutes()},e.prototype.getUTCMinutes=function(){return um(this,im).value.getUTCMinutes()},e.prototype.getSeconds=function(){return um(this,im).value.getSeconds()},e.prototype.getUTCSeconds=function(){return um(this,im).value.getUTCSeconds()},e.prototype.getMilliseconds=function(){return um(this,im).value.getMilliseconds()},e.prototype.getUTCMilliseconds=function(){return um(this,im).value.getUTCMilliseconds()},e.prototype.getTimezoneOffset=function(){return um(this,im).value.getTimezoneOffset()},e.prototype.setTime=function(t){return t=_m(this.context,t),um(this,im).value.setTime(t)},e.prototype.setMilliseconds=function(t){return t=_m(this.context,t),um(this,im).value.setMilliseconds(t)},e.prototype.setUTCMilliseconds=function(t){return t=_m(this.context,t),um(this,im).value.setUTCMilliseconds(t)},e.prototype.setSeconds=function(t,e){return t=_m(this.context,t),arguments.length<=1?um(this,im).value.setSeconds(t):(e=_m(this.context,e),um(this,im).value.setSeconds(t,e))},e.prototype.setUTCSeconds=function(t,e){return t=_m(this.context,t),arguments.length<=1?um(this,im).value.setUTCSeconds(t):(e=_m(this.context,e),um(this,im).value.setUTCSeconds(t,e))},e.prototype.setMinutes=function(t,e,n){return t=_m(this.context,t),arguments.length<=1?um(this,im).value.setMinutes(t):(e=_m(this.context,e),arguments.length<=2?um(this,im).value.setMinutes(t,e):(n=_m(this.context,n),um(this,im).value.setMinutes(t,e,n)))},e.prototype.setUTCMinutes=function(t,e,n){return t=_m(this.context,t),arguments.length<=1?um(this,im).value.setUTCMinutes(t):(e=_m(this.context,e),arguments.length<=2?um(this,im).value.setUTCMinutes(t,e):(n=_m(this.context,n),um(this,im).value.setUTCMinutes(t,e,n)))},e.prototype.setHours=function(t,e,n,i){return t=_m(this.context,t),arguments.length<=1?um(this,im).value.setHours(t):(e=_m(this.context,e),arguments.length<=2?um(this,im).value.setHours(t,e):(n=_m(this.context,n),arguments.length<=3?um(this,im).value.setHours(t,e,n):(i=_m(this.context,i),um(this,im).value.setHours(t,e,n,i))))},e.prototype.setUTCHours=function(t,e,n,i){return t=_m(this.context,t),arguments.length<=1?um(this,im).value.setUTCHours(t):(e=_m(this.context,e),arguments.length<=2?um(this,im).value.setUTCHours(t,e):(n=_m(this.context,n),arguments.length<=3?um(this,im).value.setUTCHours(t,e,n):(i=_m(this.context,i),um(this,im).value.setUTCHours(t,e,n,i))))},e.prototype.setDate=function(t){return t=_m(this.context,t),um(this,im).value.setDate(t)},e.prototype.setUTCDate=function(t){return t=_m(this.context,t),um(this,im).value.setUTCDate(t)},e.prototype.setMonth=function(t,e){return t=_m(this.context,t),arguments.length<=1?um(this,im).value.setMonth(t):(e=_m(this.context,e),um(this,im).value.setMonth(t,e))},e.prototype.setUTCMonth=function(t,e){return t=_m(this.context,t),arguments.length<=1?um(this,im).value.setUTCMonth(t):(e=_m(this.context,e),um(this,im).value.setUTCMonth(t,e))},e.prototype.setFullYear=function(t,e,n){return t=_m(this.context,t),arguments.length<=1?um(this,im).value.setFullYear(t):(e=_m(this.context,e),arguments.length<=2?um(this,im).value.setFullYear(t,e):(n=_m(this.context,n),um(this,im).value.setFullYear(t,e,n)))},e.prototype.setUTCFullYear=function(t,e,n){return t=_m(this.context,t),arguments.length<=1?um(this,im).value.setUTCFullYear(t):(e=_m(this.context,e),arguments.length<=2?um(this,im).value.setUTCFullYear(t,e):(n=_m(this.context,n),um(this,im).value.setUTCFullYear(t,e,n)))},e.prototype.toUTCString=function(){return um(this,im).value.toUTCString()},e}(Rf),om=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Function.alGetPrototypeProperty(),Om(n,{prototype:{value:new rm(e)},UTC:{value:n._UTC,writable:!0}}),n}return o(e,t),e.prototype.alConstruct=function(t){var e,n=this.context;switch(t.length){case 0:e=new Date;break;case 1:e=new Date(dm(n,t[0]));break;default:for(var i=[],r=0;r<t.length;r++)i.push(_m(n,t[r]));e=new Date(_m(n,t[0]),_m(n,t[1]),t.length>2?_m(n,t[2]):1,t.length>3?_m(n,t[3]):0,t.length>4?_m(n,t[4]):0,t.length>5?_m(n,t[5]):0,t.length>6?_m(n,t[6]):0)}return new im(n,e)},e.prototype.alCall=function(t,e){return Sm(this.alConstruct.apply(this,e),"toString")},e.prototype._UTC=function(t,e,n,i,r,o){var a=this.context;return Date.UTC(_m(a,arguments[0]),_m(a,arguments[1]),arguments.length>2?_m(a,arguments[2]):1,arguments.length>3?_m(a,arguments[3]):0,arguments.length>4?_m(a,arguments[4]):0,arguments.length>5?_m(a,arguments[5]):0,arguments.length>6?_m(a,arguments[6]):0)},e}(Nf),am=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alPrototype=e.builtins.Error.alGetPrototypeProperty(),i.alSetOwnConstructorProperty(e.builtins.Error),void 0!==n&&i.alPut("message",n),i}return o(e,t),e}(Rf),sm=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Object.alGetPrototypeProperty(),Om(n,{constructor:{value:e.builtins.Error,writable:!0},name:{value:"Error",writable:!0},message:{value:"Error",writable:!0},toString:{value:n._toString,writable:!0}}),n}return o(e,t),e.prototype._toString=function(){return this.alGet("message")},e}(Rf),lm=function(t){function e(e){var n=t.call(this,e)||this;return n.alPrototype=e.builtins.Function.alGetPrototypeProperty(),Om(n,{prototype:{value:new sm(e)}}),n}return o(e,t),e.prototype.alConstruct=function(t){var e=t&&void 0!==t[0]?xm(this.context,t[0]):void 0;return new am(this.context,e)},e.prototype.alCall=function(t,e){var n=e&&void 0!==e[0]?xm(this.context,e[0]):void 0;return new am(this.context,n)},e}(Nf);function um(t,e){if(t instanceof e)return t;throw new Error("Invalid type")}var cm=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r._fn=n,i&&(r._ctor=i),r}return o(e,t),e.prototype.alConstruct=function(t){if(!this._ctor)throw new Error("not a constructor");return this._ctor.apply(this,t)},e.prototype.alCall=function(t,e){if(!this._fn)throw new Error("not callable");return this._fn.apply(t,e)},e}(Nf),hm=function(t){function e(e){var n=t.call(this,e)||this,i=new Rf(e);return i.alPrototype=e.builtins.Object.alGetPrototypeProperty(),i.alSetOwnProperty("constructor",new Lf(67)),n.alSetOwnPrototypeProperty(i),n}return o(e,t),e.prototype.alConstruct=function(t){var e=new Rf(this.context),n=this.alGetPrototypeProperty();n instanceof Rf||(n=this.context.builtins.Object.alGetPrototypeProperty()),e.alPrototype=n,e.alSetOwnConstructorProperty(this);var i=this.alCall(e,t);return i instanceof Rf?i:e},e}(Nf);function pm(t){}function dm(t,e,n){var i=typeof e;if("string"===i||"number"===i||"undefined"===i)return e;if(!(e instanceof Rf))return e;var r=e;return void 0!==n?r.alDefaultValue(n):r.alDefaultValue()}function fm(t,e){var n=t.swfVersion>=7;switch(typeof e){case"undefined":return!1;case"object":return null!==e;case"boolean":return e;case"string":return n?!!e:!isNaN(+e)&&0!=+e;case"number":return!!e}}function _m(t,e){switch("object"==typeof e&&null!==e&&(e=dm(0,e,0)),typeof e){case"undefined":return t.swfVersion>=7?NaN:0;case"object":return null===e?t.swfVersion>=7?NaN:0:void 0!==e.nodeValue?parseFloat(e.nodeValue):t.swfVersion>=5?NaN:0;case"boolean":return e?1:0;case"number":return e;case"string":return""===e&&t.swfVersion<5?0:""===e?NaN:+e}}function gm(t,e){var n=_m(t,e);return isNaN(n)?0:0===n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY?n:n<0?Math.ceil(n):Math.floor(n)}function mm(t,e){return 0|_m(t,e)}function ym(t,e){switch("object"==typeof e&&null!==e&&(e=dm(0,e,1)),typeof e){case"undefined":return t.swfVersion>=7?"undefined":"";case"object":if(null===e)return"null";if(e&&e instanceof Array){for(var n="",i=0;i<e.length;i++)n+=ym(t,e[i]),n+=i===e.length-1?"":",";return n}return"[type "+bm(e)+"]";case"boolean":return e?"true":"false";case"number":if((0|e)===e)return""+e;if(isFinite(e)){var r=Math.floor(Math.log10(Math.abs(+e)));if(Math.abs(r)<14){var o=Math.pow(10,14-r);e=Math.round(e*o)/o}}return""+e;case"string":return e}}function Am(t,e){switch(typeof e){case"undefined":throw new pm;case"object":if(null===e)throw new pm;return Array.isArray(e)?new Zg(t,e):e;case"boolean":return new Gg(t,e);case"number":return new Hg(t,e);case"string":return new qg(t,e)}}function vm(t){var e=new Rf(t);return e.alPrototype=t.builtins.Object.alGetPrototypeProperty(),e.alSetOwnConstructorProperty(t.builtins.Object),e}function bm(t){return t instanceof Nf?"Function":"Object"}function xm(t,e){return e instanceof Rf?ym(t,e):"string"==typeof e?e:null==e?null:e+""}function Cm(t,e){if(!ap(e))return _m(t,e)}function Im(t,e){return op(e instanceof Rf?ym(t,e):e)}function Em(t,e,n){t.alGetKeys().forEach(e,n)}function wm(t){return t instanceof Nf}function Sm(t,e,n){t.alGet(e).alCall(t,n)}function Dm(t,e,n){if(!(e instanceof Rf))return!1;if(!(n instanceof Rf))return!1;for(var i=n.alGetPrototypeProperty(),r=e;r;r=r.alPrototype)if(r===i)return!0;return!1}function Tm(t,e){return Dm(0,e,t.builtins.Array)}function Pm(t,e){if(!(e instanceof Rf))return!1;var n=gm(t,e.alGet("length"));return!(isNaN(n)||n<0||n>=4294967296)}function Bm(t,e,n,i){void 0===i&&(i=null);var r=gm(t,e.alGet("length"));if(!(isNaN(r)||r>=4294967296))for(var o=0;o<r;o++)n.call(i,e.alGet(o),o)}function Om(t,e){var n=t.context;Object.getOwnPropertyNames(e).forEach((function(i){var r,o,a,s=e[i],l=0;"object"==typeof s?(s.get||s.set?(o=s.get?new cm(n,s.get):void 0,a=s.set?new cm(n,s.set):void 0,l|=128):("function"==typeof(r=s.value)&&(r=new cm(n,r)),l|=64,s.writable||(l|=4)),s.enumerable||(l|=1),s.configurable||(l|=2)):("function"==typeof(r=s)&&(r=new cm(n,r)),l|=71),t.alSetOwnProperty(i,new Lf(l,r,o,a))}))}pm.prototype=Object.create(Error.prototype);var Mm=16384;function Lm(t){return!!t.adaptee}function Rm(t){if(t.adaptee)return t.adaptee;if(!t._as3ObjectTemplate){for(var e=void 0,n=t.alPrototype;n&&!n.initAVM1SymbolInstance&&!(e=n._as3ObjectTemplate);)n=n.alPrototype;t._as3ObjectTemplate=Object.create(e||null)}return t._as3ObjectTemplate}var Nm=[void 0,"normal","layer","multiply","screen","lighten","darken","difference","add","subtract","invert","alpha","erase","overlay","hardlight"];function Fm(t,e,n,i){void 0===i&&(i=null);var r=e.alGet(n);r instanceof Nf&&r.alCall(e,i);var o=e.alGet("_listeners");if(o instanceof Zg){var a=null;o.value.forEach((function(t){t instanceof Rf&&(a=t.alGet(n))instanceof Nf&&a.alCall(t,i)}))}}var km=0;function Um(t,e,n){for(var i,r=t.alGetPrototypeProperty();r&&!r.initAVM1SymbolInstance;)r._as3ObjectTemplate&&!i&&(i=r._as3ObjectTemplate),r=r.alPrototype;var o=Object.create(r);if(r.initAVM1SymbolInstance.call(o,n,e),o.alPrototype=t.alGetPrototypeProperty(),o.alSetOwnConstructorProperty(t),e._as2Object=o,t.alCall(o),o.aCount=km++,i)for(var a in i)e[a]=i[a];return o}function Vm(t,e){return t?t._as2Object?t._as2Object:(t.isAsset(yl)?n=t.timeline.isButton?Um(e.globals.Button,t,e):Um(e.globals.MovieClip,t,e):t.isAsset(Ch)&&(n=Um(e.globals.TextField,t,e)),n&&(t._as2Object=n,t.adapter=n,n.adaptee=t),t._as2Object=n,n):null;var n}function jm(t,e,n,i,r){function o(e){if(!ap(e))return new cm(t,r?function(){var n=Array.prototype.slice.call(arguments,0);return n.unshift(t),e.apply(this,n)}:e)}void 0===r&&(r=!1),i&&i.forEach((function(t){if("#"!==t[t.length-1]){var i=function(t){for(var e,i=n;i;i=Object.getPrototypeOf(i))if(e=Object.getOwnPropertyDescriptor(i,t))return e;return null}(t);if(i&&!i.get&&!i.set){var r=i.value;"function"==typeof r&&(r=o(r));var a=new Lf(67,r);e.alSetOwnProperty(t,a)}}else{var s="get"+t[0].toUpperCase()+t.slice(1,-1),l=n[s],u="set"+t[0].toUpperCase()+t.slice(1,-1),c=n[u],h=new Lf(131,null,o(l),o(c));e.alSetOwnProperty(t.slice(0,-1),h)}}))}function Gm(t,e,n,i,r,o,a){var s=e?new cm(t,o||function(){},(function(){var e=new n(t);return e.alPrototype=l,e.alSetOwnConstructorProperty(s),a&&a.apply(e,arguments),e})):new Rf(t);jm(t,s,n,i,!0);var l=new n(t);return l.alPrototype=t.builtins.Object.alGetPrototypeProperty(),jm(t,l,n.prototype,r,!1),Om(s,{prototype:{value:l}}),Om(l,{constructor:{value:s,writable:!0}}),s}function Qm(t){var e=t<0?-1:1;t=Math.abs(t);var n=Math.floor(20*t)/20;return t>n&&t-n>.04&&(n+=.05,n=Math.round(20*n)/20),n*e}function zm(t){return Math.round(20*t)/20}function Hm(t){return t+1}function Xm(t){return t-1}function Ym(t,e){return e.context.executeActions(t,e)}var qm,Km=function(t){function e(n){var i=t.call(this)||this;return i.imageStore={},i.avm1Context=n,e._instance=i,i}return o(e,t),Object.defineProperty(e,"instance",{get:function(){return e._instance||console.log("Error. A instance of AVM1SceneGraphFactory must be created manually \t\t\t\tbefore accessing the singleton AVM1SceneGraphFactory._instance"),e._instance},enumerable:!1,configurable:!0}),e.prototype.createSprite=function(t){return new Zs},e.prototype.createDisplayObjectContainer=function(){return new Js},e.prototype.createMovieClip=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var n=new yl(t||new rl(this));return Vm(n,this.avm1Context),n._symbol=e,n},e.prototype.createTextField=function(){var t=new Ch;return t.multiline=!0,t.wordWrap=!0,Vm(t,this.avm1Context),t},e.prototype.createBillboard=function(t){return null},e.prototype.createImage2D=function(t,e,n,i,r){return void 0===n&&(n=!0),void 0===i&&(i=null),void 0===r&&(r=!0),new Le(t,e,n,i,r)},e.prototype.createFrameScripts=function(t,e,n,i){n=n.replace(/[^\w]/g,"");for(var r=[],o=0;o<t.length;o++){var a=t[o];a.data=this.avm1Context.actionsDataFactory.createActionsData(a,"script_"+name+"_"+i+"_frame_"+e+"_idx_"+o),r[r.length]=a}return r.length&&r.sort(this.compareAVM1FrameScripts),r},e.prototype.createChildInstanceForTimeline=function(t,e,n){_l.invalidAS3Constructors=!0;var i,r=this.awaySymbols[e];if(r.isAsset(zs))(i=Zs.getNewSprite(r.clone())).mouseEnabled=!1;else if(r.isAsset(Zs))(i=Zs.getNewSprite(r.graphics)).mouseEnabled=!1;else if(r.isAsset(nl))(i=nl.getNewMorphSprite(r.graphics.clone())).mouseEnabled=!1;else if(r.isAsset(Le)){var o=new Sc(r);o.alphaBlending=r.transparent,(i=ol.getNewBillboard(o)).mouseEnabled=!1}else i=r.adapter.clone(!1).adaptee;var a=t.placeObjectTagsForSessionIDs[n];return a&&(a.variableName||a.events&&a.events.length>0)&&(i.adapter.placeObjectTag=a,i.adapter.initEvents=a),i.partitionClass=yr,i._sessionID=n,i},e.prototype.compareAVM1FrameScripts=function(t,e){if(!t.precedence)return e.precedence?-1:0;if(!e.precedence)return 1;for(var n=0;n<t.precedence.length&&n<e.precedence.length&&t.precedence[n]===e.precedence[n];)n++;return n>=t.precedence.length?t.precedence.length===e.precedence.length?0:-1:n>=e.precedence.length?1:t.precedence[n]-e.precedence[n]},e}(wh),Wm=function(){return function(t,e,n,i){void 0===n&&(n=null),this.bytes=t,this.id=e,this.parent=n,this.encryptedData=i,this.debugPath=this.id,this.ir=null,this.compiled=null}}(),Jm=function(){function t(){this._cache=new WeakMap}return t.prototype.createActionsData=function(t,e,n){void 0===n&&(n=null);var i=t instanceof Uint8Array,r=i?t:t.actionsData,o=i?void 0:t.encryptedData,a=this._cache.get(r);return a||(a=new Wm(r,e,n,o),this._cache.set(r,a)),a},t}(),Zm=function(){function t(t){this.eventObservers={},this.assets={},this.awayAssets={},this.assetsSymbols=[],this.assetsClasses=[],this.staticStates=new WeakMap,this.swfVersion=t,this.globals=null,this.actionsDataFactory=new Jm,t>6?(this.isPropertyCaseSensitive=!0,this.normalizeName=this.normalizeNameCaseSensitive):(this.isPropertyCaseSensitive=!1,this._nameCache=Object.create(null),this.normalizeName=this.normalizeNameCaseInsensitive),this.builtins={},function(t){var e=t.builtins,n=new kg(t),i=new Rf(t);i.alSetOwnPrototypeProperty(n),e.Object=i;var r=new Vg(t),o=new Rf(t);o.alSetOwnPrototypeProperty(r),e.Function=o,n._initializePrototype(),r._initializePrototype(),e.Object=new Ug(t),e.Function=new jg(t),e.Boolean=new zg(t),e.Number=new Yg(t),e.String=new Wg(t),e.Array=new em(t),e.Date=new om(t),e.Math=new nm(t),e.Error=new lm(t)}(this)}return t.prototype.resolveTarget=function(t){},t.prototype.resolveRoot=function(){},t.prototype.checkTimeout=function(){},t.prototype.executeActions=function(t,e){},t.prototype.executeFunction=function(t,e,n){},t.prototype.normalizeNameCaseSensitive=function(t){switch(typeof t){case"number":case"string":return t;default:return ym(this,t)}},t.prototype.normalizeNameCaseInsensitive=function(t){switch(typeof t){case"number":return t.toString();case"string":break;default:t=ym(this,t)}var e=this._nameCache[t];return e||(e=t.toLowerCase(),this._nameCache[t]=e,e)},t.prototype._getEventPropertyObservers=function(t,e){this.isPropertyCaseSensitive||(t=t.toLowerCase());var n=this.eventObservers[t];return n||(e?(n=[],this.eventObservers[t]=n,n):null)},t.prototype.registerEventPropertyObserver=function(t,e){this._getEventPropertyObservers(t,!0).push(e)},t.prototype.unregisterEventPropertyObserver=function(t,e){var n=this._getEventPropertyObservers(t,!1);if(n){var i=n.indexOf(e);i<0||n.splice(i,1)}},t.prototype.broadcastEventPropertyChange=function(t){var e=this._getEventPropertyObservers(t,!1);e&&e.forEach((function(e){return e.onEventPropertyModified(t)}))},t.prototype.addAsset=function(t,e,n){this.assets[t.toLowerCase()]=e,this.assetsSymbols[e]=n,this.awayAssets[t.toLowerCase()]=n},t.prototype.registerClass=function(t,e){if(null!==(t=xm(this,t))){var n=dt.getAsset(t,Y_.currentMCAssetNameSpace);n&&n.adaptee?n.adaptee.avm1Symbol=e:console.warn("can not find symbol to register class "+t)}else this.utils.warn("Cannot register class for symbol: className is missing")},t.prototype.getSymbolClass=function(t){return this.assetsClasses[t]||null},t.prototype.getAsset=function(t){if(null!==(t=xm(this,t))){var e=this.assets[t.toLowerCase()];if(void 0!==e){var n=this.awayAssets[t.toLowerCase()];return n||console.log("error in getAsset. not implemented to grab assets from loaderInfo"),{symbolId:e,symbolProps:n}}}},t.prototype.reset=function(){this.eventObservers=Object.create(null),this.assets={},this.assetsSymbols=[],this.assetsClasses=[],this.awayAssets={},this.staticStates=new WeakMap,i_.bindStage(this,this.globals.Stage,null,null,null)},t.prototype.setStage=function(t,e,n){p_.bindStage(this,this.globals.Key,t,n),og.bindStage(this,this.globals.Mouse,t,n),i_.bindStage(this,this.globals.Stage,t,e,n)},t.prototype.getStaticState=function(t){var e=this.staticStates.get(t);if(!e){e=Object.create(null);var n=t.alInitStatic;n&&n.call(e,this),this.staticStates.set(t,e)}return e},t.prototype.resolveLevel=function(t){var e=this.globals._getRootForLevel(t);if(e)return Vm(e,this);this.utils.warn("Unable to resolve level "+t+" root")},t}(),$m=function(){function t(){this.parentResults=null,this.registersLimit=0}return t.prototype.analyze=function(t){for(var e,n,i,r,o,a,s,l,u=[],c=[0],h=[!0],p=!1,d=null,f=[0];f.length>0;)if(e=f.shift(),!u[e])for(t.position=e;!t.eof&&!u[e]&&0!==(n=t.readNext()).actionCode;){switch(r={action:n,next:i=t.position,conditionalJumpTo:-1},o=0,a=!1,s=!1,n.actionCode){case 138:case 141:a=!0,l=138===n.actionCode?n.args[1]:n.args[0],t.skip(l),o=t.position,t.position=i;break;case 153:s=!0,a=!0,o=i+n.args[0];break;case 157:a=!0,o=i+n.args[0];break;case 42:case 62:case 0:s=!0,a=!0,o=t.length;break;case 136:if(p){d=null;break}p=!0,0===e&&(d=n.args[0])}if(a&&(s?r.next=o:r.conditionalJumpTo=o,h[o]||(c.push(o),f.push(o),h[o]=!0)),u[e]=r,s)break;e=i}var _,g,m=[];c.forEach((function(t){if(u[t]){var e;_=[],g=t;do{e=u[g],_.push(e),g=e.next}while(!h[g]&&u[g]);m.push({label:t,items:_,jump:g})}}));var y=null;return p?y=d:this.parentResults&&(y=this.parentResults.singleConstantPool),{actions:u,blocks:m,dataId:t.dataId,singleConstantPool:y,registersLimit:this.registersLimit}},t}(),ty=function(){function t(t,e){this.array=t,this.position=0,this.end=t.length,this.readANSI=e<6;var n=new ArrayBuffer(4);if(new Int32Array(n)[0]=1,!new Uint8Array(n)[0])throw new Error("big-endian platform")}return t.prototype.readUI8=function(){return this.array[this.position++]},t.prototype.readUI16=function(){var t=this.position,e=this.array,n=e[t+1]<<8|e[t];return this.position=t+2,n},t.prototype.readSI16=function(){var t=this.position,e=this.array,n=e[t+1]<<8|e[t];return this.position=t+2,n<32768?n:n-65536},t.prototype.readInteger=function(){var t=this.position,e=this.array,n=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;return this.position=t+4,n},t.prototype.readFloat=function(){var t=this.position,e=this.array,n=new ArrayBuffer(4),i=new Uint8Array(n);return i[0]=e[t],i[1]=e[t+1],i[2]=e[t+2],i[3]=e[t+3],this.position=t+4,new Float32Array(n)[0]},t.prototype.readDouble=function(){var t=this.position,e=this.array,n=new ArrayBuffer(8),i=new Uint8Array(n);return i[4]=e[t],i[5]=e[t+1],i[6]=e[t+2],i[7]=e[t+3],i[0]=e[t+4],i[1]=e[t+5],i[2]=e[t+6],i[3]=e[t+7],this.position=t+8,new Float64Array(n)[0]},t.prototype.readBoolean=function(){return!!this.readUI8()},t.prototype.readANSIString=function(){for(var t,e="";t=this.readUI8();)e+=String.fromCharCode(t);return e},t.prototype.readUTF8String=function(){for(var t,e="";t=this.readUI8();)if(t<128)e+=String.fromCharCode(t);else if(128!=(192&t)){var n=this.position-1,i=192,r=5;do{var o=i>>1|128;if((t&o)===i)break;i=o,--r}while(r>=0);for(var a=t&(1<<r)-1,s=5;s>=r;--s)if(128==(192&(t=this.readUI8())))a=a<<6|63&t;else{var l=this.position-1;for(this.position=n;this.position<l;)e+=String.fromCharCode(this.readUI8())}e+=a>=65536?String.fromCharCode(a-65536>>10&1023|55296,1023&a|56320):String.fromCharCode(a)}else e+=String.fromCharCode(t);return e},t.prototype.readString=function(){return this.readANSI?this.readANSIString():this.readUTF8String()},t.prototype.readBytes=function(t){var e=this.position,n=Math.max(this.end-e,0);n<t&&(t=n);var i=this.array.subarray(e,e+t);return this.position=e+t,i},t}(),ey=/[^A-Za-z0-9_]+/g,ny=function(){return function(t){this.registerNumber=t}}(),iy=function(){return function(t){this.constantIndex=t}}(),ry=function(){function t(t,e){this.swfVersion=e,this._lastPushedValue=null,this._lastDefinedConstantPool=null,this._initialPosition=0,this._initialLen=0,this._actionsData=t,this.dataId=t.id;var n=t.bytes,i=new Uint8Array(n.buffer,0);this._initialPosition=n.byteOffset,this._initialLen=n.length,this._stream=new ty(i,e),this._stream.position=this._initialPosition}return Object.defineProperty(t.prototype,"position",{get:function(){return this._stream.position-this._initialPosition},set:function(t){this._stream.position=t+this._initialPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eof",{get:function(){return this.position>=this._initialLen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._initialLen},enumerable:!1,configurable:!0}),t.prototype.readNext=function(){var t=this._stream,e=t.position,n=t.readUI8(),i=n>=128?t.readUI16():0,r=t.position+i,o=null;switch(155!==n&&142!==n&&(this._lastPushedValue=null),0|n){case 129:var a=t.readUI16(),s=!1;6!==(l=t.readUI8())&&7!==l?t.position--:(r++,s=6===l),o=[a,s];break;case 131:o=[t.readString(),t.readString()];break;case 138:o=[a=t.readUI16(),p=t.readUI8()];break;case 139:o=[t.readString()];break;case 140:var l,u=t.readString();s=!1;6!==(l=t.readUI8())&&7!==l?t.position--:(r++,s=6===l),o=[u,s];break;case 150:var c,h;for(o=[];t.position<r;){switch(0|(c=t.readUI8())){case 0:h=t.readString(),this._lastPushedValue=h;break;case 1:h=t.readFloat();break;case 2:h=null;break;case 3:h=void 0;break;case 4:h=new ny(t.readUI8());break;case 5:h=t.readBoolean();break;case 6:h=t.readDouble();break;case 7:h=t.readInteger();break;case 8:h=new iy(t.readUI8());break;case 9:h=new iy(t.readUI16());break;default:console.error("Unknown value type: "+c,t.position),t.position=r;continue}this._lastPushedValue=h,o.push(h)}break;case 153:case 157:o=[t.readSI16()];break;case 154:o=[A=t.readUI8()];break;case 159:o=[A=t.readUI8()],2&A&&o.push(t.readUI16());break;case 141:o=[p=t.readUI8()];break;case 136:for(var p=t.readUI16(),d=[],f=0;f<p;f++)d.push(t.readString());this._lastDefinedConstantPool=d,o=[d];break;case 155:var _=t.readString(),g=(p=t.readUI16(),[]);for(f=0;f<p;f++)g.push(t.readString());r+=I=t.readUI16(),o=[w=new Wm(t.readBytes(I),this.dataId+"_f"+t.position,this._actionsData),_,g];break;case 148:r+=I=t.readUI16(),o=[new Wm(t.readBytes(I),this.dataId+"_w"+t.position,this._actionsData)];break;case 135:o=[b=t.readUI8()];break;case 142:var m=null;this._lastPushedValue instanceof iy&&this._lastDefinedConstantPool&&(m=this._lastDefinedConstantPool[this._lastPushedValue.constantIndex]),"string"==typeof this._lastPushedValue&&(m=this._lastPushedValue),m&&ey.test(m)&&(m=null);_=t.readString(),p=t.readUI16();var y=t.readUI8(),A=t.readUI16(),v=[];for(g=[],f=0;f<p;f++){var b=t.readUI8(),x=t.readString();g.push(x),b&&(v[b]={type:1,name:x,index:f})}var C=1;1&A&&(v[C++]={type:2}),4&A&&(v[C++]={type:4}),16&A&&(v[C++]={type:8}),64&A&&(v[C++]={type:64}),128&A&&(v[C++]={type:32}),256&A&&(v[C++]={type:16});var I,E=0;2&A&&(E|=2),8&A&&(E|=4),32&A&&(E|=8),r+=I=t.readUI16();var w,S=this.dataId+"_f"+t.position;m&&(S=m+"__"+S),(w=new Wm(t.readBytes(I),S,this._actionsData)).debugPath=this.dataId+"/"+(m||"f"+t.position),o=[w,_,g,y,v,E];break;case 143:var D=!!(4&(A=t.readUI8())),T=!!(2&A),P=!!(1&A),B=t.readUI16(),O=t.readUI16(),M=t.readUI16(),L=D?t.readUI8():t.readString();r+=B+O+M;var R=this._actionsData.debugPath,N=new Wm(t.readBytes(B),this.dataId+"_t"+t.position,this._actionsData);R&&(N.debugPath=R+"/try_"+this._stream.position);var F=new Wm(t.readBytes(O),this.dataId+"_c"+t.position,this._actionsData);R&&(F.debugPath=R+"/catch_"+this._stream.position);var k=new Wm(t.readBytes(M),this.dataId+"_z"+t.position,this._actionsData);R&&(k.debugPath=R+"/finaly_"+this._stream.position),o=[D,L,N,P,F,T,k];break;case 137:o=[t.readUI8()]}return t.position=r,{position:e-this._initialPosition,actionCode:n,actionName:oy[n],knownAction:!!oy[n],args:o}},t.prototype.skip=function(t){for(var e=this._stream;t>0&&this.position<this._initialLen;){var n=e.readUI8()>=128?e.readUI16():0;e.position+=n,t--}},t}(),oy={0:"EOA",4:"ActionNextFrame",5:"ActionPreviousFrame",6:"ActionPlay",7:"ActionStop",8:"ActionToggleQuality",9:"ActionStopSounds",10:"ActionAdd",11:"ActionSubtract",12:"ActionMultiply",13:"ActionDivide",14:"ActionEquals",15:"ActionLess",16:"ActionAnd",17:"ActionOr",18:"ActionNot",19:"ActionStringEquals",20:"ActionStringLength",21:"ActionStringExtract",23:"ActionPop",24:"ActionToInteger",28:"ActionGetVariable",29:"ActionSetVariable",32:"ActionSetTarget2",33:"ActionStringAdd",34:"ActionGetProperty",35:"ActionSetProperty",36:"ActionCloneSprite",37:"ActionRemoveSprite",38:"ActionTrace",39:"ActionStartDrag",40:"ActionEndDrag",41:"ActionStringLess",42:"ActionThrow",43:"ActionCastOp",44:"ActionImplementsOp",45:"ActionFSCommand2",48:"ActionRandomNumber",49:"ActionMBStringLength",50:"ActionCharToAscii",51:"ActionAsciiToChar",52:"ActionGetTime",53:"ActionMBStringExtract",54:"ActionMBCharToAscii",55:"ActionMBAsciiToChar",58:"ActionDelete",59:"ActionDelete2",60:"ActionDefineLocal",61:"ActionCallFunction",62:"ActionReturn",63:"ActionModulo",64:"ActionNewObject",65:"ActionDefineLocal2",66:"ActionInitArray",67:"ActionInitObject",68:"ActionTypeOf",69:"ActionTargetPath",70:"ActionEnumerate",71:"ActionAdd2",72:"ActionLess2",73:"ActionEquals2",74:"ActionToNumber",75:"ActionToString",76:"ActionPushDuplicate",77:"ActionStackSwap",78:"ActionGetMember",79:"ActionSetMember",80:"ActionIncrement",81:"ActionDecrement",82:"ActionCallMethod",83:"ActionNewMethod",84:"ActionInstanceOf",85:"ActionEnumerate2",96:"ActionBitAnd",97:"ActionBitOr",98:"ActionBitXor",99:"ActionBitLShift",100:"ActionBitRShift",101:"ActionBitURShift",102:"ActionStrictEquals",103:"ActionGreater",104:"ActionStringGreater",105:"ActionExtends",129:"ActionGotoFrame",131:"ActionGetURL",135:"ActionStoreRegister",136:"ActionConstantPool",137:"ActionStrictMode",138:"ActionWaitForFrame",139:"ActionSetTarget",140:"ActionGoToLabel",141:"ActionWaitForFrame2",142:"ActionDefineFunction2",143:"ActionTry",148:"ActionWith",150:"ActionPush",153:"ActionJump",154:"ActionGetURL2",155:"ActionDefineFunction",157:"ActionIf",158:"ActionCall",159:"ActionGotoFrame2"},ay=/[^A-Za-z0-9_/]+/g,sy=null;function ly(){return sy||(sy=function(){var t=function(t){return t};return{ActionGotoFrame:t(Jy),ActionGetURL:t(Zy),ActionNextFrame:t($y),ActionPreviousFrame:t(tA),ActionPlay:t(eA),ActionStop:t(nA),ActionToggleQuality:t(iA),ActionStopSounds:t(rA),ActionWaitForFrame:t(oA),ActionSetTarget:t(aA),ActionGoToLabel:t(sA),ActionPush:t(lA),ActionPop:t(uA),ActionAdd:t(cA),ActionSubtract:t(hA),ActionMultiply:t(pA),ActionDivide:t(dA),ActionEquals:t(fA),ActionLess:t(_A),ActionAnd:t(gA),ActionOr:t(mA),ActionNot:t(yA),ActionStringEquals:t(AA),ActionStringLength:t(vA),ActionMBStringLength:t(bA),ActionStringAdd:t(xA),ActionStringExtract:t(CA),ActionMBStringExtract:t(IA),ActionStringLess:t(EA),ActionToInteger:t(wA),ActionCharToAscii:t(SA),ActionMBCharToAscii:t(DA),ActionAsciiToChar:t(TA),ActionMBAsciiToChar:t(PA),ActionJump:t(BA),ActionIf:t(OA),ActionCall:t(MA),ActionGetVariable:t(LA),ActionSetVariable:t(RA),ActionGetURL2:t(NA),ActionGotoFrame2:t(FA),ActionSetTarget2:t(kA),ActionGetProperty:t(UA),ActionSetProperty:t(VA),ActionCloneSprite:t(jA),ActionRemoveSprite:t(GA),ActionStartDrag:t(QA),ActionEndDrag:t(zA),ActionWaitForFrame2:t(HA),ActionTrace:t(XA),ActionGetTime:t(YA),ActionRandomNumber:t(qA),ActionCallFunction:t(KA),ActionCallMethod:t(WA),ActionConstantPool:t(ZA),ActionDefineFunction:t($A),ActionDefineLocal:t(tv),ActionDefineLocal2:t(ev),ActionDelete:t(nv),ActionDelete2:t(iv),ActionEnumerate:t(rv),ActionEquals2:t(ov),ActionGetMember:t(av),ActionInitArray:t(sv),ActionInitObject:t(lv),ActionNewMethod:t(uv),ActionNewObject:t(cv),ActionSetMember:t(hv),ActionTargetPath:t(pv),ActionWith:t(dv),ActionToNumber:t(fv),ActionToString:t(_v),ActionTypeOf:t(gv),ActionAdd2:t(mv),ActionLess2:t(yv),ActionModulo:t(Av),ActionBitAnd:t(vv),ActionBitLShift:t(bv),ActionBitOr:t(xv),ActionBitRShift:t(Cv),ActionBitURShift:t(Iv),ActionBitXor:t(Ev),ActionDecrement:t(wv),ActionIncrement:t(Sv),ActionPushDuplicate:t(Dv),ActionReturn:t(Tv),ActionStackSwap:t(Pv),ActionStoreRegister:t(Bv),ActionInstanceOf:t(Ov),ActionEnumerate2:t(Mv),ActionStrictEquals:t(Lv),ActionGreater:t(Rv),ActionStringGreater:t(Nv),ActionDefineFunction2:t(Fv),ActionExtends:t(kv),ActionCastOp:t(Uv),ActionImplementsOp:t(Vv),ActionTry:t(jv),ActionThrow:t(Gv),ActionFSCommand2:t(Qv),ActionStrictMode:t(zv)}}()),sy}var uy=function(){return function(t){void 0===t&&(t=!1),this.inlinePop=t}}(),cy=((qm={})[78]={AllowReturnValue:!0,AllowStackToArgs:!0,AllowCallapsDouble:!0,ArgsCount:2},qm[79]={AllowStackToArgs:!0,ArgsCount:3},qm[71]={AllowStackToArgs:!0,AllowReturnValue:!0,PlainArgs:!0,ArgsCount:2},qm[103]={AllowStackToArgs:!0,AllowReturnValue:!0,ArgsCount:2},qm),hy=function(){function t(){}return t.prototype.convertArgs=function(t,e,n,i){for(var r,o,a,s,l,u,c=[],h=t.length,p=0;p<h;p++)"object"!=typeof(r=t[p])||null===r||Array.isArray(r)?void 0===r?c.push("undefined"):c.push(JSON.stringify(r)):r instanceof iy?i.singleConstantPool?(o=i.singleConstantPool[r.constantIndex],c.push(void 0===o?"undefined":JSON.stringify(o))):(a="",(s=n.constantPool)&&(a=(a=void 0===(o=s[r.constantIndex])?"undefined":JSON.stringify(o)).indexOf("*/")>=0?"":" /* "+a+" */"),c.push("constantPool["+r.constantIndex+"]"+a)):r instanceof ny?(l=r.registerNumber)<0||l>=i.registersLimit?c.push("undefined"):c.push("registers["+l+"]"):r instanceof Wm?(n[u="code_"+e+"_"+p]=r,c.push("res."+u)):r instanceof uy&&r.inlinePop&&c.push("stack.pop()");return c.join(",")},t.prototype.convertAction=function(t,e,n,i,r,o,a){var s=o[i-1],l=t.flags,u="";if((null==l?void 0:l.optimised)&&(u="  /* ".concat(t.action.actionName," optimised */\n")),null==l?void 0:l.killed)return"  /* ".concat(t.action.actionName," killed by optimiser */\n");if(!t.action.knownAction)return"  // unknown actionCode ".concat(t.action.actionCode," at ").concat(t.action.position,"\n");switch(t.action.actionCode){case 153:case 62:return"";case 136:return n.constantPool=t.action.args[0],a.forward["constPool".concat(e)]="[".concat(this.convertArgs(t.action.args[0],e,n,r),"]"),"  constantPool = ectx.constantPool = constPool".concat(e,";\n");case 150:return u+"  stack.push("+this.convertArgs(t.action.args,e,n,r)+");\n";case 135:var c=t.action.args[0];return c<0||c>=r.registersLimit?"":"  registers["+c+"] = stack[stack.length - 1];\n";case 138:case 141:var h=this.convertArgs(t.action.args,e,n,r);return"  if (calls."+t.action.actionName+"(ectx,["+h+"])) { position = "+t.conditionalJumpTo+"; checkTimeAfter -= "+(i+1)+"; break; }\n";case 157:return"  if (!!stack.pop()) { position = "+t.conditionalJumpTo+"; checkTimeAfter -= "+(i+1)+"; break; }\n";default:if((h=t.action.args?this.convertArgs(t.action.args,e,n,r):"")&&!l.PlainArgs&&(h="["+h+"]"),142===t.action.actionCode){var p="defFunArgs".concat(e);a.forward[p]=h,h=p}if(u+="  calls."+t.action.actionName+"(ectx"+(h?", "+h:"")+");\n","ActionCallMethod"==t.action.actionName&&(s||(u="// strange oppcode at ".concat(t.action.position,"\n")+u),s&&150==s.action.actionCode)){var d=this.convertArgs(s.action.args,e-1,n,r);'"gotoAndStop"'!=d&&'"gotoAndPlay"'!=d||(u+="  if(ectx.scopeList && ectx.scopeList.scope && ectx.scopeList.scope.adaptee && !ectx.scopeList.scope.adaptee.parent){ ectx.framescriptmanager.execute_avm1_constructors(); return;}\n")}return u}},t.prototype.inlineStackOpt=function(t,e,n){if(!n.length)return!1;var i=e[t],r=i.flags,o=i.action.actionCode,a=e[n[0]];n.length=0;var s=cy[o];if(!s||!s.AllowStackToArgs)return!1;r.PlainArgs=s.PlainArgs;var l=a.action.args;if(l.length===s.ArgsCount)a.flags.killed=!0,i.action.args=l;else if(l.length>s.ArgsCount){var u=l.length-s.ArgsCount;i.action.args=l.slice(u),l.length=u,a.flags.optimised=!0}else{var c=s.ArgsCount-l.length;if(c>1)return!1;a.flags.killed=!0,i.action.args=l.slice();for(var h=0;h<c;h++)i.action.args.unshift(new uy(!0))}return r.optimised=!0,!0},t.prototype.optimiser=function(t){for(var e=t.items,n=[],i=!0,r=0,o=e.length;r<o;r++){var a=e[r],s=a.action.actionCode;if(a.flags=a.flags||{},150!==s){if(n.length>1)for(var l=n[0],u=n[n.length-1],c=e[l].action,h=l+1;h<=u;h++)c.args=c.args.concat(e[h].action.args),e[h].flags.killed=!0;i=!!i&&this.inlineStackOpt(r,e,n),n.length=0}switch(s){case 150:n.push(r),i=!0;break;case 78:var p=a.action.args;if(!(null==p?void 0:p.length))break;var d=p[0];if(!(d instanceof uy&&d.inlinePop))break;for(var f=r-1;f>=0&&e[f].flags.killed;f--);if(f>=0){var _=e[f],g=_.action.args;if(78===_.action.actionCode&&(null==g?void 0:g.length)){_.flags.killed=!0,a.flags.optimised=!0,p.shift();for(var m=g.length-1;m>=0;m--)p.unshift(g[m])}}}}},t.prototype.generate=function(t,e){var n=this;void 0===e&&(e=null);var i=t.blocks,r={},o={forward:{},back:{}},a=t.dataId.replace(ay,"_"),s="return function "+a+"(ectx) {\nvar position = 0;\nvar checkTimeAfter = 0;\nvar constantPool = ectx.constantPool, registers = ectx.registers, stack = ectx.stack;\n",l="",u="";P_.value&&(u+="/* Running "+a+" */ if (Shumway.AVM1.Debugger.pause || Shumway.AVM1.Debugger.breakpoints."+a+") { debugger; }\n"),u+="while (!ectx.isEndOfActions) {\n"+"if (checkTimeAfter <= 0) { checkTimeAfter = ".concat(fy,"; ectx.context.checkTimeout(); }\n\n")+"switch(position) {\n";var c=0;for(var h in i.forEach((function(e){u+=" case "+e.label+":\n",n.optimiser(e);var i=e.items.map((function(i,a){return n.convertAction(i,c++,r,a,t,e.items,o)}));u+=i.join(""),u+="  position = "+e.jump+";\n  checkTimeAfter -= "+e.items.length+";\n  break;\n"})),u+=" default: ectx.isEndOfActions = true; break;\n}\n}\nreturn stack.pop();};",l+="\n// hoisted vars\n",o.forward)l+="var ".concat(h," = ").concat(o.forward[h],";\n");u=(l+="\n")+s+u,u+="//# sourceURL=http://jit/"+(e&&!ay.test(e)?e:a);try{return new Function("calls","res",u)(ly(),r)}catch(t){throw t}},t}();function py(t,e,n,i,r){if(w_.value)try{throw new Error(t)}catch(t){}S_.value&&fp.warning.apply(console,arguments)}var dy,fy=1e3,_y=1e3;!function(t){t[t.DEFAULT=0]="DEFAULT",t[t.TARGET=1]="TARGET",t[t.REPLACE_TARGET=2]="REPLACE_TARGET"}(dy||(dy={}));var gy=function(){return function(t,e){this.scope=t,this.previousScopeItem=e,this.flags=dy.DEFAULT}}(),my=function(t){function e(e,n){var i=t.call(this,e)||this;return i.alSetOwnProperty("this",new Lf(71,n)),i.alSetOwnProperty("_global",new Lf(71,e.globals)),i}return o(e,t),e}(Rf),yy=function(){function t(t,e,n,i,r){this.previousFrame=t,this.currentThis=e,this.fn=n,this.args=i,this.ectx=r,this.inSequence=!!t&&(t.calleeThis===e&&t.calleeFn===n),this.resetCallee()}return t.prototype.setCallee=function(t,e,n,i){this.calleeThis=t,this.calleeSuper=e,this.calleeFn=n},t.prototype.resetCallee=function(){this.calleeThis=null,this.calleeSuper=null,this.calleeFn=null},t}(),Ay=function(){function t(t){this._context=t}return t.prototype.hasProperty=function(t,e){return function(t,e,n){var i=Am(t,e);return n=t.normalizeName(n),i.alHasProperty(n)}(this._context,t,e)},t.prototype.getProperty=function(t,e){return wy(this._context,t,e)},t.prototype.setProperty=function(t,e,n){return Sy(this._context,t,e,n)},t.prototype.warn=function(t){py.apply(null,arguments)},t}(),vy=function(t){function e(e){var n=t.call(this,e)||this;return n.globals=Ng.createGlobalsObject(n),n.actions=new Fg(n),n.initialScope=new gy(n.globals,null),n.utils=new Ay(n),n.isActive=!1,n.executionProhibited=!1,n.actionTracer=E_.value?new Yv:null,n.abortExecutionAt=0,n.stackDepth=0,n.frame=null,n.isTryCatchListening=!1,n.errorsIgnored=0,n.deferScriptExecution=!0,n}return o(e,t),e.prototype._getExecutionContext=function(){return this.frame.ectx},e.prototype.resolveTarget=function(t){return Ky(this._getExecutionContext(),t,!0)},e.prototype.resolveRoot=function(){return Wy(this._getExecutionContext())},e.prototype.checkTimeout=function(){Date.now(),this.abortExecutionAt},e.prototype.pushCallFrame=function(t,e,n,i){var r=new yy(this.frame,t,e,n,i);return this.frame=r,r},e.prototype.popCallFrame=function(){var t=this.frame.previousFrame;return this.frame=t,t},e.prototype.executeActions=function(t,e){if(!this.executionProhibited){var n,i=this.isActive;i||(this.isActive=!0,this.abortExecutionAt=D_.value?Number.MAX_VALUE:Date.now()+1e3,this.errorsIgnored=0);try{!function(t,e,n){t.actionTracer;var i,r=new gy(new my(t,n),t.initialScope),o=new gy(n,r);o.flags|=dy.TARGET;var a=Fy.create(t,o,[],Ly);t.pushCallFrame(n,null,null,a);try{Xv(a,e)}catch(t){i=Py(t)}a.dispose(),i instanceof xy&&(t.executionProhibited=!0,console.error("Disabling AVM1 execution"));if(t.popCallFrame(),i)throw i}(this,t,e)}catch(t){n=t}this.isActive=i,n&&console.error("error in framescripts",n)}},e.prototype.executeFunction=function(t,e,n){if(!this.executionProhibited){var i,r=this.isActive;return r||(this.isActive=!0,this.abortExecutionAt=D_.value?Number.MAX_VALUE:Date.now()+1e3,this.errorsIgnored=0),i=t.alCall(e,n),this.isActive=r,i}},e}(Zm);Zm.create=function(t){return new vy(t)};var by=function(){return function(t){this.error=t}}(),xy=function(t){function e(e,n){var i=t.call(this,e)||this;return i.error=n,i}return o(e,t),e}(Error);function Cy(t,e,n){var i=dm(0,e),r=dm(0,n);if("string"==typeof i&&"string"==typeof r)return ym(t,i)<ym(t,r);var o=_m(t,i),a=_m(t,r);return isNaN(o)||isNaN(a)?void 0:o<a}function Iy(t,e,n){if(typeof e==typeof n){if("number"==typeof e){var i=Math.abs(e),r=Math.abs(n),o=1e-6*(i>r?i:r);return Math.abs(e-n)<=o}return e===n}return null==e&&null==n||("number"==typeof e&&"string"==typeof n?""!==n&&e===+n:"string"==typeof e&&"number"==typeof n?""!==e&&+e===n:"boolean"==typeof e&&(e=+e,"number"==typeof n||"string"==typeof n)?""!==n&&e===+n:"boolean"==typeof n&&(n=+n,"number"==typeof e||"string"==typeof e)?""!==e&&+e===n:"number"!=typeof e&&"string"!=typeof e||"object"!=typeof n||null===n?"object"==typeof e&&null!==e&&("number"==typeof n||"string"==typeof n)&&("object"!=typeof(e=dm(0,e))&&Iy(t,e,n)):"object"!=typeof(n=dm(0,n))&&Iy(t,e,n))}function Ey(t,e){if(ap(t)||ap(e))return!1;var n=e.alGetPrototypeProperty();if(!n)return!1;for(var i=t;i;){if(i===n)return!0;i=i.alPrototype}return!1}function wy(t,e,n){var i=Am(t,e);if(i)return i.alGet(n)}function Sy(t,e,n,i){var r=Am(t,e);if(r)if("__proto__"==n){if(i){for(var o=i.alGetKeys(),a=0;a<o.length;a++){var s=o[a];""!=s&&(r.alPut(s,i.alGet(s)),Ty(t,s,r))}r.protoTypeChanged=!(i instanceof Y_)}}else r.alPut(n,i),r.adaptee&&Ty(t,n,r)}function Dy(t,e,n){var i=Am(t,e);n=t.normalizeName(n);var r=i.alDeleteProperty(n);return Ty(t,n,i),r}function Ty(t,e,n){void 0!==e&&(e=xm(t,e),"o"===(e=t.normalizeName(e))[0]&&"n"===e[1]&&n&&n.updateEventByPropName&&n.updateEventByPropName(e))}function Py(t){return"undefined"!=typeof InternalError&&t instanceof InternalError&&"too much recursion"===t.message?new xy("long running script -- AVM1 recursion limit is reached"):t}function By(t,e){if(wm(t))return t.alConstruct(e)}function Oy(t,e,n){"boolean"!=typeof t&&"string"!=typeof t&&"number"!=typeof t&&Em(t,(function(i){var r;if("string"!=typeof i||-1==i.indexOf("_internal_TF")){var o=t.alGet(i);(null===(r=null==o?void 0:o.adaptee)||void 0===r?void 0:r.isAsset(Ch))&&o.adaptee.isStatic||e.call(n,i)}}),n)}function My(t,e,n){if(t.swfVersion<6)return null;var i=e.inSequence&&e.previousFrame.calleeSuper;if(!i){for(i=e.currentThis;i&&!i.alHasOwnProperty(n);)i=i.alPrototype;if(!i)return null}return i=i.alPrototype}var Ly=4;var Ry=function(t){function e(e,n){var i=t.call(this,e)||this;return i.callFrame=n,i.alPrototype=e.builtins.Object.alGetPrototypeProperty(),i}return o(e,t),e}(Rf),Ny=function(t){function e(e,n,i,r){var o=t.call(this,e,n)||this;return Om(o,{callee:{value:i},caller:{value:r}}),o}return o(e,t),e}(Zg),Fy=function(){function t(t,e,n,i){this.framescriptmanager=_l,this.context=t,this.actions=t.actions,this.isSwfVersion5=t.swfVersion>=5,this.isSwfVersion7=t.swfVersion>=7,this.registers=[],this.stack=[],this.frame=null,this.recoveringFromError=!1,this.isEndOfActions=!1,this.reset(e,n,i)}return t.alInitStatic=function(){this.cache=[]},t.prototype.reset=function(t,e,n){this.scopeList=t,this.constantPool=e,this.registers.length=n},t.prototype.clean=function(){this.scopeList=null,this.constantPool=null,this.registers.length=0,this.stack.length=0,this.frame=null,this.recoveringFromError=!1,this.isEndOfActions=!1},t.prototype.pushScope=function(t){var e=Object.create(this);return e.stack=[],ap(t)||(e.scopeList=t),e},t.prototype.dispose=function(){this.clean();var e=this.context.getStaticState(t);e.cache.length<t.MAX_CACHED_EXECUTIONCONTEXTS&&e.cache.push(this)},t.create=function(e,n,i,r){var o,a=e.getStaticState(t);return a.cache.length>0?(o=a.cache.pop()).reset(n,i,r):o=new t(e,n,i,r),o},t.MAX_CACHED_EXECUTIONCONTEXTS=20,t}(),ky=function(t){function e(e){var n=t.call(this,e)||this;return n.alPut("toString",new cm(e,n._toString)),n}return o(e,t),e.prototype._toString=function(){return this},e}(Rf),Uy=function(t){function e(e,n,i,r,o,a,s,l){var u=t.call(this,e)||this;u.functionName=r,u.actionsData=i,u.parametersNames=o,u.registersAllocation=s,u.suppressArguments=l,u.scopeList=n.scopeList,u.constantPool=n.constantPool;for(var c=null,h=s?s.length:0,p=0;p<h;p++){var d=s[p];d&&1===d.type&&(c||(c=[]),c[s[p].index]=!0)}u.skipArguments=c;var f=Math.min(a,255);return f=Math.max(f,h+1),u.registersLength=f,u}return o(e,t),e.prototype.alCall=function(t,e){var n,i,r=this.context;if(!r.executionProhibited){var o=new ky(r),a=new gy(o,this.scopeList),s=this.scopeList.scope;e=e||[];var l,u,c=Fy.create(r,a,this.constantPool,this.registersLength),h=r.frame?r.frame.fn:void 0,p=r.pushCallFrame(t,this,e,c),d=this.suppressArguments;4&d||o.alPut("arguments",new Ny(r,e,this,h)),2&d||o.alPut("this",t),8&d||(l=new Ry(r,p),o.alPut("super",l));var f=c.registers,_=this.registersAllocation,g=_?_.length:0;for(u=0;u<g;u++){var m=_[u];if(m)switch(m.type){case 1:f[u]=e[m.index];break;case 2:f[u]=t;break;case 4:f[u]=new Ny(r,e,this,h);break;case 8:l=l||new Ry(r,p),f[u]=l;break;case 16:f[u]=r.globals;break;case 32:var y=null;if(s&&((y=s.alGet("_parent"))||(y=s.alGet("this"))&&(y=y.alGet("_parent"))),!y&&((y=t)&&(y=y.alGet("_parent")),y&&this.isOnEnter&&y.alGet("_parent")&&(y=y.alGet("_parent")),!y&&(null===(i=null===(n=this.scopeList)||void 0===n?void 0:n.previousScopeItem)||void 0===i?void 0:i.scope)))for(var A=this.scopeList.previousScopeItem;A;)A.scope&&A.scope instanceof Y_?y=A.scope:A.scope&&(y=A.scope.alGet("this")),y&&(y=y.alGet("_parent")),A=A.previousScopeItem?A.previousScopeItem:null;y&&(f[u]=y);break;case 64:f[u]=Wy(c)}}var v,b=this.parametersNames,x=this.skipArguments;for(u=0;u<e.length||u<b.length;u++)x&&x[u]||o.alPut(b[u],e[u]);r.actionTracer;var C=this.actionsData;if(++r.stackDepth>=256)throw new xy("long running script -- AVM1 recursion limit is reached");return v=Xv(c,C),r.stackDepth--,r.popCallFrame(),c.dispose(),v}},e}(hm);function Vy(t,e){return isNaN(t)||t<0?(py("Invalid amount of arguments: "+t),0):(t|=0)>e?(py("Truncating amount of arguments: from "+t+" to "+e),e):t}function jy(t){var e=+t.pop();e=Vy(e,t.length);for(var n=[],i=0;i<e;i++)n.push(t.pop());return n}function Gy(t,e){var n=null;if(e){if("string"==typeof e)for(;e.length&&"."==e[e.length-1];)e=e.substring(0,e.length-1);try{Hy(n=Ky(t,e,!1))||(py("Invalid AVM1 target object: "+e),n=void 0)}catch(t){py("Unable to set target: "+t)}}n?(t.scopeList.flags|=dy.REPLACE_TARGET,t.scopeList.replaceTargetBy=n):(t.scopeList.flags&=~dy.REPLACE_TARGET,t.scopeList.replaceTargetBy=null)}function Qy(t,e,n,i,r,o,a){return new Uy(t.context,t,e,n,i,r,o,a)}var zy={scope:null,propertyName:null,value:void 0};function Hy(t){return t instanceof Rf&&Lm(t)}function Xy(t,e,n,i){var r;void 0===i&&(i=null);for(var o=zy,a=t;a;a=a.previousScopeItem){if(!(a.flags&dy.REPLACE_TARGET)||64&n||r||(r=a.replaceTargetBy),a.flags&dy.TARGET){if(2&n)return o.scope=r||a.scope,o.propertyName=e,o.value=32&n?o.scope.alGet(e):void 0,o;if(1&n&&r){if(r.alHasProperty(e))return o.scope=r,o.propertyName=e,o.value=32&n?r.alGet(e):void 0,o;continue}}if(a.scope.alHasProperty(e)){var s=a.scope.alGet(e);if(i&&(!s||"object"!=typeof s||!s.alHasProperty||!s.alHasProperty(i)))continue;return o.scope=a.scope,o.propertyName=e,o.value=32&n?a.scope.alGet(e):void 0,o}}}function Yy(t,e,n){var i,r,o,a=e.length,s=0,l=!0,u=null,c=null,h=void 0,p=e;if(!function(t){return t&&(t.indexOf(".")>=0||t.indexOf(":")>=0||t.indexOf("/")>=0)}(e))return"string"==typeof(e=t.context.normalizeName(e))&&e.startsWith("_level")?((i=zy).scope=c,i.propertyName=e,i.value=t.context.resolveLevel(+e[6]),i):Xy(t.scopeList,e,n);if("."==e[e.length-1])return null;if("/"===e[0]?((i=Xy(t.scopeList,"_root",33))&&(u=i.propertyName,c=i.scope,h=i.value),s++,o=!1):(i=null,o=!0),s>=a)return i;for(var d=s;s<a;){if(!(o||h instanceof Rf))return py("Unable to resolve variable on invalid object "+e.substring(d,s-1)+" (expr "+e+")"),null;if(d=s,"."===e[s]&&"."===e[s+1])s+=2,u="_parent";else{for(;s<a&&"/"!==(r=e[s])&&"."!==r&&":"!==r;)s++;u=e.substring(d,s)}if(""===u&&s<a)s++;else{c=h;var f=!1;if(l){var _=h instanceof Y_?h._lookupChildByName(u):void 0;_&&(f=!0,h=_)}if(!f)if(o){d=s+1;var g=s+1,m="";if("."===e[g]&&"."===e[g+1])g+=2,m="_parent";else{for(;g<a&&"/"!==(r=e[g])&&"."!==r&&":"!==r;)g++;m=e.substring(d,g)}""==m&&(m=null),!(i=Xy(t.scopeList,u,n,m))&&m&&(i=Xy(t.scopeList,u,n)),i&&(f=!0,u=i.propertyName,c=i.scope,h=i.value,s<a&&!h&&c&&(h=c)),o=!1}else h.alHasProperty(u)&&(h=h.alGet(u),f=!0);if(f||"_"!==u[0]||(u.startsWith("_level")?(h=t.context.resolveLevel(+u[6]),f=!0):"_root"===u&&(h=Wy(t),f=!0)),!(f||2&n))return py("Unable to resolve "+u+" on "+e.substring(d,s-1)+" (expr "+e+")"),null;if(s>=a)break;var y=e[s++];"/"!==y||":"!==(r=e[s])&&"."!==r||(y=e[s++]),l="/"===y}}return(i=zy).scope=c,i.propertyName=p.substring(d,s),i.value=32&n?h:void 0,i}function qy(t,e){for(var n=t.scopeList;n.previousScopeItem;n=n.previousScopeItem){if(n.flags&dy.REPLACE_TARGET&&e)return n.replaceTargetBy;if(n.flags&dy.TARGET)return n.scope}}function Ky(t,e,n){var i;if(Hy(e))i=e;else if(e=ap(e)?"":ym(this,e)){var r=ym(t.context,e),o=Yy(t,r,161|(n?0:64));o&&Hy(o.value)?i=o.value:(py("Invalid AVM1 target object: "+r),i=void 0)}else i=qy(t,!0);return i}function Wy(t){return qy(t,!0).get_root()}function Jy(t,e){var n=e[0];e[1]?t.actions.gotoAndPlay(n+1):t.actions.gotoAndStop(n+1)}function Zy(t,e){var n=e[0],i=e[1];t.actions.getURL(n,i)}function $y(t){t.actions.nextFrame()}function tA(t){t.actions.prevFrame()}function eA(t){t.actions.play()}function nA(t){t.actions.stop()}function iA(t){t.actions.toggleHighQuality()}function rA(t){t.actions.stopAllSounds()}function oA(t,e){var n=e[0];return!t.actions.ifFrameLoaded(n)}function aA(t,e){Gy(t,e[0])}function sA(t,e){var n=e[0];e[1]?t.actions.gotoAndPlay(n):t.actions.gotoAndStop(n)}function lA(t,e){var n=t.registers,i=t.constantPool,r=t.stack;e.forEach((function(t){if(t instanceof iy)r.push(i[t.constantIndex]);else if(t instanceof ny){var e=t.registerNumber;e<0||e>=n.length?r.push(void 0):r.push(n[e])}else r.push(t)}))}function uA(t){t.stack.pop()}function cA(t){var e=t.stack,n=_m(t.context,e.pop()),i=_m(t.context,e.pop());t.isSwfVersion7||(void 0===n&&(n=0),void 0===i&&(i=0)),isFinite(n)&&isFinite(i)?null==i?e.push(NaN):e.push(n+i):n===-1/0&&i===-1/0?e.push(-1/0):isNaN(n)||isNaN(i)?e.push(NaN):n===i?e.push(1/0):isFinite(n)||isFinite(i)?isFinite(n)?isFinite(i)||e.push(i):e.push(n):e.push(NaN)}function hA(t){var e=t.stack,n=e.pop(),i=e.pop();n=_m(t.context,n),i=_m(t.context,i),t.isSwfVersion7||(null==n&&(n=0),null==i&&(i=0)),isFinite(n)&&isFinite(i)?e.push(i-n):isNaN(n)||isNaN(i)||n===i?e.push(NaN):isFinite(n)?isFinite(i)||e.push(i):n===-1/0?e.push(1/0):e.push(-1/0)}function pA(t){var e=t.stack,n=e.pop();n="\n"===n?NaN:_m(t.context,n);var i=e.pop();i="\n"===i?NaN:_m(t.context,i),t.isSwfVersion7||(null!=n&&void 0!==n||(n=0),null!=i&&void 0!==i||(i=0)),isFinite(n)&&isFinite(i)?e.push(n*i):isNaN(n)||isNaN(i)?e.push(NaN):n===i?e.push(1/0):isFinite(n)||isFinite(i)?isFinite(n)?isFinite(i)||(0==n?e.push(NaN):i>=0?n>=0?e.push(1/0):e.push(-1/0):n>=0?e.push(-1/0):e.push(1/0)):0==i?e.push(NaN):n>=0?i>=0?e.push(1/0):e.push(-1/0):i>=0?e.push(-1/0):e.push(1/0):e.push(-1/0)}function dA(t){var e=t.stack,n=e.pop(),i=e.pop(),r=typeof(n=Number.isNaN(+n)?n:+n),o=typeof(i=Number.isNaN(+i)?i:+i);t.isSwfVersion7||(null!==n&&"undefined"!==r||(n=0,r="number"),null!==i&&"undefined"!==o||(i=0,o="number")),"object"===r||"object"===o||"string"===r||"string"===o||"undefined"===r||"undefined"===o||isNaN(n)||isNaN(i)?e.push(NaN):(n="boolean"===r?+n:_m(t.context,n),i="boolean"===o?+i:_m(t.context,i),!isFinite(n)||!isFinite(i)||0==n&&0==i?0==n&&0==i||!isFinite(n)&&!isFinite(i)?e.push(NaN):0==n?e.push(i):0==i?e.push(0):isFinite(i)?isFinite(n)||(isNaN(n)?e.push(n):e.push(0)):i>=0?n>=0?e.push(1/0):e.push(-1/0):n>=0?e.push(-1/0):e.push(1/0):0==n?e.push(i>0?1/0:-1/0):e.push(i/n))}function fA(t){var e=t.stack,n=t.isSwfVersion5,i=_m(t.context,e.pop()),r=_m(t.context,e.pop()),o=Math.abs(i),a=Math.abs(r),s=1e-6*(o>a?o:a),l=Math.abs(i-r)<=s;e.push(n?l:l?1:0)}function _A(t){var e=t.stack,n=t.isSwfVersion5,i=_m(t.context,e.pop()),r=_m(t.context,e.pop())<i;e.push(n?r:r?1:0)}function gA(t){var e=t.stack,n=t.isSwfVersion5,i=fm(t.context,e.pop()),r=fm(t.context,e.pop()),o=i&&r;e.push(n?o:o?1:0)}function mA(t){var e=t.stack,n=t.isSwfVersion5,i=fm(t.context,e.pop()),r=fm(t.context,e.pop()),o=i||r;e.push(n?o:o?1:0)}function yA(t){var e=t.context,n=t.stack,i=!fm(e,n.pop());n.push(function(t,e){return t.swfVersion>=5?!!e:+e}(e,i))}function AA(t){var e=t.stack,n=t.isSwfVersion5,i=ym(t.context,e.pop())==ym(t.context,e.pop());e.push(n?i:i?1:0)}function vA(t){var e=t.stack,n=ym(t.context,e.pop());e.push(t.actions.length_(n))}function bA(t){var e=t.stack,n=ym(t.context,e.pop());e.push(t.actions.length_(n))}function xA(t){var e=t.stack,n=ym(t.context,e.pop()),i=ym(t.context,e.pop());e.push(i+n)}function CA(t){var e=t.stack,n=e.pop(),i=e.pop(),r=ym(t.context,e.pop());e.push(t.actions.substring(r,i,n))}function IA(t){var e=t.stack,n=e.pop(),i=e.pop(),r=ym(t.context,e.pop());e.push(t.actions.mbsubstring(r,i,n))}function EA(t){var e=t.stack,n=t.isSwfVersion5,i=ym(t.context,e.pop()),r=ym(t.context,e.pop())<i;e.push(n?r:r?1:0)}function wA(t){var e=t.stack,n=mm(t.context,e.pop());e.push(n)}function SA(t){var e=t.stack,n=e.pop(),i=t.actions.ord(n);e.push(i)}function DA(t){var e=t.stack,n=e.pop(),i=t.actions.mbord(n);e.push(i)}function TA(t){var e=t.stack,n=+e.pop(),i=t.actions.chr(n);e.push(i)}function PA(t){var e=t.stack,n=+e.pop(),i=t.actions.mbchr(n);e.push(i)}function BA(t,e){}function OA(t,e){return!!t.stack.pop()}function MA(t){var e=t.stack.pop();t.actions.call(e)}function LA(t){var e=t.stack,n=e.pop();n&&(n=ym(t.context,n));var i=e.length;e.push(void 0);var r=Yy(t,"__get__"+n,33);if(r&&r.value){var o=JA(t,r.scope,r.propertyName,[]),a=o.result;if(o.called)return void(e[i]=a)}var s=Yy(t,n,33);ap(s)?"TRUE"==n?e[i]=!0:"FALSE"==n?e[i]=!1:n&&0==n.indexOf("this.")?(s=Yy(t,n=n.replace("this.",""),33),e[i]=s?s.value:void 0):S_.value&&py("AVM1 warning: cannot look up variable '"+n+"'"):e[i]=s?s.value:void 0}function RA(t){var e=t.stack,n=e.pop(),i=""+e.pop(),r=Yy(t,"__set__"+i,33);if(r&&r.value&&JA(t,r.scope,r.propertyName,[n]).called)return;var o=Yy(t,i,2);o?(o.scope.alPut(o.propertyName,n),Ty(t.context,o.propertyName,o.scope)):S_.value&&py("AVM1 warning: cannot look up variable '"+i+"'")}function NA(t,e){var n,i=t.stack,r=e[0],o=i.pop(),a=i.pop();1&r?n="GET":2&r&&(n="POST");var s=64&r;128&r?t.actions.loadVariables(a,o,n):s?t.actions.loadMovie(a,o,n):t.actions.getURL(a,o,n)}function FA(t,e){var n=t.stack,i=e[0],r=[n.pop()];2&i&&r.push(e[1]),(1&i?t.actions.gotoAndPlay:t.actions.gotoAndStop).apply(t.actions,r)}function kA(t){var e=t.stack;Gy(t,ym(t.context,e.pop()))}function UA(t){var e=t.stack,n=e.pop(),i=e.pop(),r=e.length;e.push(void 0);var o=Ky(t,i,!0),a=o_[n];o&&a&&(e[r]=o.alGet(a))}function VA(t){var e=t.stack,n=e.pop(),i=e.pop(),r=Ky(t,e.pop(),!0),o=o_[i];r&&o&&r.alPut(o,n)}function jA(t){var e=t.stack,n=e.pop(),i=e.pop(),r=e.pop();t.actions.duplicateMovieClip(r,i,n)}function GA(t){var e=t.stack.pop();t.actions.removeMovieClip(e)}function QA(t){var e=t.stack,n=t.actions.startDrag,i=e.pop(),r=e.pop();if(!!e.pop()){var o=e.pop(),a=e.pop(),s=e.pop(),l=e.pop();n.call(t.actions,i,r,l,s,a,o)}else n.call(t.actions,i,r)}function zA(t){t.actions.stopDrag()}function HA(t,e){var n=t.stack.pop();return!t.actions.ifFrameLoaded(n)}function XA(t){var e=t.stack.pop();t.actions.trace(e)}function YA(t){t.stack.push(t.actions.getTimer())}function qA(t){var e=t.stack;e.push(t.actions.random(e.pop()))}function KA(t){var e=t.stack,n=e.pop();Tm(t.context,n)&&(n=n.value.join("."));var i=jy(e),r=e.length;e.push(void 0);var o=Yy(t,n,33);if(ap(o))py("AVM1 warning: cannot look up function '"+n+"'");else{var a=o.value;wm(a)?("array"==n.toLowerCase()&&(i=[i]),e[r]=a.alCall(o.scope||null,i)):py("AVM1 warning: function '"+n+(a?"' is not callable":"' is undefined"))}}function WA(t){var e=t.stack,n=e.pop(),i=e.pop(),r=jy(e),o=e.length;e.push(void 0);var a=JA(t,i,n,r);a.called&&(e[o]=a.result)}function JA(t,e,n,i){if(ap(e))return py("AVM1 warning: method '"+n+"' can't be called on undefined object"),{called:!1,result:void 0};var r,o,a,s,l=t.context.frame,u=!1;if(ap(n)||""===n){if(e instanceof Ry){var c=e.callFrame;(r=My(t.context,c,"__constructor__"))&&(o=r.alGet("__constructor__"),a=c.currentThis)}else o=e,a=e;return wm(o)?(l.setCallee(a,r,o,i),s=o.alCall(a,i),u=!0,l.resetCallee()):py("AVM1 warning: obj '"+e+(e?"' is not callable":"' is undefined")),{result:s,called:u}}if(e instanceof Ry){c=e.callFrame;(r=My(t.context,c,n))&&(o=r.alGet(n),a=c.currentThis)}else o=wy(t.context,e,n),a=Am(t.context,e);return wm(o)?(l.setCallee(a,r,o,i),"toString"==n&&"number"==typeof e?1==i.length&&16==i[0]?s=e.toString(16):(s=ym(t.context,e),u=!0):(s=o.alCall(a,i),u=!0),l.resetCallee(),{result:s,called:u}):("function"==typeof o?(s=o(i),u=!0):py("AVM1 warning: method '"+n+"' on object",e,ap(o)?"is undefined":"is not callable"),{result:s,called:u})}function ZA(t,e){var n=e[0];t.constantPool=n}function $A(t,e){var n=t.stack,i=e[0],r=e[1],o=Qy(t,i,r,e[2],4,null,0);if(r){var a=t.scopeList.scope;a.alPut(r,o),Ty(t.context,r,a)}else n.push(o)}function tv(t){var e=t.stack,n=t.scopeList.scope,i=e.pop(),r=e.pop();n.alPut(r,i)}function ev(t){var e=t.stack,n=t.scopeList.scope,i=e.pop();n.alHasProperty(i)||n.alPut(i,void 0)}function nv(t){var e=t.stack,n=e.pop(),i=e.pop();ap(i)?py("AVM1 warning: cannot delete member '"+n+"' on undefined object"):e.push(Dy(t.context,i,n))}function iv(t){var e=t.stack,n=e.pop(),i=Yy(t,n,1);if(ap(i))py("AVM1 warning: cannot look up variable '"+n+"'");else{var r=i.scope.alGetProperty(n);r&&r.value&&r.value.adaptee||e.push(Dy(t.context,i.scope,n))}}function rv(t){var e=t.stack,n=e.pop();e.push(null);var i=Yy(t,n,33);if(ap(i))py("AVM1 warning: cannot look up variable '"+n+"'");else{var r=i.value;ap(r)?py("AVM1 warning: cannot iterate over undefined object"):Oy(r,(function(t){e.push(t)}),null)}}function ov(t){var e=t.stack,n=e.pop(),i=e.pop();e.push(Iy(t.context,n,i))}function av(t,e){for(var n=t.stack,i=e?e[1]:n.pop(),r=e?e[0]:n.pop(),o=e?e.length-1:1,a=void 0,s=0;s<o;){if(null==r)return py("AVM1 warning: cannot get member '"+i+"' on undefined object"),n[n.length]=void 0;if(r instanceof Ry){var l=r.callFrame,u=My(t.context,l,i);u&&(a=u.alGet(i))}else a=wy(t.context,r,i);if(s===o-1)return n[n.length]=a;r=a,i=e[s+2],s++}return n[n.length]=a}function sv(t){var e=t.stack,n=new Zg(t.context,jy(e));e.push(n)}function lv(t){var e=t.stack,n=+e.pop();n=Vy(n,e.length>>1);for(var i=vm(t.context),r=0;r<n;r++){var o=e.pop(),a=e.pop();i.alPut(a,o)}e.push(i)}function uv(t){var e=t.stack,n=e.pop(),i=e.pop(),r=jy(e),o=e.length;if(e.push(void 0),ap(i))py("AVM1 warning: method '"+n+"' can't be constructed on undefined object");else{var a=By(ap(n)||""===n?i:wy(t.context,i,n),r);void 0===a&&py("AVM1 warning: method '"+n+"' on object",i,"is not constructible"),e[o]=a}}function cv(t){var e=t.stack,n=e.pop(),i=jy(e),r=e.length;e.push(void 0);var o=Yy(t,n,33);if(ap(o))py("AVM1 warning: cannot look up object '"+n+"'");else{var a=o.value,s=function(t,e,n){var i=t.builtins,r=void 0;if(e!==i.Array&&e!==i.Object&&e!==i.Date&&e!==i.String&&e!==i.Function||(r=e.alConstruct(n)),e!==i.Boolean&&e!==i.Number||(r=e.alConstruct(n).value),r instanceof Rf){var o=new Lf(65,e);r.alSetOwnProperty("__constructor__",o)}return r}(t.context,a,i);void 0===s&&void 0===(s=By(a,i))&&py("AVM1 warning: object '"+n+(a?"' is not constructible":"' is undefined")),e[r]=s}}function hv(t,e){var n=t.stack,i=e?e[2]:n.pop(),r=e?e[1]:n.pop(),o=e?e[0]:n.pop();ap(o)?py("AVM1 warning: cannot set member '"+r+"' on undefined object"):o instanceof Ry?py("AVM1 warning: cannot set member '"+r+"' on super"):void 0!==r&&Sy(t.context,o,r,i)}function pv(t){var e=t.stack,n=e.pop();e.push(function(t){return"object"==typeof t&&t&&t instanceof Y_}(n)?n._target:void 0)}function dv(t,e){var n=t.stack,i=e[0];!function(t,e,n){if(ap(e))py("The with statement object cannot be undefined.");else{var i=t.context,r=t.scopeList,o=new gy(Am(i,e),r);Xv(t.pushScope(o),n)}}(t,n.pop(),i)}function fv(t){var e=t.stack;e.push(_m(t.context,e.pop()))}function _v(t){var e=t.stack;e.push(ym(t.context,e.pop()))}function gv(t){var e=t.stack,n=function(t){if(null===t)return"null";if("object"==typeof t){if(t instanceof Y_)return"movieclip";if(t instanceof Nf)return"function"}return typeof t}(e.pop());e.push(n)}function mv(t,e,n){var i=t.stack;arguments.length>1?(n=dm(t.context,n),e=dm(t.context,e)):(n=dm(t.context,i.pop()),e=dm(t.context,i.pop()));var r=typeof e,o=typeof n,a="string"===r,s="string"===o;return a&&s?i[i.length]=e+n:a||s?i[i.length]=(a?e:ym(t.context,e))+(s?n:ym(t.context,n)):(t.isSwfVersion7||(null!==e&&"undefined"!==r||(e=0),null!==n&&"undefined"!==o||(n=0)),null==n||null==e?i.push(NaN):isFinite(e)&&isFinite(n)?i.push(e+n):e===-1/0&&n===-1/0?i.push(-1/0):isNaN(e)||isNaN(n)?i.push(NaN):e===n?i.push(1/0):isFinite(e)||isFinite(n)?isFinite(e)?isFinite(n)||i.push(n):i.push(e):i.push(NaN),i[i.length-1])}function yv(t){var e=t.stack,n=e.pop(),i=e.pop();e.push(Cy(t.context,i,n))}function Av(t){var e=t.stack,n=e.pop(),i=e.pop();t.isSwfVersion7||(void 0===n&&(n=0),void 0===i&&(i=0)),n=_m(t.context,n),i=_m(t.context,i),!isFinite(n)||!isFinite(i)||0==n&&0==i?isNaN(n)||isNaN(i)||!isFinite(n)&&!isFinite(i)||isFinite(n)?e.push(NaN):e.push(i):e.push(i%n)}function vv(t){var e=t.stack,n=mm(t.context,e.pop()),i=mm(t.context,e.pop());e.push(i&n)}function bv(t){var e=t.stack,n=mm(t.context,e.pop()),i=mm(t.context,e.pop());e.push(i<<n)}function xv(t){var e=t.stack,n=mm(t.context,e.pop()),i=mm(t.context,e.pop());e.push(i|n)}function Cv(t){var e=t.stack,n=mm(t.context,e.pop()),i=mm(t.context,e.pop());e.push(i>>n)}function Iv(t){var e=t.stack,n=mm(t.context,e.pop()),i=mm(t.context,e.pop());e.push(i>>>n)}function Ev(t){var e=t.stack,n=mm(t.context,e.pop()),i=mm(t.context,e.pop());e.push(i^n)}function wv(t){var e=t.stack,n=_m(t.context,e.pop());n--,e.push(n)}function Sv(t){var e=t.stack,n=_m(t.context,e.pop());n++,e.push(n)}function Dv(t){var e=t.stack;e.push(e[e.length-1])}function Tv(t){t.isEndOfActions=!0}function Pv(t){var e=t.stack;e.push(e.pop(),e.pop())}function Bv(t,e){var n=t.stack,i=t.registers,r=e[0];r<0||r>=i.length||(i[r]=n[n.length-1])}function Ov(t){var e=t.stack,n=e.pop(),i=e.pop();e.push(Ey(i,n))}function Mv(t){var e=t.stack,n=e.pop();e.push(null),ap(n)?py("AVM1 warning: cannot iterate over undefined object"):Oy(n,(function(t){e.push(t)}),null)}function Lv(t){var e=t.stack,n=e.pop(),i=e.pop();e.push(i===n)}function Rv(t,e){var n=t.stack,i=e?e[1]:n.pop(),r=e?e[0]:n.pop();return n[n.length]=Cy(t.context,i,r)}function Nv(t){var e=t.stack,n=t.isSwfVersion5,i=ym(t.context,e.pop()),r=ym(t.context,e.pop())>i;e.push(n?r:r?1:0)}function Fv(t,e){var n=t.stack,i=t.scopeList.scope,r=e[0],o=e[1],a=Qy(t,r,o,e[2],e[3],e[4],e[5]);o?(i.alPut(o,a),Ty(t.context,o,i)):n.push(a)}function kv(t){var e=t.stack,n=t.context,i=Am(n,e.pop()),r=Am(n,e.pop()).alGetPrototypeProperty(),o=i.alGetPrototypeProperty();r.alPrototype=o;var a=new Lf(65,i);r.alSetOwnProperty("__constructor__",a)}function Uv(t){var e=t.stack,n=e.pop(),i=e.pop();e.push(Ey(n,i)?n:null)}function Vv(t){var e=t.stack,n=e.pop(),i=+e.pop();Vy(i,e.length);for(var r=[],o=0;o<i;o++)r.push(e.pop());n._as2Interfaces=r}function jv(t,e){e[0];var n=e[1],i=e[2],r=e[3],o=e[4];!function(t,e,n,i,r,o,a,s){var l,u=t.context,c=t.scopeList,h=t.registers,p=u.isTryCatchListening;try{u.isTryCatchListening=!0,Xv(t.pushScope(),o)}catch(e){u.isTryCatchListening=p,i&&e instanceof by?("string"==typeof r?c.scope.alPut(r,e.error):h[r]=e.error,Xv(t.pushScope(),a)):l=e}if(u.isTryCatchListening=p,n&&Xv(t.pushScope(),s),l)throw l}(t,0,e[5],r,n,i,o,e[6])}function Gv(t){var e=t.stack.pop();throw new by(e)}function Qv(t){var e=t.stack,n=jy(e),i=e.length;e.push(void 0);var r=t.actions.fscommand.apply(t.actions,n);e[i]=r}function zv(t,e){}function Hv(t,e){var n,i;try{i=function(t,e){t.stack;var n=e.actionCode,i=e.args;t.context.actionTracer;var r=!1;switch(0|n){case 129:Jy(t,i);break;case 131:Zy(t,i);break;case 4:$y(t);break;case 5:tA(t);break;case 6:eA(t);break;case 7:nA(t);break;case 8:iA(t);break;case 9:rA(t);break;case 138:r=oA(t,i);break;case 139:aA(t,i);break;case 140:sA(t,i);break;case 150:lA(t,i);break;case 23:uA(t);break;case 10:cA(t);break;case 11:hA(t);break;case 12:pA(t);break;case 13:dA(t);break;case 14:fA(t);break;case 15:_A(t);break;case 16:gA(t);break;case 17:mA(t);break;case 18:yA(t);break;case 19:AA(t);break;case 20:vA(t);break;case 49:bA(t);break;case 33:xA(t);break;case 21:CA(t);break;case 53:IA(t);break;case 41:EA(t);break;case 24:wA(t);break;case 50:SA(t);break;case 54:DA(t);break;case 51:TA(t);break;case 55:PA(t);break;case 153:case 137:break;case 157:r=OA(t);break;case 158:MA(t);break;case 28:LA(t);break;case 29:RA(t);break;case 154:NA(t,i);break;case 159:FA(t,i);break;case 32:kA(t);break;case 34:UA(t);break;case 35:VA(t);break;case 36:jA(t);break;case 37:GA(t);break;case 39:QA(t);break;case 40:zA(t);break;case 141:r=HA(t);break;case 38:XA(t);break;case 52:YA(t);break;case 48:qA(t);break;case 61:KA(t);break;case 82:WA(t);break;case 136:ZA(t,i);break;case 155:$A(t,i);break;case 60:tv(t);break;case 65:ev(t);break;case 58:nv(t);break;case 59:iv(t);break;case 70:rv(t);break;case 73:ov(t);break;case 78:av(t);break;case 66:sv(t);break;case 67:lv(t);break;case 83:uv(t);break;case 64:cv(t);break;case 79:hv(t);break;case 69:pv(t);break;case 148:dv(t,i);break;case 74:fv(t);break;case 75:_v(t);break;case 68:gv(t);break;case 71:mv(t);break;case 72:yv(t);break;case 63:Av(t);break;case 96:vv(t);break;case 99:bv(t);break;case 97:xv(t);break;case 100:Cv(t);break;case 101:Iv(t);break;case 98:Ev(t);break;case 81:wv(t);break;case 80:Sv(t);break;case 76:Dv(t);break;case 62:Tv(t);break;case 77:Pv(t);break;case 135:Bv(t,i);break;case 84:Ov(t);break;case 85:Mv(t);break;case 102:Lv(t);break;case 103:Rv(t);break;case 104:Nv(t);break;case 142:Fv(t,i);break;case 105:kv(t);break;case 43:Uv(t);break;case 44:Vv(t);break;case 143:jv(t,i);break;case 42:Gv(t);break;case 45:Qv(t);break;case 0:t.isEndOfActions=!0;break;default:throw new Error("Unknown action code: "+n)}return r}(t,e),t.recoveringFromError=!1}catch(e){n=t.context;var r=Py(e);if(w_.value&&!n.isTryCatchListening||r instanceof xy)throw r;if(r instanceof by)throw r;if(If.instance.reportTelemetry({topic:"error",error:1}),!t.recoveringFromError){if(n.errorsIgnored++>=_y)throw new xy("long running script -- AVM1 errors limit is reached");console.error("AVM1 error: "+e),t.recoveringFromError=!0}}return i}function Xv(t,e){e.ir||e.compiled||function(t,e){var n,i=t.context,r=new ry(e,i.swfVersion),o=new $m;o.registersLimit=t.registers.length,o.parentResults=e.parent&&e.parent.ir;var a=o.analyze(r);e.ir=a,T_.value&&(n=(new hy).generate(a,e.debugPath),e.compiled=n)}(t,e);var n=t.context,i=t.scopeList.scope.adaptee;i&&i._deferScriptExecution&&(n.deferScriptExecution=!0),i&&(Y_.currentMCAssetNameSpace=i.assetNamespace);var r=e.compiled;if(r)return r(t);for(var o=0,a=n.abortExecutionAt,s=e.ir,l=0,u=s.actions[l];u&&!t.isEndOfActions;){if(o++%fy==0&&Date.now()>=a)throw new xy("long running script -- AVM1 instruction hang timeout");l=Hv(t,u.action)?u.conditionalJumpTo:u.next,u=s.actions[l]}return t.stack.pop()}var Yv=function(){function t(){this._indentation=0,this._indentStringCache=[]}return t.prototype._getIndentString=function(){return this._indentStringCache[this._indentation]||(this._indentStringCache[this._indentation]=new Array(this._indentation+1).join(".."))},t.prototype.print=function(t,e){for(var n=t.position,i=t.actionCode,r=t.actionName,o=[],a=0;a<e.length;a++){var s=e[a];if(s&&"object"==typeof s){var l=s.alGetConstructorProperty();o.push("["+(l?l.name:"Object")+"]")}else o.push(s)}console.log("AVM1 trace: "+this._getIndentString()+n+": "+r+"("+i.toString(16)+"), stack="+o)},t.prototype.indent=function(){this._indentation++},t.prototype.unindent=function(){this._indentation--},t.prototype.message=function(t){console.log("AVM1 trace: ------- "+t)},t}(),qv=function(){function t(){}return t.CDATA_NODE=100,t.COMMENT_NODE=101,t.DOCUMENT_TYPE_NODE=102,t.ELEMENT_NODE=1,t.PROCESSING_INSTRUCTION_NODE=103,t.TEXT_NODE=3,t.XML_DECLARATION=104,t}(),Kv=function(t){function e(e){return t.call(this,qv.DOCUMENT_TYPE_NODE,"null")||this}return o(e,t),e.prototype.axCallPublicProperty=function(t,e){return null},e.prototype.axGetPublicProperty=function(t){return null},e.prototype.axSetPublicProperty=function(t,e){return null},e.prototype.createElement=function(t){return console.log("createElement not implemented yet in flash/XMLDocument"),null},e.prototype.createTextNode=function(t){return console.log("createTextNode not implemented yet in flash/XMLDocument"),null},e.prototype.parseXML=function(t){console.log("parseXML not implemented yet in flash/XMLDocument")},e.prototype.toString=function(){return console.log("toString not implemented yet in flash/XMLDocument"),""},e}(mg),Wv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getLevelForRoot=function(t){return 0},e.prototype._getRootForLevel=function(t){return null},e.prototype._addRoot=function(t,e){},e.prototype._removeRoot=function(t){},e}(Ws),Jv=function(){return function(){}}(),Zv=function(){return function(){}}(),$v=function(){return function(){}}(),tb=function(){return function(){}}(),eb=function(){return function(){}}(),nb=function(){return function(){}}(),ib=function(){return function(){}}(),rb=function(){return function(){}}(),ob=function(){return function(){}}(),ab=function(){return function(){}}(),sb=function(){return function(){this.flash={display:{AVM1Movie:Wv,Stage:i_},events:{Event:Event,KeyboardEvent:KeyboardEvent,MouseEvent:MouseEvent,ProgressEvent:ProgressEvent},external:{ExternalInterface:nb},filters:{},system:{Capabilities:eb,Security:tb,fscommand:$v},ui:{ContextMenu:Jv,ContextMenuItem:Zv,Mouse:ib},media:{SoundChannel:rb,SoundTransform:ob,SoundMixer:ab},xml:{XMLDocument:Kv}},this.player={}}}(),lb=function(){function t(){this.avmVersion=Oh.AVM1,this.enterEvent=new c("enterFrame"),this.exitEvent=new c("exitFrame"),this.avm1Listener={},this._collectedDispatcher=[]}return Object.defineProperty(t.prototype,"factory",{get:function(){if(!this._factory)throw"AVM1Handler - no factory set";return this._factory},enumerable:!1,configurable:!0}),t.prototype.init=function(t,e,n){var i=this;if(_l.useAVM1=!0,this._avmStage)n(!1);else{this._avmStage=t,this._avmStage.mouseManager.eventBubbling=!1,this._factory=new Km(new vy(e.swfVersion)),this._factory.avm1Context.sec=new sb,this._factory.avm1Context.setStage(this._avmStage,this,document),this._factory.avm1Context.swfVersion=e.swfVersion,this._avmStage.scaleMode=Zp.SHOW_ALL,this._avmStage.align=$p.TOP,Ng.tracelevel=Rg.ALL,Ng._scenegraphFactory=this._factory,dt.enableParser(yf),this._factory.avm1Context.globals.SWF_BASE_URL=e.url.substring(0,e.url.lastIndexOf("/")+1),this.clearAllAVM1Listener();var r=this._avmStage.view.stage;r.addEventListener(ml.MOUSE_DOWN,(function(t){return i.onMouseEvent(t)})),r.addEventListener(ml.MOUSE_UP,(function(t){return i.onMouseEvent(t)})),r.addEventListener(ml.MOUSE_MOVE,(function(t){return i.onMouseEvent(t)})),r.addEventListener(Xc.KEYDOWN,(function(t){return i.onKeyEvent(t)})),r.addEventListener(Xc.KEYUP,(function(t){return i.onKeyEvent(t)})),this._avmStage.avmTestHandler&&(this._factory.avm1Context.actions.originalTrace=this._factory.avm1Context.actions.trace,this._factory.avm1Context.actions.trace=function(t){i._factory.avm1Context.actions.originalTrace(t),i._avmStage.avmTestHandler.addMessage(t)}),n(!0)}},t.prototype.collectMCs=function(t,e,n){for(var i,r=t.numChildren;r>0;)r--,(i=t.getChildAt(r)).isAsset(yl)&&this.collectMCs(i,e,n),i.hasEventListener(n.type)&&e.push(i)},t.prototype.enterFrame=function(t){_l.execute_queue(),this._avmStage.root.advanceFrame();var e=[];this.collectMCs(this._avmStage.root,e,this.enterEvent);for(var n=0;n<e.length;n++)e[n].dispatchEvent(this.enterEvent);O_.CompleteEventRegistering(),_l.execute_queue(),_l.execute_intervals(t),_l.execute_queue();var i=[];this.collectMCs(this._avmStage.root,i,this.exitEvent);for(n=0;n<i.length;n++)i[n].dispatchEvent(this.exitEvent);_l.execute_queue()},t.prototype.onKeyEvent=function(t){if(this.avm1Listener[t.type]){this._collectedDispatcher.length=0;var e,n=0;for(n=0;n<this._avmStage.root.numChildren;n++)(e=this._avmStage.root.getChildAt(n)).isAsset(yl)&&this.collectMousEvents(e);for(n=0;n<this._collectedDispatcher.length;n++)if(this.avm1Listener[t.type]&&this.avm1Listener[t.type][this._collectedDispatcher[n].id])for(var i=this.avm1Listener[t.type][this._collectedDispatcher[n].id],r=0;r<i.length;r++)"number"==typeof i[r].keyCode&&i[r].keyCode!=t.keyCode||i[r].callback();_l.execute_queue()}},t.prototype.addAVM1EventListener=function(t,e,n,i){this.avm1Listener[e]||(this.avm1Listener[e]={}),this.avm1Listener[e][t.id]||(this.avm1Listener[e][t.id]=[]);var r=this.avm1Listener[e][t.id];r.push({type:e,callback:n}),i&&"number"==typeof i.keyCode&&(r[r.length-1].keyCode=i.keyCode)},t.prototype.removeAVM1EventListener=function(t,e,n){this.avm1Listener[e]&&delete this.avm1Listener[e][t.id]},t.prototype.clearAllAVM1Listener=function(){this.avm1Listener={}},t.prototype.collectMousEvents=function(t){for(var e,n=t.numChildren;n>0;)n--,e=t.getChildAt(n),this.collectMousEvents(e);t.isAsset(yl)&&(this._collectedDispatcher[this._collectedDispatcher.length]=t)},t.prototype.onMouseEvent=function(t){if(this.avm1Listener[t.type]){this._collectedDispatcher.length=0;var e,n,i=0,r=this._avmStage.root.numChildren;for(i=0;i<r;i++)(e=this._avmStage.root.getChildAt(i)).isAsset(yl)&&this.collectMousEvents(e);for(r=this._collectedDispatcher.length,i=0;i<r;i++){var o=this.avm1Listener[t.type];if(o&&o[this._collectedDispatcher[i].id]){n=o[this._collectedDispatcher[i].id].length;for(var a=0;a<n;a++){var s=o[this._collectedDispatcher[i].id];s&&s[a]&&s[a].callback()}}}_l.execute_queue()}},t.prototype.dispose=function(){},t.prototype.resizeStage=function(){},t.prototype.addAsset=function(t,e){if(t.isAsset(yl)&&e&&t.isAVMScene){var n=Vm(t.clone(),this._factory.avm1Context);this._factory.avm1Context.globals._addRoot(0,n.adaptee)}},t}();function ub(){if(!cb.usePokiSDK)return!0;if(!PokiSDK||!PokiSDK.hasOwnProperty("adBlocked"))throw"AS2 is trying to use the PokiSDK before it has been init";return PokiSDK.adBlocked}console.debug("AwayFL - AVM1 - 0.2.175");var cb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,["init","isAdBlocked","gameLoadingStart","gameLoadingFinished","commercialBreak","gameplayStart","gameplayStop","isTablet","isMobile","isDesktop"],[],null,e.prototype.avm1Constructor)},e.prototype.avm1Constructor=function(){},e.init=function(t,e,n){var i=function(t){};null!=e&&null!=n&&(i=function(t){var i=e.alGet(n.toLowerCase());i&&wm(i)?i.alCall(e,[t]):i&&i.value&&i.value.alCall(e,[t])}),i(ub())},e.isAdBlocked=function(){return ub()},e.gameLoadingStart=function(){ub()||PokiSDK.gameLoadingStart()},e.gameLoadingFinished=function(){ub()||PokiSDK.gameLoadingFinished()},e.gameplayStart=function(){ub()||PokiSDK.gameplayStart()},e.gameplayStop=function(){ub()||PokiSDK.gameplayStop()},e.commercialBreak=function(t,e,n){var i=function(){};null!=e&&null!=n&&(i=function(){n.alCall(e)}),ub()?i():(E.setVolume(0),PokiSDK.commercialBreak().then((function(){E.setVolume(1),i()})))},e.happyTime=function(t,e){ub()||PokiSDK.happyTime(e)},e.isTablet=function(){return/(?:ipad|playbook|(?:android|bb\d+|meego|silk)(?! .+? mobile))/i.test(navigator.userAgent)},e.isMobile=function(){return/(?:phone|windows\s+phone|ipod|blackberry|(?:android|bb\d+|meego|silk|googlebot) .+? mobile|palm|windows\s+ce|opera\smini|avantgo|mobilesafari|docomo)/i.test(navigator.userAgent)},e.isDesktop=function(){return!e.isTablet()&&!e.isMobile()},e.usePokiSDK=!0,e}(Rf),hb=function(){return function(t){window.initPokiBridge=function(e){flash.Ready(),t&&!window.pokiAdBlock||flash.AdBlocked(),window.commercialBreak=function(){t?(Cf.instance().pause(),PokiSDK.commercialBreak().then((function(){Cf.instance().unPause(),flash.commercialBreakCompleted()}))):flash.commercialBreakCompleted()},window.rewardedBreak=function(){t?(Cf.instance().pause(),PokiSDK.rewardedBreak().then((function(t){Cf.instance().unPause(),flash.rewardedBreakCompleted(t)}))):flash.rewardedBreakCompleted(!0)},window.isTablet=function(){return/(?:ipad|playbook|(?:android|bb\d+|meego|silk)(?! .+? mobile))/i.test(navigator.userAgent)},window.isMobile=function(){return/(?:phone|windows\s+phone|ipod|blackberry|(?:android|bb\d+|meego|silk|googlebot) .+? mobile|palm|windows\s+ce|opera\smini|avantgo|mobilesafari|docomo)/i.test(navigator.userAgent)},window.isDesktop=function(){return!window.isTablet()&&!window.isMobile()}}}}();var pb={},db=["Public","Protected","PackageInternal","Private","Explicit","StaticProtected"];var fb=new Uint8Array(100),_b=function(){function t(t,e,n){this.type=t,this.uri=e,this.prefix=n,this.mangledName=null,So(void 0!==t),this.mangleName()}return t.prototype.toString=function(){return t=this.type,String(t)+(""!==this.uri?":"+this.uri:"");var t},t._hashNamespace=function(e,n,i){n+="",i+="";var r=t._knownNames.indexOf(n);if(r>=0)return e<<2|r;var o=1+n.length+i.length,a=o<101?fb:new Uint8Array(o),s=0;a[s++]=e;for(var l=0;l<n.length;l++)a[s++]=n.charCodeAt(l);for(l=0;l<i.length;l++)a[s++]=i.charCodeAt(l);return mf.hashBytesTo32BitsMD5(a,0,s)},t.prototype.mangleName=function(){if(0!==this.type||""!==this.uri){var e=t._hashNamespace(this.type,this.uri,this.prefix);this.mangledName=qh.variableLengthEncodeInt32(e)}else this.mangledName="Bg"},t.prototype.isPublic=function(){return 0===this.type},Object.defineProperty(t.prototype,"reflectedURI",{get:function(){return this.uri||(0===this.type?null:this.uri)},enumerable:!1,configurable:!0}),t._knownNames=[""],t}();function gb(t,e){var n=t+e;return pb[n]||(pb[n]=new _b(t,e,""))}function mb(t,e,n){var i=t+e+n,r=pb[i];return r||(r=pb[i]=new _b(t,e,n)),r}function yb(t){return"string"==typeof t?t:null==t?null:t+""}var Ab=Tt.instance.addStore("avm2",{ENABLE_DEBUG:!0,PRINT_BYTE_INSTRUCTION:!1,EMULATE_LOOKBEHIND:!0,ENABLE_LOOP_GUARD:!1,LOOP_GUARD_MIN_BRANCHES:3,LOOP_GUARD_MAX_LOOPS:1e5,COERCE_MODE:"soft",COERCE_RETURN_MODE:"primitive",MAX_INLINE_RETURN:5,CHECK_OBFUSCATED_NAME:!1,NO_FALL_TO_INT:!0,NO_PROPAGATE_SCOPES_FOR_TRY:!0,HTTP_STRING:"http://",EMIT_REAL_THIS:!0,UNSAFE_PROPAGATE_THIS:!0,UNSAFE_INLINE_CONST:!0,OPTIMISE_ON_IR:!0,NO_HOIST_MULTINAME:!0,NO_CHECK_FASTCALL_FOR_THIS:!0,NO_CHECK_BOXED_THIS:!0,CHEK_TRAIT_GET_CALL:!0,CHEK_TRAIT_FIND_PROP:!0,CHEK_TRAIT_SET:!0,CHEK_SUPER_TRAITS:!0,CHECK_FAST_CONSTRUCTOR:!0,FOLLOW_AS3_BUG:!1,USE_WEAK_REF:!0}),vb=function(){function t(e,n,i,r,o,a,s){void 0===a&&(a=null),void 0===s&&(s=!1),this.abc=e,this.index=n,this.kind=i,this.namespaces=r,this.name=o,this.parameterType=a,this.mutable=s,this.id=t._nextID++,this._mangledName=null,this.globalInfo=null,this.numeric=!1,this.numericValue=0,this.resolved={},this._scope=null,this._value=null,this._key=null}return t.prototype.set=function(t,e){var n="number"==typeof t||"string"==typeof t&&!t.includes(".")&&Number.isInteger(+t);this.namespaces=e?[e]:[],this.name=t,this.numeric=!1,n&&(this.numericValue=+t,this.numeric=!0)},t.prototype.drop=function(){this.mutable&&this.isRuntimeName&&(this.numeric=!1,this.name=void 0,this.namespaces=[],this.numericValue=NaN,this.resolved={},this._scope=null)},Object.defineProperty(t.prototype,"scope",{get:function(){return this._scope&&t._isWeak?this._scope.deref():this._scope},set:function(e){t._isWeak&&e?this._scope=new self.WeakRef(e):this._scope=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value&&t._isWeak?this._value.deref():this._value},set:function(e){t._isWeak&&e?this._value=new self.WeakRef(e):this._value=e},enumerable:!1,configurable:!0}),t.prototype.key=function(){if(this._key)return this._key;var t=this.toString();return this.mutable||(this._key=t),t},t.FromFQNString=function(e,n){var i=e.lastIndexOf("."),r=-1===i?"":e.substr(0,i),o=-1===i?e:e.substr(i+1);return new t(null,0,15,[gb(n,r)],o)},t.prototype._nameToString=function(){return this.isAnyName()?"*":this.isRuntimeName()?"["+this.name+"]":this.name},t.prototype.isRuntime=function(){switch(this.kind){case 7:case 13:case 9:case 14:return!1}return!0},t.prototype.isRuntimeName=function(){switch(this.kind){case 17:case 18:case 27:case 28:return!0}return!1},t.prototype.isRuntimeNamespace=function(){return this.kind>=15&&this.kind<=18},t.prototype.isAnyName=function(){return null===this.name},t.prototype.isAnyNamespace=function(){return!(this.isRuntimeNamespace()||this.namespaces.length>1)&&(0===this.namespaces.length||""===this.namespaces[0].uri)},t.prototype.isQName=function(){var t=this.kind;return 29===t||7===t||13===t||t>=15&&t<=18},Object.defineProperty(t.prototype,"namespace",{get:function(){return this.namespaces[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uri",{get:function(){return this.namespaces[0].uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prefix",{get:function(){return this.namespaces[0].prefix},set:function(t){var e=this.namespaces[0];e.prefix!==t&&(this.namespaces[0]=mb(e.type,e.uri,t))},enumerable:!1,configurable:!0}),t.prototype.equalsQName=function(t){return this.name===t.name&&this.namespaces[0].uri===t.namespaces[0].uri},t.prototype.matches=function(t){var e=t.isAnyName();if(e&&!t.isQName())return!0;if(!e&&this.name!==t.name)return!1;var n=this.namespaces[0].uri;if(""==n||"default"==n)return!0;for(var i=t.namespaces.length;i--;)if(""==t.namespaces[i].uri||t.namespaces[i].uri===n)return!0;return!1},t.prototype.isAttribute=function(){switch(this.kind){case 13:case 16:case 18:case 14:case 28:return!0}return!1},t.prototype.getMangledName=function(){return this._mangledName||this._mangleName()},t.prototype._mangleName=function(){var t="$Bg"+yb(this.name);return this.isRuntime()||(this._mangledName=t),t},t.prototype.getPublicMangledName=function(){return rp(this.name)?this.name:"$Bg"+yb(this.name)},t.isPublicQualifiedName=function(t){return 0===t.indexOf("$Bg")},t.getPublicMangledName=function(t){return rp(t)?t:"$Bg"+t},t.prototype.toFQNString=function(t){var e=this.namespaces[0].uri;return e.length&&(e+=t?"::":"."),e+this.name},t.prototype.toString=function(){var t,e=(t=this.kind,String(t)+" ");(e+=this.isAttribute()?"@":"",this.isRuntimeNamespace())?e+="["+(this.namespaces?this.namespaces.map((function(t){return String(t)})).join(", "):null)+"]::"+this._nameToString():this.isQName()?(e+=this.namespaces[0]+"::",e+=this._nameToString()):this.namespaces?(e+="{"+this.namespaces.map((function(t){return String(t)})).join(", ")+"}",e+="::"+this._nameToString()):(e+="{"+this.namespaces+"}",e+="::"+this._nameToString());return this.parameterType&&(e+="<"+this.parameterType+">"),e},t.prototype.toFlashlogString=function(){var t=this.uri;return t?t+"::"+this.name:this.name},t.stripPublicMangledName=function(t){if(0===t.indexOf("$Bg"))return t.substring(3)},t.FromSimpleName=function(e){var n,i="";"string"!=typeof e&&1===(null===(n=e._children)||void 0===n?void 0:n.length)?e=e._children[0]._value||"":i=e;var r=i.lastIndexOf("::");r>0?i=i.replace("::",":"):r=i.lastIndexOf(".");var o="",a=i;return r>0&&r<i.length-1&&(a=i.substring(r+1).trim(),o=i.substring(0,r).trim()),new t(null,0,15,[gb(0,o)],a)},t._isWeak=self.WeakRef&&Ab.USE_WEAK_REF,t._nextID=1,t}();function bb(t,e,n){Df(t,e,t.sec.AXFunction.axBox(n))}function xb(t){return this.classInfo.instanceInfo.getInterfaces(this.axClass).has(t)}var Cb=function(){function t(t,e,n){this.superTraits=t,this.protectedNs=e,this.protectedNsMappings=n,this.slots=[],this._nextSlotID=1,this.multinames={};var i=this._traits=Object.create(null);if(t){var r=t._traits;for(var o in r)i[o]=Object.create(r[o])}}return t.prototype.addTrait=function(t){var e=t.multiname,n=this._traits[e.name];n||(n=this._traits[e.name]=Object.create(null));var i=e.namespaces[0].mangledName,r=n[i];return n[i]=t,r},t.prototype.addSlotTrait=function(t){var e=t.slot;e?this._nextSlotID=e+1:e=t.slot=this._nextSlotID++,this.slots[e]=t},t.prototype.getTraitMultiname=function(t){return t.mutable?this.getTrait(t.namespaces,t.name):this.multinames[t.id]||(this.multinames[t.id]=this.getTrait(t.namespaces,t.name))},t.prototype.getTrait=function(t,e){var n,i=this._traits[e];if(!i)return null;for(var r=0;r<t.length;r++){var o=t[r];if(n=i[o.mangledName])return n;if(1===o.type)for(var a=this;a;){if(a.protectedNs===o&&(n=a.protectedNsMappings[e]))return n;a=a.superTraits}}return null},t.prototype.getTraitsList=function(){var t=[],e=this._traits;for(var n in e){var i=e[n];for(var r in i)t.push(i[r])}return t},t.prototype.getSlotPublicTraitNames=function(){for(var t=this.slots,e=[],n=1;n<t.length;n++){var i=t[n];i.multiname.namespace.isPublic()&&e.push(i.multiname.name)}return e},t.prototype.getSlot=function(t){return this.slots[t]},t}();function Ib(){var t=this.hasOwnProperty("classInfo")?"Object":this.classInfo.instanceInfo.multiname.name;return qh.concat3("[object ",t,"]")}function Eb(t){return null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t}var wb=Symbol("AX class marker");function Sb(){return this.$BgtoString.axCall(this)}function Db(){return this}function Tb(){return this.$BgvalueOf.axCall(this)}var Pb=Df,Bb=null;function Ob(t){return Bb.isPrototypeOf(t)||Eb(t)}function Mb(){if(!Bb){var t=Hb.prototype;Bb=Object.create(null),Pb(Bb,"axHasPropertyInternal",t.axHasPropertyInternal),Pb(Bb,"axHasProperty",t.axHasProperty),Pb(Bb,"axSetProperty",t.axSetProperty),Pb(Bb,"axHasProperty",t.axHasProperty),Pb(Bb,"axHasPublicProperty",t.axHasPublicProperty),Pb(Bb,"axSetPublicProperty",t.axSetPublicProperty),Pb(Bb,"axGetPublicProperty",t.axGetPublicProperty),Pb(Bb,"axCallPublicProperty",t.axCallPublicProperty),Pb(Bb,"axDeletePublicProperty",t.axDeletePublicProperty),Pb(Bb,"axGetProperty",t.axGetProperty),Pb(Bb,"axDeleteProperty",t.axDeleteProperty),Pb(Bb,"axGetSuper",t.axGetSuper),Pb(Bb,"axSetSuper",t.axSetSuper),Pb(Bb,"axSetSlot",t.axSetSlot),Pb(Bb,"axGetSlot",t.axGetSlot),Pb(Bb,"axCallProperty",t.axCallProperty),Pb(Bb,"axCallSuper",t.axCallSuper),Pb(Bb,"axConstructProperty",t.axConstructProperty),Pb(Bb,"axResolveMultiname",t.axResolveMultiname),Pb(Bb,"axNextNameIndex",t.axNextNameIndex),Pb(Bb,"axNextName",t.axNextName),Pb(Bb,"axNextValue",t.axNextValue),Pb(Bb,"axGetEnumerableKeys",t.axGetEnumerableKeys),Pb(Bb,"axImplementsInterface",xb),Pb(Bb,"traits",new Cb(null,null,Object.create(null))),Pb(Bb,"isPrototypeOf",Object.prototype.isPrototypeOf),Pb(Bb,"hasOwnProperty",Object.prototype.hasOwnProperty),Pb(Bb,wb,!0),Bb.$BgtoString=Ib,Bb.toString=Sb,Bb.$BgvalueOf=Db,Bb.valueOf=Tb}}function Lb(t,e){var n=new vb(null,0,17,[],null);return n.set(t,e||_b.PUBLIC),n}function Rb(t){return op(t)?t:"$Bg"+t}function Nb(t){return"string"==typeof t?t:null==t?"null":t.toString()}var Fb=new vb(null,0,17,[],null,null,!0),kb={NotImplementedError:{code:1001,message:"The method %1 is not implemented."},InvalidPrecisionError:{code:1002,message:"Number.toPrecision has a range of 1 to 21. Number.toFixed and Number.toExponential have a range of 0 to 20. Specified value is not within expected range."},InvalidRadixError:{code:1003,message:"The radix argument must be between 2 and 36; got %1."},InvokeOnIncompatibleObjectError:{code:1004,message:"Method %1 was invoked on an incompatible object."},ArrayIndexNotIntegerError:{code:1005,message:"Array index is not a positive integer (%1)."},CallOfNonFunctionError:{code:1006,message:"%1 is not a function."},ConstructOfNonFunctionError:{code:1007,message:"Instantiation attempted on a non-constructor."},ConvertNullToObjectError:{code:1009,message:"Cannot access a property or method of a null object reference."},ConvertUndefinedToObjectError:{code:1010,message:"A term is undefined and has no properties."},ClassNotFoundError:{code:1014,message:"Class %1 could not be found."},DescendentsError:{code:1016,message:"Descendants operator (..) not supported on type %1."},StackOverflowError:{code:1023,message:"Stack overflow occurred."},CpoolIndexRangeError:{code:1032,message:"Cpool index %1 is out of range %2."},CpoolEntryWrongTypeError:{code:1033,message:"Cpool entry %1 is wrong type."},CheckTypeFailedError:{code:1034,message:"Type Coercion failed: cannot convert %1 to %2."},CannotAssignToMethodError:{code:1037,message:"Cannot assign to a method %1 on %2."},CantUseInstanceofOnNonObjectError:{code:1040,message:"The right-hand side of instanceof must be a class or function."},IsTypeMustBeClassError:{code:1041,message:"The right-hand side of operator must be a class."},InvalidMagicError:{code:1042,message:"Not an ABC file.  major_version=%1 minor_version=%2."},UnsupportedTraitsKindError:{code:1045,message:"Unsupported traits kind=%1."},PrototypeTypeError:{code:1049,message:"Prototype objects must be vanilla Objects."},ConvertToPrimitiveError:{code:1050,message:"Cannot convert %1 to primitive."},InvalidURIError:{code:1052,message:"Invalid URI passed to %1 function."},WriteSealedError:{code:1056,message:"Cannot create property %1 on %2."},WrongArgumentCountError:{code:1063,message:"Argument count mismatch on %1. Expected %2, got %3."},UndefinedVarError:{code:1065,message:"Variable %1 is not defined."},ReadSealedError:{code:1069,message:"Property %1 not found on %2 and there is no default value."},ConstWriteError:{code:1074,message:"Illegal write to read-only property %1 on %2."},XMLPrefixNotBound:{code:1083,message:'The prefix "%1" for element "%2" is not bound.'},XMLUnterminatedElementTag:{code:1085,message:'The element type "%1" must be terminated by the matching end-tag "</%2>".'},XMLOnlyWorksWithOneItemLists:{code:1086,message:"The %1 method only works on lists containing one item."},XMLAssignmentToIndexedXMLNotAllowed:{code:1087,message:"Assignment to indexed XML is not allowed."},XMLMarkupMustBeWellFormed:{code:1088,message:"The markup in the document following the root element must be well-formed."},XMLAssigmentOneItemLists:{code:1089,message:"Assignment to lists with more than one item is not supported."},XMLMalformedElement:{code:1090,message:"XML parser failure: element is malformed."},XMLUnterminatedCData:{code:1091,message:"XML parser failure: Unterminated CDATA section."},XMLUnterminatedXMLDecl:{code:1092,message:"XML parser failure: Unterminated XML declaration."},XMLUnterminatedDocTypeDecl:{code:1093,message:"XML parser failure: Unterminated DOCTYPE declaration."},XMLUnterminatedComment:{code:1094,message:"XML parser failure: Unterminated comment."},XMLUnterminatedElement:{code:1096,message:"XML parser failure: Unterminated element."},XMLNamespaceWithPrefixAndNoURI:{code:1098,message:"Illegal prefix %1 for no namespace."},RegExpFlagsArgumentError:{code:1100,message:"Cannot supply flags when constructing one RegExp from another."},InvalidBaseClassError:{code:1108,message:"The OP_newclass opcode was used with the incorrect base class."},XMLInvalidName:{code:1117,message:"Invalid XML name: %1."},XMLIllegalCyclicalLoop:{code:1118,message:"Illegal cyclical loop between nodes."},FilterError:{code:1123,message:"Filter operator not supported on type %1."},OutOfRangeError:{code:1125,message:"The index %1 is out of range %2."},VectorFixedError:{code:1126,message:"Cannot change the length of a fixed Vector."},TypeAppOfNonParamType:{code:1127,message:"Type application attempted on a non-parameterized type."},WrongTypeArgCountError:{code:1128,message:"Incorrect number of type parameters for %1. Expected %2, got %3."},JSONCyclicStructure:{code:1129,message:"Cyclic structure cannot be converted to JSON string."},JSONInvalidReplacer:{code:1131,message:"Replacer argument to JSON stringifier must be an array or a two parameter function."},JSONInvalidParseInput:{code:1132,message:"Invalid JSON parse input."},InvalidRangeError:{code:1506,message:"The specified range is invalid."},NullArgumentError:{code:1507,message:"Argument %1 cannot be null."},InvalidArgumentError:{code:1508,message:"The value specified for argument %1 is invalid."},ArrayFilterNonNullObjectError:{code:1510,message:"When the callback argument is a method of a class, the optional this argument must be null."},InvalidParamError:{code:2004,message:"One of the parameters is invalid."},ParamRangeError:{code:2006,message:"The supplied index is out of bounds."},NullPointerError:{code:2007,message:"Parameter %1 must be non-null."},InvalidEnumError:{code:2008,message:"Parameter %1 must be one of the accepted values."},CantInstantiateError:{code:2012,message:"%1 class cannot be instantiated."},InvalidBitmapData:{code:2015,message:"Invalid BitmapData."},EOFError:{code:2030,message:"End of file was encountered.",fqn:"flash.errors.EOFError"},CompressedDataError:{code:2058,message:"There was an error decompressing the data.",fqn:"flash.errors.IOError"},EmptyStringError:{code:2085,message:"Parameter %1 must be non-empty string."},ProxyGetPropertyError:{code:2088,message:"The Proxy class does not implement getProperty. It must be overridden by a subclass."},ProxySetPropertyError:{code:2089,message:"The Proxy class does not implement setProperty. It must be overridden by a subclass."},ProxyCallPropertyError:{code:2090,message:"The Proxy class does not implement callProperty. It must be overridden by a subclass."},ProxyHasPropertyError:{code:2091,message:"The Proxy class does not implement hasProperty. It must be overridden by a subclass."},ProxyDeletePropertyError:{code:2092,message:"The Proxy class does not implement deleteProperty. It must be overridden by a subclass."},ProxyGetDescendantsError:{code:2093,message:"The Proxy class does not implement getDescendants. It must be overridden by a subclass."},ProxyNextNameIndexError:{code:2105,message:"The Proxy class does not implement nextNameIndex. It must be overridden by a subclass."},ProxyNextNameError:{code:2106,message:"The Proxy class does not implement nextName. It must be overridden by a subclass."},ProxyNextValueError:{code:2107,message:"The Proxy class does not implement nextValue. It must be overridden by a subclass."},TooFewArgumentsError:{code:2001,message:"Too few arguments were specified; got %1, %2 expected."},ParamTypeError:{code:2005,message:"Parameter %1 is of the incorrect type. Should be type %2."},SocketConnectError:{code:2011,message:"Socket connection failed to %1:%2."},CantAddSelfError:{code:2024,message:"An object cannot be added as a child of itself."},NotAChildError:{code:2025,message:"The supplied DisplayObject must be a child of the caller."},UnhandledError:{code:2044,message:"Unhandled %1:."},AllowDomainArgumentError:{code:2052,message:"Only String arguments are permitted for allowDomain and allowInsecureDomain."},DelayRangeError:{code:2066,message:"The Timer delay specified is out of range."},ExternalInterfaceNotAvailableError:{code:2067,message:"The ExternalInterface is not available in this container. ExternalInterface requires Internet Explorer ActiveX, Firefox, Mozilla 1.7.5 and greater, or other browsers that support NPRuntime."},InvalidLoaderMethodError:{code:2069,message:"The Loader class does not implement this method."},InvalidStageMethodError:{code:2071,message:"The Stage class does not implement this property or method."},TimelineObjectNameSealedError:{code:2078,message:"The name property of a Timeline-placed object cannot be modified."},AlreadyConnectedError:{code:2082,message:"Connect failed because the object is already connected."},CloseNotConnectedError:{code:2083,message:"Close failed because the object is not connected."},ArgumentSizeError:{code:2084,message:"The AMF encoding of the arguments cannot exceed 40K."},AsyncError:{code:2095,message:"%1 was unable to invoke callback %2."},LoadingObjectNotSWFError:{code:2098,message:"The loading object is not a .swf file, you cannot request SWF properties from it."},LoadingObjectNotInitializedError:{code:2099,message:"The loading object is not sufficiently loaded to provide this information."},DecodeParamError:{code:2101,message:"The String passed to URLVariables.decode() must be a URL-encoded query string containing name/value pairs."},SceneNotFoundError:{code:2108,message:"Scene %1 was not found."},FrameLabelNotFoundError:{code:2109,message:"Frame label %1 not found in scene %2."},InvalidLoaderInfoMethodError:{code:2118,message:"The LoaderInfo class does not implement this method."},SecuritySwfNotAllowedError:{code:2121,message:"Security sandbox violation: %1: %2 cannot access %3. This may be worked around by calling Security.allowDomain."},UnknownFileTypeError:{code:2124,message:"Loaded file is an unknown type."},DefinitionNotFoundError:{code:2131,message:"Definition %1 cannot be found."},CantAddParentError:{code:2150,message:"An object cannot be added as a child to one of it's children (or children's children, etc.)."},Matrix3DRefCannontBeShared:{code:2189,message:"A Matrix3D can not be assigned to more than one DisplayObject."},ObjectWithStringsParamError:{code:2196,message:"Parameter %1 must be an Object with only String values."},AllowCodeImportError:{code:3226,message:"Cannot import a SWF file when LoaderContext.allowCodeImport is false."},PermissionDenied:{code:3315,message:"The current security context does not allow this operation."},InternalErrorIV:{code:3343,message:"Internal Error."}};for(var Ub in kb){var Vb=kb[Ub];Vb.typeName=Ub,kb[Vb.code]=Vb}function jb(t){var e="Error #"+t;if(!Ab.ENABLE_DEBUG)return e;var n=kb[t];return e+": "+(n&&n.message||"(unknown)")}function Gb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=t.message;return e.forEach((function(t,e){i=i.replace("%"+(e+1),t)})),"Error #"+t.code+": "+i}function Qb(t,e,n){e&&e.axApply||t.throwError("TypeError",kb.CallOfNonFunctionError,e&&e.methodInfo?e.methodInfo.name:"value"),e.methodInfo&&n<e.methodInfo.minArgs&&t.throwError("ArgumentError",kb.WrongArgumentCountError,e.methodInfo.name,e.methodInfo.minArgs,n)}function zb(t,e,n){if(!e||!e.axConstruct){var i=e&&e.classInfo?e.classInfo.instanceInfo.multiname.name:"value";t.throwError("TypeError",kb.ConstructOfNonFunctionError,i)}var r=e.classInfo.methodInfo;n<r.minArgs&&t.throwError("ArgumentError",kb.WrongArgumentCountError,e.classInfo.instanceInfo.multiname.name,r.minArgs,n)}var Hb=function(){function t(){}return t.classInitializer=function(){var e=this.dPrototype,n=t.prototype;bb(e,"$BghasOwnProperty",n.native_hasOwnProperty),bb(e,"$BgpropertyIsEnumerable",n.native_propertyIsEnumerable),bb(e,"$BgsetPropertyIsEnumerable",n.native_setPropertyIsEnumerable),bb(e,"$BgisPrototypeOf",n.native_isPrototypeOf),bb(e,"$BgtoLocaleString",n.toString)},t._init=function(){},t.init=function(){},t.prototype.native_isPrototypeOf=function(t){return this.isPrototypeOf(this.sec.box(t))},t.prototype.native_hasOwnProperty=function(t){return this.axHasOwnProperty(Lb(t))},t.prototype.native_propertyIsEnumerable=function(t){var e=Object.getOwnPropertyDescriptor(this,Rb(yb(t)));return!!e&&e.enumerable},t.prototype.native_setPropertyIsEnumerable=function(t,e){void 0===e&&(e=!0);var n=Rb(yb(t));e=!!e;var i=this.axClass.classInfo.instanceInfo;i.isSealed()&&this!==this.axClass.dPrototype&&this.sec.throwError("ReferenceError",kb.WriteSealedError,t,i.multiname.name);var r=Object.getOwnPropertyDescriptor(this.axClass.tPrototype,n);r&&this!==this.axClass.dPrototype||(r=Object.getOwnPropertyDescriptor(this,n))&&r.enumerable!==e&&(r.enumerable=e,Object.defineProperty(this,n,r))},t.prototype.axResolveMultiname=function(t){if(t.numeric)return t.numericValue;var e=t.name;if(t.mutable)return(i=this.traits.getTrait(t.namespaces,e))?i.multiname.getMangledName():"$Bg"+e;var n=t.resolved[this.axClassName];if(n)return n;var i,r=(i=this.traits.getTraitMultiname(t))?i.multiname.getMangledName():"$Bg"+e;return t.resolved[this.axClassName]=r,r},t.prototype.axHasProperty=function(t){return this.axHasPropertyInternal(t)},t.prototype.axHasPublicProperty=function(t){Fb.set(t);var e=this.axHasProperty(Fb);return Fb.drop(),e},t.prototype.axSetProperty=function(t,e,n){var i=t.name;if("number"==typeof i||rp(i=Nb(i)))this[+i]=e;else{var r,o=!1,a=this.traits.getTrait(t.namespaces,i);if(a){switch(r=a.multiname.getMangledName(),a.kind){case 1:this.sec.throwError("ReferenceError",kb.CannotAssignToMethodError,i,this.axClass.name.name);break;case 2:this.sec.throwError("ReferenceError",kb.ConstWriteError,i,this.axClass.name.name);break;case 4:case 6:104!==n&&this.sec.throwError("ReferenceError",kb.ConstWriteError,i,this.axClass.name.name),o=!0}var s=a.getType();s&&(e=s.axCoerce(e))}else r="$Bg"+i;this[r]=e,o&&Object.defineProperty(this,r,{writable:!1})}},t.prototype.axGetProperty=function(t){var e=this.axResolveMultiname(t),n=this[e];return"function"==typeof n?this.axGetMethod(e):void 0===n&&"number"!=typeof e?this[t.name]:n},t.prototype.axGetMethod=function(t){var e=this._methodClosureCache;e||(Object.defineProperty(this,"_methodClosureCache",{value:Object.create(null)}),e=this._methodClosureCache);var n=e[t];return n||(n=e[t]=this.sec.AXMethodClosure.Create(this,this[t])),n},t.prototype.axGetSuper=function(t,e){var n,i=Nb(t.name),r=t.namespaces,o=e.parent.object.tPrototype.traits.getTrait(r,i);if(2===o.kind||7===o.kind)n=o.get.call(this);else{var a=o.multiname.getMangledName(),s=e.parent.object.tPrototype[a];if(s)return this.sec.AXMethodClosure.Create(this,s)}return n},t.prototype.axSetSuper=function(t,e,n){var i=Nb(t.name),r=t.namespaces,o=e.parent.object.tPrototype.traits.getTrait(r,i),a=o.getType();a&&(n=a.axCoerce(n)),3===o.kind||7===o.kind?o.set.call(this,n):this[o.multiname.getMangledName()]=n},t.prototype.axDeleteProperty=function(t){var e=Nb(t.name),n=t.namespaces;return!this.traits.getTrait(n,e)&&delete this[t.getPublicMangledName()]},t.prototype.axCallProperty=function(t,e,n){var i=this[this.axResolveMultiname(t)];return Qb(this.sec,i,e.length),i.axApply(n?null:this,e)},t.prototype.axCallSuper=function(t,e,n){var i=e.parent.object.tPrototype[this.axResolveMultiname(t)];return Qb(this.sec,i,n.length),i.axApply(this,n)},t.prototype.axConstructProperty=function(t,e){var n=this[this.axResolveMultiname(t)];return zb(this.sec,n,e.length),n.axConstruct(e)},t.prototype.axHasPropertyInternal=function(t){return this.axResolveMultiname(t)in this},t.prototype.axHasOwnProperty=function(t){var e=this.axResolveMultiname(t);return this.hasOwnProperty(e)||this.axClass.tPrototype.hasOwnProperty(e)},t.prototype.axGetEnumerableKeys=function(){if(this.sec.isPrimitive(this))return[];for(var t=Object.getPrototypeOf(this),e=Object.keys(this),n=[],i=0;i<e.length;i++){var r=e[i];if(rp(r))n.push(r);else{if(t.hasOwnProperty(r))continue;var o=vb.stripPublicMangledName(r);void 0!==o&&n.push(o)}}return n},t.prototype.axGetPublicProperty=function(t){return this[vb.getPublicMangledName(t)]},t.prototype.axSetPublicProperty=function(t,e){this[vb.getPublicMangledName(t)]=e},t.prototype.axCallPublicProperty=function(t,e){return this[vb.getPublicMangledName(t)].axApply(this,e)},t.prototype.axDeletePublicProperty=function(t){return delete this[vb.getPublicMangledName(t)]},t.prototype.axGetSlot=function(t){return this[this.traits.getSlot(t).multiname.getMangledName()]},t.prototype.axSetSlot=function(t,e){var n=this.traits.getSlot(t),i=n.multiname.getMangledName(),r=n.getType();this[i]=r?r.axCoerce(e):e},t.prototype.axNextNameIndex=function(t){var e=this;0===t&&Df(e,"axEnumerableKeys",e.axGetEnumerableKeys()),Fb.drop();for(var n=e.axEnumerableKeys;t<n.length;){var i=n[t];if(Fb.set(i),e.axHasPropertyInternal(Fb))return t+1;t++}return 0},t.prototype.axNextName=function(t){return this.axEnumerableKeys[t-1]},t.prototype.axNextValue=function(t){return this.axGetPublicProperty(this.axNextName(t))},t.prototype.axSetNumericProperty=function(t,e){this.axSetPublicProperty(t,e)},t.prototype.axGetNumericProperty=function(t){return this.axGetPublicProperty(t)},t.forceNativeConstructor=!1,t.forceNativeMethods=!1,t.classSymbols=null,t.instanceSymbols=null,t}(),Xb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.axCoerce=function(t){return t},Object.defineProperty(e.prototype,"prototype",{get:function(){return this.dPrototype},enumerable:!1,configurable:!0}),e.classInitializer=null,e}(Hb),Yb=[];function qb(t,e,n){if(e&&"object"==typeof e)return e;var i=t.box(e);return i||(Yb.length?i=Yb[Yb.length-1].topScope().global.object:n.receiver&&(i=n.receiver.scope.global.object)),i}function Kb(t){if(!t||!t.sec)throw new TypeError("Conversion to Array failed");return t.sec.AXArray.axCoerce(t)}function Wb(t,e){if(1===e.length&&"number"==typeof e[0]){var n=e[0];try{return new Array(n)}catch(e){t.throwError("RangeError",kb.ArrayIndexNotIntegerError,n)}}return Array.apply(Array,e)}function Jb(t,e){return String(t).localeCompare(String(e))}function Zb(t,e,n,i){var r,o=0;for(r=0;r<n.length&&0===o;r++){var a=n[r],s=t[a],l=e[a],u=i[r];1&u&&(s=String(s).toLowerCase(),l=String(l).toLowerCase()),o=16&u?(s=+s)<(l=+l)?-1:s>l?1:0:String(s).localeCompare(String(l))}return 2&i[r-1]&&(o*=-1),o}function $b(t){var e=Object.create(this.tPrototype);return e.value=t,e}var tx,ex=function(t){function e(){var n=t.call(this)||this;return n.value=Wb(n.sec,arguments),e.wrapProxy(n)}return o(e,t),e.wrapProxy=function(t){return new Proxy(t,{set:function(t,e,n,i){return"string"!=typeof e||Number.isNaN(+e)?(t[e]=n,!0):(t.value[+e]=n,!0)},get:function(t,e,n){return"string"!=typeof e||Number.isNaN(+e)?t[e]:t.value[+e]}})},e.axBox=function(t){return e.wrapProxy($b.call(this,t))},e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;Df(this,"$BgCASEINSENSITIVE",1),Df(this,"$BgDESCENDING",2),Df(this,"$BgUNIQUESORT",4),Df(this,"$BgRETURNINDEXEDARRAY",8),Df(this,"$BgNUMERIC",16),bb(t,"$Bgpush",n.generic_push),bb(t,"$Bgpop",n.generic_pop),bb(t,"$Bgshift",n.generic_shift),bb(t,"$Bgunshift",n.generic_unshift),bb(t,"$Bgreverse",n.generic_reverse),bb(t,"$Bgconcat",n.generic_concat),bb(t,"$Bgslice",n.generic_slice),bb(t,"$Bgsplice",n.generic_splice),bb(t,"$Bgjoin",n.generic_join),bb(t,"$BgtoString",n.generic_toString),bb(t,"$BgindexOf",n.generic_indexOf),bb(t,"$BglastIndexOf",n.generic_lastIndexOf),bb(t,"$Bgevery",n.generic_every),bb(t,"$Bgsome",n.generic_some),bb(t,"$BgforEach",n.generic_forEach),bb(t,"$Bgmap",n.generic_map),bb(t,"$Bgfilter",n.generic_filter),bb(t,"$Bgsort",n.generic_sort),bb(t,"$BgsortOn",n.generic_sortOn),bb(t,"$BghasOwnProperty",n.native_hasOwnProperty),bb(t,"$BgpropertyIsEnumerable",n.native_propertyIsEnumerable),bb(t,"$BgtoLocaleString",n.generic_toString)},e.prototype.native_hasOwnProperty=function(t){return this.axHasOwnProperty(Lb(t))},e.prototype.native_propertyIsEnumerable=function(e){if("number"==typeof e||rp(e=Nb(e))){var n=Object.getOwnPropertyDescriptor(this.value,e);return!!n&&n.enumerable}t.prototype.native_propertyIsEnumerable.call(this,e)},e.axApply=function(t,e){return this.sec.createArrayUnsafe(Wb(this.sec,e))},e.axConstruct=function(t){return this.sec.createArrayUnsafe(Wb(this.sec,t))},e.prototype.push=function(){if(this.value.length+arguments.length>4294967295){for(var t=4294967295-this.value.length,e=0;e<t;e++)this.value.push(arguments[e]);return 4294967295}return this.value.push.apply(this.value,arguments)},e.prototype.generic_push=function(){if(this&&this.value instanceof Array)return this.push.apply(this,arguments);for(var t=this.axGetPublicProperty("length")>>>0,e=0;e<arguments.length;e++)this.axSetNumericProperty(t++,arguments[e]);return this.axSetPublicProperty("length",t),t},e.prototype.pop=function(){return this.value.pop()},e.prototype.generic_pop=function(){if(this&&this.value instanceof Array)return this.value.pop();var t=this.axGetPublicProperty("length")>>>0;if(t){var e=this.axGetNumericProperty(t-1);return Fb.name=t-1,Fb.namespaces=[_b.PUBLIC],this.axDeleteProperty(Fb),this.axSetPublicProperty("length",t-1),e}this.axSetPublicProperty("length",0)},e.prototype.shift=function(){return this.value.shift()},e.prototype.generic_shift=function(){return Kb(this).shift()},e.prototype.unshift=function(){return this.value.unshift.apply(this.value,arguments)},e.prototype.generic_unshift=function(){var t=Kb(this);return t.value.unshift.apply(t.value,arguments)},e.prototype.reverse=function(){return this.value.reverse(),this},e.prototype.generic_reverse=function(){return Kb(this).reverse()},e.prototype.concat=function(){for(var t=this.value.slice(),e=0;e<arguments.length;e++){var n=arguments[e];"object"==typeof n&&n&&n.sec&&Array.isArray(n.value)?t.push.apply(t,n.value):t.push(n)}return this.sec.createArrayUnsafe(t)},e.prototype.generic_concat=function(){return Kb(this).concat.apply(this,arguments)},e.prototype.slice=function(t,e){return this.sec.createArray(this.value.slice(t,e))},e.prototype.generic_slice=function(t,e){return Kb(this).slice(t,e)},e.prototype.splice=function(){var t=this.value;if(0!==arguments.length)return this.sec.createArray(t.splice.apply(t,arguments))},e.prototype.generic_splice=function(){return Kb(this).splice.apply(this,arguments)},e.prototype.join=function(t){return this.value.join(t)},e.prototype.generic_join=function(t){return Kb(this).join(t)},e.prototype.toString=function(){return this.value.join(",")},e.prototype.valueOf=function(){return this.value.join(",")},e.prototype.generic_toString=function(){return Kb(this).join(",")},e.prototype.indexOf=function(t,e){return this.value.indexOf(t,0|e)},e.prototype.generic_indexOf=function(t,e){return Kb(this).indexOf(t,0|e)},e.prototype.lastIndexOf=function(t,e){return this.value.lastIndexOf(t,arguments.length>1?e:2147483647)},e.prototype.generic_lastIndexOf=function(t,e){return Kb(this).lastIndexOf(t,arguments.length>1?e:2147483647)},e.prototype.every=function(t,e){if(!t||!t.value||"function"!=typeof t.value)return!0;e=qb(this.sec,e,t);for(var n=this.value,i=0;i<n.length;i++)if(!0!==t.value.call(e,n[i],i,this))return!1;return!0},e.prototype.generic_every=function(t,e){return Kb(this).every(t,e)},e.prototype.some=function(t,e){if(!t||!t.value||"function"!=typeof t.value)return!1;e=qb(this.sec,e,t);var n=this;return this.value.some((function(i,r,o){return t.value.call(e,i,r,n)}))},e.prototype.generic_some=function(t,e){return Kb(this).some(t,e)},e.prototype.forEach=function(t,e){if(t&&t.value&&"function"==typeof t.value){e=qb(this.sec,e,t);var n=this;this.value.forEach((function(i,r){t.value.call(e,i,r,n)}))}},e.prototype.generic_forEach=function(t,e){return Kb(this).forEach(t,e)},e.prototype.map=function(t,e){if(!t||!t.value||"function"!=typeof t.value)return this.sec.createArrayUnsafe([]);e=qb(this.sec,e,t);var n=this;return this.sec.createArrayUnsafe(this.value.map((function(i,r){return t.value.call(e,i,r,n)})))},e.prototype.generic_map=function(t,e){return Kb(this).map(t,e)},e.prototype.filter=function(t,e){if(!t||!t.value||"function"!=typeof t.value)return this.sec.createArrayUnsafe([]);e=qb(this.sec,e,t);for(var n=[],i=this.value,r=0;r<i.length;r++)!0===t.value.call(e,i[r],r,this)&&n.push(i[r]);return this.sec.createArrayUnsafe(n)},e.prototype.generic_filter=function(t,e){return Kb(this).filter(t,e)},e.prototype.toLocaleString=function(){for(var t=this.sec.AXArray.axCoerce(this).value,e="",n=0,i=t.length;n<i;n++){var r=t[n];null!=r&&(e+=r.toLocaleString()),n+1<i&&(e+=",")}return e},e.prototype.sort=function(t,e){var n,i,r=this.value;if(null==t)return r.sort(),this;if(this.sec.AXFunction.axIsInstanceOf(t)?(n=t.value,i=t.receiver):ep(t)&&(e=t),null==e||ep(e)||(e=void 0),!e)return i?(r.sort(n.bind(i)),this):(r.sort(n),this);n||(n=Jb);var o=2&e?-1:1;return r.sort((function(t,i){return function(t,e,n,i,r){return 1&n&&(t=String(t).toLowerCase(),e=String(e).toLowerCase()),(16&n?(t=+t)<(e=+e)?-1:t>e?1:0:r(t,e))*i}(t,i,e,o,n)})),this},e.prototype.generic_sort=function(){return Kb(this).sort.apply(this,arguments)},e.prototype.sortOn=function(t,e){0===arguments.length&&this.sec.throwError("ArgumentError",kb.WrongArgumentCountError,"Array/http://adobe.com/AS3/2006/builtin::sortOn()","1","0");var n=this.value,i=[];if("string"==typeof t)t=[vb.getPublicMangledName(t)],i=[0|e];else{if(!t||!Array.isArray(t.value))return this;t=t.value;for(var r=0;r<t.length;r++)t[r]=vb.getPublicMangledName(t[r]);if(e&&Array.isArray(e.value))if((e=e.value).length===t.length)for(r=0;r<e.length;r++)i[r]=0|e[r];else for(r=0;r<t.length;r++)i[r]=0;else{var o=0|e;for(r=0;r<t.length;r++)i[r]=o}}var a=i[0],s=n;if(8&a){var l=n.concat();l.sort((function(e,n){return Zb(e,n,t,i)})),s=l.map((function(t){return n.indexOf(t)}))}else n.sort((function(e,n){return Zb(e,n,t,i)}));return s},e.prototype.generic_sortOn=function(){return Kb(this).sortOn.apply(this,arguments)},Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length},set:function(t){this.value.length=t>>>0},enumerable:!1,configurable:!0}),e.prototype.axGetEnumerableKeys=function(){return Object.keys(this.value).concat(t.prototype.axGetEnumerableKeys.call(this))},e.prototype.axHasPropertyInternal=function(t){var e=t.name;return"number"==typeof e||rp(e=Nb(e))?e in this.value:!!this.traits.getTrait(t.namespaces,e)||"$Bg"+e in this},e.prototype.axHasOwnProperty=function(t){var e=t.name;return"number"==typeof e||rp(e=Nb(e))?this.value.hasOwnProperty(e):!!this.traits.getTrait(t.namespaces,e)||this.hasOwnProperty("$Bg"+e)},e.prototype.axGetProperty=function(e){var n,i=e.name;return"number"==typeof i||rp(i=Nb(i))?null!==(n=this.value[i])&&void 0!==n?n:this[i]:t.prototype.axGetProperty.call(this,e)},e.prototype.axSetProperty=function(e,n,i){var r=e.name;"number"==typeof r||rp(r=Nb(r))?this.value[r]=n:t.prototype.axSetProperty.call(this,e,n,i)},e.prototype.axDeleteProperty=function(t){var e=t.name;return"number"==typeof e||rp(e=Nb(e))?delete this.value[e]:!this.traits.getTrait(t.namespaces,e)&&delete this["$Bg"+e]},e.prototype.axGetPublicProperty=function(t){return"number"==typeof t||rp(t=Nb(t))?this.value[t]:this["$Bg"+t]},e.prototype.axSetPublicProperty=function(t,e){"number"==typeof t||rp(t=Nb(t))?this.value[t]=e:this["$Bg"+t]=e},e}(Hb),nx=function(t){function e(e,n){var i=t.call(this)||this;return arguments.length<1&&(e=""),i.$Bgmessage=String(e),i._errorID=0|n,i}return o(e,t),e.throwError=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];for(var r=[kb[e]],o=0;o<n.length;o++)r.push(n[o]);var a=Gb.apply(null,r);throw t.axConstruct([a,e])},e.classInitializer=function(t){Df(this,"$Bglength",1),Df(this.dPrototype,"$Bgname",this.classInfo.instanceInfo.multiname.name),t===e&&(Df(this.dPrototype,"$Bgmessage","Error"),Df(this.dPrototype,"$BgtoString",e.prototype.toString))},e.prototype.toString=function(){return""!==this.$Bgmessage?this.$Bgname+": "+this.$Bgmessage:this.$Bgname},Object.defineProperty(e.prototype,"errorID",{get:function(){return this._errorID},enumerable:!1,configurable:!0}),e.prototype.getStackTrace=function(){return null},e.getErrorMessage=jb,e}(Hb),ix=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),rx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),ox=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),ax=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),sx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),lx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),ux=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),cx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),hx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),px=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),dx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),fx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),_x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),gx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx),mx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(nx);!function(t){t[t.None=0]="None",t[t.Runtime=1]="Runtime",t[t.Execution=2]="Execution",t[t.Interpreter=4]="Interpreter"}(tx||(tx={})),new lp(!1,(function(t){var e;e=t,"undefined"!=typeof dump&&dump(e+"\n")}));var yx=null;function Ax(t,e){return Array.prototype.slice.call(t,e)}var vx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._prototypeInitialzed=!1,e}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;bb(t,"$BgtoString",n.toString),bb(t,"$Bgcall",n.call),bb(t,"$Bgapply",n.apply),Df(t,"value",n.native_functionValue)},e.prototype.setReceiver=function(t){this.receiver=t},e.prototype.axConstruct=function(t){var e=this.prototype;Oo(e)&&(e=this.sec.AXFunctionUndefinedPrototype);var n=Object.create(e);return n.__ctorFunction=this,this.value.apply(n,t),n},e.prototype.axIsInstanceOf=function(t){return t&&t.__ctorFunction===this},e.prototype.native_functionValue=function(){},Object.defineProperty(e.prototype,"prototype",{get:function(){return this._prototypeInitialzed||(this._prototype=Object.create(this.sec.AXObject.tPrototype),this._prototypeInitialzed=!0),this._prototype},set:function(t){Oo(t)?t=void 0:("object"!=typeof t||this.sec.isPrimitive(t))&&this.sec.throwError("TypeError",kb.PrototypeTypeError),this._prototypeInitialzed=!0,this._prototype=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.methodInfo?this.value.methodInfo.parameters.length:this.value.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"function Function() {}"},e.prototype.call=function(t){return t=qb(this.sec,t,this),this.value.apply(t,Ax(arguments,1))},e.prototype.apply=function(t,e){return t=qb(this.sec,t,this),this.value.apply(t,e?e.value:void 0)},e.prototype.axCall=function(t){return this.value.apply(t,Ax(arguments,1))},e.prototype.axApply=function(t,e){return this.value.apply(t,e)},e}(Hb),bx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;Df(t,"$Bgcall",n.call),Df(t,"$Bgapply",n.apply)},e.Create=function(t,e){var n=function(){return n.value.apply(n.receiver,arguments)};return Object.setPrototypeOf(n,this.sec.AXMethodClosure.tPrototype),n.receiver=t,n.value=e,n.methodInfo=e.methodInfo,n.axCall=n.call,n.axApply=n.apply,n},Object.defineProperty(e.prototype,"prototype",{get:function(){return null},set:function(t){this.sec.throwError("ReferenceError",kb.ConstWriteError,"prototype","MethodClosure")},enumerable:!1,configurable:!0}),e.prototype.axCall=function(t){return this.value.apply(this.receiver,Ax(arguments,1))},e.prototype.axApply=function(t,e){return this.value.apply(this.receiver,e)},e.prototype.call=function(t){var e=arguments;return e.length<=6?this.value.call(this.receiver,e[1],e[2],e[3],e[4],e[5]):this.value.apply(this.receiver,Ax(arguments,1))},e.prototype.apply=function(t,e){return this.value.apply(this.receiver,e&&e.value?e.value:e)},e}(vx),xx=function(t){function e(e){var n=t.call(this)||this;return n.value=Number(e),n}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;bb(t,"$BgtoString",n.toString),bb(t,"$BgtoLocaleString",n.toString),bb(t,"$BgvalueOf",n.valueOf),bb(t,"$BgtoFixed",n.toFixed),bb(t,"$BgtoExponential",n.toExponential),bb(t,"$BgtoPrecision",n.toPrecision),Df(this,"$BgNaN",Number.NaN),Df(this,"$BgNEGATIVE_INFINITY",-1/0),Df(this,"$BgPOSITIVE_INFINITY",1/0),Df(this,"$BgMAX_VALUE",Number.MAX_VALUE),Df(this,"$BgMIN_VALUE",Number.MIN_VALUE),Df(this,"$BgE",Math.E),Df(this,"$BgLN10",Math.LN10),Df(this,"$BgLN2",Math.LN2),Df(this,"$BgLOG10E",Math.LOG10E),Df(this,"$BgLOG2E",Math.LOG2E),Df(this,"$BgPI",Math.PI),Df(this,"$BgSQRT1_2",Math.SQRT2),Df(this,"$BgSQRT2",Math.SQRT2)},e.prototype.toString=function(t){return 0===arguments.length?t=10:((t|=0)<2||t>36)&&this.sec.throwError("RangeError",kb.InvalidRadixError,t),this.axClass!==this.sec.AXNumber&&this.sec.throwError("TypeError",kb.InvokeOnIncompatibleObjectError,"Number.prototype.toString"),this.value.toString(t)},e.prototype.valueOf=function(){return this.axClass!==this.sec.AXNumber&&this.sec.throwError("TypeError",kb.InvokeOnIncompatibleObjectError,"Number.prototype.valueOf"),this.value},e.prototype.toExponential=function(t){return((t|=0)<0||t>20)&&this.sec.throwError("RangeError",kb.InvalidPrecisionError),this.axClass!==this.sec.AXNumber?"NaN":this.value.toExponential(t)},e.prototype.toPrecision=function(t){return t?t|=0:t=1,(t<1||t>21)&&this.sec.throwError("RangeError",kb.InvalidPrecisionError),this.axClass!==this.sec.AXNumber?"NaN":this.value.toPrecision(t)},e.prototype.toFixed=function(t){return((t|=0)<0||t>20)&&this.sec.throwError("RangeError",kb.InvalidPrecisionError),this.axClass!==this.sec.AXNumber?"NaN":this.value.toFixed(t)},e._minValue=function(){return Number.MIN_VALUE},e.convertStringToDouble=function(t){var e=t.indexOf(String.fromCharCode(0));return e>=0?+t.substring(0,e):+t},e.classNatives=[Math],e}(Hb),Cx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;bb(t,"$BgtoString",n.toString),bb(t,"$BgtoLocaleString",n.toString),bb(t,"$BgvalueOf",n.valueOf),Df(this,"$BgMAX_VALUE",2147483647),Df(this,"$BgMIN_VALUE",-2147483648)},e.prototype.toString=function(t){return 0===arguments.length?t=10:((t|=0)<2||t>36)&&this.sec.throwError("RangeError",kb.InvalidRadixError,t),this.axClass!==this.sec.AXInt&&this.axClass!==this.sec.AXNumber&&this.sec.throwError("TypeError",kb.InvokeOnIncompatibleObjectError,"Number.prototype.toString"),this.value.toString(t)},e.prototype.valueOf=function(){return this.axClass!==this.sec.AXInt&&this.axClass!==this.sec.AXNumber&&this.sec.throwError("TypeError",kb.InvokeOnIncompatibleObjectError,"Number.prototype.valueOf"),this.value},e.staticNatives=[Math],e.instanceNatives=[xx.prototype],e}(xx);function Ix(t,e){var n=t.createArray(e);return n.axSetPublicProperty("index",e.index),n.axSetPublicProperty("input",e.input),n}var Ex=Ab.FOLLOW_AS3_BUG;function wx(t){for(var e=null,n=0;n<t.length;n++){var i=t.charCodeAt(n);i>=4256&&i<=4293&&(e||(e=new Array(t.length)),e[n]=String.fromCharCode(i+48))}if(e){for(n=0;n<e.length;n++){e[n]||(e[n]=t.charAt(n).toLocaleString())}return e.join("")}return t.toLowerCase()}var Sx=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;bb(t,"$BgindexOf",n.generic_indexOf),bb(t,"$BglastIndexOf",n.generic_lastIndexOf),bb(t,"$BgcharAt",n.generic_charAt),bb(t,"$BgcharCodeAt",n.generic_charCodeAt),bb(t,"$Bgconcat",n.generic_concat),bb(t,"$BglocaleCompare",n.generic_localeCompare),bb(t,"$Bgmatch",n.generic_match),bb(t,"$Bgreplace",n.generic_replace),bb(t,"$Bgsearch",n.generic_search),bb(t,"$Bgslice",n.generic_slice),bb(t,"$Bgsplit",n.generic_split),bb(t,"$Bgsubstring",n.generic_substring),bb(t,"$Bgsubstr",n.generic_substr),bb(t,"$BgtoLowerCase",n.generic_toLowerCase),bb(t,"$BgtoLocaleLowerCase",n.generic_toLowerCase),bb(t,"$BgtoUpperCase",n.generic_toUpperCase),bb(t,"$BgtoLocaleUpperCase",n.generic_toUpperCase),bb(t,"$BgtoString",n.toString),bb(t,"$BgtoString",n.public_toString),bb(t,"$BgvalueOf",n.public_valueOf),bb(this,"$BgfromCharCode",e.fromCharCode)},e.fromCharCode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return String.fromCharCode.apply(null,t)},e.prototype.indexOf=function(t,e){return this.value.indexOf(t,e)},e.prototype.lastIndexOf=function(t,e){return this.value.lastIndexOf(t,e)},e.prototype.charAt=function(t){return this.value.charAt(t)},e.prototype.charCodeAt=function(t){return this.value.charCodeAt(t)},e.prototype.concat=function(){return this.value.concat.apply(this.value,arguments)},e.prototype.localeCompare=function(t){arguments.length>1&&this.sec.throwError("ArgumentError",kb.WrongArgumentCountError,"Function/<anonymous>()",0,2);var e=this.value;if((t=String(t))===e)return 0;for(var n=Math.min(e.length,t.length),i=0;i<n;i++)if(e[i]!==t[i])return e.charCodeAt(i)-t.charCodeAt(i);return e.length>t.length?1:-1},e.prototype.__getRegExp=function(t){return this.sec.AXRegExp.axIsType(t)?t:this.sec.AXRegExp.axConstruct([yb(t)])},e.prototype.match=function(t){var e=this.__getRegExp(t).internalStringMatch(this.value);if(!e)return null;try{return Ix(this.sec,e)}catch(t){return null}},e.prototype.replace=function(t,e){this.sec.AXFunction.axIsType(e)&&(e=e.value);try{return this.sec.AXRegExp.axIsType(t)?this.__getRegExp(t).internalStringReplace(this.value,e):(t=yb(t),this.value.replace(t,e))}catch(t){return this.value}},e.prototype.search=function(t){try{return this.sec.AXRegExp.axIsType(t)?this.__getRegExp(t).internalStringSearch(this.value):this.value.search(yb(t))}catch(t){return-1}},e.prototype.slice=function(t,e){return t=arguments.length<1?0:0|t,e=arguments.length<2?4294967295:0|e,this.value.slice(t,e)},e.prototype.split=function(t,e){t=this.sec.AXRegExp.axIsType(t)?t.value:yb(t),e=void 0===e?-1:0|e;try{return this.sec.createArray(this.value.split(t,e))}catch(t){return this.sec.createArrayUnsafe([this.value])}},e.prototype.substring=function(t,e){return this.value.substring(t,e)},e.prototype.substr=function(t,e){return-1==e&&(e=this.value.length-t-1),this.value.substr(t,e)},e.prototype.toLocaleLowerCase=function(){return this.value.toLowerCase()},e.prototype.toLowerCase=function(){return Ex?wx(this.value):this.value.toLowerCase()},e.prototype.toLocaleUpperCase=function(){return this.value.toUpperCase()},e.prototype.toUpperCase=function(){return this.value.toUpperCase()},e.prototype.generic_indexOf=function(t,e){var n=null==this?"":this;return String.prototype.indexOf.call(n,t,e)},e.prototype.generic_lastIndexOf=function(t,e){var n=null==this?"":this;return String.prototype.lastIndexOf.call(n,t,e)},e.prototype.generic_charAt=function(t){var e=null==this?"":this;return String.prototype.charAt.call(e,t)},e.prototype.generic_charCodeAt=function(t){var e=null==this?"":this;return String.prototype.charCodeAt.call(e,t)},e.prototype.generic_concat=function(){var t=null==this?"":this;return String.prototype.concat.apply(t,arguments)},e.prototype.generic_localeCompare=function(t){var e=this.sec.AXString.axBox(String(this));return e.localeCompare.apply(e,arguments)},e.prototype.generic_match=function(t){return this.sec.AXString.axBox(String(this)).match(t)},e.prototype.generic_replace=function(t,e){return this.sec.AXString.axBox(String(this)).replace(t,e)},e.prototype.generic_search=function(t){return this.sec.AXString.axBox(String(this)).search(t)},e.prototype.generic_slice=function(t,e){var n=null==this?"":this;return String.prototype.slice.call(n,t,e)},e.prototype.generic_split=function(t,e){return e=arguments.length<2?4294967295:0|e,this.sec.AXString.axBox(String(this)).split(t,e)},e.prototype.generic_substring=function(t,e){var n=null==this?"":this;return String.prototype.substring.call(n,t,e)},e.prototype.generic_substr=function(t,e){var n=null==this?"":this;return String.prototype.substr.call(n,t,e)},e.prototype.generic_toLowerCase=function(){var t=null==this?"":this;if(Ex)return wx(String(t));String.prototype.toLowerCase.call(t)},e.prototype.generic_toUpperCase=function(){var t=null==this?"":this;return String.prototype.toUpperCase.call(t)},e.prototype.toString=function(){return this.value.toString()},e.prototype.public_toString=function(){return this===this.sec.AXString.dPrototype?"":(this.axClass!==this.sec.AXString&&this.sec.throwError("TypeError",kb.InvokeOnIncompatibleObjectError,"String.prototype.toString"),this.value.toString())},e.prototype.valueOf=function(){return this.value.valueOf()},e.prototype.public_valueOf=function(){return this===this.sec.AXString.dPrototype?"":(this.axClass!==this.sec.AXString&&this.sec.throwError("TypeError",kb.InvokeOnIncompatibleObjectError,"String.prototype.valueOf"),this.value.valueOf())},Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length},enumerable:!1,configurable:!0}),e.classNatives=[String],e}(Hb),Dx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;bb(t,"$BgtoString",n.toString),bb(t,"$BgtoLocaleString",n.toString),bb(t,"$BgvalueOf",n.valueOf),Df(this,"$BgMAX_VALUE",4294967295),Df(this,"$BgMIN_VALUE",0)},e.prototype.toString=function(t){return 0===arguments.length?t=10:((t|=0)<2||t>36)&&this.sec.throwError("RangeError",kb.InvalidRadixError,t),this.axClass!==this.sec.AXUint&&this.axClass!==this.sec.AXNumber&&this.sec.throwError("TypeError",kb.InvokeOnIncompatibleObjectError,"Number.prototype.toString"),this.value.toString(t)},e.prototype.valueOf=function(){return this.axClass!==this.sec.AXUint&&this.axClass!==this.sec.AXNumber&&this.sec.throwError("TypeError",kb.InvokeOnIncompatibleObjectError,"Number.prototype.valueOf"),this.value},e.staticNatives=[Math],e.instanceNatives=[xx.prototype],e}(xx),Tx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;bb(t,"$BgtoString",n.toString),bb(t,"$BgvalueOf",n.valueOf)},e.prototype.toString=function(){return this.value.toString()},e.prototype.valueOf=function(){return this.value.valueOf()},e}(Hb);function Px(t){return t&&"function"==typeof t.axApply}function Bx(t){if(Ab.FOLLOW_AS3_BUG){if("string"==typeof t)return xx.convertStringToDouble(t);if(t&&"object"==typeof t&&"string"==typeof(t=t.valueOf()))return xx.convertStringToDouble(t)}return+t}var Ox,Mx,Lx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.axGetProperty=function(e){var n=e.name;return(0|(n="number"==typeof n?n:Nb(n)))===n||rp(n)?this.axGetNumericProperty("number"==typeof n?n:0|n):t.prototype.axGetProperty.call(this,e)},e.prototype.axSetProperty=function(e,n,i){var r=e.name;(0|(r="number"==typeof r?r:Nb(r)))===r||rp(r)?this.axSetNumericProperty("number"==typeof r?r:0|r,n):t.prototype.axSetProperty.call(this,e,n,i)},e.prototype.axGetPublicProperty=function(t){return(0|(t="number"==typeof t?t:Nb(t)))===t||rp(t)?this.axGetNumericProperty("number"==typeof t?t:0|t):this["$Bg"+t]},e.prototype.axSetPublicProperty=function(t,e){(0|(t="number"==typeof t?t:Nb(t)))===t||rp(t)?this.axSetNumericProperty("number"==typeof t?t:0|t,e):this["$Bg"+t]=e},e.prototype.axNextName=function(t){return t-1},e.prototype.checkVectorMethodArgs=function(t,e){if(ap(t))return!1;var n=this.sec;return Px(t)||n.throwError("TypeError",kb.CheckTypeFailedError,t,"Function"),t.axClass!==n.AXMethodClosure||ap(e)||n.throwError("TypeError",kb.ArrayFilterNonNullObjectError),!0},e}(Hb),Rx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.axIsType=function(t){return this.dPrototype.isPrototypeOf(t)||this.sec.Int32Vector.axClass.dPrototype.isPrototypeOf(t)||this.sec.Uint32Vector.axClass.dPrototype.isPrototypeOf(t)||this.sec.Float64Vector.axClass.dPrototype.isPrototypeOf(t)||this.sec.ObjectVector.axClass.dPrototype.isPrototypeOf(t)},e}(Hb),Nx=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var i=t.call(this)||this;return e>>>=0,n=!!n,i._fixed=!!n,i._buffer=new Array(e),i._fill(0,e,i.axClass.defaultValue),i}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=this.tPrototype;n.axGetProperty=t.axGetProperty,n.axGetNumericProperty=t.axGetNumericProperty,n.axSetProperty=t.axSetProperty,n.axSetNumericProperty=t.axSetNumericProperty,n.axHasPropertyInternal=t.axHasPropertyInternal,n.axNextName=t.axNextName,n.axNextNameIndex=t.axNextNameIndex,n.axNextValue=t.axNextValue,t.axGetProperty=Hb.prototype.axGetProperty,t.axGetNumericProperty=Hb.prototype.axGetNumericProperty,t.axSetProperty=Hb.prototype.axSetProperty,t.axSetNumericProperty=Hb.prototype.axSetNumericProperty,t.axHasPropertyInternal=Hb.prototype.axHasPropertyInternal,t.axNextName=Hb.prototype.axNextName,t.axNextNameIndex=Hb.prototype.axNextNameIndex,t.axNextValue=Hb.prototype.axNextValue;var i=e.prototype;Df(t,"$Bgjoin",i.join),Df(t,"$BgtoString",i.join),Df(t,"$BgtoLocaleString",i.toLocaleString),Df(t,"$Bgpop",i.pop),Df(t,"$Bgpush",i.push),Df(t,"$Bgreverse",i.reverse),Df(t,"$Bgconcat",i.concat),Df(t,"$Bgsplice",i.splice),Df(t,"$Bgslice",i.slice),Df(t,"$Bgshift",i.shift),Df(t,"$Bgunshift",i.unshift),Df(t,"$BgindexOf",i.indexOf),Df(t,"$BglastIndexOf",i.lastIndexOf),Df(t,"$BgforEach",i.forEach),Df(t,"$Bgmap",i.map),Df(t,"$Bgfilter",i.filter),Df(t,"$Bgsome",i.some),Df(t,"$Bgevery",i.every),Df(t,"$Bgsort",i.sort),Df(t,"checkVectorMethodArgs",i.checkVectorMethodArgs)},e.axApply=function(t,e){var n=e[0];if(this.axIsType(n))return n;var i=n.axGetPublicProperty("length");if(void 0!==i){for(var r=this.axConstruct([i,!1]),o=0;o<i;o++)r.axSetNumericProperty(o,n.axGetPublicProperty(o));return r}wp()},e.defaultCompareFunction=function(t,e){return String(t).localeCompare(String(e))},e.compare=function(t,n,i,r){var o=0;return r||(r=e.defaultCompareFunction),o=i&e.NUMERIC?(t=ip(t))<(n=ip(n))?-1:t>n?1:0:r(t,n),i&e.DESCENDING&&(o*=-1),o},e.prototype._fill=function(t,e,n){for(var i=0;i<e;i++)this._buffer[t+i]=n},e.prototype.toString=function(){for(var t=[],e=0;e<this._buffer.length;e++){var n=this._buffer[e];t.push(null===n?"null":n+"")}return t.join(",")},e.prototype.toLocaleString=function(){for(var t=[],e=0;e<this._buffer.length;e++){var n=this._buffer[e];n&&"object"==typeof n?t.push(n.$BgtoLocaleString()):t.push(n+"")}return t.join(",")},e.prototype.sort=function(t){if(void 0===t)return this._buffer.sort(),this;if(this.sec.AXFunction.axIsType(t)){var n=t.value,i=t.receiver;return this._buffer.sort(n.bind(i)),this}var r=0|t;return r&e.NUMERIC?r&e.DESCENDING?(this._buffer.sort((function(t,e){return Bx(e)-Bx(t)})),this):(this._buffer.sort((function(t,e){return Bx(t)-Bx(e)})),this):r&e.CASEINSENSITIVE?r&e.DESCENDING?(this._buffer.sort((function(t,e){return yb(e).toLowerCase()-yb(t).toLowerCase()})),this):(this._buffer.sort((function(t,e){return yb(t).toLowerCase()-yb(e).toLowerCase()})),this):r&e.DESCENDING?(this._buffer.sort((function(t,e){return e-t})),this):(this._buffer.sort(),this)},e.prototype.every=function(t,e){if(!this.checkVectorMethodArgs(t,e))return!0;for(var n=0;n<this._buffer.length;n++)if(!t.axCall(e,this.axGetNumericProperty(n),n,this))return!1;return!0},e.prototype.filter=function(t,e){var n=this.axClass.axConstruct([0,!1]);if(!this.checkVectorMethodArgs(t,e))return n;for(var i=0;i<this._buffer.length;i++)t.call(e,this.axGetNumericProperty(i),i,this)&&n.push(this.axGetNumericProperty(i));return n},e.prototype.map=function(t,e){var n=this.axClass.axConstruct([this.length,!1]);if(!this.checkVectorMethodArgs(t,e))return n;for(var i=0;i<this._buffer.length;i++)n.push(this._coerce(t.call(e,this.axGetNumericProperty(i),i,this)));return n},e.prototype.some=function(t,e){if(!this.checkVectorMethodArgs(t,e))return!1;for(var n=0;n<this._buffer.length;n++)if(t.call(e,this.axGetNumericProperty(n),n,this))return!0;return!1},e.prototype.forEach=function(t,e){if(this.checkVectorMethodArgs(t,e))for(var n=0;n<this._buffer.length;n++)t.call(e,this.axGetNumericProperty(n),n,this)},e.prototype.join=function(t){void 0===t&&(t=",");for(var e=this._buffer,n=this._buffer.length,i="",r=0;r<n-1;r++)i+=e[r]+t;return n>0&&(i+=e[n-1]),i},e.prototype.indexOf=function(t,e){return void 0===e&&(e=0),this._buffer.indexOf(t,e)},e.prototype.lastIndexOf=function(t,e){return void 0===e&&(e=2147483647),this._buffer.lastIndexOf(t,e)},e.prototype.push=function(t,e,n,i,r,o,a,s){this._checkFixed();for(var l=0;l<arguments.length;l++)this._buffer.push(this._coerce(arguments[l]))},e.prototype.pop=function(){if(this._checkFixed(),0!==this._buffer.length)return this._buffer.pop()},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]._buffer);var n=this._buffer.concat.apply(this._buffer,t),i=this.axClass.axConstruct([]);return i._buffer=n,i},e.prototype.reverse=function(){return this._buffer.reverse(),this},e.prototype._coerce=function(t){return this.axClass.type&&this.axClass.type[wb]?this.axClass.type.axCoerce(t):t},e.prototype.shift=function(){if(this._checkFixed(),0!==this._buffer.length)return this._buffer.shift()},e.prototype.unshift=function(){if(arguments.length){this._checkFixed();for(var t=0;t<arguments.length;t++)this._buffer.unshift(this._coerce(arguments[t]))}},e.prototype.slice=function(t,e){void 0===t&&(t=0),void 0===e&&(e=2147483647);var n=this._buffer,i=n.length,r=Math.min(Math.max(t,0),i),o=Math.min(Math.max(e,r),i),a=this.axClass.axConstruct([o-r,this.fixed]);return a._buffer=n.slice(r,o),a},e.prototype.splice=function(t,e){var n=this._buffer,i=n.length,r=Math.min(Math.max(t,0),i),o=Math.min(Math.max(e,0),i-r),a=arguments.length-2;o!==a&&this._checkFixed();for(var s=[r,o],l=2;l<a+2;l++)s[l]=this._coerce(arguments[l]);var u=this.axClass.axConstruct([o,this.fixed]);return u._buffer=n.splice.apply(n,s),u},Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.length},set:function(t){if((t>>>=0)>this._buffer.length)for(var e=this._buffer.length;e<t;e++)this._buffer[e]=this.axClass.defaultValue;else this._buffer.length=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixed",{get:function(){return this._fixed},set:function(t){this._fixed=!!t},enumerable:!1,configurable:!0}),e.prototype._checkFixed=function(){this._fixed&&this.sec.throwError("RangeError",kb.VectorFixedError)},e.prototype.axGetNumericProperty=function(t){var e=0|t;return(e<0||e>=this._buffer.length||e!=t)&&this.sec.throwError("RangeError",kb.OutOfRangeError,t,this._buffer.length),this._buffer[e]},e.prototype.axSetNumericProperty=function(t,e){var n=this._buffer.length,i=0|t;(i<0||i>n||i!=t||i===n&&this._fixed)&&this.sec.throwError("RangeError",kb.OutOfRangeError,t,n),this._buffer[i]=this._coerce(e)},e.prototype.axHasPropertyInternal=function(t){if((0|t.name)===t.name)return t.name>=0&&t.name<this._buffer.length;var e=Nb(t.name);if(t.isRuntimeName()&&op(e)){var n=e>>>0;return n>=0&&n<this._buffer.length}return this.axResolveMultiname(t)in this},e.prototype.axNextValue=function(t){return this._buffer[t-1]},e.prototype.axNextNameIndex=function(t){var e=t+1;return e<=this._buffer.length?e:0},e.CASEINSENSITIVE=1,e.DESCENDING=2,e.UNIQUESORT=4,e.RETURNINDEXEDARRAY=8,e.NUMERIC=16,e.defaultValue=null,e}(Lx),Fx=function(t){function e(n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var r=t.call(this)||this;return n>>>=0,r._fixed=!!i,r._buffer=new Int32Array(Math.max(e.INITIAL_CAPACITY,n+e.EXTRA_CAPACITY)),r._offset=0,r._length=n,r}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=this.tPrototype;n.axGetProperty=t.axGetProperty,n.axGetNumericProperty=t.axGetNumericProperty,n.axSetProperty=t.axSetProperty,n.axSetNumericProperty=t.axSetNumericProperty,n.axHasPropertyInternal=t.axHasPropertyInternal,n.axNextName=t.axNextName,n.axNextNameIndex=t.axNextNameIndex,n.axNextValue=t.axNextValue,t.axGetProperty=Hb.prototype.axGetProperty,t.axGetNumericProperty=Hb.prototype.axGetNumericProperty,t.axSetProperty=Hb.prototype.axSetProperty,t.axSetNumericProperty=Hb.prototype.axSetNumericProperty,t.axHasPropertyInternal=Hb.prototype.axHasPropertyInternal,t.axNextName=Hb.prototype.axNextName,t.axNextNameIndex=Hb.prototype.axNextNameIndex,t.axNextValue=Hb.prototype.axNextValue;var i=e.prototype;Df(t,"$Bgjoin",i.join),Df(t,"$BgtoString",i.join),Df(t,"$BgtoLocaleString",i.toLocaleString),Df(t,"$Bgpop",i.pop),Df(t,"$Bgpush",i.push),Df(t,"$Bgreverse",i.reverse),Df(t,"$Bgconcat",i.concat),Df(t,"$Bgsplice",i.splice),Df(t,"$Bgslice",i.slice),Df(t,"$Bgshift",i.shift),Df(t,"$Bgunshift",i.unshift),Df(t,"$BgindexOf",i.indexOf),Df(t,"$BglastIndexOf",i.lastIndexOf),Df(t,"$BgforEach",i.forEach),Df(t,"$Bgmap",i.map),Df(t,"$Bgfilter",i.filter),Df(t,"$Bgsome",i.some),Df(t,"$Bgevery",i.every),Df(t,"$Bgsort",i.sort),Df(t,"checkVectorMethodArgs",i.checkVectorMethodArgs)},e.axApply=function(t,e){var n=e[0];if(this.axIsType(n))return n;var i=n.axGetPublicProperty("length");if(void 0!==i){for(var r=this.axConstruct([i,!1]),o=0;o<i;o++)r.axSetNumericProperty(o,n.axGetPublicProperty(o));return r}wp()},e.prototype.internalToString=function(){for(var t="",e=this._offset,n=e+this._length,i=0;i<this._buffer.length;i++)i===e&&(t+="["),i===n&&(t+="]"),t+=this._buffer[i],i<this._buffer.length-1&&(t+=",");return this._offset+this._length===this._buffer.length&&(t+="]"),t+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length},e.prototype.toString=function(){for(var t="",e=0;e<this._length;e++)t+=this._buffer[this._offset+e],e<this._length-1&&(t+=",");return t},e.prototype.toLocaleString=function(){for(var t="",e=0;e<this._length;e++)t+=this._buffer[this._offset+e],e<this._length-1&&(t+=",");return t},e.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)},e.prototype._ensureCapacity=function(t){var e=this._offset+t;if(!(e<this._buffer.length)){if(t<=this._buffer.length){var n=this._buffer.length-t>>2;return this._buffer.set(this._view(),n),void(this._offset=n)}var i=1+(3*this._buffer.length>>1);i<e&&(i=e);var r=new Int32Array(i);r.set(this._buffer,0),this._buffer=r}},e.prototype.concat=function(){for(var t=this._length,e=0;e<arguments.length;e++){(o=arguments[e])._buffer instanceof Int32Array||So(!1),t+=o._length}var n=new this.sec.Int32Vector(t),i=n._buffer;i.set(this._buffer);var r=this._length;for(e=0;e<arguments.length;e++){var o;r+(o=arguments[e])._buffer.length<o._buffer.length?i.set(o._buffer,r):i.set(o._buffer.subarray(0,o._length),r),r+=o._length}return n},e.prototype.every=function(t,e){if(!this.checkVectorMethodArgs(t,e))return!0;for(var n=0;n<this._length;n++)if(!t.call(e,this._buffer[this._offset+n],n,this))return!1;return!0},e.prototype.filter=function(t,e){var n=new this.sec.Int32Vector;if(!this.checkVectorMethodArgs(t,e))return n;for(var i=0;i<this._length;i++)t.call(e,this._buffer[this._offset+i],i,this)&&n.push(this._buffer[this._offset+i]);return n},e.prototype.map=function(t,e){var n=this.axClass.axConstruct([this.length,!1]);if(!this.checkVectorMethodArgs(t,e))return n;for(var i=0;i<this._length;i++)n[i]=t.call(e,this._buffer[this._offset+i],i,this);return n},e.prototype.some=function(t,e){if(!this.checkVectorMethodArgs(t,e))return!1;for(var n=0;n<this._length;n++)if(t.call(e,this._buffer[this._offset+n],n,this))return!0;return!1},e.prototype.forEach=function(t,e){if(this.checkVectorMethodArgs(t,e))for(var n=0;n<this._length;n++)t.call(e,this._buffer[this._offset+n],n,this)},e.prototype.join=function(t){void 0===t&&(t=",");for(var e=this.length,n=this._buffer,i=this._offset,r="",o=0;o<e-1;o++)r+=n[i+o]+t;return e>0&&(r+=n[i+e-1]),r},e.prototype.indexOf=function(t,e){void 0===e&&(e=0);var n=this._length,i=0|e;if(i<0)(i+=n)<0&&(i=0);else if(i>=n)return-1;for(var r=this._buffer,o=this._offset,a=o+n,s=i+=o;s<a;s++)if(r[s]===t)return s-o;return-1},e.prototype.lastIndexOf=function(t,e){void 0===e&&(e=2147483647);var n=this._length,i=0|e;if(i<0){if((i+=n)<0)return-1}else i>=n&&(i=n);for(var r=this._buffer,o=this._offset,a=o,s=i+=o;s-- >a;)if(r[s]===t)return s-o;return-1},e.prototype.push=function(t,e,n,i,r,o,a,s){this._checkFixed(),this._ensureCapacity(this._length+arguments.length);for(var l=0;l<arguments.length;l++)this._buffer[this._offset+this._length++]=arguments[l]},e.prototype.pop=function(){return this._checkFixed(),0===this._length?e.DEFAULT_VALUE:(this._length--,this._buffer[this._offset+this._length])},e.prototype.reverse=function(){for(var t=this._offset,e=this._offset+this._length-1,n=this._buffer;t<e;){var i=n[t];n[t]=n[e],n[e]=i,t++,e--}return this},e.prototype.sort=function(t){return 0===arguments.length?(Array.prototype.sort.call(this._view()),this):this.sec.AXFunction.axIsType(t)?(Array.prototype.sort.call(this._view(),t.value),this):((0|t)&e.DESCENDING?Array.prototype.sort.call(this._view(),(function(t,e){return e-t})):Array.prototype.sort.call(this._view(),(function(t,e){return t-e})),this)},e.prototype.shift=function(){return this._checkFixed(),0===this._length?0:(this._length--,this._buffer[this._offset++])},e.prototype.unshift=function(){if(this._checkFixed(),arguments.length){this._ensureCapacity(this._length+arguments.length),this._slide(arguments.length),this._offset-=arguments.length,this._length+=arguments.length;for(var t=0;t<arguments.length;t++)this._buffer[this._offset+t]=arguments[t]}},e.prototype.slice=function(t,e){void 0===t&&(t=0),void 0===e&&(e=2147483647);var n=this._buffer,i=this._length,r=Math.min(Math.max(t,0),i),o=Math.min(Math.max(e,r),i),a=new this.sec.Int32Vector(o-r,this.fixed);return a._buffer.set(n.subarray(this._offset+r,this._offset+o),a._offset),a},e.prototype.splice=function(t,e){var n,i=this._buffer,r=this._length,o=Math.min(Math.max(t,0),r),a=this._offset+o,s=Math.min(Math.max(e,0),r-o),l=arguments.length-2,u=new this.sec.Int32Vector(s,this.fixed);s>0&&(n=i.subarray(a,a+s),u._buffer.set(n,u._offset)),this._ensureCapacity(r-s+l);var c=a+s,h=i.subarray(c,r);i.set(h,a+l),this._length+=l-s;for(var p=0;p<l;p++)i[a+p]=arguments[p+2];return u},e.prototype._slide=function(t){this._buffer.set(this._view(),this._offset+t),this._offset+=t},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(t){if((t>>>=0)>this._length){this._ensureCapacity(t);for(var n=this._offset+this._length,i=this._offset+t;n<i;n++)this._buffer[n]=e.DEFAULT_VALUE}this._length=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixed",{get:function(){return this._fixed},set:function(t){this._fixed=!!t},enumerable:!1,configurable:!0}),e.prototype._checkFixed=function(){this._fixed&&this.sec.throwError("RangeError",kb.VectorFixedError)},e.prototype.axGetNumericProperty=function(t){var e=this._length,n=0|t;return(n<0||n>=e||n!=t)&&this.sec.throwError("RangeError",kb.OutOfRangeError,t,e),this._buffer[this._offset+n]},e.prototype.axSetNumericProperty=function(t,e){var n=this._length,i=0|t;(i<0||i>n||i!=t||i===n&&this._fixed)&&this.sec.throwError("RangeError",kb.OutOfRangeError,t,n),i===this._length&&(this._ensureCapacity(this._length+1),this._length++),this._buffer[this._offset+i]=e},e.prototype.axHasPropertyInternal=function(t){if((0|t.name)===t.name)return t.name>=0&&t.name<this._length;var e=Nb(t.name);if(t.isRuntimeName()&&op(e)){var n=e>>>0;return n>=0&&n<this._length}return this.axResolveMultiname(t)in this},e.prototype.axNextValue=function(t){return this._buffer[this._offset+t-1]},e.prototype.axNextNameIndex=function(t){var e=t+1;return e<=this._length?e:0},e.EXTRA_CAPACITY=4,e.INITIAL_CAPACITY=10,e.DEFAULT_VALUE=0,e.DESCENDING=2,e.UNIQUESORT=4,e.RETURNINDEXEDARRAY=8,e}(Lx),kx=function(t){function e(n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var r=t.call(this)||this;return n>>>=0,r._fixed=!!i,r._buffer=new Uint32Array(Math.max(e.INITIAL_CAPACITY,n+e.EXTRA_CAPACITY)),r._offset=0,r._length=n,r}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=this.tPrototype;n.axGetProperty=t.axGetProperty,n.axGetNumericProperty=t.axGetNumericProperty,n.axSetProperty=t.axSetProperty,n.axSetNumericProperty=t.axSetNumericProperty,n.axHasPropertyInternal=t.axHasPropertyInternal,n.axNextName=t.axNextName,n.axNextNameIndex=t.axNextNameIndex,n.axNextValue=t.axNextValue,t.axGetProperty=Hb.prototype.axGetProperty,t.axGetNumericProperty=Hb.prototype.axGetNumericProperty,t.axSetProperty=Hb.prototype.axSetProperty,t.axSetNumericProperty=Hb.prototype.axSetNumericProperty,t.axHasPropertyInternal=Hb.prototype.axHasPropertyInternal,t.axNextName=Hb.prototype.axNextName,t.axNextNameIndex=Hb.prototype.axNextNameIndex,t.axNextValue=Hb.prototype.axNextValue;var i=e.prototype;Df(t,"$Bgjoin",i.join),Df(t,"$BgtoString",i.join),Df(t,"$BgtoLocaleString",i.toLocaleString),Df(t,"$Bgpop",i.pop),Df(t,"$Bgpush",i.push),Df(t,"$Bgreverse",i.reverse),Df(t,"$Bgconcat",i.concat),Df(t,"$Bgsplice",i.splice),Df(t,"$Bgslice",i.slice),Df(t,"$Bgshift",i.shift),Df(t,"$Bgunshift",i.unshift),Df(t,"$BgindexOf",i.indexOf),Df(t,"$BglastIndexOf",i.lastIndexOf),Df(t,"$BgforEach",i.forEach),Df(t,"$Bgmap",i.map),Df(t,"$Bgfilter",i.filter),Df(t,"$Bgsome",i.some),Df(t,"$Bgevery",i.every),Df(t,"$Bgsort",i.sort),Df(t,"checkVectorMethodArgs",i.checkVectorMethodArgs)},e.axApply=function(t,e){var n=e[0];if(this.axIsType(n))return n;var i=n.axGetPublicProperty("length");if(void 0!==i){for(var r=this.axConstruct([i,!1]),o=0;o<i;o++)r.axSetNumericProperty(o,n.axGetPublicProperty(o));return r}wp()},e.prototype.internalToString=function(){for(var t="",e=this._offset,n=e+this._length,i=0;i<this._buffer.length;i++)i===e&&(t+="["),i===n&&(t+="]"),t+=this._buffer[i],i<this._buffer.length-1&&(t+=",");return this._offset+this._length===this._buffer.length&&(t+="]"),t+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length},e.prototype.toString=function(){for(var t="",e=0;e<this._length;e++)t+=this._buffer[this._offset+e],e<this._length-1&&(t+=",");return t},e.prototype.toLocaleString=function(){for(var t="",e=0;e<this._length;e++)t+=this._buffer[this._offset+e],e<this._length-1&&(t+=",");return t},e.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)},e.prototype._ensureCapacity=function(t){var e=this._offset+t;if(!(e<this._buffer.length)){if(t<=this._buffer.length){var n=this._buffer.length-t>>2;return this._buffer.set(this._view(),n),void(this._offset=n)}var i=1+(3*this._buffer.length>>1);i<e&&(i=e);var r=new Uint32Array(i);r.set(this._buffer,0),this._buffer=r}},e.prototype.concat=function(){for(var t=this._length,e=0;e<arguments.length;e++){(o=arguments[e])._buffer instanceof Uint32Array||So(!1),t+=o._length}var n=new this.sec.Uint32Vector(t),i=n._buffer;i.set(this._buffer);var r=this._length;for(e=0;e<arguments.length;e++){var o;r+(o=arguments[e])._buffer.length<o._buffer.length?i.set(o._buffer,r):i.set(o._buffer.subarray(0,o._length),r),r+=o._length}return n},e.prototype.every=function(t,e){if(!this.checkVectorMethodArgs(t,e))return!0;for(var n=0;n<this._length;n++)if(!t.call(e,this._buffer[this._offset+n],n,this))return!1;return!0},e.prototype.filter=function(t,e){var n=new this.sec.Uint32Vector;if(!this.checkVectorMethodArgs(t,e))return n;for(var i=0;i<this._length;i++)t.call(e,this._buffer[this._offset+i],i,this)&&n.push(this._buffer[this._offset+i]);return n},e.prototype.map=function(t,e){var n=this.axClass.axConstruct([this.length,!1]);if(!this.checkVectorMethodArgs(t,e))return n;for(var i=0;i<this._length;i++)n[i]=t.call(e,this._buffer[this._offset+i],i,this);return n},e.prototype.some=function(t,e){if(!this.checkVectorMethodArgs(t,e))return!1;for(var n=0;n<this._length;n++)if(t.call(e,this._buffer[this._offset+n],n,this))return!0;return!1},e.prototype.forEach=function(t,e){if(this.checkVectorMethodArgs(t,e))for(var n=0;n<this._length;n++)t.call(e,this._buffer[this._offset+n],n,this)},e.prototype.join=function(t){void 0===t&&(t=",");for(var e=this.length,n=this._buffer,i=this._offset,r="",o=0;o<e-1;o++)r+=n[i+o]+t;return e>0&&(r+=n[i+e-1]),r},e.prototype.indexOf=function(t,e){void 0===e&&(e=0);var n=this._length,i=0|e;if(i<0)(i+=n)<0&&(i=0);else if(i>=n)return-1;for(var r=this._buffer,o=this._offset,a=o+(n=this._length),s=i+=o;s<a;s++)if(r[s]===t)return s-o;return-1},e.prototype.lastIndexOf=function(t,e){void 0===e&&(e=2147483647);var n=this._length,i=0|e;if(i<0){if((i+=n)<0)return-1}else i>=n&&(i=n);for(var r=this._buffer,o=this._offset,a=o,s=i+=o;s-- >a;)if(r[s]===t)return s-o;return-1},e.prototype.push=function(t,e,n,i,r,o,a,s){this._checkFixed(),this._ensureCapacity(this._length+arguments.length);for(var l=0;l<arguments.length;l++)this._buffer[this._offset+this._length++]=arguments[l]},e.prototype.pop=function(){return this._checkFixed(),0===this._length?e.DEFAULT_VALUE:(this._length--,this._buffer[this._offset+this._length])},e.prototype.reverse=function(){for(var t=this._offset,e=this._offset+this._length-1,n=this._buffer;t<e;){var i=n[t];n[t]=n[e],n[e]=i,t++,e--}return this},e.prototype.sort=function(t){return 0===arguments.length?(Array.prototype.sort.call(this._view()),this):this.sec.AXFunction.axIsType(t)?(Array.prototype.sort.call(this._view(),t.value),this):((0|t)&e.DESCENDING?Array.prototype.sort.call(this._view(),(function(t,e){return e-t})):Array.prototype.sort.call(this._view(),(function(t,e){return t-e})),this)},e.prototype.shift=function(){return this._checkFixed(),0===this._length?0:(this._length--,this._buffer[this._offset++])},e.prototype.unshift=function(){if(this._checkFixed(),arguments.length){this._ensureCapacity(this._length+arguments.length),this._slide(arguments.length),this._offset-=arguments.length,this._length+=arguments.length;for(var t=0;t<arguments.length;t++)this._buffer[this._offset+t]=arguments[t]}},e.prototype.slice=function(t,e){void 0===t&&(t=0),void 0===e&&(e=2147483647);var n=this._buffer,i=this._length,r=Math.min(Math.max(t,0),i),o=Math.min(Math.max(e,r),i),a=new this.sec.Uint32Vector(o-r,this.fixed);return a._buffer.set(n.subarray(this._offset+r,this._offset+o),a._offset),a},e.prototype.splice=function(t,e){var n,i=this._buffer,r=this._length,o=Math.min(Math.max(t,0),r),a=this._offset+o,s=Math.min(Math.max(e,0),r-o),l=arguments.length-2,u=new this.sec.Uint32Vector(s,this.fixed);s>0&&(n=i.subarray(a,a+s),u._buffer.set(n,u._offset)),this._ensureCapacity(r-s+l);var c=a+s,h=i.subarray(c,r);i.set(h,a+l),this._length+=l-s;for(var p=0;p<l;p++)i[a+p]=arguments[p+2];return u},e.prototype._slide=function(t){this._buffer.set(this._view(),this._offset+t),this._offset+=t},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(t){if((t>>>=0)>this._length){this._ensureCapacity(t);for(var n=this._offset+this._length,i=this._offset+t;n<i;n++)this._buffer[n]=e.DEFAULT_VALUE}this._length=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixed",{get:function(){return this._fixed},set:function(t){this._fixed=!!t},enumerable:!1,configurable:!0}),e.prototype._checkFixed=function(){this._fixed&&this.sec.throwError("RangeError",kb.VectorFixedError)},e.prototype.axGetNumericProperty=function(t){var e=this._length,n=0|t;return(n<0||n>=e||n!=t)&&this.sec.throwError("RangeError",kb.OutOfRangeError,t,e),this._buffer[this._offset+n]},e.prototype.axSetNumericProperty=function(t,e){var n=this._length,i=0|t;(i<0||i>n||i!=t||i===n&&this._fixed)&&this.sec.throwError("RangeError",kb.OutOfRangeError,t,n),i===this._length&&(this._ensureCapacity(this._length+1),this._length++),this._buffer[this._offset+i]=e},e.prototype.axHasPropertyInternal=function(t){if((0|t.name)===t.name)return t.name>=0&&t.name<this._length;var e=Nb(t.name);if(t.isRuntimeName()&&op(e)){var n=e>>>0;return n>=0&&n<this._length}return this.axResolveMultiname(t)in this},e.prototype.axNextValue=function(t){return this._buffer[this._offset+t-1]},e.prototype.axNextNameIndex=function(t){var e=t+1;return e<=this._length?e:0},e.EXTRA_CAPACITY=4,e.INITIAL_CAPACITY=10,e.DEFAULT_VALUE=0,e.DESCENDING=2,e.UNIQUESORT=4,e.RETURNINDEXEDARRAY=8,e}(Lx),Ux=function(t){function e(n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var r=t.call(this)||this;return n>>>=0,r._fixed=!!i,r._buffer=new Float64Array(Math.max(e.INITIAL_CAPACITY,n+e.EXTRA_CAPACITY)),r._offset=0,r._length=n,r}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=this.tPrototype;n.axGetProperty=t.axGetProperty,n.axGetNumericProperty=t.axGetNumericProperty,n.axSetProperty=t.axSetProperty,n.axSetNumericProperty=t.axSetNumericProperty,n.axHasPropertyInternal=t.axHasPropertyInternal,n.axNextName=t.axNextName,n.axNextNameIndex=t.axNextNameIndex,n.axNextValue=t.axNextValue,t.axGetProperty=Hb.prototype.axGetProperty,t.axGetNumericProperty=Hb.prototype.axGetNumericProperty,t.axSetProperty=Hb.prototype.axSetProperty,t.axSetNumericProperty=Hb.prototype.axSetNumericProperty,t.axHasPropertyInternal=Hb.prototype.axHasPropertyInternal,t.axNextName=Hb.prototype.axNextName,t.axNextNameIndex=Hb.prototype.axNextNameIndex,t.axNextValue=Hb.prototype.axNextValue;var i=e.prototype;Df(t,"$Bgjoin",i.join),Df(t,"$BgtoString",i.join),Df(t,"$BgtoLocaleString",i.toLocaleString),Df(t,"$Bgpop",i.pop),Df(t,"$Bgpush",i.push),Df(t,"$Bgreverse",i.reverse),Df(t,"$Bgconcat",i.concat),Df(t,"$Bgsplice",i.splice),Df(t,"$Bgslice",i.slice),Df(t,"$Bgshift",i.shift),Df(t,"$Bgunshift",i.unshift),Df(t,"$BgindexOf",i.indexOf),Df(t,"$BglastIndexOf",i.lastIndexOf),Df(t,"$BgforEach",i.forEach),Df(t,"$Bgmap",i.map),Df(t,"$Bgfilter",i.filter),Df(t,"$Bgsome",i.some),Df(t,"$Bgevery",i.every),Df(t,"$Bgsort",i.sort),Df(t,"checkVectorMethodArgs",i.checkVectorMethodArgs)},e.axApply=function(t,e){var n=e[0];if(this.axIsType(n))return n;var i=n.axGetPublicProperty("length");if(void 0!==i){for(var r=this.axConstruct([i,!1]),o=0;o<i;o++)r.axSetNumericProperty(o,n.axGetPublicProperty(o));return r}wp()},e.prototype.internalToString=function(){for(var t="",e=this._offset,n=e+this._length,i=0;i<this._buffer.length;i++)i===e&&(t+="["),i===n&&(t+="]"),t+=this._buffer[i],i<this._buffer.length-1&&(t+=",");return this._offset+this._length===this._buffer.length&&(t+="]"),t+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length},e.prototype.toString=function(){for(var t="",e=0;e<this._length;e++)t+=this._buffer[this._offset+e],e<this._length-1&&(t+=",");return t},e.prototype.toLocaleString=function(){for(var t="",e=0;e<this._length;e++)t+=this._buffer[this._offset+e],e<this._length-1&&(t+=",");return t},e.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)},e.prototype._ensureCapacity=function(t){var e=this._offset+t;if(!(e<this._buffer.length)){if(t<=this._buffer.length){var n=this._buffer.length-t>>2;return this._buffer.set(this._view(),n),void(this._offset=n)}var i=1+(3*this._buffer.length>>1);i<e&&(i=e);var r=new Float64Array(i);r.set(this._buffer,0),this._buffer=r}},e.prototype.concat=function(){for(var t=this._length,e=0;e<arguments.length;e++){(o=arguments[e])._buffer instanceof Float64Array||So(!1),t+=o._length}var n=new this.sec.Float64Vector(t),i=n._buffer;i.set(this._buffer);var r=this._length;for(e=0;e<arguments.length;e++){var o;r+(o=arguments[e])._buffer.length<o._buffer.length?i.set(o._buffer,r):i.set(o._buffer.subarray(0,o._length),r),r+=o._length}return n},e.prototype.every=function(t,e){if(!this.checkVectorMethodArgs(t,e))return!0;for(var n=0;n<this._length;n++)if(!t.call(e,this._buffer[this._offset+n],n,this))return!1;return!0},e.prototype.filter=function(t,e){var n=new this.sec.Float64Vector;if(!this.checkVectorMethodArgs(t,e))return n;for(var i=0;i<this._length;i++)t.call(e,this._buffer[this._offset+i],i,this)&&n.push(this._buffer[this._offset+i]);return n},e.prototype.map=function(t,e){var n=this.axClass.axConstruct([this.length,!1]);if(!this.checkVectorMethodArgs(t,e))return n;for(var i=0;i<this._length;i++)n[i]=t.call(e,this._buffer[this._offset+i],i,this);return n},e.prototype.some=function(t,e){if(!this.checkVectorMethodArgs(t,e))return!1;for(var n=0;n<this._length;n++)if(t.call(e,this._buffer[this._offset+n],n,this))return!0;return!1},e.prototype.forEach=function(t,e){if(this.checkVectorMethodArgs(t,e))for(var n=0;n<this._length;n++)t.call(e,this._buffer[this._offset+n],n,this)},e.prototype.join=function(t){void 0===t&&(t=",");for(var e=this.length,n=this._buffer,i=this._offset,r="",o=0;o<e-1;o++)r+=n[i+o]+t;return e>0&&(r+=n[i+e-1]),r},e.prototype.indexOf=function(t,e){void 0===e&&(e=0);var n=this._length,i=0|e;if(i<0)(i+=n)<0&&(i=0);else if(i>=n)return-1;for(var r=this._buffer,o=this._offset,a=o+n,s=i+=o;s<a;s++)if(r[s]===t)return s-o;return-1},e.prototype.lastIndexOf=function(t,e){void 0===e&&(e=2147483647);var n=this._length,i=0|e;if(i<0){if((i+=n)<0)return-1}else i>=n&&(i=n);for(var r=this._buffer,o=this._offset,a=o,s=i+=o;s-- >a;)if(r[s]===t)return s-o;return-1},e.prototype.push=function(t,e,n,i,r,o,a,s){this._checkFixed(),this._ensureCapacity(this._length+arguments.length);for(var l=0;l<arguments.length;l++)this._buffer[this._offset+this._length++]=arguments[l]},e.prototype.pop=function(){return this._checkFixed(),0===this._length?e.DEFAULT_VALUE:(this._length--,this._buffer[this._offset+this._length])},e.prototype.reverse=function(){for(var t=this._offset,e=this._offset+this._length-1,n=this._buffer;t<e;){var i=n[t];n[t]=n[e],n[e]=i,t++,e--}return this},e.prototype.sort=function(t){return 0===arguments.length?(Array.prototype.sort.call(this._view()),this):this.sec.AXFunction.axIsType(t)?(Array.prototype.sort.call(this._view(),t.value),this):((0|t)&e.DESCENDING?Array.prototype.sort.call(this._view(),(function(t,e){return e-t})):Array.prototype.sort.call(this._view(),(function(t,e){return t-e})),this)},e.prototype.shift=function(){return this._checkFixed(),0===this._length?0:(this._length--,this._buffer[this._offset++])},e.prototype.unshift=function(){if(this._checkFixed(),arguments.length){this._ensureCapacity(this._length+arguments.length),this._slide(arguments.length),this._offset-=arguments.length,this._length+=arguments.length;for(var t=0;t<arguments.length;t++)this._buffer[this._offset+t]=arguments[t]}},e.prototype.slice=function(t,e){void 0===t&&(t=0),void 0===e&&(e=2147483647);var n=this._buffer,i=this._length,r=Math.min(Math.max(t,0),i),o=Math.min(Math.max(e,r),i),a=new this.sec.Float64Vector(o-r,this.fixed);return a._buffer.set(n.subarray(this._offset+r,this._offset+o),a._offset),a},e.prototype.splice=function(t,e){var n,i=this._buffer,r=this._length,o=Math.min(Math.max(t,0),r),a=this._offset+o,s=Math.min(Math.max(e,0),r-o),l=arguments.length-2,u=new this.sec.Float64Vector(s,this.fixed);s>0&&(n=i.subarray(a,a+s),u._buffer.set(n,u._offset)),this._ensureCapacity(r-s+l);var c=a+s,h=i.subarray(c,r);i.set(h,a+l),this._length+=l-s;for(var p=0;p<l;p++)i[a+p]=arguments[p+2];return u},e.prototype._slide=function(t){this._buffer.set(this._view(),this._offset+t),this._offset+=t},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(t){if((t>>>=0)>this._length){this._ensureCapacity(t);for(var n=this._offset+this._length,i=this._offset+t;n<i;n++)this._buffer[n]=e.DEFAULT_VALUE}this._length=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixed",{get:function(){return this._fixed},set:function(t){this._fixed=!!t},enumerable:!1,configurable:!0}),e.prototype._checkFixed=function(){this._fixed&&this.sec.throwError("RangeError",kb.VectorFixedError)},e.prototype.axGetNumericProperty=function(t){var e=this._length,n=0|t;return(n<0||n>=e||n!=t)&&this.sec.throwError("RangeError",kb.OutOfRangeError,t,e),this._buffer[this._offset+n]},e.prototype.axSetNumericProperty=function(t,e){var n=this._length,i=0|t;(i<0||i>n||i!=t||i===n&&this._fixed)&&this.sec.throwError("RangeError",kb.OutOfRangeError,t,n),i===this._length&&(this._ensureCapacity(this._length+1),this._length++),this._buffer[this._offset+i]=e},e.prototype.axHasPropertyInternal=function(t){if((0|t.name)===t.name)return t.name>=0&&t.name<this._length;var e=Nb(t.name);if(t.isRuntimeName()&&op(e)){var n=e>>>0;return n>=0&&n<this._length}return this.axResolveMultiname(t)in this},e.prototype.axNextValue=function(t){return this._buffer[this._offset+t-1]},e.prototype.axNextNameIndex=function(t){var e=t+1;return e<=this._length?e:0},e.EXTRA_CAPACITY=4,e.INITIAL_CAPACITY=10,e.DEFAULT_VALUE=0,e.DESCENDING=2,e.UNIQUESORT=4,e.RETURNINDEXEDARRAY=8,e}(Lx),Vx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.classNatives=[Math],e.classInitializer=function(){Df(this,"$BgE",Math.E),Df(this,"$BgLN10",Math.LN10),Df(this,"$BgLN2",Math.LN2),Df(this,"$BgLOG10E",Math.LOG10E),Df(this,"$BgLOG2E",Math.LOG2E),Df(this,"$BgPI",Math.PI),Df(this,"$BgSQRT1_2",Math.SQRT2),Df(this,"$BgSQRT2",Math.SQRT2)},e}(Hb),jx=eh((function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports})),Gx=function(t){return t&&t.Math===Math&&t},Qx=Gx("object"==typeof globalThis&&globalThis)||Gx("object"==typeof window&&window)||Gx("object"==typeof self&&self)||Gx("object"==typeof $c&&$c)||Gx("object"==typeof $c&&$c)||function(){return this}()||Function("return this")(),zx=function(t){try{return!!t()}catch(t){return!0}},Hx=!zx((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),Xx=Hx,Yx=Function.prototype,qx=Yx.apply,Kx=Yx.call,Wx="object"==typeof Reflect&&Reflect.apply||(Xx?Kx.bind(qx):function(){return Kx.apply(qx,arguments)}),Jx=Function.prototype,Zx=Jx.call,$x=Xx&&Jx.bind.bind(Zx,Zx),tC=Xx?$x:function(t){return function(){return Zx.apply(t,arguments)}},eC=tC,nC=eC({}.toString),iC=eC("".slice),rC=function(t){return iC(nC(t),8,-1)},oC="object"==typeof document&&document.all,aC=void 0===oC&&void 0!==oC?function(t){return"function"==typeof t||t===oC}:function(t){return"function"==typeof t},sC=!zx((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),lC=Function.prototype.call,uC=Xx?lC.bind(lC):function(){return lC.apply(lC,arguments)},cC={}.propertyIsEnumerable,hC=Object.getOwnPropertyDescriptor,pC={f:hC&&!cC.call({1:2},1)?function(t){var e=hC(this,t);return!!e&&e.enumerable}:cC},dC=Object,fC=eC("".split),_C=zx((function(){return!dC("z").propertyIsEnumerable(0)}))?function(t){return"String"===rC(t)?fC(t,""):dC(t)}:dC,gC=function(t){return null==t},mC=TypeError,yC=_C,AC=function(t){if(gC(t))throw new mC("Can't call method on "+t);return t},vC=aC,bC={},xC=Qx,CC=function(t){return vC(t)?t:void 0},IC=eC({}.isPrototypeOf),EC="undefined"!=typeof navigator&&String(navigator.userAgent)||"",wC=xC.process,SC=xC.Deno,DC=wC&&wC.versions||SC&&SC.version,TC=DC&&DC.v8;TC&&(Mx=(Ox=TC.split("."))[0]>0&&Ox[0]<4?1:+(Ox[0]+Ox[1])),!Mx&&EC&&(!(Ox=EC.match(/Edge\/(\d+)/))||Ox[1]>=74)&&(Ox=EC.match(/Chrome\/(\d+)/))&&(Mx=+Ox[1]);var PC=Mx,BC=xC.String,OC=!!Object.getOwnPropertySymbols&&!zx((function(){var t=Symbol("symbol detection");return!BC(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&PC&&PC<41})),MC=OC,LC=MC&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,RC=function(t,e){return arguments.length<2?CC(bC[t])||CC(xC[t]):bC[t]&&bC[t][e]||xC[t]&&xC[t][e]},NC=IC,FC=LC,kC=Object,UC=FC?function(t){return"symbol"==typeof t}:function(t){var e=RC("Symbol");return vC(e)&&NC(e.prototype,kC(t))},VC=String,jC=function(t){try{return VC(t)}catch(t){return"Object"}},GC=TypeError,QC=function(t){if(vC(t))return t;throw new GC(jC(t)+" is not a function")},zC=uC,HC=function(t){return"object"==typeof t?null!==t:vC(t)},XC=TypeError,YC=Object.defineProperty,qC=function(t,e){try{YC(xC,t,{value:e,configurable:!0,writable:!0})}catch(n){xC[t]=e}return e},KC=eh((function(t){var e="__core-js_shared__",n=t.exports=xC[e]||qC(e,{});(n.versions||(n.versions=[])).push({version:"3.36.1",mode:"pure",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),WC=KC,JC=Object,ZC=function(t){return JC(AC(t))},$C=eC({}.hasOwnProperty),tI=Object.hasOwn||function(t,e){return $C(ZC(t),e)},eI=0,nI=Math.random(),iI=eC(1..toString),rI=function(t,e){return WC[t]||(WC[t]=e||{})},oI=tI,aI=function(t){return"Symbol("+(void 0===t?"":t)+")_"+iI(++eI+nI,36)},sI=xC.Symbol,lI=rI("wks"),uI=FC?sI.for||sI:sI&&sI.withoutSetter||aI,cI=UC,hI=function(t,e){var n=t[e];return gC(n)?void 0:QC(n)},pI=function(t,e){var n,i;if("string"===e&&vC(n=t.toString)&&!HC(i=zC(n,t)))return i;if(vC(n=t.valueOf)&&!HC(i=zC(n,t)))return i;if("string"!==e&&vC(n=t.toString)&&!HC(i=zC(n,t)))return i;throw new XC("Can't convert object to primitive value")},dI=function(t){return oI(lI,t)||(lI[t]=MC&&oI(sI,t)?sI[t]:uI("Symbol."+t)),lI[t]},fI=TypeError,_I=dI("toPrimitive"),gI=function(t,e){if(!HC(t)||cI(t))return t;var n,i=hI(t,_I);if(i){if(void 0===e&&(e="default"),n=zC(i,t,e),!HC(n)||cI(n))return n;throw new fI("Can't convert object to primitive value")}return void 0===e&&(e="number"),pI(t,e)},mI=xC.document,yI=HC(mI)&&HC(mI.createElement),AI=sC,vI=function(t){return yI?mI.createElement(t):{}},bI=!AI&&!zx((function(){return 7!==Object.defineProperty(vI("div"),"a",{get:function(){return 7}}).a})),xI=pC,CI=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},II=function(t){return yC(AC(t))},EI=function(t){var e=gI(t,"string");return cI(e)?e:e+""},wI=bI,SI=Object.getOwnPropertyDescriptor,DI={f:AI?SI:function(t,e){if(t=II(t),e=EI(e),wI)try{return SI(t,e)}catch(t){}if(oI(t,e))return CI(!zC(xI.f,t,e),t[e])}},TI=/#|\.prototype\./,PI=function(t,e){var n=OI[BI(t)];return n===LI||n!==MI&&(vC(e)?zx(e):!!e)},BI=PI.normalize=function(t){return String(t).replace(TI,".").toLowerCase()},OI=PI.data={},MI=PI.NATIVE="N",LI=PI.POLYFILL="P",RI=PI,NI=function(t){if("Function"===rC(t))return eC(t)},FI=NI(NI.bind),kI=AI&&zx((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),UI=String,VI=TypeError,jI=kI,GI=function(t){if(HC(t))return t;throw new VI(UI(t)+" is not an object")},QI=TypeError,zI=Object.defineProperty,HI=Object.getOwnPropertyDescriptor,XI="enumerable",YI="configurable",qI="writable",KI={f:AI?jI?function(t,e,n){if(GI(t),e=EI(e),GI(n),"function"==typeof t&&"prototype"===e&&"value"in n&&qI in n&&!n[qI]){var i=HI(t,e);i&&i[qI]&&(t[e]=n.value,n={configurable:YI in n?n[YI]:i[YI],enumerable:XI in n?n[XI]:i[XI],writable:!1})}return zI(t,e,n)}:zI:function(t,e,n){if(GI(t),e=EI(e),GI(n),wI)try{return zI(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new QI("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},WI=Wx,JI=DI,ZI=RI,$I=function(t,e){return QC(t),void 0===e?t:Xx?FI(t,e):function(){return t.apply(e,arguments)}},tE=AI?function(t,e,n){return KI.f(t,e,CI(1,n))}:function(t,e,n){return t[e]=n,t},eE=JI.f,nE=function(t){var e=function(n,i,r){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,i)}return new t(n,i,r)}return WI(t,this,arguments)};return e.prototype=t.prototype,e},iE=function(t,e){var n,i,r,o,a,s,l,u,c,h=t.target,p=t.global,d=t.stat,f=t.proto,_=p?xC:d?xC[h]:xC[h]&&xC[h].prototype,g=p?bC:bC[h]||tE(bC,h,{})[h],m=g.prototype;for(o in e)i=!(n=ZI(p?o:h+(d?".":"#")+o,t.forced))&&_&&oI(_,o),s=g[o],i&&(l=t.dontCallGetSet?(c=eE(_,o))&&c.value:_[o]),a=i&&l?l:e[o],(n||f||typeof s!=typeof a)&&(u=t.bind&&i?$I(a,xC):t.wrap&&i?nE(a):f&&vC(a)?NI(a):a,(t.sham||a&&a.sham||s&&s.sham)&&tE(u,"sham",!0),tE(g,o,u),f&&(oI(bC,r=h+"Prototype")||tE(bC,r,{}),tE(bC[r],o,a),t.real&&m&&(n||!m[o])&&tE(m,o,a)))},rE=KI.f;iE({target:"Object",stat:!0,forced:Object.defineProperty!==rE,sham:!AI},{defineProperty:rE});var oE,aE,sE,lE=eh((function(t){var e=bC.Object,n=t.exports=function(t,n,i){return e.defineProperty(t,n,i)};e.defineProperty.sham&&(n.sham=!0)})),uE=lE,cE=xC.WeakMap,hE=vC(cE)&&/native code/.test(String(cE)),pE=rI("keys"),dE=hE,fE=function(t){return pE[t]||(pE[t]=aI(t))},_E={},gE="Object already initialized",mE=xC.TypeError,yE=xC.WeakMap;if(dE||WC.state){var AE=WC.state||(WC.state=new yE);AE.get=AE.get,AE.has=AE.has,AE.set=AE.set,oE=function(t,e){if(AE.has(t))throw new mE(gE);return e.facade=t,AE.set(t,e),e},aE=function(t){return AE.get(t)||{}},sE=function(t){return AE.has(t)}}else{var vE=fE("state");_E[vE]=!0,oE=function(t,e){if(oI(t,vE))throw new mE(gE);return e.facade=t,tE(t,vE,e),e},aE=function(t){return oI(t,vE)?t[vE]:{}},sE=function(t){return oI(t,vE)}}var bE,xE={set:oE,get:aE,has:sE,enforce:function(t){return sE(t)?aE(t):oE(t,{})},getterFor:function(t){return function(e){var n;if(!HC(e)||(n=aE(e)).type!==t)throw new mE("Incompatible receiver, "+t+" required");return n}}},CE=Function.prototype,IE=AI&&Object.getOwnPropertyDescriptor,EE=oI(CE,"name"),wE={EXISTS:EE,PROPER:EE&&"something"===function(){}.name,CONFIGURABLE:EE&&(!AI||AI&&IE(CE,"name").configurable)},SE=Math.ceil,DE=Math.floor,TE=Math.trunc||function(t){var e=+t;return(e>0?DE:SE)(e)},PE=function(t){var e=+t;return e!=e||0===e?0:TE(e)},BE=Math.max,OE=Math.min,ME=Math.min,LE=function(t){var e=PE(t);return e>0?ME(e,9007199254740991):0},RE=function(t,e){var n=PE(t);return n<0?BE(n+e,0):OE(n,e)},NE=function(t){return LE(t.length)},FE=function(t){return function(e,n,i){var r=II(e),o=NE(r);if(0===o)return!t&&-1;var a,s=RE(i,o);if(t&&n!=n){for(;o>s;)if((a=r[s++])!=a)return!0}else for(;o>s;s++)if((t||s in r)&&r[s]===n)return t||s||0;return!t&&-1}},kE={includes:FE(!0),indexOf:FE(!1)},UE=kE.indexOf,VE=eC([].push),jE=function(t,e){var n,i=II(t),r=0,o=[];for(n in i)!oI(_E,n)&&oI(i,n)&&VE(o,n);for(;e.length>r;)oI(i,n=e[r++])&&(~UE(o,n)||VE(o,n));return o},GE=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],QE=Object.keys||function(t){return jE(t,GE)},zE=AI&&!jI?Object.defineProperties:function(t,e){GI(t);for(var n,i=II(e),r=QE(e),o=r.length,a=0;o>a;)KI.f(t,n=r[a++],i[n]);return t},HE={f:zE},XE=RC("document","documentElement"),YE=HE,qE=XE,KE="prototype",WE="script",JE=fE("IE_PROTO"),ZE=function(){},$E=function(t){return"<"+WE+">"+t+"</"+WE+">"},tw=function(t){t.write($E("")),t.close();var e=t.parentWindow.Object;return t=null,e},ew=function(){try{bE=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;ew="undefined"!=typeof document?document.domain&&bE?tw(bE):(e=vI("iframe"),n="java"+WE+":",e.style.display="none",qE.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write($E("document.F=Object")),t.close(),t.F):tw(bE);for(var i=GE.length;i--;)delete ew[KE][GE[i]];return ew()};_E[JE]=!0;var nw,iw,rw,ow=Object.create||function(t,e){var n;return null!==t?(ZE[KE]=GI(t),n=new ZE,ZE[KE]=null,n[JE]=t):n=ew(),void 0===e?n:YE.f(n,e)},aw=!zx((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),sw=fE("IE_PROTO"),lw=Object,uw=lw.prototype,cw=aw?lw.getPrototypeOf:function(t){var e=ZC(t);if(oI(e,sw))return e[sw];var n=e.constructor;return vC(n)&&e instanceof n?n.prototype:e instanceof lw?uw:null},hw=ow,pw=cw,dw=function(t,e,n,i){return i&&i.enumerable?t[e]=n:tE(t,e,n),t},fw=dI("iterator"),_w=!1;[].keys&&("next"in(rw=[].keys())?(iw=pw(pw(rw)))!==Object.prototype&&(nw=iw):_w=!0);var gw=!HC(nw)||zx((function(){var t={};return nw[fw].call(t)!==t}));nw=gw?{}:hw(nw),vC(nw[fw])||dw(nw,fw,(function(){return this}));var mw={IteratorPrototype:nw,BUGGY_SAFARI_ITERATORS:_w},yw={};yw[dI("toStringTag")]="z";var Aw="[object z]"===String(yw),vw=dI("toStringTag"),bw=Object,xw="Arguments"===rC(function(){return arguments}()),Cw=Aw?rC:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=bw(t),vw))?n:xw?rC(e):"Object"===(i=rC(e))&&vC(e.callee)?"Arguments":i},Iw=Aw?{}.toString:function(){return"[object "+Cw(this)+"]"},Ew=KI.f,ww=dI("toStringTag"),Sw=mw,Dw=function(t,e,n,i){var r=n?t:t&&t.prototype;r&&(oI(r,ww)||Ew(r,ww,{configurable:!0,value:e}),i&&!Aw&&tE(r,"toString",Iw))},Tw={},Pw=Sw.IteratorPrototype,Bw=function(){return this},Ow=function(t){return HC(t)||null===t},Mw=String,Lw=TypeError,Rw=function(t,e,n){try{return eC(QC(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}},Nw=function(t){if(Ow(t))return t;throw new Lw("Can't set "+Mw(t)+" as a prototype")},Fw=(Object.setPrototypeOf||"__proto__"in{}&&function(){var t,e=!1,n={};try{(t=Rw(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}}(),function(t,e,n,i){var r=e+" Iterator";return t.prototype=hw(Pw,{next:CI(+!i,n)}),Dw(t,r,!1,!0),Tw[r]=Bw,t}),kw=wE.PROPER,Uw=Sw.BUGGY_SAFARI_ITERATORS,Vw=dI("iterator"),jw="keys",Gw="values",Qw="entries",zw=function(){return this},Hw=function(){},Xw=xE,Yw=function(t,e,n,i,r,o,a){Fw(n,e,i);var s,l,u,c=function(t){if(t===r&&_)return _;if(!Uw&&t&&t in d)return d[t];switch(t){case jw:case Gw:case Qw:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",p=!1,d=t.prototype,f=d[Vw]||d["@@iterator"]||r&&d[r],_=!Uw&&f||c(r),g="Array"===e&&d.entries||f;if(g&&(s=pw(g.call(new t)))!==Object.prototype&&s.next&&(Dw(s,h,!0,!0),Tw[h]=zw),kw&&r===Gw&&f&&f.name!==Gw&&(p=!0,_=function(){return zC(f,this)}),r)if(l={values:c(Gw),keys:o?_:c(jw),entries:c(Qw)},a)for(u in l)(Uw||p||!(u in d))&&dw(d,u,l[u]);else iE({target:e,proto:!0,forced:Uw||p},l);return a&&d[Vw]!==_&&dw(d,Vw,_,{name:r}),Tw[e]=_,l},qw=function(t,e){return{value:t,done:e}},Kw=(KI.f,"Array Iterator"),Ww=Xw.set,Jw=Xw.getterFor(Kw);Yw(Array,"Array",(function(t,e){Ww(this,{type:Kw,target:II(t),index:0,kind:e})}),(function(){var t=Jw(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,qw(void 0,!0);switch(t.kind){case"keys":return qw(n,!1);case"values":return qw(e[n],!1)}return qw([n,e[n]],!1)}),"values");Tw.Arguments=Tw.Array;Hw(),Hw(),Hw();var Zw=String,$w=function(t){if("Symbol"===Cw(t))throw new TypeError("Cannot convert a Symbol value to a string");return Zw(t)},tS=eC("".charAt),eS=eC("".charCodeAt),nS=eC("".slice),iS=function(t){return function(e,n){var i,r,o=$w(AC(e)),a=PE(n),s=o.length;return a<0||a>=s?t?"":void 0:(i=eS(o,a))<55296||i>56319||a+1===s||(r=eS(o,a+1))<56320||r>57343?t?tS(o,a):i:t?nS(o,a,a+2):r-56320+(i-55296<<10)+65536}},rS={codeAt:iS(!1),charAt:iS(!0)}.charAt,oS="String Iterator",aS=Xw.set,sS=Xw.getterFor(oS);Yw(String,"String",(function(t){aS(this,{type:oS,string:$w(t),index:0})}),(function(){var t,e=sS(this),n=e.string,i=e.index;return i>=n.length?qw(void 0,!0):(t=rS(n,i),e.index+=t.length,qw(t,!1))}));var lS=dI("iterator"),uS=function(t){if(!gC(t))return hI(t,lS)||hI(t,"@@iterator")||Tw[Cw(t)]},cS=TypeError,hS=function(t,e){var n=arguments.length<2?uS(t):e;if(QC(n))return GI(zC(n,t));throw new cS(jC(t)+" is not iterable")},pS=hS,dS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var fS in dS)Dw(xC[fS],fS),Tw[fS]=Tw.Array;var _S=pS,gS=Array.isArray||function(t){return"Array"===rC(t)};iE({target:"Array",stat:!0},{isArray:gS});var mS=bC.Array.isArray,yS=mS,AS=uS,vS=AS,bS=TypeError,xS=eC(Function.toString);vC(WC.inspectSource)||(WC.inspectSource=function(t){return xS(t)});var CS=WC.inspectSource,IS=function(){},ES=RC("Reflect","construct"),wS=/^\s*(?:class|function)\b/,SS=eC(wS.exec),DS=!wS.test(IS),TS=function(t){if(!vC(t))return!1;try{return ES(IS,[],t),!0}catch(t){return!1}},PS=function(t){if(!vC(t))return!1;switch(Cw(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return DS||!!SS(wS,CS(t))}catch(t){return!0}};PS.sham=!0;var BS=!ES||zx((function(){var t;return TS(TS.call)||!TS(Object)||!TS((function(){t=!0}))||t}))?PS:TS,OS=BS,MS=dI("species"),LS=Array,RS=function(t){var e;return gS(t)&&(e=t.constructor,(OS(e)&&(e===LS||gS(e.prototype))||HC(e)&&null===(e=e[MS]))&&(e=void 0)),void 0===e?LS:e},NS=dI("species"),FS=function(t){if(t>9007199254740991)throw bS("Maximum allowed index exceeded");return t},kS=function(t,e,n){AI?KI.f(t,e,CI(0,n)):t[e]=n},US=function(t,e){return new(RS(t))(0===e?0:e)},VS=function(t){return PC>=51||!zx((function(){var e=[];return(e.constructor={})[NS]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},jS=dI("isConcatSpreadable"),GS=PC>=51||!zx((function(){var t=[];return t[jS]=!1,t.concat()[0]!==t})),QS=function(t){if(!HC(t))return!1;var e=t[jS];return void 0!==e?!!e:gS(t)},zS=!GS||!VS("concat");iE({target:"Array",proto:!0,arity:1,forced:zS},{concat:function(t){var e,n,i,r,o,a=ZC(this),s=US(a,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(QS(o=-1===e?a:arguments[e]))for(r=NE(o),FS(l+r),n=0;n<r;n++,l++)n in o&&kS(s,l,o[n]);else FS(l+1),kS(s,l++,o);return s.length=l,s}});var HS=GE.concat("length","prototype"),XS={f:Object.getOwnPropertyNames||function(t){return jE(t,HS)}},YS=eC([].slice),qS=XS.f,KS="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],WS={f:function(t){return KS&&"Window"===rC(t)?function(t){try{return qS(t)}catch(t){return YS(KS)}}(t):qS(II(t))}},JS={f:Object.getOwnPropertySymbols},ZS={f:dI},$S=KI.f,tD=eC([].push),eD=function(t){var e=1===t,n=2===t,i=3===t,r=4===t,o=6===t,a=7===t,s=5===t||o;return function(l,u,c,h){for(var p,d,f=ZC(l),_=yC(f),g=NE(_),m=$I(u,c),y=0,A=h||US,v=e?A(l,g):n||a?A(l,0):void 0;g>y;y++)if((s||y in _)&&(d=m(p=_[y],y,f),t))if(e)v[y]=d;else if(d)switch(t){case 3:return!0;case 5:return p;case 6:return y;case 2:tD(v,p)}else switch(t){case 4:return!1;case 7:tD(v,p)}return o?-1:i||r?r:v}},nD={forEach:eD(0),map:eD(1),filter:eD(2),some:eD(3),every:eD(4),find:eD(5),findIndex:eD(6),filterReject:eD(7)},iD=WS,rD=JS,oD=function(t,e,n){return KI.f(t,e,n)},aD=function(t){var e=bC.Symbol||(bC.Symbol={});oI(e,t)||$S(e,t,{value:ZS.f(t)})},sD=function(){var t=RC("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,i=dI("toPrimitive");e&&!e[i]&&dw(e,i,(function(t){return zC(n,this)}),{arity:1})},lD=nD,uD=lD.forEach,cD=fE("hidden"),hD="Symbol",pD="prototype",dD=Xw.set,fD=Xw.getterFor(hD),_D=Object[pD],gD=xC.Symbol,mD=gD&&gD[pD],yD=xC.RangeError,AD=xC.TypeError,vD=xC.QObject,bD=JI.f,xD=KI.f,CD=iD.f,ID=xI.f,ED=eC([].push),wD=rI("symbols"),SD=rI("op-symbols"),DD=rI("wks"),TD=!vD||!vD[pD]||!vD[pD].findChild,PD=function(t,e,n){var i=bD(_D,e);i&&delete _D[e],xD(t,e,n),i&&t!==_D&&xD(_D,e,i)},BD=AI&&zx((function(){return 7!==hw(xD({},"a",{get:function(){return xD(this,"a",{value:7}).a}})).a}))?PD:xD,OD=function(t,e){var n=wD[t]=hw(mD);return dD(n,{type:hD,tag:t,description:e}),AI||(n.description=e),n},MD=function(t,e,n){t===_D&&MD(SD,e,n),GI(t);var i=EI(e);return GI(n),oI(wD,i)?(n.enumerable?(oI(t,cD)&&t[cD][i]&&(t[cD][i]=!1),n=hw(n,{enumerable:CI(0,!1)})):(oI(t,cD)||xD(t,cD,CI(1,hw(null))),t[cD][i]=!0),BD(t,i,n)):xD(t,i,n)},LD=function(t,e){GI(t);var n=II(e),i=QE(n).concat(kD(n));return uD(i,(function(e){AI&&!zC(RD,n,e)||MD(t,e,n[e])})),t},RD=function(t){var e=EI(t),n=zC(ID,this,e);return!(this===_D&&oI(wD,e)&&!oI(SD,e))&&(!(n||!oI(this,e)||!oI(wD,e)||oI(this,cD)&&this[cD][e])||n)},ND=function(t,e){var n=II(t),i=EI(e);if(n!==_D||!oI(wD,i)||oI(SD,i)){var r=bD(n,i);return!r||!oI(wD,i)||oI(n,cD)&&n[cD][i]||(r.enumerable=!0),r}},FD=function(t){var e=CD(II(t)),n=[];return uD(e,(function(t){oI(wD,t)||oI(_E,t)||ED(n,t)})),n},kD=function(t){var e=t===_D,n=CD(e?SD:II(t)),i=[];return uD(n,(function(t){!oI(wD,t)||e&&!oI(_D,t)||ED(i,wD[t])})),i};MC||(gD=function(){if(NC(mD,this))throw new AD("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?$w(arguments[0]):void 0,e=aI(t),n=function(t){var i=void 0===this?xC:this;i===_D&&zC(n,SD,t),oI(i,cD)&&oI(i[cD],e)&&(i[cD][e]=!1);var r=CI(1,t);try{BD(i,e,r)}catch(t){if(!(t instanceof yD))throw t;PD(i,e,r)}};return AI&&TD&&BD(_D,e,{configurable:!0,set:n}),OD(e,t)},mD=gD[pD],dw(mD,"toString",(function(){return fD(this).tag})),dw(gD,"withoutSetter",(function(t){return OD(aI(t),t)})),xI.f=RD,KI.f=MD,YE.f=LD,JI.f=ND,XS.f=iD.f=FD,rD.f=kD,ZS.f=function(t){return OD(dI(t),t)},AI&&oD(mD,"description",{configurable:!0,get:function(){return fD(this).description}})),iE({global:!0,constructor:!0,wrap:!0,forced:!MC,sham:!MC},{Symbol:gD}),uD(QE(DD),(function(t){aD(t)})),iE({target:hD,stat:!0,forced:!MC},{useSetter:function(){TD=!0},useSimple:function(){TD=!1}}),iE({target:"Object",stat:!0,forced:!MC,sham:!AI},{create:function(t,e){return void 0===e?hw(t):LD(hw(t),e)},defineProperty:MD,defineProperties:LD,getOwnPropertyDescriptor:ND}),iE({target:"Object",stat:!0,forced:!MC},{getOwnPropertyNames:FD}),sD(),Dw(gD,hD),_E[cD]=!0;var UD=MC&&!!Symbol.for&&!!Symbol.keyFor,VD=rI("string-to-symbol-registry"),jD=rI("symbol-to-string-registry");iE({target:"Symbol",stat:!0,forced:!UD},{for:function(t){var e=$w(t);if(oI(VD,e))return VD[e];var n=RC("Symbol")(e);return VD[e]=n,jD[n]=e,n}});var GD=rI("symbol-to-string-registry");iE({target:"Symbol",stat:!0,forced:!UD},{keyFor:function(t){if(!cI(t))throw new TypeError(jC(t)+" is not a symbol");if(oI(GD,t))return GD[t]}});var QD=eC([].push),zD=function(t){if(vC(t))return t;if(gS(t)){for(var e=t.length,n=[],i=0;i<e;i++){var r=t[i];"string"==typeof r?QD(n,r):"number"!=typeof r&&"Number"!==rC(r)&&"String"!==rC(r)||QD(n,$w(r))}var o=n.length,a=!0;return function(t,e){if(a)return a=!1,e;if(gS(this))return e;for(var i=0;i<o;i++)if(n[i]===t)return e}}},HD=String,XD=RC("JSON","stringify"),YD=eC(/./.exec),qD=eC("".charAt),KD=eC("".charCodeAt),WD=eC("".replace),JD=eC(1..toString),ZD=/[\uD800-\uDFFF]/g,$D=/^[\uD800-\uDBFF]$/,tT=/^[\uDC00-\uDFFF]$/,eT=!MC||zx((function(){var t=RC("Symbol")("stringify detection");return"[null]"!==XD([t])||"{}"!==XD({a:t})||"{}"!==XD(Object(t))})),nT=zx((function(){return'"\\udf06\\ud834"'!==XD("\udf06\ud834")||'"\\udead"'!==XD("\udead")})),iT=function(t,e){var n=YS(arguments),i=zD(e);if(vC(i)||void 0!==t&&!cI(t))return n[1]=function(t,e){if(vC(i)&&(e=zC(i,this,HD(t),e)),!cI(e))return e},WI(XD,null,n)},rT=function(t,e,n){var i=qD(n,e-1),r=qD(n,e+1);return YD($D,t)&&!YD(tT,r)||YD(tT,t)&&!YD($D,i)?"\\u"+JD(KD(t,0),16):t};XD&&iE({target:"JSON",stat:!0,arity:3,forced:eT||nT},{stringify:function(t,e,n){var i=YS(arguments),r=WI(eT?iT:XD,null,i);return nT&&"string"==typeof r?WD(r,ZD,rT):r}});var oT=!MC||zx((function(){rD.f(1)}));iE({target:"Object",stat:!0,forced:oT},{getOwnPropertySymbols:function(t){var e=rD.f;return e?e(ZC(t)):[]}}),aD("asyncIterator"),aD("hasInstance"),aD("isConcatSpreadable"),aD("iterator"),aD("match"),aD("matchAll"),aD("replace"),aD("search"),aD("species"),aD("split"),aD("toPrimitive"),sD(),aD("toStringTag"),Dw(RC("Symbol"),"Symbol"),aD("unscopables"),Dw(xC.JSON,"JSON",!0);var aT=bC.Symbol,sT=aT,lT=function(t,e,n){var i,r;GI(t);try{if(!(i=hI(t,"return"))){if("throw"===e)throw n;return n}i=zC(i,t)}catch(t){r=!0,i=t}if("throw"===e)throw n;if(r)throw i;return GI(i),n},uT=dI("iterator"),cT=Array.prototype,hT=function(t,e,n,i){try{return i?e(GI(n)[0],n[1]):e(n)}catch(e){lT(t,"throw",e)}},pT=function(t){return void 0!==t&&(Tw.Array===t||cT[uT]===t)},dT=Array,fT=dI("iterator"),_T=!1;try{var gT=0,mT={next:function(){return{done:!!gT++}},return:function(){_T=!0}};mT[fT]=function(){return this},Array.from(mT,(function(){throw 2}))}catch(Vb){}var yT=function(t){var e=ZC(t),n=OS(this),i=arguments.length,r=i>1?arguments[1]:void 0,o=void 0!==r;o&&(r=$I(r,i>2?arguments[2]:void 0));var a,s,l,u,c,h,p=uS(e),d=0;if(!p||this===dT&&pT(p))for(a=NE(e),s=n?new this(a):dT(a);a>d;d++)h=o?r(e[d],d):e[d],kS(s,d,h);else for(s=n?new this:[],c=(u=hS(e,p)).next;!(l=zC(c,u)).done;d++)h=o?hT(u,r,[l.value,d],!0):l.value,kS(s,d,h);return s.length=d,s},AT=function(t,e){try{if(!e&&!_T)return!1}catch(t){return!1}var n=!1;try{var i={};i[fT]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n},vT=!AT((function(t){Array.from(t)}));iE({target:"Array",stat:!0,forced:vT},{from:yT});var bT=bC.Array.from,xT=bT,CT=function(t,e){var n=bC[t+"Prototype"],i=n&&n[e];if(i)return i;var r=xC[t],o=r&&r.prototype;return o&&o[e]},IT=CT("Array","concat"),ET=Array.prototype,wT=function(t){var e=t.concat;return t===ET||NC(ET,t)&&e===ET.concat?IT:e},ST=function(t,e){var n=[][t];return!!n&&zx((function(){n.call(null,e||function(){return 1},1)}))},DT=kE.indexOf,TT=NI([].indexOf),PT=!!TT&&1/TT([1],1,-0)<0,BT=PT||!ST("indexOf");iE({target:"Array",proto:!0,forced:BT},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return PT?TT(this,t,e)||0:DT(this,t,e)}});var OT=CT("Array","indexOf"),MT=Array.prototype,LT=function(t){var e=t.indexOf;return t===MT||NC(MT,t)&&e===MT.indexOf?OT:e};iE({target:"Object",stat:!0,sham:!AI},{create:hw});var RT=bC.Object,NT=function(t,e){return RT.create(t,e)},FT=NT,kT=mS,UT=eh((function(t){t.exports=function(t){if(kT(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports})),VT=KI.f,jT=dI("metadata"),GT=Function.prototype;void 0===GT[jT]&&VT(GT,jT,{value:null}),aD("asyncDispose"),aD("dispose"),aD("metadata");var QT=aT,zT=RC("Symbol"),HT=zT.keyFor,XT=eC(zT.prototype.valueOf),YT=zT.isRegisteredSymbol||function(t){try{return void 0!==HT(XT(t))}catch(t){return!1}};iE({target:"Symbol",stat:!0},{isRegisteredSymbol:YT});for(var qT=RC("Symbol"),KT=qT.isWellKnownSymbol,WT=RC("Object","getOwnPropertyNames"),JT=eC(qT.prototype.valueOf),ZT=rI("wks"),$T=0,tP=WT(qT),eP=tP.length;$T<eP;$T++)try{var nP=tP[$T];cI(qT[nP])&&dI(nP)}catch(Vb){}var iP=function(t){if(KT&&KT(t))return!0;try{for(var e=JT(t),n=0,i=WT(ZT),r=i.length;n<r;n++)if(ZT[i[n]]==e)return!0}catch(t){}return!1};iE({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:iP}),aD("matcher"),aD("observable"),iE({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:YT}),iE({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:iP}),aD("metadataKey"),aD("patternMatch"),aD("replaceAll");var rP=QT,oP=TypeError,aP=Object.getOwnPropertyDescriptor,sP=AI&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}(),lP=sP?function(t,e){if(gS(t)&&!aP(t,"length").writable)throw new oP("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},uP=zx((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}();iE({target:"Array",proto:!0,arity:1,forced:uP},{push:function(t){var e=ZC(this),n=NE(e),i=arguments.length;FS(n+i);for(var r=0;r<i;r++)e[n]=arguments[r],n++;return lP(e,n),n}});var cP=CT("Array","push"),hP=Array.prototype,pP=rP,dP=function(t){var e=t.push;return t===hP||NC(hP,t)&&e===hP.push?cP:e},fP=eh((function(t){t.exports=function(t,e){var n=null==t?null:void 0!==pP&&AS(t)||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(dP(s).call(s,i.value),s.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports})),_P=VS("slice"),gP=dI("species"),mP=Array,yP=Math.max;iE({target:"Array",proto:!0,forced:!_P},{slice:function(t,e){var n,i,r,o=II(this),a=NE(o),s=RE(t,a),l=RE(void 0===e?a:e,a);if(gS(o)&&(n=o.constructor,(OS(n)&&(n===mP||gS(n.prototype))||HC(n)&&null===(n=n[gP]))&&(n=void 0),n===mP||void 0===n))return YS(o,s,l);for(i=new(void 0===n?mP:n)(yP(l-s,0)),r=0;s<l;s++,r++)s in o&&kS(i,r,o[s]);return i.length=r,i}});var AP=CT("Array","slice"),vP=Array.prototype,bP=function(t){var e=t.slice;return t===vP||NC(vP,t)&&e===vP.slice?AP:e},xP=bP,CP=bT,IP=eh((function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports})),EP=xP,wP=CP,SP=eh((function(t){t.exports=function(t,e){var n;if(t){if("string"==typeof t)return IP(t,e);var i=EP(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?wP(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?IP(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports})),DP=eh((function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports})),TP=eh((function(t){t.exports=function(t,e){return UT(t)||fP(t,e)||SP(t,e)||DP()},t.exports.__esModule=!0,t.exports.default=t.exports})),PP=lD.forEach,BP=ST("forEach")?[].forEach:function(t){return PP(this,t,arguments.length>1?arguments[1]:void 0)};iE({target:"Array",proto:!0,forced:[].forEach!==BP},{forEach:BP});var OP=CT("Array","forEach"),MP=Array.prototype,LP={DOMTokenList:!0,NodeList:!0},RP=function(t){var e=t.forEach;return t===MP||NC(MP,t)&&e===MP.forEach||oI(LP,Cw(t))?OP:e},NP=kE.includes,FP=zx((function(){return!Array(1).includes()}));iE({target:"Array",proto:!0,forced:FP},{includes:function(t){return NP(this,t,arguments.length>1?arguments[1]:void 0)}}),Hw();var kP=CT("Array","includes"),UP=dI("match"),VP=function(t){var e;return HC(t)&&(void 0!==(e=t[UP])?!!e:"RegExp"===rC(t))},jP=TypeError,GP=dI("match"),QP=function(t){if(VP(t))throw new jP("The method doesn't accept regular expressions");return t},zP=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[GP]=!1,"/./"[t](e)}catch(t){}}return!1},HP=eC("".indexOf);iE({target:"String",proto:!0,forced:!zP("includes")},{includes:function(t){return!!~HP($w(AC(this)),$w(QP(t)),arguments.length>1?arguments[1]:void 0)}});var XP=CT("String","includes"),YP=kP,qP=XP,KP=Array.prototype,WP=String.prototype,JP=function(t){var e=t.includes;return t===KP||NC(KP,t)&&e===KP.includes?YP:"string"==typeof t||t===WP||NC(WP,t)&&e===WP.includes?qP:e},ZP="\t\n\v\f\r                　\u2028\u2029\ufeff",$P=eC("".replace),tB=RegExp("^["+ZP+"]+"),eB=RegExp("(^|[^"+ZP+"])["+ZP+"]+$"),nB=function(t){return function(e){var n=$w(AC(e));return 1&t&&(n=$P(n,tB,"")),2&t&&(n=$P(n,eB,"$1")),n}},iB={start:nB(1),end:nB(2),trim:nB(3)}.trim,rB=xC.parseInt,oB=xC.Symbol,aB=oB&&oB.iterator,sB=/^[+-]?0x/i,lB=eC(sB.exec),uB=8!==rB(ZP+"08")||22!==rB(ZP+"0x16")||aB&&!zx((function(){rB(Object(aB))}))?function(t,e){var n=iB($w(t));return rB(n,e>>>0||(lB(sB,n)?16:10))}:rB;iE({global:!0,forced:parseInt!==uB},{parseInt:uB});var cB=bC.parseInt,hB=bP,pB=TypeError,dB=Math.floor,fB=function(t,e){var n=t.length;if(n<8)for(var i,r,o=1;o<n;){for(r=o,i=t[o];r&&e(t[r-1],i)>0;)t[r]=t[--r];r!==o++&&(t[r]=i)}else for(var a=dB(n/2),s=fB(YS(t,0,a),e),l=fB(YS(t,a),e),u=s.length,c=l.length,h=0,p=0;h<u||p<c;)t[h+p]=h<u&&p<c?e(s[h],l[p])<=0?s[h++]:l[p++]:h<u?s[h++]:l[p++];return t},_B=fB,gB=EC.match(/firefox\/(\d+)/i),mB=!!gB&&+gB[1],yB=/MSIE|Trident/.test(EC),AB=EC.match(/AppleWebKit\/(\d+)\./),vB=!!AB&&+AB[1],bB=function(t,e){if(!delete t[e])throw new pB("Cannot delete property "+jC(e)+" of "+jC(t))},xB=_B,CB=mB,IB=yB,EB=vB,wB=[],SB=eC(wB.sort),DB=eC(wB.push),TB=zx((function(){wB.sort(void 0)})),PB=zx((function(){wB.sort(null)})),BB=ST("sort"),OB=!zx((function(){if(PC)return PC<70;if(!(CB&&CB>3)){if(IB)return!0;if(EB)return EB<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)wB.push({k:e+i,v:n})}for(wB.sort((function(t,e){return e.v-t.v})),i=0;i<wB.length;i++)e=wB[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));iE({target:"Array",proto:!0,forced:TB||!PB||!BB||!OB},{sort:function(t){void 0!==t&&QC(t);var e=ZC(this);if(OB)return void 0===t?SB(e):SB(e,t);var n,i,r=[],o=NE(e);for(i=0;i<o;i++)i in e&&DB(r,e[i]);for(xB(r,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:$w(e)>$w(n)?1:-1}}(t)),n=NE(r),i=0;i<n;)e[i]=r[i++];for(;i<o;)bB(e,i++);return e}});var MB=CT("Array","sort"),LB=Array.prototype,RB=function(t){var e=t.sort;return t===LB||NC(LB,t)&&e===LB.sort?MB:e},NB=function(){var t=GI(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},FB=RegExp.prototype,kB=function(t){var e=t.flags;return void 0!==e||"flags"in FB||oI(t,"flags")||!NC(FB,t)?e:zC(NB,t)},UB=kB,VB=RegExp.prototype,jB=function(t){return t===VB||NC(VB,t)?UB(t):t.flags},GB=eh((function(t,e){uE(e,"__esModule",{value:!0}),e.default=void 0;var n=jx(_S),i=jx(yS),r=jx(vS),o=jx(sT),a=jx(xT),s=jx(wT),l=jx(LT),u=jx(FT),c=jx(TP),h=jx(RP),p=jx(JP),d=jx(cB),f=jx(hB),_=jx(RB),g=jx(jB);function m(t,e){var s;if(void 0===o.default||null==(0,r.default)(t)){if((0,i.default)(t)||(s=function(t,e){var n;if(!t)return;if("string"==typeof t)return y(t,e);var i=(0,f.default)(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return(0,a.default)(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var l=0,u=function(){};return{s:u,n:function(){return l>=t.length?{done:!0}:{done:!1,value:t[l++]}},e:function(t){throw t},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,h=!0,p=!1;return{s:function(){s=(0,n.default)(t)},n:function(){var t=s.next();return h=t.done,t},e:function(t){p=!0,c=t},f:function(){try{h||null==s.return||s.return()}finally{if(p)throw c}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}
/*!
     * XRegExp 4.4.1
     * <xregexp.com>
     * Steven Levithan (c) 2007-present MIT License
     */var A="xregexp",v={astral:!1,namespacing:!1},b={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},x={},C={},I={},E=[],w="default",S="class",D={default:/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|\(\?(?:[:=!]|<[=!])|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,class:/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|[\s\S]/},T=/\$(?:{([\w$]+)}|<([\w$]+)>|(\d\d?|[\s\S]))/g,P=void 0===b.exec.call(/()??/,"")[1],B=void 0!==(0,g.default)(/x/),O={}.toString;function M(t){var e=!0;try{if(new RegExp("",t),"y"===t){".."===".a".replace(new RegExp("a","gy"),".")&&(e=!1)}}catch(t){e=!1}return e}var L=M("u"),R=M("y"),N={g:!0,i:!0,m:!0,u:L,y:R};function F(t,e,n,i,r){var o;if(t[A]={captureNames:e},r)return t;if(t.__proto__)t.__proto__=J.prototype;else for(var a in J.prototype)t[a]=J.prototype[a];return t[A].source=n,t[A].flags=i?(0,_.default)(o=i.split("")).call(o).join(""):i,t}function k(t){return b.replace.call(t,/([\s\S])(?=[\s\S]*\1)/g,"")}function U(t,e){var n;if(!J.isRegExp(t))throw new TypeError("Type RegExp expected");var i=t[A]||{},r=function(t){return B?(0,g.default)(t):b.exec.call(/\/([a-z]*)$/i,RegExp.prototype.toString.call(t))[1]}(t),o="",a="",s=null,l=null;return(e=e||{}).removeG&&(a+="g"),e.removeY&&(a+="y"),a&&(r=b.replace.call(r,new RegExp("[".concat(a,"]+"),"g"),"")),e.addG&&(o+="g"),e.addY&&(o+="y"),o&&(r=k(r+o)),e.isInternalOnly||(void 0!==i.source&&(s=i.source),null!=(0,g.default)(i)&&(l=o?k((0,g.default)(i)+o):(0,g.default)(i))),t=F(new RegExp(e.source||t.source,r),function(t){return!(!t[A]||!t[A].captureNames)}(t)?(0,f.default)(n=i.captureNames).call(n,0):null,s,l,e.isInternalOnly)}function V(t){return(0,d.default)(t,16)}function j(t,e,n){return"("===t.input[t.index-1]||")"===t.input[t.index+t[0].length]||"|"===t.input[t.index-1]||"|"===t.input[t.index+t[0].length]||t.index<1||t.index+t[0].length>=t.input.length||b.test.call(/^\(\?[:=!]/,t.input.substr(t.index-3,3))||function(t,e,n){return b.test.call((0,p.default)(n).call(n,"x")?/^(?:\s|#[^#\n]*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,(0,f.default)(t).call(t,e))}(t.input,t.index+t[0].length,n)?"":"(?:)"}function G(t){return(0,d.default)(t,10).toString(16)}function Q(t,e){return O.call(t)==="[object ".concat(e,"]")}function z(t){for(;t.length<4;)t="0".concat(t);return t}function H(t){var e={};return Q(t,"String")?((0,h.default)(J).call(J,t,/[^\s,]+/,(function(t){e[t]=!0})),e):t}function X(t){if(!/^[\w$]$/.test(t))throw new Error("Flag must be a single character A-Za-z0-9_$");N[t]=!0}function Y(t,e,n,i,r){for(var o,a,s=E.length,l=t[n],u=null;s--;)if(!((a=E[s]).leadChar&&a.leadChar!==l||a.scope!==i&&"all"!==a.scope||a.flag&&!(0,p.default)(e).call(e,a.flag))&&(o=J.exec(t,a.regex,n,"sticky"))){u={matchLength:o[0].length,output:a.handler.call(r,o,i,e),reparse:a.reparse};break}return u}function q(t){v.astral=t}function K(t){v.namespacing=t}function W(t){if(null==t)throw new TypeError("Cannot convert null or undefined to object");return t}function J(t,e){if(J.isRegExp(t)){if(void 0!==e)throw new TypeError("Cannot supply flags when copying a RegExp");return U(t)}if(t=void 0===t?"":String(t),e=void 0===e?"":String(e),J.isInstalled("astral")&&!(0,p.default)(e).call(e,"A")&&(e+="A"),I[t]||(I[t]={}),!I[t][e]){for(var n,i={hasNamedCapture:!1,captureNames:[]},r=w,o="",a=0,s=function(t,e){if(k(e)!==e)throw new SyntaxError("Invalid duplicate regex flag ".concat(e));t=b.replace.call(t,/^\(\?([\w$]+)\)/,(function(t,n){if(b.test.call(/[gy]/,n))throw new SyntaxError("Cannot use flag g or y in mode modifier ".concat(t));return e=k(e+n),""}));var n,i=m(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!N[r])throw new SyntaxError("Unknown regex flag ".concat(r))}}catch(t){i.e(t)}finally{i.f()}return{pattern:t,flags:e}}(t,e),l=s.pattern,u=(0,g.default)(s);a<l.length;){do{(n=Y(l,u,a,r,i))&&n.reparse&&(l=(0,f.default)(l).call(l,0,a)+n.output+(0,f.default)(l).call(l,a+n.matchLength))}while(n&&n.reparse);if(n)o+=n.output,a+=n.matchLength||1;else{var h=J.exec(l,D[r],a,"sticky"),d=(0,c.default)(h,1)[0];o+=d,a+=d.length,"["===d&&r===w?r=S:"]"===d&&r===S&&(r=w)}}I[t][e]={pattern:b.replace.call(o,/(?:\(\?:\))+/g,"(?:)"),flags:b.replace.call(u,/[^gimuy]+/g,""),captures:i.hasNamedCapture?i.captureNames:null}}var _=I[t][e];return F(new RegExp(_.pattern,(0,g.default)(_)),_.captures,t,e)}J.prototype=/(?:)/,J.version="4.4.1",J._clipDuplicates=k,J._hasNativeFlag=M,J._dec=V,J._hex=G,J._pad4=z,J.addToken=function(t,e,n){var i=(n=n||{}).optionalFlags;if(n.flag&&X(n.flag),i){var r,o=m(i=b.split.call(i,""));try{for(o.s();!(r=o.n()).done;){X(r.value)}}catch(t){o.e(t)}finally{o.f()}}E.push({regex:U(t,{addG:!0,addY:R,isInternalOnly:!0}),handler:e,scope:n.scope||w,flag:n.flag,reparse:n.reparse,leadChar:n.leadChar}),J.cache.flush("patterns")},J.cache=function(t,e){return C[t]||(C[t]={}),C[t][e]||(C[t][e]=J(t,e))},J.cache.flush=function(t){"patterns"===t?I={}:C={}},J.escape=function(t){return b.replace.call(W(t),/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},J.exec=function(t,e,n,i){var r,o,a="g",s=!1;(r=R&&!!(i||e.sticky&&!1!==i))?a+="y":i&&(s=!0,a+="FakeY"),e[A]=e[A]||{};var l=e[A][a]||(e[A][a]=U(e,{addG:!0,addY:r,source:s?"".concat(e.source,"|()"):void 0,removeY:!1===i,isInternalOnly:!0}));return n=n||0,l.lastIndex=n,o=x.exec.call(l,t),s&&o&&""===o.pop()&&(o=null),e.global&&(e.lastIndex=o?l.lastIndex:0),o},J.forEach=function(t,e,n){for(var i,r=0,o=-1;i=J.exec(t,e,r);)n(i,++o,t,e),r=i.index+(i[0].length||1)},J.globalize=function(t){return U(t,{addG:!0})},J.install=function(t){t=H(t),!v.astral&&t.astral&&q(!0),!v.namespacing&&t.namespacing&&K(!0)},J.isInstalled=function(t){return!!v[t]},J.isRegExp=function(t){return"[object RegExp]"===O.call(t)},J.match=function(t,e,n){var i=e.global&&"one"!==n||"all"===n,r=(i?"g":"")+(e.sticky?"y":"")||"noGY";e[A]=e[A]||{};var o=e[A][r]||(e[A][r]=U(e,{addG:!!i,removeG:"one"===n,isInternalOnly:!0})),a=b.match.call(W(t),o);return e.global&&(e.lastIndex="one"===n&&a?a.index+a[0].length:0),i?a||[]:a&&a[0]},J.matchChain=function(t,e){return function t(n,i){var r=e[i].regex?e[i]:{regex:e[i]},o=[];function a(t){if(r.backref){var e="Backreference to undefined group: ".concat(r.backref),n=isNaN(r.backref);if(n&&J.isInstalled("namespacing")){if(!(r.backref in t.groups))throw new ReferenceError(e)}else if(!t.hasOwnProperty(r.backref))throw new ReferenceError(e);var i=n&&J.isInstalled("namespacing")?t.groups[r.backref]:t[r.backref];o.push(i||"")}else o.push(t[0])}var s,l=m(n);try{for(l.s();!(s=l.n()).done;){var u=s.value;(0,h.default)(J).call(J,u,r.regex,a)}}catch(t){l.e(t)}finally{l.f()}return i!==e.length-1&&o.length?t(o,i+1):o}([t],0)},J.replace=function(t,e,n,i){var r=J.isRegExp(e),o=e.global&&"one"!==i||"all"===i,a=(o?"g":"")+(e.sticky?"y":"")||"noGY",s=e;r?(e[A]=e[A]||{},s=e[A][a]||(e[A][a]=U(e,{addG:!!o,removeG:"one"===i,isInternalOnly:!0}))):o&&(s=new RegExp(J.escape(String(e)),"g"));var l=x.replace.call(W(t),s,n);return r&&e.global&&(e.lastIndex=0),l},J.replaceEach=function(t,e){var n,i=m(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;t=J.replace(t,r[0],r[1],r[2])}}catch(t){i.e(t)}finally{i.f()}return t},J.split=function(t,e,n){return x.split.call(W(t),e,n)},J.test=function(t,e,n,i){return!!J.exec(t,e,n,i)},J.uninstall=function(t){t=H(t),v.astral&&t.astral&&q(!1),v.namespacing&&t.namespacing&&K(!1)},J.union=function(t,e,n){var i,r,o=(n=n||{}).conjunction||"or",a=0;function s(t,e,n){var o=r[a-i];if(e){if(++a,o)return"(?<".concat(o,">")}else if(n)return"\\".concat(+n+i);return t}if(!Q(t,"Array")||!t.length)throw new TypeError("Must provide a nonempty array of patterns to merge");var l,u=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*\]/g,c=[],h=m(t);try{for(h.s();!(l=h.n()).done;){var p=l.value;J.isRegExp(p)?(i=a,r=p[A]&&p[A].captureNames||[],c.push(b.replace.call(J(p.source).source,u,s))):c.push(J.escape(p))}}catch(t){h.e(t)}finally{h.f()}var d="none"===o?"":"|";return J(c.join(d),e)},x.exec=function(t){var e=this.lastIndex,n=b.exec.apply(this,arguments);if(n){if(!P&&n.length>1&&(0,p.default)(n).call(n,"")){var i,r=U(this,{removeG:!0,isInternalOnly:!0});b.replace.call((0,f.default)(i=String(t)).call(i,n.index),r,(function(){for(var t=arguments.length,e=1;e<t-2;++e)void 0===(e<0||arguments.length<=e?void 0:arguments[e])&&(n[e]=void 0)}))}var o=n;if(J.isInstalled("namespacing")&&(n.groups=(0,u.default)(null),o=n.groups),this[A]&&this[A].captureNames)for(var a=1;a<n.length;++a){var s=this[A].captureNames[a-1];s&&(o[s]=n[a])}this.global&&!n[0].length&&this.lastIndex>n.index&&(this.lastIndex=n.index)}return this.global||(this.lastIndex=e),n},x.test=function(t){return!!x.exec.call(this,t)},x.match=function(t){if(J.isRegExp(t)){if(t.global){var e=b.match.apply(this,arguments);return t.lastIndex=0,e}}else t=new RegExp(t);return x.exec.call(t,W(this))},x.replace=function(t,e){var n,i,r,o=J.isRegExp(t);return o?(t[A]&&(i=t[A].captureNames),n=t.lastIndex):t+="",r=Q(e,"Function")?b.replace.call(String(this),t,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(i){var o;J.isInstalled("namespacing")?(o=(0,u.default)(null),n.push(o)):(n[0]=new String(n[0]),o=n[0]);for(var a=0;a<i.length;++a)i[a]&&(o[i[a]]=n[a+1])}return e.apply(void 0,n)})):b.replace.call(null==this?this:String(this),t,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b.replace.call(String(e),T,(function(t,e,r,o){if(e=e||r){var a=+e;if(a<=n.length-3)return n[a]||"";if((a=i?(0,l.default)(i).call(i,e):-1)<0)throw new SyntaxError("Backreference to undefined group ".concat(t));return n[a+1]||""}if("$"===o)return"$";if("&"===o||0==+o)return n[0];var s,u;if("`"===o)return(0,f.default)(s=n[n.length-1]).call(s,0,n[n.length-2]);if("'"===o)return(0,f.default)(u=n[n.length-1]).call(u,n[n.length-2]+n[0].length);if(o=+o,!isNaN(o)){if(o>n.length-3)throw new SyntaxError("Backreference to undefined group ".concat(t));return n[o]||""}throw new SyntaxError("Invalid token ".concat(t))}))})),o&&(t.global?t.lastIndex=0:t.lastIndex=n),r},x.split=function(t,e){if(!J.isRegExp(t))return b.split.apply(this,arguments);var n,i=String(this),r=[],o=t.lastIndex,a=0;return e=(void 0===e?-1:e)>>>0,(0,h.default)(J).call(J,i,t,(function(t){t.index+t[0].length>a&&(r.push((0,f.default)(i).call(i,a,t.index)),t.length>1&&t.index<i.length&&Array.prototype.push.apply(r,(0,f.default)(t).call(t,1)),n=t[0].length,a=t.index+n)})),a===i.length?b.test.call(t,"")&&!n||r.push(""):r.push((0,f.default)(i).call(i,a)),t.lastIndex=o,r.length>e?(0,f.default)(r).call(r,0,e):r},J.addToken(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4}|{[\dA-Fa-f]+})|x(?![\dA-Fa-f]{2}))/,(function(t,e){if("B"===t[1]&&e===w)return t[0];throw new SyntaxError("Invalid escape ".concat(t[0]))}),{scope:"all",leadChar:"\\"}),J.addToken(/\\u{([\dA-Fa-f]+)}/,(function(t,e,n){var i=V(t[1]);if(i>1114111)throw new SyntaxError("Invalid Unicode code point ".concat(t[0]));if(i<=65535)return"\\u".concat(z(G(i)));if(L&&(0,p.default)(n).call(n,"u"))return t[0];throw new SyntaxError("Cannot use Unicode code point above \\u{FFFF} without flag u")}),{scope:"all",leadChar:"\\"}),J.addToken(/\[(\^?)\]/,(function(t){return t[1]?"[\\s\\S]":"\\b\\B"}),{leadChar:"["}),J.addToken(/\(\?#[^)]*\)/,j,{leadChar:"("}),J.addToken(/\s+|#[^\n]*\n?/,j,{flag:"x"}),J.addToken(/\./,(function(){return"[\\s\\S]"}),{flag:"s",leadChar:"."}),J.addToken(/\\k<([\w$]+)>/,(function(t){var e,n,i=isNaN(t[1])?(0,l.default)(e=this.captureNames).call(e,t[1])+1:+t[1],r=t.index+t[0].length;if(!i||i>this.captureNames.length)throw new SyntaxError("Backreference to undefined group ".concat(t[0]));return(0,s.default)(n="\\".concat(i)).call(n,r===t.input.length||isNaN(t.input[r])?"":"(?:)")}),{leadChar:"\\"}),J.addToken(/\\(\d+)/,(function(t,e){if(!(e===w&&/^[1-9]/.test(t[1])&&+t[1]<=this.captureNames.length)&&"0"!==t[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group ".concat(t[0]));return t[0]}),{scope:"all",leadChar:"\\"}),J.addToken(/\(\?P?<([\w$]+)>/,(function(t){var e;if(!isNaN(t[1]))throw new SyntaxError("Cannot use integer as capture name ".concat(t[0]));if(!J.isInstalled("namespacing")&&("length"===t[1]||"__proto__"===t[1]))throw new SyntaxError("Cannot use reserved word as capture name ".concat(t[0]));if((0,p.default)(e=this.captureNames).call(e,t[1]))throw new SyntaxError("Cannot use same name for multiple groups ".concat(t[0]));return this.captureNames.push(t[1]),this.hasNamedCapture=!0,"("}),{leadChar:"("}),J.addToken(/\((?!\?)/,(function(t,e,n){return(0,p.default)(n).call(n,"n")?"(?:":(this.captureNames.push(null),"(")}),{optionalFlags:"n",leadChar:"("});var Z=J;e.default=Z,t.exports=e.default})),QB=lD.map,zB=VS("map");iE({target:"Array",proto:!0,forced:!zB},{map:function(t){return QB(this,t,arguments.length>1?arguments[1]:void 0)}});var HB=CT("Array","map"),XB=Array.prototype,YB=function(t){var e=t.map;return t===XB||NC(XB,t)&&e===XB.map?HB:e},qB=TypeError,KB="Reduce of empty array with no initial value",WB=function(t){return function(e,n,i,r){var o=ZC(e),a=yC(o),s=NE(o);if(QC(n),0===s&&i<2)throw new qB(KB);var l=t?s-1:0,u=t?-1:1;if(i<2)for(;;){if(l in a){r=a[l],l+=u;break}if(l+=u,t?l<0:s<=l)throw new qB(KB)}for(;t?l>=0:s>l;l+=u)l in a&&(r=n(r,a[l],l,o));return r}},JB={left:WB(!1),right:WB(!0)},ZB="process"===rC(xC.process),$B=JB.left,tO=!ZB&&PC>79&&PC<83||!ST("reduce");iE({target:"Array",proto:!0,forced:tO},{reduce:function(t){var e=arguments.length;return $B(this,t,e,e>1?arguments[1]:void 0)}});var eO=CT("Array","reduce"),nO=Array.prototype,iO=function(t){var e=t.reduce;return t===nO||NC(nO,t)&&e===nO.reduce?eO:e},rO=eh((function(t,e){uE(e,"__esModule",{value:!0}),e.default=void 0;var n=jx(wT),i=jx(JP),r=jx(YB),o=jx(iO);e.default=function(t){var e="xregexp",a=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*\]/g,s=t.union([/\({{([\w$]+)}}\)|{{([\w$]+)}}/,a],"g",{conjunction:"or"});function l(t){var e=/^(?:\(\?:\))*\^/,n=/\$(?:\(\?:\))*$/;return e.test(t)&&n.test(t)&&n.test(t.replace(/\\[\s\S]/g,""))?t.replace(e,"").replace(n,""):t}function u(n,i){var r=i?"x":"";return t.isRegExp(n)?n[e]&&n[e].captureNames?n:t(n.source,r):t(n,r)}function c(e){return e instanceof RegExp?e:t.escape(e)}function h(t,e,n){return t["subpattern".concat(n)]=e,t}function p(t,e,n){return t+(e<n.length-1?"{{subpattern".concat(e,"}}"):"")}t.tag=function(e){return function(n){for(var i,a,s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];var d=(0,o.default)(i=(0,r.default)(l).call(l,c)).call(i,h,{}),f=(0,r.default)(a=n.raw).call(a,p).join("");return t.build(f,d,e)}},t.build=function(r,o,c){c=c||"";var h=(0,i.default)(c).call(c,"x"),p=/^\(\?([\w$]+)\)/.exec(r);p&&(c=t._clipDuplicates(c+p[1]));var d={};for(var f in o)if(o.hasOwnProperty(f)){var _=u(o[f],h);d[f]={pattern:l(_.source),names:_[e].captureNames||[]}}var g,m=u(r,h),y=0,A=0,v=[0],b=m[e].captureNames||[],x=m.source.replace(s,(function(t,e,i,r,o){var s,l,u,c=e||i;if(c){var h;if(!d.hasOwnProperty(c))throw new ReferenceError("Undefined property ".concat(t));e?(s=b[A],v[++A]=++y,l="(?<".concat(s||c,">")):l="(?:",g=y;var p=d[c].pattern.replace(a,(function(t,e,n){if(e){if(s=d[c].names[y-g],++y,s)return"(?<".concat(s,">")}else if(n)return u=+n-1,d[c].names[u]?"\\k<".concat(d[c].names[u],">"):"\\".concat(+n+g);return t}));return(0,n.default)(h="".concat(l)).call(h,p,")")}if(r){if(s=b[A],v[++A]=++y,s)return"(?<".concat(s,">")}else if(o)return b[u=+o-1]?"\\k<".concat(b[u],">"):"\\".concat(v[+o]);return t}));return t(x,c)}},t.exports=e.default})),oO=eh((function(t,e){uE(e,"__esModule",{value:!0}),e.default=void 0;var n=jx(hB),i=jx(wT),r=jx(JP);e.default=function(t){function e(t,e,n,i){return{name:t,value:e,start:n,end:i}}t.matchRecursive=function(o,a,s,l,u){l=l||"",u=u||{};var c,h,p,d,f,_=(0,r.default)(l).call(l,"g"),g=(0,r.default)(l).call(l,"y"),m=l.replace(/y/g,""),y=u.escapeChar,A=u.valueNames,v=[],b=0,x=0,C=0,I=0;if(a=t(a,m),s=t(s,m),y){var E,w;if(y.length>1)throw new Error("Cannot use more than one escape character");y=t.escape(y),f=new RegExp((0,i.default)(E=(0,i.default)(w="(?:".concat(y,"[\\S\\s]|(?:(?!")).call(w,t.union([a,s],"",{conjunction:"or"}).source,")[^")).call(E,y,"])+)+"),l.replace(/[^imu]+/g,""))}for(;;){if(y&&(C+=(t.exec(o,f,C,"sticky")||[""])[0].length),p=t.exec(o,a,C),d=t.exec(o,s,C),p&&d&&(p.index<=d.index?d=null:p=null),p||d)C=(x=(p||d).index)+(p||d)[0].length;else if(!b)break;if(g&&!b&&x>I)break;if(p)b||(c=x,h=C),++b;else{if(!d||!b)throw new Error("Unbalanced delimiter found in string");if(! --b&&(A?(A[0]&&c>I&&v.push(e(A[0],(0,n.default)(o).call(o,I,c),I,c)),A[1]&&v.push(e(A[1],(0,n.default)(o).call(o,c,h),c,h)),A[2]&&v.push(e(A[2],(0,n.default)(o).call(o,h,x),h,x)),A[3]&&v.push(e(A[3],(0,n.default)(o).call(o,x,C),x,C))):v.push((0,n.default)(o).call(o,h,x)),I=C,!_))break}x===C&&++C}return _&&!g&&A&&A[0]&&o.length>I&&v.push(e(A[0],(0,n.default)(o).call(o,I),I,o.length)),v}},t.exports=e.default})),aO=eh((function(t,e){uE(e,"__esModule",{value:!0}),e.default=void 0;var n=jx(_S),i=jx(yS),r=jx(vS),o=jx(sT),a=jx(xT),s=jx(hB),l=jx(JP),u=jx(wT),c=jx(RP);function h(t,e){var l;if(void 0===o.default||null==(0,r.default)(t)){if((0,i.default)(t)||(l=function(t,e){var n;if(!t)return;if("string"==typeof t)return p(t,e);var i=(0,s.default)(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return(0,a.default)(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){l&&(t=l);var u=0,c=function(){};return{s:c,n:function(){return u>=t.length?{done:!0}:{done:!1,value:t[u++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h,d=!0,f=!1;return{s:function(){l=(0,n.default)(t)},n:function(){var t=l.next();return d=t.done,t},e:function(t){f=!0,h=t},f:function(){try{d||null==l.return||l.return()}finally{if(f)throw h}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}
/*!
     * XRegExp Unicode Base 4.4.1
     * <xregexp.com>
     * Steven Levithan (c) 2008-present MIT License
     */e.default=function(t){var e={},n=t._dec,i=t._hex,r=t._pad4;function o(t){return t.replace(/[- _]+/g,"").toLowerCase()}function a(t){var e=/^\\[xu](.+)/.exec(t);return e?n(e[1]):t.charCodeAt("\\"===t[0]?1:0)}function s(n){var o,s,l;return e[n]["b!"]||(e[n]["b!"]=(o=e[n].bmp,s="",l=-1,(0,c.default)(t).call(t,o,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,(function(t){var e=a(t[1]);e>l+1&&(s+="\\u".concat(r(i(l+1))),e>l+2&&(s+="-\\u".concat(r(i(e-1))))),l=a(t[2]||t[1])})),l<65535&&(s+="\\u".concat(r(i(l+1))),l<65534&&(s+="-\\uFFFF")),s))}function p(t,n){var i=n?"a!":"a=";return e[t][i]||(e[t][i]=function(t,n){var i,r,o=e[t],a="";return o.bmp&&!o.isBmpLast&&(a=(0,u.default)(i="[".concat(o.bmp,"]")).call(i,o.astral?"|":"")),o.astral&&(a+=o.astral),o.isBmpLast&&o.bmp&&(a+=(0,u.default)(r="".concat(o.astral?"|":"","[")).call(r,o.bmp,"]")),n?"(?:(?!".concat(a,")(?:[\ud800-\udbff][\udc00-\udfff]|[\0-￿]))"):"(?:".concat(a,")")}(t,n))}t.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,(function(t,n,i){var r="P"===t[1]||!!t[2],a=(0,l.default)(i).call(i,"A"),c=o(t[4]||t[3]),h=e[c];if("P"===t[1]&&t[2])throw new SyntaxError("Invalid double negation "+t[0]);if(!e.hasOwnProperty(c))throw new SyntaxError("Unknown Unicode token "+t[0]);if(h.inverseOf){var d;if(c=o(h.inverseOf),!e.hasOwnProperty(c))throw new ReferenceError((0,u.default)(d="".concat("Unicode token missing data "+t[0]," -> ")).call(d,h.inverseOf));h=e[c],r=!r}if(!h.bmp&&!a)throw new SyntaxError("Astral mode required for Unicode token "+t[0]);if(a){if("class"===n)throw new SyntaxError("Astral mode does not support Unicode tokens within character classes");return p(c,r)}return"class"===n?r?s(c):h.bmp:"".concat((r?"[^":"[")+h.bmp,"]")}),{scope:"all",optionalFlags:"A",leadChar:"\\"}),t.addUnicodeData=function(n){var i,r=h(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(!a.name)throw new Error("Unicode token requires name");if(!(a.inverseOf||a.bmp||a.astral))throw new Error("Unicode token has no character data "+a.name);e[o(a.name)]=a,a.alias&&(e[o(a.alias)]=a)}}catch(t){r.e(t)}finally{r.f()}t.cache.flush("patterns")},t._getUnicodeProperty=function(t){var n=o(t);return e[n]}},t.exports=e.default})),sO=[{name:"InAdlam",astral:"\ud83a[\udd00-\udd5f]"},{name:"InAegean_Numbers",astral:"\ud800[\udd00-\udd3f]"},{name:"InAhom",astral:"\ud805[\udf00-\udf3f]"},{name:"InAlchemical_Symbols",astral:"\ud83d[\udf00-\udf7f]"},{name:"InAlphabetic_Presentation_Forms",bmp:"ﬀ-ﭏ"},{name:"InAnatolian_Hieroglyphs",astral:"\ud811[\udc00-\ude7f]"},{name:"InAncient_Greek_Musical_Notation",astral:"\ud834[\ude00-\ude4f]"},{name:"InAncient_Greek_Numbers",astral:"\ud800[\udd40-\udd8f]"},{name:"InAncient_Symbols",astral:"\ud800[\udd90-\uddcf]"},{name:"InArabic",bmp:"؀-ۿ"},{name:"InArabic_Extended_A",bmp:"ࢠ-ࣿ"},{name:"InArabic_Mathematical_Alphabetic_Symbols",astral:"\ud83b[\ude00-\udeff]"},{name:"InArabic_Presentation_Forms_A",bmp:"ﭐ-﷿"},{name:"InArabic_Presentation_Forms_B",bmp:"ﹰ-\ufeff"},{name:"InArabic_Supplement",bmp:"ݐ-ݿ"},{name:"InArmenian",bmp:"԰-֏"},{name:"InArrows",bmp:"←-⇿"},{name:"InAvestan",astral:"\ud802[\udf00-\udf3f]"},{name:"InBalinese",bmp:"ᬀ-᭿"},{name:"InBamum",bmp:"ꚠ-꛿"},{name:"InBamum_Supplement",astral:"\ud81a[\udc00-\ude3f]"},{name:"InBasic_Latin",bmp:"\0-"},{name:"InBassa_Vah",astral:"\ud81a[\uded0-\udeff]"},{name:"InBatak",bmp:"ᯀ-᯿"},{name:"InBengali",bmp:"ঀ-৿"},{name:"InBhaiksuki",astral:"\ud807[\udc00-\udc6f]"},{name:"InBlock_Elements",bmp:"▀-▟"},{name:"InBopomofo",bmp:"㄀-ㄯ"},{name:"InBopomofo_Extended",bmp:"ㆠ-ㆿ"},{name:"InBox_Drawing",bmp:"─-╿"},{name:"InBrahmi",astral:"\ud804[\udc00-\udc7f]"},{name:"InBraille_Patterns",bmp:"⠀-⣿"},{name:"InBuginese",bmp:"ᨀ-᨟"},{name:"InBuhid",bmp:"ᝀ-᝟"},{name:"InByzantine_Musical_Symbols",astral:"\ud834[\udc00-\udcff]"},{name:"InCJK_Compatibility",bmp:"㌀-㏿"},{name:"InCJK_Compatibility_Forms",bmp:"︰-﹏"},{name:"InCJK_Compatibility_Ideographs",bmp:"豈-﫿"},{name:"InCJK_Compatibility_Ideographs_Supplement",astral:"\ud87e[\udc00-\ude1f]"},{name:"InCJK_Radicals_Supplement",bmp:"⺀-⻿"},{name:"InCJK_Strokes",bmp:"㇀-㇯"},{name:"InCJK_Symbols_And_Punctuation",bmp:"　-〿"},{name:"InCJK_Unified_Ideographs",bmp:"一-鿿"},{name:"InCJK_Unified_Ideographs_Extension_A",bmp:"㐀-䶿"},{name:"InCJK_Unified_Ideographs_Extension_B",astral:"[\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\udedf]"},{name:"InCJK_Unified_Ideographs_Extension_C",astral:"\ud869[\udf00-\udfff]|[\ud86a-\ud86c][\udc00-\udfff]|\ud86d[\udc00-\udf3f]"},{name:"InCJK_Unified_Ideographs_Extension_D",astral:"\ud86d[\udf40-\udfff]|\ud86e[\udc00-\udc1f]"},{name:"InCJK_Unified_Ideographs_Extension_E",astral:"\ud86e[\udc20-\udfff]|[\ud86f-\ud872][\udc00-\udfff]|\ud873[\udc00-\udeaf]"},{name:"InCJK_Unified_Ideographs_Extension_F",astral:"\ud873[\udeb0-\udfff]|[\ud874-\ud879][\udc00-\udfff]|\ud87a[\udc00-\udfef]"},{name:"InCarian",astral:"\ud800[\udea0-\udedf]"},{name:"InCaucasian_Albanian",astral:"\ud801[\udd30-\udd6f]"},{name:"InChakma",astral:"\ud804[\udd00-\udd4f]"},{name:"InCham",bmp:"ꨀ-꩟"},{name:"InCherokee",bmp:"Ꭰ-᏿"},{name:"InCherokee_Supplement",bmp:"ꭰ-ꮿ"},{name:"InChess_Symbols",astral:"\ud83e[\ude00-\ude6f]"},{name:"InCombining_Diacritical_Marks",bmp:"̀-ͯ"},{name:"InCombining_Diacritical_Marks_Extended",bmp:"᪰-᫿"},{name:"InCombining_Diacritical_Marks_For_Symbols",bmp:"⃐-⃿"},{name:"InCombining_Diacritical_Marks_Supplement",bmp:"᷀-᷿"},{name:"InCombining_Half_Marks",bmp:"︠-︯"},{name:"InCommon_Indic_Number_Forms",bmp:"꠰-꠿"},{name:"InControl_Pictures",bmp:"␀-␿"},{name:"InCoptic",bmp:"Ⲁ-⳿"},{name:"InCoptic_Epact_Numbers",astral:"\ud800[\udee0-\udeff]"},{name:"InCounting_Rod_Numerals",astral:"\ud834[\udf60-\udf7f]"},{name:"InCuneiform",astral:"\ud808[\udc00-\udfff]"},{name:"InCuneiform_Numbers_And_Punctuation",astral:"\ud809[\udc00-\udc7f]"},{name:"InCurrency_Symbols",bmp:"₠-⃏"},{name:"InCypriot_Syllabary",astral:"\ud802[\udc00-\udc3f]"},{name:"InCyrillic",bmp:"Ѐ-ӿ"},{name:"InCyrillic_Extended_A",bmp:"ⷠ-ⷿ"},{name:"InCyrillic_Extended_B",bmp:"Ꙁ-ꚟ"},{name:"InCyrillic_Extended_C",bmp:"ᲀ-᲏"},{name:"InCyrillic_Supplement",bmp:"Ԁ-ԯ"},{name:"InDeseret",astral:"\ud801[\udc00-\udc4f]"},{name:"InDevanagari",bmp:"ऀ-ॿ"},{name:"InDevanagari_Extended",bmp:"꣠-ꣿ"},{name:"InDingbats",bmp:"✀-➿"},{name:"InDogra",astral:"\ud806[\udc00-\udc4f]"},{name:"InDomino_Tiles",astral:"\ud83c[\udc30-\udc9f]"},{name:"InDuployan",astral:"\ud82f[\udc00-\udc9f]"},{name:"InEarly_Dynastic_Cuneiform",astral:"\ud809[\udc80-\udd4f]"},{name:"InEgyptian_Hieroglyphs",astral:"\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2f]"},{name:"InElbasan",astral:"\ud801[\udd00-\udd2f]"},{name:"InEmoticons",astral:"\ud83d[\ude00-\ude4f]"},{name:"InEnclosed_Alphanumeric_Supplement",astral:"\ud83c[\udd00-\uddff]"},{name:"InEnclosed_Alphanumerics",bmp:"①-⓿"},{name:"InEnclosed_CJK_Letters_And_Months",bmp:"㈀-㋿"},{name:"InEnclosed_Ideographic_Supplement",astral:"\ud83c[\ude00-\udeff]"},{name:"InEthiopic",bmp:"ሀ-፿"},{name:"InEthiopic_Extended",bmp:"ⶀ-⷟"},{name:"InEthiopic_Extended_A",bmp:"꬀-꬯"},{name:"InEthiopic_Supplement",bmp:"ᎀ-᎟"},{name:"InGeneral_Punctuation",bmp:" -⁯"},{name:"InGeometric_Shapes",bmp:"■-◿"},{name:"InGeometric_Shapes_Extended",astral:"\ud83d[\udf80-\udfff]"},{name:"InGeorgian",bmp:"Ⴀ-ჿ"},{name:"InGeorgian_Extended",bmp:"Ა-Ჿ"},{name:"InGeorgian_Supplement",bmp:"ⴀ-⴯"},{name:"InGlagolitic",bmp:"Ⰰ-ⱟ"},{name:"InGlagolitic_Supplement",astral:"\ud838[\udc00-\udc2f]"},{name:"InGothic",astral:"\ud800[\udf30-\udf4f]"},{name:"InGrantha",astral:"\ud804[\udf00-\udf7f]"},{name:"InGreek_And_Coptic",bmp:"Ͱ-Ͽ"},{name:"InGreek_Extended",bmp:"ἀ-῿"},{name:"InGujarati",bmp:"઀-૿"},{name:"InGunjala_Gondi",astral:"\ud807[\udd60-\uddaf]"},{name:"InGurmukhi",bmp:"਀-੿"},{name:"InHalfwidth_And_Fullwidth_Forms",bmp:"＀-￯"},{name:"InHangul_Compatibility_Jamo",bmp:"㄰-㆏"},{name:"InHangul_Jamo",bmp:"ᄀ-ᇿ"},{name:"InHangul_Jamo_Extended_A",bmp:"ꥠ-꥿"},{name:"InHangul_Jamo_Extended_B",bmp:"ힰ-퟿"},{name:"InHangul_Syllables",bmp:"가-힯"},{name:"InHanifi_Rohingya",astral:"\ud803[\udd00-\udd3f]"},{name:"InHanunoo",bmp:"ᜠ-᜿"},{name:"InHatran",astral:"\ud802[\udce0-\udcff]"},{name:"InHebrew",bmp:"֐-׿"},{name:"InHigh_Private_Use_Surrogates",bmp:"\udb80-\udbff"},{name:"InHigh_Surrogates",bmp:"\ud800-\udb7f"},{name:"InHiragana",bmp:"぀-ゟ"},{name:"InIPA_Extensions",bmp:"ɐ-ʯ"},{name:"InIdeographic_Description_Characters",bmp:"⿰-⿿"},{name:"InIdeographic_Symbols_And_Punctuation",astral:"\ud81b[\udfe0-\udfff]"},{name:"InImperial_Aramaic",astral:"\ud802[\udc40-\udc5f]"},{name:"InIndic_Siyaq_Numbers",astral:"\ud83b[\udc70-\udcbf]"},{name:"InInscriptional_Pahlavi",astral:"\ud802[\udf60-\udf7f]"},{name:"InInscriptional_Parthian",astral:"\ud802[\udf40-\udf5f]"},{name:"InJavanese",bmp:"ꦀ-꧟"},{name:"InKaithi",astral:"\ud804[\udc80-\udccf]"},{name:"InKana_Extended_A",astral:"\ud82c[\udd00-\udd2f]"},{name:"InKana_Supplement",astral:"\ud82c[\udc00-\udcff]"},{name:"InKanbun",bmp:"㆐-㆟"},{name:"InKangxi_Radicals",bmp:"⼀-⿟"},{name:"InKannada",bmp:"ಀ-೿"},{name:"InKatakana",bmp:"゠-ヿ"},{name:"InKatakana_Phonetic_Extensions",bmp:"ㇰ-ㇿ"},{name:"InKayah_Li",bmp:"꤀-꤯"},{name:"InKharoshthi",astral:"\ud802[\ude00-\ude5f]"},{name:"InKhmer",bmp:"ក-៿"},{name:"InKhmer_Symbols",bmp:"᧠-᧿"},{name:"InKhojki",astral:"\ud804[\ude00-\ude4f]"},{name:"InKhudawadi",astral:"\ud804[\udeb0-\udeff]"},{name:"InLao",bmp:"຀-໿"},{name:"InLatin_1_Supplement",bmp:"-ÿ"},{name:"InLatin_Extended_A",bmp:"Ā-ſ"},{name:"InLatin_Extended_Additional",bmp:"Ḁ-ỿ"},{name:"InLatin_Extended_B",bmp:"ƀ-ɏ"},{name:"InLatin_Extended_C",bmp:"Ⱡ-Ɀ"},{name:"InLatin_Extended_D",bmp:"꜠-ꟿ"},{name:"InLatin_Extended_E",bmp:"ꬰ-꭯"},{name:"InLepcha",bmp:"ᰀ-ᱏ"},{name:"InLetterlike_Symbols",bmp:"℀-⅏"},{name:"InLimbu",bmp:"ᤀ-᥏"},{name:"InLinear_A",astral:"\ud801[\ude00-\udf7f]"},{name:"InLinear_B_Ideograms",astral:"\ud800[\udc80-\udcff]"},{name:"InLinear_B_Syllabary",astral:"\ud800[\udc00-\udc7f]"},{name:"InLisu",bmp:"ꓐ-꓿"},{name:"InLow_Surrogates",bmp:"\udc00-\udfff"},{name:"InLycian",astral:"\ud800[\ude80-\ude9f]"},{name:"InLydian",astral:"\ud802[\udd20-\udd3f]"},{name:"InMahajani",astral:"\ud804[\udd50-\udd7f]"},{name:"InMahjong_Tiles",astral:"\ud83c[\udc00-\udc2f]"},{name:"InMakasar",astral:"\ud807[\udee0-\udeff]"},{name:"InMalayalam",bmp:"ഀ-ൿ"},{name:"InMandaic",bmp:"ࡀ-࡟"},{name:"InManichaean",astral:"\ud802[\udec0-\udeff]"},{name:"InMarchen",astral:"\ud807[\udc70-\udcbf]"},{name:"InMasaram_Gondi",astral:"\ud807[\udd00-\udd5f]"},{name:"InMathematical_Alphanumeric_Symbols",astral:"\ud835[\udc00-\udfff]"},{name:"InMathematical_Operators",bmp:"∀-⋿"},{name:"InMayan_Numerals",astral:"\ud834[\udee0-\udeff]"},{name:"InMedefaidrin",astral:"\ud81b[\ude40-\ude9f]"},{name:"InMeetei_Mayek",bmp:"ꯀ-꯿"},{name:"InMeetei_Mayek_Extensions",bmp:"ꫠ-꫿"},{name:"InMende_Kikakui",astral:"\ud83a[\udc00-\udcdf]"},{name:"InMeroitic_Cursive",astral:"\ud802[\udda0-\uddff]"},{name:"InMeroitic_Hieroglyphs",astral:"\ud802[\udd80-\udd9f]"},{name:"InMiao",astral:"\ud81b[\udf00-\udf9f]"},{name:"InMiscellaneous_Mathematical_Symbols_A",bmp:"⟀-⟯"},{name:"InMiscellaneous_Mathematical_Symbols_B",bmp:"⦀-⧿"},{name:"InMiscellaneous_Symbols",bmp:"☀-⛿"},{name:"InMiscellaneous_Symbols_And_Arrows",bmp:"⬀-⯿"},{name:"InMiscellaneous_Symbols_And_Pictographs",astral:"\ud83c[\udf00-\udfff]|\ud83d[\udc00-\uddff]"},{name:"InMiscellaneous_Technical",bmp:"⌀-⏿"},{name:"InModi",astral:"\ud805[\ude00-\ude5f]"},{name:"InModifier_Tone_Letters",bmp:"꜀-ꜟ"},{name:"InMongolian",bmp:"᠀-᢯"},{name:"InMongolian_Supplement",astral:"\ud805[\ude60-\ude7f]"},{name:"InMro",astral:"\ud81a[\ude40-\ude6f]"},{name:"InMultani",astral:"\ud804[\ude80-\udeaf]"},{name:"InMusical_Symbols",astral:"\ud834[\udd00-\uddff]"},{name:"InMyanmar",bmp:"က-႟"},{name:"InMyanmar_Extended_A",bmp:"ꩠ-ꩿ"},{name:"InMyanmar_Extended_B",bmp:"ꧠ-꧿"},{name:"InNKo",bmp:"߀-߿"},{name:"InNabataean",astral:"\ud802[\udc80-\udcaf]"},{name:"InNew_Tai_Lue",bmp:"ᦀ-᧟"},{name:"InNewa",astral:"\ud805[\udc00-\udc7f]"},{name:"InNumber_Forms",bmp:"⅐-↏"},{name:"InNushu",astral:"\ud82c[\udd70-\udeff]"},{name:"InOgham",bmp:" -᚟"},{name:"InOl_Chiki",bmp:"᱐-᱿"},{name:"InOld_Hungarian",astral:"\ud803[\udc80-\udcff]"},{name:"InOld_Italic",astral:"\ud800[\udf00-\udf2f]"},{name:"InOld_North_Arabian",astral:"\ud802[\ude80-\ude9f]"},{name:"InOld_Permic",astral:"\ud800[\udf50-\udf7f]"},{name:"InOld_Persian",astral:"\ud800[\udfa0-\udfdf]"},{name:"InOld_Sogdian",astral:"\ud803[\udf00-\udf2f]"},{name:"InOld_South_Arabian",astral:"\ud802[\ude60-\ude7f]"},{name:"InOld_Turkic",astral:"\ud803[\udc00-\udc4f]"},{name:"InOptical_Character_Recognition",bmp:"⑀-⑟"},{name:"InOriya",bmp:"଀-୿"},{name:"InOrnamental_Dingbats",astral:"\ud83d[\ude50-\ude7f]"},{name:"InOsage",astral:"\ud801[\udcb0-\udcff]"},{name:"InOsmanya",astral:"\ud801[\udc80-\udcaf]"},{name:"InPahawh_Hmong",astral:"\ud81a[\udf00-\udf8f]"},{name:"InPalmyrene",astral:"\ud802[\udc60-\udc7f]"},{name:"InPau_Cin_Hau",astral:"\ud806[\udec0-\udeff]"},{name:"InPhags_Pa",bmp:"ꡀ-꡿"},{name:"InPhaistos_Disc",astral:"\ud800[\uddd0-\uddff]"},{name:"InPhoenician",astral:"\ud802[\udd00-\udd1f]"},{name:"InPhonetic_Extensions",bmp:"ᴀ-ᵿ"},{name:"InPhonetic_Extensions_Supplement",bmp:"ᶀ-ᶿ"},{name:"InPlaying_Cards",astral:"\ud83c[\udca0-\udcff]"},{name:"InPrivate_Use_Area",bmp:"-"},{name:"InPsalter_Pahlavi",astral:"\ud802[\udf80-\udfaf]"},{name:"InRejang",bmp:"ꤰ-꥟"},{name:"InRumi_Numeral_Symbols",astral:"\ud803[\ude60-\ude7f]"},{name:"InRunic",bmp:"ᚠ-᛿"},{name:"InSamaritan",bmp:"ࠀ-࠿"},{name:"InSaurashtra",bmp:"ꢀ-꣟"},{name:"InSharada",astral:"\ud804[\udd80-\udddf]"},{name:"InShavian",astral:"\ud801[\udc50-\udc7f]"},{name:"InShorthand_Format_Controls",astral:"\ud82f[\udca0-\udcaf]"},{name:"InSiddham",astral:"\ud805[\udd80-\uddff]"},{name:"InSinhala",bmp:"඀-෿"},{name:"InSinhala_Archaic_Numbers",astral:"\ud804[\udde0-\uddff]"},{name:"InSmall_Form_Variants",bmp:"﹐-﹯"},{name:"InSogdian",astral:"\ud803[\udf30-\udf6f]"},{name:"InSora_Sompeng",astral:"\ud804[\udcd0-\udcff]"},{name:"InSoyombo",astral:"\ud806[\ude50-\udeaf]"},{name:"InSpacing_Modifier_Letters",bmp:"ʰ-˿"},{name:"InSpecials",bmp:"￰-￿"},{name:"InSundanese",bmp:"ᮀ-ᮿ"},{name:"InSundanese_Supplement",bmp:"᳀-᳏"},{name:"InSuperscripts_And_Subscripts",bmp:"⁰-₟"},{name:"InSupplemental_Arrows_A",bmp:"⟰-⟿"},{name:"InSupplemental_Arrows_B",bmp:"⤀-⥿"},{name:"InSupplemental_Arrows_C",astral:"\ud83e[\udc00-\udcff]"},{name:"InSupplemental_Mathematical_Operators",bmp:"⨀-⫿"},{name:"InSupplemental_Punctuation",bmp:"⸀-⹿"},{name:"InSupplemental_Symbols_And_Pictographs",astral:"\ud83e[\udd00-\uddff]"},{name:"InSupplementary_Private_Use_Area_A",astral:"[\udb80-\udbbf][\udc00-\udfff]"},{name:"InSupplementary_Private_Use_Area_B",astral:"[\udbc0-\udbff][\udc00-\udfff]"},{name:"InSutton_SignWriting",astral:"\ud836[\udc00-\udeaf]"},{name:"InSyloti_Nagri",bmp:"ꠀ-꠯"},{name:"InSyriac",bmp:"܀-ݏ"},{name:"InSyriac_Supplement",bmp:"ࡠ-࡯"},{name:"InTagalog",bmp:"ᜀ-ᜟ"},{name:"InTagbanwa",bmp:"ᝠ-᝿"},{name:"InTags",astral:"\udb40[\udc00-\udc7f]"},{name:"InTai_Le",bmp:"ᥐ-᥿"},{name:"InTai_Tham",bmp:"ᨠ-᪯"},{name:"InTai_Viet",bmp:"ꪀ-꫟"},{name:"InTai_Xuan_Jing_Symbols",astral:"\ud834[\udf00-\udf5f]"},{name:"InTakri",astral:"\ud805[\ude80-\udecf]"},{name:"InTamil",bmp:"஀-௿"},{name:"InTangut",astral:"[\ud81c-\ud821][\udc00-\udfff]"},{name:"InTangut_Components",astral:"\ud822[\udc00-\udeff]"},{name:"InTelugu",bmp:"ఀ-౿"},{name:"InThaana",bmp:"ހ-޿"},{name:"InThai",bmp:"฀-๿"},{name:"InTibetan",bmp:"ༀ-࿿"},{name:"InTifinagh",bmp:"ⴰ-⵿"},{name:"InTirhuta",astral:"\ud805[\udc80-\udcdf]"},{name:"InTransport_And_Map_Symbols",astral:"\ud83d[\ude80-\udeff]"},{name:"InUgaritic",astral:"\ud800[\udf80-\udf9f]"},{name:"InUnified_Canadian_Aboriginal_Syllabics",bmp:"᐀-ᙿ"},{name:"InUnified_Canadian_Aboriginal_Syllabics_Extended",bmp:"ᢰ-᣿"},{name:"InVai",bmp:"ꔀ-꘿"},{name:"InVariation_Selectors",bmp:"︀-️"},{name:"InVariation_Selectors_Supplement",astral:"\udb40[\udd00-\uddef]"},{name:"InVedic_Extensions",bmp:"᳐-᳿"},{name:"InVertical_Forms",bmp:"︐-︟"},{name:"InWarang_Citi",astral:"\ud806[\udca0-\udcff]"},{name:"InYi_Radicals",bmp:"꒐-꓏"},{name:"InYi_Syllables",bmp:"ꀀ-꒏"},{name:"InYijing_Hexagram_Symbols",bmp:"䷀-䷿"},{name:"InZanabazar_Square",astral:"\ud806[\ude00-\ude4f]"},{name:"Inundefined",astral:"\ud803[\ude80-\udebf\udfb0-\udfff]|\ud806[\udd00-\udd5f\udda0-\uddff]|\ud807[\udfb0-\udfff]|\ud80d[\udc30-\udc3f]|\ud822[\udf00-\udfff]|\ud823[\udc00-\udd8f]|\ud82c[\udd30-\udd6f]|\ud838[\udd00-\udd4f\udec0-\udeff]|\ud83b[\udd00-\udd4f]|\ud83e[\ude70-\udfff]|[\ud880-\ud883][\udc00-\udfff]|\ud884[\udc00-\udf4f]"}],lO=eh((function(t,e){uE(e,"__esModule",{value:!0}),e.default=void 0;var n=jx(sO);
/*!
     * XRegExp Unicode Blocks 4.4.1
     * <xregexp.com>
     * Steven Levithan (c) 2010-present MIT License
     * Unicode data by Mathias Bynens <mathiasbynens.be>
     */e.default=function(t){if(!t.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Blocks");t.addUnicodeData(n.default)},t.exports=e.default})),uO=[{name:"C",alias:"Other",isBmpLast:!0,bmp:"\0--­͸͹΀-΃΋΍΢԰՗՘֋֌֐׈-׏׫-׮׵-؅؜؝۝܎܏݋݌޲-޿߻߼࠮࠯࠿࡜࡝࡟࡫-࢟ࢵࣈ-࣒࣢঄঍঎঑঒঩঱঳-঵঺঻৅৆৉৊৏-৖৘-৛৞৤৥৿਀਄਋-਎਑਒਩਱਴਷਺਻਽੃-੆੉੊੎-੐੒-੘੝੟-੥੷-઀઄઎઒઩઱઴઺઻૆૊૎૏૑-૟૤૥૲-૸଀଄଍଎଑଒଩଱଴଺଻୅୆୉୊୎-୔୘-୛୞୤୥୸-஁஄஋-஍஑஖-஘஛஝஠-஢஥-஧஫-஭஺-஽௃-௅௉௎௏௑-௖௘-௥௻-௿఍఑఩఺-఼౅౉౎-౔౗౛-౟౤౥౰-౶಍಑಩಴಺಻೅೉೎-೔೗-ೝ೟೤೥೰ೳ-೿഍഑൅൉൐-൓൤൥඀඄඗-඙඲඼඾඿෇-෉෋-෎෕෗෠-෥෰෱෵-฀฻-฾๜-຀຃຅຋຤຦຾຿໅໇໎໏໚໛໠-໿཈཭-཰྘྽࿍࿛-࿿჆჈-჌჎჏቉቎቏቗቙቞቟኉኎኏኱኶኷኿዁዆዇዗጑጖጗፛፜፽-፿᎚-᎟᏶᏷᏾᏿᚝-᚟᛹-᛿ᜍ᜕-ᜟ᜷-᜿᝔-᝟᝭᝱᝴-᝿៞៟៪-៯៺-៿᠎᠏᠚-᠟᡹-᡿᢫-᢯᣶-᣿᤟᤬-᤯᤼-᤿᥁-᥃᥮᥯᥵-᥿᦬-᦯᧊-᧏᧛-᧝᨜᨝᩟᩽᩾᪊-᪏᪚-᪟᪮᪯᫁-᫿ᭌ-᭏᭽-᭿᯴-᯻᰸-᰺᱊-᱌Ᲊ-᲏᲻᲼᳈-᳏᳻-᳿᷺἖἗἞἟὆὇὎὏὘὚὜὞὾὿᾵῅῔῕῜῰῱῵῿​-‏‪-‮⁠-⁯⁲⁳₏₝-₟⃀-⃏⃱-⃿↌-↏␧-␿⑋-⑟⭴⭵⮖Ⱟⱟ⳴-⳸⴦⴨-⴬⴮⴯⵨-⵮⵱-⵾⶗-⶟⶧⶯⶷⶿⷇⷏⷗⷟⹓-⹿⺚⻴-⻿⿖-⿯⿼-⿿぀゗゘㄀-㄄㄰㆏㇤-㇯㈟鿽-鿿꒍-꒏꓇-꓏꘬-꘿꛸-꛿ꟀꟁꟋ-ꟴ꠭-꠯꠺-꠿꡸-꡿꣆-꣍꣚-꣟꥔-꥞꥽-꥿꧎꧚-꧝꧿꨷-꨿꩎꩏꩚꩛꫃-꫚꫷-꬀꬇꬈꬏꬐꬗-꬟꬧꬯꭬-꭯꯮꯯꯺-꯿힤-힯퟇-퟊퟼-﩮﩯﫚-﫿﬇-﬒﬘-﬜﬷﬽﬿﭂﭅﯂-﯒﵀-﵏﶐﶑﷈-﷯﷾﷿︚-︟﹓﹧﹬-﹯﹵﻽-＀﾿-￁￈￉￐￑￘￙￝-￟￧￯-￻￾￿",astral:"\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\udcff\udd03-\udd06\udd34-\udd36\udd8f\udd9d-\udd9f\udda1-\uddcf\uddfe-\ude7f\ude9d-\ude9f\uded1-\udedf\udefc-\udeff\udf24-\udf2c\udf4b-\udf4f\udf7b-\udf7f\udf9e\udfc4-\udfc7\udfd6-\udfff]|\ud801[\udc9e\udc9f\udcaa-\udcaf\udcd4-\udcd7\udcfc-\udcff\udd28-\udd2f\udd64-\udd6e\udd70-\uddff\udf37-\udf3f\udf56-\udf5f\udf68-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56\udc9f-\udca6\udcb0-\udcdf\udcf3\udcf6-\udcfa\udd1c-\udd1e\udd3a-\udd3e\udd40-\udd7f\uddb8-\uddbb\uddd0\uddd1\ude04\ude07-\ude0b\ude14\ude18\ude36\ude37\ude3b-\ude3e\ude49-\ude4f\ude59-\ude5f\udea0-\udebf\udee7-\udeea\udef7-\udeff\udf36-\udf38\udf56\udf57\udf73-\udf77\udf92-\udf98\udf9d-\udfa8\udfb0-\udfff]|\ud803[\udc49-\udc7f\udcb3-\udcbf\udcf3-\udcf9\udd28-\udd2f\udd3a-\ude5f\ude7f\udeaa\udeae\udeaf\udeb2-\udeff\udf28-\udf2f\udf5a-\udfaf\udfcc-\udfdf\udff7-\udfff]|\ud804[\udc4e-\udc51\udc70-\udc7e\udcbd\udcc2-\udccf\udce9-\udcef\udcfa-\udcff\udd35\udd48-\udd4f\udd77-\udd7f\udde0\uddf5-\uddff\ude12\ude3f-\ude7f\ude87\ude89\ude8e\ude9e\udeaa-\udeaf\udeeb-\udeef\udefa-\udeff\udf04\udf0d\udf0e\udf11\udf12\udf29\udf31\udf34\udf3a\udf45\udf46\udf49\udf4a\udf4e\udf4f\udf51-\udf56\udf58-\udf5c\udf64\udf65\udf6d-\udf6f\udf75-\udfff]|\ud805[\udc5c\udc62-\udc7f\udcc8-\udccf\udcda-\udd7f\uddb6\uddb7\uddde-\uddff\ude45-\ude4f\ude5a-\ude5f\ude6d-\ude7f\udeb9-\udebf\udeca-\udeff\udf1b\udf1c\udf2c-\udf2f\udf40-\udfff]|\ud806[\udc3c-\udc9f\udcf3-\udcfe\udd07\udd08\udd0a\udd0b\udd14\udd17\udd36\udd39\udd3a\udd47-\udd4f\udd5a-\udd9f\udda8\udda9\uddd8\uddd9\udde5-\uddff\ude48-\ude4f\udea3-\udebf\udef9-\udfff]|\ud807[\udc09\udc37\udc46-\udc4f\udc6d-\udc6f\udc90\udc91\udca8\udcb7-\udcff\udd07\udd0a\udd37-\udd39\udd3b\udd3e\udd48-\udd4f\udd5a-\udd5f\udd66\udd69\udd8f\udd92\udd99-\udd9f\uddaa-\udedf\udef9-\udfaf\udfb1-\udfbf\udff2-\udffe]|\ud808[\udf9a-\udfff]|\ud809[\udc6f\udc75-\udc7f\udd44-\udfff]|[\ud80a\ud80b\ud80e-\ud810\ud812-\ud819\ud824-\ud82b\ud82d\ud82e\ud830-\ud833\ud837\ud839\ud83f\ud87b-\ud87d\ud87f\ud885-\udb3f\udb41-\udbff][\udc00-\udfff]|\ud80d[\udc2f-\udfff]|\ud811[\ude47-\udfff]|\ud81a[\ude39-\ude3f\ude5f\ude6a-\ude6d\ude70-\udecf\udeee\udeef\udef6-\udeff\udf46-\udf4f\udf5a\udf62\udf78-\udf7c\udf90-\udfff]|\ud81b[\udc00-\ude3f\ude9b-\udeff\udf4b-\udf4e\udf88-\udf8e\udfa0-\udfdf\udfe5-\udfef\udff2-\udfff]|\ud821[\udff8-\udfff]|\ud823[\udcd6-\udcff\udd09-\udfff]|\ud82c[\udd1f-\udd4f\udd53-\udd63\udd68-\udd6f\udefc-\udfff]|\ud82f[\udc6b-\udc6f\udc7d-\udc7f\udc89-\udc8f\udc9a\udc9b\udca0-\udfff]|\ud834[\udcf6-\udcff\udd27\udd28\udd73-\udd7a\udde9-\uddff\ude46-\udedf\udef4-\udeff\udf57-\udf5f\udf79-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udfcc\udfcd]|\ud836[\ude8c-\ude9a\udea0\udeb0-\udfff]|\ud838[\udc07\udc19\udc1a\udc22\udc25\udc2b-\udcff\udd2d-\udd2f\udd3e\udd3f\udd4a-\udd4d\udd50-\udebf\udefa-\udefe\udf00-\udfff]|\ud83a[\udcc5\udcc6\udcd7-\udcff\udd4c-\udd4f\udd5a-\udd5d\udd60-\udfff]|\ud83b[\udc00-\udc70\udcb5-\udd00\udd3e-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udeef\udef2-\udfff]|\ud83c[\udc2c-\udc2f\udc94-\udc9f\udcaf\udcb0\udcc0\udcd0\udcf6-\udcff\uddae-\udde5\ude03-\ude0f\ude3c-\ude3f\ude49-\ude4f\ude52-\ude5f\ude66-\udeff]|\ud83d[\uded8-\udedf\udeed-\udeef\udefd-\udeff\udf74-\udf7f\udfd9-\udfdf\udfec-\udfff]|\ud83e[\udc0c-\udc0f\udc48-\udc4f\udc5a-\udc5f\udc88-\udc8f\udcae\udcaf\udcb2-\udcff\udd79\uddcc\ude54-\ude5f\ude6e\ude6f\ude75-\ude77\ude7b-\ude7f\ude87-\ude8f\udea9-\udeaf\udeb7-\udebf\udec3-\udecf\uded7-\udeff\udf93\udfcb-\udfef\udffa-\udfff]|\ud869[\udede-\udeff]|\ud86d[\udf35-\udf3f]|\ud86e[\udc1e\udc1f]|\ud873[\udea2-\udeaf]|\ud87a[\udfe1-\udfff]|\ud87e[\ude1e-\udfff]|\ud884[\udf4b-\udfff]|\udb40[\udc00-\udcff\uddf0-\udfff]"},{name:"Cc",alias:"Control",bmp:"\0--"},{name:"Cf",alias:"Format",bmp:"­؀-؅؜۝܏࣢᠎​-‏‪-‮⁠-⁤⁦-⁯\ufeff￹-￻",astral:"\ud804[\udcbd\udccd]|\ud80d[\udc30-\udc38]|\ud82f[\udca0-\udca3]|\ud834[\udd73-\udd7a]|\udb40[\udc01\udc20-\udc7f]"},{name:"Cn",alias:"Unassigned",bmp:"͸͹΀-΃΋΍΢԰՗՘֋֌֐׈-׏׫-׮׵-׿؝܎݋݌޲-޿߻߼࠮࠯࠿࡜࡝࡟࡫-࢟ࢵࣈ-࣒঄঍঎঑঒঩঱঳-঵঺঻৅৆৉৊৏-৖৘-৛৞৤৥৿਀਄਋-਎਑਒਩਱਴਷਺਻਽੃-੆੉੊੎-੐੒-੘੝੟-੥੷-઀઄઎઒઩઱઴઺઻૆૊૎૏૑-૟૤૥૲-૸଀଄଍଎଑଒଩଱଴଺଻୅୆୉୊୎-୔୘-୛୞୤୥୸-஁஄஋-஍஑஖-஘஛஝஠-஢஥-஧஫-஭஺-஽௃-௅௉௎௏௑-௖௘-௥௻-௿఍఑఩఺-఼౅౉౎-౔౗౛-౟౤౥౰-౶಍಑಩಴಺಻೅೉೎-೔೗-ೝ೟೤೥೰ೳ-೿഍഑൅൉൐-൓൤൥඀඄඗-඙඲඼඾඿෇-෉෋-෎෕෗෠-෥෰෱෵-฀฻-฾๜-຀຃຅຋຤຦຾຿໅໇໎໏໚໛໠-໿཈཭-཰྘྽࿍࿛-࿿჆჈-჌჎჏቉቎቏቗቙቞቟኉኎኏኱኶኷኿዁዆዇዗጑጖጗፛፜፽-፿᎚-᎟᏶᏷᏾᏿᚝-᚟᛹-᛿ᜍ᜕-ᜟ᜷-᜿᝔-᝟᝭᝱᝴-᝿៞៟៪-៯៺-៿᠏᠚-᠟᡹-᡿᢫-᢯᣶-᣿᤟᤬-᤯᤼-᤿᥁-᥃᥮᥯᥵-᥿᦬-᦯᧊-᧏᧛-᧝᨜᨝᩟᩽᩾᪊-᪏᪚-᪟᪮᪯᫁-᫿ᭌ-᭏᭽-᭿᯴-᯻᰸-᰺᱊-᱌Ᲊ-᲏᲻᲼᳈-᳏᳻-᳿᷺἖἗἞἟὆὇὎὏὘὚὜὞὾὿᾵῅῔῕῜῰῱῵῿⁥⁲⁳₏₝-₟⃀-⃏⃱-⃿↌-↏␧-␿⑋-⑟⭴⭵⮖Ⱟⱟ⳴-⳸⴦⴨-⴬⴮⴯⵨-⵮⵱-⵾⶗-⶟⶧⶯⶷⶿⷇⷏⷗⷟⹓-⹿⺚⻴-⻿⿖-⿯⿼-⿿぀゗゘㄀-㄄㄰㆏㇤-㇯㈟鿽-鿿꒍-꒏꓇-꓏꘬-꘿꛸-꛿ꟀꟁꟋ-ꟴ꠭-꠯꠺-꠿꡸-꡿꣆-꣍꣚-꣟꥔-꥞꥽-꥿꧎꧚-꧝꧿꨷-꨿꩎꩏꩚꩛꫃-꫚꫷-꬀꬇꬈꬏꬐꬗-꬟꬧꬯꭬-꭯꯮꯯꯺-꯿힤-힯퟇-퟊퟼-퟿﩮﩯﫚-﫿﬇-﬒﬘-﬜﬷﬽﬿﭂﭅﯂-﯒﵀-﵏﶐﶑﷈-﷯﷾﷿︚-︟﹓﹧﹬-﹯﹵﻽﻾＀﾿-￁￈￉￐￑￘￙￝-￟￧￯-￸￾￿",astral:"\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\udcff\udd03-\udd06\udd34-\udd36\udd8f\udd9d-\udd9f\udda1-\uddcf\uddfe-\ude7f\ude9d-\ude9f\uded1-\udedf\udefc-\udeff\udf24-\udf2c\udf4b-\udf4f\udf7b-\udf7f\udf9e\udfc4-\udfc7\udfd6-\udfff]|\ud801[\udc9e\udc9f\udcaa-\udcaf\udcd4-\udcd7\udcfc-\udcff\udd28-\udd2f\udd64-\udd6e\udd70-\uddff\udf37-\udf3f\udf56-\udf5f\udf68-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56\udc9f-\udca6\udcb0-\udcdf\udcf3\udcf6-\udcfa\udd1c-\udd1e\udd3a-\udd3e\udd40-\udd7f\uddb8-\uddbb\uddd0\uddd1\ude04\ude07-\ude0b\ude14\ude18\ude36\ude37\ude3b-\ude3e\ude49-\ude4f\ude59-\ude5f\udea0-\udebf\udee7-\udeea\udef7-\udeff\udf36-\udf38\udf56\udf57\udf73-\udf77\udf92-\udf98\udf9d-\udfa8\udfb0-\udfff]|\ud803[\udc49-\udc7f\udcb3-\udcbf\udcf3-\udcf9\udd28-\udd2f\udd3a-\ude5f\ude7f\udeaa\udeae\udeaf\udeb2-\udeff\udf28-\udf2f\udf5a-\udfaf\udfcc-\udfdf\udff7-\udfff]|\ud804[\udc4e-\udc51\udc70-\udc7e\udcc2-\udccc\udcce\udccf\udce9-\udcef\udcfa-\udcff\udd35\udd48-\udd4f\udd77-\udd7f\udde0\uddf5-\uddff\ude12\ude3f-\ude7f\ude87\ude89\ude8e\ude9e\udeaa-\udeaf\udeeb-\udeef\udefa-\udeff\udf04\udf0d\udf0e\udf11\udf12\udf29\udf31\udf34\udf3a\udf45\udf46\udf49\udf4a\udf4e\udf4f\udf51-\udf56\udf58-\udf5c\udf64\udf65\udf6d-\udf6f\udf75-\udfff]|\ud805[\udc5c\udc62-\udc7f\udcc8-\udccf\udcda-\udd7f\uddb6\uddb7\uddde-\uddff\ude45-\ude4f\ude5a-\ude5f\ude6d-\ude7f\udeb9-\udebf\udeca-\udeff\udf1b\udf1c\udf2c-\udf2f\udf40-\udfff]|\ud806[\udc3c-\udc9f\udcf3-\udcfe\udd07\udd08\udd0a\udd0b\udd14\udd17\udd36\udd39\udd3a\udd47-\udd4f\udd5a-\udd9f\udda8\udda9\uddd8\uddd9\udde5-\uddff\ude48-\ude4f\udea3-\udebf\udef9-\udfff]|\ud807[\udc09\udc37\udc46-\udc4f\udc6d-\udc6f\udc90\udc91\udca8\udcb7-\udcff\udd07\udd0a\udd37-\udd39\udd3b\udd3e\udd48-\udd4f\udd5a-\udd5f\udd66\udd69\udd8f\udd92\udd99-\udd9f\uddaa-\udedf\udef9-\udfaf\udfb1-\udfbf\udff2-\udffe]|\ud808[\udf9a-\udfff]|\ud809[\udc6f\udc75-\udc7f\udd44-\udfff]|[\ud80a\ud80b\ud80e-\ud810\ud812-\ud819\ud824-\ud82b\ud82d\ud82e\ud830-\ud833\ud837\ud839\ud83f\ud87b-\ud87d\ud87f\ud885-\udb3f\udb41-\udb7f][\udc00-\udfff]|\ud80d[\udc2f\udc39-\udfff]|\ud811[\ude47-\udfff]|\ud81a[\ude39-\ude3f\ude5f\ude6a-\ude6d\ude70-\udecf\udeee\udeef\udef6-\udeff\udf46-\udf4f\udf5a\udf62\udf78-\udf7c\udf90-\udfff]|\ud81b[\udc00-\ude3f\ude9b-\udeff\udf4b-\udf4e\udf88-\udf8e\udfa0-\udfdf\udfe5-\udfef\udff2-\udfff]|\ud821[\udff8-\udfff]|\ud823[\udcd6-\udcff\udd09-\udfff]|\ud82c[\udd1f-\udd4f\udd53-\udd63\udd68-\udd6f\udefc-\udfff]|\ud82f[\udc6b-\udc6f\udc7d-\udc7f\udc89-\udc8f\udc9a\udc9b\udca4-\udfff]|\ud834[\udcf6-\udcff\udd27\udd28\udde9-\uddff\ude46-\udedf\udef4-\udeff\udf57-\udf5f\udf79-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udfcc\udfcd]|\ud836[\ude8c-\ude9a\udea0\udeb0-\udfff]|\ud838[\udc07\udc19\udc1a\udc22\udc25\udc2b-\udcff\udd2d-\udd2f\udd3e\udd3f\udd4a-\udd4d\udd50-\udebf\udefa-\udefe\udf00-\udfff]|\ud83a[\udcc5\udcc6\udcd7-\udcff\udd4c-\udd4f\udd5a-\udd5d\udd60-\udfff]|\ud83b[\udc00-\udc70\udcb5-\udd00\udd3e-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udeef\udef2-\udfff]|\ud83c[\udc2c-\udc2f\udc94-\udc9f\udcaf\udcb0\udcc0\udcd0\udcf6-\udcff\uddae-\udde5\ude03-\ude0f\ude3c-\ude3f\ude49-\ude4f\ude52-\ude5f\ude66-\udeff]|\ud83d[\uded8-\udedf\udeed-\udeef\udefd-\udeff\udf74-\udf7f\udfd9-\udfdf\udfec-\udfff]|\ud83e[\udc0c-\udc0f\udc48-\udc4f\udc5a-\udc5f\udc88-\udc8f\udcae\udcaf\udcb2-\udcff\udd79\uddcc\ude54-\ude5f\ude6e\ude6f\ude75-\ude77\ude7b-\ude7f\ude87-\ude8f\udea9-\udeaf\udeb7-\udebf\udec3-\udecf\uded7-\udeff\udf93\udfcb-\udfef\udffa-\udfff]|\ud869[\udede-\udeff]|\ud86d[\udf35-\udf3f]|\ud86e[\udc1e\udc1f]|\ud873[\udea2-\udeaf]|\ud87a[\udfe1-\udfff]|\ud87e[\ude1e-\udfff]|\ud884[\udf4b-\udfff]|\udb40[\udc00\udc02-\udc1f\udc80-\udcff\uddf0-\udfff]|[\udbbf\udbff][\udffe\udfff]"},{name:"Co",alias:"Private_Use",bmp:"-",astral:"[\udb80-\udbbe\udbc0-\udbfe][\udc00-\udfff]|[\udbbf\udbff][\udc00-\udffd]"},{name:"Cs",alias:"Surrogate",bmp:"\ud800-\udfff"},{name:"L",alias:"Letter",bmp:"A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࣇऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-鿼ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-ꟊꟵ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",astral:"\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf2d-\udf40\udf42-\udf49\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud801[\udc00-\udc9d\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude35\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udd00-\udd23\ude80-\udea9\udeb0\udeb1\udf00-\udf1c\udf27\udf30-\udf45\udfb0-\udfc4\udfe0-\udff6]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd44\udd47\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud805[\udc00-\udc34\udc47-\udc4a\udc5f-\udc61\udc80-\udcaf\udcc4\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udeb8\udf00-\udf1a]|\ud806[\udc00-\udc2b\udca0-\udcdf\udcff-\udd06\udd09\udd0c-\udd13\udd15\udd16\udd18-\udd2f\udd3f\udd41\udda0-\udda7\uddaa-\uddd0\udde1\udde3\ude00\ude0b-\ude32\ude3a\ude50\ude5c-\ude89\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc2e\udc40\udc72-\udc8f\udd00-\udd06\udd08\udd09\udd0b-\udd30\udd46\udd60-\udd65\udd67\udd68\udd6a-\udd89\udd98\udee0-\udef2\udfb0]|\ud808[\udc00-\udf99]|\ud809[\udc80-\udd43]|[\ud80c\ud81c-\ud820\ud822\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872\ud874-\ud879\ud880-\ud883][\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\ude40-\ude7f\udf00-\udf4a\udf50\udf93-\udf9f\udfe0\udfe1\udfe3]|\ud821[\udc00-\udff7]|\ud823[\udc00-\udcd5\udd00-\udd08]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud838[\udd00-\udd2c\udd37-\udd3d\udd4e\udec0-\udeeb]|\ud83a[\udc00-\udcc4\udd00-\udd43\udd4b]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud869[\udc00-\udedd\udf00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d]|\ud884[\udc00-\udf4a]"},{name:"LC",alias:"Cased_Letter",bmp:"A-Za-zµÀ-ÖØ-öø-ƺƼ-ƿǄ-ʓʕ-ʯͰ-ͳͶͷͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՠ-ֈႠ-ჅჇჍა-ჺჽ-ჿᎠ-Ᏽᏸ-ᏽᲀ-ᲈᲐ-ᲺᲽ-Ჿᴀ-ᴫᵫ-ᵷᵹ-ᶚḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⱻⱾ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭꙀ-ꙭꚀ-ꚛꜢ-ꝯꝱ-ꞇꞋ-ꞎꞐ-ꞿꟂ-ꟊꟵꟶꟺꬰ-ꭚꭠ-ꭨꭰ-ꮿﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚ",astral:"\ud801[\udc00-\udc4f\udcb0-\udcd3\udcd8-\udcfb]|\ud803[\udc80-\udcb2\udcc0-\udcf2]|\ud806[\udca0-\udcdf]|\ud81b[\ude40-\ude7f]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud83a[\udd00-\udd43]"},{name:"Ll",alias:"Lowercase_Letter",bmp:"a-zµß-öø-ÿāăąćĉċčďđēĕėęěĝğġģĥħĩīĭįıĳĵķĸĺļľŀłńņňŉŋōŏőœŕŗřśŝşšţťŧũūŭůűųŵŷźżž-ƀƃƅƈƌƍƒƕƙ-ƛƞơƣƥƨƪƫƭưƴƶƹƺƽ-ƿǆǉǌǎǐǒǔǖǘǚǜǝǟǡǣǥǧǩǫǭǯǰǳǵǹǻǽǿȁȃȅȇȉȋȍȏȑȓȕȗșțȝȟȡȣȥȧȩȫȭȯȱȳ-ȹȼȿɀɂɇɉɋɍɏ-ʓʕ-ʯͱͳͷͻ-ͽΐά-ώϐϑϕ-ϗϙϛϝϟϡϣϥϧϩϫϭϯ-ϳϵϸϻϼа-џѡѣѥѧѩѫѭѯѱѳѵѷѹѻѽѿҁҋҍҏґғҕҗҙқҝҟҡңҥҧҩҫҭүұҳҵҷҹһҽҿӂӄӆӈӊӌӎӏӑӓӕӗәӛӝӟӡӣӥӧөӫӭӯӱӳӵӷӹӻӽӿԁԃԅԇԉԋԍԏԑԓԕԗԙԛԝԟԡԣԥԧԩԫԭԯՠ-ֈა-ჺჽ-ჿᏸ-ᏽᲀ-ᲈᴀ-ᴫᵫ-ᵷᵹ-ᶚḁḃḅḇḉḋḍḏḑḓḕḗḙḛḝḟḡḣḥḧḩḫḭḯḱḳḵḷḹḻḽḿṁṃṅṇṉṋṍṏṑṓṕṗṙṛṝṟṡṣṥṧṩṫṭṯṱṳṵṷṹṻṽṿẁẃẅẇẉẋẍẏẑẓẕ-ẝẟạảấầẩẫậắằẳẵặẹẻẽếềểễệỉịọỏốồổỗộớờởỡợụủứừửữựỳỵỷỹỻỽỿ-ἇἐ-ἕἠ-ἧἰ-ἷὀ-ὅὐ-ὗὠ-ὧὰ-ώᾀ-ᾇᾐ-ᾗᾠ-ᾧᾰ-ᾴᾶᾷιῂ-ῄῆῇῐ-ΐῖῗῠ-ῧῲ-ῴῶῷℊℎℏℓℯℴℹℼℽⅆ-ⅉⅎↄⰰ-ⱞⱡⱥⱦⱨⱪⱬⱱⱳⱴⱶ-ⱻⲁⲃⲅⲇⲉⲋⲍⲏⲑⲓⲕⲗⲙⲛⲝⲟⲡⲣⲥⲧⲩⲫⲭⲯⲱⲳⲵⲷⲹⲻⲽⲿⳁⳃⳅⳇⳉⳋⳍⳏⳑⳓⳕⳗⳙⳛⳝⳟⳡⳣⳤⳬⳮⳳⴀ-ⴥⴧⴭꙁꙃꙅꙇꙉꙋꙍꙏꙑꙓꙕꙗꙙꙛꙝꙟꙡꙣꙥꙧꙩꙫꙭꚁꚃꚅꚇꚉꚋꚍꚏꚑꚓꚕꚗꚙꚛꜣꜥꜧꜩꜫꜭꜯ-ꜱꜳꜵꜷꜹꜻꜽꜿꝁꝃꝅꝇꝉꝋꝍꝏꝑꝓꝕꝗꝙꝛꝝꝟꝡꝣꝥꝧꝩꝫꝭꝯꝱ-ꝸꝺꝼꝿꞁꞃꞅꞇꞌꞎꞑꞓ-ꞕꞗꞙꞛꞝꞟꞡꞣꞥꞧꞩꞯꞵꞷꞹꞻꞽꞿꟃꟈꟊꟶꟺꬰ-ꭚꭠ-ꭨꭰ-ꮿﬀ-ﬆﬓ-ﬗａ-ｚ",astral:"\ud801[\udc28-\udc4f\udcd8-\udcfb]|\ud803[\udcc0-\udcf2]|\ud806[\udcc0-\udcdf]|\ud81b[\ude60-\ude7f]|\ud835[\udc1a-\udc33\udc4e-\udc54\udc56-\udc67\udc82-\udc9b\udcb6-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udccf\udcea-\udd03\udd1e-\udd37\udd52-\udd6b\udd86-\udd9f\uddba-\uddd3\uddee-\ude07\ude22-\ude3b\ude56-\ude6f\ude8a-\udea5\udec2-\udeda\udedc-\udee1\udefc-\udf14\udf16-\udf1b\udf36-\udf4e\udf50-\udf55\udf70-\udf88\udf8a-\udf8f\udfaa-\udfc2\udfc4-\udfc9\udfcb]|\ud83a[\udd22-\udd43]"},{name:"Lm",alias:"Modifier_Letter",bmp:"ʰ-ˁˆ-ˑˠ-ˤˬˮʹͺՙـۥۦߴߵߺࠚࠤࠨॱๆໆჼៗᡃᪧᱸ-ᱽᴬ-ᵪᵸᶛ-ᶿⁱⁿₐ-ₜⱼⱽⵯⸯ々〱-〵〻ゝゞー-ヾꀕꓸ-ꓽꘌꙿꚜꚝꜗ-ꜟꝰꞈꟸꟹꧏꧦꩰꫝꫳꫴꭜ-ꭟꭩｰﾞﾟ",astral:"\ud81a[\udf40-\udf43]|\ud81b[\udf93-\udf9f\udfe0\udfe1\udfe3]|\ud838[\udd37-\udd3d]|𞥋"},{name:"Lo",alias:"Other_Letter",bmp:"ªºƻǀ-ǃʔא-תׯ-ײؠ-ؿف-يٮٯٱ-ۓەۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪࠀ-ࠕࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࣇऄ-हऽॐक़-ॡॲ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๅກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៜᠠ-ᡂᡄ-ᡸᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱷᳩ-ᳬᳮ-ᳳᳵᳶᳺℵ-ℸⴰ-ⵧⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ〆〼ぁ-ゖゟァ-ヺヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-鿼ꀀ-ꀔꀖ-ꒌꓐ-ꓷꔀ-ꘋꘐ-ꘟꘪꘫꙮꚠ-ꛥꞏꟷꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧠ-ꧤꧧ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩯꩱ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛꫜꫠ-ꫪꫲꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎יִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼｦ-ｯｱ-ﾝﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",astral:"\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf2d-\udf40\udf42-\udf49\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud801[\udc50-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude35\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udd00-\udd23\ude80-\udea9\udeb0\udeb1\udf00-\udf1c\udf27\udf30-\udf45\udfb0-\udfc4\udfe0-\udff6]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd44\udd47\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud805[\udc00-\udc34\udc47-\udc4a\udc5f-\udc61\udc80-\udcaf\udcc4\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udeb8\udf00-\udf1a]|\ud806[\udc00-\udc2b\udcff-\udd06\udd09\udd0c-\udd13\udd15\udd16\udd18-\udd2f\udd3f\udd41\udda0-\udda7\uddaa-\uddd0\udde1\udde3\ude00\ude0b-\ude32\ude3a\ude50\ude5c-\ude89\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc2e\udc40\udc72-\udc8f\udd00-\udd06\udd08\udd09\udd0b-\udd30\udd46\udd60-\udd65\udd67\udd68\udd6a-\udd89\udd98\udee0-\udef2\udfb0]|\ud808[\udc00-\udf99]|\ud809[\udc80-\udd43]|[\ud80c\ud81c-\ud820\ud822\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872\ud874-\ud879\ud880-\ud883][\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf63-\udf77\udf7d-\udf8f]|\ud81b[\udf00-\udf4a\udf50]|\ud821[\udc00-\udff7]|\ud823[\udc00-\udcd5\udd00-\udd08]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud838[\udd00-\udd2c\udd4e\udec0-\udeeb]|\ud83a[\udc00-\udcc4]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud869[\udc00-\udedd\udf00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d]|\ud884[\udc00-\udf4a]"},{name:"Lt",alias:"Titlecase_Letter",bmp:"ǅǈǋǲᾈ-ᾏᾘ-ᾟᾨ-ᾯᾼῌῼ"},{name:"Lu",alias:"Uppercase_Letter",bmp:"A-ZÀ-ÖØ-ÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸŹŻŽƁƂƄƆƇƉ-ƋƎ-ƑƓƔƖ-ƘƜƝƟƠƢƤƦƧƩƬƮƯƱ-ƳƵƷƸƼǄǇǊǍǏǑǓǕǗǙǛǞǠǢǤǦǨǪǬǮǱǴǶ-ǸǺǼǾȀȂȄȆȈȊȌȎȐȒȔȖȘȚȜȞȠȢȤȦȨȪȬȮȰȲȺȻȽȾɁɃ-ɆɈɊɌɎͰͲͶͿΆΈ-ΊΌΎΏΑ-ΡΣ-ΫϏϒ-ϔϘϚϜϞϠϢϤϦϨϪϬϮϴϷϹϺϽ-ЯѠѢѤѦѨѪѬѮѰѲѴѶѸѺѼѾҀҊҌҎҐҒҔҖҘҚҜҞҠҢҤҦҨҪҬҮҰҲҴҶҸҺҼҾӀӁӃӅӇӉӋӍӐӒӔӖӘӚӜӞӠӢӤӦӨӪӬӮӰӲӴӶӸӺӼӾԀԂԄԆԈԊԌԎԐԒԔԖԘԚԜԞԠԢԤԦԨԪԬԮԱ-ՖႠ-ჅჇჍᎠ-ᏵᲐ-ᲺᲽ-ᲿḀḂḄḆḈḊḌḎḐḒḔḖḘḚḜḞḠḢḤḦḨḪḬḮḰḲḴḶḸḺḼḾṀṂṄṆṈṊṌṎṐṒṔṖṘṚṜṞṠṢṤṦṨṪṬṮṰṲṴṶṸṺṼṾẀẂẄẆẈẊẌẎẐẒẔẞẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼẾỀỂỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪỬỮỰỲỴỶỸỺỼỾἈ-ἏἘ-ἝἨ-ἯἸ-ἿὈ-ὍὙὛὝὟὨ-ὯᾸ-ΆῈ-ΉῘ-ΊῨ-ῬῸ-Ώℂℇℋ-ℍℐ-ℒℕℙ-ℝℤΩℨK-ℭℰ-ℳℾℿⅅↃⰀ-ⰮⱠⱢ-ⱤⱧⱩⱫⱭ-ⱰⱲⱵⱾ-ⲀⲂⲄⲆⲈⲊⲌⲎⲐⲒⲔⲖⲘⲚⲜⲞⲠⲢⲤⲦⲨⲪⲬⲮⲰⲲⲴⲶⲸⲺⲼⲾⳀⳂⳄⳆⳈⳊⳌⳎⳐⳒⳔⳖⳘⳚⳜⳞⳠⳢⳫⳭⳲꙀꙂꙄꙆꙈꙊꙌꙎꙐꙒꙔꙖꙘꙚꙜꙞꙠꙢꙤꙦꙨꙪꙬꚀꚂꚄꚆꚈꚊꚌꚎꚐꚒꚔꚖꚘꚚꜢꜤꜦꜨꜪꜬꜮꜲꜴꜶꜸꜺꜼꜾꝀꝂꝄꝆꝈꝊꝌꝎꝐꝒꝔꝖꝘꝚꝜꝞꝠꝢꝤꝦꝨꝪꝬꝮꝹꝻꝽꝾꞀꞂꞄꞆꞋꞍꞐꞒꞖꞘꞚꞜꞞꞠꞢꞤꞦꞨꞪ-ꞮꞰ-ꞴꞶꞸꞺꞼꞾꟂꟄ-ꟇꟉꟵＡ-Ｚ",astral:"\ud801[\udc00-\udc27\udcb0-\udcd3]|\ud803[\udc80-\udcb2]|\ud806[\udca0-\udcbf]|\ud81b[\ude40-\ude5f]|\ud835[\udc00-\udc19\udc34-\udc4d\udc68-\udc81\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb5\udcd0-\udce9\udd04\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd38\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd6c-\udd85\udda0-\uddb9\uddd4-\udded\ude08-\ude21\ude3c-\ude55\ude70-\ude89\udea8-\udec0\udee2-\udefa\udf1c-\udf34\udf56-\udf6e\udf90-\udfa8\udfca]|\ud83a[\udd00-\udd21]"},{name:"M",alias:"Mark",bmp:"̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣ৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣஂா-ூெ-ைொ-்ௗఀ-ఄా-ౄె-ైొ-్ౕౖౢౣಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣඁ-ඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝᠋-᠍ᢅᢆᢩᤠ-ᤫᤰ-᤻ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼᪰-ᫀᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-ᮭ᯦-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣠-꣱ꣿꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꧥꨩ-ꨶꩃꩌꩍꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︯",astral:"\ud800[\uddfd\udee0\udf76-\udf7a]|\ud802[\ude01-\ude03\ude05\ude06\ude0c-\ude0f\ude38-\ude3a\ude3f\udee5\udee6]|\ud803[\udd24-\udd27\udeab\udeac\udf46-\udf50]|\ud804[\udc00-\udc02\udc38-\udc46\udc7f-\udc82\udcb0-\udcba\udd00-\udd02\udd27-\udd34\udd45\udd46\udd73\udd80-\udd82\uddb3-\uddc0\uddc9-\uddcc\uddce\uddcf\ude2c-\ude37\ude3e\udedf-\udeea\udf00-\udf03\udf3b\udf3c\udf3e-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf62\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc35-\udc46\udc5e\udcb0-\udcc3\uddaf-\uddb5\uddb8-\uddc0\udddc\udddd\ude30-\ude40\udeab-\udeb7\udf1d-\udf2b]|\ud806[\udc2c-\udc3a\udd30-\udd35\udd37\udd38\udd3b-\udd3e\udd40\udd42\udd43\uddd1-\uddd7\uddda-\udde0\udde4\ude01-\ude0a\ude33-\ude39\ude3b-\ude3e\ude47\ude51-\ude5b\ude8a-\ude99]|\ud807[\udc2f-\udc36\udc38-\udc3f\udc92-\udca7\udca9-\udcb6\udd31-\udd36\udd3a\udd3c\udd3d\udd3f-\udd45\udd47\udd8a-\udd8e\udd90\udd91\udd93-\udd97\udef3-\udef6]|\ud81a[\udef0-\udef4\udf30-\udf36]|\ud81b[\udf4f\udf51-\udf87\udf8f-\udf92\udfe4\udff0\udff1]|\ud82f[\udc9d\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud836[\ude00-\ude36\ude3b-\ude6c\ude75\ude84\ude9b-\ude9f\udea1-\udeaf]|\ud838[\udc00-\udc06\udc08-\udc18\udc1b-\udc21\udc23\udc24\udc26-\udc2a\udd30-\udd36\udeec-\udeef]|\ud83a[\udcd0-\udcd6\udd44-\udd4a]|\udb40[\udd00-\uddef]"},{name:"Mc",alias:"Spacing_Mark",bmp:"ःऻा-ीॉ-ौॎॏংঃা-ীেৈোৌৗਃਾ-ੀઃા-ીૉોૌଂଃାୀେୈୋୌୗாிுூெ-ைொ-ௌௗఁ-ఃు-ౄಂಃಾೀ-ೄೇೈೊೋೕೖംഃാ-ീെ-ൈൊ-ൌൗංඃා-ෑෘ-ෟෲෳ༾༿ཿါာေးျြၖၗၢ-ၤၧ-ၭႃႄႇ-ႌႏႚ-ႜាើ-ៅះៈᤣ-ᤦᤩ-ᤫᤰᤱᤳ-ᤸᨙᨚᩕᩗᩡᩣᩤᩭ-ᩲᬄᬵᬻᬽ-ᭁᭃ᭄ᮂᮡᮦᮧ᮪ᯧᯪ-ᯬᯮ᯲᯳ᰤ-ᰫᰴᰵ᳡᳷〮〯ꠣꠤꠧꢀꢁꢴ-ꣃꥒ꥓ꦃꦴꦵꦺꦻꦾ-꧀ꨯꨰꨳꨴꩍꩻꩽꫫꫮꫯꫵꯣꯤꯦꯧꯩꯪ꯬",astral:"\ud804[\udc00\udc02\udc82\udcb0-\udcb2\udcb7\udcb8\udd2c\udd45\udd46\udd82\uddb3-\uddb5\uddbf\uddc0\uddce\ude2c-\ude2e\ude32\ude33\ude35\udee0-\udee2\udf02\udf03\udf3e\udf3f\udf41-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf62\udf63]|\ud805[\udc35-\udc37\udc40\udc41\udc45\udcb0-\udcb2\udcb9\udcbb-\udcbe\udcc1\uddaf-\uddb1\uddb8-\uddbb\uddbe\ude30-\ude32\ude3b\ude3c\ude3e\udeac\udeae\udeaf\udeb6\udf20\udf21\udf26]|\ud806[\udc2c-\udc2e\udc38\udd30-\udd35\udd37\udd38\udd3d\udd40\udd42\uddd1-\uddd3\udddc-\udddf\udde4\ude39\ude57\ude58\ude97]|\ud807[\udc2f\udc3e\udca9\udcb1\udcb4\udd8a-\udd8e\udd93\udd94\udd96\udef5\udef6]|\ud81b[\udf51-\udf87\udff0\udff1]|\ud834[\udd65\udd66\udd6d-\udd72]"},{name:"Me",alias:"Enclosing_Mark",bmp:"҈҉᪾⃝-⃠⃢-⃤꙰-꙲"},{name:"Mn",alias:"Nonspacing_Mark",bmp:"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ंऺ़ु-ै्॑-ॗॢॣঁ়ু-ৄ্ৢৣ৾ਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣૺ-૿ଁ଼ିୁ-ୄ୍୕ୖୢୣஂீ்ఀఄా-ీె-ైొ-్ౕౖౢౣಁ಼ಿೆೌ್ೢೣഀഁ഻഼ു-ൄ്ൢൣඁ්ි-ුූัิ-ฺ็-๎ັິ-ຼ່-ໍཱ༹༘༙༵༷-ཾྀ-྄྆྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴឵ិ-ួំ៉-៓៝᠋-᠍ᢅᢆᢩᤠ-ᤢᤧᤨᤲ᤹-᤻ᨘᨗᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽ᪿᫀᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩ᮫-ᮭ᯦ᯨᯩᯭᯯ-ᯱᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸᳹᷀-᷹᷻-᷿⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〭꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠥꠦ꠬꣄ꣅ꣠-꣱ꣿꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꦽꧥꨩ-ꨮꨱꨲꨵꨶꩃꩌꩼꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫬꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯",astral:"\ud800[\uddfd\udee0\udf76-\udf7a]|\ud802[\ude01-\ude03\ude05\ude06\ude0c-\ude0f\ude38-\ude3a\ude3f\udee5\udee6]|\ud803[\udd24-\udd27\udeab\udeac\udf46-\udf50]|\ud804[\udc01\udc38-\udc46\udc7f-\udc81\udcb3-\udcb6\udcb9\udcba\udd00-\udd02\udd27-\udd2b\udd2d-\udd34\udd73\udd80\udd81\uddb6-\uddbe\uddc9-\uddcc\uddcf\ude2f-\ude31\ude34\ude36\ude37\ude3e\udedf\udee3-\udeea\udf00\udf01\udf3b\udf3c\udf40\udf66-\udf6c\udf70-\udf74]|\ud805[\udc38-\udc3f\udc42-\udc44\udc46\udc5e\udcb3-\udcb8\udcba\udcbf\udcc0\udcc2\udcc3\uddb2-\uddb5\uddbc\uddbd\uddbf\uddc0\udddc\udddd\ude33-\ude3a\ude3d\ude3f\ude40\udeab\udead\udeb0-\udeb5\udeb7\udf1d-\udf1f\udf22-\udf25\udf27-\udf2b]|\ud806[\udc2f-\udc37\udc39\udc3a\udd3b\udd3c\udd3e\udd43\uddd4-\uddd7\uddda\udddb\udde0\ude01-\ude0a\ude33-\ude38\ude3b-\ude3e\ude47\ude51-\ude56\ude59-\ude5b\ude8a-\ude96\ude98\ude99]|\ud807[\udc30-\udc36\udc38-\udc3d\udc3f\udc92-\udca7\udcaa-\udcb0\udcb2\udcb3\udcb5\udcb6\udd31-\udd36\udd3a\udd3c\udd3d\udd3f-\udd45\udd47\udd90\udd91\udd95\udd97\udef3\udef4]|\ud81a[\udef0-\udef4\udf30-\udf36]|\ud81b[\udf4f\udf8f-\udf92\udfe4]|\ud82f[\udc9d\udc9e]|\ud834[\udd67-\udd69\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud836[\ude00-\ude36\ude3b-\ude6c\ude75\ude84\ude9b-\ude9f\udea1-\udeaf]|\ud838[\udc00-\udc06\udc08-\udc18\udc1b-\udc21\udc23\udc24\udc26-\udc2a\udd30-\udd36\udeec-\udeef]|\ud83a[\udcd0-\udcd6\udd44-\udd4a]|\udb40[\udd00-\uddef]"},{name:"N",alias:"Number",bmp:"0-9²³¹¼-¾٠-٩۰-۹߀-߉०-९০-৯৴-৹੦-੯૦-૯୦-୯୲-୷௦-௲౦-౯౸-౾೦-೯൘-൞൦-൸෦-෯๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ០-៩៰-៹᠐-᠙᥆-᥏᧐-᧚᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙⁰⁴-⁹₀-₉⅐-ↂↅ-↉①-⒛⓪-⓿❶-➓⳽〇〡-〩〸-〺㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꛦ-ꛯ꠰-꠵꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９",astral:"\ud800[\udd07-\udd33\udd40-\udd78\udd8a\udd8b\udee1-\udefb\udf20-\udf23\udf41\udf4a\udfd1-\udfd5]|\ud801[\udca0-\udca9]|\ud802[\udc58-\udc5f\udc79-\udc7f\udca7-\udcaf\udcfb-\udcff\udd16-\udd1b\uddbc\uddbd\uddc0-\uddcf\uddd2-\uddff\ude40-\ude48\ude7d\ude7e\ude9d-\ude9f\udeeb-\udeef\udf58-\udf5f\udf78-\udf7f\udfa9-\udfaf]|\ud803[\udcfa-\udcff\udd30-\udd39\ude60-\ude7e\udf1d-\udf26\udf51-\udf54\udfc5-\udfcb]|\ud804[\udc52-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udde1-\uddf4\udef0-\udef9]|\ud805[\udc50-\udc59\udcd0-\udcd9\ude50-\ude59\udec0-\udec9\udf30-\udf3b]|\ud806[\udce0-\udcf2\udd50-\udd59]|\ud807[\udc50-\udc6c\udd50-\udd59\udda0-\udda9\udfc0-\udfd4]|\ud809[\udc00-\udc6e]|\ud81a[\ude60-\ude69\udf50-\udf59\udf5b-\udf61]|\ud81b[\ude80-\ude96]|\ud834[\udee0-\udef3\udf60-\udf78]|\ud835[\udfce-\udfff]|\ud838[\udd40-\udd49\udef0-\udef9]|\ud83a[\udcc7-\udccf\udd50-\udd59]|\ud83b[\udc71-\udcab\udcad-\udcaf\udcb1-\udcb4\udd01-\udd2d\udd2f-\udd3d]|\ud83c[\udd00-\udd0c]|\ud83e[\udff0-\udff9]"},{name:"Nd",alias:"Decimal_Number",bmp:"0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯෦-෯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９",astral:"\ud801[\udca0-\udca9]|\ud803[\udd30-\udd39]|\ud804[\udc66-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udef0-\udef9]|\ud805[\udc50-\udc59\udcd0-\udcd9\ude50-\ude59\udec0-\udec9\udf30-\udf39]|\ud806[\udce0-\udce9\udd50-\udd59]|\ud807[\udc50-\udc59\udd50-\udd59\udda0-\udda9]|\ud81a[\ude60-\ude69\udf50-\udf59]|\ud835[\udfce-\udfff]|\ud838[\udd40-\udd49\udef0-\udef9]|\ud83a[\udd50-\udd59]|\ud83e[\udff0-\udff9]"},{name:"Nl",alias:"Letter_Number",bmp:"ᛮ-ᛰⅠ-ↂↅ-ↈ〇〡-〩〸-〺ꛦ-ꛯ",astral:"\ud800[\udd40-\udd74\udf41\udf4a\udfd1-\udfd5]|\ud809[\udc00-\udc6e]"},{name:"No",alias:"Other_Number",bmp:"²³¹¼-¾৴-৹୲-୷௰-௲౸-౾൘-൞൰-൸༪-༳፩-፼៰-៹᧚⁰⁴-⁹₀-₉⅐-⅟↉①-⒛⓪-⓿❶-➓⳽㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꠰-꠵",astral:"\ud800[\udd07-\udd33\udd75-\udd78\udd8a\udd8b\udee1-\udefb\udf20-\udf23]|\ud802[\udc58-\udc5f\udc79-\udc7f\udca7-\udcaf\udcfb-\udcff\udd16-\udd1b\uddbc\uddbd\uddc0-\uddcf\uddd2-\uddff\ude40-\ude48\ude7d\ude7e\ude9d-\ude9f\udeeb-\udeef\udf58-\udf5f\udf78-\udf7f\udfa9-\udfaf]|\ud803[\udcfa-\udcff\ude60-\ude7e\udf1d-\udf26\udf51-\udf54\udfc5-\udfcb]|\ud804[\udc52-\udc65\udde1-\uddf4]|\ud805[\udf3a\udf3b]|\ud806[\udcea-\udcf2]|\ud807[\udc5a-\udc6c\udfc0-\udfd4]|\ud81a[\udf5b-\udf61]|\ud81b[\ude80-\ude96]|\ud834[\udee0-\udef3\udf60-\udf78]|\ud83a[\udcc7-\udccf]|\ud83b[\udc71-\udcab\udcad-\udcaf\udcb1-\udcb4\udd01-\udd2d\udd2f-\udd3d]|\ud83c[\udd00-\udd0c]"},{name:"P",alias:"Punctuation",bmp:"!-#%-\\*,-\\/:;\\?@\\[-\\]_\\{\\}¡§«¶·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰৽੶૰౷಄෴๏๚๛༄-༒༔༺-༽྅࿐-࿔࿙࿚၊-၏჻፠-፨᐀᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳀-᳇᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎⌈-⌋〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰-⹏⹒、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꣼꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꫰꫱꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･",astral:"\ud800[\udd00-\udd02\udf9f\udfd0]|𐕯|\ud802[\udc57\udd1f\udd3f\ude50-\ude58\ude7f\udef0-\udef6\udf39-\udf3f\udf99-\udf9c]|\ud803[\udead\udf55-\udf59]|\ud804[\udc47-\udc4d\udcbb\udcbc\udcbe-\udcc1\udd40-\udd43\udd74\udd75\uddc5-\uddc8\uddcd\udddb\udddd-\udddf\ude38-\ude3d\udea9]|\ud805[\udc4b-\udc4f\udc5a\udc5b\udc5d\udcc6\uddc1-\uddd7\ude41-\ude43\ude60-\ude6c\udf3c-\udf3e]|\ud806[\udc3b\udd44-\udd46\udde2\ude3f-\ude46\ude9a-\ude9c\ude9e-\udea2]|\ud807[\udc41-\udc45\udc70\udc71\udef7\udef8\udfff]|\ud809[\udc70-\udc74]|\ud81a[\ude6e\ude6f\udef5\udf37-\udf3b\udf44]|\ud81b[\ude97-\ude9a\udfe2]|𛲟|\ud836[\ude87-\ude8b]|\ud83a[\udd5e\udd5f]"},{name:"Pc",alias:"Connector_Punctuation",bmp:"_‿⁀⁔︳︴﹍-﹏＿"},{name:"Pd",alias:"Dash_Punctuation",bmp:"\\-֊־᐀᠆‐-―⸗⸚⸺⸻⹀〜〰゠︱︲﹘﹣－",astral:"𐺭"},{name:"Pe",alias:"Close_Punctuation",bmp:"\\)\\]\\}༻༽᚜⁆⁾₎⌉⌋〉❩❫❭❯❱❳❵⟆⟧⟩⟫⟭⟯⦄⦆⦈⦊⦌⦎⦐⦒⦔⦖⦘⧙⧛⧽⸣⸥⸧⸩〉》」』】〕〗〙〛〞〟﴾︘︶︸︺︼︾﹀﹂﹄﹈﹚﹜﹞）］｝｠｣"},{name:"Pf",alias:"Final_Punctuation",bmp:"»’”›⸃⸅⸊⸍⸝⸡"},{name:"Pi",alias:"Initial_Punctuation",bmp:"«‘‛“‟‹⸂⸄⸉⸌⸜⸠"},{name:"Po",alias:"Other_Punctuation",bmp:"!-#%-'\\*,\\.\\/:;\\?@\\¡§¶·¿;·՚-՟։׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰৽੶૰౷಄෴๏๚๛༄-༒༔྅࿐-࿔࿙࿚၊-၏჻፠-፨᙮᛫-᛭᜵᜶។-៖៘-៚᠀-᠅᠇-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳀-᳇᳓‖‗†-‧‰-‸※-‾⁁-⁃⁇-⁑⁓⁕-⁞⳹-⳼⳾⳿⵰⸀⸁⸆-⸈⸋⸎-⸖⸘⸙⸛⸞⸟⸪-⸮⸰-⸹⸼-⸿⹁⹃-⹏⹒、-〃〽・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꣼꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꫰꫱꯫︐-︖︙︰﹅﹆﹉-﹌﹐-﹒﹔-﹗﹟-﹡﹨﹪﹫！-＃％-＇＊，．／：；？＠＼｡､･",astral:"\ud800[\udd00-\udd02\udf9f\udfd0]|𐕯|\ud802[\udc57\udd1f\udd3f\ude50-\ude58\ude7f\udef0-\udef6\udf39-\udf3f\udf99-\udf9c]|\ud803[\udf55-\udf59]|\ud804[\udc47-\udc4d\udcbb\udcbc\udcbe-\udcc1\udd40-\udd43\udd74\udd75\uddc5-\uddc8\uddcd\udddb\udddd-\udddf\ude38-\ude3d\udea9]|\ud805[\udc4b-\udc4f\udc5a\udc5b\udc5d\udcc6\uddc1-\uddd7\ude41-\ude43\ude60-\ude6c\udf3c-\udf3e]|\ud806[\udc3b\udd44-\udd46\udde2\ude3f-\ude46\ude9a-\ude9c\ude9e-\udea2]|\ud807[\udc41-\udc45\udc70\udc71\udef7\udef8\udfff]|\ud809[\udc70-\udc74]|\ud81a[\ude6e\ude6f\udef5\udf37-\udf3b\udf44]|\ud81b[\ude97-\ude9a\udfe2]|𛲟|\ud836[\ude87-\ude8b]|\ud83a[\udd5e\udd5f]"},{name:"Ps",alias:"Open_Punctuation",bmp:"\\(\\[\\{༺༼᚛‚„⁅⁽₍⌈⌊〈❨❪❬❮❰❲❴⟅⟦⟨⟪⟬⟮⦃⦅⦇⦉⦋⦍⦏⦑⦓⦕⦗⧘⧚⧼⸢⸤⸦⸨⹂〈《「『【〔〖〘〚〝﴿︗︵︷︹︻︽︿﹁﹃﹇﹙﹛﹝（［｛｟｢"},{name:"S",alias:"Symbol",bmp:"\\$\\+<->\\^`\\|~¢-¦¨©¬®-±´¸×÷˂-˅˒-˟˥-˫˭˯-˿͵΄΅϶҂֍-֏؆-؈؋؎؏۞۩۽۾߶߾߿৲৳৺৻૱୰௳-௺౿൏൹฿༁-༃༓༕-༗༚-༟༴༶༸྾-࿅࿇-࿌࿎࿏࿕-࿘႞႟᎐-᎙᙭៛᥀᧞-᧿᭡-᭪᭴-᭼᾽᾿-῁῍-῏῝-῟῭-`´῾⁄⁒⁺-⁼₊-₌₠-₿℀℁℃-℆℈℉℔№-℘℞-℣℥℧℩℮℺℻⅀-⅄⅊-⅍⅏↊↋←-⌇⌌-⌨⌫-␦⑀-⑊⒜-ⓩ─-❧➔-⟄⟇-⟥⟰-⦂⦙-⧗⧜-⧻⧾-⭳⭶-⮕⮗-⯿⳥-⳪⹐⹑⺀-⺙⺛-⻳⼀-⿕⿰-⿻〄〒〓〠〶〷〾〿゛゜㆐㆑㆖-㆟㇀-㇣㈀-㈞㈪-㉇㉐㉠-㉿㊊-㊰㋀-㏿䷀-䷿꒐-꓆꜀-꜖꜠꜡꞉꞊꠨-꠫꠶-꠹꩷-꩹꭛꭪꭫﬩﮲-﯁﷼﷽﹢﹤-﹦﹩＄＋＜-＞＾｀｜～￠-￦￨-￮￼�",astral:"\ud800[\udd37-\udd3f\udd79-\udd89\udd8c-\udd8e\udd90-\udd9c\udda0\uddd0-\uddfc]|\ud802[\udc77\udc78\udec8]|𑜿|\ud807[\udfd5-\udff1]|\ud81a[\udf3c-\udf3f\udf45]|𛲜|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd64\udd6a-\udd6c\udd83\udd84\udd8c-\udda9\uddae-\udde8\ude00-\ude41\ude45\udf00-\udf56]|\ud835[\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3]|\ud836[\udc00-\uddff\ude37-\ude3a\ude6d-\ude74\ude76-\ude83\ude85\ude86]|\ud838[\udd4f\udeff]|\ud83b[\udcac\udcb0\udd2e\udef0\udef1]|\ud83c[\udc00-\udc2b\udc30-\udc93\udca0-\udcae\udcb1-\udcbf\udcc1-\udccf\udcd1-\udcf5\udd0d-\uddad\udde6-\ude02\ude10-\ude3b\ude40-\ude48\ude50\ude51\ude60-\ude65\udf00-\udfff]|\ud83d[\udc00-\uded7\udee0-\udeec\udef0-\udefc\udf00-\udf73\udf80-\udfd8\udfe0-\udfeb]|\ud83e[\udc00-\udc0b\udc10-\udc47\udc50-\udc59\udc60-\udc87\udc90-\udcad\udcb0\udcb1\udd00-\udd78\udd7a-\uddcb\uddcd-\ude53\ude60-\ude6d\ude70-\ude74\ude78-\ude7a\ude80-\ude86\ude90-\udea8\udeb0-\udeb6\udec0-\udec2\uded0-\uded6\udf00-\udf92\udf94-\udfca]"},{name:"Sc",alias:"Currency_Symbol",bmp:"\\$¢-¥֏؋߾߿৲৳৻૱௹฿៛₠-₿꠸﷼﹩＄￠￡￥￦",astral:"\ud807[\udfdd-\udfe0]|𞋿|𞲰"},{name:"Sk",alias:"Modifier_Symbol",bmp:"\\^`¨¯´¸˂-˅˒-˟˥-˫˭˯-˿͵΄΅᾽᾿-῁῍-῏῝-῟῭-`´῾゛゜꜀-꜖꜠꜡꞉꞊꭛꭪꭫﮲-﯁＾｀￣",astral:"\ud83c[\udffb-\udfff]"},{name:"Sm",alias:"Math_Symbol",bmp:"\\+<->\\|~¬±×÷϶؆-؈⁄⁒⁺-⁼₊-₌℘⅀-⅄⅋←-↔↚↛↠↣↦↮⇎⇏⇒⇔⇴-⋿⌠⌡⍼⎛-⎳⏜-⏡▷◁◸-◿♯⟀-⟄⟇-⟥⟰-⟿⤀-⦂⦙-⧗⧜-⧻⧾-⫿⬰-⭄⭇-⭌﬩﹢﹤-﹦＋＜-＞｜～￢￩-￬",astral:"\ud835[\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3]|\ud83b[\udef0\udef1]"},{name:"So",alias:"Other_Symbol",bmp:"¦©®°҂֍֎؎؏۞۩۽۾߶৺୰௳-௸௺౿൏൹༁-༃༓༕-༗༚-༟༴༶༸྾-࿅࿇-࿌࿎࿏࿕-࿘႞႟᎐-᎙᙭᥀᧞-᧿᭡-᭪᭴-᭼℀℁℃-℆℈℉℔№℗℞-℣℥℧℩℮℺℻⅊⅌⅍⅏↊↋↕-↙↜-↟↡↢↤↥↧-↭↯-⇍⇐⇑⇓⇕-⇳⌀-⌇⌌-⌟⌢-⌨⌫-⍻⍽-⎚⎴-⏛⏢-␦⑀-⑊⒜-ⓩ─-▶▸-◀◂-◷☀-♮♰-❧➔-➿⠀-⣿⬀-⬯⭅⭆⭍-⭳⭶-⮕⮗-⯿⳥-⳪⹐⹑⺀-⺙⺛-⻳⼀-⿕⿰-⿻〄〒〓〠〶〷〾〿㆐㆑㆖-㆟㇀-㇣㈀-㈞㈪-㉇㉐㉠-㉿㊊-㊰㋀-㏿䷀-䷿꒐-꓆꠨-꠫꠶꠷꠹꩷-꩹﷽￤￨￭￮￼�",astral:"\ud800[\udd37-\udd3f\udd79-\udd89\udd8c-\udd8e\udd90-\udd9c\udda0\uddd0-\uddfc]|\ud802[\udc77\udc78\udec8]|𑜿|\ud807[\udfd5-\udfdc\udfe1-\udff1]|\ud81a[\udf3c-\udf3f\udf45]|𛲜|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd64\udd6a-\udd6c\udd83\udd84\udd8c-\udda9\uddae-\udde8\ude00-\ude41\ude45\udf00-\udf56]|\ud836[\udc00-\uddff\ude37-\ude3a\ude6d-\ude74\ude76-\ude83\ude85\ude86]|𞅏|\ud83b[\udcac\udd2e]|\ud83c[\udc00-\udc2b\udc30-\udc93\udca0-\udcae\udcb1-\udcbf\udcc1-\udccf\udcd1-\udcf5\udd0d-\uddad\udde6-\ude02\ude10-\ude3b\ude40-\ude48\ude50\ude51\ude60-\ude65\udf00-\udffa]|\ud83d[\udc00-\uded7\udee0-\udeec\udef0-\udefc\udf00-\udf73\udf80-\udfd8\udfe0-\udfeb]|\ud83e[\udc00-\udc0b\udc10-\udc47\udc50-\udc59\udc60-\udc87\udc90-\udcad\udcb0\udcb1\udd00-\udd78\udd7a-\uddcb\uddcd-\ude53\ude60-\ude6d\ude70-\ude74\ude78-\ude7a\ude80-\ude86\ude90-\udea8\udeb0-\udeb6\udec0-\udec2\uded0-\uded6\udf00-\udf92\udf94-\udfca]"},{name:"Z",alias:"Separator",bmp:"    - \u2028\u2029  　"},{name:"Zl",alias:"Line_Separator",bmp:"\u2028"},{name:"Zp",alias:"Paragraph_Separator",bmp:"\u2029"},{name:"Zs",alias:"Space_Separator",bmp:"    -   　"}],cO=eh((function(t,e){uE(e,"__esModule",{value:!0}),e.default=void 0;var n=jx(uO);
/*!
     * XRegExp Unicode Categories 4.4.1
     * <xregexp.com>
     * Steven Levithan (c) 2010-present MIT License
     * Unicode data by Mathias Bynens <mathiasbynens.be>
     */e.default=function(t){if(!t.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");t.addUnicodeData(n.default)},t.exports=e.default})),hO=[{name:"ASCII",bmp:"\0-"},{name:"Alphabetic",bmp:"A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͅͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈְ-ׇֽֿׁׂׅׄא-תׯ-ײؐ-ؚؠ-ٗٙ-ٟٮ-ۓە-ۜۡ-ۭۨ-ۯۺ-ۼۿܐ-ܿݍ-ޱߊ-ߪߴߵߺࠀ-ࠗࠚ-ࠬࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࣇࣔ-ࣣࣟ-ࣰࣩ-ऻऽ-ौॎ-ॐॕ-ॣॱ-ঃঅ-ঌএঐও-নপ-রলশ-হঽ-ৄেৈোৌৎৗড়ঢ়য়-ৣৰৱৼਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਾ-ੂੇੈੋੌੑਖ਼-ੜਫ਼ੰ-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽ-ૅે-ૉોૌૐૠ-ૣૹ-ૼଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽ-ୄେୈୋୌୖୗଡ଼ଢ଼ୟ-ୣୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-ௌௐௗఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-ౌౕౖౘ-ౚౠ-ౣಀ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽ-ೄೆ-ೈೊ-ೌೕೖೞೠ-ೣೱೲഀ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൌൎൔ-ൗൟ-ൣൺ-ൿඁ-ඃඅ-ඖක-නඳ-රලව-ෆා-ුූෘ-ෟෲෳก-ฺเ-ๆํກຂຄຆ-ຊຌ-ຣລວ-ູົ-ຽເ-ໄໆໍໜ-ໟༀཀ-ཇཉ-ཬཱ-ཱྀྈ-ྗྙ-ྼက-ံးျ-ဿၐ-ႏႚ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜓᜠ-ᜳᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-ឳា-ៈៗៜᠠ-ᡸᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-ᤸᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨛᨠ-ᩞᩡ-ᩴᪧᪿᫀᬀ-ᬳᬵ-ᭃᭅ-ᭋᮀ-ᮩᮬ-ᮯᮺ-ᯥᯧ-ᯱᰀ-ᰶᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿᷧ-ᷴḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-鿼ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙴ-ꙻꙿ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-ꟊꟵ-ꠅꠇ-ꠧꡀ-ꡳꢀ-ꣃꣅꣲ-ꣷꣻꣽ-ꣿꤊ-ꤪꤰ-ꥒꥠ-ꥼꦀ-ꦲꦴ-ꦿꧏꧠ-ꧯꧺ-ꧾꨀ-ꨶꩀ-ꩍꩠ-ꩶꩺ-ꪾꫀꫂꫛ-ꫝꫠ-ꫯꫲ-ꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯪ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",astral:"\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd40-\udd74\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf2d-\udf4a\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00-\ude03\ude05\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude35\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udd00-\udd27\ude80-\udea9\udeab\udeac\udeb0\udeb1\udf00-\udf1c\udf27\udf30-\udf45\udfb0-\udfc4\udfe0-\udff6]|\ud804[\udc00-\udc45\udc82-\udcb8\udcd0-\udce8\udd00-\udd32\udd44-\udd47\udd50-\udd72\udd76\udd80-\uddbf\uddc1-\uddc4\uddce\uddcf\uddda\udddc\ude00-\ude11\ude13-\ude34\ude37\ude3e\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udee8\udf00-\udf03\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3d-\udf44\udf47\udf48\udf4b\udf4c\udf50\udf57\udf5d-\udf63]|\ud805[\udc00-\udc41\udc43-\udc45\udc47-\udc4a\udc5f-\udc61\udc80-\udcc1\udcc4\udcc5\udcc7\udd80-\uddb5\uddb8-\uddbe\uddd8-\udddd\ude00-\ude3e\ude40\ude44\ude80-\udeb5\udeb8\udf00-\udf1a\udf1d-\udf2a]|\ud806[\udc00-\udc38\udca0-\udcdf\udcff-\udd06\udd09\udd0c-\udd13\udd15\udd16\udd18-\udd35\udd37\udd38\udd3b\udd3c\udd3f-\udd42\udda0-\udda7\uddaa-\uddd7\uddda-\udddf\udde1\udde3\udde4\ude00-\ude32\ude35-\ude3e\ude50-\ude97\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc36\udc38-\udc3e\udc40\udc72-\udc8f\udc92-\udca7\udca9-\udcb6\udd00-\udd06\udd08\udd09\udd0b-\udd36\udd3a\udd3c\udd3d\udd3f-\udd41\udd43\udd46\udd47\udd60-\udd65\udd67\udd68\udd6a-\udd8e\udd90\udd91\udd93-\udd96\udd98\udee0-\udef6\udfb0]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|[\ud80c\ud81c-\ud820\ud822\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872\ud874-\ud879\ud880-\ud883][\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\ude40-\ude7f\udf00-\udf4a\udf4f-\udf87\udf8f-\udf9f\udfe0\udfe1\udfe3\udff0\udff1]|\ud821[\udc00-\udff7]|\ud823[\udc00-\udcd5\udd00-\udd08]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9e]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud838[\udc00-\udc06\udc08-\udc18\udc1b-\udc21\udc23\udc24\udc26-\udc2a\udd00-\udd2c\udd37-\udd3d\udd4e\udec0-\udeeb]|\ud83a[\udc00-\udcc4\udd00-\udd43\udd47\udd4b]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud83c[\udd30-\udd49\udd50-\udd69\udd70-\udd89]|\ud869[\udc00-\udedd\udf00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d]|\ud884[\udc00-\udf4a]"},{name:"Any",isBmpLast:!0,bmp:"\0-￿",astral:"[\ud800-\udbff][\udc00-\udfff]"},{name:"Default_Ignorable_Code_Point",bmp:"­͏؜ᅟᅠ឴឵᠋-᠎​-‏‪-‮⁠-⁯ㅤ︀-️\ufeffﾠ￰-￸",astral:"\ud82f[\udca0-\udca3]|\ud834[\udd73-\udd7a]|[\udb40-\udb43][\udc00-\udfff]"},{name:"Lowercase",bmp:"a-zªµºß-öø-ÿāăąćĉċčďđēĕėęěĝğġģĥħĩīĭįıĳĵķĸĺļľŀłńņňŉŋōŏőœŕŗřśŝşšţťŧũūŭůűųŵŷźżž-ƀƃƅƈƌƍƒƕƙ-ƛƞơƣƥƨƪƫƭưƴƶƹƺƽ-ƿǆǉǌǎǐǒǔǖǘǚǜǝǟǡǣǥǧǩǫǭǯǰǳǵǹǻǽǿȁȃȅȇȉȋȍȏȑȓȕȗșțȝȟȡȣȥȧȩȫȭȯȱȳ-ȹȼȿɀɂɇɉɋɍɏ-ʓʕ-ʸˀˁˠ-ˤͅͱͳͷͺ-ͽΐά-ώϐϑϕ-ϗϙϛϝϟϡϣϥϧϩϫϭϯ-ϳϵϸϻϼа-џѡѣѥѧѩѫѭѯѱѳѵѷѹѻѽѿҁҋҍҏґғҕҗҙқҝҟҡңҥҧҩҫҭүұҳҵҷҹһҽҿӂӄӆӈӊӌӎӏӑӓӕӗәӛӝӟӡӣӥӧөӫӭӯӱӳӵӷӹӻӽӿԁԃԅԇԉԋԍԏԑԓԕԗԙԛԝԟԡԣԥԧԩԫԭԯՠ-ֈა-ჺჽ-ჿᏸ-ᏽᲀ-ᲈᴀ-ᶿḁḃḅḇḉḋḍḏḑḓḕḗḙḛḝḟḡḣḥḧḩḫḭḯḱḳḵḷḹḻḽḿṁṃṅṇṉṋṍṏṑṓṕṗṙṛṝṟṡṣṥṧṩṫṭṯṱṳṵṷṹṻṽṿẁẃẅẇẉẋẍẏẑẓẕ-ẝẟạảấầẩẫậắằẳẵặẹẻẽếềểễệỉịọỏốồổỗộớờởỡợụủứừửữựỳỵỷỹỻỽỿ-ἇἐ-ἕἠ-ἧἰ-ἷὀ-ὅὐ-ὗὠ-ὧὰ-ώᾀ-ᾇᾐ-ᾗᾠ-ᾧᾰ-ᾴᾶᾷιῂ-ῄῆῇῐ-ΐῖῗῠ-ῧῲ-ῴῶῷⁱⁿₐ-ₜℊℎℏℓℯℴℹℼℽⅆ-ⅉⅎⅰ-ⅿↄⓐ-ⓩⰰ-ⱞⱡⱥⱦⱨⱪⱬⱱⱳⱴⱶ-ⱽⲁⲃⲅⲇⲉⲋⲍⲏⲑⲓⲕⲗⲙⲛⲝⲟⲡⲣⲥⲧⲩⲫⲭⲯⲱⲳⲵⲷⲹⲻⲽⲿⳁⳃⳅⳇⳉⳋⳍⳏⳑⳓⳕⳗⳙⳛⳝⳟⳡⳣⳤⳬⳮⳳⴀ-ⴥⴧⴭꙁꙃꙅꙇꙉꙋꙍꙏꙑꙓꙕꙗꙙꙛꙝꙟꙡꙣꙥꙧꙩꙫꙭꚁꚃꚅꚇꚉꚋꚍꚏꚑꚓꚕꚗꚙꚛ-ꚝꜣꜥꜧꜩꜫꜭꜯ-ꜱꜳꜵꜷꜹꜻꜽꜿꝁꝃꝅꝇꝉꝋꝍꝏꝑꝓꝕꝗꝙꝛꝝꝟꝡꝣꝥꝧꝩꝫꝭꝯ-ꝸꝺꝼꝿꞁꞃꞅꞇꞌꞎꞑꞓ-ꞕꞗꞙꞛꞝꞟꞡꞣꞥꞧꞩꞯꞵꞷꞹꞻꞽꞿꟃꟈꟊꟶꟸ-ꟺꬰ-ꭚꭜ-ꭨꭰ-ꮿﬀ-ﬆﬓ-ﬗａ-ｚ",astral:"\ud801[\udc28-\udc4f\udcd8-\udcfb]|\ud803[\udcc0-\udcf2]|\ud806[\udcc0-\udcdf]|\ud81b[\ude60-\ude7f]|\ud835[\udc1a-\udc33\udc4e-\udc54\udc56-\udc67\udc82-\udc9b\udcb6-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udccf\udcea-\udd03\udd1e-\udd37\udd52-\udd6b\udd86-\udd9f\uddba-\uddd3\uddee-\ude07\ude22-\ude3b\ude56-\ude6f\ude8a-\udea5\udec2-\udeda\udedc-\udee1\udefc-\udf14\udf16-\udf1b\udf36-\udf4e\udf50-\udf55\udf70-\udf88\udf8a-\udf8f\udfaa-\udfc2\udfc4-\udfc9\udfcb]|\ud83a[\udd22-\udd43]"},{name:"Noncharacter_Code_Point",bmp:"﷐-﷯￾￿",astral:"[\ud83f\ud87f\ud8bf\ud8ff\ud93f\ud97f\ud9bf\ud9ff\uda3f\uda7f\udabf\udaff\udb3f\udb7f\udbbf\udbff][\udffe\udfff]"},{name:"Uppercase",bmp:"A-ZÀ-ÖØ-ÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸŹŻŽƁƂƄƆƇƉ-ƋƎ-ƑƓƔƖ-ƘƜƝƟƠƢƤƦƧƩƬƮƯƱ-ƳƵƷƸƼǄǇǊǍǏǑǓǕǗǙǛǞǠǢǤǦǨǪǬǮǱǴǶ-ǸǺǼǾȀȂȄȆȈȊȌȎȐȒȔȖȘȚȜȞȠȢȤȦȨȪȬȮȰȲȺȻȽȾɁɃ-ɆɈɊɌɎͰͲͶͿΆΈ-ΊΌΎΏΑ-ΡΣ-ΫϏϒ-ϔϘϚϜϞϠϢϤϦϨϪϬϮϴϷϹϺϽ-ЯѠѢѤѦѨѪѬѮѰѲѴѶѸѺѼѾҀҊҌҎҐҒҔҖҘҚҜҞҠҢҤҦҨҪҬҮҰҲҴҶҸҺҼҾӀӁӃӅӇӉӋӍӐӒӔӖӘӚӜӞӠӢӤӦӨӪӬӮӰӲӴӶӸӺӼӾԀԂԄԆԈԊԌԎԐԒԔԖԘԚԜԞԠԢԤԦԨԪԬԮԱ-ՖႠ-ჅჇჍᎠ-ᏵᲐ-ᲺᲽ-ᲿḀḂḄḆḈḊḌḎḐḒḔḖḘḚḜḞḠḢḤḦḨḪḬḮḰḲḴḶḸḺḼḾṀṂṄṆṈṊṌṎṐṒṔṖṘṚṜṞṠṢṤṦṨṪṬṮṰṲṴṶṸṺṼṾẀẂẄẆẈẊẌẎẐẒẔẞẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼẾỀỂỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪỬỮỰỲỴỶỸỺỼỾἈ-ἏἘ-ἝἨ-ἯἸ-ἿὈ-ὍὙὛὝὟὨ-ὯᾸ-ΆῈ-ΉῘ-ΊῨ-ῬῸ-Ώℂℇℋ-ℍℐ-ℒℕℙ-ℝℤΩℨK-ℭℰ-ℳℾℿⅅⅠ-ⅯↃⒶ-ⓏⰀ-ⰮⱠⱢ-ⱤⱧⱩⱫⱭ-ⱰⱲⱵⱾ-ⲀⲂⲄⲆⲈⲊⲌⲎⲐⲒⲔⲖⲘⲚⲜⲞⲠⲢⲤⲦⲨⲪⲬⲮⲰⲲⲴⲶⲸⲺⲼⲾⳀⳂⳄⳆⳈⳊⳌⳎⳐⳒⳔⳖⳘⳚⳜⳞⳠⳢⳫⳭⳲꙀꙂꙄꙆꙈꙊꙌꙎꙐꙒꙔꙖꙘꙚꙜꙞꙠꙢꙤꙦꙨꙪꙬꚀꚂꚄꚆꚈꚊꚌꚎꚐꚒꚔꚖꚘꚚꜢꜤꜦꜨꜪꜬꜮꜲꜴꜶꜸꜺꜼꜾꝀꝂꝄꝆꝈꝊꝌꝎꝐꝒꝔꝖꝘꝚꝜꝞꝠꝢꝤꝦꝨꝪꝬꝮꝹꝻꝽꝾꞀꞂꞄꞆꞋꞍꞐꞒꞖꞘꞚꞜꞞꞠꞢꞤꞦꞨꞪ-ꞮꞰ-ꞴꞶꞸꞺꞼꞾꟂꟄ-ꟇꟉꟵＡ-Ｚ",astral:"\ud801[\udc00-\udc27\udcb0-\udcd3]|\ud803[\udc80-\udcb2]|\ud806[\udca0-\udcbf]|\ud81b[\ude40-\ude5f]|\ud835[\udc00-\udc19\udc34-\udc4d\udc68-\udc81\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb5\udcd0-\udce9\udd04\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd38\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd6c-\udd85\udda0-\uddb9\uddd4-\udded\ude08-\ude21\ude3c-\ude55\ude70-\ude89\udea8-\udec0\udee2-\udefa\udf1c-\udf34\udf56-\udf6e\udf90-\udfa8\udfca]|\ud83a[\udd00-\udd21]|\ud83c[\udd30-\udd49\udd50-\udd69\udd70-\udd89]"},{name:"White_Space",bmp:"\t-\r    - \u2028\u2029  　"}],pO=eh((function(t,e){uE(e,"__esModule",{value:!0}),e.default=void 0;var n=jx(hO);
/*!
     * XRegExp Unicode Properties 4.4.1
     * <xregexp.com>
     * Steven Levithan (c) 2012-present MIT License
     * Unicode data by Mathias Bynens <mathiasbynens.be>
     */e.default=function(t){if(!t.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Properties");var e=n.default;e.push({name:"Assigned",inverseOf:"Cn"}),t.addUnicodeData(e)},t.exports=e.default})),dO=[{name:"Adlam",astral:"\ud83a[\udd00-\udd4b\udd50-\udd59\udd5e\udd5f]"},{name:"Ahom",astral:"\ud805[\udf00-\udf1a\udf1d-\udf2b\udf30-\udf3f]"},{name:"Anatolian_Hieroglyphs",astral:"\ud811[\udc00-\ude46]"},{name:"Arabic",bmp:"؀-؄؆-؋؍-ؚ؜؞ؠ-ؿف-يٖ-ٯٱ-ۜ۞-ۿݐ-ݿࢠ-ࢴࢶ-ࣇ࣓-ࣣ࣡-ࣿﭐ-﯁ﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷽ﹰ-ﹴﹶ-ﻼ",astral:"\ud803[\ude60-\ude7e]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb\udef0\udef1]"},{name:"Armenian",bmp:"Ա-Ֆՙ-֊֍-֏ﬓ-ﬗ"},{name:"Avestan",astral:"\ud802[\udf00-\udf35\udf39-\udf3f]"},{name:"Balinese",bmp:"ᬀ-ᭋ᭐-᭼"},{name:"Bamum",bmp:"ꚠ-꛷",astral:"\ud81a[\udc00-\ude38]"},{name:"Bassa_Vah",astral:"\ud81a[\uded0-\udeed\udef0-\udef5]"},{name:"Batak",bmp:"ᯀ-᯳᯼-᯿"},{name:"Bengali",bmp:"ঀ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-৾"},{name:"Bhaiksuki",astral:"\ud807[\udc00-\udc08\udc0a-\udc36\udc38-\udc45\udc50-\udc6c]"},{name:"Bopomofo",bmp:"˪˫ㄅ-ㄯㆠ-ㆿ"},{name:"Brahmi",astral:"\ud804[\udc00-\udc4d\udc52-\udc6f\udc7f]"},{name:"Braille",bmp:"⠀-⣿"},{name:"Buginese",bmp:"ᨀ-ᨛ᨞᨟"},{name:"Buhid",bmp:"ᝀ-ᝓ"},{name:"Canadian_Aboriginal",bmp:"᐀-ᙿᢰ-ᣵ"},{name:"Carian",astral:"\ud800[\udea0-\uded0]"},{name:"Caucasian_Albanian",astral:"\ud801[\udd30-\udd63\udd6f]"},{name:"Chakma",astral:"\ud804[\udd00-\udd34\udd36-\udd47]"},{name:"Cham",bmp:"ꨀ-ꨶꩀ-ꩍ꩐-꩙꩜-꩟"},{name:"Cherokee",bmp:"Ꭰ-Ᏽᏸ-ᏽꭰ-ꮿ"},{name:"Chorasmian",astral:"\ud803[\udfb0-\udfcb]"},{name:"Common",bmp:"\0-@\\[-`\\{-©«-¹»-¿×÷ʹ-˟˥-˩ˬ-˿ʹ;΅·؅،؛؟ـ۝࣢।॥฿࿕-࿘჻᛫-᛭᜵᜶᠂᠃᠅᳓᳡ᳩ-ᳬᳮ-ᳳᳵ-᳷ᳺ -​‎-⁤⁦-⁰⁴-⁾₀-₎₠-₿℀-℥℧-℩ℬ-ℱℳ-⅍⅏-⅟↉-↋←-␦⑀-⑊①-⟿⤀-⭳⭶-⮕⮗-⯿⸀-⹒⿰-⿻　-〄〆〈-〠〰-〷〼-〿゛゜゠・ー㆐-㆟㇀-㇣㈠-㉟㉿-㋏㋿㍘-㏿䷀-䷿꜀-꜡ꞈ-꞊꠰-꠹꤮ꧏ꭛꭪꭫﴾﴿︐-︙︰-﹒﹔-﹦﹨-﹫\ufeff！-＠［-｀｛-･ｰﾞﾟ￠-￦￨-￮￹-�",astral:"\ud800[\udd00-\udd02\udd07-\udd33\udd37-\udd3f\udd90-\udd9c\uddd0-\uddfc\udee1-\udefb]|\ud81b[\udfe2\udfe3]|\ud82f[\udca0-\udca3]|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd66\udd6a-\udd7a\udd83\udd84\udd8c-\udda9\uddae-\udde8\udee0-\udef3\udf00-\udf56\udf60-\udf78]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udfcb\udfce-\udfff]|\ud83b[\udc71-\udcb4\udd01-\udd3d]|\ud83c[\udc00-\udc2b\udc30-\udc93\udca0-\udcae\udcb1-\udcbf\udcc1-\udccf\udcd1-\udcf5\udd00-\uddad\udde6-\uddff\ude01\ude02\ude10-\ude3b\ude40-\ude48\ude50\ude51\ude60-\ude65\udf00-\udfff]|\ud83d[\udc00-\uded7\udee0-\udeec\udef0-\udefc\udf00-\udf73\udf80-\udfd8\udfe0-\udfeb]|\ud83e[\udc00-\udc0b\udc10-\udc47\udc50-\udc59\udc60-\udc87\udc90-\udcad\udcb0\udcb1\udd00-\udd78\udd7a-\uddcb\uddcd-\ude53\ude60-\ude6d\ude70-\ude74\ude78-\ude7a\ude80-\ude86\ude90-\udea8\udeb0-\udeb6\udec0-\udec2\uded0-\uded6\udf00-\udf92\udf94-\udfca\udff0-\udff9]|\udb40[\udc01\udc20-\udc7f]"},{name:"Coptic",bmp:"Ϣ-ϯⲀ-ⳳ⳹-⳿"},{name:"Cuneiform",astral:"\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc70-\udc74\udc80-\udd43]"},{name:"Cypriot",astral:"\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f]"},{name:"Cyrillic",bmp:"Ѐ-҄҇-ԯᲀ-ᲈᴫᵸⷠ-ⷿꙀ-ꚟ︮︯"},{name:"Deseret",astral:"\ud801[\udc00-\udc4f]"},{name:"Devanagari",bmp:"ऀ-ॐॕ-ॣ०-ॿ꣠-ꣿ"},{name:"Dives_Akuru",astral:"\ud806[\udd00-\udd06\udd09\udd0c-\udd13\udd15\udd16\udd18-\udd35\udd37\udd38\udd3b-\udd46\udd50-\udd59]"},{name:"Dogra",astral:"\ud806[\udc00-\udc3b]"},{name:"Duployan",astral:"\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9c-\udc9f]"},{name:"Egyptian_Hieroglyphs",astral:"\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e\udc30-\udc38]"},{name:"Elbasan",astral:"\ud801[\udd00-\udd27]"},{name:"Elymaic",astral:"\ud803[\udfe0-\udff6]"},{name:"Ethiopic",bmp:"ሀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፼ᎀ-᎙ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮ"},{name:"Georgian",bmp:"Ⴀ-ჅჇჍა-ჺჼ-ჿᲐ-ᲺᲽ-Ჿⴀ-ⴥⴧⴭ"},{name:"Glagolitic",bmp:"Ⰰ-Ⱞⰰ-ⱞ",astral:"\ud838[\udc00-\udc06\udc08-\udc18\udc1b-\udc21\udc23\udc24\udc26-\udc2a]"},{name:"Gothic",astral:"\ud800[\udf30-\udf4a]"},{name:"Grantha",astral:"\ud804[\udf00-\udf03\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3c-\udf44\udf47\udf48\udf4b-\udf4d\udf50\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]"},{name:"Greek",bmp:"Ͱ-ͳ͵-ͷͺ-ͽͿ΄ΆΈ-ΊΌΎ-ΡΣ-ϡϰ-Ͽᴦ-ᴪᵝ-ᵡᵦ-ᵪᶿἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ῄῆ-ΐῖ-Ί῝-`ῲ-ῴῶ-῾Ωꭥ",astral:"\ud800[\udd40-\udd8e\udda0]|\ud834[\ude00-\ude45]"},{name:"Gujarati",bmp:"ઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૱ૹ-૿"},{name:"Gunjala_Gondi",astral:"\ud807[\udd60-\udd65\udd67\udd68\udd6a-\udd8e\udd90\udd91\udd93-\udd98\udda0-\udda9]"},{name:"Gurmukhi",bmp:"ਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-੶"},{name:"Han",bmp:"⺀-⺙⺛-⻳⼀-⿕々〇〡-〩〸-〻㐀-䶿一-鿼豈-舘並-龎",astral:"\ud81b[\udff0\udff1]|[\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872\ud874-\ud879\ud880-\ud883][\udc00-\udfff]|\ud869[\udc00-\udedd\udf00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d]|\ud884[\udc00-\udf4a]"},{name:"Hangul",bmp:"ᄀ-ᇿ〮〯ㄱ-ㆎ㈀-㈞㉠-㉾ꥠ-ꥼ가-힣ힰ-ퟆퟋ-ퟻﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"},{name:"Hanifi_Rohingya",astral:"\ud803[\udd00-\udd27\udd30-\udd39]"},{name:"Hanunoo",bmp:"ᜠ-᜴"},{name:"Hatran",astral:"\ud802[\udce0-\udcf2\udcf4\udcf5\udcfb-\udcff]"},{name:"Hebrew",bmp:"֑-ׇא-תׯ-״יִ-זּטּ-לּמּנּסּףּפּצּ-ﭏ"},{name:"Hiragana",bmp:"ぁ-ゖゝ-ゟ",astral:"\ud82c[\udc01-\udd1e\udd50-\udd52]|🈀"},{name:"Imperial_Aramaic",astral:"\ud802[\udc40-\udc55\udc57-\udc5f]"},{name:"Inherited",bmp:"̀-ًͯ҅҆-ٰٕ॑-॔᪰-ᫀ᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸᳹᷀-᷹᷻-᷿‌‍⃐-〪⃰-゙゚〭︀-️︠-︭",astral:"\ud800[\uddfd\udee0]|𑌻|\ud834[\udd67-\udd69\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad]|\udb40[\udd00-\uddef]"},{name:"Inscriptional_Pahlavi",astral:"\ud802[\udf60-\udf72\udf78-\udf7f]"},{name:"Inscriptional_Parthian",astral:"\ud802[\udf40-\udf55\udf58-\udf5f]"},{name:"Javanese",bmp:"ꦀ-꧍꧐-꧙꧞꧟"},{name:"Kaithi",astral:"\ud804[\udc80-\udcc1\udccd]"},{name:"Kannada",bmp:"ಀ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲ"},{name:"Katakana",bmp:"ァ-ヺヽ-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ｯｱ-ﾝ",astral:"\ud82c[\udc00\udd64-\udd67]"},{name:"Kayah_Li",bmp:"꤀-꤭꤯"},{name:"Kharoshthi",astral:"\ud802[\ude00-\ude03\ude05\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude35\ude38-\ude3a\ude3f-\ude48\ude50-\ude58]"},{name:"Khitan_Small_Script",astral:"𖿤|\ud822[\udf00-\udfff]|\ud823[\udc00-\udcd5]"},{name:"Khmer",bmp:"ក-៝០-៩៰-៹᧠-᧿"},{name:"Khojki",astral:"\ud804[\ude00-\ude11\ude13-\ude3e]"},{name:"Khudawadi",astral:"\ud804[\udeb0-\udeea\udef0-\udef9]"},{name:"Lao",bmp:"ກຂຄຆ-ຊຌ-ຣລວ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟ"},{name:"Latin",bmp:"A-Za-zªºÀ-ÖØ-öø-ʸˠ-ˤᴀ-ᴥᴬ-ᵜᵢ-ᵥᵫ-ᵷᵹ-ᶾḀ-ỿⁱⁿₐ-ₜKÅℲⅎⅠ-ↈⱠ-ⱿꜢ-ꞇꞋ-ꞿꟂ-ꟊꟵ-ꟿꬰ-ꭚꭜ-ꭤꭦ-ꭩﬀ-ﬆＡ-Ｚａ-ｚ"},{name:"Lepcha",bmp:"ᰀ-᰷᰻-᱉ᱍ-ᱏ"},{name:"Limbu",bmp:"ᤀ-ᤞᤠ-ᤫᤰ-᤻᥀᥄-᥏"},{name:"Linear_A",astral:"\ud801[\ude00-\udf36\udf40-\udf55\udf60-\udf67]"},{name:"Linear_B",astral:"\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa]"},{name:"Lisu",bmp:"ꓐ-꓿",astral:"𑾰"},{name:"Lycian",astral:"\ud800[\ude80-\ude9c]"},{name:"Lydian",astral:"\ud802[\udd20-\udd39\udd3f]"},{name:"Mahajani",astral:"\ud804[\udd50-\udd76]"},{name:"Makasar",astral:"\ud807[\udee0-\udef8]"},{name:"Malayalam",bmp:"ഀ-ഌഎ-ഐഒ-ൄെ-ൈൊ-൏ൔ-ൣ൦-ൿ"},{name:"Mandaic",bmp:"ࡀ-࡛࡞"},{name:"Manichaean",astral:"\ud802[\udec0-\udee6\udeeb-\udef6]"},{name:"Marchen",astral:"\ud807[\udc70-\udc8f\udc92-\udca7\udca9-\udcb6]"},{name:"Masaram_Gondi",astral:"\ud807[\udd00-\udd06\udd08\udd09\udd0b-\udd36\udd3a\udd3c\udd3d\udd3f-\udd47\udd50-\udd59]"},{name:"Medefaidrin",astral:"\ud81b[\ude40-\ude9a]"},{name:"Meetei_Mayek",bmp:"ꫠ-꫶ꯀ-꯭꯰-꯹"},{name:"Mende_Kikakui",astral:"\ud83a[\udc00-\udcc4\udcc7-\udcd6]"},{name:"Meroitic_Cursive",astral:"\ud802[\udda0-\uddb7\uddbc-\uddcf\uddd2-\uddff]"},{name:"Meroitic_Hieroglyphs",astral:"\ud802[\udd80-\udd9f]"},{name:"Miao",astral:"\ud81b[\udf00-\udf4a\udf4f-\udf87\udf8f-\udf9f]"},{name:"Modi",astral:"\ud805[\ude00-\ude44\ude50-\ude59]"},{name:"Mongolian",bmp:"᠀᠁᠄᠆-᠎᠐-᠙ᠠ-ᡸᢀ-ᢪ",astral:"\ud805[\ude60-\ude6c]"},{name:"Mro",astral:"\ud81a[\ude40-\ude5e\ude60-\ude69\ude6e\ude6f]"},{name:"Multani",astral:"\ud804[\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea9]"},{name:"Myanmar",bmp:"က-႟ꧠ-ꧾꩠ-ꩿ"},{name:"Nabataean",astral:"\ud802[\udc80-\udc9e\udca7-\udcaf]"},{name:"Nandinagari",astral:"\ud806[\udda0-\udda7\uddaa-\uddd7\uddda-\udde4]"},{name:"New_Tai_Lue",bmp:"ᦀ-ᦫᦰ-ᧉ᧐-᧚᧞᧟"},{name:"Newa",astral:"\ud805[\udc00-\udc5b\udc5d-\udc61]"},{name:"Nko",bmp:"߀-ߺ߽-߿"},{name:"Nushu",astral:"𖿡|\ud82c[\udd70-\udefb]"},{name:"Nyiakeng_Puachue_Hmong",astral:"\ud838[\udd00-\udd2c\udd30-\udd3d\udd40-\udd49\udd4e\udd4f]"},{name:"Ogham",bmp:" -᚜"},{name:"Ol_Chiki",bmp:"᱐-᱿"},{name:"Old_Hungarian",astral:"\ud803[\udc80-\udcb2\udcc0-\udcf2\udcfa-\udcff]"},{name:"Old_Italic",astral:"\ud800[\udf00-\udf23\udf2d-\udf2f]"},{name:"Old_North_Arabian",astral:"\ud802[\ude80-\ude9f]"},{name:"Old_Permic",astral:"\ud800[\udf50-\udf7a]"},{name:"Old_Persian",astral:"\ud800[\udfa0-\udfc3\udfc8-\udfd5]"},{name:"Old_Sogdian",astral:"\ud803[\udf00-\udf27]"},{name:"Old_South_Arabian",astral:"\ud802[\ude60-\ude7f]"},{name:"Old_Turkic",astral:"\ud803[\udc00-\udc48]"},{name:"Oriya",bmp:"ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍୕-ୗଡ଼ଢ଼ୟ-ୣ୦-୷"},{name:"Osage",astral:"\ud801[\udcb0-\udcd3\udcd8-\udcfb]"},{name:"Osmanya",astral:"\ud801[\udc80-\udc9d\udca0-\udca9]"},{name:"Pahawh_Hmong",astral:"\ud81a[\udf00-\udf45\udf50-\udf59\udf5b-\udf61\udf63-\udf77\udf7d-\udf8f]"},{name:"Palmyrene",astral:"\ud802[\udc60-\udc7f]"},{name:"Pau_Cin_Hau",astral:"\ud806[\udec0-\udef8]"},{name:"Phags_Pa",bmp:"ꡀ-꡷"},{name:"Phoenician",astral:"\ud802[\udd00-\udd1b\udd1f]"},{name:"Psalter_Pahlavi",astral:"\ud802[\udf80-\udf91\udf99-\udf9c\udfa9-\udfaf]"},{name:"Rejang",bmp:"ꤰ-꥓꥟"},{name:"Runic",bmp:"ᚠ-ᛪᛮ-ᛸ"},{name:"Samaritan",bmp:"ࠀ-࠭࠰-࠾"},{name:"Saurashtra",bmp:"ꢀ-ꣅ꣎-꣙"},{name:"Sharada",astral:"\ud804[\udd80-\udddf]"},{name:"Shavian",astral:"\ud801[\udc50-\udc7f]"},{name:"Siddham",astral:"\ud805[\udd80-\uddb5\uddb8-\udddd]"},{name:"SignWriting",astral:"\ud836[\udc00-\ude8b\ude9b-\ude9f\udea1-\udeaf]"},{name:"Sinhala",bmp:"ඁ-ඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲ-෴",astral:"\ud804[\udde1-\uddf4]"},{name:"Sogdian",astral:"\ud803[\udf30-\udf59]"},{name:"Sora_Sompeng",astral:"\ud804[\udcd0-\udce8\udcf0-\udcf9]"},{name:"Soyombo",astral:"\ud806[\ude50-\udea2]"},{name:"Sundanese",bmp:"ᮀ-ᮿ᳀-᳇"},{name:"Syloti_Nagri",bmp:"ꠀ-꠬"},{name:"Syriac",bmp:"܀-܍܏-݊ݍ-ݏࡠ-ࡪ"},{name:"Tagalog",bmp:"ᜀ-ᜌᜎ-᜔"},{name:"Tagbanwa",bmp:"ᝠ-ᝬᝮ-ᝰᝲᝳ"},{name:"Tai_Le",bmp:"ᥐ-ᥭᥰ-ᥴ"},{name:"Tai_Tham",bmp:"ᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪠-᪭"},{name:"Tai_Viet",bmp:"ꪀ-ꫂꫛ-꫟"},{name:"Takri",astral:"\ud805[\ude80-\udeb8\udec0-\udec9]"},{name:"Tamil",bmp:"ஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௺",astral:"\ud807[\udfc0-\udff1\udfff]"},{name:"Tangut",astral:"𖿠|[\ud81c-\ud820][\udc00-\udfff]|\ud821[\udc00-\udff7]|\ud822[\udc00-\udeff]|\ud823[\udd00-\udd08]"},{name:"Telugu",bmp:"ఀ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘ-ౚౠ-ౣ౦-౯౷-౿"},{name:"Thaana",bmp:"ހ-ޱ"},{name:"Thai",bmp:"ก-ฺเ-๛"},{name:"Tibetan",bmp:"ༀ-ཇཉ-ཬཱ-ྗྙ-ྼ྾-࿌࿎-࿔࿙࿚"},{name:"Tifinagh",bmp:"ⴰ-ⵧⵯ⵰⵿"},{name:"Tirhuta",astral:"\ud805[\udc80-\udcc7\udcd0-\udcd9]"},{name:"Ugaritic",astral:"\ud800[\udf80-\udf9d\udf9f]"},{name:"Vai",bmp:"ꔀ-ꘫ"},{name:"Wancho",astral:"\ud838[\udec0-\udef9\udeff]"},{name:"Warang_Citi",astral:"\ud806[\udca0-\udcf2\udcff]"},{name:"Yezidi",astral:"\ud803[\ude80-\udea9\udeab-\udead\udeb0\udeb1]"},{name:"Yi",bmp:"ꀀ-ꒌ꒐-꓆"},{name:"Zanabazar_Square",astral:"\ud806[\ude00-\ude47]"}],fO=eh((function(t,e){uE(e,"__esModule",{value:!0}),e.default=void 0;var n=jx(dO);
/*!
     * XRegExp Unicode Scripts 4.4.1
     * <xregexp.com>
     * Steven Levithan (c) 2010-present MIT License
     * Unicode data by Mathias Bynens <mathiasbynens.be>
     */e.default=function(t){if(!t.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Scripts");t.addUnicodeData(n.default)},t.exports=e.default})),_O=th(eh((function(t,e){uE(e,"__esModule",{value:!0}),e.default=void 0;var n=jx(GB),i=jx(rO),r=jx(oO),o=jx(aO),a=jx(lO),s=jx(cO),l=jx(pO),u=jx(fO);(0,i.default)(n.default),(0,r.default)(n.default),(0,o.default)(n.default),(0,a.default)(n.default),(0,s.default)(n.default),(0,l.default)(n.default),(0,u.default)(n.default);var c=n.default;e.default=c,t.exports=e.default})));!function(t){function e(e,n){var i,r,o;if(n=n||"",e=e.replace(/^\(\?([\w$]+)\)/,(function(t,e){return n+=e,""})),!(i=/^\(\?<([=!])/.exec(e)))throw new Error("lookbehind not at start of pattern");return r=t.matchRecursive(e,/\((?:[^()[\\]|\\.|\[(?:[^\\\]]|\\.)*])*/.source,"\\)","s",{valueNames:[null,null,null,"right"],escapeChar:"\\"})[0].end,o=e.slice(4,r-1),{lb:t("(?:"+o+")$(?!\\s)",n.replace(/[gy]/g,"")),lbType:"="===i[1],main:t(e.slice(("(?<=)"+o).length),n)}}t.execLb=function(n,i,r){for(var o,a,s=0,l=e(i,r);o=t.exec(n,l.main,s);){if(a=n.slice(0,o.index),l.lbType===l.lb.test(a))return o;s=o.index+1}return null},t.testLb=function(e,n,i){return!!t.execLb(e,n,i)},t.searchLb=function(e,n,i){var r=t.execLb(e,n,i);return r?r.index:-1},t.matchAllLb=function(n,i,r){for(var o,a,s=[],l=0,u=e(i,r);o=t.exec(n,u.main,l);)a=n.slice(0,o.index),u.lbType===u.lb.test(a)?(s.push(o[0]),l=o.index+(o[0].length||1)):l=o.index+1;return s},t.replaceLb=function(n,i,r,o){for(var a,s,l="",u=0,c=0,h=e(i,o);a=t.exec(n,h.main,u);)if(s=n.slice(0,a.index),h.lbType===h.lb.test(s)){if(l+=n.slice(c,a.index)+t.replace(a[0],h.main,r),c=a.index+a[0].length,!h.main.global)break;u=a.index+(a[0].length||1)}else u=a.index+1;return l+n.slice(c)}}(_O);var gO=_O,mO={},yO=function(){try{return new RegExp("(?<=)"),!0}catch(t){return!1}}(),AO=function(t){function e(e,n){var i,r=t.call(this)||this;if(r._flags="",r._useFallback=!1,r._dotall=!1,r._extended=!1,r._captureNames=[],void 0===e)e=i="";else if(r.sec.AXRegExp.axIsType(e))n&&r.sec.throwError("TypeError",kb.RegExpFlagsArgumentError),n=e._flags,i=e.source,e=e.value;else{if(i=(e=String(e)).replace(/(^|^[/]|(?:\\\\)+)\//g,"$1\\/"),n){var o=n;n="";for(var a=0;a<o.length;a++){var s=o[a];switch(s){case"s":r._dotall=!0;break;case"x":r._extended=!0;break;case"g":case"i":case"m":n+=s}}}r._flags=n||"",e=r._parse(i)}try{r.value=new RegExp(e,n)}catch(t){console.log("Unsupported RegExp pattern:"+e),r._useFallback=!0}return r._source=i,r}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;bb(t,"$BgtoString",n.ecmaToString),bb(t,"$Bgexec",n.exec),bb(t,"$Bgtest",n.test)},e.prototype._parse=function(t){if(t.includes("(?<=")||t.includes("(?<!")&&!this._extended){if(!yO){if(!Ab.EMULATE_LOOKBEHIND)throw new Error("[ASRegExp] Pattern include a lookbehind, but your browser not usupport it:"+t);return mO.lookbehind||console.warn("[ASRegExp] Pattern include a lookbehind, we should use XRegExp polyfill for Safari.\n",t),mO.lookbehind=!0,this._useFallback=!0,t}return mO.lookbehind||console.warn("[ASRegExp] Pattern include a lookbehind, we will use a native .\n",t),mO.lookbehind=!0,t}for(var n="",i=this._captureNames,r=[],o=0,a=0;a<t.length;a++){var s=t[a];switch(s){case"(":if(n+=s,r.push(o>1?o-1:o),o=0,"?"===t[a+1])switch(t[a+2]){case":":case"=":case"!":n+="?"+t[a+2],a+=2;break;default:if(!/\(\?P<([\w$]+)>/.exec(t.substr(a)))return e.UNMATCHABLE_PATTERN;var l=RegExp.$1;"length"!==l&&i.push(l),i.indexOf(l),a+=RegExp.lastMatch.length-1}else i.push(null);if(i.length>406)return e.UNMATCHABLE_PATTERN;break;case")":if(!r.length)return e.UNMATCHABLE_PATTERN;n+=s,o=r.pop()+1;break;case"|":n+=s;break;case"\\":n+=s,/\\|c[A-Z]|x[0-9,a-z,A-Z]{2}|u[0-9,a-z,A-Z]{4}|./.exec(t.substr(a+1))&&(n+=RegExp.lastMatch,a+=RegExp.lastMatch.length),o<=1&&o++;break;case"[":if(!/\[[^\]]*\]/.exec(t.substr(a)))return e.UNMATCHABLE_PATTERN;n+=RegExp.lastMatch,a+=RegExp.lastMatch.length-1,o<=1&&o++;break;case"{":if(!/\{[^{]*?(?:,[^{]*?)?\}/.exec(t.substr(a)))return e.UNMATCHABLE_PATTERN;n+=RegExp.lastMatch,a+=RegExp.lastMatch.length-1;break;case".":this._dotall?n+="[\\s\\S]":n+=s,o<=1&&o++;break;case"?":case"*":case"+":if(!o)return e.UNMATCHABLE_PATTERN;n+=s,"?"===t[a+1]&&(a++,n+="?");break;case" ":if(this._extended)break;n+=s,o<=1&&o++;break;default:n+=s,o<=1&&o++}if(n.length>32767)return e.UNMATCHABLE_PATTERN}return r.length?e.UNMATCHABLE_PATTERN:n},e.prototype.ecmaToString=function(){var t="/"+this._source+"/";return this.value.global&&(t+="g"),this.value.ignoreCase&&(t+="i"),this.value.multiline&&(t+="m"),this._dotall&&(t+="s"),this._extended&&(t+="x"),t},e.prototype.axCall=function(t){return this.exec.apply(this,arguments)},e.prototype.axApply=function(t,e){return this.exec.apply(this,e)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"global",{get:function(){return this.value.global},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ignoreCase",{get:function(){return this.value.ignoreCase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multiline",{get:function(){return this.value.multiline},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastIndex",{get:function(){return this.value.lastIndex},set:function(t){this.value.lastIndex=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dotall",{get:function(){return this._dotall},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extended",{get:function(){return this._extended},enumerable:!1,configurable:!0}),e.prototype.internalStringSearch=function(t){return this._useFallback?gO.searchLb(t,this._source,this._flags):t.search(this.value)},e.prototype.internalStringReplace=function(t,e){return this._useFallback?gO.replaceLb(t,this._source,e,this._flags):t.replace(this.value,e)},e.prototype.internalStringMatch=function(t){var e=this._flags.includes("g");if(!this._useFallback){var n=t.match(this.value);return n||(e?[]:null)}var i=gO.matchAllLb(t,this._source,this._flags);if(i.length>0){var r=[i[0]];return r.index=0,r.input=t,r}return e?[]:null},e.prototype.exec=function(t){var e;if(void 0===t&&(t=""),!(e=this._useFallback?gO.execLb(t,this._source,this._flags):this.value.exec(t)))return null;var n=Ix(this.sec,e),i=this._captureNames;if(i){for(var r=0;r<i.length;r++){var o=i[r];if(null!==o){var a=e[r+1]||"";e[o]=a,n.axSetPublicProperty(o,a)}}return n}},e.prototype.test=function(t){return void 0===t&&(t=""),null!==this.exec(t)},e.UNMATCHABLE_PATTERN="^(?!)$",e}(Hb);function vO(t,e,n){if("object"!=typeof e)return e;if(Oo(e))return e;if(Array.isArray(e)){for(var i=[],r=0;r<e.length;r++){var o=e[r],a=n?vO(t,o,!0):o;i.push(a)}return t.createArray(i)}return t.createObjectFromJS(e,n)}function bO(t,e,n,i,r){if(void 0===i&&(i=null),void 0===r&&(r=null),i&&(e=i(r,e)),"object"!=typeof e||Oo(e))return e;if(Oo(e))return e;if(t.AXArray.axIsType(e)){for(var o=[],a=Array.isArray(e)?e:e.value,s=0;s<a.length;s++){var l=a[s],u=n?bO(t,l,!0,i,s.toString()):l;o.push(u)}return o}if(t.ObjectVector.axClass.axIsType(e)){for(o=[],a=e._buffer,s=0;s<a.length;s++){l=a[s],u=n?bO(t,l,!0,i,s.toString()):l;o.push(u)}return o}var c=Object.keys(e),h={};for(s=0;s<c.length;s++){var p=c[s];if("__scope__"!=p){var d=p;rp(p)||(d=p.substr(3));var f=e[p];n&&(f=bO(t,f,!0,i,d)),h[d]=f}}return h}function xO(t,e,n,i){var r=e[n];if(Array.isArray(r))for(var o=r,a=0,s=o.length;a<s;a++){void 0===(u=xO(t,o,yb(a),i))?delete o[a]:o[a]=u}else if(null!==r&&"boolean"!=typeof r&&"number"!=typeof r&&"string"!=typeof r)for(var l in r){if(!r.hasOwnProperty(l)||!vb.isPublicQualifiedName(l))break;var u;void 0===(u=xO(t,r,l,i))?delete r[l]:r[l]=u}return i.call(e,n,r)}var CO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.parse=function(t,e){var n;void 0===e&&(e=null),t=yb(t),null===e||Px(e)||this.sec.throwError("TypeError",kb.CheckTypeFailedError,e,"Function"),null===t&&this.sec.throwError("SyntaxError",kb.JSONInvalidParseInput);try{n=vO(this.sec,JSON.parse(t),!0)}catch(t){this.sec.throwError("SyntaxError",kb.JSONInvalidParseInput)}return null===e?n:xO(this.sec,{"":n},"",e.value)},e.stringify=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i,r="object"==typeof e?null==e?void 0:e.sec:null;return null!==e&&(r&&(r.AXFunction.axIsType(e)||r.AXArray.axIsType(e))||this.sec.throwError("TypeError",kb.JSONInvalidReplacer)),i="string"==typeof n?n.length>10?n.substring(0,10):n:"number"==typeof n?"          ".substring(0,Math.min(10,0|n)):"",null===e?this.stringifySpecializedToString(t,null,null,i):r.AXArray.axIsType(e)?this.stringifySpecializedToString(t,this.computePropertyList(e.value),null,i):this.stringifySpecializedToString(t,null,e.value,i)},e.computePropertyList=function(t){for(var e=[],n=Object.create(null),i=0,r=t.length;i<r;i++)if(t.hasOwnProperty(i)){var o=t[i],a=null;"string"==typeof o?a=o:"number"==typeof o&&(a=yb(o)),null===a||n[a]||(n[a]=!0,e.push(a))}return e},e.stringifySpecializedToString=function(t,e,n,i){if(void 0===t)return"null";var r=bO(this.sec,t,!0,n);try{return JSON.stringify(r,null,i)}catch(t){this.sec.throwError("TypeError",kb.JSONCyclicStructure)}},e}(Hb);function IO(){return 0===Yb.length?null:Yb[Yb.length-1].topScope().global.object.globalInfo.abc}function EO(t,e,n){null==e&&t.throwError("TypeError",kb.NullPointerError,"request"),t.flash.net.URLRequest.axClass.axIsType(e)||t.throwError("TypeError",kb.CheckTypeFailedError,e,"flash.net.URLRequest");var i=e.url;(Oo(i)&&t.throwError("TypeError",kb.NullPointerError,"url"),0!==i.toLowerCase().indexOf("fscommand:"))?window.open(e.url,"_blank"):(0,t.flash.system.fscommand.value)(t,i.substring(10),n)}function wO(t){return function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return t.apply(Rh,n)}}var SO={},DO=function(t){function e(e,n,i,r,o,a,s){void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0);var l=t.call(this)||this;switch(arguments.length){case 0:l.value=new Date;break;case 1:l.value=new Date(e);break;case 2:l.value=new Date(e,n);break;case 3:l.value=new Date(e,n,i);break;case 4:l.value=new Date(e,n,i,r);break;case 5:l.value=new Date(e,n,i,r,o);break;case 6:l.value=new Date(e,n,i,r,o,a);break;default:l.value=new Date(e,n,i,r,o,a,s)}return l}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;bb(t,"$BgtoString",n.toString),bb(t,"$BgtoLocaleString",n.toString),bb(t,"$BgvalueOf",n.valueOf),bb(t,"$BgtoDateString",n.toDateString),bb(t,"$BgtoTimeString",n.toTimeString),bb(t,"$BgtoLocaleString",n.toLocaleString),bb(t,"$BgtoLocaleDateString",n.toLocaleDateString),bb(t,"$BgtoLocaleTimeString",n.toLocaleTimeString),bb(t,"$BgtoUTCString",n.toUTCString),bb(t,"$BgtoJSON",n.toJSON),bb(t,"$BggetUTCFullYear",n.getUTCFullYear),bb(t,"$BggetUTCMonth",n.getUTCMonth),bb(t,"$BggetUTCDate",n.getUTCDate),bb(t,"$BggetUTCDay",n.getUTCDay),bb(t,"$BggetUTCHours",n.getUTCHours),bb(t,"$BggetUTCMinutes",n.getUTCMinutes),bb(t,"$BggetUTCSeconds",n.getUTCSeconds),bb(t,"$BggetUTCMilliseconds",n.getUTCMilliseconds),bb(t,"$BggetFullYear",n.getFullYear),bb(t,"$BggetMonth",n.getMonth),bb(t,"$BggetDate",n.getDate),bb(t,"$BggetDay",n.getDay),bb(t,"$BggetHours",n.getHours),bb(t,"$BggetMinutes",n.getMinutes),bb(t,"$BggetSeconds",n.getSeconds),bb(t,"$BggetMilliseconds",n.getMilliseconds),bb(t,"$BggetTimezoneOffset",n.getTimezoneOffset),bb(t,"$BggetTime",n.getTime),bb(t,"$BgsetFullYear",n.setFullYear),bb(t,"$BgsetMonth",n.setMonth),bb(t,"$BgsetDate",n.setDate),bb(t,"$BgsetHours",t.setHours),bb(t,"$BgsetMinutes",n.setMinutes),bb(t,"$BgsetSeconds",n.setSeconds),bb(t,"$BgsetMilliseconds",n.setMilliseconds),bb(t,"$BgsetUTCFullYear",n.setUTCFullYear),bb(t,"$BgsetUTCMonth",n.setUTCMonth),bb(t,"$BgsetUTCDate",n.setUTCDate),bb(t,"$BgsetUTCHours",n.setUTCHours),bb(t,"$BgsetUTCMinutes",n.setUTCMinutes),bb(t,"$BgsetUTCSeconds",n.setUTCSeconds),bb(t,"$BgsetUTCMilliseconds",n.setUTCMilliseconds)},e.parse=function(t){return Date.parse(t)},e.UTC=function(t,e,n,i,r,o,a){return void 0===n&&(n=1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),Date.parse.apply(null,arguments)},e.axCoerce=function(t){return this.axConstruct([t])},e.prototype.toString=function(){if(!(this.value instanceof Date))return"Invalid Date";var t=this.value.toString().split(" ");return t.length<4?"Invalid Date":(t.length=6,t.push(t.splice(3,1)[0]),"0"===t[2][0]&&(t[2]=t[2][1]),t.join(" "))},e.prototype.toDateString=function(){if(!(this.value instanceof Date))return"Invalid Date";var t=this.value.toDateString().split(" ");return t.length<4?"Invalid Date":("0"===t[2][0]&&(t[2]=t[2][1]),t.join(" "))},e.prototype.toJSON=function(){return this.value instanceof Date?this.value.toString():"Invalid Date"},e.prototype.valueOf=function(){return this.value instanceof Date?this.value.valueOf():NaN},e.prototype.setTime=function(t){return void 0===t&&(t=0),this.value instanceof Date?this.value.setTime(t):NaN},e.prototype.toTimeString=function(){return this.value instanceof Date?this.value.toTimeString():"Invalid Date"},e.prototype.toLocaleString=function(){return this.value instanceof Date?this.value.toLocaleString():"Invalid Date"},e.prototype.toLocaleDateString=function(){return this.value instanceof Date?this.value.toLocaleDateString():"Invalid Date"},e.prototype.toLocaleTimeString=function(){return this.value instanceof Date?this.value.toLocaleTimeString():"Invalid Date"},e.prototype.toUTCString=function(){return this.value instanceof Date?this.value.toUTCString():"Invalid Date"},e.prototype.getUTCFullYear=function(){return this.value instanceof Date?this.value.getUTCFullYear():NaN},e.prototype.getUTCMonth=function(){return this.value instanceof Date?this.value.getUTCMonth():NaN},e.prototype.getUTCDate=function(){return this.value instanceof Date?this.value.getUTCDate():NaN},e.prototype.getUTCDay=function(){return this.value instanceof Date?this.value.getUTCDay():NaN},e.prototype.getUTCHours=function(){return this.value instanceof Date?this.value.getUTCHours():NaN},e.prototype.getUTCMinutes=function(){return this.value instanceof Date?this.value.getUTCMinutes():NaN},e.prototype.getUTCSeconds=function(){return this.value instanceof Date?this.value.getUTCSeconds():NaN},e.prototype.getUTCMilliseconds=function(){return this.value instanceof Date?this.value.getUTCMilliseconds():NaN},e.prototype.getFullYear=function(){return this.value instanceof Date?this.value.getFullYear():NaN},e.prototype.getMonth=function(){return this.value instanceof Date?this.value.getMonth():NaN},e.prototype.getDate=function(){return this.value instanceof Date?this.value.getDate():NaN},e.prototype.getDay=function(){return this.value instanceof Date?this.value.getDay():NaN},e.prototype.getHours=function(){return this.value instanceof Date?this.value.getHours():NaN},e.prototype.getMinutes=function(){return this.value instanceof Date?this.value.getMinutes():NaN},e.prototype.getSeconds=function(){return this.value instanceof Date?this.value.getSeconds():NaN},e.prototype.getMilliseconds=function(){return this.value instanceof Date?this.value.getMilliseconds():NaN},e.prototype.getTimezoneOffset=function(){return this.value instanceof Date?this.value.getTimezoneOffset():NaN},e.prototype.getTime=function(){return this.value instanceof Date?this.value.getTime():NaN},e.prototype.setFullYear=function(t,e,n){return this.value instanceof Date?this.value.setFullYear(t,e,n):NaN},e.prototype.setMonth=function(t,e){return this.value instanceof Date?this.value.setMonth(t,e):NaN},e.prototype.setDate=function(t){return this.value instanceof Date?this.value.setDate(t):NaN},e.prototype.setHours=function(t,e,n,i){return this.value instanceof Date?this.value.setHours(t,e,n,i):NaN},e.prototype.setMinutes=function(t,e,n){return this.value instanceof Date?this.value.setMinutes(t,e,n):NaN},e.prototype.setSeconds=function(t,e){return this.value instanceof Date?this.value.setSeconds(t,e):NaN},e.prototype.setMilliseconds=function(t){return this.value instanceof Date?this.value.setMilliseconds(t):NaN},e.prototype.setUTCFullYear=function(t,e,n){return this.value instanceof Date?this.value.setUTCFullYear(t,e,n):NaN},e.prototype.setUTCMonth=function(t,e){return this.value instanceof Date?this.value.setUTCMonth(t,e):NaN},e.prototype.setUTCDate=function(t){return this.value instanceof Date?this.value.setUTCDate(t):NaN},e.prototype.setUTCHours=function(t,e,n,i){return this.value instanceof Date?this.value.setUTCHours(t,e,n,i):NaN},e.prototype.setUTCMinutes=function(t,e,n){return this.value instanceof Date?this.value.setUTCMinutes(t,e,n):NaN},e.prototype.setUTCSeconds=function(t,e){return this.value instanceof Date?this.value.setUTCSeconds(t,e):NaN},e.prototype.setUTCMilliseconds=function(t){return this.value instanceof Date?this.value.setUTCMilliseconds(t):NaN},Object.defineProperty(e.prototype,"fullYear",{get:function(){return this.value.getFullYear()},set:function(t){this.value.setFullYear(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"month",{get:function(){return this.value.getMonth()},set:function(t){this.value.setMonth(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this.value.getDate()},set:function(t){this.value.setDate(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hours",{get:function(){return this.value.getHours()},set:function(t){this.value.setHours(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minutes",{get:function(){return this.value.getMinutes()},set:function(t){this.value.setMinutes(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this.value.getSeconds()},set:function(t){this.value.setSeconds(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"milliseconds",{get:function(){return this.value.getMilliseconds()},set:function(t){this.value.setMilliseconds(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullYearUTC",{get:function(){return this.value.getUTCFullYear()},set:function(t){this.value.setUTCFullYear(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monthUTC",{get:function(){return this.value.getUTCMonth()},set:function(t){this.value.setUTCMonth(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateUTC",{get:function(){return this.value.getUTCDate()},set:function(t){this.value.setUTCDate(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hoursUTC",{get:function(){return this.value.getUTCHours()},set:function(t){this.value.setUTCHours(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minutesUTC",{get:function(){return this.value.getUTCMinutes()},set:function(t){this.value.setUTCMinutes(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondsUTC",{get:function(){return this.value.getUTCSeconds()},set:function(t){this.value.setUTCSeconds(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"millisecondsUTC",{get:function(){return this.value.getUTCMilliseconds()},set:function(t){this.value.setUTCMilliseconds(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this.value.getTime()},set:function(t){this.value.setTime(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timezoneOffset",{get:function(){return this.value.getTimezoneOffset()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"day",{get:function(){return this.value.getDay()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dayUTC",{get:function(){return this.value.getUTCDay()},enumerable:!1,configurable:!0}),e}(Hb),TO="$"+gb(0,"http://www.adobe.com/2006/actionscript/flash/proxy").mangledName,PO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.classInitializer=function(){var t=this.dPrototype,n=e.prototype;Df(t,TO+"getProperty",n.native_getProperty),Df(t,TO+"setProperty",n.native_setProperty),Df(t,TO+"callProperty",n.native_callProperty),Df(t,TO+"hasProperty",n.native_hasProperty),Df(t,TO+"deleteProperty",n.native_deleteProperty),Df(t,TO+"getDescendants",n.native_getDescendants),Df(t,TO+"nextNameIndex",n.native_nextNameIndex),Df(t,TO+"nextName",n.native_nextName),Df(t,TO+"nextValue",n.native_nextValue)},e.prototype.native_getProperty=function(){this.sec.throwError("flash.errors.IllegalOperationError",kb.ProxyGetPropertyError)},e.prototype.native_setProperty=function(){this.sec.throwError("flash.errors.IllegalOperationError",kb.ProxySetPropertyError)},e.prototype.native_callProperty=function(){this.sec.throwError("flash.errors.IllegalOperationError",kb.ProxyCallPropertyError)},e.prototype.native_hasProperty=function(){this.sec.throwError("flash.errors.IllegalOperationError",kb.ProxyHasPropertyError)},e.prototype.native_deleteProperty=function(){this.sec.throwError("flash.errors.IllegalOperationError",kb.ProxyDeletePropertyError)},e.prototype.native_getDescendants=function(){this.sec.throwError("flash.errors.IllegalOperationError",kb.ProxyGetDescendantsError)},e.prototype.native_nextNameIndex=function(){this!==this.axClass.dPrototype&&this.sec.throwError("flash.errors.IllegalOperationError",kb.ProxyNextNameIndexError)},e.prototype.native_nextName=function(){this.sec.throwError("flash.errors.IllegalOperationError",kb.ProxyNextNameError)},e.prototype.native_nextValue=function(){this.sec.throwError("flash.errors.IllegalOperationError",kb.ProxyNextValueError)},e.prototype.axGetProperty=function(t){var e,n="string"==typeof t.name?this.traits.getTrait(t.namespaces,t.name):null;if(n){var i=n.multiname.getMangledName();if("function"==typeof(e=this[i]))return this.axGetMethod(i)}else e=this[TO+"getProperty"](this.sec.AXQName.FromMultiname(t));return e},e.prototype.axGetNumericProperty=function(t){return this[TO+"getProperty"](+t+"")},e.prototype.axSetNumericProperty=function(t,e){this[TO+"setProperty"](+t+"",e)},e.prototype.axSetProperty=function(e,n,i){("string"==typeof e.name?this.traits.getTrait(e.namespaces,e.name):null)?t.prototype.axSetProperty.call(this,e,n,i):this[TO+"setProperty"](this.sec.AXQName.FromMultiname(e),n)},e.prototype.axCallProperty=function(e,n,i){if("string"==typeof e.name?this.traits.getTrait(e.namespaces,e.name):null)return t.prototype.axCallProperty.call(this,e,n,i);var r=[this.sec.AXQName.FromMultiname(e)].concat(n);return this[TO+"callProperty"].apply(this,r)},e.prototype.axHasProperty=function(t){return this.axHasOwnProperty(t)},e.prototype.axHasPublicProperty=function(t){return BO.name=t,!!this.axHasPropertyInternal(BO)||this[TO+"hasProperty"](t)},e.prototype.axHasOwnProperty=function(t){return!!("string"==typeof t.name?this.traits.getTrait(t.namespaces,t.name):null)||this[TO+"hasProperty"](this.sec.AXQName.FromMultiname(t))},e.prototype.axDeleteProperty=function(t){var e="string"==typeof t.name?this.traits.getTrait(t.namespaces,t.name):null;return e?delete this[e.multiname.getMangledName()]:this[TO+"deleteProperty"](this.sec.AXQName.FromMultiname(t))},e.prototype.axNextName=function(t){return this[TO+"nextName"](t)},e.prototype.axNextValue=function(t){return this[TO+"nextValue"](t)},e.prototype.axNextNameIndex=function(t){return this[TO+"nextNameIndex"](t)},e}(Hb),BO=new vb(null,0,17,[],null,null,!0),OO="WeakRef"in self&&Ab.USE_WEAK_REF,MO=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.map=new WeakMap,n.keys=new Set,n.primitiveMap=Object.create(null),(n.weakKeys=!!e&&OO)&&(n.refs=new WeakMap),n}return o(e,t),e.makePrimitiveKey=function(t){if("string"==typeof t||"number"==typeof t)return t},e.prototype.toJSON=function(){return"Dictionary"},e.prototype.axGetProperty=function(n){if(this===this.axClass.dPrototype)return t.prototype.axGetProperty.call(this,n);var i=e.makePrimitiveKey(n.name);return void 0!==i?this.primitiveMap[i]:this.map.get(Object(n.name))},e.prototype.axSetProperty=function(n,i,r){if(this!==this.axClass.dPrototype){var o=e.makePrimitiveKey(n.name);if(void 0===o){var a=Object(n.name);if(!this.map.has(a))if(this.weakKeys){var s=new self.WeakRef(a);this.refs.set(a,s),this.keys.add(s)}else this.keys.add(a);this.map.set(a,i)}else this.primitiveMap[o]=i}else t.prototype.axSetProperty.call(this,n,i,r)},e.prototype.axHasPropertyInternal=function(n){if(this===this.axClass.dPrototype)return t.prototype.axHasProperty.call(this,n);var i=e.makePrimitiveKey(n.name);return void 0!==i?i in this.primitiveMap:this.map.has(Object(n.name))},e.prototype.axDeleteProperty=function(n){if(this===this.axClass.dPrototype)return t.prototype.axDeleteProperty.call(this,n);var i=e.makePrimitiveKey(n.name);if(void 0===i){var r=Object(n.name);return!!this.map.has(r)&&(this.map.delete(r),this.weakKeys?(this.keys.delete(this.refs.get(r)),this.refs.delete(r)):this.keys.delete(r),!0)}delete this.primitiveMap[i]},e.prototype.axGetPublicProperty=function(n){if(this===this.axClass.dPrototype)return t.prototype.axGetPublicProperty.call(this,n);var i=e.makePrimitiveKey(n);return void 0!==i?this.primitiveMap[i]:this.map.get(Object(n))},e.prototype.axGetEnumerableKeys=function(){var e=this;if(this===this.axClass.dPrototype)return t.prototype.axGetEnumerableKeys.call(this);var n=[];for(var i in this.primitiveMap)n.push(i);return this.keys.forEach((function(t){var i=e.weakKeys?t.deref():t;i?n.push(i):e.keys.delete(t)})),n},e.classInitializer=function(){bb(this.dPrototype,"$BgtoJSON",e.prototype.toJSON)},e}(Hb);function LO(t,e,n){for(var i=t.axGetEnumerableKeys(),r=0;r<i.length;r++){var o=i[r],a=t.axGetPublicProperty(o);e.call(n,o,a)}}var RO=function(){return function(){this.strings=[],this.objects=[],this.traits=[],this.traitNames=[]}}(),NO=function(){function t(){this._classMap=new WeakMap,this._nameMap=Object.create(null)}return t.prototype.getAliasByClass=function(t){return this._classMap.get(t)},t.prototype.getClassByAlias=function(t){return this._nameMap[t]},t.prototype.registerClassAlias=function(t,e){this._classMap.set(e,t),this._nameMap[t]=e},t}();function FO(t,e){if(e.length>65535)throw"AMF short string exceeded";if(!e.length)return t.writeByte(0),void t.writeByte(0);var n=qh.utf8decode(e);t.writeByte(n.length>>8&255),t.writeByte(255&n.length);for(var i=0;i<n.length;i++)t.writeByte(n[i])}function kO(t){var e=t.readByte()<<8|t.readByte();if(!e)return"";for(var n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.readByte();return qh.utf8encode(n)}function UO(t,e){var n=new ArrayBuffer(8),i=new DataView(n);i.setFloat64(0,e,!1);for(var r=0;r<n.byteLength;r++)t.writeByte(i.getUint8(r))}function VO(t){for(var e=new ArrayBuffer(8),n=new DataView(e),i=0;i<e.byteLength;i++)n.setUint8(i,t.readByte());return n.getFloat64(0,!1)}var jO=function(){function t(){}return t.write=function(t,e){switch(typeof e){case"boolean":t.writeByte(1),t.writeByte(e?1:0);break;case"number":t.writeByte(0),UO(t,e);break;case"undefined":t.writeByte(6);break;case"string":t.writeByte(2),FO(t,e);break;case"object":var n=e;if(null===n)t.writeByte(5);else if(t.sec.AXArray.axIsType(n)){var i=n.value;t.writeByte(8),t.writeByte(i.length>>>24&255),t.writeByte(i.length>>16&255),t.writeByte(i.length>>8&255),t.writeByte(255&i.length),LO(n,(function(e,n){FO(t,e),this.write(t,n)}),this),t.writeByte(0),t.writeByte(0),t.writeByte(9)}else t.writeByte(3),LO(n,(function(e,n){FO(t,e),this.write(t,n)}),this),t.writeByte(0),t.writeByte(0),t.writeByte(9);return}},t.read=function(t){var e=t.readByte();switch(e){case 0:return VO(t);case 1:return!!t.readByte();case 2:return kO(t);case 3:for(var n=t.sec.createObject(),i=void 0;(i=kO(t)).length;)n.axSetPublicProperty(i,this.read(t));if(9!==t.readByte())throw"AMF0 End marker is not found";return n;case 5:return null;case 6:return;case 8:(r=t.sec.createArray([])).length=t.readByte()<<24|t.readByte()<<16|t.readByte()<<8|t.readByte();for(i=void 0;(i=kO(t)).length;)r.axSetPublicProperty(i,this.read(t));if(9!==t.readByte())throw"AMF0 End marker is not found";return r;case 10:for(var r,o=(r=t.sec.createArray([])).length=t.readByte()<<24|t.readByte()<<16|t.readByte()<<8|t.readByte(),a=0;a<o;a++)r.axSetPublicProperty(a,this.read(t));return r;case 17:return XO(t,new RO);default:throw"AMF0 Unknown marker "+e}},t}();function GO(t){var e=t.readByte();if(!(128&e))return 127&e;var n=t.readByte();if(!(128&n))return(127&e)<<7|127&n;var i=t.readByte();if(!(128&i))return(127&e)<<14|(127&n)<<7|127&i;var r=(127&e)<<22|(127&n)<<15|(127&i)<<8|255&t.readByte();return 268435456&r&&(r|=3758096384),r}function QO(t,e){if(e<-268435456||e>=268435456)throw"AMF3 U29 range";4294967168&e?4294950912&e?4292870144&e?(t.writeByte(128|e>>22&127),t.writeByte(128|e>>15&127),t.writeByte(128|e>>8&127),t.writeByte(255&e)):(t.writeByte(128|e>>14&127),t.writeByte(128|e>>7&127),t.writeByte(127&e)):(t.writeByte(128|e>>7&127),t.writeByte(127&e)):t.writeByte(127&e)}function zO(t,e){var n=GO(t);if(1===n)return"";var i=e.strings;if(!(1&n))return i[n>>1];for(var r=n>>1,o=new Uint8Array(r),a=0;a<r;a++)o[a]=t.readByte();var s=qh.utf8encode(o);return i.push(s),s}function HO(t,e,n){if(""!==e){var i=n.strings,r=i.indexOf(e);if(r>=0)QO(t,r<<1);else{i.push(e);var o=qh.utf8decode(e);if(QO(t,1|o.length<<1),t instanceof x)t.writeArrayBuffer(o.byteLength!==o.buffer.byteLength?new Uint8Array(o).buffer:o.buffer);else for(var a=0;a<o.length;a++)t.writeByte(o[a])}}else t.writeByte(1)}function XO(t,e){var n=t.readByte();switch(n){case 1:return null;case 0:return;case 2:return!1;case 3:return!0;case 4:return GO(t);case 5:return VO(t);case 6:return zO(t,e);case 8:var i=GO(t);return t.sec.AXDate.axConstruct([VO(t)]);case 10:if(!(1&(i=GO(t))))return e.objects[i>>1];if(4&i)throw"AMF3 Traits-Ext is not supported";var r=void 0,o=void 0,a=!0,s=void 0;if(2&i){var l=zO(t,e);l&&(o=r=t.sec.classAliases.getClassByAlias(l)),a=!!(8&i),s=[];for(var u=0,c=i>>4;u<c;u++)s.push(zO(t,e));e.traits.push(o),e.traitNames.push(s)}else o=e.traits[i>>2],s=e.traitNames[i>>2];var h=r?r.axConstruct([]):t.sec.createObject();e.objects.push(h);for(u=0;u<s.length;u++){var p=XO(t,e);h.axSetPublicProperty(s[u],p)}if(a)for(var d=void 0;""!==(d=zO(t,e));){p=XO(t,e);h.axSetPublicProperty(d,p)}return h;case 9:if(!(1&(i=GO(t))))return e.objects[i>>1];var f=t.sec.createArray([]);e.objects.push(f);var _=i>>1;for(d=void 0;(d=zO(t,e)).length;){p=XO(t,e);f.axSetPublicProperty(d,p)}for(u=0;u<_;u++){p=XO(t,e);f.axSetPublicProperty(u,p)}return f;default:throw"AMF3 Unknown marker "+n}}function YO(t,e,n){var i=n.objects,r=i.indexOf(e);return r<0?(i.push(e),!1):(QO(t,r<<1),!0)}function qO(t,e,n){switch(typeof e){case"boolean":t.writeByte(e?3:2);break;case"number":var i=e===(0|e);i&&(e>268435455||e<-268435456)&&(i=!1),i?(t.writeByte(4),QO(t,e)):(t.writeByte(5),UO(t,e));break;case"undefined":t.writeByte(0);break;case"string":t.writeByte(6),HO(t,e,n);break;case"object":if(null===e)t.writeByte(1);else if(t.sec.AXArray.axIsType(e)){var r=e;if(t.writeByte(9),YO(t,r,n))break;for(var o=0;r.axHasPublicProperty(o);)++o;QO(t,o<<1|1),LO(r,(function(e,i){rp(e)&&e>=0&&e<o||(HO(t,e,n),qO(t,i,n))})),HO(t,"",n);for(var a=0;a<o;a++)qO(t,r.axGetPublicProperty(a),n)}else if(t.sec.AXDate.axIsType(e)){if(t.writeByte(8),YO(t,e,n))break;QO(t,1),UO(t,e.valueOf())}else{var s=e;if(t.writeByte(10),YO(t,s,n))break;var l=!0,u=s.axClass;if(u){var c=u.classInfo;l=!c.instanceInfo.isSealed();var h=t.sec.classAliases.getAliasByClass(u)||"",p=n.traits.indexOf(u),d=null;if(p<0){d=c.instanceInfo.runtimeTraits.getSlotPublicTraitNames(),n.traits.push(u),n.traitNames.push(d),QO(t,(l?11:3)+(d.length<<4)),HO(t,h,n);for(var f=0;f<d.length;f++)HO(t,d[f],n)}else d=n.traitNames[p],QO(t,1+(p<<2));for(f=0;f<d.length;f++)qO(t,s.axGetPublicProperty(d[f]),n)}else QO(t,11),HO(t,"",n);l&&(LO(s,(function(e,i){HO(t,e,n),qO(t,i,n)})),HO(t,"",n))}return}}var KO,WO=function(){function t(){}return t.write=function(t,e){qO(t,e,new RO)},t.read=function(t){return XO(t,new RO)},t}();!function(t){t[t.AMF0=0]="AMF0",t[t.AMF3=3]="AMF3",t[t.DEFAULT=3]="DEFAULT"}(KO||(KO={}));var JO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"dynamicPropertyWriter",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),e.AMF0=KO.AMF0,e.AMF3=KO.AMF3,e.DEFAULT=KO.DEFAULT,e}(Hb),ZO=function(){return function(){}}(),$O=function(t){function e(n){var i,r=t.call(this)||this;ZO.symbolForConstructor&&(n=ZO.symbolForConstructor,ZO.symbolForConstructor=null);var o=0;if(n){if(n instanceof ArrayBuffer)i=n.slice(0);else if(Array.isArray(n))i=new Uint8Array(n).buffer;else if("buffer"in n)if(n.buffer instanceof ArrayBuffer)i=new Uint8Array(n.buffer).buffer;else if(n.buffer instanceof Uint8Array){var a=n.buffer.byteOffset;i=n.buffer.buffer.slice(a,a+n.buffer.length)}else i=n.buffer.slice();else wp("Source type.");o=i.byteLength}else i=new ArrayBuffer(e.INITIAL_SIZE);return r._buffer=i,r._length=o,r._position=0,r._resetViews(),r._objectEncoding=e.defaultObjectEncoding,r._littleEndian=!1,r._bitBuffer=0,r._bitLength=0,r}return o(e,t),e.classInitializer=function(){var t=Ha.prototype;Df(t,"$BgtoJSON",t.toJSON)},e.prototype.setArrayBuffer=function(t){this._buffer=t,this._length=this._buffer.byteLength,this._resetViews()},Object.defineProperty(e,"defaultObjectEncoding",{get:function(){return this._defaultObjectEncoding},set:function(t){t>>>=0,this._defaultObjectEncoding=t},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return"ByteArray"},e.prototype.readObject=function(){switch(this._objectEncoding){case JO.AMF0:return jO.read(this);case JO.AMF3:return WO.read(this);default:wp("Object Encoding")}},e.prototype.writeObject=function(t){switch(this._objectEncoding){case JO.AMF0:return jO.write(this,t);case JO.AMF3:return WO.write(this,t);default:wp("Object Encoding")}},e.prototype.axGetPublicProperty=function(t){return"number"==typeof t||rp(t=Nb(t))?this.axGetNumericProperty(t):this["$Bg"+t]},e.prototype.axGetNumericProperty=function(t){return this.getValue(t)},e.prototype.axSetPublicProperty=function(t,e){"number"==typeof t||rp(t=Nb(t))?this.axSetNumericProperty(t,e):this["$Bg"+t]=e},e.prototype.axSetNumericProperty=function(t,e){this.setValue(t,e)},e.prototype.axGetProperty=function(e){var n=e.name;return"number"==typeof n||rp(n=Nb(n))?this.getValue(+n):t.prototype.axGetProperty.call(this,e)},e.prototype.axSetProperty=function(e,n,i){var r=e.name;"number"==typeof r||rp(r=Nb(r))?this.setValue(+r,n):t.prototype.axSetProperty.call(this,e,n,i)},e.classNatives=[Ha],e.instanceNatives=[Ha.prototype],e.INITIAL_SIZE=128,e._defaultObjectEncoding=JO.DEFAULT,e}(Hb),tM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.classInitializer=function(){Df(this,"$Bgargv",this.sec.createArray([]))},Object.defineProperty(e,"ime",{get:function(){return null},enumerable:!1,configurable:!0}),e.setClipboard=function(t){t=yb(t),null!==Bf&&Bf.setClipboard(t)},Object.defineProperty(e,"totalMemoryNumber",{get:function(){return 2097152},enumerable:!1,configurable:!0}),Object.defineProperty(e,"freeMemory",{get:function(){return 1048576},enumerable:!1,configurable:!0}),Object.defineProperty(e,"privateMemory",{get:function(){return 1048576},enumerable:!1,configurable:!0}),Object.defineProperty(e,"useCodePage",{get:function(){return this._useCodePage},set:function(t){this._useCodePage=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"vmVersion",{get:function(){return"1.0 Shumway - Mozilla Research"},enumerable:!1,configurable:!0}),e.pause=function(){},e.resume=function(){},e.exit=function(t){},e.gc=function(){},e.pauseForGCIfCollectionImminent=function(t){},e.disposeXML=function(t){},Object.defineProperty(e,"swfVersion",{get:function(){return 19},enumerable:!1,configurable:!0}),Object.defineProperty(e,"apiVersion",{get:function(){return 26},enumerable:!1,configurable:!0}),e.getArgv=function(){return[]},e.getRunmode=function(){return"mixed"},e._useCodePage=!1,e}(Hb),eM=tM;function nM(){iM.Object=Hb,iM.Class=Xb,iM.Function=vx,iM.Boolean=Tx,iM["builtin.as$0.MethodClosure"]=bx,iM.Number=xx,iM.int=Cx,iM.uint=Dx,iM.String=Sx,iM.Array=ex,iM["__AS3__.vec.Vector"]=Rx,iM["__AS3__.vec.Vector$object"]=Nx,iM["__AS3__.vec.Vector$int"]=Fx,iM["__AS3__.vec.Vector$uint"]=kx,iM["__AS3__.vec.Vector$double"]=Ux,iM.Namespace=TM,iM.QName=PM,iM.XML=OM,iM.XMLList=RM,iM["flash.xml.XMLNode"]=NM,iM["flash.xml.XMLDocument"]=FM,iM["flash.xml.XMLParser"]=jM,iM["flash.xml.XMLTag"]=kM,iM["flash.xml.XMLNodeType"]=UM,iM.Math=Vx,iM.Date=DO,iM.RegExp=AO,iM.JSON=CO,iM["flash.utils.Proxy"]=PO,iM["flash.utils.Dictionary"]=MO,iM["flash.utils.ByteArray"]=$O,iM["avmplus.System"]=eM,iM["avmplus.File"]=GM,iM.Error=nx,iM.DefinitionError=ix,iM.EvalError=rx,iM.RangeError=ox,iM.ReferenceError=ax,iM.SecurityError=sx,iM.SyntaxError=lx,iM.TypeError=ux,iM.URIError=cx,iM.VerifyError=hx,iM.UninitializedError=px,iM.ArgumentError=dx,iM["flash.errors.IOError"]=fx,iM["flash.errors.EOFError"]=_x,iM["flash.errors.MemoryError"]=gx,iM["flash.errors.IllegalOperationError"]=mx}var iM={},rM={},oM=[];function aM(t,e){return"object"==typeof t&&t&&(t.axClass===e.AXXML||t.axClass===e.AXXMLList||t.axClass===e.AXQName||t.axClass===e.AXNamespace)}function sM(t,e){return"object"==typeof e&&e&&(e.axClass===t.AXXML||e.axClass===t.AXXMLList)}function lM(t,e){if(!t||t.axClass!==e.AXXML)return yb(t);switch(t._kind){case 3:case 2:return t._value;default:if(t.hasSimpleContent()){for(var n="",i=0;i<t._children.length;i++){var r=t._children[i];4!==r._kind&&5!==r._kind&&(n+=lM(r,e))}return n}return mM(e,t)}}function uM(t,e){if(sM(t,e))return e.toXMLString();e=yb(e);for(var n,i=0;i<e.length&&"&"!==(n=e[i])&&"<"!==n&&">"!==n;)i++;if(i>=e.length)return e;for(var r=e.substring(0,i);i<e.length;)switch(n=e[i++]){case"&":r+="&amp;";break;case"<":r+="&lt;";break;case">":r+="&gt;";break;default:r+=n}return r}function cM(t){t=String(t);for(var e,n=0;n<t.length&&"&"!==(e=t[n])&&"<"!==e&&'"'!==e&&"\n"!==e&&"\r"!==e&&"\t"!==e;)n++;if(n>=t.length)return t;for(var i=t.substring(0,n);n<t.length;)switch(e=t[n++]){case"&":i+="&amp;";break;case"<":i+="&lt;";break;case'"':i+="&quot;";break;case"\n":i+="&#xA;";break;case"\r":i+="&#xD;";break;case"\t":i+="&#x9;";break;default:i+=e}return i}function hM(t,e){var n=t[e];return" "===n||"\n"===n||"\r"===n||"\t"===n}function pM(t){for(var e=0;e<t.length;e++){var n=t[e];if(" "!==n&&"\n"!==n&&"\r"!==n&&"\t"!==n)return!1}return!0}function dM(t){for(var e=0;e<t.length&&hM(t,e);)e++;if(e>=t.length)return"";for(var n=t.length-1;hM(t,n);)n--;return 0===e&&n===t.length-1?t:t.substring(e,n+1)}var fM=[];function _M(t){if(t>0){if(void 0!==fM[t])return fM[t];for(var e="",n=0;n<t;n++)e+=" ";return fM[t]=e,e}return""}function gM(t){for(var e,n=1;;){if(e="_ns"+n,!t.some((function(t){return t.prefix===e})))return e;n++}}function mM(t,e){if(null==e)throw new TypeError;return uM(t,e)}function yM(t,e){if(null===t&&e.throwError("TypeError",kb.ConvertNullToObjectError),void 0===t&&e.throwError("TypeError",kb.ConvertUndefinedToObjectError),t.axClass===e.AXXML)return t;if(t.axClass===e.AXXMLList)return 1!==t._children.length&&e.throwError("TypeError",kb.XMLMarkupMustBeWellFormed),t._children[0];var n=e.xmlParser.parseFromString(yb(t)),i=n._children.length;return 0===i?MM(e,3):1===i?(n._children[0]._parent=null,n._children[0]):2===i?(n._children[1]._parent=null,n._children[1]):void e.throwError("TypeError",kb.XMLMarkupMustBeWellFormed)}function AM(t,e){if(null===t&&e.sec.throwError("TypeError",kb.ConvertNullToObjectError),void 0===t&&e.sec.throwError("TypeError",kb.ConvertUndefinedToObjectError),t.axClass!==e.sec.AXXML){var n=yM('<parent xmlns="'+cM(xM(e.sec).uri)+'">'+t+"</parent>",e.sec)._children;if(n)for(var i=0;i<n.length;i++){var r=n[i];r._parent=null,e.append(r)}}else e.append(t)}function vM(t,e){if(void 0===t)return wM;var n;if("object"==typeof t&&null!==t){if(t instanceof vb)return t;if(t.axClass===e.AXQName)return t.name;n=String(t)}else"number"==typeof t?n=t+"":"string"==typeof t?n="*"===t?null:t:e.throwError("TypeError",kb.XMLInvalidName,t);return n&&"@"===n[0]?("*"===(n=n.substr(1))&&(n=null),new vb(null,0,13,[_b.PUBLIC],n)):new vb(null,0,7,[_b.PUBLIC],n)}function bM(t,e){var n=EM;if(n.kind=t.kind,t.name&&t.name.axClass===e.AXQName&&(t=t.name.name),t.isQName())n.name=t.name,n.namespaces=t.namespaces;else if(t.isAnyNamespace())n.namespaces=t.namespaces;else{for(var i=xM(e),r=t.namespaces,o=!1,a=0;a<r.length;a++){var s=r[a];if(s.uri===i.uri&&s.prefix===i.prefix&&s.type===i.type){o=!0;break}}n.namespaces=o?t.namespaces:t.namespaces.concat(i)}var l=t.name;return t.isAnyName()||"*"===l||null===l?n.name=null:l.length>1&&"@"===l[0]?n.isAttribute()?n.name=l:(n.name="@*"===l?null:l.substr(1),n.kind=1===n.namespaces.length?13:14):n.name=l,n}function xM(t){for(var e=0===Yb.length?null:Yb[Yb.length-1].topScope();e;){if(e.defaultNamespace)return e.defaultNamespace;e=e.parent}return t.AXNamespace.defaultNamespace||(t.AXNamespace.defaultNamespace=new _b(0,"default","")),t.AXNamespace.defaultNamespace}function CM(t,e){for(var n=t.uri,i=0;e&&i<e.length;i++)if(n===e[i].uri)return e[i];return t.namespaces[0]}var IM,EM=new vb(null,0,7,[],null,null,!0),wM=new vb(null,0,7,[],null,null,!0),SM=function(){function t(){}return t.prototype.resolveEntities=function(t){return t.replace(/&([^;]+);/g,(function(t,e){if("#x"===e.substring(0,2))return String.fromCharCode(parseInt(e.substring(2),16));if("#"===e.substring(0,1))return String.fromCharCode(parseInt(e.substring(1),10));switch(e){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return t}))},t.prototype.parseContent=function(t,e){var n=e,i=[];function r(){for(;n<t.length&&hM(t,n);)++n}for(;n<t.length&&!hM(t,n)&&">"!==t[n]&&"/"!==t[n];)++n;var o=t.substring(e,n);for(r();n<t.length&&">"!==t[n]&&"/"!==t[n]&&"?"!==t[n];){r();for(var a,s="";n<t.length&&!hM(t,n)&&"="!==t[n];)s+=t[n],++n;if(r(),"="!==t[n])return null;++n,r();var l=t[n];if('"'!==l&&"'"!==l)return null;var u=t.indexOf(l,++n);if(u<0)return null;a=t.substring(n,u),i.push({name:s,value:this.resolveEntities(a)}),n=u+1,r()}return{name:o,attributes:i,parsed:n-e}},t.prototype.parseProcessingInstruction=function(t,e){var n=e;for(;n<t.length&&!hM(t,n)&&">"!==t[n]&&"/"!==t[n];)++n;var i=t.substring(e,n);!function(){for(;n<t.length&&hM(t,n);)++n}();for(var r=n;n<t.length&&("?"!==t[n]||">"!=t[n+1]);)++n;return{name:i,value:t.substring(r,n),parsed:n-e}},t.prototype.parseXml=function(t){for(var e=0;e<t.length;){var n=e;if("<"===t[e]){var i=void 0;switch(t[++n]){case"/":if(++n,(i=t.indexOf(">",n))<0)return void this.onError(-9);this.onEndElement(t.substring(n,i)),n=i+1;break;case"?":++n;var r=this.parseProcessingInstruction(t,n);if("?>"!=t.substring(n+r.parsed,n+r.parsed+2))return void this.onError(-3);this.onPi(r.name,r.value),n+=r.parsed+2;break;case"!":if("--"===t.substring(n+1,n+3)){if((i=t.indexOf("--\x3e",n+3))<0)return void this.onError(-5);this.onComment(t.substring(n+3,i)),n=i+3}else if("[CDATA["===t.substring(n+1,n+8)){if((i=t.indexOf("]]>",n+8))<0)return void this.onError(-2);this.onCdata(t.substring(n+8,i)),n=i+3}else{if("DOCTYPE"!==t.substring(n+1,n+8))return void this.onError(-6);var o=t.indexOf("[",n+8),a=!1;if((i=t.indexOf(">",n+8))<0)return void this.onError(-4);if(o>0&&i>o){if((i=t.indexOf("]>",n+8))<0)return void this.onError(-4);a=!0}var s=t.substring(n+8,i+(a?1:0));this.onDoctype(s),n=i+(a?2:1)}break;default:var l=this.parseContent(t,n);if(null===l)return void this.onError(-6);var u=!1;if("/>"===t.substring(n+l.parsed,n+l.parsed+2))u=!0;else if(">"!==t.substring(n+l.parsed,n+l.parsed+1))return void this.onError(-9);this.onBeginElement(l.name,l.attributes,u),n+=l.parsed+(u?2:1)}}else{do{}while(n++<t.length&&"<"!==t[n]);var c=t.substring(e,n);this.onText(this.resolveEntities(c))}e=n}},t.prototype.onPi=function(t,e){},t.prototype.onComment=function(t){},t.prototype.onCdata=function(t){},t.prototype.onDoctype=function(t){},t.prototype.onText=function(t){},t.prototype.onBeginElement=function(t,e,n){},t.prototype.onEndElement=function(t){},t.prototype.onError=function(t){},t}(),DM=function(t){function e(e){var n=t.call(this)||this;return n.sec=e,n.scopes=[],n}return o(e,t),e.prototype.isWhitespacePreserved=function(){for(var t=this.scopes,e=t.length-1;e>=0;--e)if("preserve"===t[e].space)return!0;return!1},e.prototype.lookupDefaultNs=function(){for(var t=this.scopes,e=t.length-1;e>=0;--e)if("xmlns"in t[e])return t[e].xmlns;return""},e.prototype.lookupNs=function(t){for(var e=this.scopes,n=e.length-1;n>=0;--n)if(t in e[n].lookup)return e[n].lookup[t]},e.prototype.getName=function(t,e){var n=t.indexOf(":");if(n>=0){var i=t.substring(0,n),r=t.substring(n+1),o=this.lookupNs(i);return void 0===o&&this.sec.throwError("TypeError",kb.XMLPrefixNotBound,i,r),{name:o+"::"+r,localName:r,prefix:i,namespace:o}}return e?{name:t,localName:t,prefix:"",namespace:this.lookupDefaultNs()}:{name:t,localName:t,prefix:"",namespace:""}},e.prototype.onError=function(t){switch(t){case-6:return void this.sec.throwError("TypeError",kb.XMLMalformedElement);case-9:return void this.sec.throwError("TypeError",kb.XMLUnterminatedElement);case-4:return void this.sec.throwError("TypeError",kb.XMLUnterminatedDocTypeDecl);case-2:return void this.sec.throwError("TypeError",kb.XMLUnterminatedCData);case-5:return void this.sec.throwError("TypeError",kb.XMLUnterminatedComment);case-3:return void this.sec.throwError("TypeError",kb.XMLUnterminatedXMLDecl)}},e.prototype.onPi=function(t,e){this.pi(t,e)},e.prototype.onComment=function(t){this.comment(t)},e.prototype.onCdata=function(t){this.cdata(t)},e.prototype.onDoctype=function(t){this.doctype(t)},e.prototype.onText=function(t){this.text(t,this.isWhitespacePreserved())},e.prototype.onBeginElement=function(t,e,n){for(var i=this.scopes,r={namespaces:[],lookup:Object.create(null),inScopes:null},o=0;o<e.length;++o){var a=(d=e[o]).name;if("xmlns:"===a.substring(0,6)){var s=a.substring(6),l=d.value;if(this.lookupNs(s)!==l){r.lookup[s]=dM(l);var u=mb(0,l,s);r.namespaces.push(u)}e[o]=null}else if("xmlns"===a){l=d.value;if(this.lookupDefaultNs()!==l){r.xmlns=dM(l);u=gb(0,l);r.namespaces.push(u)}e[o]=null}else if("xml:"===a.substring(0,4)){var c=a.substring(4);r[c]=dM(d.value)}}var h=[];r.namespaces.forEach((function(t){t.prefix&&r.lookup[t.prefix]!==t.uri||h.push(t)})),i[i.length-1].inScopes.forEach((function(t){(t.prefix&&!(t.prefix in r.lookup)||!t.prefix&&!("xmlns"in r))&&h.push(t)})),r.inScopes=h,i.push(r);var p=[];for(o=0;o<e.length;++o){var d;(d=e[o])&&p.push({name:this.getName(d.name,!1),value:d.value})}this.beginElement(this.getName(t,!0),p,h,n),n&&i.pop()},e.prototype.onEndElement=function(t){this.endElement(this.getName(t,!0)),this.scopes.pop()},e.prototype.beginElement=function(t,e,n,i){var r=this.currentElement;this.elementsStack.push(r),this.currentElement=MM(this.sec,1,t.namespace,t.localName,t.prefix);for(var o=0;o<e.length;++o){var a=e[o],s=MM(this.sec,2,a.name.namespace,a.name.localName,a.name.prefix);s._value=a.value,s._parent=this.currentElement,this.currentElement._attributes.push(s)}for(o=0;o<n.length;++o)this.currentElement._inScopeNamespaces.push(n[o]);r.insert(r._children.length,this.currentElement),i&&(this.currentElement=this.elementsStack.pop())},e.prototype.endElement=function(t){this.currentElement=this.elementsStack.pop()},e.prototype.text=function(t,e){if(this.sec.AXXML.ignoreWhitespace&&(t=dM(t)),!(0===t.length||e&&this.sec.AXXML.ignoreWhitespace)){var n=MM(this.sec);n._value=t,this.currentElement.insert(this.currentElement._children.length,n)}},e.prototype.cdata=function(t){var e=MM(this.sec);e._value=t,this.currentElement.insert(this.currentElement._children.length,e)},e.prototype.comment=function(t){if(!this.sec.AXXML.ignoreComments){var e=MM(this.sec,4,"","");e._value=t,this.currentElement.insert(this.currentElement._children.length,e)}},e.prototype.pi=function(t,e){if(!this.sec.AXXML.ignoreProcessingInstructions){var n=MM(this.sec,5,"",t);n._value=e,this.currentElement.insert(this.currentElement._children.length,n)}},e.prototype.doctype=function(t){},e.prototype.parseFromString=function(t,e){var n=this.currentElement=MM(this.sec,1,"","","");this.elementsStack=[];var i=xM(this.sec),r=[{namespaces:[],lookup:{xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace"},inScopes:[i],space:"default",xmlns:i.uri}];if(this.scopes=r,this.parseXml(t),this.currentElement=null,this.elementsStack.length>0){var o=this.elementsStack.pop()._name.name;this.sec.throwError("TypeError",kb.XMLUnterminatedElementTag,o,o)}return this.elementsStack=null,n},e}(SM),TM=function(t){function e(e,n){var i=t.call(this)||this,r="",o="";if(1===arguments.length){if((s=e)instanceof _b)return i._ns=s,i;if(s&&"object"==typeof s)if(s.axClass===i.sec.AXNamespace){var a=s;o=a.prefix,r=a.uri}else s.axClass===i.sec.AXQName&&null!==s.uri&&(r=s.uri);else o=""===(r=lM(s,i.sec))?"":void 0}else{var s,l=e;""===(r=np(s=n)&&s.axClass===i.sec.AXQName&&null!==s.uri?s.uri:lM(s,i.sec))?void 0===l||""===lM(l,i.sec)?o="":i.sec.throwError("TypeError",kb.XMLNamespaceWithPrefixAndNoURI,l):o=void 0===l||!1===function(t,e){try{e.AXQName.Create(t)}catch(t){return!1}return!0}(l,i.sec)?void 0:lM(l,i.sec)}return i._ns=mb(0,r,o),i}return o(e,t),e.classInitializer=function(){Df(this,"$Bglength",2),Df(this.dPrototype,"$BgtoString",e.prototype.toString)},e.axApply=function(t,e){var n=e[0],i=e[1];if(1===e.length&&np(n)&&n.axClass===this.sec.AXNamespace)return n;switch(e.length){case 0:return this.sec.AXNamespace.Create();case 1:return this.sec.AXNamespace.Create(n);default:return this.sec.AXNamespace.Create(n,i)}},e.Create=function(t,e){var n=Object.create(this.sec.AXNamespace.tPrototype);return n.axInitializer.apply(n,arguments),n},e.FromNamespace=function(t){var e=Object.create(this.sec.AXNamespace.tPrototype);return e._ns=t,e},e.prototype.equals=function(t){return t&&t.axClass===this.axClass&&t._ns.uri===this._ns.uri||"string"==typeof t&&this._ns.uri===t},Object.defineProperty(e.prototype,"prefix",{get:function(){return this._ns.prefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uri",{get:function(){return this._ns.uri},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this===this.axClass.dPrototype?"":this._ns.uri},e.prototype.valueOf=function(){return this===this.axClass.dPrototype?"":this._ns.uri},e.instanceConstructor=e,e.defaultNamespace=_b.PUBLIC,e}(Hb),PM=function(t){function e(e,n){var i,r,o=t.call(this)||this;if(0===arguments.length?i="":1===arguments.length?i=e:(r=e,i=n),i&&i.axClass===o.sec.AXQName){if(arguments.length<2)return o.name=i.name,o;i=i.localName}i=void 0===i?"":lM(i,o.sec),void 0===r&&(r="*"===i?null:xM(o.sec));var a=i,s=null;return null!==r&&(r.axClass!==o.sec.AXNamespace&&(r=o.sec.AXNamespace.Create(r)),s=r._ns),o.name=new vb(null,0,7,[s],a),o}return o(e,t),e.classInitializer=function(){Df(this,"$Bglength",2),Df(this.dPrototype,"$BgtoString",e.prototype.ecmaToString)},e.Create=function(t,e,n){var i=Object.create(this.sec.AXQName.tPrototype);return i.axInitializer.apply(i,arguments),i},e.FromMultiname=function(t){var e=Object.create(this.sec.AXQName.tPrototype);return e.name=t,e},e.axApply=function(t,e){var n=e[0],i=e[1];if(1===e.length&&n&&n.axClass===this.sec.AXQName)return n;switch(e.length){case 0:return this.sec.AXQName.Create();case 1:return this.sec.AXQName.Create(n);default:return this.sec.AXQName.Create(n,i)}},e.prototype.equals=function(t){return t&&t.axClass===this.sec.AXQName&&t.uri===this.uri&&t.name.name===this.name.name||"string"==typeof t&&this.toString()===t},Object.defineProperty(e.prototype,"localName",{get:function(){return""!=this.name.name?this.name.name:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uri",{get:function(){var t=this.name.namespaces;return t.length>1?"":t[0]?t[0].uri:null},enumerable:!1,configurable:!0}),e.prototype.ecmaToString=function(){return this&&this===this.sec.AXQName.dPrototype?"":(this&&this.axClass===this.sec.AXQName||this.sec.throwError("TypeError",kb.InvokeOnIncompatibleObjectError,"QName.prototype.toString"),this.toString())},e.prototype.toString=function(){var t=this.uri;if(""===t)return this.name.name;if(null===t)return"*::"+this.name.name;var e=(t+="").charCodeAt(t.length-1);return e>=57344&&e<=63743&&t.substr(0,t.length-1),this.name.name},e.prototype.valueOf=function(){return this},Object.defineProperty(e.prototype,"prefix",{get:function(){return this.name.namespaces[0]?this.name.namespaces[0].prefix:null},enumerable:!1,configurable:!0}),e}(Hb);!function(t){t[t.FLAG_IGNORE_COMMENTS=1]="FLAG_IGNORE_COMMENTS",t[t.FLAG_IGNORE_PROCESSING_INSTRUCTIONS=2]="FLAG_IGNORE_PROCESSING_INSTRUCTIONS",t[t.FLAG_IGNORE_WHITESPACE=4]="FLAG_IGNORE_WHITESPACE",t[t.FLAG_PRETTY_PRINTING=8]="FLAG_PRETTY_PRINTING",t[t.ALL=15]="ALL"}(IM||(IM={}));var BM=[null,"element","attribute","text","comment","processing-instruction"],OM=function(t){function e(e){var n=t.call(this)||this;if(n._parent=null,ap(e)&&(e=""),"string"==typeof e&&0===e.length)return n._kind=3,n._value="",n;var i=yM(e,n.sec);aM(e,n.sec)&&(i=i._deepCopy()),n._kind=i._kind,n._name=i._name,n._value=i._value,n._attributes=i._attributes,n._inScopeNamespaces=i._inScopeNamespaces;var r=i._children;if(n._children=r,r)for(var o=0;o<r.length;o++){r[o]._parent=n}return n}return o(e,t),e.classInitializer=function(){Df(this,"$Bglength",1);var t=this.dPrototype,n=e.prototype;bb(t,"$BgvalueOf",n.valueOf),Df(t,"$BghasOwnProperty",n.native_hasOwnProperty),Df(t,"$BgpropertyIsEnumerable",n.native_propertyIsEnumerable),bb(this,"$Bgsettings",e.native_settings),bb(this,"$BgsetSettings",e.native_setSettings),bb(this,"$BgdefaultSettings",e.native_defaultSettings),bb(t,"$BgtoString",n.toString),bb(t,"$BgaddNamespace",n.addNamespace),bb(t,"$BgappendChild",n.appendChild),bb(t,"$Bgattribute",n.attribute),bb(t,"$Bgattributes",n.attributes),bb(t,"$Bgchild",n.child),bb(t,"$BgchildIndex",n.childIndex),bb(t,"$Bgchildren",n.children),bb(t,"$Bgcomments",n.comments),bb(t,"$Bgcontains",n.contains),bb(t,"$Bgcopy",n.copy),bb(t,"$Bgdescendants",n.descendants),bb(t,"$Bgelements",n.elements),bb(t,"$BghasComplexContent",n.hasComplexContent),bb(t,"$BghasSimpleContent",n.hasSimpleContent),bb(t,"$BginScopeNamespaces",n.inScopeNamespaces),bb(t,"$BginsertChildAfter",n.insertChildAfter),bb(t,"$BginsertChildBefore",n.insertChildBefore),bb(t,"$Bglength",n.length),bb(t,"$BglocalName",n.localName),bb(t,"$Bgname",n.name),bb(t,"$Bgnamespace",n.namespace),bb(t,"$BgnamespaceDeclarations",n.namespaceDeclarations),bb(t,"$BgnodeKind",n.nodeKind),bb(t,"$Bgnormalize",n.normalize),bb(t,"$Bgparent",n.parent),bb(t,"$BgprocessingInstructions",n.processingInstructions),bb(t,"$BgprependChild",n.prependChild),bb(t,"$BgremoveNamespace",n.removeNamespace),bb(t,"$Bgreplace",n.replace),bb(t,"$BgsetChildren",n.setChildren),bb(t,"$BgsetLocalName",n.setLocalName),bb(t,"$BgsetName",n.setName),bb(t,"$BgsetNamespace",n.setNamespace),bb(t,"$Bgtext",n.text),bb(t,"$BgtoXMLString",n.toXMLString),bb(t,"$BgtoJSON",n.toJSON)},e.Create=function(t){var e=Object.create(this.sec.AXXML.tPrototype);return e.axInitializer(t),e},e.resetSettings=function(){this._flags=IM.ALL},e.native_settings=function(){var t=Object.create(this.sec.AXObject.tPrototype);return t.$BgignoreComments=this.ignoreComments,t.$BgignoreProcessingInstructions=this.ignoreProcessingInstructions,t.$BgignoreWhitespace=this.ignoreWhitespace,t.$BgprettyPrinting=this.prettyPrinting,t.$BgprettyIndent=this.prettyIndent,t},e.native_setSettings=function(t){if(ap(t))return this.ignoreComments=!0,this.ignoreProcessingInstructions=!0,this.ignoreWhitespace=!0,this.prettyPrinting=!0,void(this.prettyIndent=2);"boolean"==typeof t.$BgignoreComments&&(this.ignoreComments=t.$BgignoreComments),"boolean"==typeof t.$BgignoreProcessingInstructions&&(this.ignoreProcessingInstructions=t.$BgignoreProcessingInstructions),"boolean"==typeof t.$BgignoreWhitespace&&(this.ignoreWhitespace=t.$BgignoreWhitespace),"boolean"===t.$BgprettyPrinting&&(this.prettyPrinting=t.$BgprettyPrinting),"number"===t.$BgprettyIndent&&(this.prettyIndent=t.$BgprettyIndent)},e.native_defaultSettings=function(){return{__proto__:this.sec.AXObject.tPrototype,$BgignoreComments:!0,$BgignoreProcessingInstructions:!0,$BgignoreWhitespace:!0,$BgprettyPrinting:!0,$BgprettyIndent:2}},e.axApply=function(t,e){var n=e[0];return ap(n)&&(n=""),yM(n,this.sec)},e.prototype.valueOf=function(){return this},e.prototype.equals=function(t){if(t&&t.axClass===this.sec.AXXMLList)return t.equals(this);if(t&&t.axClass===this.sec.AXXML){var e=t;return(3===this._kind||2===this._kind)&&e.hasSimpleContent()||(3===e._kind||2===e._kind)&&this.hasSimpleContent()?this.toString()===t.toString():this._deepEquals(t)}return this.hasSimpleContent()&&this.toString()===yb(t)},e.prototype.init=function(t,e){switch(this._name=e,this._kind=t,this._parent=null,t){case 1:this._inScopeNamespaces=[],this._attributes=[],this._children=[];break;case 4:case 5:case 2:case 3:this._value=""}return this},e.prototype._deepEquals=function(t){if(!t||t.axClass!==this.sec.AXXML)return!1;var e=t;if(this._kind!==e._kind)return!1;if(!!this._name!=!!e._name||this._name&&!this._name.equalsQName(e._name))return!1;if(1!==this._kind)return this._value===e._value;var n=this._attributes,i=e._attributes;if(n.length!==i.length)return!1;var r=this._children,o=e._children;if(r.length!==o.length)return!1;t:for(var a=0;a<n.length;a++){for(var s=n[a],l=0;l<i.length;l++){var u=i[l];if(u._name.equalsQName(s._name)&&u._value===s._value)continue t}return!1}for(a=0;a<r.length;a++)if(!r[a].equals(o[a]))return!1;return!0},e.prototype._deepCopy=function(){var t=this._kind,e=this.sec.AXXML.Create();switch(e._kind=t,e._name=this._name,t){case 1:e._inScopeNamespaces=this._inScopeNamespaces.slice(),e._attributes=this._attributes.map((function(t){return(t=t._deepCopy())._parent=e,t})),e._children=this._children.map((function(t){return(t=t._deepCopy())._parent=e,t}));break;case 4:case 5:case 2:case 3:e._value=this._value}return e},e.prototype.resolveValue=function(){return this},e.prototype._addInScopeNamespace=function(t){this._inScopeNamespaces.some((function(e){return e.uri===t.uri&&e.prefix===t.prefix}))||this._inScopeNamespaces.push(t)},Object.defineProperty(e,"ignoreComments",{get:function(){return!!(this._flags&IM.FLAG_IGNORE_COMMENTS)},set:function(t){(t=!!t)?this._flags|=IM.FLAG_IGNORE_COMMENTS:this._flags&=~IM.FLAG_IGNORE_COMMENTS},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ignoreProcessingInstructions",{get:function(){return!!(this._flags&IM.FLAG_IGNORE_PROCESSING_INSTRUCTIONS)},set:function(t){(t=!!t)?this._flags|=IM.FLAG_IGNORE_PROCESSING_INSTRUCTIONS:this._flags&=~IM.FLAG_IGNORE_PROCESSING_INSTRUCTIONS},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ignoreWhitespace",{get:function(){return!!(this._flags&IM.FLAG_IGNORE_WHITESPACE)},set:function(t){(t=!!t)?this._flags|=IM.FLAG_IGNORE_WHITESPACE:this._flags&=~IM.FLAG_IGNORE_WHITESPACE},enumerable:!1,configurable:!0}),Object.defineProperty(e,"prettyPrinting",{get:function(){return!!(this._flags&IM.FLAG_PRETTY_PRINTING)},set:function(t){(t=!!t)?this._flags|=IM.FLAG_PRETTY_PRINTING:this._flags&=~IM.FLAG_PRETTY_PRINTING},enumerable:!1,configurable:!0}),Object.defineProperty(e,"prettyIndent",{get:function(){return this._prettyIndent},set:function(t){t|=0,this._prettyIndent=t},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this===this.axClass.dPrototype?"":this.hasComplexContent()?this.toXMLString():lM(this,this.sec)},e.prototype.native_hasOwnProperty=function(t){if(this===this.axClass.dPrototype)return Hb.prototype.native_hasOwnProperty.call(this,t);var e=vM(t,this.sec);return!!this.hasProperty(e)||this.axHasOwnProperty(e)},e.prototype.native_propertyIsEnumerable=function(t){return void 0===t&&(t=void 0),"0"===String(t)},e.prototype.addNamespace=function(t){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),this._addInScopeNamespace(t),this},e.prototype.appendChild=function(t){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),this.insert(this._children.length,t),this},e.prototype.attribute=function(t){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),ap(t)&&arguments.length>0&&this.sec.throwError("TypeError",kb.ConvertUndefinedToObjectError),t&&t.axClass===this.sec.AXQName?this.getProperty(t.name):("*"!==(t=yb(t))&&0!==arguments.length||(t=null),EM.name=t,EM.namespaces=[_b.PUBLIC],EM.kind=13,this.getProperty(EM))},e.prototype.attributes=function(){this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML");var t=this.sec.AXXMLList.CreateList(this,this._name);return Array.prototype.push.apply(t._children,this._attributes),t},e.prototype.child=function(t){if(this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),op(t)){var e=this.sec.AXXMLList.CreateList(null,null);return this._children&&t<this._children.length&&e.append(this._children[0|t]),e}var n;return t&&t.axClass===this.sec.AXQName?n=t.name:((n=EM).kind=7,n.name=lM(t,this.sec)),this.getProperty(n)},e.prototype.childIndex=function(){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),this._parent&&2!==this._kind?this._parent._children.indexOf(this):-1},e.prototype.children=function(){this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML");var t=this.sec.AXXMLList.CreateList(this,this._name);return t._children=this._children.concat(),t},e.prototype.comments=function(){this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML");var t=this.sec.AXXMLList.CreateList(this,this._name);return this._children&&this._children.forEach((function(e,n){4===e._kind&&t.append(e)})),t},e.prototype.contains=function(t){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),this===t},e.prototype.copy=function(){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),this._deepCopy()},e.prototype.descendants=function(t){this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML");var e=this.sec.AXXMLList.CreateList(this,this._name);return this.descendantsInto(vM(t,this.sec),e)},e.prototype.elements=function(t){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),this.getProperty(vM(t,this.sec))},e.prototype.hasComplexContent=function(){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),2!==this._kind&&4!==this._kind&&5!==this._kind&&3!==this._kind&&this._children.some((function(t){return 1===t._kind}))},e.prototype.hasSimpleContent=function(){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),4!==this._kind&&5!==this._kind&&(1!==this._kind||(!this._children&&0===this._children.length||this._children.every((function(t){return 1!==t._kind}))))},e.prototype.inScopeNamespaces=function(){this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML");for(var t=this._inScopeNamespacesImpl(),e=[],n=0;n<t.length;n++){var i=this.sec.AXNamespace;e[n]=i.FromNamespace(t[n])}return this.sec.AXArray.axBox(e)},e.prototype._inScopeNamespacesImpl=function(){for(var t=this,e=[],n=e;null!==t;){for(var i=t._inScopeNamespaces,r=0;i&&r<i.length;r++){var o=i[r];n[o.prefix]||(n[o.prefix]=o,e.push(o))}t=t._parent}return e},e.prototype.insertChildAfter=function(t,e){if(this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),!(this._kind>1)){if(null==t)return this.insert(0,e),this;if(t.axClass===this.sec.AXXMLList&&1===t._children.length&&(t=t._children[0]),t.axClass===this.sec.AXXML)for(var n=0;n<this._children.length;n++){if(this._children[n]===t)return this.insert(n+1,e),this}}},e.prototype.insertChildBefore=function(t,e){if(this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),!(this._kind>1)){if(null==t)return this.insert(this._children.length,e),this;if(t.axClass===this.sec.AXXMLList&&1===t._children.length&&(t=t._children[0]),t.axClass===this.sec.AXXML)for(var n=0;n<this._children.length;n++){if(this._children[n]===t)return this.insert(n,e),this}}},e.prototype.length=function(){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),this._children?this._children.length:0},e.prototype.localName=function(){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),""!=this._name.name?this._name.name:null},e.prototype.name=function(){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),this.sec.AXQName.FromMultiname(this._name)},e.prototype.namespace=function(t){if(this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),0===arguments.length&&this._kind>=3)return null;var e=this._inScopeNamespacesImpl();if(0===arguments.length)return this.sec.AXNamespace.FromNamespace(CM(this._name,e));t=yb(t);for(var n=0;n<e.length;n++){var i=e[n];if(i.prefix===t)return this.sec.AXNamespace.FromNamespace(i)}},e.prototype.namespaceDeclarations=function(){this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML")},e.prototype.nodeKind=function(){return this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML"),BM[this._kind]},e.prototype.normalize=function(){this&&this.axClass===this.sec.AXXML||this.sec.throwError("TypeError",kb.CheckTypeFailedError,this,"XML");for(var t=0;t<this._children.length;){var e=this._children[t];if(1===e._kind)e.normalize(),t++;else if(3===e._kind){for(;t+1<this._children.length;){var n=this._children[t+1];if(3!==n._kind)break;e._value+=n._value,this.removeByIndex(t+1)}0===e._value.length||pM(e._value)?this.removeByIndex(t):t++}else t++}return this},e.prototype.removeByIndex=function(t){this._children[t]._parent=null,this._children.splice(t,1)},e.prototype.parent=function(){return this._parent||void 0},e.prototype.processingInstructions=function(t){var e=this.sec.AXXMLList.CreateList(this,this._name);return e._targetObject=this,e._targetProperty=null,this.processingInstructionsInto(vM(t,this.sec),e)},e.prototype.processingInstructionsInto=function(t,e){var n=t||"*",i=this._children;if(!i)return e;for(var r=0;r<i.length;r++){var o=i[r];5!==o._kind||"*"!==n&&o._name.name!==n||e._children.push(o)}return e},e.prototype.prependChild=function(t){return this.insert(0,t),this},e.prototype.removeNamespace=function(t){},e.prototype.replace=function(t,e){if(1===this._kind){var n;n=!e||e.axClass!==this.axClass&&e.axClass!==this.sec.AXXMLList?yb(e):e._deepCopy();var i=vM(t,this.sec);if(op(i.name))return this._replaceByIndex(0|i.name,n),this;for(var r=i.isAnyName(),o=-1,a=this._children,s=a.length;s--;){var l=a[s];(r||1===l._kind&&l._name.matches(i))&&(-1!==o&&this.deleteByIndex(o),o=s)}return-1===o||this._replaceByIndex(o,n),this}},e.prototype._replaceByIndex=function(t,e){if(this._kind>1)return this;var n=this._children;if(t>n.length&&(t=n.length),e&&e.axClass===this.axClass&&2!==e._kind){if(1===e._kind)for(var i=this;i;)i===e&&this.sec.throwError("Error",kb.XMLIllegalCyclicalLoop),i=i._parent;e._parent=this,n[t]&&(n[t]._parent=null),n[t]=e}else if(e&&e.axClass===this.sec.AXXMLList)if(0===e._children.length)this.deleteByIndex(t);else{var r=e._children.length;if(t<n.length){n[t]._parent=null;for(var o=n.length-1;o>t;o--)n[o+r]=n[o]}for(o=0;o<r;o++){var a=e._children[o];a._parent=this,n[o+t]=a}}else{var s=yb(e),l=this.axClass.Create();l._kind=3,l._value=s,l._parent=this,n[t]&&(n[t]._parent=null),n[t]=l}},e.prototype.setChildren=function(t){return this.setProperty(wM,t),this},e.prototype.setLocalName=function(t){var e;3!==this._kind&&4!==this._kind&&(e=t&&t.axClass===this.sec.AXQName?t.localName:yb(t),this._name.name=e)},e.prototype.setName=function(t){if(3!==this._kind&&4!==this._kind){t&&t.axClass===this.sec.AXQName&&null===t.uri&&(t=t.localName);var e=this.sec.AXQName.Create(t).name;5===this._kind&&(e.namespaces[0]=_b.PUBLIC),this._name=e;var n=this;if(2===this._kind){if(null===this._parent)return;n=this._parent}n.addInScopeNamespace(e.namespaces[0])}},e.prototype.setNamespace=function(t){if(3!==this._kind&&4!==this._kind&&5!==this._kind){var e=this.sec.AXNamespace.Create(t)._ns;this._name.namespaces=[e],2===this._kind?this._parent&&this._parent.addInScopeNamespace(e):1===this._kind&&this.addInScopeNamespace(e)}},e.prototype.text=function(){var t=this.sec.AXXMLList.CreateList(this,this._name);return this._children&&this._children.forEach((function(e){3===e._kind&&t.append(e)})),t},e.prototype.toXMLString=function(){return this.toXMLStringImpl()},e.prototype.toXMLStringImpl=function(t,e){var n=this,i=this.sec,r=i.AXXML.prettyPrinting;e|=0;var o=r?_M(e):"";switch(n._kind){case 3:return r?o+uM(i,dM(n._value)):uM(i,n._value);case 2:return o+cM(n._value);case 4:return o+"\x3c!--"+n._value+"--\x3e";case 5:return o+"<?"+n._name.name+" "+n._value+"?>"}t=t||[];for(var a=[],s=function(e){var i=n._inScopeNamespaces[e];t.every((function(t){return t.uri!==i.uri||t.prefix!==i.prefix}))&&a.push(i)},l=0;n._inScopeNamespaces&&l<n._inScopeNamespaces.length;l++)s(l);var u=t.concat(a),c=CM(n._name,u);if(void 0===c.prefix){var h=gM(u),p=mb(0,c.uri,h);a.push(p),u.push(p)}var d=(c.prefix?c.prefix+":":"")+n._name.name;o+="<"+d,n._attributes&&n._attributes.forEach((function(t){var e=t._name;if(void 0===(c=CM(e,u)).prefix){var n=gM(u),i=mb(0,c.uri,n);a.push(i),u.push(i)}}));for(l=0;l<a.length;l++)if(""!==(c=a[l]).uri&&"default"!==c.uri){var f=c.prefix?"xmlns:"+c.prefix:"xmlns";o+=" "+f+'="'+cM(c.uri)+'"'}if(n._attributes&&n._attributes.forEach((function(e){var n=e._name,i=CM(n,t),r=i.prefix?i.prefix+":"+n.name:n.name;o+=" "+r+'="'+cM(e._value)+'"'})),0===n._children.length)return o+="/>";o+=">";var _=n._children.length>1||1===n._children.length&&3!==n._children[0]._kind,g=r&&_?e+i.AXXML._prettyIndent:0;return n._children.forEach((function(t){r&&_&&(o+="\n"),o+=t.toXMLStringImpl(u,g)})),r&&_&&(o+="\n"+_M(e)),o+="</"+d+">"},e.prototype.toJSON=function(t){return"XML"},e.prototype.axGetEnumerableKeys=function(){if(this===this.axClass.dPrototype)return t.prototype.axGetEnumerableKeys.call(this);for(var e=[],n=0;n<this._children.length;n++)e.push(this._children[n]._name.name);return e},e.prototype.setProperty=function(t,e){var n,i=this.sec;if(t.isAnyName()||t.isAttribute()||t.name!==t.name>>>0||i.throwError("TypeError",kb.XMLAssignmentToIndexedXMLNotAllowed),3!==this._kind&&4!==this._kind&&5!==this._kind&&2!==this._kind)if(n=aM(e,i)&&3!==e._kind&&2!==e._kind?e._deepCopy():lM(e,i),t.isAttribute()){if(n&&n.axClass===i.AXXMLList)if(0===n._children.length)n="";else{for(var r=lM(n._children[0],i),o=1;o<n._children.length;o++)r+=" "+lM(n._children[o],i);n=r}else n=yb(n);var a=null,s=this._attributes,l=this._attributes=[];for(o=0;s&&o<s.length;o++){var u=s[o];if(u._name.matches(t)){if(a){u._parent=null;continue}a=u}l.push(u)}if(!a){if(t.isAnyName())return;var c="";1===t.namespaces.length&&t.namespaces[0]&&(c=t.namespaces[0].uri),(a=MM(i,2,c,t.name))._parent=this,l.push(a)}a._value=n}else{for(var h,p=t.isAnyName(),d=!aM(n,i)&&!p&&"*"!==t.name,f=t.isAnyNamespace(),_=this._children.length-1;_>=0;_--)(p||1===this._children[_]._kind&&this._children[_]._name.name===t.name)&&(f||1===this._children[_]._kind&&this._children[_]._name.matches(t))&&(void 0!==h&&this.deleteByIndex(h),h=_);if(void 0===h&&(h=this._children.length,d)){var g=t.namespaces[0],m=(c=null,void 0);if(null!==g.uri&&(c=g.uri,m=g.prefix),null===c){var y=xM(i);c=y.uri,m=y.prefix}var A=MM(i,1,c,t.name,m);A._parent=this,this._replaceByIndex(h,A),A.addInScopeNamespace(A._name.namespace)}if(d){var v=this._children[h]._children;for(o=v.length;o--;)v[o]._parent=null;v.length=0,""!==(r=lM(n,i))&&this._children[h]._replaceByIndex(0,r)}else this._replaceByIndex(h,n)}},e.prototype.axSetProperty=function(t,e,n){this!==this.axClass.dPrototype?this.setProperty(bM(t,this.sec),e):this[this.axResolveMultiname(t)]=e},e.prototype.getProperty=function(t){var e=t.name;if(op(e))return 0|e?null:this;var n=this.sec.AXXMLList.CreateList(this,t),i=0,r=t.isAnyName(),o=t.isAnyNamespace();if(t.isAttribute()){for(var a=0;this._attributes&&a<this._attributes.length;a++){var s=this._attributes[a];!r&&s._name.name!==e||!o&&!s._name.matches(t)||(n._children[i++]=s,So(n._children[0]))}return n}for(a=0;this._children&&a<this._children.length;a++){s=this._children[a];(r||1===s._kind&&s._name.name===e)&&(o||s._name.matches(t))&&(n._children[i++]=s,So(n._children[0]))}return n},e.prototype.axGetProperty=function(t){return this===this.axClass.dPrototype?this[this.axResolveMultiname(t)]:this.getProperty(bM(t,this.sec))},e.prototype.hasProperty=function(t){if(op(t.name))return!(0|t.name);var e=vM(t,this.sec),n=e.isAnyName(),i=e.isAnyNamespace();if(t.isAttribute()){for(var r=0;this._attributes&&r<this._attributes.length;r++){var o=this._attributes[r];if(n||o._name.matches(e))return!0}return!1}for(r=0;this._children&&r<this._children.length;r++){o=this._children[r];if((n||1===o._kind&&o._name.name===e.name)&&(i||1===o._kind&&o._name.matches(e)))return!0}return!1},e.prototype.deleteProperty=function(t){if(op(t.name))return!0;var e=vM(t,this.sec),n=e.name,i=t.isAnyName(),r=t.isAnyNamespace();if(t.isAttribute()){var o=this._attributes;if(o)for(var a=this._attributes=[],s=0;s<o.length;s++){var l=o[s],u=l._name;!i&&u.name!==n||!r&&!u.matches(e)?a.push(l):l._parent=null}}else if(this._children.some((function(t,n){return(i||1===t._kind&&t._name.name===e.name)&&(r||1===t._kind&&t._name.matches(e))})))return!0},e.prototype.axHasProperty=function(e){return this===this.axClass.dPrototype?t.prototype.axHasPropertyInternal.call(this,e):this.axHasPropertyInternal(e)},e.prototype.axHasPropertyInternal=function(t){return!!this.hasProperty(t)||!!this[this.axResolveMultiname(t)]},e.prototype.axDeleteProperty=function(t){return!!this.deleteProperty(t)||delete this[this.axResolveMultiname(t)]},e.prototype.axCallProperty=function(t,e){var n=this[this.axResolveMultiname(t)];return n||(n=this["$Bg"+t.name]),n?(Qb(this.sec,n,e.length),n.axApply(this,e)):this.hasSimpleContent()?this.sec.box(lM(this,this.sec)).axCallProperty(t,e):void this.sec.throwError("TypeError",kb.CallOfNonFunctionError,"value")},e.prototype._delete=function(t,e){},e.prototype.deleteByIndex=function(t){if(String(t>>>0)!==String(t))throw"TypeError in XML.prototype.deleteByIndex(): invalid index "+t;var e=this._children;t<e.length&&e[t]&&(e[t]._parent=null,e.splice(t,1))},e.prototype.insert=function(t,e){if(!(this._kind>1)){var n=t;if(e&&e.axClass===this.axClass)for(var i=this;i;)i===e&&this.sec.throwError("TypeError",kb.XMLIllegalCyclicalLoop),i=i._parent;var r=1;if(!e||e.axClass!==this.sec.AXXMLList||0!==(r=e._children.length)){for(var o=this._children,a=o.length-1;a>=n;a--)o[a+r]=o[a],So(o[0]);if(e&&e.axClass===this.sec.AXXMLList){r=e._children.length;for(a=0;a<r;a++)e._children[a]._parent=this,o[n+a]=e._children[a]}else e&&e.axClass===this.axClass||(e=this.sec.AXXML.Create(e)),e._parent=this,o||(this._children=o=[]),o[n]=e,So(o[0])}}},e.prototype.addInScopeNamespace=function(t){if(3!==this._kind&&4!==this._kind&&5!==this._kind&&2!==this._kind){var e=t.prefix;if(void 0!==e){if(""===e&&""===this._name.uri)return;var n=null;this._inScopeNamespaces.forEach((function(t,i){t.prefix===e&&(n=t)})),null!==n&&n.uri!==t.uri&&this._inScopeNamespaces.forEach((function(e,i){e.prefix===n.prefix&&(this._inScopeNamespaces[i]=t)})),this._name.prefix===e&&(this._name.prefix=void 0),this._attributes.forEach((function(t,n){t._name.prefix===e&&(t._name.prefix=void 0)}))}}},e.prototype.descendantsInto=function(t,e){if(1!==this._kind)return e;var n=e._children.length,i=t.isAnyName();return t.isAttribute()?this._attributes.forEach((function(r,o){(i||r._name.matches(t))&&(e._children[n++]=r,So(null!=e._children[0]))})):this._children.forEach((function(r,o){(i||r._name)&&(i||r._name.matches(t))&&(e._children[n++]=r,So(null!=e._children[0]))})),this._children.forEach((function(n,i){n.descendantsInto(t,e)})),e},e.instanceConstructor=e,e._flags=IM.ALL,e._prettyIndent=2,e}(Hb);function MM(t,e,n,i,r){void 0===e&&(e=3),void 0===n&&(n=""),void 0===i&&(i="");var o=t.AXXML.Create(),a=mb(0,n,r||""),s=new vb(null,0,2===e?13:7,[a],i,null);return o.init(e,s),o}var LM,RM=function(t){function e(e){var n=t.call(this)||this;if(n._children=[],ap(e)&&(e=""),!e)return n;if(e&&e.axClass===n.sec.AXXMLList)for(var i=e._children,r=0;r<i.length;r++){var o=i[r];n._children[r]=o,So(n._children[0])}else AM(e,n);return n}return o(e,t),e.classInitializer=function(){Df(this,"$Bglength",1);var t=this.dPrototype,n=e.prototype;Df(t,"$BgvalueOf",Object.prototype.$BgvalueOf),Df(t,"$BghasOwnProperty",n.native_hasOwnProperty),Df(t,"$BgpropertyIsEnumerable",n.native_propertyIsEnumerable),bb(t,"$BgtoString",n.toString),bb(t,"$BgaddNamespace",n.addNamespace),bb(t,"$BgappendChild",n.appendChild),bb(t,"$Bgattribute",n.attribute),bb(t,"$Bgattributes",n.attributes),bb(t,"$Bgchild",n.child),bb(t,"$BgchildIndex",n.childIndex),bb(t,"$Bgchildren",n.children),bb(t,"$Bgcomments",n.comments),bb(t,"$Bgcontains",n.contains),bb(t,"$Bgcopy",n.copy),bb(t,"$Bgdescendants",n.descendants),bb(t,"$Bgelements",n.elements),bb(t,"$BghasComplexContent",n.hasComplexContent),bb(t,"$BghasSimpleContent",n.hasSimpleContent),bb(t,"$BginScopeNamespaces",n.inScopeNamespaces),bb(t,"$BginsertChildAfter",n.insertChildAfter),bb(t,"$BginsertChildBefore",n.insertChildBefore),bb(t,"$Bglength",n.length),bb(t,"$BglocalName",n.localName),bb(t,"$Bgname",n.name),bb(t,"$Bgnamespace",n.namespace),bb(t,"$BgnamespaceDeclarations",n.namespaceDeclarations),bb(t,"$BgnodeKind",n.nodeKind),bb(t,"$Bgnormalize",n.normalize),bb(t,"$Bgparent",n.parent),bb(t,"$BgprocessingInstructions",n.processingInstructions),bb(t,"$BgprependChild",n.prependChild),bb(t,"$BgremoveNamespace",n.removeNamespace),bb(t,"$Bgreplace",n.replace),bb(t,"$BgsetChildren",n.setChildren),bb(t,"$BgsetLocalName",n.setLocalName),bb(t,"$BgsetName",n.setName),bb(t,"$BgsetNamespace",n.setNamespace),bb(t,"$Bgtext",n.text),bb(t,"$BgtoXMLString",n.toXMLString),bb(t,"$BgtoJSON",n.toJSON)},e.axApply=function(t,e){var n=e[0];if(ap(n)&&(n=""),n&&n.axClass===this.sec.AXXMLList)return n;var i=this.sec.AXXMLList.Create();return AM(n,i),i},e.addXML=function(t,e){var n;return t.axClass===t.sec.AXXML?(n=t.sec.AXXMLList.Create()).append(t):n=t,n.append(e),n},e.Create=function(t){var e=Object.create(this.sec.AXXMLList.tPrototype);return e.axInitializer(t),e},e.CreateList=function(t,e){var n=this.Create();return n._targetObject=t,n._targetProperty=e,n},e.prototype.valueOf=function(){return this},e.prototype.equals=function(t){var e=this._children;if(void 0===t&&0===e.length)return!0;if(t&&t.axClass===this.sec.AXXMLList){var n=t._children;if(n.length!==e.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].equals(n[i]))return!1;return!0}return 1===e.length&&e[0].equals(t)},e.prototype.toString=function(){if(this.hasComplexContent())return this.toXMLString();for(var t="",e=0;e<this._children.length;e++)t+=lM(this._children[e],this.sec);return t},e.prototype._deepCopy=function(){for(var t=this.sec.AXXMLList.CreateList(this._targetObject,this._targetProperty),e=this._children.length,n=0;n<e;n++)t._children[n]=this._children[n]._deepCopy(),So(t._children[0]);return t},e.prototype._shallowCopy=function(){for(var t=this.sec.AXXMLList.CreateList(this._targetObject,this._targetProperty),e=this._children.length,n=0;n<e;n++)t._children[n]=this._children[n],So(t._children[0]);return t},e.prototype.native_hasOwnProperty=function(t){if(t=yb(t),this===this.sec.AXXMLList.dPrototype)return Hb.prototype.native_hasOwnProperty.call(this,t);if(op(t))return(0|t)<this._children.length;for(var e=vM(t,this.sec),n=this._children,i=0;i<n.length;i++){var r=n[i];if(1===r._kind&&r.hasProperty(e))return!0}return!1},e.prototype.native_propertyIsEnumerable=function(t){return op(t)&&(0|t)<this._children.length},e.prototype.attribute=function(t){return ap(t)&&arguments.length>0&&this.sec.throwError("TypeError",kb.ConvertUndefinedToObjectError),t&&t.axClass===this.sec.AXQName?this.getProperty(t.name):("*"!==(t=yb(t))&&0!==arguments.length||(t=null),EM.name=t,EM.namespaces=[_b.PUBLIC],EM.kind=13,this.getProperty(EM))},e.prototype.attributes=function(){return EM.name=null,EM.namespaces=[],EM.kind=13,this.getProperty(EM)},e.prototype.child=function(t){if(op(t)){var e=this.sec.AXXMLList.CreateList(this._targetObject,this._targetProperty);return(0|t)<this._children.length&&(e._children[0]=this._children[0|t]._deepCopy(),So(e._children[0])),e}return this.getProperty(vM(t,this.sec))},e.prototype.children=function(){return this.getProperty(wM)},e.prototype.descendants=function(t){for(var e=vM(t,this.sec),n=this.sec.AXXMLList.CreateList(this._targetObject,this._targetProperty),i=0;i<this._children.length;i++){var r=this._children[i];1===r._kind&&r.descendantsInto(e,n)}return n},e.prototype.comments=function(){var t=this.sec.AXXMLList.CreateList(this._targetObject,this._targetProperty);return this._children.forEach((function(e){if(1===e._kind){var n=e.comments();Array.prototype.push.apply(t._children,n._children)}})),t},e.prototype.contains=function(t){for(var e=this._children,n=0;n<e.length;n++){if(e[n].equals(t))return!0}return!1},e.prototype.copy=function(){return this._deepCopy()},e.prototype.elements=function(t){var e=vM(t,this.sec),n=this.sec.AXXMLList.CreateList(this._targetObject,e);return this._children.forEach((function(t){if(1===t._kind){var i=t.elements(e);Array.prototype.push.apply(n._children,i._children)}})),n},e.prototype.hasComplexContent=function(){switch(this._children.length){case 0:return!1;case 1:return this._children[0].hasComplexContent();default:return this._children.some((function(t){return 1===t._kind}))}},e.prototype.hasSimpleContent=function(){switch(this._children.length){case 0:return!0;case 1:return this._children[0].hasSimpleContent();default:return this._children.every((function(t){return 1!==t._kind}))}},e.prototype.length=function(){return this._children.length},e.prototype.name=function(){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"name"),this._children[0].name()},e.prototype.normalize=function(){for(var t=0;t<this._children.length;){var e=this._children[t];if(1===e._kind)e.normalize(),t++;else if(3===e._kind){for(t++;t<this._children.length;){var n=this._children[t];if(3!==n._kind)break;e._value+=n._value,this.removeByIndex(t)}0===e._value.length?this.removeByIndex(t):t++}else t++}return this},e.prototype.parent=function(){var t=this._children;if(0!==t.length){for(var e=t[0]._parent,n=1;n<t.length;n++)if(t[n]._parent!==e)return;return e}},e.prototype.processingInstructions=function(t){var e=vM(t,this.sec),n=this.sec.AXXMLList.CreateList(this._targetObject,this._targetProperty);n._targetObject=this,n._targetProperty=null;for(var i=this._children,r=0;r<i.length;r++)i[r].processingInstructionsInto(e,n);return n},e.prototype.text=function(){var t=this.sec.AXXMLList.CreateList(this._targetObject,this._targetProperty);return this._children.forEach((function(e,n){if(1===e._kind){var i=e.text();i._children.length>0&&t._children.push(i)}})),t},e.prototype.toXMLString=function(){var t=this.sec;return this._children.map((function(e){return mM(t,e)})).join(t.AXXML.prettyPrinting?"\n":"")},e.prototype.toJSON=function(t){return"XMLList"},e.prototype.addNamespace=function(t){1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"addNamespace");var e=this._children[0];return e.addNamespace(t),e},e.prototype.appendChild=function(t){1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"appendChild");var e=this._children[0];return e.appendChild(t),e},e.prototype.append=function(t){var e=this._children,n=e.length;if(t&&t.axClass===this.sec.AXXMLList){this._targetObject=t._targetObject,this._targetProperty=t._targetProperty;var i=t._children;if(0===i.length)return;for(var r=0;r<i.length;r++)e[n+r]=i[r]}else e[n]=t},e.prototype.childIndex=function(){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"childIndex"),this._children[0].childIndex()},e.prototype.inScopeNamespaces=function(){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"inScopeNamespaces"),this._children[0].inScopeNamespaces()},e.prototype.insertChildAfter=function(t,e){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"insertChildAfter"),this._children[0].insertChildAfter(t,e)},e.prototype.insertChildBefore=function(t,e){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"insertChildBefore"),this._children[0].insertChildBefore(t,e)},e.prototype.nodeKind=function(){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"nodeKind"),this._children[0].nodeKind()},e.prototype.namespace=function(t){1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"namespace");var e=this._children[0];return arguments.length?e.namespace(t):e.namespace()},e.prototype.localName=function(){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"localName"),this._children[0].localName()},e.prototype.namespaceDeclarations=function(){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"namespaceDeclarations"),this._children[0].namespaceDeclarations()},e.prototype.prependChild=function(t){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"prependChild"),this._children[0].prependChild(t)},e.prototype.removeNamespace=function(t){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"removeNamespace"),this._children[0].removeNamespace(t)},e.prototype.replace=function(t,e){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"replace"),this._children[0].replace(t,e)},e.prototype.setChildren=function(t){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"setChildren"),this._children[0].setChildren(t)},e.prototype.setLocalName=function(t){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"setLocalName"),this._children[0].setLocalName(t)},e.prototype.setName=function(t){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"setName"),this._children[0].setName(t)},e.prototype.setNamespace=function(t){return 1!==this._children.length&&this.sec.throwError("TypeError",kb.XMLOnlyWorksWithOneItemLists,"setNamespace"),this._children[0].setNamespace(t)},e.prototype.axGetEnumerableKeys=function(){return this===this.axClass.dPrototype?t.prototype.axGetEnumerableKeys.call(this):Object.keys(this._children)},e.prototype.getProperty=function(t){var e=t.name;if(op(e))return this._children[0|e];for(var n=null===e||"*"===e,i=t.isAnyNamespace(),r=t.isAttribute(),o=this.sec.AXXMLList.CreateList(this._targetObject,t),a=this._children,s=0;s<a.length;s++){var l=a[s];if(1===l._kind)if(r)for(var u=l._attributes,c=0;u&&c<u.length;c++){var h=u[c];!n&&h._name.name!==e||!i&&!h._name.matches(t)||o._children.push(h)}else{var p=l._children;for(c=0;p&&c<p.length;c++){var d=p[c];(n||1===d._kind&&d._name.name===e)&&(i||d._name.matches(t))&&o._children.push(d)}}}return o},e.prototype.axGetProperty=function(t){return this===this.axClass.dPrototype?this[this.axResolveMultiname(t)]:this.getProperty(bM(t,this.sec))},e.prototype.axGetPublicProperty=function(t){return this===this.axClass.dPrototype?this[vb.getPublicMangledName(t)]:op(t)?this._children[0|t]:(EM.name=t,EM.namespaces=[_b.PUBLIC],EM.kind=7,this.getProperty(EM))},e.prototype.hasProperty=function(t){return!op(t.name)||Number(t.name)<this._children.length},e.prototype.axHasProperty=function(t){return this.hasProperty(t)},e.prototype.axHasPropertyInternal=function(t){return this.hasProperty(t)},e.prototype.resolveValue=function(){return this},e.prototype.setProperty=function(t,e){if(op(t.name)){var n=0|t.name,i=null;if(this._targetObject&&null===(i=this._targetObject.resolveValue()))return;var r=this._children.length;if(n>=r){if(i&&i.axClass===this.sec.AXXMLList){if(1!==i._children.length)return;i=i._children[0]}if(i&&1!==i._kind)return;var o=this.sec.AXXML.Create();o._parent=i;var a=this._targetProperty,s=3;if(this._targetProperty&&this._targetProperty.isAttribute()){if(i.hasProperty(this._targetProperty))return;s=2}else this._targetProperty&&null!==this._targetProperty.name?s=1:(a=null,s=3);if(o.init(s,a),n=r,2!==o._kind){if(null!==i){var l=void 0;if(n>0){var u=this._children[n-1],c=i._children.length-1;for(l=0;l<c&&i._children[l]!==u;l++);}else l=i._children.length-1;i._children[l+1]=o,So(i._children[0]),o._parent=i}e&&e.axClass===this.sec.AXXML?o._name=e._name:e&&e.axClass===this.sec.AXXMLList&&(o._name=e._targetProperty),this.append(o)}}aM(e,this.sec)&&3!==e._kind&&2!==e._kind||(e+="");var h=this._children[n],p=h._kind,d=h._parent;if(2===p){var f=d._children.indexOf(h);return d.setProperty(h._name,!1),this._children[n]=d._children[f],void So(this._children[0])}if(e&&e.axClass===this.sec.AXXMLList){var _=e._shallowCopy(),g=_._children.length;if(null!==d){var m=d._children.indexOf(h);d._replaceByIndex(m,_);for(l=0;l<g;l++)_._children[l]=d._children[m+l]}if(0===g){for(l=n+1;l<r;l++)this._children[l-1]=this._children[l],So(this._children[0]);this._children.length--}else for(l=r-1;l>n;l--)this._children[l+g-1]=this._children[l],So(this._children[0]);for(l=0;l<g;l++)this._children[n+l]=_._children[l],So(this._children[0]);return}if(p>=3||e&&e.axClass===this.sec.AXXML){if(null!==d){m=d._children.indexOf(h);d._replaceByIndex(m,e),e=d._children[m]}if("string"==typeof e){var y=this.sec.AXXML.Create(e);this._children[n]=y,So(this._children[0])}else this._children[n]=e,So(this._children[0]);return}h.setProperty(wM,e)}else{if(0===this._children.length){if(null===(i=this.resolveValue())||1!==i._children.length)return;this.append(i._children[0])}1!==this._children.length?this.sec.throwError("TypeError",kb.XMLAssigmentOneItemLists):this._children[0].setProperty(t,e)}},e.prototype.axSetProperty=function(t,e,n){this!==this.axClass.dPrototype?this.setProperty(bM(t,this.sec),e):this[this.axResolveMultiname(t)]=e},e.prototype.axDeleteProperty=function(t){var e=t.name;if(op(e))return(n=0|e)>=this._children.length||this.removeByIndex(n),!0;for(var n=0;n<this._children.length;n++){var i=this._children[n];1===i._kind&&i.deleteProperty(t)}return!0},e.prototype.removeByIndex=function(t){var e=this._children[t],n=e._parent;n&&(e._parent=null,n._children.splice(n._children.indexOf(e),1)),this._children.splice(t,1)},e.prototype.axCallProperty=function(t,e){var n=this[this.axResolveMultiname(t)];return n?(Qb(this.sec,n,e.length),n.axApply(this,e)):1===this._children.length?this._children[0].axCallProperty(t,e):void this.sec.throwError("TypeError",kb.CallOfNonFunctionError,"value")},e.instanceConstructor=e,e}(Hb);!function(t){t[t.APOS=39]="APOS",t[t.AMP=38]="AMP",t[t.QUOT=34]="QUOT",t[t.LT=60]="LT",t[t.GT=62]="GT"}(LM||(LM={}));var NM=function(t){function e(e,n){return t.call(this)||this}return o(e,t),e.escapeXML=function(t){for(var e,n=(t=yb(t)).length,i=0;i<n&&(e=t.charCodeAt(i))!==LM.APOS&&e!==LM.AMP&&e!==LM.QUOT&&e!==LM.LT&&e!==LM.GT;)i++;if(i>=n)return t;for(var r=[t.substring(0,i)];i<n;){switch(e){case LM.APOS:r.push("&apos;");break;case LM.AMP:r.push("&amp;");break;case LM.QUOT:r.push("&quot;");break;case LM.LT:r.push("&lt;");break;case LM.GT:r.push("&gt;")}for(var o=++i;i<n&&(e=t.charCodeAt(i))!==LM.APOS&&e!==LM.AMP&&e!==LM.QUOT&&e!==LM.LT&&e!==LM.GT;)i++;o<i&&r.push(t.substring(o,i))}return r.join("")},e}(Hb),FM=function(t){function e(e){return t.call(this,1,"")||this}return o(e,t),e}(NM),kM=function(t){function e(){var e=t.call(this)||this;return e._type=0,e._value=null,e._empty=!1,e._attrs=null,e}return o(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){t>>>=0,this._type=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._empty},set:function(t){t=!!t,this._empty=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=yb(t),this._value=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attrs",{get:function(){return this._attrs},set:function(t){this._attrs=t},enumerable:!1,configurable:!0}),e}(Hb),UM=function(t){function e(){return t.call(this)||this}return o(e,t),e}(Hb);var VM=function(t){function e(e){var n=t.call(this)||this;return n.sec=e,n.queue=[],n.ignoreWhitespace=!1,n}return o(e,t),e.prototype.onError=function(t){this.queue.push(t)},e.prototype.onPi=function(t,e){},e.prototype.onComment=function(t){},e.prototype.onCdata=function(t){this.queue.push({type:4,value:t})},e.prototype.onDoctype=function(t){},e.prototype.onBeginElement=function(t,e,n){var i=this.sec.createObject();e.forEach((function(t){i.axSetPublicProperty(t.name,t.value)})),this.queue.push({type:1,value:t,empty:n,attrs:i})},e.prototype.onEndElement=function(t){this.queue.push({type:1,value:"/"+t})},e.prototype.onText=function(t){this.ignoreWhitespace&&function(t){for(var e=0;e<t.length;e++){var n=t[e];if(" "!==n&&"\n"!==n&&"\r"!==n&&"\t"!==n)return!1}return!0}(t)||this.queue.push({type:3,value:t})},e}(SM),jM=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.startParse=function(t,e){t=yb(t),e=!!e;var n=new VM(this.sec);n.ignoreWhitespace=e,n.parseXml(t),this.queue=n.queue},e.prototype.getNext=function(t){if(0===this.queue.length)return-1;var e=this.queue.shift();if("number"==typeof e)return e;var n=e;return t.type=n.type,t.value=n.value,t.empty=n.empty||!1,t.attrs=n.attrs||null,0},e}(Hb),GM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.exists=function(){},e.read=function(){},e.write=function(){},e.readByteArray=function(){},e.writeByteArray=function(){},e}(Hb);function QM(t,e,n,i){void 0===n&&(n=t),void 0===i&&(i=0),rM[t]=e,oM.push({name:t,alias:n,nsType:i})}function zM(t,e){SO[t]=e}function HM(t){return"string"==typeof t}function XM(t,e){var n=Object.create(e.tPrototype);return n._symbol||(n._symbol=t),n.applySmybol&&n.applySymbol(),n[wb]=!0,n}QM("__AS3__.vec.Vector$object",Nx,"ObjectVector",2),QM("__AS3__.vec.Vector$int",Fx,"Int32Vector",2),QM("__AS3__.vec.Vector$uint",kx,"Uint32Vector",2),QM("__AS3__.vec.Vector$double",Ux,"Float64Vector",2),zM("FlashUtilScript::getDefinitionByName",(function(t,e){var n=String(e).replace("::",".");return IO().env.app.getClass(vb.FromFQNString(n,0))})),zM("FlashUtilScript::getTimer",(function(t){return Date.now()-Cf.runtimeStartTime})),zM("FlashUtilScript::navigateToURL",EO),zM("FlashNetScript::navigateToURL",EO),zM("FlashNetScript::sendToURL",(function(t,e){Oo(e)&&t.throwError("TypeError",kb.NullPointerError,"request"),t.flash.net.URLRequest.axClass.axIsType(e)||t.throwError("TypeError",kb.CheckTypeFailedError,e,"flash.net.URLRequest"),console.log("TODO: FlashNetScript_sendToURL: FileLoadingService")})),zM("FlashUtilScript::escapeMultiByte",wO(Rh.escape)),zM("FlashUtilScript::unescapeMultiByte",wO(Rh.unescape)),zM("Toplevel::registerClassAlias",(function(t,e,n){(e=yb(e))||t.throwError("TypeError",kb.NullPointerError,"aliasName"),n||t.throwError("TypeError",kb.NullPointerError,"classObject"),t.classAliases.registerClassAlias(e,n)})),zM("Toplevel::getClassByAlias",(function(t,e){(e=yb(e))||t.throwError("TypeError",kb.NullPointerError,"aliasName");var n=t.classAliases.getClassByAlias(e);return n||t.throwError("ReferenceError",kb.ClassNotFoundError,e),n}));var YM=function(){return function(t){this.traits=t}}(),qM=function(t){function e(e,n,i){var r=t.call(this,i)||this;return r.abc=e,r.methodInfo=n,r.traits=i,r.global=null,r.state=0,r}return o(e,t),e.prototype.trace=function(t){t.enter("ScriptInfo"),this.traits.trace(t),t.outdent()},e}(YM),KM=function(){function t(e,n,i){void 0===i&&(i=!1),this.parent=e,this.object=n,this.isWith=i,this.defaultNamespace=null,this.cache=[],t.ID++,this[wb]=!0,this.global=e?e.global:this,n.__scope__=this}return Object.defineProperty(t.prototype,"superConstructor",{get:function(){var t=this.object.superClass;if(!t)return null;var e=t[wb]?t.tPrototype.axInitializer:t;return Object.defineProperty(this,"superConstructor",{value:e}),e},enumerable:!1,configurable:!0}),t.prototype.extend=function(e){if(e===this.object)return this;var n=e.__scope__;return n&&n.parent==this?n:new t(this,e,!1)},t.prototype.findDepth=function(t){for(var e=this,n=0;e;){if(e.object===t)return n;n++,e=e.parent}return-1},t.prototype.getScopeObjects=function(){for(var t=[],e=this;e;)t.unshift(e.object),e=e.parent;return t},t.prototype.getScopeProperty=function(t,e,n){return this.findScopeProperty(t,e,n).axGetProperty(t)},t.prototype.findScopeProperty=function(t,e,n){if(t.mutable||n)return this._findScopeProperty(t,e,n);if(t.scope===this.object&&!this.isWith)return t.value;var i=this._findScopeProperty(t,e,n);return this.isWith||(t.value=i,t.scope=this.object),i},t.prototype._findScopeProperty=function(t,e,n){null===t.name&&this.global.object.sec.throwError("ReferenceError",kb.UndefinedVarError,"*");var i=this.cache[t.id];if(i)return i;if(this.object&&this.object[wb]&&(this.isWith?this.object.axHasPropertyInternal(t):this.object.traits.getTrait(t.namespaces,t.name)))return this.isWith||t.isRuntime()?this.object:this.cache[t.id]=this.object;if(this.parent)return i=this.parent.findScopeProperty(t,e,n),7===t.kind&&(this.cache[t.id]=i),i;if(n)return null;t.isAttribute()&&this.object.sec.throwError("ReferenceError",kb.UndefinedVarError,t.name);var r=this.global.object;return(i=r.applicationDomain.findProperty(t,e,!0))?i:(e&&(t.getPublicMangledName()in r||this.global.object.sec.throwError("ReferenceError",kb.UndefinedVarError,t.name)),r)},t.prototype.toString=function(){return this.parent+" => "+this.object+" "+this.isWith},t.ID=0,t}();function WM(t){var e=t.axClass;if(!e||e===e.sec.AXObject)return null;var n=e.dPrototype;return n===t&&(n=e.superClass.dPrototype),n}var JM=function(){function t(t,e){this.object=t,this.index=e}return t.prototype.next=function(t,e){if(ap(t))return this.index=0,void(this.object=null);this.object=t,this.index=e;var n=t.axNextNameIndex(this.index);if(n>0)this.index=n;else{for(;!(n>0);){if(!(t=WM(t)))return this.index=0,void(this.object=null);n=t.axNextNameIndex(0)}this.index=n,this.object=t}},t}();function ZM(t,e,n){return aM(t,n)?t.equals(e):aM(e,n)?e.equals(t):t==e}function $M(t,e){return e.AXXML.dPrototype.isPrototypeOf(t)||e.AXXMLList.dPrototype.isPrototypeOf(t)}function tL(t,e,n){return $M(t,n)||n.throwError("TypeError",kb.DescendentsError,t),t.descendants(e)}function eL(t,e){if(!e||!sM(t,e)){var n=e&&e.axClass?e.axClass.name.toFQNString(!1):"[unknown]";t.throwError("TypeError",kb.FilterError,n)}return e}function nL(t){return"string"==typeof t?t:t+""}function iL(t,e,n){return"string"==typeof t||"string"==typeof e?String(t)+String(e):sM(n,t)&&sM(n,e)?RM.addXML(t,e):t+e}function rL(t,e){if(t){if(t.value)return typeof t.value;if($M(t,e))return"xml"}return typeof t}function oL(t){return"Bytecode: "+t}var aL=new Uint32Array(256),sL=new Array(256);function lL(t,e,n){void 0===n&&(n=0),aL[t]=n,sL[t]=e}lL(1,""),lL(2,""),lL(3,""),lL(4,"e"),lL(5,"e"),lL(6,"e"),lL(7,""),lL(8,"e"),lL(9,""),lL(10,""),lL(11,""),lL(12,"d"),lL(13,"d"),lL(14,"d"),lL(15,"d"),lL(16,"d"),lL(17,"d"),lL(18,"d"),lL(19,"d"),lL(20,"d"),lL(21,"d"),lL(22,"d"),lL(23,"d"),lL(24,"d"),lL(25,"d"),lL(26,"d"),lL(27,""),lL(28,""),lL(29,""),lL(30,""),lL(31,""),lL(32,""),lL(33,""),lL(35,""),lL(36,"b"),lL(37,"c"),lL(38,""),lL(39,""),lL(40,""),lL(41,""),lL(42,""),lL(43,""),lL(44,"e"),lL(45,"e"),lL(46,"e"),lL(47,"e"),lL(48,""),lL(49,"e"),lL(50,"ee"),lL(53,""),lL(54,""),lL(55,""),lL(56,""),lL(57,""),lL(58,""),lL(59,""),lL(60,""),lL(61,""),lL(62,""),lL(64,"e"),lL(65,"e"),lL(66,"e"),lL(67,"ee"),lL(68,"ee"),lL(69,"ee"),lL(70,"ee"),lL(71,""),lL(72,""),lL(73,"e"),lL(74,"ee"),lL(75,""),lL(76,"ee"),lL(77,""),lL(78,"ee"),lL(79,"ee"),lL(80,""),lL(81,""),lL(82,""),lL(83,"e"),lL(84,""),lL(85,"e"),lL(86,"e"),lL(87,""),lL(88,"e"),lL(89,"e"),lL(90,"e"),lL(93,"e"),lL(94,"e"),lL(95,""),lL(96,"e"),lL(97,"e"),lL(98,"e"),lL(99,"e"),lL(100,""),lL(101,"e"),lL(102,"e"),lL(103,""),lL(104,"e"),lL(106,"e"),lL(108,"e"),lL(109,"e"),lL(110,"e"),lL(111,"e"),lL(112,""),lL(113,""),lL(114,""),lL(115,""),lL(116,""),lL(117,""),lL(118,""),lL(119,""),lL(120,""),lL(121,""),lL(122,""),lL(123,""),lL(128,"e"),lL(129,""),lL(130,""),lL(131,""),lL(132,""),lL(133,""),lL(134,"e"),lL(135,""),lL(136,""),lL(137,""),lL(144,""),lL(145,""),lL(146,"e"),lL(147,""),lL(148,"e"),lL(149,""),lL(150,""),lL(151,""),lL(160,""),lL(161,""),lL(162,""),lL(163,""),lL(164,""),lL(165,""),lL(166,""),lL(167,""),lL(168,""),lL(169,""),lL(170,""),lL(171,""),lL(172,""),lL(173,""),lL(174,""),lL(175,""),lL(176,""),lL(177,""),lL(178,"e"),lL(179,""),lL(180,""),lL(192,""),lL(193,""),lL(194,"e"),lL(195,"e"),lL(196,""),lL(197,""),lL(198,""),lL(199,""),lL(208,""),lL(209,""),lL(210,""),lL(211,""),lL(212,""),lL(213,""),lL(214,""),lL(215,""),lL(237,""),lL(239,"aeae"),lL(240,"e"),lL(241,"e"),lL(242,"e"),lL(243,"");var uL=function(){function t(){}return t.u8=function(t,e){return t[e]},t.s32=function(t,e){var n=t[e];return 128&n&&16384&(n=127&n|t[e+1]<<7)&&2097152&(n=16383&n|t[e+2]<<14)&&268435456&(n=2097151&n|t[e+3]<<21)&&(n=268435455&n|t[e+4]<<28,n&=4294967295),n},t.u32=function(e,n){return t.s32(e,n)>>>0},t.u30=function(e,n){return t.u32(e,n)},t.s32Length=function(t,e){var n=t[e];return 128&n?16384&(n=127&n|t[e+1]<<7)?2097152&(n=16383&n|t[e+2]<<14)?268435456&(n=2097151&n|t[e+3]<<21)?5:4:3:2:1},t}();var cL,hL=function(){function t(t){this._code=t,this.setBCI(0)}return t.prototype.next=function(){this.setBCI(this._nextBCI)},t.prototype.endBCI=function(){return this._code.length},Object.defineProperty(t.prototype,"nextBCI",{get:function(){return this._nextBCI},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentBCI",{get:function(){return this._currentBCI},enumerable:!1,configurable:!0}),t.prototype.currentBytecode=function(){return this._bytecode},t.prototype.nextBC=function(){return uL.u8(this._code,this._nextBCI)},t.prototype.setBCI=function(t){if(this._currentBCI=t,this._currentBCI<this._code.length){this._bytecode=uL.u8(this._code,t);var e=function(t,e){var n=1,i=t[e];if(27===i){n+=3;var r=uL.u30(t,e+n)+1;return(n+=uL.s32Length(t,e+n))+3*r}var o=sL[i];if(""===o)return n;So(o,"OP: "+oL(i));for(var a=0;a<o.length;a++)switch(o[a].charCodeAt(0)-97){case 0:case 1:n+=1;continue;case 3:n+=3;continue;case 2:case 4:case 5:n+=uL.s32Length(t,e+n);continue}return n}(this._code,t);this._nextBCI=t+e}else this._bytecode=255,this._nextBCI=this._currentBCI},t}();!function(t){t[t.BKPT=1]="BKPT",t[t.NOP=2]="NOP",t[t.THROW=3]="THROW",t[t.GETSUPER=4]="GETSUPER",t[t.GETSUPER_DYN=260]="GETSUPER_DYN",t[t.SETSUPER=5]="SETSUPER",t[t.SETSUPER_DYN=261]="SETSUPER_DYN",t[t.DXNS=6]="DXNS",t[t.DXNSLATE=7]="DXNSLATE",t[t.KILL=8]="KILL",t[t.LABEL=9]="LABEL",t[t.LF32X4=10]="LF32X4",t[t.SF32X4=11]="SF32X4",t[t.IFNLT=12]="IFNLT",t[t.IFNLE=13]="IFNLE",t[t.IFNGT=14]="IFNGT",t[t.IFNGE=15]="IFNGE",t[t.JUMP=16]="JUMP",t[t.IFTRUE=17]="IFTRUE",t[t.IFFALSE=18]="IFFALSE",t[t.IFEQ=19]="IFEQ",t[t.IFNE=20]="IFNE",t[t.IFLT=21]="IFLT",t[t.IFLE=22]="IFLE",t[t.IFGT=23]="IFGT",t[t.IFGE=24]="IFGE",t[t.IFSTRICTEQ=25]="IFSTRICTEQ",t[t.IFSTRICTNE=26]="IFSTRICTNE",t[t.LOOKUPSWITCH=27]="LOOKUPSWITCH",t[t.PUSHWITH=28]="PUSHWITH",t[t.POPSCOPE=29]="POPSCOPE",t[t.NEXTNAME=30]="NEXTNAME",t[t.HASNEXT=31]="HASNEXT",t[t.PUSHNULL=32]="PUSHNULL",t[t.PUSHUNDEFINED=33]="PUSHUNDEFINED",t[t.PUSHFLOAT=34]="PUSHFLOAT",t[t.NEXTVALUE=35]="NEXTVALUE",t[t.PUSHBYTE=36]="PUSHBYTE",t[t.PUSHSHORT=37]="PUSHSHORT",t[t.PUSHTRUE=38]="PUSHTRUE",t[t.PUSHFALSE=39]="PUSHFALSE",t[t.PUSHNAN=40]="PUSHNAN",t[t.POP=41]="POP",t[t.DUP=42]="DUP",t[t.SWAP=43]="SWAP",t[t.PUSHSTRING=44]="PUSHSTRING",t[t.PUSHINT=45]="PUSHINT",t[t.PUSHUINT=46]="PUSHUINT",t[t.PUSHDOUBLE=47]="PUSHDOUBLE",t[t.PUSHSCOPE=48]="PUSHSCOPE",t[t.PUSHNAMESPACE=49]="PUSHNAMESPACE",t[t.HASNEXT2=50]="HASNEXT2",t[t.LI8=53]="LI8",t[t.LI16=54]="LI16",t[t.LI32=55]="LI32",t[t.LF32=56]="LF32",t[t.LF64=57]="LF64",t[t.SI8=58]="SI8",t[t.SI16=59]="SI16",t[t.SI32=60]="SI32",t[t.SF32=61]="SF32",t[t.SF64=62]="SF64",t[t.NEWFUNCTION=64]="NEWFUNCTION",t[t.CALL=65]="CALL",t[t.CONSTRUCT=66]="CONSTRUCT",t[t.CALLMETHOD=67]="CALLMETHOD",t[t.CALLSTATIC=68]="CALLSTATIC",t[t.CALLSUPER=69]="CALLSUPER",t[t.CALLSUPER_DYN=325]="CALLSUPER_DYN",t[t.CALLPROPERTY=70]="CALLPROPERTY",t[t.CALLPROPERTY_DYN=326]="CALLPROPERTY_DYN",t[t.RETURNVOID=71]="RETURNVOID",t[t.RETURNVALUE=72]="RETURNVALUE",t[t.CONSTRUCTSUPER=73]="CONSTRUCTSUPER",t[t.CONSTRUCTSUPER_DYN=329]="CONSTRUCTSUPER_DYN",t[t.CONSTRUCTPROP=74]="CONSTRUCTPROP",t[t.CONSTRUCTPROP_DYN=330]="CONSTRUCTPROP_DYN",t[t.CALLSUPERID=75]="CALLSUPERID",t[t.CALLPROPLEX=76]="CALLPROPLEX",t[t.CALLPROPLEX_DYN=332]="CALLPROPLEX_DYN",t[t.CALLINTERFACE=77]="CALLINTERFACE",t[t.CALLSUPERVOID=78]="CALLSUPERVOID",t[t.CALLSUPERVOID_DYN=334]="CALLSUPERVOID_DYN",t[t.CALLPROPVOID=79]="CALLPROPVOID",t[t.SXI1=80]="SXI1",t[t.SXI8=81]="SXI8",t[t.SXI16=82]="SXI16",t[t.APPLYTYPE=83]="APPLYTYPE",t[t.PUSHFLOAT4=84]="PUSHFLOAT4",t[t.NEWOBJECT=85]="NEWOBJECT",t[t.NEWARRAY=86]="NEWARRAY",t[t.NEWACTIVATION=87]="NEWACTIVATION",t[t.NEWCLASS=88]="NEWCLASS",t[t.GETDESCENDANTS=89]="GETDESCENDANTS",t[t.NEWCATCH=90]="NEWCATCH",t[t.FINDPROPSTRICT=93]="FINDPROPSTRICT",t[t.FINDPROPSTRICT_DYN=349]="FINDPROPSTRICT_DYN",t[t.FINDPROPERTY=94]="FINDPROPERTY",t[t.FINDPROPERTY_DYN=350]="FINDPROPERTY_DYN",t[t.FINDDEF=95]="FINDDEF",t[t.GETLEX=96]="GETLEX",t[t.GETLEX_DYN=352]="GETLEX_DYN",t[t.SETPROPERTY=97]="SETPROPERTY",t[t.SETPROPERTY_DYN=353]="SETPROPERTY_DYN",t[t.GETLOCAL=98]="GETLOCAL",t[t.SETLOCAL=99]="SETLOCAL",t[t.GETGLOBALSCOPE=100]="GETGLOBALSCOPE",t[t.GETSCOPEOBJECT=101]="GETSCOPEOBJECT",t[t.GETPROPERTY=102]="GETPROPERTY",t[t.GETPROPERTY_DYN=358]="GETPROPERTY_DYN",t[t.GETOUTERSCOPE=103]="GETOUTERSCOPE",t[t.INITPROPERTY=104]="INITPROPERTY",t[t.UNUSED_69=105]="UNUSED_69",t[t.DELETEPROPERTY=106]="DELETEPROPERTY",t[t.DELETEPROPERTY_DYN=362]="DELETEPROPERTY_DYN",t[t.UNUSED_6B=107]="UNUSED_6B",t[t.GETSLOT=108]="GETSLOT",t[t.SETSLOT=109]="SETSLOT",t[t.GETGLOBALSLOT=110]="GETGLOBALSLOT",t[t.SETGLOBALSLOT=111]="SETGLOBALSLOT",t[t.CONVERT_S=112]="CONVERT_S",t[t.ESC_XELEM=113]="ESC_XELEM",t[t.ESC_XATTR=114]="ESC_XATTR",t[t.CONVERT_I=115]="CONVERT_I",t[t.CONVERT_U=116]="CONVERT_U",t[t.CONVERT_D=117]="CONVERT_D",t[t.CONVERT_B=118]="CONVERT_B",t[t.CONVERT_O=119]="CONVERT_O",t[t.CHECKFILTER=120]="CHECKFILTER",t[t.CONVERT_F=121]="CONVERT_F",t[t.UNPLUS=122]="UNPLUS",t[t.CONVERT_F4=123]="CONVERT_F4",t[t.BC_7C=124]="BC_7C",t[t.BC_7D=125]="BC_7D",t[t.BC_7E=126]="BC_7E",t[t.BC_7F=127]="BC_7F",t[t.COERCE=128]="COERCE",t[t.COERCE_DYN=384]="COERCE_DYN",t[t.COERCE_B=129]="COERCE_B",t[t.COERCE_A=130]="COERCE_A",t[t.COERCE_I=131]="COERCE_I",t[t.COERCE_D=132]="COERCE_D",t[t.COERCE_S=133]="COERCE_S",t[t.ASTYPE=134]="ASTYPE",t[t.ASTYPELATE=135]="ASTYPELATE",t[t.COERCE_U=136]="COERCE_U",t[t.COERCE_O=137]="COERCE_O",t[t.NEGATE=144]="NEGATE",t[t.INCREMENT=145]="INCREMENT",t[t.INCLOCAL=146]="INCLOCAL",t[t.DECREMENT=147]="DECREMENT",t[t.DECLOCAL=148]="DECLOCAL",t[t.TYPEOF=149]="TYPEOF",t[t.NOT=150]="NOT",t[t.BITNOT=151]="BITNOT",t[t.UNUSED_98=152]="UNUSED_98",t[t.UNUSED_99=153]="UNUSED_99",t[t.UNUSED_9A=154]="UNUSED_9A",t[t.UNUSED_9B=155]="UNUSED_9B",t[t.UNUSED_9C=156]="UNUSED_9C",t[t.UNUSED_9D=157]="UNUSED_9D",t[t.UNUSED_9E=158]="UNUSED_9E",t[t.UNUSED_9F=159]="UNUSED_9F",t[t.ADD=160]="ADD",t[t.SUBTRACT=161]="SUBTRACT",t[t.MULTIPLY=162]="MULTIPLY",t[t.DIVIDE=163]="DIVIDE",t[t.MODULO=164]="MODULO",t[t.LSHIFT=165]="LSHIFT",t[t.RSHIFT=166]="RSHIFT",t[t.URSHIFT=167]="URSHIFT",t[t.BITAND=168]="BITAND",t[t.BITOR=169]="BITOR",t[t.BITXOR=170]="BITXOR",t[t.EQUALS=171]="EQUALS",t[t.STRICTEQUALS=172]="STRICTEQUALS",t[t.LESSTHAN=173]="LESSTHAN",t[t.LESSEQUALS=174]="LESSEQUALS",t[t.GREATERTHAN=175]="GREATERTHAN",t[t.GREATEREQUALS=176]="GREATEREQUALS",t[t.INSTANCEOF=177]="INSTANCEOF",t[t.ISTYPE=178]="ISTYPE",t[t.ISTYPELATE=179]="ISTYPELATE",t[t.IN=180]="IN",t[t.UNUSED_B5=181]="UNUSED_B5",t[t.UNUSED_B6=182]="UNUSED_B6",t[t.UNUSED_B7=183]="UNUSED_B7",t[t.UNUSED_B8=184]="UNUSED_B8",t[t.UNUSED_B9=185]="UNUSED_B9",t[t.UNUSED_BA=186]="UNUSED_BA",t[t.UNUSED_BB=187]="UNUSED_BB",t[t.UNUSED_BC=188]="UNUSED_BC",t[t.UNUSED_BD=189]="UNUSED_BD",t[t.UNUSED_BE=190]="UNUSED_BE",t[t.UNUSED_BF=191]="UNUSED_BF",t[t.INCREMENT_I=192]="INCREMENT_I",t[t.DECREMENT_I=193]="DECREMENT_I",t[t.INCLOCAL_I=194]="INCLOCAL_I",t[t.DECLOCAL_I=195]="DECLOCAL_I",t[t.NEGATE_I=196]="NEGATE_I",t[t.ADD_I=197]="ADD_I",t[t.SUBTRACT_I=198]="SUBTRACT_I",t[t.MULTIPLY_I=199]="MULTIPLY_I",t[t.UNUSED_C8=200]="UNUSED_C8",t[t.UNUSED_C9=201]="UNUSED_C9",t[t.UNUSED_CA=202]="UNUSED_CA",t[t.UNUSED_CB=203]="UNUSED_CB",t[t.UNUSED_CC=204]="UNUSED_CC",t[t.UNUSED_CD=205]="UNUSED_CD",t[t.UNUSED_CE=206]="UNUSED_CE",t[t.UNUSED_CF=207]="UNUSED_CF",t[t.GETLOCAL0=208]="GETLOCAL0",t[t.GETLOCAL1=209]="GETLOCAL1",t[t.GETLOCAL2=210]="GETLOCAL2",t[t.GETLOCAL3=211]="GETLOCAL3",t[t.SETLOCAL0=212]="SETLOCAL0",t[t.SETLOCAL1=213]="SETLOCAL1",t[t.SETLOCAL2=214]="SETLOCAL2",t[t.SETLOCAL3=215]="SETLOCAL3",t[t.UNUSED_D8=216]="UNUSED_D8",t[t.UNUSED_D9=217]="UNUSED_D9",t[t.UNUSED_DA=218]="UNUSED_DA",t[t.UNUSED_DB=219]="UNUSED_DB",t[t.UNUSED_DC=220]="UNUSED_DC",t[t.UNUSED_DD=221]="UNUSED_DD",t[t.UNUSED_DE=222]="UNUSED_DE",t[t.UNUSED_DF=223]="UNUSED_DF",t[t.UNUSED_E0=224]="UNUSED_E0",t[t.UNUSED_E1=225]="UNUSED_E1",t[t.UNUSED_E2=226]="UNUSED_E2",t[t.UNUSED_E3=227]="UNUSED_E3",t[t.UNUSED_E4=228]="UNUSED_E4",t[t.UNUSED_E5=229]="UNUSED_E5",t[t.UNUSED_E6=230]="UNUSED_E6",t[t.UNUSED_E7=231]="UNUSED_E7",t[t.UNUSED_E8=232]="UNUSED_E8",t[t.UNUSED_E9=233]="UNUSED_E9",t[t.UNUSED_EA=234]="UNUSED_EA",t[t.UNUSED_EB=235]="UNUSED_EB",t[t.UNUSED_EC=236]="UNUSED_EC",t[t.UNUSED_ED=237]="UNUSED_ED",t[t.UNUSED_EE=238]="UNUSED_EE",t[t.INVALID=237]="INVALID",t[t.DEBUG=239]="DEBUG",t[t.DEBUGLINE=240]="DEBUGLINE",t[t.DEBUGFILE=241]="DEBUGFILE",t[t.BKPTLINE=242]="BKPTLINE",t[t.TIMESTAMP=243]="TIMESTAMP",t[t.RESTARGC=244]="RESTARGC",t[t.RESTARG=245]="RESTARG",t[t.UNUSED_F6=246]="UNUSED_F6",t[t.UNUSED_F7=247]="UNUSED_F7",t[t.UNUSED_F8=248]="UNUSED_F8",t[t.UNUSED_F9=249]="UNUSED_F9",t[t.UNUSED_FA=250]="UNUSED_FA",t[t.UNUSED_FB=251]="UNUSED_FB",t[t.UNUSED_FC=252]="UNUSED_FC",t[t.UNUSED_FD=253]="UNUSED_FD",t[t.UNUSED_FE=254]="UNUSED_FE",t[t.END=255]="END"}(cL||(cL={}));var pL=31,dL=function(){function t(t,e,n,i,r,o,a){void 0===n&&(n=null),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===a&&(a=[]),this.position=t,this.name=e,this.params=n,this.delta=i,this.deltaScope=r,this.terminal=o,this.refs=a,this.stack=-1024,this.scope=-1024,this.catchStart=!1,this.catchEnd=!1,this.returnTypeId=-1,this.childs=[],this.comment=null}return t.prototype.toString=function(){return"Instruction(".concat(this.position,", ").concat(cL[this.name]," (").concat(this.name,"), [").concat(this.params,"], ").concat(this.stack," -> ").concat(this.stack+this.delta,", ").concat(this.scope," -> ").concat(this.scope+this.deltaScope,", ").concat(this.terminal,", [").concat(this.refs,"])")},t}();function fL(t,e,n){for(var i=e,r=n.length,o=e,a=0;a<r;a++)if(n[a].position>=t){if(n[a].stack>=0)return o;n[a].stack=i,(i+=n[a].delta)<o&&(o=i);for(var s=0;s<n[a].refs.length;s++){var l=fL(n[a].refs[s],i,n);l<o&&(o=l)}if(n[a].terminal)return o}return o}function _L(t,e,n){for(var i=e,r=n.length,o=0;o<r;o++)if(n[o].position>=t){if(n[o].scope>=0)return;n[o].scope=i,i+=n[o].deltaScope;for(var a=0;a<n[o].refs.length;a++)_L(n[o].refs[a],i,n);if(n[o].terminal)return}}function gL(t){var e=t.code,n=t.index,i=e[n++];return 128&i&&16384&(i=127&i|e[n++]<<7)&&2097152&(i=16383&i|e[n++]<<14)&&268435456&(i=2097151&i|e[n++]<<21)&&(i=268435455&i|e[n++]<<28,i&=4294967295),t.index=n,i>>>0}function mL(t){var e=gL(t),n=t.abc.getMultiname(e),i=t.currentMn;return i[0]=e,n.isRuntimeName()||n.isRuntimeNamespace()?(i[1]=256,i[2]=n.isRuntimeName()&&n.isRuntimeNamespace()?-2:-1,i):(i[1]=0,i[2]=0,i)}function yL(t){var e=t.code,n=t.index,i=e[n++]|e[n++]<<8|e[n++]<<16;return i=i<<8>>8,t.index=n,i}function AL(t){return t.code[t.index++]<<24>>24}function vL(t){for(var e=t.abc,n=t.getBody(),i=n.code,r=[],o={index:0,abc:e,code:i,currentMn:[0,0,0]},a=0,s=0,l=!1;o.index<i.length;){var u=o.index,c=i[o.index++],h=Ab.OPTIMISE_ON_IR?r[r.length-1]:null,p=void 0;switch(c){case cL.LABEL:p=new dL(u,c);break;case cL.DXNSLATE:p=new dL(u,c,0,-1);break;case cL.DEBUGFILE:case cL.DEBUGLINE:p=new dL(u,c,gL(o));break;case cL.DEBUG:p=new dL(u,c,[AL(o),gL(o),AL(o),gL(o)]);break;case cL.THROW:p=new dL(u,c,null,-1,0,!0);break;case cL.PUSHSCOPE:(p=new dL(u,c,null,-1,1)).returnTypeId=s=++a;break;case cL.PUSHWITH:p=new dL(u,c,null,-1,1);break;case cL.POPSCOPE:p=new dL(u,c,null,0,-1);break;case cL.GETSCOPEOBJECT:(p=new dL(u,c,AL(o),1,0)).returnTypeId=s=++a,l=!0;break;case cL.GETGLOBALSCOPE:(p=new dL(u,c,null,1)).returnTypeId=s=++a,l=!0;break;case cL.GETSLOT:(p=new dL(u,c,gL(o),0)).returnTypeId=s=++a;break;case cL.SETSLOT:p=new dL(u,c,gL(o),-2);break;case cL.NEXTNAME:case cL.NEXTVALUE:(p=new dL(u,c,null,-1)).returnTypeId=s=++a;break;case cL.HASNEXT:(p=new dL(u,c,null,-1)).returnTypeId=s=-2;break;case cL.HASNEXT2:(p=new dL(u,c,[gL(o),gL(o)],1)).returnTypeId=s=-2;break;case cL.IN:(p=new dL(u,c,null,-1)).returnTypeId=s=-2;break;case cL.DUP:if((p=new dL(u,c,null,1)).returnTypeId=s=a,h)switch(h.name){case cL.PUSHTRUE:case cL.PUSHFALSE:case cL.PUSHNAN:case cL.PUSHINT:case cL.PUSHDOUBLE:case cL.PUSHBYTE:case cL.PUSHFLOAT:case cL.PUSHSTRING:case cL.PUSHNULL:p.name=h.name,p.params=h.params,p.comment="IR: DUP changed to PUSH*, reason: prevent optimisation"}break;case cL.POP:(p=new dL(u,c,null,-1)).returnTypeId=s=a,h&&h.name===cL.CALLPROPERTY&&(h.name=cL.CALLPROPVOID,h.comment='IR: Optimised from "CALLPROPERTY", reason: POP STACK');break;case cL.SWAP:p=new dL(u,c,null,0);break;case cL.PUSHTRUE:case cL.PUSHFALSE:(p=new dL(u,c,null,1)).returnTypeId=s=-2;break;case cL.PUSHBYTE:(p=new dL(u,c,AL(o),1)).returnTypeId=s=-3;break;case cL.PUSHSHORT:(p=new dL(u,c,gL(o)<<16>>16,1)).returnTypeId=s=-3;break;case cL.PUSHINT:case cL.PUSHUINT:case cL.PUSHDOUBLE:(p=new dL(u,c,gL(o),1)).returnTypeId=s=-3;break;case cL.PUSHNAN:(p=new dL(u,c,null,1)).returnTypeId=s=-3;break;case cL.PUSHNULL:(p=new dL(u,c,null,1)).returnTypeId=s=-6;break;case cL.PUSHUNDEFINED:(p=new dL(u,c,null,1)).returnTypeId=s=-5;break;case cL.PUSHSTRING:(p=new dL(u,c,gL(o),1)).returnTypeId=s=-4;break;case cL.IFEQ:var d=yL(o),f=o.index;p=new dL(u,c,f+d,-2,0,!1,[f+d]);break;case cL.IFNE:d=yL(o),f=o.index;p=new dL(u,c,f+d,-2,0,!1,[f+d]);break;case cL.IFSTRICTEQ:d=yL(o),f=o.index;p=new dL(u,c,f+d,-2,0,!1,[f+d]);break;case cL.IFSTRICTNE:d=yL(o),f=o.index;p=new dL(u,c,f+d,-2,0,!1,[f+d]);break;case cL.IFGT:case cL.IFNLE:d=yL(o),f=o.index;p=new dL(u,c,f+d,-2,0,!1,[f+d]);break;case cL.IFGE:case cL.IFNLT:d=yL(o),f=o.index;p=new dL(u,c,f+d,-2,0,!1,[f+d]);break;case cL.IFLT:case cL.IFNGE:d=yL(o),f=o.index;p=new dL(u,c,f+d,-2,0,!1,[f+d]);break;case cL.IFLE:case cL.IFNGT:d=yL(o),f=o.index;p=new dL(u,c,f+d,-2,0,!1,[f+d]);break;case cL.IFTRUE:d=yL(o),f=o.index;p=new dL(u,c,f+d,-1,0,!1,[f+d]);break;case cL.IFFALSE:d=yL(o),f=o.index;p=new dL(u,c,f+d,-1,0,!1,[f+d]);break;case cL.LOOKUPSWITCH:var _=u+yL(o),g=gL(o),m=[_];for(d=0;d<=g;d++)m.push(u+yL(o));p=new dL(u,c,m,-1,0,!0,m);break;case cL.JUMP:d=yL(o),f=o.index;p=new dL(u,c,f+d,0,0,!0,[f+d]);break;case cL.RETURNVALUE:p=new dL(u,c,null,-1,0,!0);break;case cL.RETURNVOID:p=new dL(u,c,null,0,0,!0);break;case cL.NOT:(p=new dL(u,c,null,0)).returnTypeId=s=-2;break;case cL.BITNOT:case cL.NEGATE:case cL.INCREMENT:case cL.DECREMENT:(p=new dL(u,c,null,0)).returnTypeId=s=-3;break;case cL.INCLOCAL:case cL.DECLOCAL:(p=new dL(u,c,gL(o),0)).returnTypeId=s=-3;break;case cL.INCREMENT_I:case cL.DECREMENT_I:(p=new dL(u,c,null,0)).returnTypeId=s=-3;break;case cL.INCLOCAL_I:case cL.DECLOCAL_I:(p=new dL(u,c,gL(o),0)).returnTypeId=s=-3;break;case cL.NEGATE_I:(p=new dL(u,c,null,0)).returnTypeId=s=-3;break;case cL.ADD_I:case cL.SUBTRACT_I:case cL.MULTIPLY_I:case cL.ADD:case cL.SUBTRACT:case cL.MULTIPLY:case cL.DIVIDE:case cL.MODULO:case cL.LSHIFT:case cL.RSHIFT:case cL.URSHIFT:case cL.BITAND:case cL.BITOR:case cL.BITXOR:(p=new dL(u,c,null,-1)).returnTypeId=s=-3;break;case cL.EQUALS:case cL.STRICTEQUALS:case cL.GREATERTHAN:case cL.GREATEREQUALS:case cL.LESSTHAN:case cL.LESSEQUALS:(p=new dL(u,c,null,-1)).returnTypeId=s=-2;break;case cL.TYPEOF:(p=new dL(u,c,null,0)).returnTypeId=s=++a;break;case cL.INSTANCEOF:(p=new dL(u,c,null,-1)).returnTypeId=s=-2;break;case cL.ISTYPE:var y=mL(o),A=y[0],v=y[2];(p=new dL(u,c,A,0+v)).returnTypeId=s=-2,l=!0;break;case cL.ISTYPELATE:(p=new dL(u,c,null,-1)).returnTypeId=s=-2,l=!0;break;case cL.ASTYPELATE:p=new dL(u,c,null,-1);break;case cL.ASTYPE:var b=mL(o);A=b[0],v=b[2];p=new dL(u,c,A,0+v),l=!0;break;case cL.CALL:var x=gL(o);p=new dL(u,c,x,-x-1),l=!0;break;case cL.CONSTRUCT:x=gL(o);(p=new dL(u,c,x,-x)).returnTypeId=s=++a;break;case cL.CALLPROPERTY:var C=mL(o),I=(A=C[0],C[1]);v=C[2],x=gL(o);(p=new dL(u,c+I,[x,A],-x+v)).returnTypeId=s=++a,l=l||0!==I;break;case cL.CALLPROPLEX:var E=mL(o);A=E[0],I=E[1],v=E[2],x=gL(o);(p=new dL(u,c+I,[x,A],-x+v)).returnTypeId=s=++a,l=l||0!==I;break;case cL.CALLPROPVOID:var w=mL(o);A=w[0],I=w[1],v=w[2],x=gL(o);p=new dL(u,c+I,[x,A],-(x+1)+v);break;case cL.APPLYTYPE:x=gL(o);(p=new dL(u,c,x,-x)).returnTypeId=s=a;break;case cL.FINDPROPSTRICT:var S=mL(o);A=S[0],I=S[1],v=S[2];(p=new dL(u,c+I,A,1+v)).returnTypeId=s=++a,l=!0;break;case cL.FINDPROPERTY:var D=mL(o);A=D[0],I=D[1],v=D[2];(p=new dL(u,c+I,A,1+v)).returnTypeId=s=++a,l=!0;break;case cL.NEWFUNCTION:(p=new dL(u,c,gL(o),1)).returnTypeId=s=++a,l=!0;break;case cL.NEWCLASS:(p=new dL(u,c,gL(o),0)).returnTypeId=s=++a,l=!0;break;case cL.GETDESCENDANTS:(p=new dL(u,c,gL(o),0)).returnTypeId=s=++a;break;case cL.NEWARRAY:x=gL(o);(p=new dL(u,c,x,1-x)).returnTypeId=s=++a;break;case cL.NEWOBJECT:x=gL(o);(p=new dL(u,c,x,-2*x+1)).returnTypeId=s=++a;break;case cL.NEWACTIVATION:(p=new dL(u,c,null,1)).returnTypeId=s=++a,l=!0;break;case cL.NEWCATCH:p=new dL(u,c,gL(o),1),l=!0;break;case cL.CONSTRUCTSUPER:x=gL(o);p=new dL(u,c,x,-(x+1));break;case cL.CALLSUPER:var T=mL(o);A=T[0],I=T[1],v=T[2],x=gL(o);p=new dL(u,c+I,[x,A],-x+v);break;case cL.CALLSUPERVOID:var P=mL(o);A=P[0],I=P[1],v=P[2],x=gL(o);p=new dL(u,c+I,[x,A],-(x+1)+v);break;case cL.CONSTRUCTPROP:var B=mL(o);A=B[0],I=B[1],v=B[2],x=gL(o);(p=new dL(u,c+I,[x,A],-x+v)).returnTypeId=s=++a;break;case cL.GETPROPERTY:var O=mL(o);A=O[0],I=O[1],v=O[2];(p=new dL(u,cL.GETPROPERTY+I,A,0+v)).returnTypeId=s=++a;break;case cL.INITPROPERTY:case cL.SETPROPERTY:var M=mL(o);A=M[0],I=M[1],v=M[2];p=new dL(u,cL.SETPROPERTY+I,A,-2+v);break;case cL.DELETEPROPERTY:var L=mL(o);A=L[0],I=L[1],v=L[2];p=new dL(u,c+I,A,0+v);break;case cL.GETSUPER:var R=mL(o);A=R[0],I=R[1],v=R[2];(p=new dL(u,c+I,A,0+v)).returnTypeId=s=++a;break;case cL.SETSUPER:var N=mL(o);A=N[0],I=N[1],v=N[2];p=new dL(u,c+I,A,-2+v);break;case cL.COERCE:var F=mL(o);A=F[0],I=F[1],v=F[2];if((p=new dL(u,c+I,A,0+v)).returnTypeId=s,h&&h.name===cL.CONSTRUCTPROP&&h.params[1]===A){p.returnTypeId=-1,p.name=cL.LABEL,p.comment="IR: Drop coerce, reason: redundant";break}l=!0;break;case cL.COERCE_A:(p=new dL(u,c,null,0)).returnTypeId=s;break;case cL.COERCE_S:(p=new dL(u,c,null,0)).returnTypeId=-4;break;case cL.CONVERT_D:if(p=new dL(u,c,null,0),h)switch(h.name){case cL.PUSHINT:case cL.PUSHFLOAT:case cL.PUSHDOUBLE:case cL.ADD_I:case cL.INCREMENT:case cL.DECREMENT:case cL.DECREMENT_I:case cL.INCREMENT_I:p.name=cL.LABEL,p.comment="IR: CONVERT_D removed, reason: arguments strictly number"}break;case cL.CONVERT_B:if(p=new dL(u,c,null,0),h)switch(h.name){case cL.EQUALS:case cL.STRICTEQUALS:case cL.GREATERTHAN:case cL.GREATEREQUALS:case cL.LESSTHAN:case cL.LESSEQUALS:case cL.NOT:p.name=cL.LABEL,p.comment="IR: CONVERT_B removed, reason: arguments strictly boolean"}break;case cL.ESC_XATTR:case cL.ESC_XELEM:case cL.CONVERT_I:case cL.CONVERT_U:case cL.CONVERT_S:case cL.CONVERT_O:case cL.CHECKFILTER:p=new dL(u,c,null,0);break;case cL.GETLOCAL:(p=new dL(u,cL.GETLOCAL,gL(o),1)).returnTypeId=s;break;case cL.GETLOCAL0:(p=new dL(u,cL.GETLOCAL,0,1)).returnTypeId=s;break;case cL.GETLOCAL1:(p=new dL(u,cL.GETLOCAL,1,1)).returnTypeId=s;break;case cL.GETLOCAL2:(p=new dL(u,cL.GETLOCAL,2,1)).returnTypeId=s;break;case cL.GETLOCAL3:(p=new dL(u,cL.GETLOCAL,3,1)).returnTypeId=s;break;case cL.SETLOCAL:(p=new dL(u,cL.SETLOCAL,gL(o),-1)).returnTypeId=s;break;case cL.SETLOCAL0:(p=new dL(u,cL.SETLOCAL,0,-1)).returnTypeId=s;break;case cL.SETLOCAL1:(p=new dL(u,cL.SETLOCAL,1,-1)).returnTypeId=s;break;case cL.SETLOCAL2:(p=new dL(u,cL.SETLOCAL,2,-1)).returnTypeId=s;break;case cL.SETLOCAL3:(p=new dL(u,cL.SETLOCAL,3,-1)).returnTypeId=s;break;case cL.KILL:(p=new dL(u,c,gL(o),0)).name=cL.LABEL,p.comment="IR: KILL removed, reason: prevent optimisation";break;case cL.GETLEX:var k=mL(o);A=k[0],I=k[1],v=k[2];(p=new dL(u,c+I,A,1+v)).returnTypeId=s=++a,l=!0;break;case cL.SI8:case cL.SI16:case cL.SI32:case cL.SF32:case cL.SF64:p=new dL(u,c,null,-2);break;case cL.LI8:case cL.LI16:case cL.LI32:case cL.LF32:case cL.LF64:(p=new dL(u,c,null,0)).returnTypeId=s=-3;break;default:var U=i[o.index-1];return{error:{message:"UNKNOWN BYTECODE ".concat(U.toString(16)," ").concat(cL[U]," at ").concat(u),reason:"unknow_bytecode"}}}r.push(p)}var V=fL(0,0,r);if(l)_L(0,0,r);else{var j=[];for(f=0;f<r.length;f++)r[f].name===cL.PUSHSCOPE&&j.push(f);for(var G=0,Q=j;G<Q.length;G++){f=Q[G];var z=new dL(0,cL.LABEL);z.comment="IR: PUSHSCOPE removed, reason: unused",r.splice(f-1,2,z)}}var H,X,Y=[0];for(f=0;f<r.length;f++)for(d=0;d<r[f].refs.length;d++)Y.push(r[f].refs[d]);if(n.catchBlocks.length){H={},X={};for(f=0;f<n.catchBlocks.length;f++){var q=n.catchBlocks[f],K=-1,W=-1,J=0;for(U=0;U<r.length;U++){if((Z=r[U].position)>=q.start){K=Z;break}Ab.NO_PROPAGATE_SCOPES_FOR_TRY||(J=r[U].scope)}for(U=r.length-1;U>=0;U--){var Z;if((Z=r[U].position)<=q.end){W=Z;break}}H[K]||(H[K]=[]),H[K].push(q),X[W]||(X[W]=[]),X[W].push(q);var $=fL(q.target,1,r);$<V&&(V=$),_L(q.target,J,r),Y.push(q.target)}}return function(t,e){var n={},i=[];n[0]=0;for(var r=t.length,o=1;o<r;o++){var a=t[o];e.indexOf(a.position)>-1&&(n[a.position]=o),a.name>=cL.IFNLT&&a.name<=cL.LOOKUPSWITCH&&i.push(a)}for(var s=0,l=i;s<l.length;s++){var u=l[s];if(u.name!==cL.LOOKUPSWITCH)u.name!==cL.JUMP?u.childs.push(n[u.params[0]]):u.childs=[n[u.params[0]]];else{var c=u.params;for(u.childs=[],o=0;o<c.length-1;o++)u.childs.push(n[o])}}}(r,Y),{set:r,jumps:Y,catchStart:H,catchEnd:X,error:V<0?{message:"Stack underrun while preprocess, stack:"+V,reason:"underrun"}:null}}var bL=function(){function t(){}return t.prototype.test=function(t){if(!t.isConstructor)return!1;if(t.parameters.length>0)return!1;var e=t.getBody();return!(e.maxStack>1)&&(!(e.localCount>1)&&(!(e.maxScopeDepth-e.initScopeDepth>1)&&!(e.code.length>6)))},t.prototype.getBody=function(t){return this.test(t)?function(t){return function(){t.savedScope.superConstructor.call(this)}}:null},t}(),xL=function(){function t(){}return t.begin=function(t){var e=performance.now();this._currentTask={name:t,start:e,droped:!1},this._firstCompilerRun<0&&(this._firstCompilerRun=e)},t.drop=function(){this._currentTask&&(this._currentTask.droped=!0,this.end())},t.end=function(){if(this._currentTask){var t=performance.now(),e=t-this._currentTask.start,n=this.statRecords;t-this._lastCompilerStop<this.TASK_DELAY?this._taskBathTime+=e:this._taskBathTime=0,n.runs++,n.drops+=+this._currentTask.droped,n.totalCompileTime+=e,n.minCompileTime=n.minCompileTime>e?e:n.minCompileTime,n.maxCompileTime=n.minCompileTime<e?e:n.minCompileTime,n.overhead=100*n.totalCompileTime/(this._lastCompilerStop-this._firstCompilerRun),n.maxCompilerBatchTime=this._taskBathTime>n.maxCompilerBatchTime?this._taskBathTime:n.maxCompilerBatchTime,this._lastCompilerStop=t,this._currentTask=null}},t.reset=function(){Object.assign(this.statRecords,{compiled:0,droped:0,minCompileTime:Number.MAX_VALUE,maxCompileTime:-Number.MAX_VALUE,totalCompileTime:-0,maxCompilerTaskTime:-Number.MAX_VALUE,overhead:0}),this._currentTask=null,this._taskBathTime=0},t.TASK_DELAY=10,t.statRecords={runs:0,drops:0,minCompileTime:Number.MAX_VALUE,maxCompileTime:-Number.MAX_VALUE,totalCompileTime:-0,maxCompilerBatchTime:-Number.MAX_VALUE,overhead:0},t._firstCompilerRun=-1,t._lastCompilerStop=-1,t._taskBathTime=0,t}();window.AWAY_COMPILER_STAT=xL;var CL=Symbol("External class marker"),IL=/nape./,EL={_lib:null,set lib(t){t&&console.debug("[AVM2] Register external lib:",t),this._lib=t},get lib(){return this._lib}};function wL(t,e){void 0===e&&(e=void 0);var n=EL._lib;if(!n||!t)return null;if(!e||void 0!==n[t])return n[t];if(!e)return null;for(var i=n,r=0,o=e.split(".");r<o.length;r++){if(!(i=i[o[r]]))return null}return i[t]}function SL(t,e){var n;if(!EL._lib)return null;var i=null===(n=t.namespace)||void 0===n?void 0:n.uri,r=wL(t.name,i&&IL.test(i)?i:void 0);if("function"!=typeof r)return null;Object.defineProperty(r.prototype,CL,{value:!0});var o=Reflect.construct(r,e);return o.__fast__=!0,o}function DL(t){return EL._lib?"(".concat(t," != undefined && ").concat(t,"[AX_CLASS_SYMBOL])"):"true"}function TL(){return!!EL._lib}function PL(t,e){if(void 0===e&&(e=!1),!EL._lib)return"true";var n=e?"":"|| ".concat(t," == null");return"(_a = typeof ".concat(t,", ((_a !== 'object' && _a !== 'function' ) ").concat(n," || ").concat(t,"[AX_CLASS_SYMBOL]))")}var BL=function(){function t(){this.imports=[],this._lexMode=!1}return t.prototype.test=function(t,e){return!1},t.prototype._genEntry=function(t){return"//"+t.name},t.prototype._genAlias=function(t,e){return t.namespace.uri.replace(/\./g,"_")+"__"+t.name},t.prototype.findAliases=function(t,e){return this.imports.filter((function(n){return n.name===t&&(!e||e===n.options.findProp)}))},t.prototype.getLexAlias=function(t,e){this._lexMode=!0;var n=this.getPropStrictAlias(t,Object.assign({findProp:!0,mnIndex:-1},e||{}));return this._lexMode=!1,n},t.prototype.getPropStrictAlias=function(t,e){var n;if(void 0===e&&(e={findProp:!1,mnIndex:-1}),!this.test(t,this._lexMode))throw"Can't generate static alias for ".concat(t.name," of ").concat(null===(n=t.namespace)||void 0===n?void 0:n.uri);var i=this.imports.find((function(n){return n.name===t&&e.findProp===n.options.findProp}));if(i)return i.alias;var r=this._genAlias(t,e);return this.imports.find((function(t){return t.alias===r}))||this.imports.push({name:t,alias:r,options:e}),r},t.prototype.genHeader=function(t){if(void 0===t&&(t=""),!this.imports.length)return"";for(var e=["\n".concat(t," /* ").concat(this.constructor.name," */")],n=0,i=this.imports;n<i.length;n++){var r=i[n];e.push(t+" "+this._genEntry(r))}return e.push("\n"),e.join("\n")},t.prototype.genBody=function(t){return""},t.prototype.genPost=function(t){return t},t.prototype.reset=function(){this.imports.length=0},t}(),OL=function(){function t(t){if(this.generators=t,this.allowColissions=!1,!t)throw"Generators array can't be null"}return t.prototype.getGenerator=function(t,e){for(var n=0,i=this.generators;n<i.length;n++){var r=i[n];if(r.test(t,e))return r}return null},t.prototype.test=function(t,e){return!!this.generators.length&&!!this.getGenerator(t,e)},t.prototype.findAliases=function(t,e){for(var n=[],i=0,r=this.generators;i<r.length;i++){var o=r[i];n=n.concat(o.findAliases(t,e))}return n},t.prototype.getLexAlias=function(t,e){var n,i=this.getGenerator(t,!0);if(!i)throw"Can't generate static alias for ".concat(t.name," of ").concat(null===(n=t.namespace)||void 0===n?void 0:n.uri);return i.getLexAlias(t,e)},t.prototype.getPropStrictAlias=function(t,e){var n,i=this.getGenerator(t,!1);if(!i)throw"Can't generate static alias for ".concat(t.name," of ").concat(null===(n=t.namespace)||void 0===n?void 0:n.uri);return i.getPropStrictAlias(t,e)},t.prototype.genHeader=function(t){for(var e="",n=0,i=this.generators;n<i.length;n++){e+=i[n].genHeader(t)}return e},t.prototype.genBody=function(t){for(var e="",n=0,i=this.generators;n<i.length;n++){e+=i[n].genBody(t)}return e},t.prototype.genPost=function(t){for(var e=0,n=this.generators;e<n.length;e++){t=n[e].genPost(t)}return t},t.prototype.reset=function(){this.generators.forEach((function(t){return t.reset()}))},t}(),ML=function(t){function e(e){var n=t.call(this)||this;return n.allows=e,n.allows=Object.assign({box2D:!0,nape:!0},e),n}return o(e,t),e.prototype._genEntry=function(t){var e=t.name.namespace.uri,n=t.name.name;return"const ".concat(t.alias," = context.getStaticImportExt('").concat(e,"', '").concat(n,"');")},e.prototype._genAlias=function(t,e){return t.namespace.uri.replace(/\./g,"_")+"__"+t.name},e.prototype.test=function(t){var e,n=null===(e=t.namespace)||void 0===e?void 0:e.uri;return!(!n||!EL.lib)&&(n.startsWith("Box2D")&&this.allows.box2D?!!wL(t.name):!(!n.startsWith("nape.")||!this.allows.nape)&&!t.name.includes("Debug"))},e}(BL),LL=["flash.geom","flash.utils","Math","trace","parseInt","RegExp"],RL=["getDefinitionByName","SetIntervalTimer","setTimeout",":trace"],NL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.test=function(t){var e,n=(null===(e=t.namespace)||void 0===e?void 0:e.uri)||"",i=t.name;return void 0!==n&&(!(RL.indexOf(i)>-1||RL.indexOf(n)>-1)&&(LL.indexOf(i)>-1&&!n||LL.indexOf(n)>-1))},e.prototype._genEntry=function(t){var e=t.name.namespace.uri,n=t.name.name,i=t.options||{},r=i.mnIndex,o=i.findProp;if("number"!=typeof r||r<0)throw"Name alias required for generatin Toplevel exports!";var a=r,s="['".concat(vb.getPublicMangledName(n),"']");return"const ".concat(t.alias," = context.getTopLevel(").concat(a,")").concat(o?s:"","; // ").concat(e,":").concat(n)},e.prototype._genAlias=function(t,e){var n=t.namespace.uri.split(/[.:]/g);if("number"!=typeof e.mnIndex||e.mnIndex<0)throw"Name alias required for generatin Toplevel exports!";return"".concat(n.join("_"),"__").concat(t.name).concat(e.findProp?"":"_def")},e}(BL),FL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._mn=new Set,e._loc={},e}return o(e,t),e.prototype.markScope=function(t,e){if(void 0===e&&(e=0),!e)throw"Scope location should be marked!";this._loc[t]=e},e.prototype.test=function(t,e){return!!e&&(!(!t.uri||0!==t.namespace.type)&&(!!this._mn.has(t)||(this._mn.add(t),!1)))},e.prototype._genAlias=function(t,e){var n=t.namespace.uri.split(/[.|:]/g),i=e;if(!i.nameAlias)throw"Name alias required for generatin FirstUsageScopeLex exports!";if(!i.scope)throw"Scope alias required for generatin FirstUsageScopeLex exports!";return"".concat(n.join("_"),"__").concat(t.name)},e.prototype.findAliases=function(){return[]},e.prototype.genHeader=function(){return""},e.prototype.genBody=function(t){if(!this.imports.length)return"";for(var e=["".concat(t," // ").concat(this.constructor.name," ")],n=0,i=this.imports;n<i.length;n++){var r=i[n];e.push("".concat(t," let ").concat(r.alias,"; // ").concat(r.name))}return e.join("\n")},e.prototype.genPost=function(t){for(var e=0,n=this.imports;e<n.length;e++){var i=n[e],r=i.options,o=this._loc[r.scope];if(!o)throw"Unknow import for scope:"+r.scope;var a=t[o].length-t[o].trimLeft().length-1;t.splice(o+1,0,this._genEntry(i," ".repeat(a)))}return t},e.prototype._genEntry=function(t,e){void 0===e&&(e=" ");var n=[],i=t.name,r=t.options;return n.push("".concat(e," // ")),n.push("".concat(e," // ").concat(i)),n.push("".concat(e," temp = ").concat(r.scope,".findScopeProperty(").concat(r.nameAlias,", true, false);")),n.push("".concat(e," ").concat(t.alias," = temp['$Bg").concat(i.name,"'];")),n.push("".concat(e," if (").concat(t.alias," === undefined || typeof ").concat(t.alias," === 'function') {")),n.push("".concat(e,"     ").concat(t.alias," = temp.axGetProperty(").concat(r.nameAlias,");")),n.push("".concat(e," }")),n.join("\n")},e}(BL);function kL(t,e){return t.canUseRealThis&&0===e?"this":0===e?"_this":"local"+e}var UL,VL,jL="[stack underrun]";function GL(t,e,n){void 0===n&&(n=!0);var i=t.evalStackIndex(e);if(i<0)return"/*".concat(jL," ").concat(i,"*/ null");var r="stack"+i;return n?t.isThisAlias(r)?kL(t,0):t.getConstAlias(r):r}function QL(t){return Ab.FOLLOW_AS3_BUG&&(t=Bx(t)),0|t}function zL(t){return t>>>0}function HL(t){return!!t}var XL=((UL={}).Number=function(t){return Ab.FOLLOW_AS3_BUG?"sec.AXNumber.axCoerce(".concat(t,")"):"(+".concat(t,")")},UL.int=function(t){return Ab.FOLLOW_AS3_BUG?"sec.AXNumber.axCoerce(".concat(t,") | 0"):"(".concat(t,"|0)")},UL.uint=function(t){return"(".concat(t,">>>0)")},UL.Boolean=function(t){return"(!!".concat(t,")")},UL.String=function(t){return"(".concat(t,"==null?null:''+ ").concat(t,")")},UL),YL=((VL={}).Number=Bx,VL.int=QL,VL.uint=zL,VL.Boolean=HL,VL.String=yb,VL);function qL(t){return t&&t.name&&t.name in YL}function KL(t,e,n,i){if(void 0===i&&(i=!1),!qL(n))return i?"string"==typeof e?e:GL(t,e):null;if("string"==typeof e)return XL[n.name](e);var r=t.getConstAliasMeta(e);if(r&&"const"===r.kind){var o=YL[n.name](r.value);return"string"==typeof o?JSON.stringify(o):""+o}return XL[n.name](GL(t,e))}var WL=/^[a-zA-Z$_][a-zA-Z0-9$_]*$/;function JL(t,e){return e&&WL.test(e)?"".concat(t,".").concat(e):"".concat(t,'["').concat(e,'"]')}function ZL(t,e){if(t.names.length<=e)throw"Name index out of bounds";return t.noHoistMultiname?"$names["+e+"]":"name"+e}function $L(t,e){t.emitBeginMain("try {")}function tR(t,e){t.emitEndMain(),function(t,e){t.popAnyAlias("stack0"),t.emitBeginMain("catch(e) {"),t.emitMain("// in case this is a error coming from stack0.__fast when stack0 is undefined,"),t.emitMain("// we convert it to a ASError, so that avm2 can still catch it"),t.emitMain("if (e instanceof TypeError) {"),t.emitMain('     var _e = context.sec.createError("TypeError", {code:1065, message:e.message})'),t.emitMain("     _e.source = e; e = _e;"),t.emitMain("}"),t.emitMain("stack0 = e;");for(var n="",i=0;i<e.length;i++){var r=e[i].type;if(r){var o=t.getMultinameIndex(r);t.emitMain("const errorClass$".concat(i," = context.sec.application.getClass(").concat(ZL(t,o),");")),t.emitMain("if(errorClass$".concat(i," && errorClass$").concat(i,".axIsType(e))")),t.emitMain("     { p = ".concat(e[i].target,"; continue; };"))}else n="{ p = ".concat(e[i].target,"; continue; };")}n&&t.emitMain(n),t.emitMain("throw e;"),t.emitEndMain()}(t,e)}function eR(t){var e=t.currentOpcode,n=GL(t,0),i=GL(t,1);switch(t.emitMain("domainMemory = domainMemory || context.domainMemory;"),e.name){case cL.SI8:t.emitMain("domainMemory.setInt8(".concat(n,", ").concat(i,")"));break;case cL.SI16:t.emitMain("domainMemory.setInt16(".concat(n,", ").concat(i,", true);"));break;case cL.SI32:t.emitMain("domainMemory.setInt32(".concat(n,", ").concat(i,", true);"));break;case cL.SF32:t.emitMain("domainMemory.setFloat32(".concat(n,", ").concat(i,", true);"));break;case cL.SF64:t.emitMain("domainMemory.setFloat64(".concat(n,", ").concat(i,", true);"));break;case cL.LI8:t.emitMain("".concat(n," = domainMemory.getInt8(").concat(n,")"));break;case cL.LI16:t.emitMain("".concat(n," = getInt16(").concat(n,", true);"));break;case cL.LI32:t.emitMain("".concat(n," = domainMemory.getInt32(").concat(n,", true);"));break;case cL.LF32:t.emitMain("".concat(n," = domainMemory.getFloat32(").concat(n,", true);"));break;case cL.LF64:t.emitMain("".concat(n," = domainMemory.getFloat64(").concat(n,", true);"))}}var nR=function(){function t(t){this._indent="",this._indentLen=0,this.names=[],this.openTryCatchGroups=[],this.mainBlock=[],this.headerBlock=[],this.thisAliases=new Set,this.constAliases={},this.localAliases={},this.localTypes={},this.stackAliases={},this.noHoistMultiname=Ab.NO_HOIST_MULTINAME,this.methodInfo=t,this.abc=t.abc,this.init()}return Object.defineProperty(t.prototype,"indent",{get:function(){return this._indent},enumerable:!1,configurable:!0}),t.prototype.setStackAlias=function(t,e){void 0===e&&(e=null);var n=this.evalStackIndex(t);return this.stackAliases[n]=e,e},t.prototype.getStackAlias=function(t){return this.stackAliases[this.evalStackIndex(t)]},Object.defineProperty(t.prototype,"isPossibleGlobalThis",{get:function(){var t=this.methodInfo.trait&&this.methodInfo.trait.kind;return 1!==t&&2!==t&&3!==t&&!this.methodInfo.isConstructor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canUseRealThis",{get:function(){return!!Ab.EMIT_REAL_THIS&&!this.isPossibleGlobalThis},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.methodInfo.parentInfo&&(this.localTypes[0]=[this.methodInfo.parentInfo.typeName]);for(var t=1,e=0,n=this.methodInfo.parameters;e<n.length;e++){var i=n[e];this.localTypes[t]=i.typeName?[i.typeName]:[],t++}},t.prototype.evalStackIndex=function(t){var e=this.currentOpcode.stack-1-t;return e<0?-1:e},t.prototype.moveIndent=function(t){return this._indentLen+=4*t,this._indentLen<0&&(this._indentLen=0),this._indent=" ".repeat(this._indentLen),this._indent},t.prototype.getMultinameIndex=function(t){var e="number"==typeof t?this.abc.getMultiname(t):t,n=this.names.indexOf(e);return n>-1?n:(this.names.push(e),this.names.length-1)},t.prototype.emitConst=function(t,e,n){void 0===n&&(n=!0);var i=this.evalStackIndex(t),r=GL(this,t,!1);return this.popAnyAlias(r),Ab.UNSAFE_INLINE_CONST&&(this.constAliases[r]={value:e,kind:n?"const":"alias",pos:this.mainBlock.length},this.stackAliases[i]=this.constAliases[r]),n&&"string"==typeof e&&(e=JSON.stringify(e)),this.mainBlock.push(this.indent+r+" = "+e+";")},t.prototype.emitGetLocal=function(t,e){var n=GL(this,t,!1);if(this.popAnyAlias(n),0===e&&this.pushThisAlias(n),Ab.UNSAFE_INLINE_CONST){var i="local"+e;this.constAliases[n]={value:i,pos:this.mainBlock.length,kind:"alias"},this.localAliases[i]=n}return this.localTypes[e]&&this.localTypes[e][0]&&this.emitMain("// JIT: potential type:"+this.localTypes[e][0].toString()),this.mainBlock.push(this.indent+n+" = "+kL(this,e)+";")},t.prototype.emitMain=function(t){return void 0===t&&(t=""),this.mainBlock.push(this.indent+t)},t.prototype.emitHead=function(t,e){return void 0===e&&(e=""),this.headerBlock.push(e+t)},t.prototype.emitBeginMain=function(t){void 0===t&&(t="{");var e=this.emitMain(t);return this.moveIndent(1),e},t.prototype.emitEndMain=function(){return this.moveIndent(-1),this.emitMain("}")},t.prototype.killConstAliasInstruction=function(t){if(t&&0!==t.length)for(var e=0,n=t;e<n.length;e++){var i=n[e];if(this.constAliases[i]){var r=this.mainBlock[this.constAliases[i].pos];this.mainBlock[this.constAliases[i].pos]="//"+r+"// JIT: redundant assigment, value unused"}}},t.prototype.getConstAliasMeta=function(t){return Ab.UNSAFE_INLINE_CONST?this.constAliases["stack"+this.evalStackIndex(t)]:null},t.prototype.getConstAlias=function(t){if(!Ab.UNSAFE_INLINE_CONST)return t;var e=this.constAliases[t];return e?"const"!==e.kind?e.value:"string"==typeof e.value?JSON.stringify(e.value):""+e.value:t},t.prototype.isThisAlias=function(t){return!!Ab.UNSAFE_PROPAGATE_THIS&&this.thisAliases.has(t)},t.prototype.pushThisAlias=function(t,e){return!!Ab.UNSAFE_PROPAGATE_THIS&&(!(e&&!this.thisAliases.has(e))&&(!this.thisAliases.has(t)&&(this.thisAliases.add(t),!0)))},t.prototype.dropAllAliases=function(){this.constAliases={},this.localAliases={}},t.prototype.popAnyAlias=function(t){if(t in this.localAliases){var e=t;t=this.localAliases[e],delete this.localAliases[e]}return delete this.constAliases[t],this.thisAliases.delete(t)},t}(),iR=["Slot","Method","Getter","Setter","Class","Function","Const","GetterSetter"];var rR=function(t){function e(e,n,i,r,o,a,s,l){var u=t.call(this,l)||this;return u.abc=e,u.multiname=n,u.superName=i,u.flags=r,u.protectedNs=o,u.interfaceNames=a,u.methodInfo=s,u.traits=l,u.classInfo=null,u.runtimeTraits=null,u._interfaces=null,u.methodInfo.instanceInfo=u,u.methodInfo.isConstructor=!0,u}return o(e,t),e.prototype.getClassName=function(){var t=this.multiname.namespaces[0];return t.uri?t.uri+"."+this.multiname.name:this.multiname.name},e.prototype.getInterfaces=function(t){if(this._interfaces)return this._interfaces;var e,n=t.superClass;n&&(e=n.classInfo.instanceInfo.getInterfaces(n));for(var i=Set,r=this._interfaces=new i(e),o=0;o<this.interfaceNames.length;o++){var a=this.interfaceNames[o],s=this.abc.applicationDomain.getClass(a);r.add(s),s.classInfo.instanceInfo.getInterfaces(s).forEach((function(t){return r.add(t)}))}return r},e.prototype.toString=function(){return"InstanceInfo "+this.multiname.name},e.prototype.trace=function(t){t.enter("InstanceInfo: "+this.multiname),this.superName&&t.writeLn("Super: "+this.superName),this.traits.trace(t),t.outdent()},e.prototype.isInterface=function(){return!!(4&this.flags)},e.prototype.isSealed=function(){return!!(1&this.flags)},e.prototype.isFinal=function(){return!!(2&this.flags)},e}(YM),oR=function(){return function(){}}(),aR="WeakRef"in self&&Ab.USE_WEAK_REF;aR&&console.debug("[OrphanManager] `WeakRef` used for orphans!");var sR=function(){function t(){}return t.addOrphan=function(t){void 0===t&&(t=null),t&&t.isAsset&&(t.isAsset(yl)||t.isAsset(Zs)||t.isAsset(Js))&&(t.id in this.orphans||(this.orphans[t.id]=aR?new self.WeakRef(t):t,this.totalOrphansCount++))},t.removeOrphan=function(t){t.id in this.orphans&&(this.totalOrphansCount--,delete this.orphans[t.id])},t.updateOrphans=function(){var t;for(var e in this.orphans)t=this.orphans[e],aR&&t&&(t=null==t?void 0:t.deref()),t?t.parent?(this.totalOrphansCount--,delete this.orphans[e]):(t.advanceFrame(),_l.execute_as3_constructors_recursiv(t)):(console.debug("[OrphanManager] Orphan was deleted by GC:",e),this.totalOrphansCount--,delete this.orphans[e])},t.orphans=Object.create(null),t.totalOrphansCount=0,t}();function lR(t,e){if(e){if(e.slots)for(var n=0;n<e.slots.length;n++)e.slots[n]&&(t[e.slots[n].multiname.getMangledName()]=e.slots[n].value);return e.superTraits&&lR(t,e.superTraits),t}}function uR(t){var e,n,i,r,o=this,a=Object.create(o.tPrototype);lR(a,o.tPrototype.traits);for(var s=null,l=null,u=o;u&&!l;)(s=u._symbol)&&s.timeline&&(l=s.timeline),u=u.superClass;var c,h=null===(r=null===(i=null===(n=null===(e=o.superClass)||void 0===e?void 0:e.classInfo)||void 0===n?void 0:n.instanceInfo)||void 0===i?void 0:i.multiname)||void 0===r?void 0:r.name;o.axApplicationDomain&&o.axApplicationDomain.awayApplicationDomain?c=o.axApplicationDomain.awayApplicationDomain:oR.loaderContext&&(c=oR.loaderContext.applicationDomain);var p=o.classInfo.instanceInfo.multiname,d=p.name,f=p.uri?p.uri+"."+d:d;if(l){var _=this.sec.flash.display.MovieClip.axIsType(a)||this.sec.flash.display.SimpleButton.axIsType(a),g=new yl(l,!_);a.adaptee=g,g.reset(),_l.execute_as3_constructors_recursiv(g)}if(!l&&c&&c.hasSymbolForClass(f)){var m=c.getSymbolAdaptee(f);m||console.warn("error: could not get asset ".concat(h," for class ").concat(d,", no ActiveLoaderContext.loaderContext")),m&&(m instanceof yl?a.adaptee.graphics=m.graphics:a.adaptee=m)}return"SimpleButton"===d&&(a.adaptee=new yl(new rl(this.sec.player.factory))),a[wb]=!0,a.axInitializer.apply(a,t),a.constructorHasRun=!0,a.adaptee&&sR.addOrphan(a.adaptee),a.isAVMFont&&(a.fontName=d),a}var cR={MovieClip:!0,DisplayObject:!0,Sprite:!0,Sound:!0,SimpleButton:!0,BitmapData:!0};function hR(t,e){var n=t.abc.applicationDomain.findClassInfoDeep(t);if(!n)return!1;for(e&&e.push(t.name);n&&t;){if(cR[t.name])return!1;if(!(t=n.instanceInfo.superName))return!0;if(cR[t.name])return!1;if(e&&e.push(t.name),!(n=t.abc.applicationDomain.findClassInfoDeep(t)))return!0;if("Object"===t.name&&""===t.namespace.uri&&!n.instanceInfo.superName)return!0}return!1}function pR(t,e){var n=Object.create(t.tPrototype);return t.tPrototype.traits&&lR(n,t.tPrototype.traits),n[wb]=!0,Reflect.apply(n.axInitializer,n,e),n.constructorHasRun=!0,n}var dR={},fR=cL;function _R(t,e,n,i){if(Ab.MAX_INLINE_RETURN<=0)return!1;var r=function(t,e,n,i){for(var r=-1,o=-1,a=n;a<t.length;a++){var s=t[a];if(s.position===i&&(r=a),r>a&&e.indexOf(s.position)>=0){o=a;break}}return r>=0&&-1===o&&(o=t.length),{startIndex:r,endIndex:o}}(t,e,n,i).startIndex;return r>=0&&t[r].name===cL.RETURNVOID}function gR(t,e,n){for(var i=t.traits.getTrait(e),r=t;Ab.CHEK_SUPER_TRAITS&&!i&&r&&r instanceof rR;){var o=r.superName;if(!o)return null;if((r=n.global.object.applicationDomain.getClass(o).classInfo.instanceInfo).runtimeTraits&&(i=r.runtimeTraits.getTrait(e.namespaces,e.name)))return i;if(i=r.traits.getTrait(e))return i}return i}function mR(t,e){var n;void 0===e&&(e={});var i=e.optimise,r=void 0===i?pL:i,o=e.scope,a=new nR(t),s=new FL,l=new OL([new ML({box2D:!1}),new NL]),u=new bL,c=null;xL.begin("");var h=function(t){return 16&r&&!!t};if(h(u)&&"function"==typeof(B=u.getBody(t)))return xL.drop(),{names:[],compiled:B};var p=t.meta,d=p.name,f=vL(t),_=f.error,g=f.jumps,m=f.catchStart,y=f.catchEnd,A=f.set;if(_&&(xL.drop(),"underrun"!==_.reason||!(32&r)))return{error:_};for(var v=t.instanceInfo||(null===(n=t.trait)||void 0===n?void 0:n.holder),b=t.abc,x=t.getBody(),C=x.maxStack,I=x.localCount-1,E=x.maxScopeDepth-x.initScopeDepth,w=a.headerBlock,S=a.mainBlock,D=!1,T=0,P=A;T<P.length;T++){var B=P[T].name;D=D||B>=cL.LI8&&B<=cL.SF64}a.moveIndent(1);var O=t.parameters,M=1&r,L=M?function(t){for(var e=t.methodInfo,n=t.methodInfo.parameters,i=t.methodInfo.abc,r=t.methodInfo.meta.name,o=0,a=[],s=[],l=0;l<n.length;l++){var u=n[l],c={name:kL(t,l+1),value:null,type:null};u.hasOptionalValue()&&(1===u.optionalValueKind?c.value="".concat(JSON.stringify(i.getString(u.optionalValueIndex))):c.value="".concat(u.getOptionalValue())),c.type=u.typeName,a[l]=c}e.needsRest()&&a.push({name:"...args"});var h=a.map((function(t){return t.value?"".concat(t.name," /* ").concat(t.type?t.type.name:"*"," */ = ").concat(t.value):"".concat(t.name," /* ").concat(t.type?t.type.name:"*"," */")})).join(", "),p=r.replace(/([^a-z0-9]+)/gi,"_");s.push("".concat(t.indent,"return function compiled_").concat(p,"(").concat(h,") {")),t.moveIndent(1);var d=kL(t,0);"this"!==d?t.isPossibleGlobalThis?s.push("".concat(t.indent,"let ").concat(d," = this === context.jsGlobal ? context.savedScope.global.object : this;")):s.push("".concat(t.indent,"let ").concat(d," = this;")):s.push("".concat(t.indent,'// Possible use a real "this"'));for(var f=0,_=a;f<_.length;f++){var g=_[f],m=KL(t,g.name,g.type,!1);m&&(s.push("".concat(t.indent,"/* Force ").concat(g.type.name," coerce */")),s.push("".concat(t.indent).concat(g.name," = ").concat(m,";")))}return e.needsRest()&&(s.push("".concat(t.indent,"let ").concat(kL(t,n.length+1)," = context.sec.createArrayUnsafe(args);")),o+=1),e.needsArguments()&&(s.push("".concat(t.indent,"let ").concat(kL(t,n.length+1)," = context.sec.createArrayUnsafe(Array.from(arguments));")),o+=1),{annotation:s.join("\n"),paramsShift:o}}(a):function(t){var e=t.methodInfo.parameters,n=t.methodInfo.meta.name,i=[];i.push("".concat(t.indent,"return function compiled_").concat(n.replace(/([^a-z0-9]+)/gi,"_"),"() {")),t.moveIndent(1);for(var r=0;r<e.length;r++)if(e[r].hasOptionalValue()){i.push("".concat(t.indent,"let argnum = arguments.length;"));break}for("this"!==kL(t,0)?i.push("".concat(t.indent,"let ").concat(kL(t,0)," = this === context.jsGlobal ? context.savedScope.global.object : this;")):i.push("".concat(t.indent,'// Possible use a real "this"')),r=0;r<e.length;r++){var o=e[r];i.push("".concat(t.indent,"let ").concat(kL(t,r+1)," = arguments[").concat(r,"];")),e[r].hasOptionalValue()&&(1===o.optionalValueKind?i.push("".concat(t.indent,"if (argnum <= ").concat(r,") ").concat(kL(t,r+1)," = context.abc.getString(").concat(o.optionalValueIndex,");")):i.push("".concat(t.indent,"if (argnum <= ").concat(r,") ").concat(kL(t,r+1)," = ").concat(o.getOptionalValue(),";")))}return{annotation:i.join("\n"),paramsShift:0}}(a),R=L.paramsShift,N=L.annotation,F=a.indent;w.push(N);var k=w.length;w.push("__PLACE__FOR__OPTIONAL__LOCALS__");for(var U=[],V=O.length+1+R;V<=I;V++)U[V]={index:V,isArgumentList:V===O.length+1,read:0,write:0,die:!1};for(V=0;V<C;V++)w.push("".concat(F,"let stack").concat(V," = undefined;"));for(V=0;V<E;V++)w.push("".concat(F,"let scope").concat(V," = undefined;"));w.push("".concat(F,"let temp = undefined;")),D&&w.push("".concat(F,"let domainMemory; // domainMemory"));var j=a.names,G=function(t){return ZL(a,a.getMultinameIndex(t))};w.push("".concat(F,"let sec = context.sec;"));var Q=g.length>1||m;dR&&dR[p.classPath+"__begin"]&&(a.emitMain("/* ATTACH METHOD HOOK */"),a.emitMain("context.executeHook(".concat(kL(a,0),", '").concat(p.classPath+"__begin","')"))),a.emitMain("");var z,H,X,Y=m?Object.keys(m).length:0,q=Ab.ENABLE_LOOP_GUARD&&Q&&g.length-2*Y>=Ab.LOOP_GUARD_MIN_BRANCHES;if(Q){if(q&&a.emitMain("let tick = 0;"),a.emitMain("let p = 0;"),a.emitBeginMain("while (true) {"),q){var K=Ab.LOOP_GUARD_MAX_LOOPS;a.emitBeginMain("if (tick++ > ".concat(K,") {")),a.emitMain("throw 'To many loops (> ".concat(K,') in "').concat(p.classPath,"\" at' + p + ' ,method was dropped to avoid stucking';\n'")),a.emitEndMain()}a.emitBeginMain("switch (p) {")}Q&&a.moveIndent(2);var W=function(t,e){return void 0===e&&(e=!0),GL(a,t,e)},J=function(t){return kL(a,t)},Z=function(t,e){var n=e||a.currentOpcode.params;return"number"==typeof n?n:n[t]};for(V=0;V<A.length;V++){if(a.currentOpcode=A[V],X&&(H=X),X=A[V],h(c)&&c.killFar(V),g.indexOf(X.position)>=0&&(a.dropAllAliases(),a.openTryCatchGroups.forEach((function(t){return tR(a,t)})),Q&&(a.moveIndent(-1),a.emitMain("case ".concat(X.position,":")),a.moveIndent(1)),a.openTryCatchGroups.forEach((function(t){return $L(a)}))),(z=m?m[X.position]:null)&&(a.openTryCatchGroups.push(z),a.emitBeginMain("try {"),a.moveIndent(1)),Ab.PRINT_BYTE_INSTRUCTION){var $="number"==typeof X.params?X.params:X.params.join(" / ");a.emitMain("//".concat(fR[X.name]," ").concat($," -> ").concat(X.returnTypeId))}X.comment&&a.emitMain("//".concat(X.comment));var tt,et=W(0),nt=W(1),it=W(2),rt=W(3),ot=X.scope>0?"scope".concat(X.scope-1):"context.savedScope",at="scope"+X.scope;if(X.stack<0)a.emitMain("// unreachable");else{var st=0;switch(X.name){case cL.LABEL:break;case cL.DXNSLATE:a.emitMain("".concat(ot,".defaultNamespace = context.internNamespace(0, ").concat(et,");"));break;case cL.DEBUGFILE:case cL.DEBUGLINE:case cL.DEBUG:break;case cL.THROW:a.emitMain("throw ".concat(et,";"));break;case cL.GETLOCAL:U[st=Z(0)]&&U[st].read++,a.emitGetLocal(-1,st);break;case cL.SETLOCAL:U[st=Z(0)]&&(U[st].write++,U[st].read||(U[st].die=!0)),a.killConstAliasInstruction([W(0,!1)]),a.popAnyAlias(J(st)),a.emitMain("".concat(J(st)," = ").concat(et,";"));break;case cL.GETSLOT:a.popAnyAlias(et),a.emitMain("".concat(W(0,!1)," = ").concat(et,".axGetSlot(").concat(Z(0),");"));break;case cL.SETSLOT:a.emitMain("".concat(nt,".axSetSlot(").concat(Z(0),", ").concat(et,");"));break;case cL.GETGLOBALSCOPE:a.popAnyAlias(W(-1,!1)),a.emitMain("".concat(W(-1,!1)," = context.savedScope.global.object;"));break;case cL.PUSHSCOPE:null==s||s.markScope(at,S.length),a.emitMain("".concat(at," = ").concat(ot,".extend(").concat(et,");"));break;case cL.PUSHWITH:a.emitMain("".concat(at," = context.pushwith(").concat(ot,", ").concat(et,");"));break;case cL.POPSCOPE:a.emitMain("".concat(ot," = undefined;"));break;case cL.GETSCOPEOBJECT:a.popAnyAlias(W(-1,!1)),a.emitMain("".concat(W(-1)," = scope").concat(Z(0),".object;"));break;case cL.NEXTNAME:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = sec.box(").concat(nt,").axNextName(").concat(et,");"));break;case cL.NEXTVALUE:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = sec.box(").concat(nt,").axNextValue(").concat(et,");"));break;case cL.HASNEXT:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = sec.box(").concat(nt,").axNextNameIndex(").concat(et,");"));break;case cL.HASNEXT2:a.popAnyAlias(W(-1,!1)),a.emitMain("temp = context.hasnext2(".concat(J(Z(0)),", ").concat(J(Z(1)),");")),a.emitMain("".concat(J(Z(0))," = temp[0];")),a.emitMain("".concat(J(Z(1))," = temp[1];")),a.emitMain("".concat(W(-1)," = ").concat(J(Z(1))," > 0;"));break;case cL.IN:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = (").concat(nt," && ").concat(nt,".axClass === sec.AXQName) ? obj.axHasProperty(").concat(nt,".name) : ").concat(et,".axHasPublicProperty(").concat(nt,");"));break;case cL.DUP:a.popAnyAlias(W(-1,!1)),a.emitMain("".concat(W(-1)," = ").concat(et,";")),a.pushThisAlias(W(-1),et);break;case cL.POP:a.popAnyAlias(W(0,!1));break;case cL.SWAP:a.popAnyAlias(W(0,!1)),a.popAnyAlias(W(1,!1)),a.emitMain("temp = ".concat(et,";")),a.emitMain("".concat(W(0)," = ").concat(nt,";")),a.emitMain("".concat(W(1)," = temp;")),a.emitMain("temp = undefined;");break;case cL.PUSHTRUE:a.emitConst(-1,!0);break;case cL.PUSHFALSE:a.emitConst(-1,!1);break;case cL.PUSHBYTE:case cL.PUSHSHORT:a.emitConst(-1,Z(0));break;case cL.PUSHINT:a.emitConst(-1,b.ints[Z(0)]);break;case cL.PUSHUINT:a.emitConst(-1,b.uints[Z(0)]);break;case cL.PUSHDOUBLE:a.emitConst(-1,b.doubles[Z(0)]);break;case cL.PUSHSTRING:a.emitConst(-1,b.getString(Z(0)));break;case cL.PUSHNAN:a.emitConst(-1,NaN);break;case cL.PUSHNULL:a.emitConst(-1,null);break;case cL.PUSHUNDEFINED:a.emitConst(-1,void 0);break;case cL.IFEQ:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (".concat(et," == ").concat(nt,") { return; }"));break}a.emitMain("if (".concat(et," == ").concat(nt,") { p = ").concat(Z(0),"; continue; };"));break;case cL.IFNE:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (".concat(et," != ").concat(nt,") { return; }"));break}a.emitMain("if (".concat(et," != ").concat(nt,") { p = ").concat(Z(0),"; continue; };"));break;case cL.IFSTRICTEQ:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (".concat(et," === ").concat(nt,") { return; }"));break}a.emitMain("if (".concat(et," === ").concat(nt,") { p = ").concat(Z(0),"; continue; };"));break;case cL.IFSTRICTNE:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (".concat(et," !== ").concat(nt,") { return; }"));break}a.emitMain("if (".concat(et," !== ").concat(nt,") { p = ").concat(Z(0),"; continue; };"));break;case cL.IFNLE:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (!(".concat(et," >= ").concat(nt,")) { return; }"));break}a.emitMain("if (!(".concat(et," >= ").concat(nt,")) { p = ").concat(Z(0),"; continue; };"));break;case cL.IFGT:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (".concat(et," < ").concat(nt,") { return; }"));break}a.emitMain("if (".concat(et," < ").concat(nt,") { p = ").concat(Z(0),"; continue; };"));break;case cL.IFNLT:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (!(".concat(et," > ").concat(nt,")) { return; }"));break}a.emitMain("if (!(".concat(et," > ").concat(nt,")) { p = ").concat(Z(0),"; continue; };"));break;case cL.IFGE:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (".concat(et," <= ").concat(nt,") { return; }"));break}a.emitMain("if (".concat(et," <= ").concat(nt,") { p = ").concat(Z(0),"; continue; };"));break;case cL.IFNGE:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (!(".concat(et," <= ").concat(nt,")) { return; }"));break}a.emitMain("if (!(".concat(et," <= ").concat(nt,")) { p = ").concat(Z(0),"; continue; };"));break;case cL.IFLT:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (".concat(et," > ").concat(nt,") { return; }"));break}a.emitMain("if (".concat(et," > ").concat(nt,") { p = ").concat(Z(0),"; continue; };"));break;case cL.IFNGT:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (!(".concat(et," < ").concat(nt,")) { return; }"));break}a.emitMain("if (!(".concat(et," < ").concat(nt,")) { p = ").concat(Z(0),"; continue; };"));break;case cL.IFLE:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (".concat(et," >= ").concat(nt,") { return; }"));break}a.emitMain("if (".concat(et," >= ").concat(nt,") { p = ").concat(Z(0),"; continue; };"));break;case cL.IFFALSE:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (!".concat(et,") { return; }"));break}a.emitMain("if (!".concat(et,") { p = ").concat(Z(0),"; continue; };"));break;case cL.IFTRUE:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("if (".concat(et,") { return; }"));break}a.emitMain("if (".concat(et,") { p = ").concat(Z(0),"; continue; };"));break;case cL.LOOKUPSWITCH:var lt=X.params.concat(),ut=lt.shift();a.emitMain("if (".concat(et," >= 0 && ").concat(et," < ").concat(lt.length,") { p = [").concat(lt.join(", "),"][").concat(et,"]; continue; } else { p = ").concat(ut,"; continue; };"));break;case cL.JUMP:if(_R(A,g,V,Z(0))){a.emitMain("//JIT: Emit inline return"),a.emitMain("return;");break}a.emitMain("{ p = ".concat(Z(0),"; continue; };"));break;case cL.INCREMENT:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0),"++;"));break;case cL.DECREMENT:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0),"--;"));break;case cL.INCLOCAL:a.emitMain("".concat(J(Z(0)),"++;"));break;case cL.DECLOCAL:a.emitMain("".concat(J(Z(0)),"--;"));break;case cL.INCREMENT_I:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = (").concat(W(0)," | 0) + 1;"));break;case cL.DECREMENT_I:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = (").concat(W(0)," | 0) - 1;"));break;case cL.INCLOCAL_I:a.emitMain("".concat(J(Z(0))," = (").concat(J(Z(0))," | 0) + 1;"));break;case cL.DECLOCAL_I:a.emitMain("".concat(J(Z(0))," = (").concat(J(Z(0))," | 0) - 1;"));break;case cL.NEGATE_I:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = -(").concat(et," | 0);"));break;case cL.ADD_I:a.killConstAliasInstruction([W(0,!1)]),a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = (").concat(nt," | 0) + (").concat(et," | 0);"));break;case cL.SUBTRACT_I:a.killConstAliasInstruction([W(0,!1)]),a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = (").concat(nt," | 0) - (").concat(et," | 0);"));break;case cL.MULTIPLY_I:a.killConstAliasInstruction([W(0,!1)]),a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = (").concat(nt," | 0) * (").concat(et," | 0);"));break;case cL.ADD:a.killConstAliasInstruction([W(0,!1)]),a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," += ").concat(et,";"));break;case cL.SUBTRACT:a.killConstAliasInstruction([W(0,!1)]),a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," -= ").concat(et,";"));break;case cL.MULTIPLY:a.killConstAliasInstruction([W(0,!1)]),a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," *= ").concat(et,";"));break;case cL.DIVIDE:a.killConstAliasInstruction([W(0,!1)]),a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," /= ").concat(et,";"));break;case cL.MODULO:a.killConstAliasInstruction([W(0,!1)]),a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," %= ").concat(et,";"));break;case cL.LSHIFT:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," <<= ").concat(et,";"));break;case cL.RSHIFT:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," >>= ").concat(et,";"));break;case cL.URSHIFT:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," >>>= ").concat(et,";"));break;case cL.BITAND:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," &= ").concat(et,";"));break;case cL.BITOR:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," |= ").concat(et,";"));break;case cL.BITXOR:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," ^= ").concat(et,";"));break;case cL.EQUALS:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = ").concat(nt," == ").concat(et,";"));break;case cL.STRICTEQUALS:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = ").concat(nt," === ").concat(et,";"));break;case cL.GREATERTHAN:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = ").concat(nt," > ").concat(et,";"));break;case cL.GREATEREQUALS:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = ").concat(nt," >= ").concat(et,";"));break;case cL.LESSTHAN:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = ").concat(nt," < ").concat(et,";"));break;case cL.LESSEQUALS:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = ").concat(nt," <= ").concat(et,";"));break;case cL.NOT:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = !").concat(et,";"));break;case cL.BITNOT:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = ~").concat(et,";"));break;case cL.NEGATE:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = -").concat(et,";"));break;case cL.TYPEOF:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = typeof ").concat(et," === 'undefined' ? 'undefined' : context.typeof(").concat(et,");"));break;case cL.INSTANCEOF:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = ").concat(et,".axIsInstanceOf(").concat(nt,");"));break;case cL.ISTYPE:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = ").concat(ot,".getScopeProperty(").concat(G(Z(0)),", true, false).axIsType(").concat(et,");"));break;case cL.ISTYPELATE:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = ").concat(et,".axIsType(").concat(nt,");"));break;case cL.ASTYPE:if(4&r&&(H.name===cL.PUSHNULL||H.name===cL.PUSHUNDEFINED)){a.emitMain("// SKIP_NULL_COERCE");break}a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = ").concat(ot,".getScopeProperty(").concat(G(Z(0)),", true, false).axAsType(").concat(et,");"));break;case cL.ASTYPELATE:a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = ").concat(PL(nt)," ? ").concat(et,".axAsType(").concat(nt,") : ").concat(nt,";"));break;case cL.CALL:a.popAnyAlias(W(Z(0)+1,!1));for(var ct=[],ht=W(Z(0)+1),pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);a.emitMain("".concat(ht," = context.call(").concat(W(Z(0)+1),", ").concat(W(Z(0)),", [").concat(ct.join(", "),"], ").concat(ot,");"));break;case cL.CONSTRUCT:a.popAnyAlias(W(Z(0),!1));for(ct=[],ht=W(Z(0)),pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);var dt=a.getStackAlias(Z(0));if(dt&&("lookup"===dt.kind||"alias"===dt.kind)&&dt.type&&(a.emitMain("//JIT: Possible source:"+dt.type),"RegExp"===dt.type.name)){a.emitMain("".concat(ht," = context.getRegExp([").concat(ct.join(", "),"]);"));break}a.emitMain("".concat(ht," = context.construct(").concat(ht,", [").concat(ct.join(", "),"]);"));break;case cL.CALLPROPERTY:var ft=b.getMultiname(Z(1));for(ct=[],ht=W(Z(0)),pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);a.killConstAliasInstruction([W(Z(0),!1)]),a.popAnyAlias(W(Z(0),!1));var _t=W(Z(0));if("getDefinitionByName"==b.getMultiname(Z(1)).name)a.emitMain("".concat(_t," = context.getdefinitionbyname(").concat(ot,", ").concat(ht,", [").concat(ct.join(", "),"]);"));else{var gt=void 0;if(h(c)&&(gt=c.sureThatFast("".concat(ht),ft.getMangledName()))){var mt=gt.isMangled?vb.getPublicMangledName(ft.name):ft.name;c.kill("".concat(ht)),a.emitMain("/* We sure that this safe call */"),gt.isFunc?a.emitMain("".concat(_t," = ").concat(JL(ht,mt),"(").concat(ct.join(", "),");")):a.emitMain("".concat(_t," = /*fast*/sec.box(").concat(ht,").axCallProperty(").concat(G(Z(1)),", [").concat(ct.join(", "),"], false);"));break}if(Ab.CHEK_TRAIT_GET_CALL&&"this"===ht&&v)if(Tt=gR(v,ft,o)){a.emitMain("/* We sure that this safe call, represented in TRAIT as ".concat(iR[Tt.kind],"  */ ")),1===Tt.kind?a.emitMain("".concat(_t," = ").concat(JL(ht,ft.getMangledName()),"(").concat(ct.join(", "),");")):a.emitMain("".concat(_t," = /*fast*/").concat(ht,".axCallProperty(").concat(G(Z(1)),", [").concat(ct.join(", "),"], false);"));break}if((Dt=TL()&&("this"!==ht||!Ab.NO_CHECK_FASTCALL_FOR_THIS))&&(a.emitMain("if (!".concat(PL(ht),") {")),a.emitMain("   ".concat(_t," = ").concat(JL(ht,ft.name),"(").concat(ct.join(", "),");")),a.emitBeginMain("} else {")),a.emitMain("// ".concat(ft)),a.emitBeginMain(),St=!Ab.NO_CHECK_BOXED_THIS||"this"!==ht){a.emitMain("let t = ".concat(ht,";"));var yt=JL("t","$Bg"+ft.name);a.emitMain("const m = ".concat(yt," || (t = sec.box(").concat(ht,"), ").concat(yt,");"))}else a.emitMain("const m = ".concat(JL(ht,"$Bg"+ft.name),";"));a.emitMain('if( typeof m === "function" ) { '),a.emitMain("    ".concat(_t," = ").concat(JL(St?"t":ht,"$Bg"+ft.name)," (").concat(ct.join(", "),");")),a.emitMain("} else { "),a.emitMain("    ".concat(_t," = ").concat(ht,".axCallProperty(").concat(G(Z(1)),", [").concat(ct.join(", "),"], false);")),a.emitMain("}"),a.emitEndMain(),Dt&&a.emitEndMain()}break;case cL.CALLPROPLEX:ft=b.getMultiname(Z(1));a.popAnyAlias(W(Z(0),!1));for(_t=W(Z(0)),ct=[],pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);a.emitMain("temp = sec.box(".concat(_t,");"));yt=JL("temp","$Bg"+ft.name);a.emitMain("".concat(_t," = (typeof ").concat(yt," === 'function')? ").concat(yt,"(").concat(ct.join(", "),") : temp.axCallProperty(").concat(G(Z(1)),", [").concat(ct.join(", "),"], true);"));break;case cL.CALLPROPVOID:for(ft=b.getMultiname(Z(1)),ct=[],ht=W(Z(0)),pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);if(a.killConstAliasInstruction([W(Z(0),!1)]),h(c)&&c.sureThatFast(ht)){mt=c.sureThatFast(ht).isMangled?vb.getPublicMangledName(ft.name):ft.name;a.emitMain("/* We sure that this safe call */ "),a.emitMain("".concat(JL(ht,mt),"(").concat(ct.join(", "),");")),c.kill("".concat(ht));break}if(Ab.CHEK_TRAIT_GET_CALL&&"this"===ht&&v)if(Tt=gR(v,ft,o)){a.emitMain("/* We sure that this safe call, represented in TRAIT as ".concat(iR[Tt.kind],"  */ ")),1===Tt.kind?a.emitMain("".concat(JL(ht,ft.getMangledName()),"(").concat(ct.join(", "),");")):a.emitMain("/*fast*/".concat(ht,".axCallProperty(").concat(G(Z(1)),", [").concat(ct.join(", "),"], false);"));break}(Dt=TL()&&("this"!==ht||!Ab.NO_CHECK_FASTCALL_FOR_THIS))&&(a.emitMain("if (!".concat(PL(ht),") {")),a.emitMain("    ".concat(JL(ht,ft.name),"(").concat(ct.join(", "),");")),a.emitMain("} else {"),a.moveIndent(1)),a.emitMain("// ".concat(ft)),a.emitBeginMain(),a.emitMain("let t = ".concat(ht,";"));yt=JL("t","$Bg"+ft.name);a.emitMain("const m = ".concat(yt," || (t = sec.box(").concat(ht,"), ").concat(yt,");")),a.emitMain('if( typeof m === "function" ) { '),a.emitMain("    m.call(t".concat(ct.length?", ":"").concat(ct.join(", "),");")),a.emitMain("} else { "),a.emitMain("   ".concat(ht,".axCallProperty(").concat(G(Z(1)),", [").concat(ct.join(", "),"], false);")),a.emitMain("}"),a.emitEndMain(),Dt&&a.emitEndMain();break;case cL.APPLYTYPE:ct=[];a.popAnyAlias(W(Z(0),!1));for(_t=W(Z(0)),pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);a.emitMain("".concat(_t," = sec.applyType(").concat(_t,", [").concat(ct.join(", "),"]);"));break;case cL.FINDPROPSTRICT:ft=b.getMultiname(Z(0));a.emitMain("// ".concat(ft)),a.popAnyAlias(W(-1,!1));var At=W(-1);if(h(l)&&l.test(ft,!1)){a.emitMain("/* GenerateLexImports */");var vt=l.getPropStrictAlias(ft,{mnIndex:a.getMultinameIndex(Z(0))});if(a.emitConst(-1,vt,!1),h(c)){var bt=l.getGenerator(ft,!1)instanceof NL;c.mark(At,V,bt,ft)}break}if(Ab.CHEK_TRAIT_GET_CALL&&Ab.CHEK_TRAIT_FIND_PROP&&1===X.scope&&v)if(Tt=gR(v,ft,o)){a.emitMain("/* We sure that this scope owner, represented in TRAIT as ".concat(iR[Tt.kind],"  */ ")),a.emitGetLocal(-1,0);break}a.emitMain("".concat(W(-1)," = ").concat(ot,".findScopeProperty(").concat(G(Z(0)),", true, false);"));break;case cL.FINDPROPERTY:a.emitMain("// ".concat(b.getMultiname(Z(0)))),a.popAnyAlias(W(-1,!1)),a.emitMain("".concat(W(-1)," = ").concat(ot,".findScopeProperty(").concat(G(Z(0)),", false, false);"));break;case cL.NEWFUNCTION:a.emitMain("// ".concat(b.getMethodInfo(Z(0)))),a.popAnyAlias(W(-1,!1)),a.emitMain("".concat(W(-1)," = context.createFunction(").concat(Z(0),", ").concat(ot,", true, ").concat(t.index(),");"));break;case cL.NEWCLASS:a.emitMain("// ".concat(b.classes[Z(0)])),a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = sec.createClass(context.abc.classes[").concat(Z(0),"], ").concat(et,", ").concat(ot,");"));break;case cL.GETDESCENDANTS:ft=b.getMultiname(Z(0));if(a.emitMain("// ".concat(ft)),ft.isRuntimeName()){var xt=ft.isRuntimeName()&&ft.isRuntimeNamespace();a.popAnyAlias(W(xt?2:1,!1));At=W(xt?2:1);a.emitBeginMain(),xt?a.emitMain("const rn = context.runtimename(".concat(G(Z(0)),", ").concat(et,", ").concat(nt,");")):a.emitMain("const rn = context.runtimename(".concat(G(Z(0)),", ").concat(et,");")),a.emitMain("".concat(At," = ").concat(At,".descendants(rn);")),a.emitEndMain();break}a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = ").concat(et,".descendants(").concat(G(Z(0)),");"));break;case cL.NEWARRAY:for(ct=[],pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);a.popAnyAlias(W(Z(0)-1,!1)),a.emitMain("".concat(W(Z(0)-1)," = sec.AXArray.axBox([").concat(ct.join(", "),"]);"));break;case cL.NEWOBJECT:a.emitMain("temp = Object.create(sec.AXObject.tPrototype);");for(pt=1;pt<=Z(0);pt++)a.emitMain("temp.axSetPublicProperty(".concat(W(2*Z(0)-2*pt+1),", ").concat(W(2*Z(0)-2*pt),");"));a.popAnyAlias(W(2*Z(0)-1,!1)),a.emitMain("".concat(W(2*Z(0)-1)," = temp;")),a.emitMain("temp = undefined;");break;case cL.NEWACTIVATION:a.popAnyAlias(W(-1,!1)),a.emitMain("".concat(W(-1)," = sec.createActivation(context.mi, ").concat(ot,");"));break;case cL.NEWCATCH:a.popAnyAlias(W(-1,!1)),a.emitMain("".concat(W(-1)," = sec.createCatch(context.mi.getBody().catchBlocks[").concat(Z(0),"], ").concat(ot,");"));break;case cL.CONSTRUCTSUPER:for(ct=[],pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);a.emitMain("context.savedScope.superConstructor.call(".concat(W(Z(0)),", ").concat(ct.join(", "),");"));break;case cL.CALLSUPER:ct=[];a.popAnyAlias(W(Z(0),!1));for(_t=W(Z(0)),pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);a.emitMain("".concat(_t," = sec.box(").concat(_t,").axCallSuper(").concat(G(Z(1)),", context.savedScope, [").concat(ct.join(", "),"]);"));break;case cL.CALLSUPER_DYN:for(ct=[],pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);(ft=b.getMultiname(Z(1))).isRuntimeName()&&ft.isRuntimeNamespace()?(a.popAnyAlias(W(Z(0)+2,!1)),a.emitMain("".concat(W(Z(0)+2)," = sec.box(").concat(W(Z(0)+2),").axGetSuper(context.runtimename(").concat(G(Z(1)),", ").concat(W(Z(0)),", ").concat(W(Z(0)+1),"), context.savedScope, [").concat(ct.join(", "),"]);"))):(a.popAnyAlias(W(Z(0)+1,!1)),a.emitMain("".concat(W(Z(0)+1)," = sec.box(").concat(W(Z(0)+1),").axGetSuper(context.runtimename(").concat(G(Z(1)),", ").concat(W(Z(0)),"), context.savedScope, [").concat(ct.join(", "),"]);")));break;case cL.CALLSUPERVOID:for(ct=[],pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);a.emitMain("sec.box(".concat(W(Z(0)),").axCallSuper(").concat(G(Z(1)),", context.savedScope, [").concat(ct.join(", "),"]);"));break;case cL.CONSTRUCTPROP:ct=[],_t=W(Z(0),!1);var Ct=W(Z(0));a.killConstAliasInstruction([_t]),a.popAnyAlias(_t),a.setStackAlias(Z(0),{kind:"lookup",type:b.getMultiname(Z(1)),scope:-1e3});for(pt=1;pt<=Z(0);pt++)ct.push(W(Z(0)-pt)),a.killConstAliasInstruction([W(Z(0)-pt,!1)]);var It=!1,Et=[];Ab.CHECK_FAST_CONSTRUCTOR&&(It=hR(b.getMultiname(Z(1)),Et)),It?(a.emitMain("//JIT: Support fast construct:"+Et.join("/")),a.emitMain("".concat(W(Z(0))," = context.constructFast(").concat(Ct,", [").concat(ct.join(", "),"], ").concat(G(Z(1)),");"))):a.emitMain("".concat(W(Z(0))," = context.constructprop(").concat(G(Z(1)),", ").concat(Ct,", [").concat(ct.join(", "),"]);")),h(c)&&c.kill(W(Z(0)));break;case cL.GETPROPERTY:ft=b.getMultiname(Z(0)),Ct=W(0),At=W(0,!1);a.killConstAliasInstruction([At]),a.popAnyAlias(W(0,!1)),a.emitMain("// ".concat(ft));gt=void 0;if(h(c)&&(gt=c.sureThatFast(Ct,ft.name))){mt=gt.isMangled?vb.getPublicMangledName(ft.name):ft.name;c.kill(Ct),a.emitMain("/* We sure that this safe get */ "),a.emitMain("".concat(At," = ").concat(JL(Ct,mt),";"));break}var wt=a.getStackAlias(0);if(wt&&a.emitMain("//Possible type:"+wt.type),Ab.CHEK_TRAIT_GET_CALL&&"this"===et&&v)if(Tt=gR(v,ft,o)){if(a.emitMain("/* We sure that this safe get, represented in TRAIT as ".concat(iR[Tt.kind],", type: ").concat(Tt.typeName,"  */ ")),1===Tt.kind){a.emitMain("".concat(At," = this.axGetProperty(").concat(G(Z(0)),");"));break}if(0===Tt.kind||7===Tt.kind||2===Tt.kind){a.emitMain("".concat(At," = ").concat(JL(et,ft.getMangledName()),";")),a.setStackAlias(0,{kind:"var",type:Tt.typeName});break}}a.setStackAlias(0),(Dt=TL()&&("this"!==et||!Ab.NO_CHECK_FASTCALL_FOR_THIS))&&(a.emitMain("if (!".concat(DL(et),") {")),a.emitMain("    ".concat(At," = ").concat(et,"['").concat(ft.name,"'];")),a.emitBeginMain("} else {")),(St=!Ab.NO_CHECK_BOXED_THIS||"this"!==et)&&a.emitMain("temp = ".concat(et,"[AX_CLASS_SYMBOL] ? ").concat(et," : sec.box(").concat(et,");")),a.emitMain("".concat(At," = ").concat(JL(St?"temp":et,"$Bg"+ft.name),";")),a.emitMain("if (".concat(At," === undefined || typeof ").concat(At," === 'function') {")),a.emitMain("    ".concat(At," = ").concat(St?"temp":et,".axGetProperty(").concat(G(Z(0)),");")),a.emitMain("}"),Dt&&a.emitEndMain();break;case cL.GETPROPERTY_DYN:xt=(ft=b.getMultiname(Z(0))).isRuntimeName()&&ft.isRuntimeNamespace();a.popAnyAlias(W(xt?2:1,!1));var St;At=W(xt?2:1);a.emitMain("// ".concat(ft)),a.emitBeginMain(),xt?(a.emitMain("const rm = context.runtimename(".concat(G(Z(0)),", ").concat(et,", ").concat(nt,");")),a.emitMain("const simple = rm.numeric ? rm.numericValue : rm.name;")):a.emitMain("let simple = ".concat(et,";")),(St=!Ab.NO_CHECK_BOXED_THIS||"this"!==At)?a.emitMain("const b_obj = ".concat(At,"[AX_CLASS_SYMBOL] ? ").concat(At," : sec.box(").concat(At,");\n")):a.emitMain("const b_obj = ".concat(At)),a.emitMain('if (typeof simple === "number") {'),a.emitMain("    ".concat(At," = b_obj.axGetNumericProperty(simple);")),a.emitBeginMain("} else {"),a.emitMain("".concat(At," = b_obj['$Bg' + simple];")),a.emitMain("if (".concat(At," === undefined || typeof ").concat(At," === 'function') {")),xt||a.emitMain("    const rm = context.runtimename(".concat(G(Z(0)),", ").concat(et,");")),a.emitMain("    ".concat(At," = b_obj.axGetProperty(rm);")),a.emitMain("}"),a.emitEndMain(),a.emitEndMain();break;case cL.SETPROPERTY:var Dt;ft=b.getMultiname(Z(0));if(a.killConstAliasInstruction([W(0,!1),W(1,!1)]),a.emitMain("// ".concat(ft)),Ab.CHEK_TRAIT_SET&&"this"===nt&&v)if((Tt=gR(v,ft,o))&&Tt&&(a.emitMain("/* We sure that this safe set, represented in TRAIT as ".concat(iR[Tt.kind],", with type: ").concat(Tt.typeName,"  */ ")),0===Tt.kind||7===Tt.kind||2===Tt.kind||3===Tt.kind)){a.emitMain("".concat(JL(nt,ft.getMangledName())," = ").concat(KL(a,0,Tt.typeName,!0),";"));break}(Dt=TL()&&("this"!==nt||!Ab.NO_CHECK_FASTCALL_FOR_THIS))&&(a.emitMain("if (!".concat(DL(nt),"){")),a.emitMain("    ".concat(JL(nt,ft.name)," = ").concat(et,";")),a.emitBeginMain("} else {")),a.emitMain("context.setproperty(".concat(G(Z(0)),", ").concat(et,", ").concat(nt,");")),Dt&&a.emitEndMain();break;case cL.SETPROPERTY_DYN:(ft=b.getMultiname(Z(0))).isRuntimeName()&&ft.isRuntimeNamespace()?a.emitMain("context.setproperty(context.runtimename(".concat(G(Z(0)),", ").concat(nt,", ").concat(it,"), ").concat(et,", ").concat(rt,");")):a.emitMain("context.setproperty(context.runtimename(".concat(G(Z(0)),", ").concat(nt,"), ").concat(et,", ").concat(it,");"));break;case cL.DELETEPROPERTY:a.popAnyAlias(W(0,!1)),a.emitMain("// ".concat(b.getMultiname(Z(0)))),a.emitMain("".concat(W(0)," = context.deleteproperty(").concat(G(Z(0)),", ").concat(et,");"));break;case cL.DELETEPROPERTY_DYN:(ft=b.getMultiname(Z(0))).isRuntimeName()&&ft.isRuntimeNamespace()?(a.popAnyAlias(W(2,!1)),a.emitMain("".concat(W(2)," = context.deleteproperty(context.runtimename(").concat(G(Z(0)),", ").concat(et,", ").concat(nt,"), ").concat(it,");"))):(a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = context.deleteproperty(context.runtimename(").concat(G(Z(0)),", ").concat(et,"), ").concat(nt,");")));break;case cL.GETSUPER:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = sec.box(").concat(et,").axGetSuper(").concat(G(Z(0)),", context.savedScope);"));break;case cL.GETSUPER_DYN:(ft=b.getMultiname(Z(0))).isRuntimeName()&&ft.isRuntimeNamespace()?(a.popAnyAlias(W(2,!1)),a.emitMain("".concat(W(2)," = sec.box(").concat(it,").axGetSuper(context.runtimename(").concat(G(Z(0)),", ").concat(et,", ").concat(nt,"), context.savedScope);"))):(a.popAnyAlias(W(1,!1)),a.emitMain("".concat(W(1)," = sec.box(").concat(nt,").axGetSuper(context.runtimename(").concat(G(Z(0)),", ").concat(et,"), context.savedScope);")));break;case cL.SETSUPER:a.emitMain("sec.box(".concat(nt,").axSetSuper(").concat(G(Z(0)),", context.savedScope, ").concat(et,");"));break;case cL.SETSUPER_DYN:(ft=b.getMultiname(Z(0))).isRuntimeName()&&ft.isRuntimeNamespace()?a.emitMain("sec.box(".concat(rt,").axSetSuper(context.runtimename(").concat(G(Z(0)),", ").concat(nt,", ").concat(it,"), context.savedScope, ").concat(et,");")):a.emitMain("sec.box(".concat(it,").axSetSuper(context.runtimename(").concat(G(Z(0)),", ").concat(nt,"), context.savedScope, ").concat(et,");"));break;case cL.GETLEX:ft=b.getMultiname(Z(0));a.popAnyAlias(W(-1,!1));var Tt;At=W(-1);if(h(l)&&l.test(ft,!0)){a.emitMain("// ".concat(ft)),a.emitMain("/* GenerateLexImports GETLEX */"),a.emitConst(-1,l.getLexAlias(ft,{mnIndex:a.getMultinameIndex(Z(0)),scope:ot}),!1);var Pt=a.getStackAlias(-1);Pt&&(Pt.type=ft);break}if(a.setStackAlias(-1,{kind:"lookup",type:ft,scope:X.scope}),Ab.CHEK_TRAIT_GET_CALL&&Ab.CHEK_TRAIT_FIND_PROP&&1===X.scope&&v)if(Tt=gR(v,ft,o)){var Bt=kL(a,0);if(a.emitMain("/* GETLEX We sure that this safe get, represented in TRAIT as ".concat(iR[Tt.kind],"  */ ")),1===Tt.kind){a.emitMain("".concat(At," = ").concat(Bt,".axGetProperty(").concat(G(Z(0)),");"));break}if(0===Tt.kind||7===Tt.kind||2===Tt.kind){a.emitMain("".concat(At," = ").concat(JL(Bt,ft.getMangledName()),";"));break}}a.emitMain("// ".concat(ft)),a.emitMain("temp = ".concat(ot,".findScopeProperty(").concat(G(Z(0)),", true, false);")),a.emitMain("".concat(At," = ").concat(JL("temp","$Bg"+ft.name),";")),a.emitMain("if (".concat(At," === undefined || typeof ").concat(At," === 'function') {")),a.emitMain("    ".concat(At," = temp.axGetProperty(").concat(G(Z(0)),");")),a.emitMain("}");break;case cL.RETURNVALUE:dR&&dR[p.classPath+"__return"]&&(a.emitMain("/* ATTACH METHOD HOOK */"),a.emitMain("context.executeHook(".concat(kL(a,0),", '").concat(p.classPath+"__return","')")));var Ot=t.typeName;if(!Ot||"none"===Ab.COERCE_RETURN_MODE){a.emitMain("return ".concat(et,";"));break}if(qL(Ot)){a.emitMain("return ".concat(KL(a,0,Ot,!0),";"));break}if("all"===Ab.COERCE_RETURN_MODE){a.emitMain("return context.coerceReturn(".concat(et,");"));break}a.emitMain("return ".concat(et,";"));break;case cL.RETURNVOID:dR&&dR[p.classPath+"__return"]&&(a.emitMain("/* ATTACH METHOD HOOK */"),a.emitMain("context.executeHook(".concat(kL(a,0),", '").concat(p.classPath+"__return","')"))),a.emitMain("return;");break;case cL.COERCE:if(4&r&&(H.name===cL.PUSHNULL||H.name===cL.PUSHUNDEFINED)){a.emitMain("//JIT: SKIP_NULL_COERCE");break}if(H.name===cL.ASTYPELATE){a.emitMain("//JIT: SKIP DOUBLED COERCE AFTER ASTYPELATE");break}a.popAnyAlias(W(0,!1));At=W(0),ft=b.getMultiname(Z(0));a.emitBeginMain("if (".concat(DL(At),") {")),"default"==Ab.COERCE_MODE?a.emitMain("".concat(At," = ").concat(ot,".getScopeProperty(").concat(G(Z(0)),", true, false).axCoerce(").concat(et,");")):(a.emitMain("var _e = ".concat(ot,".getScopeProperty(").concat(G(Z(0)),", true, false);")),"soft"===Ab.COERCE_MODE&&a.emitMain("_e || console.warn('[".concat(d,"] Coerce Type not found:', ").concat(JSON.stringify(ft.name),")")),a.emitMain("".concat(At," = _e ? _e.axCoerce(").concat(et,") : ").concat(et,";"))),a.emitEndMain();break;case cL.COERCE_A:a.emitMain("");break;case cL.COERCE_S:if(4&r&&(H.name===cL.PUSHNULL||H.name===cL.PUSHUNDEFINED)){a.emitMain("// SKIP_NULL_COERCE");break}a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = context.axCoerceString(").concat(et,");"));break;case cL.ESC_XELEM:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = context.escXElem(").concat(et,");"));break;case cL.ESC_XATTR:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = context.escXAttr(").concat(et,");"));break;case cL.CONVERT_I:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," |= 0;"));break;case cL.CONVERT_D:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = +").concat(et,";"));break;case cL.CONVERT_B:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," = !!").concat(et,";"));break;case cL.CONVERT_U:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(W(0)," >>>= 0;"));break;case cL.CONVERT_S:a.popAnyAlias(W(0,!1)),a.emitMain("if (typeof ".concat(et," !== 'string') ").concat(W(0)," = ").concat(et," + '';"));break;case cL.CONVERT_O:a.emitMain("");break;case cL.CHECKFILTER:a.popAnyAlias(W(0,!1)),a.emitMain("".concat(et," = context.axCheckFilter(sec, ").concat(et,");"));break;case cL.KILL:a.emitMain("// Redundant oppcode KILL, prevent optimisations");break;default:if(8&r||eR(a),X.name<=cL.LI8&&X.name>=cL.SF64)return a.emitMain("//unknown instruction ".concat(fR[A[V].name])),{error:{message:"unhandled instruction "+X,reason:"unhandled_instruction"}}}}if(z=y?y[X.position]:null)(tt=a.openTryCatchGroups.pop())&&tR(a,tt)}a.openTryCatchGroups.length>0&&((tt=a.openTryCatchGroups.pop())&&tR(a,tt));Q&&(a.emitEndMain(),a.emitEndMain()),a.emitEndMain();for(var Mt=[],Lt=0,Rt=U;Lt<Rt.length;Lt++){(Nt=Rt[Lt])&&(Nt.die&&Mt.push("".concat(F,"// local").concat(Nt.index," is assigned before read, skip init")),Mt.push("".concat(F,"let local").concat(Nt.index," = undefined")),M||Nt.index!=O.length+1||Nt.die||(Mt.push("    if(arguments && arguments.length) { local".concat(Nt.index," = context.sec.createArrayUnsafe(Array.from(arguments).slice(").concat(O.length,")); }")),Mt.push("    else { local".concat(Nt.index," = context.emptyArray; }"))))}if(a.noHoistMultiname)a.emitHead("let $names = context.names;",F);else{V=0;for(var Nt=this.state.names.length;V<Nt;V++)a.emitHead("let ".concat(ZL(a,V)," = context.names[").concat(V,"];"),F)}w[k]=Mt.join("\n");var Ft=["const AX_CLASS_SYMBOL = context.AX_CLASS_SYMBOL;"],kt=[],Ut=a.mainBlock;h(l)&&(Ft.push(l.genHeader(a.indent)),kt.push(l.genBody(a.indent)),Ut=l.genPost(Ut));var Vt="/*\n\tIndex: ".concat(p.index,"\n\tPath:  ").concat(p.classPath,"\n\tType:  ").concat(p.type,"\n\tKind:  ").concat(p.kind,"\n\tSuper: ").concat(p.superClass||"-","\n\tReturn: ").concat(p.returnType,"\n*/\n\n")+Ft.join("\n")+a.headerBlock.join("\n")+"\n"+kt.join("\n")+"\n"+Ut.join("\n"),jt=Vt.indexOf(jL)>-1,Gt=function(t,e){t+="\n//# sourceURL=".concat(Ab.HTTP_STRING,"jit/").concat(e,".js");try{return new Function("context",t)}catch(e){throw new Error("Compiler error:\n\n"+t)}}(Vt,p.filePath),Qt=-1;jt&&(Qt=Vt.split("\n").findIndex((function(t){return t.indexOf(jL)>=0}))+3),h(l)&&l.reset(),xL.end();var zt=null;return jt&&(zt={message:"STACK UNDERRUN at http://jit/".concat(p.filePath,".js:").concat(Qt),reason:"underrun"}),{names:j,compiled:Gt,error:zt}}self.attach_hook=function(t,e,n){if(void 0===e&&(e="begin"),!t||"function"!=typeof n)throw"Hook path should be exits and function should be a function";dR[t+"__"+e]={path:t,place:e,hook:n}};var yR=function(){function t(t,e,n){this.mi=t,this.savedScope=e,this.names=n,this.jsGlobal=Rh,this.axCoerceString=yb,this.axCheckFilter=eL,this.internNamespace=gb,this.AX_CLASS_SYMBOL=wb,this.rn=new vb(t.abc,0,null,null,null,null,!0),this.abc=t.abc,this.sec=t.abc.applicationDomain.sec,this.emptyArray=Object.create(this.sec.AXArray.tPrototype),this.emptyArray.value=[]}return Object.defineProperty(t.prototype,"domainMemory",{get:function(){return this.domain||(this.domain=this.sec.flash.system.ApplicationDomain.axClass.currentDomain,this.domain)?this.domain.internal_memoryView:(console.warn("[JIT] Try access to domainMemory on unresolved ApplicationDomain!"),null)},enumerable:!1,configurable:!0}),t.prototype.getRegExp=function(e){var n=e.join("|");return t.REG_EXP_CACHE[n]||(t.REG_EXP_CACHE[n]=this.sec.AXRegExp.axConstruct(e))},t.prototype.coerceReturn=function(t){var e=this.mi.getType();return e?e.axCoerce(t):t},t.prototype.createFunction=function(t,e,n,i){var r=this.abc.getMethodInfo(t);return void 0!==i&&(r.parentInfo=r.parentInfo||this.abc.getMethodInfo(i)),this.sec.createFunction(r,e,n)},t.prototype.escXElem=function(t){return uM(this.sec,t)},t.prototype.escXAttr=function(t){return cM(t)},t.prototype.executeHook=function(t,e){var n=dR[e];n&&n.hook(t)},t.prototype.getTopLevel=function(t,e){var n=this.savedScope.findScopeProperty(this.names[t],!0,!1);return e?n[e]:n},t.prototype.getStaticImportExt=function(t,e){return void 0===e&&(e=void 0),wL(e,t)},t.prototype.typeof=function(t){var e=typeof t,n=this.sec;switch(e){case"boolean":return"Boolean";case"object":if(null===t)return"object";if(n.AXXMLList.dPrototype.isPrototypeOf(t)||n.AXXML.dPrototype.isPrototypeOf(t))return"xml";if(n.AXNumber.dPrototype.isPrototypeOf(t))return"number";if(n.AXBoolean.dPrototype.isPrototypeOf(t))return"Boolean";if(n.AXString.dPrototype.isPrototypeOf(t))return"string"}return e},t.prototype.call=function(t,e,n,i){var r,o;return void 0===i&&(i=null),i&&"getDefinitionByName"==(null===(o=null===(r=t.methodInfo)||void 0===r?void 0:r.trait)||void 0===o?void 0:o.multiname.name)?this.getdefinitionbyname(i,e,n):(Qb(this.sec,t,n.length),t.axApply(e,n))},t.prototype.getdefinitionbyname=function(t,e,n){return t.global.object.globalInfo.abc.applicationDomain.getClass(vb.FromSimpleName(n[0].toString()))},t.prototype.getpropertydyn=function(t,e){var n=this.sec.box(e);if("number"==typeof t)return n.axGetNumericProperty(t);var i=n["$Bg"+t.name];return null!=i&&"function"!=typeof i?i:n.axGetProperty(t)},t.prototype.setproperty=function(t,e,n){if(null==n)throw this.sec.createError("Error","[AVM2] Unexpected property assignment: ".concat(typeof n,"[").concat(JSON.stringify(null==t?void 0:t.name),"] = ").concat(null==e?void 0:e.toString()));if(TL()){if(!n[wb])return void(n[t.name]=e);if(n[CL])return Hb.prototype.axSetProperty.call(n,t,e,cL.INITPROPERTY),void Object.defineProperty(n,t.name,{value:e,configurable:!0,writable:!0})}if("number"==typeof t)return n.axSetNumericProperty(t,e);n.axSetProperty(t,e,cL.INITPROPERTY)},t.prototype.deleteproperty=function(t,e){var n=this.sec.box(e);return"number"==typeof t||"string"==typeof t?delete n[t]:n.axDeleteProperty(t)},t.prototype.constructExt=function(t,e,n){return SL(n=n||t.classInfo.instanceInfo.multiname,e)},t.prototype.constructFast=function(t,e,n){if(TL()){var i=this.constructExt(t,e,n);if(i)return i}return pR(n?t[t.axResolveMultiname(n)]:t,e)},t.prototype.construct=function(t,e){var n=SL(t.classInfo.instanceInfo.multiname,e);return null!=n?n:(zb(this.sec,t,e.length),t.axConstruct(e))},t.prototype.constructprop=function(t,e,n){var i=SL(t,n);if(null!=i)return i;var r=this.sec.box(e),o=r.axResolveMultiname(t),a=r[o];return zb(r.sec,a,n.length),a.axConstruct(n)},t.prototype.pushwith=function(t,e){var n=this.sec.box(e);return t.object===n&&1==t.isWith?t:new KM(t,n,!0)},t.prototype.hasnext2=function(e,n){var i=t.HAS_NEXT_INFO;return null==e?[null,0]:(i.next(e[wb]?e:this.sec.box(e),n),[i.object,i.index])},t.prototype.runtimename=function(t,e,n){if(this.rn.resolved={},this.rn.globalInfo=null,this.rn.numeric=!1,this.rn.id=t.id,this.rn.kind=t.kind,t.isRuntimeName()){var i=e;if(null==i)console.warn("[AVM2 SetProperty DYN] Key is ".concat(i,", are you sure that this is valid?")),i=""+i;else{if("object"==typeof i&&i.axClass===this.sec.AXQName)return i=i.name,this.rn.kind=t.isAttribute()?18:17,this.rn.id=i.id,this.rn.name=i.name,this.rn.namespaces=i.namespaces,this.rn;if("number"==typeof i)this.rn.numeric=!0,this.rn.numericValue=i;else{var r=Nb(i);rp(r)&&(this.rn.numeric=!0,this.rn.numericValue=+r)}}this.rn.name=i,this.rn.id=-1}else this.rn.name=t.name,n=e;if(t.isRuntimeNamespace()){var o=n;o._ns&&(o=o._ns),this.rn.namespaces=[o],this.rn.id=-1}else this.rn.namespaces=t.namespaces;return this.rn},t.REG_EXP_CACHE={},t.HAS_NEXT_INFO=new JM(null,0),t}(),AR=function(t){function e(e,n,i,r){var o=t.call(this,r)||this;return o.abc=e,o.instanceInfo=n,o.methodInfo=i,o.traits=r,o.global=null,o.trait=null,o.runtimeTraits=null,o}return o(e,t),e.prototype.getNativeMetadata=function(){var t,e=null===(t=this.trait)||void 0===t?void 0:t.metadata;if(!e)return null;for(var n=0;n<e.length;n++)if("native"===e[n].name)return e[n];return null},e.prototype.toString=function(){return"ClassInfo "+this.instanceInfo.multiname},e.prototype.trace=function(t){t.enter("ClassInfo"),this.traits.trace(t),t.outdent()},e}(YM),vR=function(){function t(t,e,n){this.abc=t,this.kind=e,this.multiname=n}return t.prototype.toString=function(){return t=this.kind,String(t)+" "+this.multiname;var t},t.prototype.isConst=function(){return 6===this.kind},t.prototype.isSlot=function(){return 0===this.kind},t.prototype.isMethod=function(){return 1===this.kind},t.prototype.isGetter=function(){return 2===this.kind},t.prototype.isSetter=function(){return 3===this.kind},t.prototype.isAccessor=function(){return 2===this.kind||3===this.kind},t.prototype.isMethodOrAccessor=function(){return this.isAccessor()||1===this.kind},t}(),bR=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i)||this;return o.abc=e,o.kind=n,o.multiname=i,o.methodInfo=r,o.method=null,o}return o(e,t),e}(vR),xR=0,CR=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/;function IR(t){return CR.test(t)}var ER={};var wR=100,SR=0,DR=function(){function t(t){this.parent=t,this.stack=[],this.isWith=[]}return t.prototype.push=function(t,e){this.stack.push(t),this.isWith.push(!!e)},t.prototype.get=function(t){return this.stack[t]},t.prototype.clear=function(){this.stack.length=0,this.isWith.length=0},t.prototype.pop=function(){this.isWith.pop(),this.stack.pop(),this.scopes&&this.scopes.length>this.stack.length&&this.scopes.length--},t.prototype.topScope=function(){if(!this.scopes){if(0===this.stack.length)return this.parent;this.scopes=[]}for(var t=this.parent,e=0;e<this.stack.length;e++){var n=this.stack[e],i=this.isWith[e],r=this.scopes[e];r&&r.parent===t&&r.object===n&&r.isWith===i||(r=this.scopes[e]=new KM(t,n,i)),t=r}return t},t}();function TR(t,e,n){if(n.resolved={},n.globalInfo=null,n.numeric=!1,n.id=e.id,n.kind=e.kind,e.isRuntimeName()){var i=t.pop();if(i&&i.axClass&&i.axClass===i.sec.AXQName)return i=i.name,n.kind=e.isAttribute()?18:17,n.id=i.id,n.name=i.name,void(n.namespaces=i.namespaces);("number"==typeof i||rp(Nb(i)))&&(n.numeric=!0,n.numericValue=+Nb(i)),n.name=i,n.id=-1}else n.name=e.name;if(e.isRuntimeNamespace()){var r=t.pop();r._ns&&(r=r._ns),n.namespaces=[r],n.id=-1}else n.namespaces=e.namespaces}function PR(t,e,n){try{t.meta=t.meta||function(t,e){var n,i,r,o=(""+e).padLeft("0",4),a=t.name.replace(/([^a-z0-9]+)/gi,"_"),s=!0,l="__root__/".concat(o,"_").concat(a||"unknown"),u=l,c=a,h=!0,p="Public",d=void 0;t.trait&&(t.trait.holder instanceof AR?(u=t.trait.holder.instanceInfo.getClassName().replace(/\./g,"/"),h=!1):t.trait.holder instanceof rR&&(u=t.trait.holder.getClassName().replace(/\./g,"/"),d=null===(n=t.trait.holder.superName)||void 0===n?void 0:n.toFQNString(!1).replace(/\./g,"/")),t.trait instanceof bR&&(c=t.trait.multiname.name,p=db[t.trait.multiname.namespace.type]),t.trait&&2===t.trait.kind&&(c="get_"+c),t.trait&&3===t.trait.kind&&(c="set_"+c),c=t.isConstructor?"constructor":h?"m_"+c:c,s=!1,void 0!==ER[l=u+"/"+c]?l+="$"+(ER[l]=ER[l]+1):ER[l]=0),t.instanceInfo&&(u=t.instanceInfo.getClassName().replace(/\./g,"/"),c=t.isConstructor?"constructor":a,d=null===(i=t.instanceInfo.superName)||void 0===i?void 0:i.toFQNString(!1).replace(/\./g,"/"),s=!1,l=u+"/"+c);var f="".concat(u).concat(h?"::":".").concat(c);return t.parentInfo&&s&&(f=l=t.parentInfo.meta.filePath+"/"+"".concat(o,"_").concat(c)),{index:t.index(),filePath:l,classPath:f,name:c,type:p,superClass:d,returnType:(null===(r=t.typeName)||void 0===r?void 0:r.toString())||"*",isValidName:IR(c),isValidPath:IR(u.replace("/","_")),kind:t.trait&&iR[t.trait.kind]}}(t,xR++)}catch(t){console.warn("[Interpret] Fail reconstruct method metadata:",t)}if(null==e.parent||Cf.forceINT&&!Ab.NO_FALL_TO_INT)try{var i=OR(t,e,n);return yx&&yx.leave("< "+t.trait),i}catch(t){throw t}if(null==t.getBody())return function(){};if("pending"===t.state){var r=mR(t,{scope:e});r.error?t.error=r.error:(t.compiled=r.compiled,t.names=r.names)}if("compiled"===t.state)return t.useCount++,t.compiled(new yR(t,e,t.names));if(Ab.NO_FALL_TO_INT)throw console.warn("[Interpret] NO_FALL_TO_INT is used, interpret is disable. Fix JIT machin or disable NO_FALL_TO_INT"),t.error.message+"\n Method:"+t.meta.classPath;return t.useCount++,OR(t,e,n)}var BR=function(){function t(t,e,n,i,r){this.pc=0,this.stack=[],this.hasNext2Infos=null;var o=this.body=e.getBody();this.code=o.code,this.scopes=new DR(n);for(var a,s=this.locals=[t],l=this.app=e.abc.applicationDomain,u=this.sec=l.sec,c=i.length,h=0,p=e.parameters.length;h<p;h++){var d=e.parameters[h];a=h<c?i[h]:d.hasOptionalValue()?d.getOptionalValue():void 0;var f=d.typeName;if(f&&!f.isAnyName()){var _=n.getScopeProperty(f,!0,!1);if(!_){if(!("axClass"in t)||!t.axClass.name.matches(f))continue;_=t.axClass}a=_.axCoerce(a)}s.push(a)}if(e.needsRest())s.push(u.createArrayUnsafe(Ax(i,e.parameters.length)));else if(e.needsArguments()){var g=Ax(i,0),m=Object.create(u.argumentsPrototype);m.value=g,m.callee=r,m.receiver=t,m.methodInfo=e,s.push(m)}}return t.prototype.bc=function(){return this.code[this.pc++]},t.prototype.u30=function(){var t=this.code,e=this.pc,n=t[e++];return 128&n&&16384&(n=127&n|t[e++]<<7)&&2097152&(n=16383&n|t[e++]<<14)&&268435456&(n=2097151&n|t[e++]<<21)&&(n=268435455&n|t[e++]<<28,n&=4294967295),this.pc=e,n>>>0},t.prototype.s24=function(){var t=this.code,e=this.pc,n=t[e]|t[e+1]<<8|t[e+2]<<16;return this.pc=e+3,n<<8>>8},t.prototype.getHasNext2Info=function(){var t=this.pc,e=this.hasNext2Infos;return e||(e=this.hasNext2Infos=[]),e[t]||(e[t]=new JM(null,0)),e[t]},t}();function OR(t,e,n){return t.error&&t.useCount<=1&&(++SR<wR?console.error("[INTERPRET] Compilation failed",t.error.reason,t.error.message):console.debug("[INTERPRET] To many compiler failings:",SR)),function(){var i,r,o,a,s,l,u,c,h=new BR(this,t,e,arguments,n),p=h.stack,d=h.locals,f=h.scopes,_=h.sec,g=t.abc,m=new vb(g,0,null,null,null,null,!0),y=[],A=0,v=Yb.length;Yb.push(h.scopes);t:for(;;){var b=void 0;try{switch(b=h.bc()){case 9:continue;case 3:throw p.pop();case 8:d[h.u30()]=void 0;break;case 12:case 24:l=h.s24(),p.pop()<=p.pop()&&(h.pc+=l);continue;case 13:case 23:l=h.s24(),p.pop()<p.pop()&&(h.pc+=l);continue;case 14:case 22:l=h.s24(),p.pop()>=p.pop()&&(h.pc+=l);continue;case 15:case 21:l=h.s24(),p.pop()>p.pop()&&(h.pc+=l);continue;case 16:h.pc=h.s24()+h.pc;continue;case 17:l=h.s24(),p.pop()&&(h.pc+=l);continue;case 18:l=h.s24(),p.pop()||(h.pc+=l);continue;case 19:l=h.s24(),ZM(p.pop(),p.pop(),_)&&(h.pc+=l);continue;case 20:l=h.s24(),ZM(p.pop(),p.pop(),_)||(h.pc+=l);continue;case 25:l=h.s24(),p.pop()==p.pop()&&(h.pc+=l);continue;case 26:l=h.s24(),p.pop()!=p.pop()&&(h.pc+=l);continue;case 27:var x=h.pc-1;l=h.s24();var C=h.u30();(u=p.pop())<=C&&(h.pc+=3*u,l=h.s24()),h.pc=x+l;continue;case 29:f.pop();break;case 30:p[p.length-2]=_.box(p[p.length-2]).axNextName(p.pop());break;case 35:p[p.length-2]=_.box(p[p.length-2]).axNextValue(p.pop());break;case 50:var I=h.getHasNext2Info(),E=h.u30(),w=h.u30();I.next(_.box(d[E]),d[w]),d[E]=I.object,d[w]=I.index,p.push(!!I.index);break;case 32:p.push(null);break;case 33:p.push(void 0);break;case 36:p.push(h.code[h.pc++]<<24>>24);break;case 37:p.push(h.u30()<<16>>16);break;case 44:p.push(g.getString(h.u30()));break;case 45:p.push(g.ints[h.u30()]);break;case 46:p.push(g.uints[h.u30()]);break;case 47:p.push(g.doubles[h.u30()]);break;case 38:p.push(!0);break;case 39:p.push(!1);break;case 40:p.push(NaN);break;case 41:p.pop();break;case 42:p.push(p[p.length-1]);break;case 43:i=p[p.length-1],p[p.length-1]=p[p.length-2],p[p.length-2]=i;break;case 48:f.push(_.box(p.pop()),!1);break;case 28:f.push(_.box(p.pop()),!0);break;case 49:p.push(_.AXNamespace.FromNamespace(g.getNamespace(h.u30())));break;case 64:p.push(_.createFunction(g.getMethodInfo(h.u30()),f.topScope(),!0));break;case 65:Tf(p,h.u30(),y),r=p.pop(),Qb(_,i=p[p.length-1],y.length),p[p.length-1]=i.axApply(r,y);break;case 66:Tf(p,h.u30(),y),o=_.box(p[p.length-1]),zb(_,o,y.length),p[p.length-1]=o.axConstruct(y);break;case 71:return dp||So(Yb.length===v+1),void Yb.length--;case 72:return i=p.pop(),t.typeName&&(o=t.getType())&&(i=o.axCoerce(i)),dp||So(Yb.length===v+1),Yb.length--,i;case 73:Tf(p,h.u30(),y),e.object.superClass.tPrototype.axInitializer.apply(p.pop(),y);break;case 74:u=h.u30(),Tf(p,h.u30(),y),TR(p,g.getMultiname(u),m),p[p.length-1]=_.box(p[p.length-1]).axConstructProperty(m,y);break;case 76:case 70:case 79:u=h.u30(),Tf(p,h.u30(),y),TR(p,g.getMultiname(u),m),c=_.box(p[p.length-1]).axCallProperty(m,y,76===b),79===b?p.length--:p[p.length-1]=c;break;case 69:case 78:u=h.u30(),Tf(p,h.u30(),y),TR(p,g.getMultiname(u),m),c=_.box(p[p.length-1]).axCallSuper(m,e,y),78===b?p.length--:p[p.length-1]=c;break;case 83:Tf(p,h.u30(),y),p[p.length-1]=_.applyType(p[p.length-1],y);break;case 85:r=Object.create(_.AXObject.tPrototype),A=h.u30();for(var S=p.length-2*A;S<p.length;S+=2)i=p[S+1],r.axSetPublicProperty(p[S],i);p.length-=2*A,p.push(r);break;case 86:r=[],A=h.u30();for(S=p.length-A;S<p.length;S++)r.push(p[S]);p.length-=A,p.push(_.AXArray.axBox(r));break;case 87:p.push(_.createActivation(t,f.topScope()));break;case 88:i=p[p.length-1],p[p.length-1]=_.createClass(g.classes[h.u30()],i,f.topScope());break;case 89:TR(p,g.getMultiname(h.u30()),m),void 0===m.name&&(m.name="*"),p[p.length-1]=tL(p[p.length-1],m,_);break;case 90:p.push(_.createCatch(h.body.catchBlocks[h.u30()],f.topScope()));break;case 94:case 93:TR(p,g.getMultiname(h.u30()),m),p.push(f.topScope().findScopeProperty(m,93===b,!1));break;case 96:TR(p,g.getMultiname(h.u30()),m),p.push(f.topScope().findScopeProperty(m,!0,!1).axGetProperty(m));break;case 104:case 97:i=p.pop(),TR(p,g.getMultiname(h.u30()),m),_.box(p.pop()).axSetProperty(m,i,104,t);break;case 102:TR(p,g.getMultiname(h.u30()),m),p[p.length-1]=_.box(p[p.length-1]).axGetProperty(m);break;case 106:TR(p,g.getMultiname(h.u30()),m),p[p.length-1]=_.box(p[p.length-1]).axDeleteProperty(m);break;case 4:TR(p,g.getMultiname(h.u30()),m),p[p.length-1]=_.box(p[p.length-1]).axGetSuper(m,e);break;case 5:i=p.pop(),TR(p,g.getMultiname(h.u30()),m),_.box(p.pop()).axSetSuper(m,e,i);break;case 98:p.push(d[h.u30()]);break;case 99:d[h.u30()]=p.pop();break;case 100:p.push(e.global.object);break;case 101:p.push(f.get(h.code[h.pc++]));break;case 108:p[p.length-1]=_.box(p[p.length-1]).axGetSlot(h.u30());break;case 109:i=p.pop(),_.box(p.pop()).axSetSlot(h.u30(),i);break;case 110:p[p.length-1]=e.global.object.axGetSlot(h.u30());break;case 111:i=p.pop(),e.global.object.axSetSlot(h.u30(),i);break;case 114:p[p.length-1]=cM(p[p.length-1]);break;case 113:p[p.length-1]=uM(_,p[p.length-1]);break;case 131:case 115:p[p.length-1]|=0;break;case 136:case 116:p[p.length-1]>>>=0;break;case 132:case 117:p[p.length-1]=+p[p.length-1];break;case 129:case 118:p[p.length-1]=!!p[p.length-1];break;case 133:p[p.length-1]=yb(p[p.length-1]);break;case 112:p[p.length-1]=nL(p[p.length-1]);break;case 120:p[p.length-1]=eL(_,p[p.length-1]);break;case 128:TR(p,g.getMultiname(h.u30()),m),p[p.length-1]=f.topScope().getScopeProperty(m,!0,!1).axCoerce(p[p.length-1]);break;case 130:case 2:case 1:break;case 134:TR(p,g.getMultiname(h.u30()),m),p[p.length-1]=f.topScope().getScopeProperty(m,!0,!1).axAsType(p[p.length-1]);break;case 135:p[p.length-2]=p.pop().axAsType(p[p.length-1]);break;case 137:r=p[p.length-1],p[p.length-1]=null==r?null:r;break;case 144:p[p.length-1]=-p[p.length-1];break;case 145:++p[p.length-1];break;case 146:++d[h.u30()];break;case 147:--p[p.length-1];break;case 148:--d[h.u30()];break;case 149:p[p.length-1]=rL(p[p.length-1],_);break;case 150:p[p.length-1]=!p[p.length-1];break;case 151:p[p.length-1]=~p[p.length-1];break;case 160:s=p.pop(),a=p[p.length-1],p[p.length-1]="number"==typeof a&&"number"==typeof s?a+s:iL(a,s,_);break;case 161:p[p.length-2]-=p.pop();break;case 162:p[p.length-2]*=p.pop();break;case 163:p[p.length-2]/=p.pop();break;case 164:p[p.length-2]%=p.pop();break;case 165:p[p.length-2]<<=p.pop();break;case 166:p[p.length-2]>>=p.pop();break;case 167:p[p.length-2]>>>=p.pop();break;case 168:p[p.length-2]&=p.pop();break;case 169:p[p.length-2]|=p.pop();break;case 170:p[p.length-2]^=p.pop();break;case 171:p[p.length-2]=ZM(p[p.length-2],p.pop(),_);break;case 172:p[p.length-2]=p[p.length-2]===p.pop();break;case 173:p[p.length-2]=p[p.length-2]<p.pop();break;case 174:p[p.length-2]=p[p.length-2]<=p.pop();break;case 175:p[p.length-2]=p[p.length-2]>p.pop();break;case 176:p[p.length-2]=p[p.length-2]>=p.pop();break;case 177:p[p.length-2]=p.pop().axIsInstanceOf(p[p.length-1]);break;case 178:TR(p,g.getMultiname(h.u30()),m),p[p.length-1]=f.topScope().findScopeProperty(m,!0,!1).axIsType(p[p.length-1]);break;case 179:p[p.length-2]=p.pop().axIsType(p[p.length-1]);break;case 180:o=_.box(p.pop());var D=p[p.length-1];p[p.length-1]=D&&D.axClass===_.AXQName?o.axHasProperty(D.name):o.axHasPublicProperty(D);break;case 192:p[p.length-1]=1+(0|p[p.length-1]);break;case 193:p[p.length-1]=(0|p[p.length-1])-1;break;case 194:d[u=h.u30()]=1+(0|d[u]);break;case 195:d[u=h.u30()]=(0|d[u])-1;break;case 196:p[p.length-1]=-(0|p[p.length-1]);break;case 197:p[p.length-2]=(0|p[p.length-2])+(0|p.pop())|0;break;case 198:p[p.length-2]=(0|p[p.length-2])-(0|p.pop())|0;break;case 199:p[p.length-2]=(0|p[p.length-2])*(0|p.pop())|0;break;case 208:p.push(d[0]);break;case 209:p.push(d[1]);break;case 210:p.push(d[2]);break;case 211:p.push(d[3]);break;case 212:d[0]=p.pop();break;case 213:d[1]=p.pop();break;case 214:d[2]=p.pop();break;case 215:d[3]=p.pop();break;case 6:f.topScope().defaultNamespace=gb(0,g.getString(h.u30()));break;case 7:f.topScope().defaultNamespace=gb(0,p.pop());break;case 239:h.pc++,h.u30(),h.pc++,h.u30();break;case 240:case 241:h.u30();break;default:oL(b)}}catch(t){var T=t;Ob(T)||(T=MR(_,T,b,i,o,a,s,m,v+1));var P=h.body.catchBlocks;for(S=0;S<P.length;S++){var B=P[S];if(h.pc>=B.start&&h.pc<=B.end){var O=B.type;if(!O||h.app.getClass(O).axIsType(T)){p.length=0,p.push(T),f.clear(),h.pc=B.target;continue t}}}throw Yb.length--,T}}}}function MR(t,e,n,i,r,o,a,s,l){var u,c=e instanceof Error&&"string"==typeof e.name&&"string"==typeof e.message;if(c)if(e instanceof RangeError||"InternalError"===e.name){var h=Object.create(t.AXError.tPrototype);if(h._errorID=1023,"allocation size overflow"===e.message)return h.$Bgmessage="allocation size overflow",h;if(e.message.indexOf("recursion")>-1||e.message.indexOf("call stack size exceeded")>-1)return h.$Bgmessage="Stack overflow occurred",Yb.length=l,h}else if(e instanceof TypeError){if(e.message.indexOf("convert")>-1&&(e.message.indexOf("to primitive")>-1||e.message.indexOf("to string")>-1))return t.createError("TypeError",kb.ConvertToPrimitiveError,"value");if("Conversion to Array failed"===e.message)return t.createError("TypeError",kb.CheckTypeFailedError,"value","Array")}var p,d=!1;switch(n){case 65:if(!i||!i.axApply)return t.createError("TypeError",kb.CallOfNonFunctionError,"value");break;case 66:if(!r||!r.axConstruct)return t.createError("TypeError",kb.ConstructOfNonFunctionError);break;case 88:if(!i||!t.AXClass.axIsType(i))return t.createError("VerifyError",kb.InvalidBaseClassError);break;case 78:case 73:d=!0;case 70:case 79:case 76:case 74:case 69:if(null===r)return t.createError("TypeError",kb.ConvertNullToObjectError);if(void 0===r)return t.createError("TypeError",kb.ConvertUndefinedToObjectError);if(!(r.axResolveMultiname(s)in r)){var f=d?r.axClass.superClass:r.axClass;return f.classInfo.instanceInfo.isSealed()?t.createError("ReferenceError",kb.ReadSealedError,s.name,f.name.toFQNString(!1)):t.createError("TypeError",d?kb.ConstructOfNonFunctionError:kb.CallOfNonFunctionError,s.name)}if(c&&"RangeError"===e.name&&(e.message.indexOf("arguments array passed")>-1||e.message.indexOf("call stack size")>-1))return t.createError("RangeError",kb.StackOverflowError);break;case 4:d=!0;case 102:if(null===r)return t.createError("TypeError",kb.ConvertNullToObjectError);if(void 0===r)return t.createError("TypeError",kb.ConvertUndefinedToObjectError);break;case 104:case 97:if(null===r)return t.createError("TypeError",kb.ConvertNullToObjectError);if(void 0===r)return t.createError("TypeError",kb.ConvertUndefinedToObjectError);var _=r.axResolveMultiname(s);if(_ in r&&!1===function(t,e){do{var n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Object.getPrototypeOf(t)}while(t);return null}(r,_).writable)return t.createError("ReferenceError",kb.ConstWriteError,_,r.axClass.name.name);break;case 177:if(!r||!r.axIsInstanceOf)return t.createError("TypeError",kb.CantUseInstanceofOnNonObjectError);break;case 134:case 135:if(r&&!r.axAsType)return t.createError("TypeError",kb.ConvertNullToObjectError);case 178:case 179:if(null===r)return t.createError("TypeError",kb.ConvertNullToObjectError);if(void 0===r)return t.createError("TypeError",kb.ConvertUndefinedToObjectError);if(!r.axIsType)return t.createError("TypeError",kb.IsTypeMustBeClassError);break;case 128:if(!r)return t.createError("ReferenceError",kb.ClassNotFoundError,s.toFQNString(!1));break;case 180:if(null===r)return t.createError("TypeError",kb.ConvertNullToObjectError);if(void 0===r)return t.createError("TypeError",kb.ConvertUndefinedToObjectError);break;case 19:case 20:case 171:if(typeof o!=typeof a&&("object"==typeof o&&o&&"object"!=typeof a||"object"==typeof a&&a&&"object"!=typeof o))return t.createError("TypeError",kb.ConvertToPrimitiveError,"Object");break;default:if(!e||"string"!=typeof e.message||"string"!=typeof e.stack||"string"!=typeof e.name)break;u=e.message;var g=e.stack.split("\n"),m=0===g[0].indexOf("at ")?g[0].substr(3):g[0];if("TypeError"===e.name)if(0===m.indexOf("AXBasePrototype_valueOf")||0===m.indexOf("AXBasePrototype_toString"))return t.createError("TypeError",kb.CallOfNonFunctionError,"value")}u="Uncaught VM-internal exception during op "+oL(n)+": ";try{u+=e.toString(),p=e.stack}catch(t){u+="[Failed to stringify exception]"}return t.player,console.error(u,"\n",p),t.createError("Error",kb.InternalErrorIV)}var LR=function(){function t(t,e,n){this.multiname=t,this.kind=e,this._abc=n,this.configurable=!0,this.typeName=null,this._type=void 0}return t.prototype.getType=function(){if(void 0!==this._type)return this._type;if(null===this.typeName)return this._type=null;var t=this._abc.applicationDomain.getClass(this.typeName);return this._type=t&&t.axCoerce?t:null},t}();function RR(t,e,n){var i=(0|e)===e,r=ap(e);if(512&n&&(r||i))return null;if(r)return function(t,e){return{__proto__:t.objectPrototype,$Bgname:void 0===e?"void":"null",$BgisDynamic:!1,$BgisFinal:!0,$BgisStatic:!1,$Bgtraits:{__proto__:t.objectPrototype,$Bgvariables:null,$Bgaccessors:null,$Bgmetadata:t.createArray([]),$Bgconstructor:null,$Bginterfaces:t.createArray([]),$Bgmethods:null,$Bgbases:t.createArray([])}}}(t,e);if(e.sec&&(t=e.sec),e=t.box(e),t.AXFunction.axIsType(e))if(t.AXMethodClosure.axIsType(e)){if(512&n)return null}else if("receiver"in e)return null;var o=e.hasOwnProperty("classInfo")?e:e.axClass,a=o===e&&!(512&n),s=o.classInfo,l=t.createObject();return l.$Bgname=i?"int":s.instanceInfo.multiname.toFQNString(!0),l.$BgisDynamic=a||!(1&s.instanceInfo.flags),l.$BgisFinal=a||!!(2&s.instanceInfo.flags),l.$BgisStatic=a,256&n&&(l.$Bgtraits=function(t,e,n,i){var r=t.sec,o=2&i,a=32&i&&!n,s=r.createObject(),l=s.$Bgvariables=8&i?r.createArray([]):null,u=s.$Bgaccessors=16&i?r.createArray([]):null,c=null;if(64&i&&!n){var h=e.trait.metadata;h&&(c=GR(r,h))}if(s.$Bgmetadata=c||r.createArray([]),s.$Bgconstructor=null,4&i){if(s.$Bginterfaces=r.createArray([]),!n){var p=s.$Bginterfaces.value;t.classInfo.instanceInfo.getInterfaces(t).forEach((function(t){return p.push(t.name.toFQNString(!0))}))}}else s.$Bginterfaces=null;var d,f=s.$Bgmethods=a?r.createArray([]):null,_=s.$Bgbases=o?r.createArray([]):null,g=Object.create(null),m=Object.create(null),y=Object.create(null),A=!1,v=e.instanceInfo.isInterface();for(;t&&(d=t.classInfo.instanceInfo.multiname.toFQNString(!0),o&&A&&!n?_.push(d):A=!0,!(1024&i&&t===r.AXObject));)x(r,n?t.classInfo.traits.traits:t.classInfo.instanceInfo.traits.traits,v),t=t.superClass;if(n){if(16&i){var b=r.createObject();b.$Bgname="prototype",b.$Bgtype="*",b.$Bgaccess="readonly",b.$Bgmetadata=null,b.$Bguri=null,b.$BgdeclaredBy="Class",u.push(b)}o&&(_.pop(),_.push("Class","Object"),t=r.AXClass)}function x(t,e,r){for(var o=0;o<e.length;o++){var s=e[o],c=s.multiname,h=c.namespace;if(r||!(!h.isPublic()&&!h.uri||1&i&&h.uri)){var p=r?c.name:c.toFQNString(!0);if(m[p]===y[p]){if(!g[p]){var _=t.createObject();g[p]=_;var A=s.metadata;switch(s.kind){case 6:case 0:if(!(8&i))continue;_.$Bgname=p,_.$Bguri=h.reflectedURI;var v=s.typeName;_.$Bgtype=v?v.toFQNString(!0):"*",_.$Bgaccess="readwrite",_.$Bgmetadata=64&i?GR(t,A):null,l.push(_);break;case 1:if(!a)continue;var b=s.methodInfo.getType();_.$BgreturnType=b?b.name.toFQNString(!0):"*",_.$Bgmetadata=64&i?GR(t,A):null,_.$Bgname=p,_.$Bguri=h.reflectedURI;for(var x=_.$Bgparameters=t.createArray([]),C=s.methodInfo.parameters,I=0;I<C.length;I++){var E=C[I],w=t.createObject();w.$Bgtype=E.typeName?E.typeName.toFQNString(!0):"*",w.$Bgoptional="value"in E,x.push(w)}_.$BgdeclaredBy=d,f.push(_);break;case 2:case 3:if(!(16&i)||n)continue;if(_.$Bgname=p,2===s.kind){b=s.methodInfo.getType();_.$Bgtype=b?b.name.toFQNString(!0):"*",m[p]=_}else{var S=s.methodInfo.parameters[0].typeName;_.$Bgtype=S?S.toFQNString(!0):"*",y[p]=_}_.$Bgaccess=2===s.kind?"readonly":"writeonly",_.$Bgmetadata=64&i?GR(t,A):null,_.$Bguri=h.reflectedURI,_.$BgdeclaredBy=d,u.push(_)}}}else{var D=g[p];if(D.$Bgaccess="readwrite",2===s.kind){var T=s.methodInfo.getType();D.$Bgtype=T?T.name.toFQNString(!0):"*"}}}}}f&&0!==f.value.length||(s.$Bgmethods=null);l&&0!==l.value.length||(s.$Bgvariables=null);return s}(o,s,a,n)),l}var NR=new vb(null,0,7,[_b.PUBLIC],null,null,!0),FR=new vb(null,0,13,[_b.PUBLIC],null,null,!0);function kR(t,e){for(var n=0,i=e.$Bgbases&&e.$Bgbases.value,r=0;i&&r<i.length;r++){var o=i[r],a=t.sec.AXXML.Create('<extendsClass type="'+cM(o)+'"/>');t.appendChild(a),n++}var s=e.$Bginterfaces&&e.$Bginterfaces.value;for(r=0;s&&r<s.length;r++){var a=t.sec.AXXML.Create('<implementsInterface type="'+cM(s[r])+'"/>');t.appendChild(a),n++}null!==e.$Bgconstructor&&(VR(a=t.sec.AXXML.Create("<constructor/>"),e.$Bgconstructor),t.appendChild(a),n++);var l=e.$Bgvariables&&e.$Bgvariables.value;for(r=0;l&&r<l.length;r++){var u=l[r],c="readonly"===u.$Bgaccess?"constant":"variable";UR(u,a=t.sec.AXXML.Create("<"+c+' name="'+cM(u.$Bgname)+'" type="'+u.$Bgtype+'"/>'),t),n++}var h=e.$Bgaccessors&&e.$Bgaccessors.value;for(r=0;h&&r<h.length;r++){var p=h[r];UR(p,a=t.sec.AXXML.Create('<accessor name="'+cM(p.$Bgname)+'" access="'+p.$Bgaccess+'" type="'+cM(p.$Bgtype)+'" declaredBy="'+cM(p.$BgdeclaredBy)+'"/>'),t),n++}var d=e.$Bgmethods&&e.$Bgmethods.value;for(r=0;d&&r<d.length;r++){var f=d[r];VR(a=t.sec.AXXML.Create('<method name="'+cM(f.$Bgname)+'" declaredBy="'+cM(f.$BgdeclaredBy)+'" returnType="'+cM(f.$BgreturnType)+'"/>'),f.$Bgparameters.value),UR(f,a,t),n++}return jR(t,e.$Bgmetadata),n>0}function UR(t,e,n){null!==t.$Bguri&&(FR.name="uri",e.setProperty(FR,t.$Bguri)),null!==t.$Bgmetadata&&jR(e,t.$Bgmetadata),n.appendChild(e)}function VR(t,e){if(e)for(var n=0;n<e.length;n++){var i=e[n],r=t.sec.AXXML.Create('<parameter index="'+(n+1)+'" type="'+cM(i.$Bgtype)+'" optional="'+i.$Bgoptional+'"/>');t.appendChild(r)}}function jR(t,e){if(e)for(var n=e.value,i=0;i<n.length;i++){for(var r=n[i],o=t.sec.AXXML.Create('<metadata name="'+cM(r.$Bgname)+'"/>'),a=r.$Bgvalue.value,s=0;s<a.length;s++){var l=a[s],u=t.sec.AXXML.Create('<arg key="'+cM(l.$Bgkey)+'" value="'+cM(l.$Bgvalue)+'"/>');o.appendChild(u)}t.appendChild(o)}}function GR(t,e){if(!e)return null;for(var n=t.createArray([]),i=0;i<e.length;i++){var r=e[i];"native"!==r.getName()&&n.push(QR(t,r))}return n}function QR(t,e){var n=t.createObject();n.$Bgname=e.name;var i=[];n.$Bgvalue=t.createArray(i);for(var r=0;r<e.keys.length;r++){var o=t.createObject();o.$Bgvalue=e.getValueAt(r),o.$Bgkey=e.getKeyAt(r),i.push(o)}return n}var zR=function(t,e){switch(typeof e){case"undefined":return"void";case"object":return null===e?"null":e.classInfo.instanceInfo.multiname.toFQNString(!1);case"number":return(0|e)===e?"int":"Number";case"string":return"String";case"boolean":return"Boolean"}},HR={print:function(t,e,n,i,r,o){var a,s=[];if(2==arguments.length)a=arguments[1]?arguments[1].toString():arguments[1],-1===["string","boolean","number","null","undefined"].indexOf(typeof arguments[1])&&s.push(arguments[1]);else{a="";for(var l=1;l<arguments.length;l++)a+=arguments[l]?arguments[l].toString():arguments[l],-1===["string","boolean","number","null","undefined"].indexOf(typeof arguments[l])&&s.push(arguments[l]),l!=arguments.length-1&&(a+=" ")}console.log("%c Trace from SWF:","color: DodgerBlue",a,0==s.length?"":s)},debugBreak:function(t){},bugzilla:function(t,e){return 574600===e},decodeURI:function(t,e){try{return Rh.decodeURI(e)}catch(e){t.throwError("URIError",kb.InvalidURIError,"decodeURI")}},decodeURIComponent:function(t,e){try{return Rh.decodeURIComponent(e)}catch(e){t.throwError("URIError",kb.InvalidURIError,"decodeURIComponent")}},encodeURI:function(t,e){try{return Rh.encodeURI(e)}catch(e){t.throwError("URIError",kb.InvalidURIError,"encodeURI")}},encodeURIComponent:function(t,e){try{return Rh.encodeURIComponent(e)}catch(e){t.throwError("URIError",kb.InvalidURIError,"encodeURIComponent")}},isNaN:wO(Rh.isNaN),isFinite:wO(Rh.isFinite),parseInt:wO(Rh.parseInt),parseFloat:wO(Rh.parseFloat),escape:wO(Rh.escape),unescape:wO(Rh.unescape),isXMLName:function(){return!1},notImplemented:wO(_p),getQualifiedClassName:function(t,e){return zR(0,e)},getQualifiedSuperclassName:function(t,e){if(Oo(e))return"null";var n=(e=t.box(e)).sec.AXClass.axIsType(e)?e.superClass:e.axClass.superClass;return zR(0,n)},getDefinitionByName:function(t,e){e=yb(e).replace("::",".");var n=vb.FromFQNString(e,0);return IO().env.app.getClass(n)},describeType:function(t,e,n){return function(t,e,n){NR.name="XML";var i=t.system.getClass(vb.FromSimpleName("XML")),r=RR(t,e,n),o=i.Create("<type/>");FR.name="name",o.setProperty(FR,r.$Bgname);var a=r.$Bgtraits.$Bgbases.value;a.length&&(FR.name="base",o.setProperty(FR,a[0])),FR.name="isDynamic",o.setProperty(FR,r.$BgisDynamic.toString()),FR.name="isFinal",o.setProperty(FR,r.$BgisFinal.toString()),FR.name="isStatic",o.setProperty(FR,r.$BgisStatic.toString()),kR(o,r.$Bgtraits);var s=RR(t,e,512|n);if(s){var l=t.AXXML.Create("<factory/>");FR.name="type",l.setProperty(FR,s.$Bgname),kR(l,s.$Bgtraits)&&o.appendChild(l)}return o}(t,e,n)},describeTypeJSON:function(t,e,n){return console.log("describeTypeJSON not implemented"),null},getArgv:function(){return null}};function XR(t){for(var e=t.split("."),n=HR,i=0,r=e.length;i<r;i++)n=n&&n[e[i]];return n||(n=SO[t]),n}function YR(t,e){void 0===e&&(e=!0);for(var n=function(t,e){var n,i=null;if(t.holder instanceof rR){if(i=t.holder.getClassName(),!(r=iM[i]||rM[i])&&!e)return[];So(r,"Class native is not defined: "+i),n=[r.prototype],r.instanceNatives&&Pf(n,r.instanceNatives)}else if(t.holder instanceof AR){var r;if(i=t.holder.instanceInfo.getClassName(),!(r=iM[i]||rM[i])&&!e)return[];So(r,"Class native is not defined: "+i),n=[r],r.classNatives&&Pf(n,r.classNatives)}return n}(t,e),i=t.multiname.name,r=0;r<n.length;r++){var o=n[r],a=i;if(!Ef(o,i)&&Ef(o,"native_"+i)&&(a="native_"+i),Ef(o,a)){var s=void 0;if(t.isAccessor()){var l=Object.getOwnPropertyDescriptor(o,a);s=t.isGetter()?l.get:l.set}else s=o[a];return s}}return t.holder,null}function qR(t,e,n){if(void 0===n&&(n=!1),t.method)return t.method;var i,r,o,a=t.methodInfo;if(32&a.flags){var s=a.getNativeMetadata();if(s||t.holder instanceof qM){if(s)i=XR(s.values[0]);else{var l=t.multiname;i=XR(l.uri+"."+l.name)}r=i,o=e.object.sec,i=function(){switch(arguments.length){case 0:return r(o);case 1:return r(o,arguments[0]);case 2:return r(o,arguments[0],arguments[1]);case 3:return r(o,arguments[0],arguments[1],arguments[2]);default:for(var t=[o],e=0;e<arguments.length;e++)t.push(arguments[e]);return r.apply(this,t)}}}else i=YR(t);i&&!dp&&(i.toString=function(){return"Native "+t.toString()},i.isInterpreted=!1)}else n&&(i=YR(t,!1)),i||(i=PR(a,e,null));return So(i,"Not found method:"+t.toString()),t.method=i,i.methodInfo=a,i.methodInfo=a,i}var KR=function(){function t(e,n){void 0===n&&(n=!1),this.traits=e;for(var i=this._multinames=n?t._globalMultinames:{},r=0;r<this.traits.length;r++){var o=this.traits[r],a=o.multiname;i[a.namespaces[0].uri+"."+a.name]=o}}return t.prototype.attachHolder=function(t){for(var e=0;e<this.traits.length;e++)this.traits[e].holder=t},t.prototype.trace=function(t){void 0===t&&(t=new lp),this.traits.forEach((function(e){return t.writeLn(e.toString())}))},t.getGlobalTrait=function(e){for(var n,i=e.name,r=0,o=e.namespaces;r<o.length;r++){var a=o[r];if(n=t._globalMultinames[a.uri+"."+i])return n}return null},t.prototype.getTrait=function(t){for(var e,n=t.name,i=0,r=t.namespaces;i<r.length;i++){var o=r[i];if((e=this._multinames[o.uri+"."+n])&&e.holder.traits===this)return e}return null},t.prototype.resolveRuntimeTraits=function(t,e,n,i){void 0===i&&(i=!1);for(var r=Object.create(t?t.protectedNsMappings:null),o=new Cb(t,e,r),a=0;a<this.traits.length;a++){var s=this.traits[a],l=s.multiname,u=new LR(l,s.kind,s.abc);1===l.namespaces[0].type&&(o.protectedNsMappings[l.name]&&(u.multiname=o.protectedNsMappings[l.name].multiname),o.protectedNsMappings[l.name]=u);var c=o.addTrait(u);switch(s.kind){case 1:u.value=qR(s,n,i);break;case 2:u.get=qR(s,n,i),c&&c.set&&(u.set=c.set,u.kind=7);break;case 3:u.set=qR(s,n,i),c&&c.get&&(u.get=c.get,u.kind=7);break;case 0:case 6:case 4:u.writable=!0,u.slot=s.slot,u.value=s.getDefaultValue(),u.typeName=s.typeName,o.addSlotTrait(u)}}return o},t._globalMultinames={},t}(),WR=function(){function t(t,e){this.sec=t,this.parent=e,this.system=e?e.system:this,this._abcs=[],this._binarySymbols={}}return t.prototype.addBinarySymbol=function(t){this._binarySymbols[t.className]=t},t.prototype.getBinarySymbol=function(t){return this._binarySymbols[t]},t.prototype.loadABC=function(t){So(this._abcs.indexOf(t)<0),this._abcs.push(t)},t.prototype.loadAndExecuteABC=function(t){this.loadABC(t),this.executeABC(t)},t.prototype.executeABC=function(t){var e=t.scripts[t.scripts.length-1];this.executeScript(e)},t.prototype.findClassInfoDeep=function(t){var e=this.findClassInfo(t);return e||(this.parent&&(e=this.parent.findClassInfo(t))?e:null)},t.prototype.findClassInfo=function(t){for(var e="string"==typeof t?t:t.name,n="string"==typeof t?"":t.namespaces[0].uri,i=0;i<this._abcs.length;i++)for(var r=this._abcs[i],o=0;o<r.instances.length;o++){var a=r.classes[o],s=a.instanceInfo.multiname;if(s.name===e&&s.namespaces[0].uri==n)return a}return null},t.prototype.executeScript=function(t){So(0===t.state);var e=this.sec.createAXGlobal(this,t);t.global=e,t.state=1,PR(t.methodInfo,e.scope,null).apply(e,[]),t.state=2},t.prototype.findProperty=function(t,e,n){var i;if(t.globalInfo)return t.globalInfo.global;var r=(null===(i=KR.getGlobalTrait(t))||void 0===i?void 0:i.holder)||this.findDefiningGlobal(t,n);return t.mutable||(t.globalInfo=r),n&&r instanceof qM&&0===r.state&&this.executeScript(r),null==r?void 0:r.global},t.prototype.getClass=function(t){var e=this.getProperty(t,!0,!0);return e&&!e.axApplicationDomain&&(e.axApplicationDomain=this),e},t.prototype.getProperty=function(t,e,n){var i=this.findProperty(t,e,n);if(i)return i.axGetProperty(t);"void"!=t.name&&this.sec.throwError("ReferenceError",kb.DefinitionNotFoundError,t.name)},t.prototype.findDefiningGlobal=function(t,e){var n,i=this.system.sec.findDefiningABC(t);return i?(this.loadABC(i),null===(n=KR.getGlobalTrait(t))||void 0===n?void 0:n.holder):null},t}();function JR(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.indexOf(e)>=0){var r="!"===i[i.length-1];if(r&&(i=i.slice(0,i.length-1)),e!==i)continue;return r}}return!1}function ZR(t,e,n){for(var i=0;i<e.traits.length;i++){var r=e.traits[i],o=r.multiname,a=o.name;if(o.namespace,JR(t,a)){if(r.isConst())return;var s=o.getMangledName();r.isSlot()?Object.defineProperty(n,a,{get:new Function("","return this."+s+"//# sourceURL=get-"+s+".as"),set:new Function("v","this."+s+" = v;//# sourceURL=set-"+s+".as")}):r.isGetter()?Object.defineProperty(n,a,{get:new Function("","return this."+s+"//# sourceURL=get-"+s+".as")}):r.toString()}}}function $R(t){return 0!==t.indexOf("native_")}var tN=["axResolveMultiname","axHasProperty","axDeleteProperty","axCallProperty","axCallSuper","axConstructProperty","axHasPropertyInternal","axHasOwnProperty","axSetProperty","axGetProperty","axGetSuper","axSetSuper","axNextNameIndex","axNextName","axNextValue","axGetEnumerableKeys","axHasPublicProperty","axSetPublicProperty","axGetPublicProperty","axCallPublicProperty","axDeletePublicProperty","axSetNumericProperty","axGetNumericProperty","axGetSlot","axSetSlot"];function eN(t){var e=t.classInfo.instanceInfo.getClassName(),n=iM[e]||rM[e];n&&function(t,e){if(t.asClass=e,e.classSymbols&&ZR(e.classSymbols,t.classInfo.traits,t),e.instanceSymbols&&ZR(e.instanceSymbols,t.classInfo.instanceInfo.traits,t.tPrototype),e.classNatives)for(var n=0;n<e.classNatives.length;n++)Sf(t,e.classNatives[n],$R);if(Sf(t,e,$R,!0,!0),t.superClass,e.instanceNatives)for(n=0;n<e.instanceNatives.length;n++)Sf(t.dPrototype,e.instanceNatives[n],$R);Sf(t.dPrototype,e.prototype,$R),function(t,e,n){for(var i=0;i<n.length;i++){var r=n[i];t[r]=e[r]}}(t.dPrototype,e.prototype,tN),e.classInitializer&&e.classInitializer.call(t,e)}(t,n)}var nN=function(t,e){for(var n=0,i=t.length;n<i;n++)e[t[n]]||(e[t[n]]=Object.create(null)),e=e[t[n]];return e};function iN(t,e,n,i,r){var o=i.split("."),a=o.pop();!function(t,e,n,i){Object.defineProperty(e,i,{get:function(){var r=t.getClass(n),o=function(){return r.axConstruct(arguments)};return o.axIsType=function(t){return r.axIsType(t)},o.axClass=r,Object.defineProperty(e,i,{value:o,writable:!1}),o},configurable:!0})}(t,e=nN(o,e),vb.FromFQNString(n,r),a)}function rN(){this.sec.throwError("VerifierError",kb.NotImplementedError,this.name.name)}function oN(t){return!1}function aN(t){return!(!t||"object"!=typeof t)&&t.axImplementsInterface(this)}function sN(t,e){wf(t,"traits",e);for(var n=e.getTraitsList(),i=0;i<n.length;i++){var r=n[i],o=r;o.value instanceof _b&&(o={value:TM.FromNamespace.call(t.sec.AXNamespace,o.value)}),Object.defineProperty(t,r.multiname.getMangledName(),o)}}function lN(t){return null==t?null:(!t[wb]||t.__fast__||Array.isArray(t)&&t[0]&&t[0].__fast__||this.axIsType(t)||this.sec.throwError("TypeError",kb.CheckTypeFailedError,t,this.classInfo.instanceInfo.getClassName()),t)}function uN(t){return this.dPrototype.isPrototypeOf(this.sec.box(t))}function cN(t,e){return this.axCoerce(e?e[0]:void 0)}function hN(){}function pN(){var t=this.callee;if(t)return t;if(null===this.methodInfo.trait)return console.error("arguments.callee used on trait-less methodInfo function. Probably a constructor"),null;var e=this.methodInfo.trait.name;return this.receiver.axGetProperty(e)}function dN(t){return"boolean"==typeof t}function fN(t){return"number"==typeof t}function _N(){return!1}function gN(t){return"number"==typeof t&&(0|t)===t}function mN(t){return"number"==typeof t&&t>>>0===t}function yN(t){return t[0]}function AN(t){return this.dPrototype.isPrototypeOf(this.sec.box(t))||t===this.dPrototype}function vN(t){return t&&t.__fast__||this.axIsType(t)?t:null}function bN(t,e){var n=e[0];return null==n?Object.create(this.tPrototype):n}function xN(t){var e=t[0];return null==e?Object.create(this.tPrototype):e}function CN(t){return null==t?null:t}var IN=function(){function t(){Mb(),this.system=new WR(this,null),this.application=new WR(this,this.system),this.classAliases=new NO,this.nativeClasses=Object.create(null),this.vectorClasses=new Map,this._catalogs=[]}return Object.defineProperty(t.prototype,"xmlParser",{get:function(){return this._xmlParser||(this._xmlParser=new DM(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AXFunctionUndefinedPrototype",{get:function(){return this._AXFunctionUndefinedPrototype||(this._AXFunctionUndefinedPrototype=this.createObject())},enumerable:!1,configurable:!0}),t.prototype.addCatalog=function(t){this._catalogs.push(t)},t.prototype.findDefiningABC=function(t){for(var e=null,n=0;n<this._catalogs.length;n++){if(e=this._catalogs[n].getABCByMultiname(t))return e}return null},t.prototype.throwError=function(t,e,n,i,r,o){throw this.createError(t,e,n,i,r,o)},t.prototype.createError=function(t,e,n,i,r,o){var a=Gb.call(null,e,n,i,r,o),s=vb.FromFQNString(t,0);return pR(this.system.getProperty(s,!0,!0),[a,e.code])},t.prototype.applyType=function(t,e){this.ObjectVector.axClass.superClass.dPrototype.isPrototypeOf(t.dPrototype)||this.throwError("TypeError",kb.TypeAppOfNonParamType),1!==e.length&&this.throwError("TypeError",kb.WrongTypeArgCountError,"__AS3__.vec::Vector",1,e.length);var n=e[0]||this.AXObject;return this.getVectorClass(n)},t.prototype.getVectorClass=function(t){var e=this.vectorClasses.get(t);if(e)return e;switch(t&&t.classInfo?t.classInfo.instanceInfo.multiname.getMangledName():"$BgObject"){case"$BgNumber":case"$Bgdouble":e=this.Float64Vector.axClass;break;case"$Bgint":e=this.Int32Vector.axClass;break;case"$Bguint":e=this.Uint32Vector.axClass;break;default:e=this.createVectorClass(t)}return this.vectorClasses.set(t,e),e},t.prototype.createVectorClass=function(t){var e=this.ObjectVector.axClass,n=Object.create(e);return n.tPrototype=Object.create(e.tPrototype),n.tPrototype.axClass=n,n.tPrototype.axClassName=n.classInfo.instanceInfo.getClassName(),n.dPrototype=e.dPrototype,n.superClass=e,n.type=t,n},t.prototype.createObject=function(){return Object.create(this.AXObject.tPrototype)},t.prototype.createObjectFromJS=function(t,e){void 0===e&&(e=!1);for(var n=Object.keys(t),i=this.createObject(),r=0;r<n.length;r++){var o=t[n[r]];e&&(o=vO(this,o,!0)),i.axSetPublicProperty(n[r],o)}return i},t.prototype.createArrayUnsafe=function(t){var e=Object.create(this.AXArray.tPrototype);return e.value=t,e},t.prototype.createArray=function(t){var e=this.createArrayUnsafe([]);for(var n in t)e.axSetPublicProperty(n,t[n]);return e.length=t.length,e},t.prototype.boxFunction=function(t){var e=Object.create(this.AXFunction.tPrototype);return e.value=t,e},t.prototype.createClass=function(t,e,n){var i=t.instanceInfo,r=i.multiname.toFQNString(!1),o=this.nativeClasses[r]||Object.create(this.AXClass.tPrototype),a=new KM(n,o);this.nativeClasses[r]?o.tPrototype.axInitializer=this.createInitializerFunction(t,a):i.isInterface()?(o.dPrototype=Object.create(this.objectPrototype),o.tPrototype=Object.create(o.dPrototype),o.tPrototype.axInitializer=rN,o.axIsInstanceOf=oN,o.axIsType=aN):(e===this.AXObject?o.dPrototype=Object.create(this.objectPrototype):e.dPrototype?o.dPrototype=Object.create(e.dPrototype):(o.dPrototype=Object.create(e.prototype),Object.defineProperty(o.dPrototype,CL,{value:!0})),o.tPrototype=Object.create(o.dPrototype),o.tPrototype.axInitializer=this.createInitializerFunction(t,a)),o.classInfo=o.dPrototype.classInfo=t,o.dPrototype.axClass=o,o.dPrototype.axClassName=t.instanceInfo.getClassName(),o.superClass=e,o.scope=n;var s=!!rM[r]&&rM[r].forceNativeMethods;"Object"!==r&&"Class"!==r&&this.initializeRuntimeTraits(o,e,a,s),Df(o.dPrototype,"$Bgconstructor",o),eN(o);var l=Object.create(this.AXGlobalPrototype);l.applicationDomain=t.abc.applicationDomain,l.globalInfo=t,t.global=l;var u=t.methodInfo,c=u.getBody().code;return 208===c[0]&&48===c[1]&&71===c[2]||PR(u,a,null).apply(o,[o]),o},t.prototype.initializeRuntimeTraits=function(t,e,n,i){void 0===i&&(i=!1);var r,o=t.classInfo,a=o.instanceInfo;if(t===this.AXClass)r=a.traits.resolveRuntimeTraits(null,null,n,i);else{var s=this.AXClass.classInfo.instanceInfo.runtimeTraits;r=o.traits.resolveRuntimeTraits(s,null,n.parent,i)}o.runtimeTraits=r,sN(t,r);var l=e&&e[wb]?e.classInfo.instanceInfo.runtimeTraits:null,u=a.traits.resolveRuntimeTraits(l,a.protectedNs,n,i);a.runtimeTraits=u,sN(t.tPrototype,u)},t.prototype.createFunction=function(t,e,n){var i=this.boxFunction(PR(t,e,i));return i.receiver={scope:e},i},t.prototype.createInitializerFunction=function(t,e){var n=t.instanceInfo.methodInfo,i=function(t){var e=t.instanceInfo.methodInfo,n=t.instanceInfo.getClassName(),i=iM[n]||rM[n];return e.isNative()||(null==i?void 0:i.forceNativeConstructor)?i:null}(t);if(!i){var r=t.instanceInfo.getClassName(),o=t.abc.applicationDomain.getBinarySymbol(r);o?(o.buffer=o.data,i=function(){return ZO.symbolForConstructor=o,PR(n,e,null).apply(this,arguments)}):i=PR(n,e,null),i.methodInfo=n}return i},t.prototype.createActivation=function(t,e){var n=t.getBody(),i=n.activationPrototype;return i||wf(i=n.activationPrototype=Object.create(this.AXActivationPrototype),"traits",n.traits.resolveRuntimeTraits(null,null,e)),Object.create(i)},t.prototype.createCatch=function(t,e){if(!t.catchPrototype){var n=t.getTraits();t.catchPrototype=Object.create(this.AXCatchPrototype),wf(t.catchPrototype,"traits",n.resolveRuntimeTraits(null,null,e))}return Object.create(t.catchPrototype)},t.prototype.box=function(t){if(null==t)return t;if(t.constructor===Array)return this.AXArray.axBox(t);switch(typeof t){case"number":return this.AXNumber.axBox(t);case"boolean":return this.AXBoolean.axBox(t);case"string":return this.AXString.axBox(t)}return t},t.prototype.isPrimitive=function(t){return Eb(t)||this.AXPrimitiveBox.dPrototype.isPrototypeOf(t)},t.prototype.createAXGlobal=function(t,e){var n=Object.create(this.AXGlobalPrototype);n.applicationDomain=t,n.globalInfo=e;var i=n.scope=new KM(null,n,!1),r=this.AXObject.classInfo.instanceInfo.runtimeTraits;return sN(n,e.traits.resolveRuntimeTraits(r,null,i)),n[wb]=!0,n},t.prototype.prepareRootClassPrototype=function(){var t=Object.create(this.objectPrototype),e=Object.create(t);e.$BgtoString=function(){return"[class "+this.classInfo.instanceInfo.multiname.name+"]"};var n=Df;n(e,"axBox",yN),n(e,"axCoerce",lN),n(e,"axIsType",AN),n(e,"axAsType",vN),n(e,"axIsInstanceOf",uN),n(e,"axConstruct",uR),n(e,"axApply",cN),Object.defineProperty(e,"name",{get:function(){return this.classInfo.instanceInfo.multiname}}),e[wb]=!0,this.rootClassPrototype=e},t.prototype.initializeCoreNatives=function(){this.prepareRootClassPrototype();var t=this.prepareNativeClass("AXClass","Class",!1);t.classInfo=this.system.findClassInfo("Class"),t.defaultValue=null;var e=this.prepareNativeClass("AXObject","Object",!1);e.classInfo=this.system.findClassInfo("Object"),e=this.AXObject,Df(this.prepareNativeClass("AXFunction","Function",!1),"axBox",$b);var n=new KM(null,t,!1),i=this.AXObject.classInfo,r=i.instanceInfo,o=r.runtimeTraits=r.traits.resolveRuntimeTraits(null,null,n);sN(this.AXObject.tPrototype,o);var a=this.AXClass.classInfo,s=a.instanceInfo;return s.runtimeTraits=s.traits.resolveRuntimeTraits(o,null,n),sN(this.AXClass.tPrototype,s.runtimeTraits),a.runtimeTraits=a.traits.resolveRuntimeTraits(o,null,n),sN(this.AXClass,a.runtimeTraits),i.runtimeTraits=i.traits.resolveRuntimeTraits(s.runtimeTraits,null,n),sN(this.AXObject,i.runtimeTraits),e[wb]=!0,e},t.prototype.prepareNativeClass=function(t,e,n){var i=Object.create(this.rootClassPrototype);if("Object"===e)i.dPrototype=Object.getPrototypeOf(this.objectPrototype),i.tPrototype=this.objectPrototype;else if("Class"===e)i.dPrototype=Object.getPrototypeOf(this.rootClassPrototype),i.tPrototype=this.rootClassPrototype;else{var r=n?this.AXPrimitiveBox.dPrototype:"AXMethodClosure"===t?this.AXFunction.dPrototype:this.objectPrototype;i.dPrototype=Object.create(r),i.tPrototype=Object.create(i.dPrototype)}return this[t]=this.nativeClasses[e]=i,i[wb]=!0,i},t.prototype.preparePrimitiveClass=function(t,e,n,i,r,o,a){var s=this.prepareNativeClass(t,e,!0),l=Df;return l(s,"axBox",$b),l(s,"axApply",(function(t,e){return n(e&&e.length?e[0]:i)})),l(s,"axConstruct",(function(t){return n(t&&t.length?t[0]:i)})),l(s,"axCoerce",r),l(s,"axIsType",o),l(s,"axIsInstanceOf",a),l(s.dPrototype,"value",i),s[wb]=!0,s},t.prototype.initialize=function(){var t=Df,e=Object.create(Bb);e.sec=this,Object.defineProperty(this,"objectPrototype",{value:Object.create(e)}),this.initializeCoreNatives(),this.AXGlobalPrototype=Object.create(this.objectPrototype),this.AXGlobalPrototype.$BgtoString=function(){return"[object global]"},this.AXActivationPrototype=Object.create(this.objectPrototype),this.AXActivationPrototype.$BgtoString=function(){return"[Activation]"},this.AXCatchPrototype=Object.create(this.objectPrototype),this.AXCatchPrototype.$BgtoString=function(){return"[Catch]"};var n=this.AXObject,i=this.AXFunction;t(n,"axApply",bN),t(n,"axConstruct",xN),t(n.tPrototype,"axInitializer",hN),t(n,"axCoerce",CN),this.prepareNativeClass("AXMethodClosure","builtin.as$0.MethodClosure",!1),this.prepareNativeClass("AXError","Error",!1),this.prepareNativeClass("AXMath","Math",!1),this.prepareNativeClass("AXDate","Date",!1),this.prepareNativeClass("AXXML","XML",!1),this.prepareNativeClass("AXXMLList","XMLList",!1),this.prepareNativeClass("AXQName","QName",!1),this.prepareNativeClass("AXNamespace","Namespace",!1);var r=this.prepareNativeClass("AXArray","Array",!1);r.tPrototype.$BgtoString=i.axBox((function(){return this.value.toString()})),r.dPrototype.value=[],this.argumentsPrototype=Object.create(this.AXArray.tPrototype),Object.defineProperty(this.argumentsPrototype,"$Bgcallee",{get:pN}),this.prepareNativeClass("AXRegExp","RegExp",!1).dPrototype.value=/(?:)/,t(this.prepareNativeClass("AXPrimitiveBox","PrimitiveBox",!1).dPrototype,"$BgtoString",i.axBox((function(){return this.value.toString()}))),this.preparePrimitiveClass("AXBoolean","Boolean",HL,!1,HL,dN,dN),this.preparePrimitiveClass("AXString","String",nL,"",yb,HM,HM),this.preparePrimitiveClass("AXNumber","Number",Bx,0,Bx,fN,fN),this.preparePrimitiveClass("AXInt","int",QL,0,QL,gN,_N),this.preparePrimitiveClass("AXUint","uint",zL,0,zL,mN,_N),function(t,e){for(var n=0;n<oM.length;n++)iN(t,e,oM[n].name,oM[n].alias,oM[n].nsType)}(this.application,this),function(t){for(var e in SO){var n=e.split("."),i=n.pop();nN(n,t)[i]=t.boxFunction(SO[e])}}(this)},t}();var EN=function(){function t(t,e,n,i){this.abc=t,this.name=e,this.keys=n,this.values=i}return t.prototype.getValue=function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e]===t)return this.values[e];return null},t}(),wN=function(){function t(t,e,n,i,r,o,a){this.abc=t,this._index=e,this.name=n,this.typeName=i,this.parameters=r,this.optionalCount=o,this.flags=a,this.trait=null,this.scriptInfo=null,this.classInfo=null,this.instanceInfo=null,this.isConstructor=!1,this.compiled=null,this.error=null,this.useCount=0,this._body=null,this.minArgs=r.length-o}return Object.defineProperty(t.prototype,"state",{get:function(){return this.error||null==this.getBody()?"failed":this.compiled?"compiled":"pending"},enumerable:!1,configurable:!0}),t.prototype.getNativeMetadata=function(){var t,e=null===(t=this.trait)||void 0===t?void 0:t.metadata;if(!e)return null;for(var n=0;n<e.length;n++)if("native"===e[n].name)return e[n];return null},t.prototype.getBody=function(){return this._body||(this._body=this.abc.getMethodBodyInfo(this._index))},t.prototype.index=function(){return this._index},t.prototype.getType=function(){return void 0!==this._returnType||(this._returnType=this.typeName?this.abc.applicationDomain.getClass(this.typeName):null),this._returnType},t.prototype.toString=function(){var t=this.name;return t+=" ("+this.parameters.join(", ")+")",this.typeName&&(t+=": "+this.typeName.name),t},t.prototype.toFlashlogString=function(){var t,e,n=this.trait,i=2===n.kind?"get ":3===n.kind?"set ":"",r=n.multiname.toFlashlogString(),o=n.holder;return o&&o instanceof rR&&(i=(t=o.multiname.toFlashlogString())+"/"+i),o&&o instanceof AR&&o.trait&&(i=(t=o.trait.multiname.toFlashlogString())+"$/"+i),t&&(e=r.indexOf("::"))>0&&0===t.indexOf(r.substring(0,e+2))&&(r=r.substring(e+2)),"MTHD "+i+r+" ()"},t.prototype.isNative=function(){return!!(32&this.flags)},t.prototype.needsRest=function(){return!!(4&this.flags)},t.prototype.needsArguments=function(){return!!(1&this.flags)},t}(),SN=function(t){function e(e,n,i,r,o,a,s){var l=t.call(this,s)||this;return l.maxStack=e,l.localCount=n,l.initScopeDepth=i,l.maxScopeDepth=r,l.code=o,l.catchBlocks=a,l.traits=s,l.activationPrototype=null,l}return o(e,t),e.prototype.trace=function(t){t.writeLn("Code: "+this.code.length);for(var e=new hL(this.code);255!==e.currentBytecode();)t.writeLn(e.currentBCI+": "+oL(e.currentBytecode())),e.next()},e}(YM),DN=function(){function t(t,e){this.abc=t,this.typeName=e,this.optionalValueKind=-1,this.optionalValueIndex=-1}return t.prototype.hasOptionalValue=function(){return this.optionalValueKind>=0},t.prototype.getOptionalValue=function(){return this.abc.getConstant(this.optionalValueKind,this.optionalValueIndex)},t.prototype.toString=function(){var t="";return this.name?t+=this.name:t+="?",this.typeName&&(t+=": "+this.typeName.name),this.optionalValueKind>=0&&(t+=" = "+this.abc.getConstant(this.optionalValueKind,this.optionalValueIndex)),t},t}(),TN={__proto__:null,$BgNumber:NaN,$Bgint:0,$Bguint:0,$BgBoolean:!1},PN=function(t){function e(e,n,i,r,o,a,s){var l=t.call(this,e,n,i)||this;return l.slot=r,l.typeName=o,l.defaultValueKind=a,l.defaultValueIndex=s,l}return o(e,t),e.prototype.getDefaultValue=function(){if(-1===this.defaultValueKind){if(null===this.typeName)return;var t=TN[this.typeName.getMangledName()];return void 0===t?null:t}return this.abc.getConstant(this.defaultValueKind,this.defaultValueIndex)},e}(vR),BN=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i,r,e.getMultiname(0),0,-1)||this;return a.classInfo=o,a}return o(e,t),e}(PN),ON=function(){function t(t,e,n,i,r,o){this.abc=t,this.start=e,this.end=n,this.target=i,this.multiname=r,this.type=o,this.catchPrototype=null,this._traits=null}return t.prototype.getTraits=function(){return this._traits||(this._traits=new KR([new PN(this.abc,0,this.multiname,1,this.type,0,0)])),this._traits},t}(),MN=null;"undefined"!=typeof TextDecoder&&(MN=new TextDecoder);var LN=function(){function t(t){this._bytes=t,this._view=new DataView(t.buffer,t.byteOffset),this._position=0}return t._getResultBuffer=function(e){return(!t._resultBuffer||t._resultBuffer.length<e)&&(t._resultBuffer=new Uint32Array(2*e)),t._resultBuffer},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),t.prototype.remaining=function(){return this._bytes.length-this._position},t.prototype.seek=function(t){this._position=t},t.prototype.advance=function(t){this._position+=t},t.prototype.readU8=function(){return this._bytes[this._position++]},t.prototype.readU8s=function(t){var e=new Uint8Array(t);return e.set(this._bytes.subarray(this._position,this._position+t),0),this._position+=t,e},t.prototype.viewU8s=function(t){var e=this._bytes.subarray(this._position,this._position+t);return this._position+=t,e},t.prototype.readS8=function(){return this._bytes[this._position++]<<24>>24},t.prototype.readU32=function(){return this.readS32()>>>0},t.prototype.readU30=function(){var t=this.readU32();return t},t.prototype.readU30Unsafe=function(){return this.readU32()},t.prototype.readS16=function(){return this.readU30Unsafe()<<16>>16},t.prototype.readS32=function(){var t=this.readU8();return 128&t&&16384&(t=127&t|this.readU8()<<7)&&2097152&(t=16383&t|this.readU8()<<14)&&268435456&(t=2097151&t|this.readU8()<<21)&&(t=268435455&t|this.readU8()<<28,t&=4294967295),t},t.prototype.readWord=function(){var t=this._view.getUint32(this._position,!0);return this._position+=4,t},t.prototype.readS24=function(){return(this.readU8()|this.readU8()<<8|this.readU8()<<16)<<8>>8},t.prototype.readDouble=function(){var t=this._view.getFloat64(this._position,!0);return this._position+=8,t},t.prototype.readUTFString=function(e){if(MN){var n=this._position;return this._position+=e,MN.decode(this._bytes.subarray(n,n+e))}for(var i=this._position,r=i+e,o=this._bytes,a=0,s=t._getResultBuffer(2*e);i<r;){var l=o[i++];if(l<=127)s[a++]=l;else if(l>=192){var u=0;l<224?u=(31&l)<<6|63&o[i++]:l<240?u=(15&l)<<12|(63&o[i++])<<6|63&o[i++]:(u=((7&l)<<18|(63&o[i++])<<12|(63&o[i++])<<6|63&o[i++])-65536,s[a++]=55296+((1047552&u)>>>10),u=56320+(1023&u)),s[a++]=u}}return this._position=i,qh.fromCharCodeArray(s.subarray(0,a))},t._resultBuffer=new Uint32Array(256),t}(),RN=function(){function t(t,e){this._buffer=e,this.env=t,this._stream=new LN(e),this._checkMagic(),this._parseNumericConstants(),this._parseStringConstants(),this._parseNamespaces(),this._parseNamespaceSets(),this._parseMultinames(),this._parseMethodInfos(),this._parseMetaData(),this._parseInstanceAndClassInfos(),this._parseScriptInfos(),this._parseMethodBodyInfos()}return Object.defineProperty(t.prototype,"applicationDomain",{get:function(){return this.env.app},enumerable:!1,configurable:!0}),t.prototype._parseNumericConstants=function(){var t=this._stream,e=t.readU30(),n=new Int32Array(e);n[0]=0;for(var i=1;i<e;i++)n[i]=t.readS32();this.ints=n,e=t.readU30();var r=new Uint32Array(e);r[0]=0;for(i=1;i<e;i++)r[i]=t.readS32();this.uints=r,e=t.readU30();var o=new Float64Array(e);o[0]=NaN;for(i=1;i<e;i++)o[i]=t.readDouble();this.doubles=o},t.prototype._parseStringConstants=function(){var t=this._stream,e=t.readU30();this._strings=new Array(e),this._strings[0]=null;for(var n=1;n<e;n++){var i=t.readU30();this._strings[n]=t.readUTFString(i)}},t.prototype._parseNamespaces=function(){var t=this._stream,e=t.readU30();this._namespaces=new Array(e),this._namespaces[0]=_b.PUBLIC;for(var n=1;n<e;n++){var i=t.readU8(),r=t.readU30(),o=this._strings[r],a=void 0;switch(i){case 8:case 22:a=0;break;case 23:a=2;break;case 24:a=1;break;case 25:a=4;break;case 26:a=5;break;case 5:a=3;break;default:this.applicationDomain.sec.throwError("VerifierError",kb.CpoolEntryWrongTypeError,n)}o&&3!==a||null===o&&(o=""),this._namespaces[n]=gb(a,o)}},t.prototype._parseNamespaceSets=function(){var t=this._stream,e=t.readU30();this._namespaceSets=new Array(e),this._namespaceSets[0]=null;for(var n=1;n<e;n++)for(var i=t.readU30(),r=this._namespaceSets[n]=new Array(i),o=0;o<i;o++)r[o]=this._namespaces[t.readU30()]},t.prototype._parseMultinames=function(){var t=this._stream.readU30();this._multinames=new Array(t),this._multinames[0]=null;for(var e=1;e<t;e++)this._multinames[e]=this._parseMultiname(e)},t.prototype._parseMultiname=function(t){var e,n=this._stream,i=!1,r=!0,o=0,a=n.readU8();switch(a){case 7:case 13:e=n.readU30(),r=!1,o=n.readU30();break;case 15:case 16:i=!0,o=n.readU30();break;case 17:case 18:i=!0;break;case 9:case 14:o=n.readU30(),e=n.readU30();break;case 27:case 28:e=n.readU30();break;case 29:var s=n.readU32();n.readU32();var l=this._multinames[n.readU32()],u=n.position,c=this.getMultiname(s);return n.seek(u),new vb(this,t,a,c.namespaces,c.name,l);default:wp()}var h=0===o?null:this._strings[o],p=i?null:r?this._namespaceSets[e]:[this._namespaces[e]];return new vb(this,t,a,p,h)},t.prototype._checkMagic=function(){var t=this._stream.readWord();t<3014671&&this.env.app.sec.throwError("VerifierError",kb.InvalidMagicError,t>>16,65535&t)},t.prototype._checkForDuplicateStrings=function(){for(var t=[],e=0;e<this._strings.length;e++)t.push(this._strings[e]);t.sort();for(e=0;e<t.length-1;e++)if(t[e]===t[e+1])return!0;return!1},t.prototype.getString=function(t){return this._strings[t]},t.prototype.getMultiname=function(t){return(t<0||t>=this._multinames.length)&&this.applicationDomain.sec.throwError("VerifierError",kb.CpoolIndexRangeError,t,this._multinames.length),0!==t?this._multinames[t]||(this._multinames[t]=this._parseMultiname(t)):null},t.prototype.getNamespace=function(t){return(t<0||t>=this._namespaces.length)&&this.applicationDomain.sec.throwError("VerifierError",kb.CpoolIndexRangeError,t,this._namespaces.length),this._namespaces[t]},t.prototype.getNamespaceSet=function(t){return(t<0||t>=this._namespaceSets.length)&&this.applicationDomain.sec.throwError("VerifierError",kb.CpoolIndexRangeError,t,this._namespaceSets.length),this._namespaceSets[t]},t.prototype._parseMethodInfos=function(){var t=this._stream.readU30();this._methods=new Array(t);for(var e=0;e<t;++e)this._methods[e]=this._parseMethodInfo(e)},t.prototype._parseMethodInfo=function(t){for(var e=this._stream,n=e.readU30(),i=this._multinames[e.readU30()],r=new Array(n),o=0;o<n;o++)r[o]=new DN(this,this._multinames[e.readU30()]);var a=this._strings[e.readU30()]||"anonymous",s=e.readU8(),l=0;if(8&s)for(o=n-(l=e.readU30());o<n;o++)r[o].optionalValueIndex=e.readU30(),r[o].optionalValueKind=e.readU8();if(128&s)for(o=0;o<n;o++)r[o].name=this._strings[e.readU30()];return new wN(this,t,a,i,r,l,s)},t.prototype.getMethodInfo=function(t){return this._methods[t]},t.prototype.getMethodBodyInfo=function(t){return this._methodBodies[t]},t.prototype._parseMetaData=function(){var t=this._stream,e=t.readU30();this._metadata=new Array(e);for(var n=0;n<e;n++){for(var i=this._strings[t.readU30()],r=t.readU30(),o=new Array(r),a=0;a<r;a++)o[a]=this._strings[t.readU30()];var s=new Array(r);for(a=0;a<r;a++)s[a]=this._strings[t.readU30()];this._metadata[n]=new EN(this,i,o,s)}},t.prototype.getMetadataInfo=function(t){return this._metadata[t]},t.prototype._parseInstanceAndClassInfos=function(){for(var t=this._stream,e=t.readU30(),n=this.instances=new Array(e),i=0;i<e;i++)n[i]=this._parseInstanceInfo();this._parseClassInfos(e);var r=t.position;for(i=0;i<e;i++)n[i].classInfo=this.classes[i];t.seek(r)},t.prototype._parseInstanceInfo=function(){for(var t=this._stream,e=this._multinames[t.readU30()],n=this._multinames[t.readU30()],i=t.readU8(),r=8&i?this._namespaces[t.readU30()]:_b.PUBLIC,o=t.readU30(),a=[],s=0;s<o;s++)a[s]=this._multinames[t.readU30()];var l=this._methods[t.readU30()],u=this._parseTraits(),c=new rR(this,e,n,i,r,a,l,u);return u.attachHolder(c),c},t.prototype._parseTraits=function(t){void 0===t&&(t=!1);for(var e=this._stream.readU30(),n=new Array(e),i=0;i<e;i++)n[i]=this._parseTrait();return new KR(n,t)},t.prototype._parseTrait=function(){var t,e=this._stream,n=this._multinames[e.readU30()],i=e.readU8(),r=15&i,o=i>>4&15;switch(r){case 0:case 6:var a=e.readU30(),s=this._multinames[e.readU30()],l=e.readU30(),u=-1;0!==l&&(u=e.readU8()),t=new PN(this,r,n,a,s,u,l);break;case 1:case 2:case 3:e.readU30();var c=this._methods[e.readU30()];t=c.trait=new bR(this,r,n,c);break;case 4:a=e.readU30();var h=this.classes[e.readU30()];t=h.trait=new BN(this,r,n,a,h);break;default:this.applicationDomain.sec.throwError("VerifierError",kb.UnsupportedTraitsKindError,r)}if(4&o){for(var p=e.readU30(),d=new Array(p),f=0;f<p;f++)d[f]=this._metadata[e.readU30()];t.metadata=d}return t},t.prototype._parseClassInfos=function(t){for(var e=this.classes=new Array(t),n=0;n<t;n++)e[n]=this._parseClassInfo(n)},t.prototype._parseClassInfo=function(t){var e=this._methods[this._stream.readU30()],n=this._parseTraits(!0),i=new AR(this,this.instances[t],e,n);return n.attachHolder(i),i},t.prototype._parseScriptInfos=function(){for(var t=this._stream.readU30(),e=this.scripts=new Array(t),n=0;n<t;n++)e[n]=this._parseScriptInfo()},t.prototype._parseScriptInfo=function(){var t=this._methods[this._stream.readU30()],e=this._parseTraits(!0),n=new qM(this,t,e);return e.attachHolder(n),n},t.prototype._parseMethodBodyInfos=function(){for(var t=this._stream,e=this._methodBodies=new Array(this._methods.length),n=t.readU30(),i=0;i<n;i++){for(var r=t.readU30(),o=t.readU30(),a=t.readU30(),s=t.readU30(),l=t.readU30(),u=t.viewU8s(t.readU30()),c=t.readU30(),h=new Array(c),p=0;p<c;++p)h[p]=this._parseException();var d=this._parseTraits();e[r]=new SN(o,a,s,l,u,h,d),d.attachHolder(e[r])}},t.prototype._parseException=function(){var t=this._stream,e=t.readU30(),n=t.readU30(),i=t.readU30(),r=t.readU30(),o=t.readU30();return new ON(this,e,n,i,this._multinames[o],this._multinames[r])},t.prototype.getConstant=function(t,e){switch(t){case 3:return this.ints[e];case 4:return this.uints[e];case 6:return this.doubles[e];case 1:return this._strings[e];case 11:return!0;case 10:return!1;case 12:return null;case 0:return;case 8:case 23:return this._namespaces[e];case 7:case 14:case 15:case 16:case 17:case 18:case 19:case 20:return this._multinames[e]}},t.prototype.trace=function(t){t.writeLn("Multinames: "+this._multinames.length),t.indent();for(var e=0;e<this._multinames.length;e++)t.writeLn(e+" "+this._multinames[e]);t.outdent(),t.writeLn("Namespace Sets: "+this._namespaceSets.length),t.indent();for(e=0;e<this._namespaceSets.length;e++)t.writeLn(e+" "+this._multinames[e]);t.outdent(),t.writeLn("Namespaces: "+this._namespaces.length),t.indent();for(e=0;e<this._namespaces.length;e++)t.writeLn(e+" "+this._namespaces[e]);t.outdent(),t.writeLn("Strings: "+this._strings.length),t.indent();for(e=0;e<this._strings.length;e++)t.writeLn(e+" "+this._strings[e]);t.outdent(),t.writeLn("MethodInfos: "+this._methods.length),t.indent();for(e=0;e<this._methods.length;e++)t.writeLn(e+" "+this.getMethodInfo(e)),this._methodBodies[e]&&this._methodBodies[e].trace(t);t.outdent(),t.writeLn("InstanceInfos: "+this.instances.length),t.indent();for(e=0;e<this.instances.length;e++)t.writeLn(e+" "+this.instances[e]),this.instances[e].trace(t);t.outdent(),t.writeLn("ClassInfos: "+this.classes.length),t.indent();for(e=0;e<this.classes.length;e++)this.classes[e].trace(t);t.outdent(),t.writeLn("ScriptInfos: "+this.scripts.length),t.indent();for(e=0;e<this.scripts.length;e++)this.scripts[e].trace(t);t.outdent()},t}();var NN,FN=function(){function t(t,e,n){this.app=t,this.abcs=e,this.map={},this.scripts={};for(var i=0;i<n.length;i++){var r=n[i];this.scripts[r.name]=r;for(var o=0;o<r.defs.length;o++){var a=r.defs[o].split(":"),s=this.map[a[1]];s||(s=this.map[a[1]]={}),s[a[0]]=r.name}}}return t.prototype.getABCByScriptName=function(t){var e=this.scripts[t];if(!e)return null;var n={url:t,app:this.app};return new RN(n,this.abcs.subarray(e.offset,e.offset+e.length))},t.prototype.getABCByMultiname=function(t){var e=this.map[t.name];if(!e)return null;for(var n=t.namespaces,i=0;i<n.length;i++){var r=e[n[i].uri];if(r)return this.getABCByScriptName(r)}return null},t}();!function(t){t[t.Builtin=1]="Builtin",t[t.Playerglobal=2]="Playerglobal",t[t.Shell=4]="Shell"}(NN||(NN={}));var kN=function(){function t(t){if(this.avmVersion=Oh.AVM2,!t)throw"AVM2Handler must be init with a valid PlayerGlobal-class";this._playerglobal=t}return t.prototype.init=function(t,e,n){var i=this;this._avmStage&&n(!1),this._avmStage=t,nM(),Mb(),_b.PUBLIC=gb(0,""),Function.prototype.axApply=Function.prototype.apply,Function.prototype.axCall=Function.prototype.call,this._playerglobal.createSecurityDomain(t,e,NN.Builtin|NN.Playerglobal).then((function(t){i._factory=t,i._avmStage.config.externalInterfaceID&&(Mf.interfaceID=i._avmStage.config.externalInterfaceID),n(!0)}))},t.prototype.dispose=function(){this._playerglobal.dispose()},t.prototype.enterFrame=function(t){this._playerglobal.enterFrame()},t.prototype.resizeStage=function(){this._playerglobal.resizeStage()},Object.defineProperty(t.prototype,"factory",{get:function(){if(!this._factory)throw"AVM2Handler - no Factory get factory";return this._factory},enumerable:!1,configurable:!0}),t.prototype.addAsset=function(t,e){this._playerglobal.addAsset(t,e)},t}();console.debug("AwayFL - AVM2 - 0.2.219");var UN=function(t){function e(e,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var r=t.call(this)||this;return r._iAllowedToPropagate=!0,r._iAllowedToImmediatlyPropagate=!0,r._type=Xo(e),r._bubbles=!!n,r._cancelable=!!i,r._target=null,r._currentTarget=null,r._eventPhase=null,r._stopPropagation=!1,r._stopImmediatePropagation=!1,r._isDefaultPrevented=!1,r}return o(e,t),e.getInstance=function(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var r=this._instances[t];return r||(r=new e(t,n,i),this._instances[t]=r),r._bubbles=n,r._cancelable=i,r},e.getBroadcastInstance=function(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var r=this._instances[t];return r||(r=new e(t,n,i),this._instances[t]=r),r._isBroadcastEvent=!0,r._bubbles=n,r._cancelable=i,r},e.isBroadcastEventType=function(t){switch(t){case e.ENTER_FRAME:case e.EXIT_FRAME:case e.FRAME_CONSTRUCTED:case e.RENDER:case e.ACTIVATE:case e.DEACTIVATE:return!0}return!1},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bubbles",{get:function(){return this._bubbles},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelable",{get:function(){return this._cancelable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this._currentTarget},set:function(t){this._currentTarget=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!1,configurable:!0}),e.prototype.stopPropagation=function(){this._stopPropagation=!0,this.adaptee&&this.adaptee.stopPropagation()},e.prototype.stopImmediatePropagation=function(){this._stopImmediatePropagation=this._stopPropagation=!0,this.adaptee&&this.adaptee.stopImmediatePropagation()},e.prototype.preventDefault=function(){this._cancelable&&(this._isDefaultPrevented=!0)},e.prototype.isDefaultPrevented=function(){return this._isDefaultPrevented},e.prototype.isBroadcastEvent=function(){return!!this._isBroadcastEvent},e.prototype.clone=function(){return new e(this._type,this._bubbles,this._cancelable)},e.prototype.toString=function(){return this.formatToString("Event","type","bubbles","cancelable","eventPhase")},e.prototype.formatToString=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i="["+t,r=0;r<e.length;r++){var o=e[r],a=this.axGetPublicProperty(o);"string"==typeof a&&(a='"'+a+'"'),i+=" "+o+"="+a}return i+"]"},e.classInitializer=function(){this._instances={}},e.ACTIVATE="activate",e.ADDED="added",e.ADDED_TO_STAGE="addedToStage",e.CANCEL="cancel",e.CHANGE="change",e.CLEAR="clear",e.CLOSE="close",e.COMPLETE="complete",e.CONNECT="connect",e.COPY="copy",e.CUT="cut",e.DEACTIVATE="deactivate",e.ENTER_FRAME="enterFrame",e.FRAME_CONSTRUCTED="frameConstructed",e.EXIT_FRAME="exitFrame",e.FRAME_LABEL="frameLabel",e.ID3="id3",e.INIT="init",e.MOUSE_LEAVE="mouseLeave",e.OPEN="open",e.PASTE="paste",e.REMOVED="removed",e.REMOVED_FROM_STAGE="removedFromStage",e.RENDER="render",e.RESIZE="resize",e.SCROLL="scroll",e.TEXT_INTERACTION_MODE_CHANGE="textInteractionModeChange",e.SELECT="select",e.SELECT_ALL="selectAll",e.SOUND_COMPLETE="soundComplete",e.TAB_CHILDREN_CHANGE="tabChildrenChange",e.TAB_ENABLED_CHANGE="tabEnabledChange",e.TAB_INDEX_CHANGE="tabIndexChange",e.UNLOAD="unload",e.FULLSCREEN="fullScreen",e.CONTEXT3D_CREATE="context3DCreate",e.TEXTURE_READY="textureReady",e.VIDEO_FRAME="videoFrame",e.SUSPEND="suspend",e.AVM1_INIT="initialize",e.AVM1_CONSTRUCT="construct",e.AVM1_LOAD="load",e}(Hb),VN=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._t=e||n,n._listenerObjects||(n._listenerObjects=[]),n}return o(e,t),e.prototype.toString=function(){return""},e.prototype.addEventListener=function(t,e,n,i,r){void 0===i&&(i=0),this._listenerObjects||(this._listenerObjects=[]);var o=this._listenerObjects[t];void 0===o&&(o=this._listenerObjects[t]=new GN),o.addEventListener(e,i)},e.prototype.removeEventListener=function(t,e){this._listenerObjects||(this._listenerObjects=[]);var n=this._listenerObjects[t];n&&(n.removeEventListener(e),0==n.numListeners&&delete this._listenerObjects[t])},e.prototype.dispatchEvent=function(t){this._listenerObjects||(this._listenerObjects=[]);var e=this._listenerObjects[t.type];return e&&(t.target||(t.target=this._t),e.dispatchEvent(t)),!0},e.prototype.hasEventListener=function(t,e){return void 0!==this._listenerObjects[t]&&(null!=e?-1!==this._listenerObjects[t].getEventListenerIndex(e):this._listenerObjects[t].numListeners>0)},e}(Hb);function jN(t,e){return t.priority<e.priority?-1:1}var GN=function(){function t(){this._index=0,this._singlePriority=0,this._listeners=new Array,this.numListeners=0}return t.prototype.addEventListener=function(t,e){if(void 0===e&&(e=0),!this._listenersByPriority)return-1!==this._listeners.indexOf(t)?void 0:0==this._listeners.length||e==this._singlePriority?(this._listeners.push(t),void this.numListeners++):(this._singlePriority<e?this._listenersByPriority=[{priority:this._singlePriority,listeners:this._listeners.concat()},{priority:e,listeners:[t]}]:this._listenersByPriority=[{priority:e,listeners:[t]},{priority:this._singlePriority,listeners:this._listeners.concat()}],void this.numListeners++);for(var n=0;n<this._listenersByPriority.length;n++)if(-1!==this._listenersByPriority[n].listeners.indexOf(t))return;var i=null;for(n=0;n<this._listenersByPriority.length;n++)if(this._listenersByPriority[n].priority==e){i=this._listenersByPriority[n];break}i||(i={priority:e,listeners:[]},this._listenersByPriority.push(i),this._listenersByPriority.length>1&&this._listenersByPriority.sort(jN)),i.listeners.push(t),this.numListeners++},t.prototype.removeEventListener=function(t){var e=-1;if(!this._listenersByPriority){if(-1===(e=this._listeners.indexOf(t)))return;return this._listeners.splice(e,1),void this.numListeners--}for(var n=0;n<this._listenersByPriority.length;n++)if(-1!==(e=this._listenersByPriority[n].listeners.indexOf(t)))return this.numListeners--,void this._listenersByPriority[n].listeners.splice(e,1)},t.prototype.dispatchEvent=function(t){if(this._listenersByPriority){for(var e=this._listenersByPriority.length;e>0;){e--;i=(n=this._listenersByPriority[e].listeners.length>1?this._listenersByPriority[e].listeners.concat():this._listenersByPriority[e].listeners).length,r=0;for(r=0;r<i;r++)n[r]&&n[r].call(n[r],t)}1==this._listenersByPriority.length&&(this._listeners=this._listenersByPriority[0].listeners.concat(),this._singlePriority=this._listenersByPriority[0].priority,this._listenersByPriority=null)}else{var n,i=(n=this._listeners.length>1?this._listeners.concat():this._listeners).length,r=0;for(r=0;r<i;r++)n[r]&&n[r].call(n[r],t)}},t.prototype.getEventListenerIndex=function(t){if(!this._listenersByPriority)return this._listeners.indexOf(t);for(var e=0;e<this._listenersByPriority.length;e++)for(var n=0;n<this._listenersByPriority[e].listeners.length;n++)if(this._listenersByPriority[e].listeners[n]==t)return e;return-1},t}(),QN=function(t){function e(e,n,i,r,o,a,s,l,u,c,h){void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===r&&(r=void 0),void 0===o&&(o=void 0),void 0===a&&(a=null),void 0===s&&(s=!1),void 0===l&&(l=!1),void 0===u&&(u=!1),void 0===c&&(c=!1),void 0===h&&(h=0);var p=t.call(this,e,n,i)||this;return p._localX=r,p._localY=o,p._relatedObject=a,p._ctrlKey=s,p._altKey=l,p._shiftKey=u,p._buttonDown=c,p._delta=h,p}return o(e,t),e.typeFromDOMType=function(t){switch(t){case"click":return e.CLICK;case"dblclick":return e.DOUBLE_CLICK;case"mousedown":return e.MOUSE_DOWN;case"mouseout":case"mouseover":case"mousemove":return e.MOUSE_MOVE;case"mouseup":return e.MOUSE_UP}},e.prototype.fillFromAway=function(t){this.adaptee=t,this.target=t.target.adapter||this.sec.flash.display.DisplayObject.axClass._activeStage,this.currentTarget=t.currentTarget.adapter||this.sec.flash.display.DisplayObject.axClass._activeStage,this.delta=t.delta,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey},Object.defineProperty(e.prototype,"localX",{get:function(){return this._localX/20|0},set:function(t){this._localX=20*t|0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localY",{get:function(){return this._localY/20|0},set:function(t){this._localY=20*t|0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageX",{get:function(){return isNaN(this.localX+this.localY)?Number.NaN:this.target.stage.mouseX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageY",{get:function(){return isNaN(this.localX+this.localY)?Number.NaN:this.target.stage.mouseY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementX",{get:function(){return this._movementX||0},set:function(t){this._movementX=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementY",{get:function(){return this._movementY||0},set:function(t){this._movementY=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delta",{get:function(){return this._delta},set:function(t){this._delta=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ctrlKey",{get:function(){return this._ctrlKey},set:function(t){this._ctrlKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"altKey",{get:function(){return this._altKey},set:function(t){this._altKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shiftKey",{get:function(){return this._shiftKey},set:function(t){this._shiftKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonDown",{get:function(){return this._buttonDown},set:function(t){this._buttonDown=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relatedObject",{get:function(){return this._relatedObject},set:function(t){this._relatedObject=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRelatedObjectInaccessible",{get:function(){return this._isRelatedObjectInaccessible},set:function(t){this._isRelatedObjectInaccessible=t},enumerable:!1,configurable:!0}),e.prototype.updateAfterEvent=function(){this.sec.player.requestRender()},e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.localX,this.localY,this.relatedObject,this.ctrlKey,this.altKey,this.shiftKey,this.buttonDown,this.delta)},e.prototype.toString=function(){return this.formatToString("MouseEvent","type","bubbles","cancelable","eventPhase","localX","localY","relatedObject","ctrlKey","altKey","shiftKey","buttonDown","delta")},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.CLICK="click",e.DOUBLE_CLICK="doubleClick",e.MOUSE_DOWN="mouseDown",e.MOUSE_MOVE="mouseMove",e.MOUSE_OUT="mouseOut",e.MOUSE_OVER="mouseOver",e.MOUSE_UP="mouseUp",e.RELEASE_OUTSIDE="releaseOutside",e.MOUSE_WHEEL="mouseWheel",e.ROLL_OUT="rollOut",e.ROLL_OVER="rollOver",e.MIDDLE_CLICK="middleClick",e.MIDDLE_MOUSE_DOWN="middleMouseDown",e.MIDDLE_MOUSE_UP="middleMouseUp",e.RIGHT_CLICK="rightClick",e.RIGHT_MOUSE_DOWN="rightMouseDown",e.RIGHT_MOUSE_UP="rightMouseUp",e.CONTEXT_MENU="contextMenu",e}(UN),zN=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this,e)||this;return n.id=f.Next(),n.eventMapping||(n.eventMapping={}),n.eventMappingDummys||(n.eventMappingDummys={}),n.eventMappingExtern||(n.eventMappingExtern={}),n.eventMappingInvert||(n.eventMappingInvert={}),n._activateCallbackDelegate=function(t){return n.activateCallback(t)},n.eventMapping[UN.ACTIVATE]={adaptedType:"",addListener:n.initActivateListener,removeListener:n.removeActivateListener,callback:n._activateCallbackDelegate},n._deactivateCallbackDelegate=function(t){return n.deactivateCallback(t)},n.eventMapping[UN.DEACTIVATE]={adaptedType:"",addListener:n.initDeactivateListener,removeListener:n.removeDeactivateListener,callback:n._deactivateCallbackDelegate},n}return o(e,t),e.prototype.toString=function(){return""},e.prototype.hasEventListener=function(e,n){return t.prototype.hasEventListener.call(this,e,n)},e.prototype.willTrigger=function(){},e.prototype.dispatchEvent=function(n,i){void 0===i&&(i=!1),n.currentTarget=this,"enterFrame"==n.type&&(n.target=this);var r=t.prototype.dispatchEvent.call(this,n);return i||-1!=e.eventsThatBubbleInAwayJS.indexOf(n.type)||this.adaptee&&this.adaptee.parent&&this.adaptee.parent.adapter.dispatchEvent(n),r},e.prototype.initActivateListener=function(t,e){window.onfocus=e},e.prototype.removeActivateListener=function(t,e){window.onfocus=null},e.prototype.activateCallback=function(t){this.dispatchEvent(new this.sec.flash.events.Event(UN.ACTIVATE))},e.prototype.initDeactivateListener=function(t,e){window.onblur=e},e.prototype.removeDeactivateListener=function(t,e){window.onblur=null},e.prototype.deactivateCallback=function(t){this.dispatchEvent(new this.sec.flash.events.Event(UN.DEACTIVATE))},e.prototype.addEventListener=function(e,n,i,r,o){return void 0===i&&(i=!1),void 0===r&&(r=0),void 0===o&&(o=!1),!i&&UN.isBroadcastEventType(e)&&YN.getInstance().add(e,this),this.eventMapping||(this.eventMapping={}),this.eventMappingDummys||(this.eventMappingDummys={}),this.eventMappingExtern||(this.eventMappingExtern={}),this.eventMappingInvert||(this.eventMappingInvert={}),this.eventMappingDummys.hasOwnProperty(e)?void 0:this.eventMapping.hasOwnProperty(e)?(t.prototype.addEventListener.call(this,e,n,i,r,o),void this.eventMapping[e].addListener.call(this,this.eventMapping[e].adaptedType,this.eventMapping[e].callback,n)):void t.prototype.addEventListener.call(this,e,n,i,r,o)},e.prototype.removeEventListener=function(e,n){this.eventMapping||(this.eventMapping={}),this.eventMappingDummys||(this.eventMappingDummys={}),this.eventMappingExtern||(this.eventMappingExtern={}),this.eventMappingInvert||(this.eventMappingInvert={}),t.prototype.removeEventListener.call(this,e,n),this.eventMapping.hasOwnProperty(e)&&(this.eventMapping[e].removeListener.call(this,this.eventMapping[e].adaptedType,this.eventMapping[e].callback,n),this.hasEventListener(e)||UN.isBroadcastEventType(e)&&YN.getInstance().remove(e,this))},e.eventsThatBubbleInAwayJS=[QN.MOUSE_WHEEL,QN.MOUSE_UP,QN.MOUSE_OVER,QN.MOUSE_OUT,QN.ROLL_OVER,QN.ROLL_OUT,QN.MOUSE_MOVE,QN.MOUSE_DOWN,QN.DOUBLE_CLICK,QN.CLICK,UN.ENTER_FRAME,UN.EXIT_FRAME,UN.FRAME_CONSTRUCTED,UN.ADDED_TO_STAGE,UN.RESIZE,UN.REMOVED_FROM_STAGE],e}(VN),HN="WeakRef"in self&&Ab.USE_WEAK_REF;HN&&console.debug("[BroadcastEventDispatchQueue] `WeakRef` used for Broadcast Events!");var XN,YN=function(){function t(){this._queues={}}return t.getInstance=function(){return t._instance||(t._instance=new t)},t.prototype.add=function(t,e){var n=this._queues[t]||(this._queues[t]=[]);n[e.id]||(n[e.id]=HN?new self.WeakRef(e):e)},t.prototype.remove=function(t,e){delete this._queues[t][e.id]},t.prototype.dispatchEvent=function(t){var e=this._queues[t._type];if(e)for(var n in e){var i=e[n];HN&&(i=null==i?void 0:i.deref()),i?i.dispatchEvent(t):(console.debug("[BroadcastEventDispatchQueue] Broadcast target was deleted by GC:",n),delete e[n])}},t.prototype.getQueueLength=function(t){return this._queues[t]?Object.getOwnPropertyNames(this._queues[t]).length:0},t}(),qN=function(){function t(){}return t.events={},t}(),KN=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.clone=function(){return null},e.prototype.toAwayObject=function(){return null},e.classInitializer=null,e}(Hb),WN=function(){function t(){}return t.sanitize=function(t,e,n){if(ap(t)||0===t.length)this.colors=[],this.alphas=[],this.ratios=[];else{var i=void 0;ap(n)?(this.colors=this.sanitizeColors(t),i=this.colors.length,this.ratios=this.initArray(i),ap(e)?this.alphas=this.initArray(i):this.alphas=this.sanitizeAlphas(e,i,i,1)):0===n.length?(this.colors=[],this.alphas=[],this.ratios=[]):(i=Math.min(t.length,n.length,16),this.colors=this.sanitizeColors(t,i),this.ratios=this.sanitizeRatios(n,i),ap(e)?this.alphas=this.initArray(i):this.alphas=this.sanitizeAlphas(e,i,i,1))}},t.sanitizeColors=function(t,e){void 0===e&&(e=16);for(var n=[],i=0,r=Math.min(t.length,e);i<r;i++)n[i]=t[i]>>>0&16777215;return n},t.sanitizeAlphas=function(t,e,n,i){void 0===e&&(e=16),void 0===n&&(n=0),void 0===i&&(i=0);var r,o=[],a=Math.min(t.length,e);for(r=0;r<a;r++)o[r]=Nh(+t[r],0,1);for(;r<n;)o[r++]=i;return o},t.sanitizeRatios=function(t,e,n,i){void 0===e&&(e=16),void 0===n&&(n=0),void 0===i&&(i=0);var r,o=[],a=Math.min(t.length,e);for(r=0;r<a;r++)o[r]=Nh(+t[r],0,255);for(;r<n;)o[r++]=i;return o},t.initArray=function(t,e){void 0===e&&(e=0);for(var n=Array(t),i=0;i<t;i++)n[i]=e;return n},t}(),JN=function(t){function e(e,n,i,r,o,a,s,l,u,c,h){void 0===e&&(e=4),void 0===n&&(n=45),void 0===i&&(i=0),void 0===r&&(r=1),void 0===o&&(o=4),void 0===a&&(a=4),void 0===s&&(s=1),void 0===l&&(l=1),void 0===u&&(u=!1),void 0===c&&(c=!1),void 0===h&&(h=!1);var p=t.call(this)||this;return p.filterName="dropShadow",p.distance=e,p.angle=n,p.color=i,p.alpha=r,p.blurX=o,p.blurY=a,p.strength=s,p.quality=l,p.inner=u,p.knockout=c,p.hideObject=h,p}return o(e,t),e.FromUntyped=function(t,e){var n=t.colors[0]>>>8,i=(255&t.colors[0])/255,r=180*t.angle/Math.PI,o=!t.compositeSource;return new e.flash.filters.DropShadowFilter(t.distance,r,n,i,t.blurX,t.blurY,t.strength,t.quality,t.inner,t.knockout,o)},Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(t){this._distance=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=+t%360},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t>>>0&16777215},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=Nh(+t,0,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this._blurX},set:function(t){this._blurX=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this._blurY},set:function(t){this._blurY=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hideObject",{get:function(){return this._hideObject},set:function(t){this._hideObject=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inner",{get:function(){return this._inner},set:function(t){this._inner=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this._knockout},set:function(t){this._knockout=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=Nh(0|t,0,15)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){this._strength=Nh(+t,0,255)},enumerable:!1,configurable:!0}),e.prototype.toAwayObject=function(){return this},e.prototype.clone=function(){return new this.sec.flash.filters.DropShadowFilter(this._distance,this._angle,this._color,this._alpha,this._blurX,this._blurY,this._strength,this._quality,this._inner,this._knockout,this._hideObject)},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(KN),ZN=function(t){function e(e,n,i,r,o,a,s,l){void 0===e&&(e=16711680),void 0===n&&(n=1),void 0===i&&(i=6),void 0===r&&(r=6),void 0===o&&(o=2),void 0===a&&(a=1),void 0===s&&(s=!1),void 0===l&&(l=!1);var u=t.call(this)||this;return u.filterName="glow",u.color=e,u.alpha=n,u.blurX=i,u.blurY=r,u.strength=o,u.quality=a,u.inner=s,u.knockout=l,u}return o(e,t),e.FromUntyped=function(t,e){var n=t.colors[0]>>>8,i=(255&t.colors[0])/255;return new e.flash.filters.GlowFilter(n,i,t.blurX,t.blurY,t.strength,t.quality,t.inner,t.knockout)},Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t>>>0&16777215},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=Nh(+t,0,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this._blurX},set:function(t){this._blurX=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this._blurY},set:function(t){this._blurY=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inner",{get:function(){return this._inner},set:function(t){this._inner=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this._knockout},set:function(t){this._knockout=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=Nh(0|t,0,15)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){this._strength=Nh(+t,0,255)},enumerable:!1,configurable:!0}),e.prototype.toAwayObject=function(){return this},e.prototype.clone=function(){return new this.sec.flash.filters.GlowFilter(this._color,this._alpha,this._blurX,this._blurY,this._strength,this._quality,this._inner,this._knockout)},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(KN),$N=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.INNER="inner",e.OUTER="outer",e.FULL="full",e}(Hb),tF=function(t){function e(e,n,i,r,o,a,s,l,u,c,h,p){void 0===e&&(e=4),void 0===n&&(n=45),void 0===i&&(i=16777215),void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=1),void 0===s&&(s=4),void 0===l&&(l=4),void 0===u&&(u=1),void 0===c&&(c=1),void 0===h&&(h="inner"),void 0===p&&(p=!1);var d=t.call(this)||this;return d.filterName="bevel",d.distance=e,d.angle=n,d.highlightColor=i,d.highlightAlpha=r,d.shadowColor=o,d.shadowAlpha=a,d.blurX=s,d.blurY=l,d.strength=u,d.quality=c,d.type=h,d.knockout=p,d}return o(e,t),e.FromUntyped=function(t,e){var n=t.colors[0]>>>8,i=(255&t.colors[0])/255,r=t.colors[1]>>>8,o=(255&t.colors[1])/255,a=$N.OUTER;t.onTop?a=$N.FULL:t.inner&&(a=$N.INNER);var s=180*t.angle/Math.PI;return new e.flash.filters.BevelFilter(t.distance,s,n,i,r,o,t.blurX,t.blurY,t.strength,t.quality,a,t.knockout)},Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(t){this._distance=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=+t%360},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highlightColor",{get:function(){return this._highlightColor},set:function(t){this._highlightColor=t>>>0&16777215},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highlightAlpha",{get:function(){return this._highlightAlpha},set:function(t){this._highlightAlpha=Nh(+t,0,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(t){this._shadowColor=t>>>0&16777215},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowAlpha",{get:function(){return this._shadowAlpha},set:function(t){this._shadowAlpha=Nh(+t,0,1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this._blurX},set:function(t){this._blurX=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this._blurY},set:function(t){this._blurY=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this._knockout},set:function(t){this._knockout=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=Nh(0|t,0,15)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){this._strength=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){null===(t=yb(t))?this.sec.throwError("TypeError",kb.NullPointerError,"type"):t===$N.INNER||t===$N.OUTER?this._type=t:this._type=$N.FULL},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new this.sec.flash.filters.BevelFilter(this._distance,this._angle,this._highlightColor,this._highlightAlpha,this._shadowColor,this._shadowAlpha,this._blurX,this._blurY,this._strength,this._quality,this._type,this._knockout)},e.prototype.toAwayObject=function(){return this},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(KN),eF=function(t){function e(e,n,i,r,o,a,s,l,u,c,h){void 0===e&&(e=4),void 0===n&&(n=45),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=4),void 0===s&&(s=4),void 0===l&&(l=1),void 0===u&&(u=1),void 0===c&&(c="inner"),void 0===h&&(h=!1);var p=t.call(this)||this;return p.distance=e,p.angle=n,WN.sanitize(i?i.value:null,r?r.value:null,o?o.value:null),p._colors=WN.colors,p._alphas=WN.alphas,p._ratios=WN.ratios,p.blurX=a,p.blurY=s,p.strength=l,p.quality=u,p.type=c,p.knockout=h,p}return o(e,t),e.FromUntyped=function(t,e){for(var n=[],i=[],r=0;r<t.colors.length;r++){var o=t.colors[r];n.push(o>>>8),i.push(255&o)}var a=$N.OUTER;t.onTop?a=$N.FULL:t.inner&&(a=$N.INNER);var s=180*t.angle/Math.PI;return new e.flash.filters.GradientGlowFilter(t.distance,s,this.sec.createArrayUnsafe(n),this.sec.createArrayUnsafe(i),this.sec.createArrayUnsafe(t.ratios),t.blurX,t.blurY,t.strength,t.quality,a,t.knockout)},Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(t){this._distance=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=+t%360},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colors",{get:function(){return this.sec.createArrayUnsafe(this._colors.concat())},set:function(t){ap(t)&&this.sec.throwError("TypeError",kb.NullPointerError,"colors"),this._colors=WN.sanitizeColors(t.value);var e=this._colors.length;this._alphas=WN.sanitizeAlphas(this._alphas,e,e),this._ratios=WN.sanitizeRatios(this._ratios,e,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphas",{get:function(){return this.sec.createArrayUnsafe(this._alphas.concat())},set:function(t){ap(t)&&this.sec.throwError("TypeError",kb.NullPointerError,"alphas"),WN.sanitize(this._colors,t.value,this._ratios),this._colors=WN.colors,this._alphas=WN.alphas,this._ratios=WN.ratios},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ratios",{get:function(){return this.sec.createArrayUnsafe(this._ratios.concat())},set:function(t){ap(t)&&this.sec.throwError("TypeError",kb.NullPointerError,"ratios"),WN.sanitize(this._colors,this._alphas,t.value),this._colors=WN.colors,this._alphas=WN.alphas,this._ratios=WN.ratios},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this._blurX},set:function(t){this._blurX=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this._blurY},set:function(t){this._blurY=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this._knockout},set:function(t){this._knockout=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=Nh(0|t,0,15)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){this._strength=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){null===(t=yb(t))?this.sec.throwError("TypeError",kb.NullPointerError,"type"):t===$N.INNER||t===$N.OUTER?this._type=t:this._type=$N.FULL},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new this.sec.flash.filters.GradientGlowFilter(this._distance,this._angle,this.colors,this.alphas,this.ratios,this._blurX,this._blurY,this._strength,this._quality,this._type,this._knockout)},e.classInitializer=null,e}(KN),nF=function(t){function e(e,n,i,r,o,a,s,l,u,c,h){void 0===e&&(e=4),void 0===n&&(n=45),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=4),void 0===s&&(s=4),void 0===l&&(l=1),void 0===u&&(u=1),void 0===c&&(c="inner"),void 0===h&&(h=!1);var p=t.call(this)||this;return p.distance=e,p.angle=n,WN.sanitize(i?i.value:null,r?r.value:null,o?o.value:null),p._colors=WN.colors,p._alphas=WN.alphas,p._ratios=WN.ratios,p.blurX=a,p.blurY=s,p.strength=l,p.quality=u,p.type=c,p.knockout=h,p}return o(e,t),e.FromUntyped=function(t,e){for(var n=[],i=[],r=0;r<t.colors.length;r++){var o=t.colors[r];n.push(o>>>8),i.push(255&o)}var a=$N.OUTER;t.onTop?a=$N.FULL:t.inner&&(a=$N.INNER);var s=180*t.angle/Math.PI;return new e.flash.filters.GradientBevelFilter(t.distance,s,e.createArrayUnsafe(n),e.createArrayUnsafe(i),e.createArrayUnsafe(t.ratios),t.blurX,t.blurY,t.strength,t.quality,a,t.knockout)},Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(t){this._distance=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=+t%360},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colors",{get:function(){return this.sec.createArrayUnsafe(this._colors.concat())},set:function(t){ap(t)&&this.sec.throwError("TypeError",kb.NullPointerError,"colors"),this._colors=WN.sanitizeColors(t.value);var e=this._colors.length;this._alphas=WN.sanitizeAlphas(this._alphas,e,e),this._ratios=WN.sanitizeRatios(this._ratios,e,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphas",{get:function(){return this.sec.createArrayUnsafe(this._alphas.concat())},set:function(t){ap(t)&&this.sec.throwError("TypeError",kb.NullPointerError,"alphas"),WN.sanitize(this._colors,t.value,this._ratios),this._colors=WN.colors,this._alphas=WN.alphas,this._ratios=WN.ratios},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ratios",{get:function(){return this.sec.createArrayUnsafe(this._ratios.concat())},set:function(t){ap(t)&&this.sec.throwError("TypeError",kb.NullPointerError,"ratios"),WN.sanitize(this._colors,this._alphas,t.value),this._colors=WN.colors,this._alphas=WN.alphas,this._ratios=WN.ratios},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this._blurX},set:function(t){this._blurX=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this._blurY},set:function(t){this._blurY=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this._knockout},set:function(t){this._knockout=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=Nh(0|t,0,15)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){this._strength=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){null===(t=yb(t))?this.sec.throwError("TypeError",kb.NullPointerError,"type"):t===$N.INNER||t===$N.OUTER?this._type=t:this._type=$N.FULL},enumerable:!1,configurable:!0}),e.prototype.toAwayObject=function(){return{filterName:"bevel",distance:this._distance,angle:this._angle,blurX:this._blurX,blurY:this._blurY,strength:this._strength,quality:this._quality,type:this._type,knockout:this._knockout,colors:this._colors,alphas:this._alphas,ratios:this._ratios}},e.prototype.clone=function(){return new this.sec.flash.filters.GradientBevelFilter(this._distance,this._angle,this.colors,this.alphas,this.ratios,this._blurX,this._blurY,this._strength,this._quality,this._type,this._knockout)},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(KN),iF=function(t){function e(e,n,i){void 0===e&&(e=4),void 0===n&&(n=4),void 0===i&&(i=1);var r=t.call(this)||this;return r.filterName="blur",r.blurX=e,r.blurY=n,r.quality=i,r}return o(e,t),e.FromUntyped=function(t,e){return new e.flash.filters.BlurFilter(t.blurX,t.blurY,t.quality)},Object.defineProperty(e.prototype,"blurX",{get:function(){return this._blurX},set:function(t){this._blurX=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this._blurY},set:function(t){this._blurY=Nh(+t,0,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=Nh(0|t,0,15)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new this.sec.flash.filters.BlurFilter(this._blurX,this._blurY,this._quality)},e.prototype.toAwayObject=function(){return this},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(KN),rF=function(t){function e(e,n,i,r,o,a,s,l,u){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=null),void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=!0),void 0===s&&(s=!0),void 0===l&&(l=0),void 0===u&&(u=0);var c=t.call(this)||this;return c.matrixX=e,c.matrixY=n,i?c.matrix=i:c._matrix=c._expandArray([],c._matrixX*c._matrixY),c.divisor=r,c.bias=o,c.preserveAlpha=a,c.clamp=s,c.color=l,c.alpha=u,c}return o(e,t),e.FromUntyped=function(t,e){return new e.flash.filters.ConvolutionFilter(t.matrixX,t.matrixY,t.matrix,t.divisor,t.bias,t.preserveAlpha,t.clamp,t.color>>>8,(255&t.color)/255)},e.prototype._expandArray=function(t,e,n){if(t)for(var i=t.length;i<e;)t[i++]=0;return t},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.sec.createArrayUnsafe(this._matrix.slice(0,this._matrixX*this._matrixY))},set:function(t){ap(t)&&this.sec.throwError("TypeError",kb.NullPointerError,"matrix");for(var e=t.value,n=this._matrixX*this._matrixY,i=Math.min(e.length,n),r=Array(i),o=0;o<i;o++)r[o]=ip(e[o]);this._expandArray(r,n),this._matrix=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrixX",{get:function(){return this._matrixX},set:function(t){var e=0|Nh(+t,0,15);this._matrixX!==e&&(this._matrixX=e,this._expandArray(this._matrix,e*this._matrixY))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrixY",{get:function(){return this._matrixY},set:function(t){var e=0|Nh(+t,0,15);this._matrixY!==e&&(this._matrixY=e,this._expandArray(this._matrix,e*this._matrixX))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"divisor",{get:function(){return this._divisor},set:function(t){this._divisor=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bias",{get:function(){return this._bias},set:function(t){this._bias=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preserveAlpha",{get:function(){return this._preserveAlpha},set:function(t){this._preserveAlpha=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clamp",{get:function(){return this._clamp},set:function(t){this._clamp=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=Nh(+t,0,1)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new this.sec.flash.filters.ConvolutionFilter(this._matrixX,this._matrixY,this.matrix,this._divisor,this._bias,this._preserveAlpha,this._clamp,this._color,this._alpha)},e.classInitializer=null,e}(KN),oF=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return e?n.matrix=e:n._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],n}return o(e,t),e.FromUntyped=function(t,e){return new e.flash.filters.ColorMatrixFilter(e.createArrayUnsafe(t.matrix))},e.prototype._serialize=function(t){var e=this._matrix;t.ensureAdditionalCapacity(4*(e.length+1)),t.writeIntUnsafe(6);for(var n=0;n<e.length;n++)t.writeFloatUnsafe(e[n])},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.sec.createArrayUnsafe(this._matrix.concat())},set:function(t){ap(t)&&this.sec.throwError("TypeError",kb.NullPointerError,"matrix");for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=t.value,i=0,r=Math.min(n.length,20);i<r;i++)e[i]=ip(n[i]);this._matrix=e},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new this.sec.flash.filters.ColorMatrixFilter(this.sec.createArrayUnsafe(this._matrix))},e.prototype.toAwayObject=function(){return{filterName:"colorMatrix",matrix:this._matrix}},e.classInitializer=null,e}(KN),aF=((XN={})[ld.DROPSHADOW]=JN,XN[ld.GLOW]=ZN,XN[ld.BEVEL]=tF,XN[ld.GRADIENTGLOW]=eF,XN[ld.GRADIENTBEVEL]=nF,XN[ld.BLUR]=iF,XN[ld.CONVOLUTION]=rF,XN[ld.COLORMATRIX]=oF,XN),sF=function(){function t(){}return t.FromUntyped=function(t,e){return t&&aF[t.type]?aF[t.type].FromUntyped(t,e):null},t}(),lF=new O,uF=function(t){return isNaN(t)?0:t===1/0||t===-1/0?-107374182.4:t},cF=function(t){function e(){var n=t.call(this)||this;return n._forceWidth=0,n._forceHeight=0,n.$lazyConstructProperty={},n._onNodeClearDelegate=function(t){return n._onNodeClear(t)},e.applyLazy(n),n._filters=n._filters||n.sec.createArrayUnsafe([]),n._blockedByScript=!1,n._ctBlockedByScript=!1,n._visibilityByScript=!1,n.adaptee=n.adaptee||n.createAdaptee(),n.adaptee.mouseEnabled=!1,n._stage=n.activeStage,n.eventMappingExtern[UN.ENTER_FRAME]="",n.eventMappingExtern[UN.FRAME_CONSTRUCTED]="",n.eventMappingExtern[UN.EXIT_FRAME]="",n.eventMappingExtern[UN.RENDER]="",n.eventMappingExtern[UN.REMOVED_FROM_STAGE]="",n.eventMappingExtern[UN.REMOVED]="",n.eventMappingExtern[UN.ADDED_TO_STAGE]="",n.eventMappingExtern[UN.ADDED]="",n._transform=new n.sec.flash.geom.Transform(n.adaptee.transform),n}return o(e,t),e.defineLazy=function(t,e,n){return!t._adaptee&&(t.$lazyConstructProperty||(t.$lazyConstructProperty={}),t.$lazyConstructProperty[e]=n,!0)},e.applyLazy=function(t){if(t.$lazyConstructProperty){for(var e in t.$lazyConstructProperty)e in t&&(t[e]=t.$lazyConstructProperty[e]);t.$lazyConstructProperty=null}},e.prototype.toString=function(){return"[object ".concat(this.classInfo.instanceInfo.multiname.name,"]")},e.prototype.applySymbol=function(){},e.prototype.dispatchStaticEvent=function(t,e){void 0===e&&(e=null),qN.events[t]||(qN.events[t]=new this.sec.flash.events.Event(t)),qN.events[t].target=e,this.dispatchEvent(qN.events[t])},e.prototype.dispatch_ADDED_TO_STAGE=function(t){void 0===t&&(t=!1),t&&(qN.events[UN.ADDED_TO_STAGE]||(qN.events[UN.ADDED_TO_STAGE]=new this.sec.flash.events.Event(UN.ADDED_TO_STAGE)),qN.events[UN.ADDED_TO_STAGE].target=this,this.dispatchEvent(qN.events[UN.ADDED_TO_STAGE]))},e.prototype.dispatch_REMOVED_FROM_STAGE=function(t){void 0===t&&(t=!1),t&&(qN.events[UN.REMOVED_FROM_STAGE]||(qN.events[UN.REMOVED_FROM_STAGE]=new this.sec.flash.events.Event(UN.REMOVED_FROM_STAGE)),qN.events[UN.REMOVED_FROM_STAGE].target=this,this.dispatchEvent(qN.events[UN.REMOVED_FROM_STAGE]))},e.prototype.dispatchStaticBroadCastEvent=function(t){qN.events[t]||(qN.events[t]=new this.sec.flash.events.Event(t)),YN.getInstance().dispatchEvent(qN.events[t])},e.prototype.updateFilters=function(t){var e=[];if(t&&t.length)for(var n=0,i=t;n<i.length;n++){var r=i[n],o=sF.FromUntyped(r,this.sec);o&&e.push(o)}this.filters=this.sec.createArrayUnsafe(e)},e.prototype._onNodeClear=function(t){this._node.removeEventListener(h.CLEAR,this._onNodeClearDelegate),this._node=null},e.prototype.createAdaptee=function(){return new Ws},e.prototype.mapAdaptee=function(t){return t&&(t.partitionClass=yr,t.adapter=this),t},Object.defineProperty(e.prototype,"activeStage",{get:function(){return this.sec.flash.display.DisplayObject.axClass._activeStage},enumerable:!1,configurable:!0}),e.prototype.dispatchEventRecursive=function(t){this.dispatchEvent(t)},Object.defineProperty(e.prototype,"node",{get:function(){return this._node||(this._node=Cf.instance().view.getNode(this._adaptee),this._node.addEventListener(h.CLEAR,this._onNodeClearDelegate)),this._node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},set:function(t){this._adaptee!=t&&(this._adaptee&&(this._adaptee.adapter=null),this._adaptee=this.mapAdaptee(t))},enumerable:!1,configurable:!0}),e.prototype.initAdapter=function(){},e.prototype.isBlockedByScript=function(){return this._blockedByScript},e.prototype.isVisibilityByScript=function(){return this._visibilityByScript},e.prototype.isColorTransformByScript=function(){return this._ctBlockedByScript},e.prototype.freeFromScript=function(){this._blockedByScript=!1,this._ctBlockedByScript=!1,this._visibilityByScript=!1},e.prototype.clone=function(){if(!this._symbol)throw"_symbol not defined when cloning movieclip";var t=XM(this._symbol,this._symbol.symbolClass);return t.axInitializer(),t.loaderInfo=this.loaderInfo,this.adaptee.copyTo(t.adaptee),t},e.prototype.dispose=function(){throw new u},e.prototype.disposeValues=function(){this.adaptee=null},Object.defineProperty(e.prototype,"accessibilityProperties",{get:function(){return Et.throwPIR("playerglobals/display/DisplayObject","get accessibilityProperties",""),null},set:function(t){Et.throwPIR("playerglobals/display/DisplayObject","set accessibilityProperties","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.adaptee.alpha},set:function(t){this._ctBlockedByScript=!0,this.adaptee.alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._adaptee.blendMode},set:function(t){this._adaptee.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendShader",{set:function(t){Et.throwPIR("playerglobals/display/DisplayObject","set blendShader","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cacheAsBitmap",{get:function(){return this.adaptee.cacheAsBitmap},set:function(t){this.adaptee.cacheAsBitmap=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(t){this._filters!=t&&(this._filters=t,this._adaptee.filters=null==t?void 0:t.value.map((function(t){return t.toAwayObject()})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){if(0!=this._forceHeight)return this._forceHeight;if(this.adaptee.isAsset(Ch))return this.adaptee.height;if(!this.node.partition)return console.warn("Trying to get Display.height on orphan child!"),100;var t=this.getBoundsInternal(this.parent||this._stage);return null==t?0:Math.round(20*t.height)/20},set:function(t){isNaN(t)||(t=uF(t),t=Math.round(20*t)/20,this._blockedByScript=!0,this.adaptee.isAsset(Ch)?this.adaptee.height=t:this.node.partition?Cr.getInstance().getBoundsPicker(this.node.partition).height=t:console.warn("Trying to set Display.height on orphan child!"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaderInfo",{get:function(){var t;return this._loaderInfo||(null===(t=this.root)||void 0===t?void 0:t._loaderInfo)},set:function(t){this._loaderInfo=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){var t;return(null===(t=this.adaptee.scriptMask)||void 0===t?void 0:t.adapter)||null},set:function(t){this.adaptee.scriptMask=(null==t?void 0:t.adaptee)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metaData",{get:function(){return Et.throwPIR("playerglobals/display/DisplayObject","get metaData",""),null},set:function(t){Et.throwPIR("playerglobals/display/DisplayObject","set metaData","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){return lF.setTo(this._stage.mouseX,this._stage.mouseY),this.node.globalToLocal(lF,lF),Math.floor(lF.x)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){return lF.setTo(this._stage.mouseX,this._stage.mouseY),this.node.globalToLocal(lF,lF),Math.floor(lF.y)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.adaptee.name},set:function(t){this.adaptee.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opaqueBackground",{get:function(){return Et.throwPIR("playerglobals/display/DisplayObject","get opaqueBackground",""),null},set:function(t){Et.throwPIR("playerglobals/display/DisplayObject","set opaqueBackground","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return null==this.adaptee.parent||null==this.adaptee.parent.adapter||this.adaptee.parent.adapter==this.adaptee.parent?null:this.adaptee.parent.adapter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var t=this._stage.getChildAt(0);return t||(console.log("DisplayObject: could not get root"),null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.adaptee.rotationZ},set:function(t){this._blockedByScript=!0;var e=isNaN(t)?0:isFinite(t)?t%360:-8;e<-180?e+=360:e>180&&(e-=360),this.adaptee.rotationZ=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this.adaptee.rotationX},set:function(t){this._blockedByScript=!0,this.adaptee.rotationX=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{get:function(){return this.adaptee.rotationY},set:function(t){this._blockedByScript=!0,this.adaptee.rotationY=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this.adaptee.rotationZ},set:function(t){this._blockedByScript=!0,this.adaptee.rotationZ=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale9Grid",{get:function(){return new this.sec.flash.geom.Rectangle(this.adaptee.scale9Grid)},set:function(t){this.adaptee.scale9Grid=t.adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this.adaptee.scaleX},set:function(t){this._blockedByScript=!0,this.adaptee.scaleX=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this.adaptee.scaleY},set:function(t){this._blockedByScript=!0,this.adaptee.scaleY=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleZ",{get:function(){return this.adaptee.scaleZ},set:function(t){this._blockedByScript=!0,this.adaptee.scaleZ=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollRect",{get:function(){return this.adaptee.scrollRect?new this.sec.flash.geom.Rectangle(this.adaptee.scrollRect):null},set:function(t){this.adaptee.scrollRect=t?t.adaptee:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this._isAVMStage?this:this.adaptee.parent?this.adaptee.parent.adapter.stage:null},set:function(t){this._stage=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){return this._ctBlockedByScript=!0,this._transform=new this.sec.flash.geom.Transform(this.adaptee.transform)},set:function(t){Et.throwPIR("playerglobals/display/DisplayObject","set transform","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._adaptee.visible},set:function(t){this._visibilityByScript=!0,this._adaptee.visible=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){if(0!=this._forceWidth)return this._forceWidth;if(this.adaptee.isAsset(Ch))return this.adaptee.width;if(!this.node.partition)return console.warn("Trying to get Display.width on orphan child!"),100;var t=this.getBoundsInternal(this.parent||this._stage);return null==t?0:Math.round(20*t.width)/20},set:function(t){isNaN(t)||(t=uF(t),this.node.partition?(t=Math.round(20*t)/20,this._blockedByScript=!0,this.adaptee.isAsset(Ch)?this.adaptee.width=t:Cr.getInstance().getBoundsPicker(this.node.partition).width=t):console.warn("Trying to set Display.width on orphan child!"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._adaptee.textOffsetX?this._adaptee._transform._matrix3D._rawData[12]+this._adaptee.textOffsetX*this.adaptee.scaleX:this._adaptee._transform._matrix3D._rawData[12]},set:function(t){t=uF(t),e.defineLazy(this,"x",t)||(this._blockedByScript=!0,this._adaptee.textOffsetX&&(t-=this._adaptee.textOffsetX*this.adaptee.scaleX),this._adaptee.x=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._adaptee.textOffsetY?this._adaptee._transform._matrix3D._rawData[13]+this._adaptee.textOffsetY*this.adaptee.scaleY:this._adaptee._transform._matrix3D._rawData[13]},set:function(t){t=uF(t),e.defineLazy(this,"y",t)||(this._blockedByScript=!0,this._adaptee.textOffsetY&&(t-=this._adaptee.textOffsetY*this.adaptee.scaleY),this._adaptee.y=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._adaptee._transform._matrix3D._rawData[14]},set:function(t){t=uF(t),this._blockedByScript=!0,this._adaptee.z=t},enumerable:!1,configurable:!0}),e.prototype.getBounds=function(t){var e=this.getBoundsInternal(t,!0),n=this.sec.flash.geom.Rectangle;return e?new n(e.x,e.y,e.width,e.height):new n(6710886.4,6710886.4,0,0)},e.prototype.getBoundsInternal=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),t||(t=this),this._boundsPicker=Cr.getInstance().getBoundsPicker(this.node.partition),this._boundsPicker.getBoxBounds(Cf.instance().view.getNode(t.adaptee),e,!0)},e.prototype.getRect=function(t){var e=this.getBoundsInternal(t),n=this.sec.flash.geom.Rectangle;return e?new n(e.x,e.y,e.width,e.height):new n},e.prototype.globalToLocal=function(t){return new this.sec.flash.geom.Point(this.node.globalToLocal(t.adaptee))},e.prototype.globalToLocal3D=function(t){return Et.throwPIR("playerglobals/display/DisplayObject","globalToLocal3D",""),new this.sec.flash.geom.Vector3D},e.prototype.hitTestObject=function(t){return Cr.getInstance().getBoundsPicker(this.node.partition).hitTestObject(Cr.getInstance().getBoundsPicker(Cf.instance().view.getNode(t.adaptee).partition))},e.prototype.hitTestPoint=function(t,e,n){return void 0===n&&(n=!1),Cr.getInstance().getBoundsPicker(this.node.partition).hitTestPoint(t,e,n)},e.prototype.local3DToGlobal=function(t){return Et.throwPIR("playerglobals/display/DisplayObject","local3DToGlobal",""),new this.sec.flash.geom.Point},e.prototype.localToGlobal=function(t){return new this.sec.flash.geom.Point(this.node.localToGlobal(t.adaptee))},e._activeStage=null,e}(zN),hF=function(t){function e(e,n,i,r,o,a,s,l,u,c,h,p,d,f){void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===a&&(a=NaN),void 0===s&&(s=NaN),void 0===p&&(p=!1),void 0===d&&(d=!1),void 0===f&&(f=!1);var _=t.call(this,e,n,i)||this;return _._localX=a,_._localY=s,_._ctrlKey=p,_._altKey=d,_._shiftKey=f,_}return o(e,t),Object.defineProperty(e.prototype,"altKey",{get:function(){return this._altKey},set:function(t){this._altKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ctrlKey",{get:function(){return this._ctrlKey},set:function(t){this._ctrlKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPrimaryTouchPoint",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRelatedObjectInaccessible",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localX",{get:function(){return this._localX/20|0},set:function(t){this._localX=20*t|0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localY",{get:function(){return this._localY/20|0},set:function(t){this._localY=20*t|0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pressure",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relatedObject",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shiftKey",{get:function(){return this._shiftKey},set:function(t){this._shiftKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeX",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeY",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageX",{get:function(){return this._stageX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageY",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"touchPointID",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return null},e.prototype.toString=function(){return""},e.prototype.updateAfterEvent=function(){},e.prototype.fillFromAway=function(t){this.adaptee=t,this.target=t.target.adapter||this.sec.flash.display.DisplayObject.axClass._activeStage,this.currentTarget=t.currentTarget.adapter||this.sec.flash.display.DisplayObject.axClass._activeStage,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey;var e=Cf.instance().unprojectPoint(new O(t.screenX,t.screenY),this.target.stage.adaptee);this._stageX=e.x,this._stageY=e.y},e.TOUCH_BEGIN="touchBegin",e.TOUCH_END="touchEnd",e.TOUCH_MOVE="touchMove",e.TOUCH_OUT="touchOut",e.TOUCH_OVER="touchOver",e.TOUCH_ROLL_OUT="touchRollOut",e.TOUCH_ROLL_OVER="touchRollOver",e.TOUCH_TAP="touchTap",e}(UN),pF=function(t){function e(e,n,i,r,o,a,s,l,u){void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=!1),void 0===l&&(l=!1),void 0===u&&(u=!1);var c=t.call(this,e,n,i)||this;return c._charCode=r>>>0,c._keyCode=o>>>0,c._keyLocation=a>>>0,c._ctrlKey=!!s,c._altKey=!!l,c._shiftKey=!!u,c}return o(e,t),Object.defineProperty(e.prototype,"charCode",{get:function(){return this._charCode},set:function(t){this._charCode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keyCode",{get:function(){return this._keyCode},set:function(t){this._keyCode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keyLocation",{get:function(){return this._keyLocation},set:function(t){this._keyLocation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ctrlKey",{get:function(){return this._ctrlKey},set:function(t){this._ctrlKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"altKey",{get:function(){return this._altKey},set:function(t){this._altKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shiftKey",{get:function(){return this._shiftKey},set:function(t){this._shiftKey=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.charCode,this.keyCode,this.keyLocation,this.ctrlKey,this.altKey,this.shiftKey)},e.prototype.toString=function(){return this.formatToString("KeyboardEvent","type","bubbles","cancelable","eventPhase","charCode","keyCode","keyLocation","ctrlKey","altKey","shiftKey")},e.prototype.updateAfterEvent=function(){this.sec.player.requestRender()},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.KEY_DOWN="keyDown",e.KEY_UP="keyUp",e}(UN),dF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"isRelatedObjectInaccessible",{get:function(){return console.log("isRelatedObjectInaccessible not implemented yet in flash/FocusEvent"),!1},set:function(t){console.log("isRelatedObjectInaccessible not implemented yet in flash/FocusEvent")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keyCode",{get:function(){return console.log("keyCode not implemented yet in flash/FocusEvent"),0},set:function(t){console.log("keyCode not implemented yet in flash/FocusEvent")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relatedObject",{get:function(){return console.log("relatedObject not implemented yet in flash/FocusEvent"),null},set:function(t){console.log("relatedObject not implemented yet in flash/FocusEvent")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shiftKey",{get:function(){return console.log("shiftKey not implemented yet in flash/FocusEvent"),!1},set:function(t){console.log("shiftKey not implemented yet in flash/FocusEvent")},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return console.log("clone not implemented yet in flash/IOErrorEvent"),null},e.prototype.toString=function(){return console.log("toString not implemented yet in flash/FocusEvent"),""},e.prototype.fillFromAway=function(t){this.adaptee=t,this.target=t.target},e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e.KEY_FOCUS_CHANGE="keyFocusChange",e.MOUSE_FOCUS_CHANGE="mouseFocusChange",e}(UN),fF=function(t){function e(){var e=t.call(this)||this;return e._listnersCallbacksByType={},e.adaptee.mouseEnabled=!0,e.eventMappingDummys[QN.RIGHT_MOUSE_UP]="InteractiveObject:MouseEvent.RIGHT_MOUSE_UP",e.eventMappingDummys[QN.RIGHT_MOUSE_DOWN]="InteractiveObject:MouseEvent.RIGHT_MOUSE_DOWN",e.eventMappingDummys[QN.RIGHT_MOUSE_DOWN]="InteractiveObject:MouseEvent.RIGHT_MOUSE_DOWN",e.eventMappingDummys[QN.RIGHT_CLICK]="InteractiveObject:MouseEvent.RIGHT_CLICK",e.eventMappingDummys[QN.MIDDLE_MOUSE_UP]="InteractiveObject:MouseEvent.MIDDLE_MOUSE_UP",e.eventMappingDummys[QN.MIDDLE_MOUSE_DOWN]="InteractiveObject:MouseEvent.MIDDLE_MOUSE_DOWN",e.eventMappingDummys[QN.MIDDLE_CLICK]="InteractiveObject:MouseEvent.MIDDLE_CLICK",e._keyUpCallbackDelegate=function(t){return e.keyUpCallback(t)},e.eventMapping[pF.KEY_UP]={adaptedType:"",addListener:e.initKeyUpListener,removeListener:e.removeKeyUpListener,callback:e._keyUpCallbackDelegate},e._keyDownCallbackDelegate=function(t){return e.keyDownCallback(t)},e.eventMapping[pF.KEY_DOWN]={adaptedType:"",addListener:e.initKeyDownListener,removeListener:e.removeKeyDownListener,callback:e._keyDownCallbackDelegate},e._touchCallbackDelegate=function(t){return e.touchCallback(t)},e.eventMappingInvert[Eh.TOUCH_END]=hF.TOUCH_END,e.eventMapping[hF.TOUCH_END]={adaptedType:Eh.TOUCH_END,addListener:e.initListener,removeListener:e.removeListener,callback:e._touchCallbackDelegate},e.eventMappingInvert[Eh.TOUCH_OVER]=hF.TOUCH_OVER,e.eventMapping[hF.TOUCH_OVER]={adaptedType:Eh.TOUCH_OVER,addListener:e.initListener,removeListener:e.removeListener,callback:e._touchCallbackDelegate},e.eventMappingInvert[Eh.TOUCH_OUT]=hF.TOUCH_OUT,e.eventMapping[hF.TOUCH_OUT]={adaptedType:Eh.TOUCH_OUT,addListener:e.initListener,removeListener:e.removeListener,callback:e._touchCallbackDelegate},e.eventMappingInvert[Eh.TOUCH_MOVE]=hF.TOUCH_MOVE,e.eventMapping[hF.TOUCH_MOVE]={adaptedType:Eh.TOUCH_MOVE,addListener:e.initListener,removeListener:e.removeListener,callback:e._touchCallbackDelegate},e.eventMappingInvert[Eh.TOUCH_BEGIN]=hF.TOUCH_BEGIN,e.eventMapping[hF.TOUCH_BEGIN]={adaptedType:Eh.TOUCH_BEGIN,addListener:e.initListener,removeListener:e.removeListener,callback:e._touchCallbackDelegate},e.eventMappingInvert[Eh.TOUCH_TAP]=hF.TOUCH_TAP,e.eventMapping[hF.TOUCH_TAP]={adaptedType:Eh.TOUCH_TAP,addListener:e.initListener,removeListener:e.removeListener,callback:e._touchCallbackDelegate},e._mouseCallbackDelegate=function(t){return e.mouseCallback(t)},e.eventMappingInvert[ml.MOUSE_WHEEL]=QN.MOUSE_WHEEL,e.eventMapping[QN.MOUSE_WHEEL]={adaptedType:ml.MOUSE_WHEEL,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e.eventMappingInvert[ml.MOUSE_UP]=QN.MOUSE_UP,e.eventMapping[QN.MOUSE_UP]={adaptedType:ml.MOUSE_UP,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e.eventMappingInvert[ml.MOUSE_UP_OUTSIDE]=QN.RELEASE_OUTSIDE,e.eventMapping[QN.RELEASE_OUTSIDE]={adaptedType:ml.MOUSE_UP_OUTSIDE,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e.eventMappingInvert[ml.MOUSE_OVER]=QN.MOUSE_OVER,e.eventMapping[QN.MOUSE_OVER]={adaptedType:ml.MOUSE_OVER,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e.eventMappingInvert[ml.MOUSE_OUT]=QN.MOUSE_OUT,e.eventMapping[QN.MOUSE_OUT]={adaptedType:ml.MOUSE_OUT,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e.eventMappingInvert[ml.MOUSE_MOVE]=QN.MOUSE_MOVE,e.eventMapping[QN.MOUSE_MOVE]={adaptedType:ml.MOUSE_MOVE,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e.eventMappingInvert[ml.MOUSE_DOWN]=QN.MOUSE_DOWN,e.eventMapping[QN.MOUSE_DOWN]={adaptedType:ml.MOUSE_DOWN,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e.eventMappingInvert[ml.DOUBLE_CLICK]=QN.DOUBLE_CLICK,e.eventMapping[QN.DOUBLE_CLICK]={adaptedType:ml.DOUBLE_CLICK,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e.eventMappingInvert[ml.CLICK]=QN.CLICK,e.eventMapping[QN.CLICK]={adaptedType:ml.CLICK,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e.eventMappingInvert[ml.ROLL_OUT]=QN.ROLL_OUT,e.eventMapping[QN.ROLL_OUT]={adaptedType:ml.ROLL_OUT,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e.eventMappingInvert[ml.ROLL_OVER]=QN.ROLL_OVER,e.eventMapping[QN.ROLL_OVER]={adaptedType:ml.ROLL_OVER,addListener:e.initListener,removeListener:e.removeListener,callback:e._mouseCallbackDelegate},e._focusCallbackDelegate=function(t){return e.focusCallback(t)},e.eventMappingInvert[Ih.FOCUS_OUT]=dF.FOCUS_OUT,e.eventMapping[dF.FOCUS_OUT]={adaptedType:Ih.FOCUS_OUT,addListener:e.initListener,removeListener:e.removeListener,callback:e._focusCallbackDelegate},e.eventMappingInvert[Ih.FOCUS_IN]=dF.FOCUS_IN,e.eventMapping[dF.FOCUS_IN]={adaptedType:Ih.FOCUS_IN,addListener:e.initListener,removeListener:e.removeListener,callback:e._focusCallbackDelegate},e}return o(e,t),e.prototype.initKeyUpListener=function(t,e,n){if(!this._keyUpListeners)return this._keyUpListeners=[n],document.addEventListener("keyup",e),void document.addEventListener("keypress",e);this._keyUpListeners.push(n)},e.prototype.removeKeyUpListener=function(t,e,n){if(this._keyUpListeners){var i=this._keyUpListeners.indexOf(n);if(-1!=i){if(1==this._keyUpListeners.length)return this._keyUpListeners=null,void document.removeEventListener("keyup",e);this._keyUpListeners.splice(i,1)}}},e.prototype.keyUpCallback=function(t){if(void 0===t&&(t=null),!Cf.instance().isPaused){window.event&&(window.event.returnValue=!1),t.preventDefault?t.preventDefault():t.returnValue=!1;var e=new this.sec.flash.events.KeyboardEvent(pF.KEY_UP,!0,!1,t.charCode,t.keyCode,t.location,t.ctrlKey,t.altKey,t.shiftKey);return this.dispatchEvent(e),!1}},e.prototype.initKeyDownListener=function(t,e,n){if(!this._keyDownListeners)return this._keyDownListeners=[n],document.addEventListener("keydown",e),void document.addEventListener("keypress",e);this._keyDownListeners.push(n)},e.prototype.removeKeyDownListener=function(t,e,n){if(this._keyDownListeners){var i=this._keyDownListeners.indexOf(n);if(-1!=i){if(1==this._keyDownListeners.length)return this._keyDownListeners=null,document.removeEventListener("keydown",e),void document.removeEventListener("keypress",e);this._keyDownListeners.splice(i,1)}}},e.prototype.keyDownCallback=function(t){if(void 0===t&&(t=null),!Cf.instance().isPaused){window.event&&(window.event.returnValue=!1),t.preventDefault?t.preventDefault():t.returnValue=!1;var e=new this.sec.flash.events.KeyboardEvent(pF.KEY_DOWN);return e.axInitializer(pF.KEY_DOWN),e.keyCode=t.keyCode,e.charCode=t.charCode,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.altKey=t.altKey,this.dispatchEvent(e),!1}},e.prototype.initListener=function(t,e,n){if(!this._listnersCallbacksByType[t])return this.adaptee.addEventListener(t,e),void(this._listnersCallbacksByType[t]=[n]);this._listnersCallbacksByType[t].push(n)},e.prototype.removeListener=function(t,e,n){if(this._listnersCallbacksByType[t]){var i=this._listnersCallbacksByType[t].indexOf(n);if(-1!=i){if(1==this._listnersCallbacksByType[t].length)return delete this._listnersCallbacksByType[t],void this.adaptee.removeEventListener(t,e);this._listnersCallbacksByType[t].splice(i,1)}}},e.prototype.mouseCallback=function(t){var e=new this.sec.flash.events.MouseEvent(this.eventMappingInvert[t.type]);e.fillFromAway(t),this.dispatchEvent(e,!0)},e.prototype.touchCallback=function(t){var e=new this.sec.flash.events.TouchEvent(this.eventMappingInvert[t.type]);e.fillFromAway(t),this.dispatchEvent(e,!0)},e.prototype.focusCallback=function(t){var e=new this.sec.flash.events.FocusEvent(this.eventMappingInvert[t.type]);e.fillFromAway(t),e.target=this,this.dispatchEvent(e,!0)},Object.defineProperty(e.prototype,"accessibilityImplementation",{get:function(){return Et.throwPIR("playerglobals/display/InteractiveObject","get accessibilityImplementation",""),null},set:function(t){Et.throwPIR("playerglobals/display/InteractiveObject","set accessibilityImplementation","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contextMenu",{get:function(){return Et.throwPIR("playerglobals/display/InteractiveObject","get contextMenu",""),null},set:function(t){Et.throwPIR("playerglobals/display/InteractiveObject","set contextMenu","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doubleClickEnabled",{get:function(){return Et.throwPIR("playerglobals/display/InteractiveObject","get doubleClickEnabled",""),!1},set:function(t){Et.throwPIR("playerglobals/display/InteractiveObject","set doubleClickEnabled","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"focusRect",{get:function(){return Et.throwPIR("playerglobals/display/InteractiveObject","get focusRect",""),null},set:function(t){Et.throwPIR("playerglobals/display/InteractiveObject","set focusRect","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return this.adaptee.mouseEnabled},set:function(t){this.adaptee.mouseEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needsSoftKeyboard",{get:function(){return Et.throwPIR("playerglobals/display/InteractiveObject","get needsSoftKeyboard",""),!1},set:function(t){Et.throwPIR("playerglobals/display/InteractiveObject","set needsSoftKeyboard","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"softKeyboardInputAreaOfInterest",{get:function(){return Et.throwPIR("playerglobals/display/InteractiveObject","get softKeyboardInputAreaOfInterest",""),null},set:function(t){Et.throwPIR("playerglobals/display/InteractiveObject","set softKeyboardInputAreaOfInterest","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabEnabled",{get:function(){return Et.throwPIR("playerglobals/display/InteractiveObject","get tabEnabled",""),!1},set:function(t){Et.throwPIR("playerglobals/display/InteractiveObject","set tabEnabled","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{get:function(){return Et.throwPIR("playerglobals/display/InteractiveObject","get tabIndex",""),0},set:function(t){Et.throwPIR("playerglobals/display/InteractiveObject","set tabIndex","")},enumerable:!1,configurable:!0}),e.prototype.requestSoftKeyboard=function(){return Et.throwPIR("playerglobals/display/InteractiveObject","requestSoftKeyboard",""),!1},e}(cF),_F=function(t){function e(){var e=t.call(this)||this;if(e.adaptee)for(var n=0;n<e.adaptee.numChildren;n++){var i=e.adaptee.getChildAt(n),r=i.adapter,o=r.executeConstructor;o&&(r.executeConstructor=null,o()),i.just_added_to_timeline&&-1!=i._sessionID&&r&&r.dispatchStaticEvent&&(r.dispatchStaticEvent("added",r),i.just_added_to_timeline=!1,i.hasDispatchedAddedToStage=i.isOnDisplayList(),i.hasDispatchedAddedToStage&&r.dispatchStaticEvent("addedToStage",r))}return e}return o(e,t),e.prototype.addTimelineObjectAtDepth=function(t,e){},e.prototype.getTimelineObjectAtDepth=function(t){return null},e.prototype.createAdaptee=function(){return new Js},e.prototype.clone=function(){if(!this._symbol)throw"_symbol not defined when cloning movieclip";var t=XM(this._symbol,this._symbol.symbolClass);return t.axInitializer(),this.adaptee.copyTo(t.adaptee),t},e.prototype.debugDisplayGraph=function(t){t.object=this,t.rectangle="x:"+this.x+", y:"+this.y+", width:"+this.width+", height:"+this.height,t.children={};var e=0;for(e=0;e<this._adaptee.numChildren;e++){var n=this._adaptee.getChildAt(e),i="child_"+e+" "+n.adapter.constructor.name;if(n.isAsset(Zs)||n.isAsset(Js))n.adapter&&(t.children[i]={},n.adapter.debugDisplayGraph(t.children[i]));else if(n.isAsset(ol))t.children[i]={},t.children[i].object=n.adapter,t.children[i].name=n.name,t.children[i].rectangle="x:"+n.x+", y:"+n.y;else if(n.isAsset(yl))t.children[i]={},t.children[i].object=n.adapter,t.children[i].name=n.name,t.children[i].rectangle="x:"+n.x+", y:"+n.y;else if(n.isAsset(Ch)){t.children[i]={},t.children[i].object=n.adapter,t.children[i].text=n.text,t.children[i].rectangle="x:"+n.x+", y:"+n.y;var r=Cr.getInstance().getBoundsPicker(Cf.instance().view.getNode(n).partition).getBoxBounds(Cf.instance().view.getNode(n));t.children[i].width=null==r?0:r.width,t.children[i].height=null==r?0:r.height}}},e.prototype.dispatch_ADDED_TO_STAGE=function(t){if(void 0===t&&(t=!1),t&&(qN.events[UN.ADDED_TO_STAGE]||(qN.events[UN.ADDED_TO_STAGE]=new this.sec.flash.events.Event(UN.ADDED_TO_STAGE)),qN.events[UN.ADDED_TO_STAGE].target=this,this.dispatchEvent(qN.events[UN.ADDED_TO_STAGE])),this._adaptee)for(var e=0;e<this._adaptee.numChildren;e++){var n=this._adaptee.getChildAt(e);n.adapter&&n.adapter.dispatchEventRecursive&&!n.hasDispatchedAddedToStage&&(n.hasDispatchedAddedToStage=!0,n.adapter.dispatch_ADDED_TO_STAGE(!0))}},e.prototype.dispatch_REMOVED_FROM_STAGE=function(t){if(void 0===t&&(t=!1),t&&(qN.events[UN.REMOVED_FROM_STAGE]||(qN.events[UN.REMOVED_FROM_STAGE]=new this.sec.flash.events.Event(UN.REMOVED_FROM_STAGE)),qN.events[UN.REMOVED_FROM_STAGE].target=this,this.dispatchEvent(qN.events[UN.REMOVED_FROM_STAGE])),this._adaptee)for(var e=0;e<this._adaptee.numChildren;e++){var n=this._adaptee.getChildAt(e);n.adapter&&n.adapter.dispatchEventRecursive&&n.hasDispatchedAddedToStage&&(n.hasDispatchedAddedToStage=!1,n.adapter.dispatch_REMOVED_FROM_STAGE(!0))}},Object.defineProperty(e.prototype,"mouseChildren",{get:function(){return this._adaptee.mouseChildren},set:function(t){this._adaptee.mouseChildren=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numChildren",{get:function(){return this._adaptee.numChildren},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabChildren",{get:function(){return Et.throwPIR("playerglobals/display/DisplayObjectContainer","get tabChildren",""),!1},set:function(t){Et.throwPIR("playerglobals/display/DisplayObjectContainer","set tabChildren","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textSnapshot",{get:function(){return Et.throwPIR("playerglobals/display/DisplayObjectContainer","get textSnapshot",""),null},enumerable:!1,configurable:!0}),e.prototype.addChild=function(t){var e=t.adaptee._sessionID>=0&&this.registerScriptObject,n=!(t.adaptee.parent==this.adaptee);return this._adaptee.addChild(t.adaptee),e&&this.registerScriptObject(t.adaptee),n&&(t.dispatchStaticEvent(UN.ADDED,t),this.adaptee.isOnDisplayList()&&t.dispatch_ADDED_TO_STAGE(!0)),sR.removeOrphan(t.adaptee),t},e.prototype.addChildAt=function(t,e){var n=t.adaptee._sessionID>=0&&this.registerScriptObject,i=!(t.adaptee.parent==this.adaptee);return this.adaptee.addChildAt(t.adaptee,e),n&&this.registerScriptObject(t.adaptee),i&&(t.dispatchStaticEvent(UN.ADDED),this.adaptee.isOnDisplayList()&&t.dispatch_ADDED_TO_STAGE(!0)),sR.removeOrphan(t.adaptee),t},e.prototype.areInaccessibleObjectsUnderPoint=function(t){return Et.throwPIR("playerglobals/display/DisplayObjectContainer","areInaccessibleObjectsUnderPoint",""),!1},e.prototype.contains=function(t){return this._adaptee.contains(t.adaptee)},e.prototype.getChildAt=function(t){var e=this._adaptee.getChildAt(t);e.adapter&&e.adapter!=e||((e.adapter=new this.sec.flash.display.Shape).adaptee=e);return e.adapter},e.prototype.getChildByName=function(t){return this._adaptee.getChildByName(t)?this._adaptee.getChildByName(t).adapter:null},e.prototype.getChildIndex=function(t){return this._adaptee.getChildIndex(t.adaptee)},e.prototype.getObjectsUnderPoint=function(t){for(var e=Cr.getInstance().getRaycastPicker(Cf.instance().view.getNode(this.adaptee).partition).getObjectsUnderPoint(new L(0,0,-1e3),new L(t.x,t.y,1e3)),n=[],i=e.length;i>0;){var r=e[--i];r instanceof qc?r=r.parent:r.isAsset(Zs)&&r.adapter==r&&(r.adapter=new this.sec.flash.display.Sprite,r.adapter.adaptee=r),n.push(r.adapter)}return n},e.prototype.removeChild=function(t){try{this._adaptee.removeChild(t.adaptee)}catch(t){throw this.sec.createError("ArgumentError",kb.NotAChildError)}return sR.addOrphan(t.adaptee),t},e.prototype.removeChildAt=function(t){var e=this._adaptee.removeChildAt(t).adapter;return sR.addOrphan(e.adaptee),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=2147483647),e>=this._adaptee.numChildren&&(e=this._adaptee.numChildren-1);for(var n=e-1;n>=t;n--)this.removeChildAt(n)},e.prototype.setChildIndex=function(t,e){this.setChildIndexInternal(t,e)},e.prototype.setChildIndexInternal=function(t,e){var n=this.adaptee.getChildIndex(t.adaptee);if(n<0)throw"[DisplayObjectContainer.setChildindex] \t\t\t\t- todo: throw as3 error when child is not child of this obj";if(n!=e){if(e>this._adaptee.numChildren)throw"[DisplayObjectContainer.setChildindex] - todo: throw as3 error when index is out of bounds";this.adaptee.setChildIndex(t.adaptee,e)}},e.prototype.stopAllMovieClips=function(){Et.throwPIR("playerglobals/display/DisplayObjectContainer","stopAllMovieClips","")},e.prototype.swapChildren=function(t,e){this._adaptee.swapChildren(t.adaptee,e.adaptee)},e.prototype.swapChildrenAt=function(t,e){this._adaptee.swapChildrenAt(t,e)},e}(fF),gF=function(t){function e(){var e=t.call(this)||this;return e.isDragging=!1,e.startDragPoint=new O,e.startDragMCPosition=new O,e.dragListenerDelegate=function(t){return e.dragListener(t)},e.stopDragDelegate=function(t){return e.stopDrag(t)},e._graphics=new e.sec.flash.display.Graphics(e._adaptee.graphics),!e.sec.flash.display.MovieClip.axIsType(e)&&e.adaptee.isAsset(yl)&&e.adaptee.transformToSprite(),e}return o(e,t),e.getNewSprite=function(t){if(e._sprites.length){var n=e._sprites.pop();return n.adaptee=t,n}return new e},e.prototype.initAdapter=function(){},e.prototype.setChildIndexInternal=function(e,n){var i=this._registeredChildNames&&this._registeredChildNames.indexOf(e.name)>-1;t.prototype.setChildIndexInternal.call(this,e,n),i&&this.registerScriptObject(e.adaptee)},e.prototype.createAdaptee=function(){var t=Zs.getNewSprite();return t.reset(),t},e.prototype.addTimelineChildAtDepth=function(t,e){t.reset();for(var n=this.adaptee.numChildren-1,i=n+1,r=0,o=n;o>=0;o--){var a=this.adaptee.getChildAt(o);if(-1==a._avmDepthID&&r++,a._avmDepthID>-1){if(a._avmDepthID<e){i=o+1+r;break}r=0,i=o}}return t._avmDepthID=e,t.just_added_to_timeline=!0,this.adaptee._sessionID_childs[t._sessionID]=t,this.adaptee.addChildAt(t,i)},e.prototype.removeTimelineChildAt=function(t){var e=this.adaptee._sessionID_childs[t];e&&(delete this.adaptee._sessionID_childs[t],this.adaptee.removeChild(e))},e.prototype.removeAllTimelineChilds=function(){var t=this.adaptee;for(var e in t._sessionID_childs){var n=t._sessionID_childs[e];n&&(delete t._sessionID_childs[e],t.removeChild(n))}},e.prototype.queueFrameScripts=function(t,e,n){n?_l.add_script_to_queue(this.adaptee,e):_l.add_script_to_queue_pass2(this.adaptee,e)},e.prototype.constructFrame=function(t,e,n,i,r,o,a){for(var s,l,u=this.adaptee,c=u.numChildren,h=[],p={},d=0;d<c;d++){var f=u.getChildAt(d);(i||-1==f._sessionID)&&(h[h.length]={sessionID:f._sessionID,as3DepthID:f._avmDepthID,addedOnTargetFrame:!1,child:f}),-1!=f._sessionID&&(p[f._sessionID]=f)}this.$Bg__setPropDict&&this.clearPropsDic(),t._update_indices.length=0,t._update_frames.length=0;var _,g,m=0;for(l=e;l<=n;l++){var y=t.frame_command_indices[l],A=t.frame_recipe[l];if(2&A){g=(_=t.command_index_stream[y])+t.command_length_stream[y++];var v={};for(s=_;s<g;s++)v[t.remove_child_stream[s]]=!0;var b=[];c=h.length;for(var x=0;x<c;x++)v[h[x].sessionID]||(b[b.length]=h[x]);h=b}if(4&A)for(g=(_=t.command_index_stream[y])+t.command_length_stream[y++],s=_;s<g;s++){for(var C=h.length-1,I=t.add_child_stream[3*s+1],E=C+1,w=0,S=C;S>=0;S--){var D=h[S];if(-1==D.as3DepthID&&w++,D.as3DepthID>-1){if(D.as3DepthID==I&&D.sessionID==t.add_child_stream[3*S]){E=-1;break}if(D.as3DepthID<I){E=S+1+w;break}w=0,E=S}}E>=h.length?h[h.length]={sessionID:t.add_child_stream[3*s],addedOnTargetFrame:l==n,symbolID:t.add_child_stream[3*s+2],as3DepthID:t.add_child_stream[3*s+1]}:E>-1&&h.splice(E,0,{sessionID:t.add_child_stream[3*s],addedOnTargetFrame:l==n,symbolID:t.add_child_stream[3*s+2],as3DepthID:t.add_child_stream[3*s+1]})}8&A&&(t._update_frames[m]=t.keyframe_firstframes[l],t._update_indices[m++]=y++),16&A&&l==n&&t.start_sounds(u,y)}var T,P=[],B=[],O=[];u._sessionID_childs={},c=P.length=h.length;for(var M=0;M<c;M++)if(-1==(T=h[M]).sessionID&&T.child)P[M]=T.child.adaptee;else if(p[T.sessionID]){var L=p[T.sessionID];u._sessionID_childs[T.sessionID]=L,P[M]=L,i||(P[M]._adapter?(P[M].adapter.isColorTransformByScript()||P[M].transform.clearColorTransform(),P[M].adapter.isBlockedByScript()||P[M].noTimelineUpdate||(P[M].transform.clearMatrix3D(),P[M].updateTimelineMask(null)),P[M].adapter.isVisibilityByScript()||(P[M].visible=!0)):(P[M].transform.clearColorTransform(),P[M].transform.clearMatrix3D(),P[M].visible=!0,P[M].updateTimelineMask(null)))}else{var R=t.getChildInstance(T.symbolID,T.sessionID);this.adaptee.isSlice9ScaledMC&&"[asset Sprite]"==R.assetType&&(R.isSlice9ScaledSprite=!0),R._sessionID=T.sessionID,R._avmDepthID=T.as3DepthID,u._sessionID_childs[T.sessionID]=R,P[M]=R,T.addedOnTargetFrame?O[O.length]=R:B[B.length]=R}for(var N=u.numChildren-1;N>=0;N--)P.indexOf(u.getChildAt(N))<0&&u.removeChildAt(N);for(var F=0;F<P.length;F++)u.contains(P[F])||u.addChildAt(P[F],F);u.preventScript=!0,this.finalizeChildren(B),a&&this.queueFrameScripts(t,r,!o),u.preventScript=!0,this.finalizeChildren(O)},e.prototype.finalizeChildren=function(t){for(var e=t.length,n=0;n<e;n++){var i=t[n];i.just_added_to_timeline=!0,i.reset()}},e.prototype.registerScriptObject=function(t){t.adapter!=t&&t.name&&("mask"!==t.name?(this[t.name]=t._adapter?t.adapter:t,this.axSetPublicProperty(t.name,t.adapter),this._registeredChildNames?-1===this._registeredChildNames.indexOf(t.name)&&this._registeredChildNames.push(t.name):this._registeredChildNames=[t.name]):this.adaptee.scriptMask=t)},e.prototype.unregisterScriptObject=function(t){this[t.name]==t.adapter&&(delete this[t.name],this.axDeletePublicProperty(t.name),this._registeredChildNames&&this._registeredChildNames.splice(this._registeredChildNames.indexOf(t.name),1)),t.isAsset(yl)&&t.removeButtonListeners()},e.prototype.clearPropsDic=function(){},e.prototype.clone=function(){var t=this;if(!this._symbol)throw"_symbol not defined when cloning movieclip";var e=XM(this._symbol,this._symbol.symbolClass),n=new Zs;this.adaptee.copyTo(n),e.adaptee=n,e._stage=this.activeStage,e.executeConstructor=function(){e.axInitializer(),t.constructorHasRun=!0},e.adaptee.graphics=this.graphics;var i=n.timeline;if(i){var r=i;if(r.frame_command_indices=[i.frame_command_indices[0]],r.frame_recipe=[i.frame_recipe[0]],r.keyframe_constructframes=[i.keyframe_constructframes[0]],r.keyframe_durations=[i.keyframe_durations[0]],r.keyframe_firstframes=[i.keyframe_firstframes[0]],r.keyframe_indices=[i.keyframe_indices[0]],this._registeredChildNames)for(var o=0,a=this._registeredChildNames;o<a.length;o++){var s=a[o];e.registerScriptObject(this[s])}}return e},e.prototype.dispose=function(){this.disposeValues()},Object.defineProperty(e.prototype,"buttonMode",{get:function(){return this.adaptee.buttonMode},set:function(t){this.adaptee.buttonMode=t},enumerable:!1,configurable:!0}),e.prototype.setDropTarget=function(t){this._dropTarget=t?t.adapter:null},Object.defineProperty(e.prototype,"dropTarget",{get:function(){return this._dropTarget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"graphics",{get:function(){return this._graphics||(this._graphics=new this.sec.flash.display.Graphics(null))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitArea",{get:function(){return this.adaptee.pickObject.adapter},set:function(t){this.adaptee.pickObject=t.adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"soundTransform",{get:function(){return Et.throwPIR("playerglobals/display/Sprite","get soundTransform",""),null},set:function(t){Et.throwPIR("playerglobals/display/Sprite","set soundTransform","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useHandCursor",{get:function(){return this.adaptee._useHandCursor},set:function(t){this.adaptee._useHandCursor=t},enumerable:!1,configurable:!0}),e.prototype.startDrag=function(t,n){if(void 0===t&&(t=!1),void 0===n&&(n=null),e.currentDraggedMC&&e.currentDraggedMC!=this&&e.currentDraggedMC.stopDrag(),e.currentDraggedMC=this,this._dragBounds=n,!this.isDragging){this.isDragging=!0,this.startDragPoint=Cf.instance().view.getNode(this._adaptee.parent).globalToLocal(new O(this.stage.mouseX,this.stage.mouseY)),t&&(this.adaptee.x=this.startDragPoint.x,this.adaptee.y=this.startDragPoint.y),this._dragBounds&&this.checkBounds(),this.startDragMCPosition.x=this.adaptee.x,this.startDragMCPosition.y=this.adaptee.y;var i=Cf.instance(),r=i.view.getNode(this.adaptee);i.mousePicker.dragNode=r;var o=this.adaptee.getAbstraction(r.partition);o.setParent(r);var a=o.getAbstraction(i.mousePicker.pickGroup).pickingCollision;a.rootNode=r,i.mouseManager.startDragObject(a),i.view.stage.addEventListener(ml.MOUSE_MOVE,this.dragListenerDelegate)}},e.prototype.checkBounds=function(){this.adaptee.x<this._dragBounds.left&&(this.adaptee.x=this._dragBounds.left),this.adaptee.x>this._dragBounds.right&&(this.adaptee.x=this._dragBounds.right),this.adaptee.y<this._dragBounds.top&&(this.adaptee.y=this._dragBounds.top),this.adaptee.y>this._dragBounds.bottom&&(this.adaptee.y=this._dragBounds.bottom)},e.prototype.dragListener=function(t){if(this.adaptee.parent){var e=Cf.instance().view.getNode(this._adaptee.parent).globalToLocal(new O(this.stage.mouseX,this.stage.mouseY));this.adaptee.x=this.startDragMCPosition.x+(e.x-this.startDragPoint.x),this.adaptee.y=this.startDragMCPosition.y+(e.y-this.startDragPoint.y),this._dragBounds&&this.checkBounds()}},e.prototype.startTouchDrag=function(t,e,n){Et.throwPIR("playerglobals/display/Sprite","startTouchDrag","")},e.prototype.stopDrag=function(t){e.currentDraggedMC&&e.currentDraggedMC!=this&&e.currentDraggedMC.stopDrag(),this.isDragging=!1,e.currentDraggedMC=null;var n=Cf.instance();n.mousePicker.dragNode=null,n.mouseManager.stopDragObject(),n.view.stage.removeEventListener(ml.MOUSE_MOVE,this.dragListenerDelegate)},e.prototype.stopTouchDrag=function(t){Et.throwPIR("playerglobals/display/Sprite","stopTouchDrag","")},e._sprites=new Array,e.currentDraggedMC=null,e}(_F),mF=function(t){function e(){var e=t.call(this)||this;return e.queuedNavigationAction=null,e}return o(e,t),e.prototype.applySymbol=function(){},e.getNewMovieClip=function(t){if(e._movieClips.length){var n=e._movieClips.pop();return n.adaptee=t,n}return new e},e.prototype._getAbsFrameNumber=function(t,e){return 0},e.prototype.callFrame=function(t){},e.prototype._callFrame=function(t){},e.prototype.addScript=function(t){return t},e.prototype.executeScript=function(t){if((this.allowScript||!(this.sec.swfVersion>9))&&(t=this.adaptee.timeline.get_script_for_frame(this.adaptee,this.adaptee.currentFrameIndex,!1))){this.allowScript=!1;var n=e.current_script_scope;e.current_script_scope=this;for(var i=0;i<t.length;i++)t[i].setReceiver(this),t[i].axCall(this);if(e.current_script_scope=n,this.queuedNavigationAction){var r=this.queuedNavigationAction;this.queuedNavigationAction=null,r()}}},e.prototype.initAdapter=function(){},e.prototype.createAdaptee=function(){var t=yl.getNewMovieClip(new rl(this.sec.player.factory));return t.reset(),t},e.prototype.clearPropsDic=function(){},e.prototype.evalScript=function(t){var e=document.createElement("script");e.text="var __framescript__ = function() {\n"+t+"\n}";var n=document.scripts[0];n.parentNode.insertBefore(e,n).parentNode.removeChild(e);var i=__framescript__;return window.__framescript__=null,i},e.prototype.freeFromScript=function(){t.prototype.freeFromScript.call(this)},e.prototype.clone=function(){var t=this;if(!t._symbol)throw"_symbol not defined when cloning movieclip";var e=XM(t._symbol,t._symbol.symbolClass),n=new yl(this.adaptee.timeline);return this.adaptee.copyTo(n),e.adaptee=n,e._stage=this.activeStage,e.executeConstructor=function(){e.axInitializer(),e.constructorHasRun=!0},e},e.prototype.dispose=function(){this.disposeValues()},Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this._adaptee.currentFrameIndexRelative+1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrameLabel",{get:function(){return this.adaptee.timeline.getCurrentFrameLabel(this.adaptee)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentLabel",{get:function(){return this.adaptee.timeline.getCurrentLabel(this.adaptee)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentLabels",{get:function(){if(this._currentLabels)return this._currentLabels;var t=this.adaptee.timeline._labels,e=this.adaptee.timeline.keyframe_firstframes;for(var n in this._currentLabels=[],t)this._currentLabels.push(new this.sec.flash.display.FrameLabel(t[n].name,e[t[n].keyFrameIndex]+1));return this._currentLabels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentScene",{get:function(){for(var t=this.adaptee.currentScene,e={value:[]},n=0;n<t.labels.length;n++)e.value.push(new this.sec.flash.display.FrameLabel(t.labels[n].name,t.labels[n].frame));return new this.sec.flash.display.Scene(t.name,e,t.offset,t.numFrames)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.adaptee.buttonEnabled},set:function(t){this.adaptee.buttonEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"framesLoaded",{get:function(){return this.totalFrames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.adaptee.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scenes",{get:function(){return Et.throwPIR("playerglobals/display/MovieClip","get scenes",""),[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._adaptee.numFrames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackAsMenu",{get:function(){return Et.throwPIR("playerglobals/display/MovieClip","get trackAsMenu",""),!1},set:function(t){Et.throwPIR("playerglobals/display/MovieClip","set trackAsMenu","")},enumerable:!1,configurable:!0}),e.prototype.addFrameScript=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=arguments.length;1&n&&this.sec.throwError("ArgumentError TooFewArgumentsError",n,n+1);for(var i=0;i<n;i+=2){var r=0|t[i],o=t[i+1];this.adaptee.timeline.add_framescript(o,r,this.adaptee)}this.constructorHasRun=!0},e.prototype.gotoAndPlay=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1),this._gotoInternal(t,e,n,!1)},e.prototype.gotoAndStop=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1),this._gotoInternal(t,e,n,!0)},e.prototype._gotoInternal=function(t,n,i,r){var o=this;if(void 0===n&&(n=null),void 0===i&&(i=!1),void 0===r&&(r=!1),i||e.current_script_scope!=this)if(null!=t){var a=this.adaptee;if(n=n||a.currentSceneName,"string"==typeof t&&null==a.timeline._labels[t])return t=parseInt(t),isNaN(t)||(a.jumpToIndex(t-1,n),r?a.stop():a.play()),void(r&&(this.sec.swfVersion>10&&(a.currentFrameIndex=0),this.stop()));if("number"==typeof t&&t<=0){if(e.current_script_scope==this)return;t=1}r?this.stop():this.play(),this._gotoFrame(t,n)}else r&&this.stop();else this.queuedNavigationAction=function(){return o._gotoInternal(t,n,!0,r)}},e.prototype._gotoFrame=function(t,n){void 0===n&&(n=null);var i,r=this._adaptee;"string"==typeof t?i=r.jumpToLabel(t):"number"==typeof t&&t<=0?(console.warn("[playerglobal/MovieClip] - gotoFrame called with invalid frame-index"),i=!0):i=r.jumpToIndex(t-1,n),i&&(_l.execute_as3_constructors_recursiv(this.adaptee),_l.execute_as3_constructors_finish_scene(this.root.adaptee),this.sec.swfVersion>9&&this!==e.current_script_scope&&(this.dispatchStaticBroadCastEvent(UN.FRAME_CONSTRUCTED),_l.execute_queue(),this.dispatchStaticBroadCastEvent(UN.EXIT_FRAME)))},e.prototype.nextFrame=function(t){var n=this;void 0===t&&(t=!1),t||e.current_script_scope!=this?(this._adaptee.stop(),++this._adaptee.currentFrameIndex,_l.execute_as3_constructors_recursiv(this.adaptee),_l.execute_as3_constructors_finish_scene(this.root.adaptee),this.sec.swfVersion>9&&(this.dispatchStaticBroadCastEvent(UN.FRAME_CONSTRUCTED),_l.execute_queue(),this.dispatchStaticBroadCastEvent(UN.EXIT_FRAME))):this.queuedNavigationAction=function(){return n.nextFrame(!0)}},e.prototype.nextScene=function(t){var n=this;void 0===t&&(t=!1),t||e.current_script_scope!=this?Et.throwPIR("playerglobals/display/MovieClip","nextScene",""):this.queuedNavigationAction=function(){return n.nextScene(!0)}},e.prototype.play=function(){return this._adaptee.play()},e.prototype.prevFrame=function(t){var n=this;if(void 0===t&&(t=!1),t||e.current_script_scope!=this){var i=this._adaptee;i.currentFrameIndexRelative>0&&i.currentFrameIndexRelative--,_l.execute_as3_constructors_recursiv(this.adaptee),_l.execute_as3_constructors_finish_scene(this.root.adaptee),this.sec.swfVersion>9&&(this.dispatchStaticBroadCastEvent(UN.FRAME_CONSTRUCTED),_l.execute_queue(),this.dispatchStaticBroadCastEvent(UN.EXIT_FRAME))}else this.queuedNavigationAction=function(){return n.prevFrame(!0)}},e.prototype.prevScene=function(t){var n=this;void 0===t&&(t=!1),t||e.current_script_scope!=this?Et.throwPIR("playerglobals/display/MovieClip","prevScene",""):this.queuedNavigationAction=function(){return n.prevScene(!0)}},e.prototype.stop=function(){return this._adaptee.stop()},e._movieClips=new Array,e.current_script_scope=null,e}(gF),yF=function(t){function e(n,i,r){void 0===n&&(n=null),void 0===i&&(i="auto"),void 0===r&&(r=!1);var o=this,a=new Sc(n?n.adaptee:0);return a.alphaBlending=!0,a.useColorTransform=!0,e.argBitmapMaterial=a,e.argPixelSnapping=i,e.argSmoothing=r,o=t.call(this)||this,n&&!o._bitmapMappedFromAsset&&(o._bitmapData=n,o._bitmapData&&o._bitmapData._addOwner(o)),o}return o(e,t),e.getNewBitmap=function(t,n,i){if(void 0===t&&(t=null),void 0===n&&(n="auto"),void 0===i&&(i=!1),e._bitmaps.length){var r=new Sc(t?t.adaptee:0);r.alphaBlending=!0,r.useColorTransform=!0;var o=e._bitmaps.pop();return o.adaptee=ol.getNewBillboard(r,n,i),o}return new e(t,n,i)},e.prototype.mapAdaptee=function(e){var n=e;if(e instanceof Le||e instanceof Dh){this._adaptee=n=ol.getNewBillboard(new Sc(e),"auto",!1);var i=new this.sec.flash.display.BitmapData(e);this.bitmapData=i,this._bitmapMappedFromAsset=!0}return t.prototype.mapAdaptee.call(this,n)},e.prototype.createAdaptee=function(){var t=ol.getNewBillboard(e.argBitmapMaterial,e.argPixelSnapping,e.argSmoothing);return e.argBitmapMaterial=null,e.argPixelSnapping=null,e.argSmoothing=null,t},e.prototype.clone=function(){var t=e.getNewBitmap(this._bitmapData);return this._adaptee.copyTo(t.adaptee),t},e.prototype.dispose=function(){this.disposeValues(),e._bitmaps.push(this)},e.prototype.disposeValues=function(){this.bitmapData=null,t.prototype.disposeValues.call(this)},Object.defineProperty(e.prototype,"bitmapData",{get:function(){return this._bitmapData},set:function(t){if(this._bitmapData!=t||!this._bitmapData||this._bitmapData.adaptee!==t.adaptee){this._bitmapData&&this._bitmapData._removeOwner(this),this._bitmapData=t,this._bitmapData&&this._bitmapData._addOwner(this);var e=this._adaptee.material;this._bitmapData?(e.ambientMethod.texture||(e.ambientMethod.texture=new fo),e.style.image=this._bitmapData.adaptee,e.alphaBlending=this._bitmapData.adaptee.transparent,e.useColorTransform=!0):(e.ambientMethod.texture&&(e.ambientMethod.texture=null),e.style.image=null,e.style.color=0,e.alphaBlending=!1),e.invalidateTextures()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSnapping",{get:function(){return""},set:function(t){Et.throwPIR("playerglobals/display/Bitmap","set pixelSnapping","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"smoothing",{get:function(){return!!this.adaptee.sampler&&this.adaptee.sampler.smooth},set:function(t){this.adaptee.sampler&&(this.adaptee.sampler.smooth=t)},enumerable:!1,configurable:!0}),e._bitmaps=new Array,e}(cF),AF={},vF=function(t){function e(e,n,i,r){void 0===i&&(i=!0),void 0===r&&(r=4294967295);var o=t.call(this)||this;return o._owners=[],"number"==typeof e?o._adaptee||(o._adaptee=Dh.getImage(e,n,i,r,!1,Bi.getInstance().getStageAt(0)),o._adaptee.useWeakRef()):o._adaptee=e,o._adaptee.adapter=o,o}return o(e,t),e.prototype.compare=function(t){return!0},Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},set:function(t){this._adaptee=t},enumerable:!1,configurable:!0}),e.loadBitmap=function(t){return Et.throwPIR("playerglobals/display/BitmapData","loadBitmap",""),null},e.prototype.setPixels=function(t,e){Et.throwPIR("playerglobals/display/BitmapData","setPixels","")},e.prototype.getPixels=function(t){var e=this.adaptee.getPixels(t.adaptee),n=new this.sec.flash.utils.ByteArray;return n.setArrayBuffer(e.buffer),n},e.prototype.copyPixelsToByteArray=function(t,e){Et.throwPIR("playerglobals/display/BitmapData","copyPixelsToByteArray","")},e.prototype.getVector=function(t){for(var e=this.adaptee.getPixels(t.adaptee),n=new this.sec.Uint32Vector(0,!0),i=new Uint32Array(e.buffer),r=0;r<i.length;r++){var o=e[4*r+3],a=e[4*r+0],s=e[4*r+1],l=e[4*r+2],u=o/255||1;i[r]=o<<24|a/u<<16|s/u<<8|l/u}return n._buffer=i,n._length=i.length,n},e.prototype.setVector=function(t,e){Et.throwPIR("playerglobals/display/BitmapData","setVector","")},e.prototype.histogram=function(t){Et.throwPIR("playerglobals/display/BitmapData","histogram","")},e.prototype.encode=function(t,e,n){Et.throwPIR("playerglobals/display/BitmapData","encode","")},e.prototype.drawWithQuality=function(t,e,n,i,r,o,a){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=!1),this._adaptee.draw(t.adaptee,null==e?void 0:e.adaptee,null==n?void 0:n.adaptee,i,null==r?void 0:r.adaptee,o)},Object.defineProperty(e.prototype,"transparent",{get:function(){return this._adaptee.transparent},set:function(t){this._adaptee.transparent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._adaptee.width},set:function(t){this._adaptee.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._adaptee.height},set:function(t){this._adaptee.height=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){var t=new this.sec.flash.display.BitmapData(this._adaptee.width,this._adaptee.height,this._adaptee.transparent,null);return this._adaptee.copyTo?this._adaptee.copyTo(t._adaptee):t.copyPixels(this,this.rect,new this.sec.flash.geom.Point),t},Object.defineProperty(e.prototype,"rect",{get:function(){return new this.sec.flash.geom.Rectangle(this._adaptee.rect.clone())},enumerable:!1,configurable:!0}),e.prototype.getPixel=function(t,e){return this._adaptee.getPixel(t,e)},e.prototype.getPixel32=function(t,e){return this._adaptee.getPixel32(t,e)},e.prototype.setPixel=function(t,e,n){this._adaptee.setPixel(t,e,n)},e.prototype.setPixel32=function(t,e,n){this._adaptee.setPixel32(t,e,n)},e.prototype.applyFilter=function(t,e,n,i){this._adaptee.applyFilter(t.adaptee,e.adaptee,n.adaptee,i.toAwayObject())||Et.throwPIR("playerglobals/display/BitmapData","applyFilter",i.axClassName)},e.prototype.colorTransform=function(t,e){this._adaptee.colorTransform(t.adaptee,e.adaptee)},e.prototype.copyChannel=function(t,e,n,i,r){this._adaptee.copyChannel(t.adaptee,e.adaptee,n.adaptee,i,r)},e.prototype.copyPixels=function(t,e,n,i,r,o){void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=!1),this._adaptee.copyPixels(t.adaptee,e.adaptee,n.adaptee,i?i.adaptee:null,r?r.adaptee:null,o)},e.prototype.dispose=function(){this._adaptee&&(this._owners=[],this._adaptee.canUnload&&this._adaptee.dispose(),this._adaptee=null)},e.prototype.draw=function(t,e,n,i,r,o){void 0===n&&(n=null),void 0===i&&(i=""),void 0===r&&(r=null),void 0===o&&(o=!1),this._adaptee.draw(t.adaptee,null==e?void 0:e.adaptee,null==n?void 0:n.adaptee,i,null==r?void 0:r.adaptee,o)},e.prototype.fillRect=function(t,e){this._adaptee.fillRect(t.adaptee,e)},e.prototype.floodFill=function(t,e,n){!function(t,e){AF[t]||(console.warn("".concat(t,":"),e),AF[t]=!0)}("floodFill:"+this._adaptee.id,"Unsage implementation!"),this._adaptee.floodFill(t,e,n)},e.prototype.generateFilterRect=function(t,e){return Et.throwPIR("playerglobals/display/BitmapData","generateFilterRect",""),null},e.prototype.getColorBoundsRect=function(t,e,n){return Et.throwPIR("playerglobals/display/BitmapData","getColorBoundsRect",""),new this.sec.flash.geom.Rectangle(this._adaptee.getColorBoundsRect(t,e,n))},e.prototype.hitTest=function(t,e,n,i,r){return void 0===r&&(r=0),Et.throwPIR("playerglobals/display/BitmapData","hitTest",""),this._adaptee.hitTest(t.adaptee,e,null==n?void 0:n.adaptee,null==i?void 0:i.adaptee,r)},e.prototype.lock=function(){this._adaptee.lock()},e.prototype.merge=function(t,e,n,i,r,o,a){this._adaptee.merge(t.adaptee,t.rect.adaptee,n.adaptee,i,r,o,a)},e.prototype.noise=function(t,e,n,i,r){this._adaptee.noise(t,e,n,i,r)},e.prototype.paletteMap=function(t,e,n,i,r,o,a){Et.throwPIR("playerglobals/display/BitmapData","paletteMap","")},e.prototype.perlinNoise=function(t,e,n,i,r,o,a,s,l){void 0===l&&(l=null);var u=l?[]:null;if(l)for(var c=l.value,h=c.length,p=0;p<h;p++)"number"==typeof c[p]?u.push(c[p]):"number"==typeof c[p].x&&u.push(c[p].x,c[p].y);this._adaptee.perlinNoise(t,e,n,i,r,o,a,s,u),Et.throwPIR("playerglobals/display/BitmapData","perlinNoise","Unsafe implementation, results not equal!")},e.prototype.pixelDissolve=function(t,e,n,i,r,o){return Et.throwPIR("playerglobals/display/BitmapData","pixelDissolve",""),0},e.prototype.scroll=function(t,e){e|=0,((t|=0)||e)&&this._adaptee.copyPixels(this._adaptee,this._adaptee.rect,new O(t,e),null,null,!1)},e.prototype.threshold=function(t,e,n,i,r,o,a,s){return this._adaptee.threshold(t.adaptee,e.adaptee,n.adaptee,i,r,o,a,s),0},e.prototype.unlock=function(){this._adaptee.unlock()},e.prototype._addOwner=function(t){-1==this._owners.indexOf(t)&&this._owners.push(t)},e.prototype._removeOwner=function(t){var e=this._owners.indexOf(t);-1!=e&&(this._owners.splice(e,1),0===this._owners.length&&this._adaptee.clear())},e}(Hb),bF=function(t){function e(e,n){var i=t.call(this)||this;return i.imageStore={},i._sec=e,i._loaderInfo=n,i}return o(e,t),Object.defineProperty(e.prototype,"appDomain",{get:function(){return this._loaderInfo?this._loaderInfo.applicationDomain.axApplicationDomain:this._sec.application},enumerable:!1,configurable:!0}),e.prototype.executeABCBytes=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=new RN({app:this.appDomain,url:""},n.data);n.flags?this.appDomain.loadABC(i):this.appDomain.loadAndExecuteABC(i)}return null},e.prototype.createSprite=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!n||!this._sec)throw"no symbol provided";var i=null;i=n.className?this.appDomain.getClass(vb.FromFQNString(n.className,0)):this._sec.flash.display.Sprite.axClass,n.symbolClass=i;var r=XM(n,i);return r.adaptee=new Zs(e),r.adaptee},e.prototype.createDisplayObjectContainer=function(t){return(new this._sec.flash.display.DisplayObjectContainer).adaptee},e.prototype.createBinarySymbol=function(t){void 0===t&&(t=null),this.appDomain.addBinarySymbol(t)},e.prototype.createMovieClip=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),!e||!this._sec)throw"no symbol provided";var n=null;e.className?(n=this.appDomain.getClass(vb.FromFQNString(e.className,0)))._symbol=e:n=e.isButton?this._sec.flash.display.SimpleButton.axClass:this._sec.flash.display.MovieClip.axClass,e.symbolClass=n;var i=XM(e,e.isButton?this._sec.flash.display.SimpleButton.axClass:this._sec.flash.display.MovieClip.axClass);return i.adaptee=new yl(t||new rl(this)),e.timeline=i.adaptee.timeline,i.adaptee},e.prototype.createTextField=function(t){void 0===t&&(t=null);var e=null;e=t.className?this.appDomain.getClass(vb.FromFQNString(t.className,0)):this._sec.flash.text.TextField.axClass,t.symbolClass=e;var n=XM(t,e);return n.axInitializer(),n.adaptee},e.prototype.createBillboard=function(t,e){return new yF(t.style.image.adapter).adaptee},e.prototype.createImage2D=function(t,e,n,i,r,o){void 0===n&&(n=!0),void 0===i&&(i=null);var a=new vF(t,e,n,i).adaptee;return a.unuseWeakRef(),a},e.prototype.createFrameScripts=function(t,e,n,i){return t},e.prototype.createChildInstanceForTimeline=function(t,e,n){_l.invalidAS3Constructors=!0;var i,r=this.awaySymbols[e];if(r.isAsset(zs))(i=Zs.getNewSprite(r.clone())).mouseEnabled=!1;else if(r.isAsset(Zs))(i=Zs.getNewSprite(r.graphics)).mouseEnabled=!1;else if(r.isAsset(nl))(i=nl.getNewMorphSprite(r.graphics.clone())).mouseEnabled=!1;else if(r.isAsset(Le)){var o=new Sc(r);o.alphaBlending=r.transparent,(i=ol.getNewBillboard(o)).mouseEnabled=!1}else i=r.adapter.clone(!1).adaptee;return i.partitionClass=yr,i._sessionID=n,i},e}(wh),xF=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(zN),CF=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i)||this;return o._text=r,o}return o(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.text)},e.prototype.toString=function(){return this.formatToString("TextEvent","type","bubbles","cancelable","text")},e.prototype.copyNativeData=function(t){},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.LINK="link",e.TEXT_INPUT="textInput",e}(UN),IF=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=""),void 0===o&&(o=0);var a=t.call(this,e,n,i,r)||this;return a.setID(o),a}return o(e,t),e.prototype.setID=function(t){this._id=t},Object.defineProperty(e.prototype,"errorID",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.text,this.errorID)},e.prototype.toString=function(){return this.formatToString("ErrorEvent","type","bubbles","cancelable","text","errorID")},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.ERROR="error",e}(CF),EF=function(t){function e(e,n,i,r,o){return void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=""),void 0===o&&(o=0),t.call(this,e,n,i,r,o)||this}return o(e,t),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.text,this.errorID)},e.prototype.toString=function(){return this.formatToString("IOErrorEvent","type","bubbles","cancelable","text","errorID")},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.IO_ERROR="ioError",e.NETWORK_ERROR="networkError",e.DISK_ERROR="diskError",e.VERIFY_ERROR="verifyError",e}(IF),wF=function(t){function e(e,n){void 0===e&&(e=null);var i=t.call(this)||this;return i._bytesLoaded=0,i._onAssetCompleteDelegate=function(t){return i.onAssetComplete(t)},i._onLoaderCompleteDelegate=function(t){return i.onLoaderComplete(t)},i._onLoadErrorDelegate=function(t){return i.onLoadError(t)},e&&i.loadWaveAudio(e),i}return o(e,t),e.prototype.loadWaveAudio=function(t){this._url=t.url,this._loading=!0,dt.removeEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),dt.removeEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),dt.removeEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),dt.addEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),dt.addEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),dt.addEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),dt.load(new ft(this._url),new ct,this._url,new At)},e.prototype.onAssetComplete=function(t){var e=t.asset;e.isAsset(w)&&(this._adaptee=e,this._loading=!1,this._pendingPlayCommand&&(this.play(this._pendingPlayCommand.startTime/1e3,this._pendingPlayCommand.loops,this._pendingPlayCommand.sndTransform),this._playAfterLoad=!1),this._pendingPlayCommand=null)},e.prototype.onLoaderComplete=function(t){t.url==this._url&&(this._loading=!1,this._bytesLoaded=1e3,dt.removeEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),dt.removeEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),dt.removeEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),this.dispatchEvent(new this.sec.flash.events.Event(UN.COMPLETE)))},e.prototype.onLoadError=function(t){dt.removeEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),dt.removeEventListener(Q.LOADER_COMPLETE,this._onLoaderCompleteDelegate),dt.removeEventListener(X.LOAD_ERROR,this._onLoadErrorDelegate),console.log("load error in Sound",t),this._loading=!1,this.dispatchEvent(new this.sec.flash.events.IOErrorEvent(EF.ERROR))},Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},set:function(t){this._adaptee=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesLoaded",{get:function(){return this._bytesLoaded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesTotal",{get:function(){return 1e3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id3",{get:function(){return console.log("id3 not implemented yet in flash/Sound"),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isBuffering",{get:function(){return console.log("isBuffering not implemented yet in flash/Sound"),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isURLInaccessible",{get:function(){return console.log("isURLInaccessible not implemented yet in flash/Sound"),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){if(this._adaptee)return this._adaptee.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),e.prototype.close=function(){console.log("close not implemented yet in flash/Sound")},e.prototype.extract=function(t,e,n){return console.log("extract not implemented yet in flash/Sound"),0},e.prototype.load=function(t,e){this.loadWaveAudio(t)},e.prototype.loadCompressedDataFromByteArray=function(t,e){console.log("loadCompressedDataFromByteArray not implemented yet in flash/Sound")},e.prototype.loadPCMFromByteArray=function(t,e,n,i,r){console.log("loadPCMFromByteArray not implemented yet in flash/Sound")},e.prototype.play=function(t,e,n){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=null),!this.adaptee&&!this._loading)return console.warn("[Sound#play]: no adaptee exists!"),new this.sec.flash.media.SoundChannel;if(!this.adaptee&&this._loading)return this._pendingPlayCommand={startTime:t,loops:e,sndTransform:n,sndChannel:new this.sec.flash.media.SoundChannel},this._pendingPlayCommand.sndChannel;e=isNaN(e)||e<1?1:Math.floor(e);var i=this._adaptee.play(t/1e3,e);i||console.debug("[Sound] Sound channel missed, channel pool overflow for:",this._adaptee.id);var r=this._pendingPlayCommand?this._pendingPlayCommand.sndChannel:new this.sec.flash.media.SoundChannel;return n=n||new this.sec.flash.media.SoundTransform,r.init(i,n),r},e.prototype.stopAll=function(){this._adaptee.stop()},e}(zN),SF=function(t){function e(n,i){void 0===n&&(n=null),void 0===i&&(i=!1);var r=t.call(this)||this;return i||null!=n||null==e._currentDomain||(n=e.getSystemDomain()),e._currentDomain||(e._currentDomain=r),r._parentDomain=n,r._definitions={},r._font_definitions={},r._audio_definitions={},r.axApplicationDomain=i?r.sec.system:n?new WR(r.sec,r.parentDomain.axApplicationDomain):r.sec.application,r.axApplicationDomain.awayApplicationDomain=r,r}return o(e,t),e.getSystemDomain=function(){if(null==e._systemDomain){if(!e._currentDomain)return null;e._systemDomain=new this._currentDomain.sec.flash.system.ApplicationDomain(null,!0)}return e._systemDomain},Object.defineProperty(e,"currentDomain",{get:function(){return e._currentDomain},set:function(t){e._currentDomain=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"domainMemory",{get:function(){return console.log("[UNSAFE IMPLEMENTATION!] domainMemory:flash/ApplicationDomain"),this._memory},set:function(t){console.log("[UNSAFE IMPLEMENTATION!] domainMemory:flash/ApplicationDomain"),(t||this._memory.buffer!==t.buffer)&&(this._memoryView=new DataView(t.buffer)),this._memory=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"internal_memoryView",{get:function(){return this._memoryView},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MIN_DOMAIN_MEMORY_LENGTH",{get:function(){return console.log("MIN_DOMAIN_MEMORY_LENGTH not implemented yet in flash/ApplicationDomain"),0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentDomain",{get:function(){return this._parentDomain},enumerable:!1,configurable:!0}),e.prototype.addDefinition=function(t,e){this._definitions[t]=e},e.prototype.addAudioDefinition=function(t,e){this._audio_definitions[t]=e},e.prototype.addFontDefinition=function(t,e){this._font_definitions[t]=e},e.prototype.hasSymbolForClass=function(t){return this._definitions[t]||this._font_definitions[t]||this._audio_definitions[t]},e.prototype.getSymbolAdaptee=function(t){var e=this._definitions[t];if(e){if(e.isAsset&&e.isAsset(Dh)||!e.adapter)return e;var n=e.adapter.clone();return n.adaptee.isAsset(yl)&&(n.adaptee.currentFrameIndex=0),n.adaptee}return this._font_definitions[t]?this._font_definitions[t]:this._audio_definitions[t]?this._audio_definitions[t]:null},e.prototype.getSymbolDefinition=function(t){var e=this._definitions[t];if(e){if(e.isAsset&&e.isAsset(Dh))return e;var n=e.adapter.clone();return n.adaptee.isAsset(yl)&&(n.adaptee.currentFrameIndex=0),n}if(this._font_definitions[t])return this._font_definitions[t];if(this._audio_definitions[t]){var i=new wF;return i.adaptee=this._audio_definitions[t],i}},e.prototype.getDefinition=function(t){return this.axApplicationDomain.getClass(vb.FromSimpleName(t))},e.prototype.getFontDefinition=function(t){return this._font_definitions[t]},e.prototype.getAwayJSAudio=function(t){return this._audio_definitions[t]},e.prototype.getAudioDefinition=function(t){var e=new wF;return e.adaptee=this._audio_definitions[t],e},e.prototype.getQualifiedDefinitionNames=function(){var t=[];for(var e in this._definitions)this._definitions.hasOwnProperty(e)&&(t[t.length]=e);return t},e.prototype.hasDefinition=function(t){try{return!!this.getDefinition(t)}catch(t){return!1}},e.prototype.hasFontDefinition=function(t){return this._font_definitions.hasOwnProperty(t)},e.prototype.hasAudioDefinition=function(t){return this._audio_definitions.hasOwnProperty(t)},e}(Hb),DF=function(t){function e(e,n,i){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===i&&(i=null);var r=t.call(this)||this,o=r.sec;return r.checkPolicyFile=e,r.applicationDomain=n||new o.flash.system.ApplicationDomain(SF.currentDomain),r.securityDomain=i,r}return o(e,t),e}(Hb),TF=function(t){function e(){var e=t.call(this)||this;return e._contentLoaderInfo=new e.sec.flash.display.LoaderInfo(e,e.adaptee),e._factory=new bF(e.sec,e._contentLoaderInfo),e}return o(e,t),e.executeQueue=function(){if(e.loaderQueue.length){var t=e.loaderQueue.concat();e.loaderQueue.length=0;for(var n=0,i=t;n<i.length;n++){(0,i[n])()}}},Object.defineProperty(e.prototype,"contentLoaderInfo",{get:function(){return this._contentLoaderInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uncaughtErrorEvents",{get:function(){return Et.throwPIR("playerglobals/display/Loader","get uncaughtErrorEvents",""),this._uncaughtErrorEvents||(this._uncaughtErrorEvents=new xF),this._uncaughtErrorEvents},enumerable:!1,configurable:!0}),e.prototype.createAdaptee=function(){var t=this;this._onAssetCompleteDelegate=function(e){return t._onAssetComplete(e)};var e=new fl;return e.addEventListener(h.ASSET_COMPLETE,this._onAssetCompleteDelegate),e},e.prototype._onAssetComplete=function(e){var n=e.asset;n.adapter.loaderInfo=this._contentLoaderInfo,n.isAsset(Ch)?this._contentLoaderInfo.applicationDomain.addDefinition(n.name,n):n.isAsset(Dh)||n.isAsset(Le)?(this._contentLoaderInfo.applicationDomain.addDefinition(n.name,n),this._isImage&&(this._content=new yF(n.adapter),this._adaptee.addChild(this._content.adaptee))):n.isAsset(w)?this._contentLoaderInfo.applicationDomain.addAudioDefinition(n.name,n):n.isAsset(kc)?this._contentLoaderInfo.applicationDomain.addFontDefinition(n.name,n):n.isAsset(Zs)?this._contentLoaderInfo.applicationDomain.addDefinition(n.name,n):n.isAsset(yl)?(this._contentLoaderInfo.applicationDomain.addDefinition(n.name,n),("Scene 1"==n.name||n.isAVMScene)&&(this._content=n.adapter.clone(),this._content.loaderInfo=this._contentLoaderInfo,this._content.adaptee.reset(),_l.invalidAS3Constructors=!0,t.prototype.addChild.call(this,this._content),_l.execute_as3_constructors_recursiv(this._content.adaptee))):n.isAsset(zs)||console.log("loaded unhandled asset-type:",n.name)},e.prototype.addChild=function(t){return this.sec.throwError("IllegalOperationError",kb.InvalidLoaderMethodError),null},e.prototype.addChildAt=function(t,e){return this.sec.throwError("IllegalOperationError",kb.InvalidLoaderMethodError),null},e.prototype.removeChild=function(t){return this.sec.throwError("IllegalOperationError",kb.InvalidLoaderMethodError),null},e.prototype.removeChildAt=function(t){return this.sec.throwError("IllegalOperationError",kb.InvalidLoaderMethodError),null},e.prototype.setChildIndex=function(t,e){this.sec.throwError("IllegalOperationError",kb.InvalidLoaderMethodError)},e.prototype.close=function(){this.adaptee.close()},e.prototype.load=function(t,n){var i=this;void 0===n&&(n=null),e.loaderQueue.push((function(){i._delayedLoad(t,n)}))},e.prototype._delayedLoad=function(t,n){var i=this;void 0===n&&(n=null);var r=t.url||"",o=r.replace(/\?.*$/,""),a=bf(r,e.redirectRules);if(a){if(a.supressLoad)return void console.log("[LOADER] Load surpressed ",a.url);console.log("[LOADER] Override loading url:",a.url),t.adaptee.url=a.url}else console.log("[LOADER] start loading the url:",o);var s=o.substr(-3).toLowerCase();this._isImage="jpg"==s||"png"==s,"gif"!==s?(this._loaderContext=n||new DF(!1,SF.currentDomain),this._contentLoaderInfo._setApplicationDomain(this._loaderContext.applicationDomain),this._adaptee.load(t.adaptee,null,null,this._isImage?new Li(this._factory):new yf(this._factory)),a&&a.supressErrors&&this.adaptee.addEventListener(X.LOAD_ERROR,(function(t){console.log("[LOADER] Error supressed by redirect rule as empty complete events!",t),i._contentLoaderInfo._onLoaderCompleteDelegate(new Q(Q.LOADER_COMPLETE,t.urlLoader.url,null))}))):console.warn("[Loader] Unsupported file type:",s,o)},e.prototype.loadBytes=function(t,n){var i=this;if(void 0===n&&(n=null),t){var r=t.bytes;0!==r[0]||0!==r[1]||0!==r[2]?e.loaderQueue.push((function(){i._loaderContext=n||new DF(!1,SF.currentDomain),i._contentLoaderInfo._setApplicationDomain(i._loaderContext.applicationDomain),i._contentLoaderInfo.source=t,i._adaptee.loadData(r,null,null,new yf(i._factory))})):console.warn("[Loader] Bytes buffer has empty magic number!")}else console.warn("[Loader] Bytes byffer is `undefined`")},e.prototype.unload=function(){this._unload(!1,!1)},e.prototype.unloadAndStop=function(t){this._unload(!0,!!t)},e.prototype._unload=function(t,e){Et.throwPIR("playerglobals/display/Loader","_unload","")},e.redirectRules=[],e.loaderQueue=[],e}(_F),PF=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=0),void 0===o&&(o=0);var a=t.call(this,e,n,i)||this;return a._bytesLoaded=r,a._bytesTotal=o,a}return o(e,t),Object.defineProperty(e.prototype,"bytesLoaded",{get:function(){return this._bytesLoaded},set:function(t){this._bytesLoaded=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesTotal",{get:function(){return this._bytesTotal},set:function(t){this._bytesTotal=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this._type,this._bubbles,this._cancelable,this._bytesLoaded,this._bytesTotal)},e.prototype.toString=function(){return this.formatToString("ProgressEvent","bubbles","cancelable","eventPhase","bytesLoaded","bytesTotal")},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.PROGRESS="progress",e.SOCKET_DATA="socketData",e}(UN),BF=function(){function t(){}return t.addQueue=function(t){this._queue.push({loaderInfo:t,delayCnt:this.DELAY})},t.executeQueue=function(){for(var t=this._queue,e=t.length,n=!0;e>0;){var i=t[--e];if(i.delayCnt--,i.delayCnt>0)n=!1;else if(0==i.delayCnt){var r=new i.loaderInfo.sec.flash.events.Event(UN.COMPLETE);r.currentTarget=i.loaderInfo,i.loaderInfo.dispatchEvent(r)}}n&&(t.length=0)},t._queue=[],t.DELAY=2,t}(),OF=function(t){function e(e,n){var i=t.call(this)||this;return i._bytesLoaded=0,i._bytesTotal=0,i.eventMappingExtern[UN.COMPLETE]="LoaderInfo:Event.COMPLETE",i.eventMappingExtern[PF.PROGRESS]="LoaderInfo:ProgressEvent.PROGRESS",i.eventMappingExtern[EF.IO_ERROR]="LoaderInfo:IOErrorEvent.IO_ERROR",i.eventMappingDummys[UN.UNLOAD]="LoaderInfo:Event.UNLOAD",i.eventMappingDummys[UN.OPEN]="LoaderInfo:Event.OPEN",i.eventMappingDummys[UN.INIT]="LoaderInfo:Event.INIT",i._onLoaderStartDelegate=function(t){return i._onLoaderStart(t)},i._onLoadProgressDelegate=function(t){return i._onLoadProgress(t)},i._onLoaderCompleteDelegate=function(t){return i._onLoaderComplete(t)},i._onLoaderErrorDelegate=i._onLoadeError.bind(i),i._loader=e,i._container=n,i._container.addEventListener(Q.LOADER_START,i._onLoaderStartDelegate),i._container.addEventListener(X.LOAD_PROGRESS,i._onLoadProgressDelegate),i._container.addEventListener(Q.LOADER_COMPLETE,i._onLoaderCompleteDelegate),i._container.addEventListener(X.LOAD_ERROR,i._onLoaderErrorDelegate),i}return o(e,t),Object.defineProperty(e.prototype,"actionScriptVersion",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get actionScriptVersion",""),0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"source",{set:function(t){this._source=t,this._bytesTotal=(null==t?void 0:t.length)||0},enumerable:!1,configurable:!0}),e.prototype.getSymbolById=function(t){},e.prototype._onLoadeError=function(t){var e=new this.sec.flash.events.IOErrorEvent(EF.IO_ERROR);e.currentTarget=this,this.dispatchEvent(e)},e.prototype._onLoaderStart=function(t){var e;this._bytesLoaded=0,this._bytesTotal=(null===(e=this._source)||void 0===e?void 0:e.length)||0,this._url=new URL(t.url,document.baseURI).href},e.prototype._onLoadProgress=function(t){this._bytesLoaded=t.urlLoader.bytesLoaded,this._bytesTotal=t.urlLoader.bytesTotal;var e=new this.sec.flash.events.ProgressEvent(PF.PROGRESS,null,null,t.urlLoader.bytesLoaded,t.urlLoader.bytesTotal);e.currentTarget=this,this.dispatchEvent(e)},e.prototype._onLoaderComplete=function(t){this._source?this._bytesTotal=this._bytesLoaded=this._source.length:t.assets&&t.assets.length?(this._bytesLoaded=t.assets.length,this._bytesTotal=t.assets.length):this._bytesTotal=this._bytesLoaded=this._bytesTotal||1,this._url=new URL(t.url,document.baseURI).href,BF.addQueue(this)},Object.defineProperty(e.prototype,"applicationDomain",{get:function(){return this._applicationDomain},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytes",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get bytes",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesLoaded",{get:function(){return this._bytesLoaded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesTotal",{get:function(){return this._bytesTotal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childAllowsParent",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get childAllowsParent",""),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childSandboxBridge",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get childSandboxBridge",""),null},set:function(t){Et.throwPIR("playerglobals/display/LoaderInfo","set childSandboxBridge","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._loader.content},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentType",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get contentType",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameRate",{get:function(){return Cf.instance().frameRate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Cf.instance().view.getNode(this._container),e=Cr.getInstance().getBoundsPicker(t.partition).getBoxBounds(t);return null==e?0:e.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isURLInaccessible",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get isURLInaccessible",""),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loader",{get:function(){return this._loader instanceof TF?this._loader:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaderURL",{get:function(){return this._loader.stage.getChildAt(0).loaderInfo.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parameters",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get parameters",""),this.sec.createArrayUnsafe([])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentAllowsChild",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get parentAllowsChild",""),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentSandboxBridge",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get parentSandboxBridge",""),null},set:function(t){Et.throwPIR("playerglobals/display/LoaderInfo","set parentSandboxBridge","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sameDomain",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get sameDomain",""),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sharedEvents",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get sharedEvents",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"swfVersion",{get:function(){return this._swfVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uncaughtErrorEvents",{get:function(){return Et.throwPIR("playerglobals/display/LoaderInfo","get uncaughtErrorEvents",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url.includes("?")&&(this._url=this._url.substr(0,this._url.indexOf("?"))),this._url},set:function(t){this._url=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Cf.instance().view.getNode(this._container),e=Cr.getInstance().getBoundsPicker(t.partition).getBoxBounds(t);return null==e?0:e.width},enumerable:!1,configurable:!0}),e.getLoaderInfoByDefinition=function(t){return Et.throwPIR("playerglobals/display/LoaderInfo","static getLoaderInfoByDefinition",""),null},e.prototype._setApplicationDomain=function(t){this._applicationDomain=t||new this.sec.flash.system.ApplicationDomain(SF.currentDomain)},e}(zN),MF=function(t){function e(){var e=t.call(this)||this;return e._isAVMStage=!0,e._stage3Ds=[],e._resizeCallbackDelegate=function(t){return e.resizeCallback(t)},window.addEventListener("resize",e._resizeCallbackDelegate),e.eventMapping[UN.RESIZE]={adaptedType:"",addListener:e.initResizeListener,removeListener:e.removeResizeListener,callback:e._resizeCallbackDelegate},e._mouseLeaveCallbackDelegate=function(t){return e.mouseLeaveCallback(t)},e.eventMapping[UN.MOUSE_LEAVE]={adaptedType:"",addListener:e.initMouseLeaveListener,removeListener:e.removeMouseLeaveListener,callback:e._mouseLeaveCallbackDelegate},e.sec.flash.display.DisplayObject.axClass._activeStage=e,e._stage=e,e._resizeCallbackDelegate(null),e}return o(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return Cf.instance().view},enumerable:!1,configurable:!0}),e.prototype.initResizeListener=function(t,e){},e.prototype.removeResizeListener=function(t,e){},e.prototype.resizeCallback=function(t){this.dispatchEvent(new this.sec.flash.events.Event(UN.RESIZE))},e.prototype.show=function(){},e.prototype.initMouseLeaveListener=function(t,e){window.addEventListener("mouseleave",e)},e.prototype.removeMouseLeaveListener=function(t,e){window.removeEventListener("mouseleave",e)},e.prototype.initListener=function(t,e,n){if(!this._listnersCallbacksByType[t])return this.adaptee.addEventListener(t,e),Cf.instance().view.stage.addEventListener(t,e),void(this._listnersCallbacksByType[t]=[n]);this._listnersCallbacksByType[t].push(n)},e.prototype.removeListener=function(t,e,n){if(this._listnersCallbacksByType[t]){var i=this._listnersCallbacksByType[t].indexOf(n);if(-1!=i){if(1==this._listnersCallbacksByType[t].length)return delete this._listnersCallbacksByType[t],this.adaptee.removeEventListener(t,e),void Cf.instance().view.stage.removeEventListener(t,e);this._listnersCallbacksByType[t].splice(i,1)}}},e.prototype.mouseLeaveCallback=function(t){this.dispatchEvent(new UN(UN.MOUSE_LEAVE))},e.prototype.enterFrame=function(){if(TF.executeQueue(),0!=this._stage.adaptee.numChildren){this._stage.adaptee.advanceFrame(),sR.updateOrphans();var t=this._stage.adaptee.getChildAt(0);t.firstFrameOnSWFStart?t.firstFrameOnSWFStart=!1:this._stage.dispatchStaticBroadCastEvent(UN.ENTER_FRAME),_l.execute_as3_constructors_enterFrame(this._stage.adaptee),this._stage.dispatchStaticBroadCastEvent(UN.FRAME_CONSTRUCTED),_l.execute_queue(),this._stage.dispatchStaticBroadCastEvent(UN.EXIT_FRAME),_l.execute_queue(),BF.executeQueue(),this._sendEventRender&&(this._stage.dispatchStaticBroadCastEvent(UN.RENDER),_l.execute_queue(),this._sendEventRender=!1)}},Object.defineProperty(e.prototype,"mouseX",{get:function(){return 0|Cf.instance().getLocalMouseX(Cf.instance().view.getNode(this.adaptee))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){return 0|Cf.instance().getLocalMouseY(Cf.instance().view.getNode(this.adaptee))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accessibilityImplementation",{set:function(t){Et.throwPIR("playerglobals/display/Stage","set accessibilityImplementation","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.adaptee.align},set:function(t){this.adaptee.align=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowsFullScreen",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get allowsFullScreen",""),!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowsFullScreenInteractive",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get allowsFullScreenInteractive",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"browserZoomFactor",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get browserZoomFactor",""),0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.adaptee.color},set:function(t){this.adaptee.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorCorrection",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get colorCorrection",""),""},set:function(t){Et.throwPIR("playerglobals/display/Stage","set colorCorrection","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorCorrectionSupport",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get colorCorrectionSupport",""),""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentsScaleFactor",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get contentsScaleFactor",""),0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayContextInfo",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get displayContextInfo",""),""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayState",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get displayState",""),""},set:function(t){Et.throwPIR("playerglobals/display/Stage","set displayState","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"focus",{get:function(){var t;return null===(t=Cf.instance().mouseManager.getFocus())||void 0===t?void 0:t.container.adapter},set:function(t){Cf.instance().mouseManager.setFocus(null==t?void 0:t.node)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameRate",{get:function(){return Cf.instance().frameRate},set:function(t){Cf.instance().frameRate=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullScreenHeight",{get:function(){return window.screen.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullScreenSourceRect",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get fullScreenSourceRect",""),null},set:function(t){Et.throwPIR("playerglobals/display/Stage","set fullScreenSourceRect","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullScreenWidth",{get:function(){return window.screen.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseLock",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get mouseLock",""),!1},set:function(t){Et.throwPIR("playerglobals/display/Stage","set mouseLock","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get quality",""),""},set:function(t){Et.throwPIR("playerglobals/display/Stage","set quality","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return Cf.instance().scaleMode},set:function(t){Cf.instance().scaleMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showDefaultContextMenu",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get showDefaultContextMenu",""),!1},set:function(t){Et.throwPIR("playerglobals/display/Stage","set showDefaultContextMenu","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"softKeyboardRect",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get softKeyboardRect",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stage3Ds",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get stage3Ds",""),this._stage3Ds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this},set:function(t){this._stage=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageFocusRect",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get stageFocusRect",""),!1},set:function(t){Et.throwPIR("playerglobals/display/Stage","set stageFocusRect","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageHeight",{get:function(){return Cf.instance().stageHeight},set:function(t){Cf.instance().stageHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageVideos",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get stageVideos",""),[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageWidth",{get:function(){return Cf.instance().stageWidth},set:function(t){Cf.instance().stageWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabChildren",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get tabChildren",""),!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textSnapshot",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get textSnapshot",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wmodeGPU",{get:function(){return Et.throwPIR("playerglobals/display/Stage","get wmodeGPU",""),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accessibilityProperties",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cacheAsBitmap",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contextMenu",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filters",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"focusRect",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseChildren",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numChildren",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 0},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opaqueBackground",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale9Grid",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleZ",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollRect",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabEnabled",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transform",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.adaptee.x},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.adaptee.y},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{set:function(t){},enumerable:!1,configurable:!0}),e.prototype.addChild=function(e){e.dispatch_ADDED_TO_STAGE();var n=t.prototype.addChild.call(this,e);return e.adaptee.hasDispatchedAddedToStage=!0,e.dispatchStaticEvent(UN.ADDED_TO_STAGE,e),n},e.prototype.addChildAt=function(e,n){e.dispatch_ADDED_TO_STAGE();var i=t.prototype.addChildAt.call(this,e,n);return e.adaptee.hasDispatchedAddedToStage=!0,e.dispatchStaticEvent(UN.ADDED_TO_STAGE,e),i},e.prototype.removeChildAt=function(e){return t.prototype.removeChildAt.call(this,e)},e.prototype.swapChildrenAt=function(e,n){return t.prototype.swapChildrenAt.call(this,e,n)},e.prototype.setChildIndex=function(t,e){return null},e.prototype.addEventListener=function(e,n,i,r,o){void 0===r&&(r=0),void 0===o&&(o=!1),t.prototype.addEventListener.call(this,e,n,!1,r,o)},e.prototype.hasEventListener=function(e){return t.prototype.hasEventListener.call(this,e)},e.prototype.willTrigger=function(){return t.prototype.willTrigger.call(this)},e.prototype.dispatchEvent=function(e){return t.prototype.dispatchEvent.call(this,e)},Object.defineProperty(e.prototype,"loaderInfo",{get:function(){return this.getChildAt(0).loaderInfo},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this._sendEventRender=!0},e.prototype.isFocusInaccessible=function(){return Et.throwPIR("playerglobals/display/Stage","isFocusInaccessible",""),!1},e}(_F),LF=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._ignoreDecodingErrors=!1,e&&n.decode(e),n}return o(e,t),e.prototype.axSetProperty=function(t,e){this[t.getMangledName()]=e},e.prototype.decode=function(t){for(var e=(t=yb(t)).split("&"),n=0;n<e.length;n++){var i=e[n],r=i.indexOf("=");r<0&&(this._ignoreDecodingErrors?r=i.length:this.sec.throwError("Error",kb.DecodeParamError));var o=unescape(i.substring(0,r).split("+").join(" ")),a=unescape(i.substring(r+1).split("+").join(" ")),s=this.axGetPublicProperty(o);void 0===s?this.axSetPublicProperty(o,a):Array.isArray(s)?s.push(a):this.axSetPublicProperty(o,[s,a])}},e.prototype.toString=function(){for(var t=[],e=this.axGetEnumerableKeys(),n=0;n<e.length;n++){var i=e[n].split(" ").join("+"),r=this.axGetPublicProperty(i);if(i=escape(i).split(" ").join("+"),Array.isArray(r))for(var o=0;o<r.length;o++)t.push(i+"="+escape(r[o]));else t.push(i+"="+escape(r))}return t.join("&")},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(Hb),RF=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._adaptee=new ft(e),n}return o(e,t),Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},set:function(t){this._adaptee=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._adaptee.url},set:function(t){t=yb(t),this._adaptee.url=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){var t=this._adaptee.data,e=this._adaptee.data;if(t instanceof st)for(var n in e=new LF,this._adaptee.data.variables)e["$Bg"+n]=this._adaptee.data.variables[n];else"object"==typeof t&&(e=vO(this.sec,t,!0));return this._data=e},set:function(t){this._data=t,this.mapToJSData()},enumerable:!1,configurable:!0}),e.prototype.mapToJSData=function(){var t,e=this._data;if(this.sec.flash.net.URLVariables.axIsType(e))for(var n in t=new st,e)0==n.indexOf("$Bg")&&"function"!=typeof e[n]&&(t.variables[n.replace("$Bg","")]=e[n]);else t=bO(this.sec,e,!0);return this._adaptee.data=t,t},Object.defineProperty(e.prototype,"method",{get:function(){return this._adaptee.method},set:function(t){this._adaptee.method=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentType",{get:function(){return console.log("TODO: URLRequest.contentType"),""},set:function(t){console.log("TODO: URLRequest.contentType")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestHeaders",{get:function(){return console.log("TODO: URLRequest.requestHeaders"),null},set:function(t){console.log("TODO: URLRequest.requestHeaders")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"digest",{get:function(){return console.log("TODO: URLRequest.digest"),null},set:function(t){console.log("TODO: URLRequest.digest")},enumerable:!1,configurable:!0}),e}(Hb),NF=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"formats",{get:function(){return console.log("formats not implemented yet in flash/Clipboard"),[]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"generalClipboard",{get:function(){return console.log("generalClipboard not implemented yet in flash/Clipboard"),null},enumerable:!1,configurable:!0}),e.prototype.clear=function(){console.log("clear not implemented yet in flash/Clipboard")},e.prototype.clearData=function(t){console.log("clearData not implemented yet in flash/Clipboard")},e.prototype.getData=function(t,e){return console.log("getData not implemented yet in flash/Clipboard"),null},e.prototype.hasFormat=function(t){return console.log("hasFormat not implemented yet in flash/Clipboard"),!1},e.prototype.setData=function(t,e,n){return console.log("setData not implemented yet in flash/Clipboard"),!1},e.prototype.setDataHandler=function(t,e,n){return console.log("setDataHandler not implemented yet in flash/Clipboard"),!1},e}(Hb),FF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.BITMAP_FORMAT="air:bitmap",e.FILE_LIST_FORMAT="air:file list",e.FILE_PROMISE_LIST_FORMAT="air:file promise list",e.HTML_FORMAT="air:html",e.RICH_TEXT_FORMAT="air:rtf",e.TEXT_FORMAT="air:text",e.URL_FORMAT="air:url",e}(Hb),kF=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.ALPHA=8,e.BLUE=4,e.GREEN=2,e.RED=1,e}(Hb),UF=function(t){function e(e,n){var i=t.call(this)||this;return i._name=Xo(e),i._frame=0|n,i}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this._name,this._frame)},e.classInitializer=null,e}(zN),VF=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._adaptee=e||new zs,n._adaptee.adapter=n,n}return o(e,t),e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},enumerable:!1,configurable:!0}),e.FromData=function(t,e){return new this.sec.flash.display.Graphics},e.prototype.clear=function(){this.adaptee.clear()},e.prototype.beginFill=function(t,e){void 0===e&&(e=1),e<0&&(e=0),e>1&&(e=1),this.adaptee.beginFill(t,e)},e.prototype.beginGradientFill=function(t,e,n,i,r,o,a,s){void 0===r&&(r=null),void 0===o&&(o="pad"),void 0===a&&(a="rgb"),void 0===s&&(s=0),this.adaptee.beginGradientFill(t,e.value,n.value,i.value,null==r?void 0:r.adaptee,o,a,s)},e.prototype.beginBitmapFill=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=!1),this.adaptee.beginBitmapFill(t.adaptee,null==e?void 0:e.adaptee,n,i)},e.prototype.endFill=function(){this.adaptee.endFill()},e.prototype.lineStyle=function(t,e,n,i,r,o,a,s){void 0===e&&(e=0),void 0===n&&(n=1),void 0===i&&(i=!1),void 0===r&&(r="normal"),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=3),this.adaptee.lineStyle(t,e,n,i,r,o,a,s)},e.prototype.lineGradientStyle=function(t,e,n,i,r,o,a,s){void 0===r&&(r=null),void 0===o&&(o="pad"),void 0===a&&(a="rgb"),void 0===s&&(s=0),this.adaptee.lineGradientStyle(t,e.value,n.value,i.value,null==r?void 0:r.adaptee,o,a,s)},e.prototype.lineBitmapStyle=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=!1),this.adaptee.lineBitmapStyle(t.adaptee,null==e?void 0:e.adaptee,n,i)},e.prototype.drawRect=function(t,e,n,i){this.adaptee.drawRect(t,e,n,i)},e.prototype.drawRoundRect=function(t,e,n,i,r,o){this.adaptee.drawRoundRect(t,e,n,i,r,o)},e.prototype.drawRoundRectComplex=function(t,e,n,i,r,o,a,s){this.adaptee.drawRoundRectComplex(t,e,n,i,r,o,a,s)},e.prototype.drawCircle=function(t,e,n){this.adaptee.drawCircle(t,e,n)},e.prototype.drawEllipse=function(t,e,n,i){this.adaptee.drawEllipse(t,e,n,i)},e.prototype.moveTo=function(t,e){this.adaptee.moveTo(t,e)},e.prototype.lineTo=function(t,e){this.adaptee.lineTo(t,e)},e.prototype.curveTo=function(t,e,n,i){this.adaptee.curveTo(t,e,n,i)},e.prototype.cubicCurveTo=function(t,e,n,i,r,o){this.adaptee.cubicCurveTo(t,e,n,i,r,o)},e.prototype.copyFrom=function(t){this.adaptee.copyFrom(t.adaptee)},e.prototype.drawPath=function(t,e,n){void 0===n&&(n="evenOdd"),this.adaptee.drawPath(t._buffer.slice(0,t.length),e._buffer.slice(0,e.length),n)},e.prototype.drawTriangles=function(t,e,n,i){Et.throwPIR("playerglobals/display/Graphics","drawTriangles","")},e.prototype.drawGraphicsData=function(t){Et.throwPIR("playerglobals/display/Graphics","drawGraphicsData","")},e.prototype.readGraphicsData=function(t){return Et.throwPIR("playerglobals/display/Graphics","readGraphicsData",""),[]},e.classInitializer=null,e}(Hb),jF=function(t){function e(){var e=t.call(this)||this;return e._enabled=!0,e}return o(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return Et.throwPIR("playerglobals/display/NativeMenuItem","get enabled",""),this._enabled},set:function(t){t=!!t,Et.throwPIR("playerglobals/display/NativeMenuItem","set enabled",""),this._enabled=t},enumerable:!1,configurable:!0}),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(zN),GF=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o._name=yb(e),o._labels=n,o.offset=i,o._numFrames=0|r,o}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labels",{get:function(){return this._labels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numFrames",{get:function(){return this._numFrames},enumerable:!1,configurable:!0}),e.prototype.clone=function(){var t=this._labels.value.map((function(t){return t.clone()}));return new e(this._name,this.sec.createArrayUnsafe(t),this.offset,this._numFrames)},e.prototype.getLabelByName=function(t,e){e&&(t=t.toLowerCase());for(var n=this._labels.value,i=0;i<n.length;i++){var r=n[i];if(e?r.name.toLowerCase()===t:r.name===t)return r}return null},e.prototype.getLabelByFrame=function(t){for(var e=this._labels.value,n=0;n<e.length;n++){var i=e[n];if(i.frame===t)return i}return null},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(Hb),QF=function(t){function e(){var e=t.call(this)||this;return e._graphics=new e.sec.flash.display.Graphics(e._adaptee.graphics),e}return o(e,t),e.prototype.createAdaptee=function(){var t=Zs.getNewSprite();return t.reset(),t},Object.defineProperty(e.prototype,"graphics",{get:function(){return this._graphics},enumerable:!1,configurable:!0}),e.prototype.clone=function(){if(!this._symbol)throw"_symbol not defined when cloning movieclip";var t=XM(this._symbol,this._symbol.symbolClass),e=new Zs;return this.adaptee.copyTo(e),t.adaptee=e,t._stage=this.activeStage,t.adaptee.graphics=this.graphics,t},e}(cF),zF=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o._adaptee.addButtonListeners(),o}return o(e,t),e.prototype.addTimelineChildAtDepth=function(t,e){t.reset();for(var n=this.adaptee.numChildren-1,i=n+1,r=0,o=n;o>=0;o--){var a=this.adaptee.getChildAt(o);if(-1==a._avmDepthID&&r++,a._avmDepthID>-1){if(a._avmDepthID<e){i=o+1+r;break}r=0,i=o}}return t._avmDepthID=e,t.just_added_to_timeline=!0,this.adaptee._sessionID_childs[t._sessionID]=t,this.adaptee.addChildAt(t,i)},e.prototype.removeTimelineChildAt=function(t){var e=this.adaptee._sessionID_childs[t];e&&(delete this.adaptee._sessionID_childs[t],this.adaptee.removeChild(e))},e.prototype.queueFrameScripts=function(t,e,n){n?_l.add_script_to_queue(this.adaptee,e):_l.add_script_to_queue_pass2(this.adaptee,e)},e.prototype.removeAllTimelineChilds=function(){var t=this.adaptee;for(var e in t._sessionID_childs){var n=t._sessionID_childs[e];n&&(delete t._sessionID_childs[e],t.removeChild(n))}},e.prototype.constructFrame=function(t,e,n,i,r,o,a){for(var s,l,u=this.adaptee,c=u.numChildren,h=[],p={},d=0;d<c;d++){var f=u.getChildAt(d);(i||-1==f._sessionID)&&(h[h.length]={sessionID:f._sessionID,as3DepthID:f._avmDepthID,addedOnTargetFrame:!1,child:f}),-1!=f._sessionID&&(p[f._sessionID]=f)}this.$Bg__setPropDict&&this.clearPropsDic(),t._update_indices.length=0,t._update_frames.length=0;var _,g,m=0;for(l=e;l<=n;l++){var y=t.frame_command_indices[l],A=t.frame_recipe[l];if(2&A){g=(_=t.command_index_stream[y])+t.command_length_stream[y++];var v={};for(s=_;s<g;s++)v[t.remove_child_stream[s]]=!0;var b=[];c=h.length;for(var x=0;x<c;x++)v[h[x].sessionID]||(b[b.length]=h[x]);h=b}if(4&A)for(g=(_=t.command_index_stream[y])+t.command_length_stream[y++],s=_;s<g;s++){for(var C=h.length-1,I=t.add_child_stream[3*s+1],E=C+1,w=0,S=C;S>=0;S--){var D=h[S];if(-1==D.as3DepthID&&w++,D.as3DepthID>-1){if(D.as3DepthID==I&&D.sessionID==t.add_child_stream[3*S]){E=-1;break}if(D.as3DepthID<I){E=S+1+w;break}w=0,E=S}}E>=h.length?h[h.length]={sessionID:t.add_child_stream[3*s],addedOnTargetFrame:l==n,symbolID:t.add_child_stream[3*s+2],as3DepthID:t.add_child_stream[3*s+1]}:E>-1&&h.splice(E,0,{sessionID:t.add_child_stream[3*s],addedOnTargetFrame:l==n,symbolID:t.add_child_stream[3*s+2],as3DepthID:t.add_child_stream[3*s+1]})}8&A&&(t._update_frames[m]=t.keyframe_firstframes[l],t._update_indices[m++]=y++),16&A&&l==n&&t.start_sounds(u,y)}var T,P=[],B=[],O=[];u._sessionID_childs={},c=P.length=h.length;for(var M=0;M<c;M++)if(-1==(T=h[M]).sessionID&&T.child)P[M]=T.child.adaptee;else if(p[T.sessionID]){var L=p[T.sessionID];u._sessionID_childs[T.sessionID]=L,P[M]=L,i||(P[M]._adapter?(P[M].adapter.isColorTransformByScript()||P[M].transform.clearColorTransform(),P[M].adapter.isBlockedByScript()||P[M].noTimelineUpdate||(P[M].transform.clearMatrix3D(),P[M].updateTimelineMask(null)),P[M].adapter.isVisibilityByScript()||(P[M].visible=!0)):(P[M].transform.clearColorTransform(),P[M].transform.clearMatrix3D(),P[M].visible=!0,P[M].updateTimelineMask(null)))}else{var R=t.getChildInstance(T.symbolID,T.sessionID);this.adaptee.isSlice9ScaledMC&&"[asset Sprite]"==R.assetType&&(R.isSlice9ScaledSprite=!0),R._sessionID=T.sessionID,R._avmDepthID=T.as3DepthID,u._sessionID_childs[T.sessionID]=R,P[M]=R,T.addedOnTargetFrame?O[O.length]=R:B[B.length]=R}for(var N=u.numChildren-1;N>=0;N--)P.indexOf(u.getChildAt(N))<0&&u.removeChildAt(N);for(var F=0;F<P.length;F++)u.contains(P[F])||u.addChildAt(P[F],F);u.preventScript=!0,this.finalizeChildren(B),a&&this.queueFrameScripts(t,r,!o),u.preventScript=!0,this.finalizeChildren(O)},e.prototype.finalizeChildren=function(t){for(var e=t.length,n=0;n<e;n++){t[n].reset()}},e.prototype.initAdapter=function(){},e.prototype.registerScriptObject=function(t){},e.prototype.unregisterScriptObject=function(t){},e.prototype.clearPropsDic=function(){},Object.defineProperty(e.prototype,"downState",{get:function(){return Et.throwPIR("playerglobals/display/SimpleButton","get downState",""),null},set:function(t){Et.throwPIR("playerglobals/display/SimpleButton","set downState","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return Et.throwPIR("playerglobals/display/SimpleButton","get enabled",""),!1},set:function(t){Et.throwPIR("playerglobals/display/SimpleButton","set enabled","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitTestState",{get:function(){return this.adaptee.pickObject.adapter},set:function(t){this.adaptee.pickObject=t.adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overState",{get:function(){return Et.throwPIR("playerglobals/display/SimpleButton","get overState",""),null},set:function(t){Et.throwPIR("playerglobals/display/SimpleButton","set overState","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"soundTransform",{get:function(){return Et.throwPIR("playerglobals/display/SimpleButton","get soundTransform",""),null},set:function(t){Et.throwPIR("playerglobals/display/SimpleButton","set soundTransform","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackAsMenu",{get:function(){return Et.throwPIR("playerglobals/display/SimpleButton","get trackAsMenu",""),!1},set:function(t){Et.throwPIR("playerglobals/display/SimpleButton","set trackAsMenu","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"upState",{get:function(){return Et.throwPIR("playerglobals/display/SimpleButton","get upState",""),null},set:function(t){Et.throwPIR("playerglobals/display/SimpleButton","set upState","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useHandCursor",{get:function(){return Et.throwPIR("playerglobals/display/SimpleButton","get useHandCursor",""),!1},set:function(t){Et.throwPIR("playerglobals/display/SimpleButton","set useHandCursor","")},enumerable:!1,configurable:!0}),e.prototype.clone=function(){var t=this;if(!t._symbol)throw"_symbol not defined when cloning movieclip";var e=XM(t._symbol,t._symbol.symbolClass),n=new yl(this.adaptee.timeline);return this.adaptee.copyTo(n),e.adaptee=n,e._stage=this.activeStage,e.executeConstructor=function(){e.axInitializer(),e.constructorHasRun=!0},e},e}(fF),HF=function(t){function e(e,n){return void 0===e&&(e=""),void 0===n&&(n=0),t.call(this,e,n)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(nx),XF=function(t){function e(e,n){return void 0===e&&(e=""),void 0===n&&(n=0),t.call(this,e,n)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(HF),YF=function(t){function e(e,n){return void 0===e&&(e=""),void 0===n&&(n=0),t.call(this,e,n)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(nx),qF=function(t){function e(e,n){return void 0===e&&(e=""),void 0===n&&(n=0),t.call(this,e,n)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(nx),KF=function(t){function e(e,n){return void 0===e&&(e=""),void 0===n&&(n=0),t.call(this,e,n)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(nx),WF=function(t){function e(e,n){return void 0===e&&(e=""),void 0===n&&(n=0),t.call(this,e,n)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(nx),JF=function(t){function e(e,n){return void 0===e&&(e=""),void 0===n&&(n=0),t.call(this,e,n)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(nx),ZF=function(t){function e(e,n,i,r,o,a,s,l){void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=0);var u=t.call(this)||this;if(e instanceof T)u._adaptee=e;else{var c=+e,h=+n,p=+i,d=+r;u._adaptee=new T(c==c?c:1,h==h?h:1,p==p?p:1,d==d?d:1,+o||0,+a||0,+s||0,+l||0)}return u}return o(e,t),e.classInitializer=function(){this.FROZEN_IDENTITY_COLOR_TRANSFORM=Object.freeze(this.axConstruct([])),this.TEMP_COLOR_TRANSFORM=this.axConstruct([])},Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaMultiplier",{get:function(){return this._adaptee._rawData[3]},set:function(t){this._adaptee._rawData[3]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alphaOffset",{get:function(){return this._adaptee._rawData[7]},set:function(t){this._adaptee._rawData[7]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blueMultiplier",{get:function(){return this._adaptee._rawData[2]},set:function(t){this._adaptee._rawData[2]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blueOffset",{get:function(){return this._adaptee._rawData[6]},set:function(t){this._adaptee._rawData[6]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"greenMultiplier",{get:function(){return this._adaptee._rawData[1]},set:function(t){this._adaptee._rawData[1]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"greenOffset",{get:function(){return this._adaptee._rawData[5]},set:function(t){this._adaptee._rawData[5]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redMultiplier",{get:function(){return this._adaptee._rawData[0]},set:function(t){this._adaptee._rawData[0]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redOffset",{get:function(){return this._adaptee._rawData[4]},set:function(t){this._adaptee._rawData[4]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._adaptee.color},set:function(t){this._adaptee.color=+t},enumerable:!1,configurable:!0}),e.prototype.concat=function(t){this._adaptee.concat(t.adaptee)},e.prototype.preMultiply=function(t){this._adaptee._rawData[4]+=t.adaptee._rawData[4]*this._adaptee._rawData[0],this._adaptee._rawData[5]+=t.adaptee._rawData[5]*this._adaptee._rawData[1],this._adaptee._rawData[6]+=t.adaptee._rawData[6]*this._adaptee._rawData[2],this._adaptee._rawData[7]+=t.adaptee._rawData[7]*this._adaptee._rawData[3],this._adaptee._rawData[0]*=t.adaptee._rawData[0],this._adaptee._rawData[1]*=t.adaptee._rawData[1],this._adaptee._rawData[2]*=t.adaptee._rawData[2],this._adaptee._rawData[3]*=t.adaptee._rawData[3]},e.prototype.copyFrom=function(t){this._adaptee.copyFrom(t.adaptee)},e.prototype.setTo=function(t,e,n,i,r,o,a,s){var l=+t,u=+e,c=+n,h=+i;this._adaptee._rawData[0]=l==l?l:1,this._adaptee._rawData[1]=u==u?u:1,this._adaptee._rawData[2]=c==c?c:1,this._adaptee._rawData[3]=h==h?h:1,this._adaptee._rawData[4]=+r||0,this._adaptee._rawData[5]=+o||0,this._adaptee._rawData[6]=+a||0,this._adaptee._rawData[7]=+s||0},e.prototype.clone=function(){return new this.sec.flash.geom.ColorTransform(this._adaptee._rawData[0],this._adaptee._rawData[1],this._adaptee._rawData[2],this._adaptee._rawData[3],this._adaptee._rawData[4],this._adaptee._rawData[5],this._adaptee._rawData[6],this._adaptee._rawData[7])},e.prototype.convertToFixedPoint=function(){return this._adaptee._rawData[0]=Kh(this._adaptee._rawData[0]),this._adaptee._rawData[1]=Kh(this._adaptee._rawData[1]),this._adaptee._rawData[2]=Kh(this._adaptee._rawData[2]),this._adaptee._rawData[3]=Kh(this._adaptee._rawData[3]),this._adaptee._rawData[4]=Wh(this._adaptee._rawData[4]),this._adaptee._rawData[5]=Wh(this._adaptee._rawData[5]),this._adaptee._rawData[6]=Wh(this._adaptee._rawData[6]),this._adaptee._rawData[7]=Wh(this._adaptee._rawData[7]),this},e.prototype.dispose=function(){throw new u},e.prototype.equals=function(t){return this===t||this._adaptee._rawData[0]===t._adaptee._rawData[0]&&this._adaptee._rawData[1]===t._adaptee._rawData[1]&&this._adaptee._rawData[2]===t._adaptee._rawData[2]&&this._adaptee._rawData[3]===t._adaptee._rawData[3]&&this._adaptee._rawData[4]===t._adaptee._rawData[4]&&this._adaptee._rawData[5]===t._adaptee._rawData[5]&&this._adaptee._rawData[6]===t._adaptee._rawData[6]&&this._adaptee._rawData[7]===t._adaptee._rawData[7]},e.prototype.toString=function(){return"(redMultiplier="+this._adaptee._rawData[0]+", greenMultiplier="+this._adaptee._rawData[1]+", blueMultiplier="+this._adaptee._rawData[2]+", alphaMultiplier="+this._adaptee._rawData[3]+", redOffset="+this._adaptee._rawData[4]+", greenOffset="+this._adaptee._rawData[5]+", blueOffset="+this._adaptee._rawData[6]+", alphaOffset="+this._adaptee._rawData[7]+")"},e.classSymbols=null,e.instanceSymbols=null,e}(Hb),$F=function(t){function e(e,n,i,r,o,a){void 0===e&&(e=1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=0);var s=t.call(this)||this;return s._adaptee=e instanceof M?e:new M(+e,+n,+i,+r,+o,+a),s}return o(e,t),e.classInitializer=function(){this.FROZEN_IDENTITY_MATRIX=Object.freeze(this.axConstruct([])),this.TEMP_MATRIX=this.axConstruct([])},Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return this._adaptee.rawData[0]},set:function(t){this._adaptee.rawData[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this._adaptee.rawData[1]},set:function(t){this._adaptee.rawData[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"c",{get:function(){return this._adaptee.rawData[2]},set:function(t){this._adaptee.rawData[2]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"d",{get:function(){return this._adaptee.rawData[3]},set:function(t){this._adaptee.rawData[3]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tx",{get:function(){return this._adaptee.rawData[4]},set:function(t){this._adaptee.rawData[4]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ty",{get:function(){return this._adaptee.rawData[5]},set:function(t){this._adaptee.rawData[5]=t},enumerable:!1,configurable:!0}),e.FromUntyped=function(t){return new this.sec.flash.geom.Matrix(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.FromDataBuffer=function(t){return new this.sec.flash.geom.Matrix(t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())},e.prototype.concat=function(t){this._adaptee.concat(t.adaptee)},e.prototype.invert=function(){this._adaptee.invert()},e.prototype.identity=function(){this._adaptee.identity()},e.prototype.createBox=function(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),this._adaptee.createBox(t,e,n,i,r)},e.prototype.createGradientBox=function(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),this._adaptee.createGradientBox(t,e,n,i,r)},e.prototype.rotate=function(t){this._adaptee.rotate(t)},e.prototype.translate=function(t,e){this._adaptee.translate(t,e)},e.prototype.scale=function(t,e){this._adaptee.scale(t,e)},e.prototype.deltaTransformPoint=function(t){return new this.sec.flash.geom.Point(this._adaptee.deltaTransformPoint(t.adaptee))},e.prototype.transformPoint=function(t){return new this.sec.flash.geom.Point(this._adaptee.transformPoint(t.adaptee))},e.prototype.copyFrom=function(t){this._adaptee.copyFrom(t.adaptee)},e.prototype.setTo=function(t,e,n,i,r,o){this._adaptee.setTo(t,e,n,i,r,o)},e.prototype.copyRowTo=function(t,e){this._adaptee.copyRowTo(t,e.adaptee)},e.prototype.copyColumnTo=function(t,e){this._adaptee.copyColumnTo(t,e.adaptee)},e.prototype.copyRowFrom=function(t,e){this._adaptee.copyRowFrom(t,e.adaptee)},e.prototype.copyColumnFrom=function(t,e){this._adaptee.copyColumnFrom(t,e.adaptee)},e.prototype.clone=function(){return new this.sec.flash.geom.Matrix(this._adaptee.clone())},e.prototype.toString=function(){var t=this._adaptee.rawData;return"(a="+t[0]+", b="+t[1]+", c="+t[2]+", d="+t[3]+", tx="+t[4]+", ty="+t[5]+")"},e.prototype.writeExternal=function(t){var e=this._adaptee.rawData;t.writeFloat(e[0]),t.writeFloat(e[1]),t.writeFloat(e[2]),t.writeFloat(e[3]),t.writeFloat(e[4]),t.writeFloat(e[5])},e.classSymbols=null,e.instanceSymbols=null,e}(Hb),tk=new Uint32Array([0,4,8,12,1,5,9,13,2,6,10,14,3,7,11,15]),ek=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return e instanceof U?n._adaptee=e:(n._adaptee=new U,e&&e.length>=16?n.copyRawDataFrom(e,0,!1):n.identity()),n}return o(e,t),Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},enumerable:!1,configurable:!0}),e.interpolate=function(t,e,n){},Object.defineProperty(e.prototype,"rawData",{get:function(){var t=new this.sec.Float64Vector;return this.copyRawDataTo(t,0,!1),t},set:function(t){this.copyRawDataFrom(t,0,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return new this.sec.flash.geom.Vector3D(this._adaptee.position)},set:function(t){this.copyColumnFrom(3,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"determinant",{get:function(){return this._adaptee.determinant},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new this.sec.flash.geom.Matrix3D(this._adaptee.clone())},e.prototype.copyToMatrix3D=function(t){this._adaptee.copyTo(t.adaptee)},e.prototype.append=function(t){this._adaptee.append(t.adaptee)},e.prototype.prepend=function(t){this._adaptee.prepend(t.adaptee)},e.prototype.invert=function(){return this._adaptee.invert()},e.prototype.identity=function(){this._adaptee.identity()},e.prototype.decompose=function(t){void 0===t&&(t="eulerAngles"),this._adaptee.decompose(t),t=Xo(t)},e.prototype.recompose=function(t,e){},e.prototype.appendTranslation=function(t,e,n){this._adaptee.appendTranslation(+t,+e,+n)},e.prototype.appendRotation=function(t,e,n){this._adaptee.appendRotation(+t,e.adaptee)},e.prototype.appendScale=function(t,e,n){this._adaptee.appendScale(+t,+e,+n)},e.prototype.prependTranslation=function(t,e,n){this._adaptee.prependTranslation(+t,+e,+n)},e.prototype.prependRotation=function(t,e,n){this._adaptee.prependRotation(+t,e.adaptee)},e.prototype.prependScale=function(t,e,n){this._adaptee.prependScale(+t,+e,+n)},e.prototype.transformVector=function(t){return new this.sec.flash.geom.Vector3D(this._adaptee.transformVector(t.adaptee))},e.prototype.deltaTransformVector=function(t){return new this.sec.flash.geom.Vector3D(this._adaptee.deltaTransformVector(t.adaptee))},e.prototype.transformVectors=function(t,e){for(var n=this._adaptee._rawData,i=n[0],r=n[4],o=n[8],a=n[12],s=n[1],l=n[5],u=n[9],c=n[13],h=n[2],p=n[6],d=n[10],f=n[14],_=0;_<t.length-2;_+=3){var g=t.axGetNumericProperty(_),m=t.axGetNumericProperty(_+1),y=t.axGetNumericProperty(_+2);e.push(i*g+r*m+o*y+a),e.push(s*g+l*m+u*y+c),e.push(h*g+p*m+d*y+f)}},e.prototype.transpose=function(){this._adaptee.transpose()},e.prototype.pointAt=function(t,e,n){},e.prototype.interpolateTo=function(t,e){},e.prototype.copyFrom=function(t){this._adaptee.copyFrom(t.adaptee)},e.prototype.copyRawDataTo=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),e>>>=0,n=!!n;var i=this._adaptee._rawData;if(n)for(var r=0,o=0|e;r<16;r++,o++)t.axSetNumericProperty(o,i[tk[r]]);else for(r=0,o=0|e;r<16;r++,o++)t.axSetNumericProperty(o,i[r])},e.prototype.copyRawDataFrom=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),e>>>=0,n=!!n;var i=this._adaptee._rawData;if(n)for(var r=0,o=0|e;r<16;r++,o++)i[tk[r]]=t.axGetNumericProperty(o)||0;else for(r=0,o=0|e;r<16;r++,o++)i[r]=t.axGetNumericProperty(o)||0},e.prototype.copyRowTo=function(t,e){this._adaptee.copyRowTo(t>>>0,e.adaptee)},e.prototype.copyColumnTo=function(t,e){this._adaptee.copyColumnTo(t>>>0,e.adaptee)},e.prototype.copyRowFrom=function(t,e){this._adaptee.copyRowFrom(t>>>0,e.adaptee)},e.prototype.copyColumnFrom=function(t,e){this._adaptee.copyColumnFrom(t>>>0,e.adaptee)},e.classInitializer=null,e}(Hb),nk=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=t.call(this)||this;return i._constructorCalled=!0,i._adaptee=e instanceof O?e:new O(+e,+n),i._constructorCalled=!0,i}return o(e,t),Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._constructorCalled?this._adaptee._rawData[0]:(console.warn("[Point] Read x before call constructor"),0)},set:function(t){this._adaptee._rawData[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._constructorCalled?this._adaptee._rawData[1]:(console.warn("[Point] Read y before call constructor"),0)},set:function(t){this._adaptee._rawData[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._adaptee.length},enumerable:!1,configurable:!0}),e.interpolate=function(t,e,n){return new this.sec.flash.geom.Point(O.interpolate(t.adaptee,e.adaptee,n))},e.distance=function(t,e){return O.distance(t.adaptee,e.adaptee)},e.polar=function(t,e){return new this.sec.flash.geom.Point(O.polar(+t,+e))},e.prototype.clone=function(){return new this.sec.flash.geom.Point(this._adaptee.clone())},e.prototype.offset=function(t,e){this._adaptee.offset(t,e)},e.prototype.equals=function(t){return this._adaptee.equals(t.adaptee)},e.prototype.subtract=function(t){return new this.sec.flash.geom.Point(this._adaptee.subtract(t.adaptee))},e.prototype.add=function(t){return new this.sec.flash.geom.Point(this._adaptee.add(t.adaptee))},e.prototype.normalize=function(t){void 0===t&&(t=1),this._adaptee.normalize(+t)},e.prototype.copyFrom=function(t){this._adaptee.copyFrom(t.adaptee)},e.prototype.setTo=function(t,e){this._adaptee.setTo(t,e)},e.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(Hb),ik=function(t){function e(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0);var o=t.call(this)||this;return o._adaptee=e instanceof W?e:new W(+e,+n,+i,+r),o}return o(e,t),Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._adaptee._rawData[3]},set:function(t){this._adaptee._rawData[3]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._adaptee._rawData[2]},set:function(t){this._adaptee._rawData[2]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._adaptee._rawData[0]},set:function(t){this._adaptee._rawData[0]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._adaptee._rawData[1]},set:function(t){this._adaptee._rawData[1]=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._adaptee.bottom},set:function(t){this._adaptee.bottom=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new this.sec.flash.geom.Point(this._adaptee.bottomRight)},set:function(t){this.bottom=t.y,this.right=t.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._adaptee.left},set:function(t){this._adaptee.left=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._adaptee.right},set:function(t){this._adaptee.right=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return new this.sec.flash.geom.Point(this._adaptee.size)},set:function(t){this.width=t.x,this.height=t.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._adaptee.top},set:function(t){this._adaptee.top=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new this.sec.flash.geom.Point(this._adaptee.topLeft)},set:function(t){this.top=t.y,this.left=t.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!1,configurable:!0}),e.FromBounds=function(t){var e=t.xMin,n=t.yMin;return new this.sec.flash.geom.Rectangle(e/20,n/20,(t.xMax-e)/20,(t.yMax-n)/20)},e.prototype.clone=function(){return new this.sec.flash.geom.Rectangle(this._adaptee.clone())},e.prototype.isEmpty=function(){return this._adaptee.isEmpty()},e.prototype.setEmpty=function(){return this._adaptee.setEmpty()},e.prototype.inflate=function(t,e){this._adaptee.inflate(+t,+e)},e.prototype.inflatePoint=function(t){this._adaptee.inflatePoint(t.adaptee)},e.prototype.offset=function(t,e){this._adaptee.offset(+t,+e)},e.prototype.offsetPoint=function(t){this._adaptee.offsetPoint(t.adaptee)},e.prototype.contains=function(t,e){return this._adaptee.contains(+t,+e)},e.prototype.containsPoint=function(t){return this._adaptee.containsPoint(t.adaptee)},e.prototype.containsRect=function(t){return this._adaptee.containsRect(t.adaptee)},e.prototype.intersection=function(t){return new this.sec.flash.geom.Rectangle(this._adaptee.intersection(t.adaptee))},e.prototype.intersects=function(t){return this._adaptee.intersects(t.adaptee)},e.prototype.union=function(t){return new this.sec.flash.geom.Rectangle(this._adaptee.union(t.adaptee))},e.prototype.equals=function(t){return this._adaptee.equals(t.adaptee)},e.prototype.copyFrom=function(t){this._adaptee.copyFrom(t.adaptee)},e.prototype.setTo=function(t,e,n,i){this._adaptee.setTo(+t,+e,+n,+i)},e.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+")"},e.prototype.hashCode=function(){var t=0;return t+=20*this.x|0,t*=37,t+=20*this.y|0,t*=37,t+=20*this.width|0,t*=37,t+=20*this.height|0},e.prototype.writeExternal=function(t){t.writeFloat(this.x),t.writeFloat(this.y),t.writeFloat(this.width),t.writeFloat(this.height)},e.prototype.readExternal=function(t){this.x=t.readFloat(),this.y=t.readFloat(),this.width=t.readFloat(),this.height=t.readFloat()},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(Hb),rk=function(t){function e(e){var n=t.call(this)||this;return e||n.sec.throwError("ArgumentError",kb.NullPointerError,"displayObject"),n._adaptee=e instanceof V?e:new V,n}return o(e,t),Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return new this.sec.flash.geom.Matrix(this._adaptee.matrix)},set:function(t){this._adaptee.matrix=t.adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorTransform",{get:function(){return new this.sec.flash.geom.ColorTransform(this._adaptee.colorTransform)},set:function(t){this._adaptee.colorTransform=t.adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"concatenatedMatrix",{get:function(){return new this.sec.flash.geom.Matrix(this._adaptee.matrix)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"concatenatedColorTransform",{get:function(){return new this.sec.flash.geom.ColorTransform(this._adaptee.colorTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelBounds",{get:function(){return new this.sec.flash.geom.Rectangle(this._adaptee.pixelBounds)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrix3D",{get:function(){return new this.sec.flash.geom.Matrix3D(this._adaptee.matrix3D)},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.getRelativeMatrix3D=function(t){return function(t,e,n){null==t&&n.throwError("TypeError",kb.NullPointerError,e)}(t,"relativeTo",this.sec),new this.sec.flash.geom.Matrix3D(this._adaptee.matrix3D)},Object.defineProperty(e.prototype,"perspectiveProjection",{get:function(){return new xt},set:function(t){},enumerable:!1,configurable:!0}),e.classInitializer=null,e}(Hb),ok=function(t){function e(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0);var o=t.call(this)||this;return o._adaptee=e instanceof L?e:new L(+e,+n,+i,+r),o}return o(e,t),e.classInitializer=function(){this.X_AXIS=Object.freeze(this.Create(1,0,0,0)),this.Y_AXIS=Object.freeze(this.Create(1,0,0,0)),this.Z_AXIS=Object.freeze(this.Create(1,0,0,0))},e.Create=function(t,e,n,i){var r=Object.create(this.tPrototype);return r._adaptee=new L(t,e,n,i),r},Object.defineProperty(e.prototype,"adaptee",{get:function(){return this._adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._adaptee._rawData[0]},set:function(t){this._adaptee._rawData[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._adaptee._rawData[1]},set:function(t){this._adaptee._rawData[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._adaptee._rawData[2]},set:function(t){this._adaptee._rawData[2]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._adaptee._rawData[3]},set:function(t){this._adaptee._rawData[3]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._adaptee.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lengthSquared",{get:function(){return this._adaptee.lengthSquared},enumerable:!1,configurable:!0}),e.angleBetween=function(t,e){return L.angleBetween(t.adaptee,e.adaptee)},e.distance=function(t,e){return L.distance(t.adaptee,e.adaptee)},e.prototype.dotProduct=function(t){return this._adaptee.dotProduct(t.adaptee)},e.prototype.crossProduct=function(t){return new this.sec.flash.geom.Vector3D(this._adaptee.crossProduct(t.adaptee))},e.prototype.normalize=function(){return this._adaptee.normalize()},e.prototype.scaleBy=function(t){this._adaptee.scaleBy(+t)},e.prototype.incrementBy=function(t){this._adaptee.incrementBy(t.adaptee)},e.prototype.decrementBy=function(t){this._adaptee.decrementBy(t.adaptee)},e.prototype.add=function(t){return new this.sec.flash.geom.Vector3D(this._adaptee.add(t.adaptee))},e.prototype.subtract=function(t){return new this.sec.flash.geom.Vector3D(this._adaptee.subtract(t.adaptee))},e.prototype.negate=function(){this._adaptee.negate()},e.prototype.equals=function(t,e){return this._adaptee.equals(t.adaptee,e)},e.prototype.nearEquals=function(t,e,n){return this._adaptee.nearEquals(t.adaptee,e,n)},e.prototype.project=function(){this._adaptee.project()},e.prototype.copyFrom=function(t){this._adaptee.copyFrom(t.adaptee)},e.prototype.setTo=function(t,e,n){this._adaptee.setTo(t,e,n)},e.prototype.clone=function(){return new this.sec.flash.geom.Vector3D(this._adaptee.clone())},e.prototype.toString=function(){return"Vector3D("+this.x+", "+this.y+", "+this.z+")"},e}(Hb),ak=function(){function t(){}return t.BUFFER_OVERFLOW_ERROR="bufferOverflowError",t.ERROR_CODE_UNKNOWN="errorCodeUnknown",t.ILLEGAL_ARGUMENT_ERROR="illegalArgumentError",t.INDEX_OUT_OF_BOUNDS_ERROR="indexOutOfBoundsError",t.INVALID_ATTR_VALUE="invalidAttrValue",t.INVALID_CHAR_FOUND="invalidCharFound",t.MEMORY_ALLOCATION_ERROR="memoryAllocationError",t.NO_ERROR="noError",t.NUMBER_OVERFLOW_ERROR="numberOverflowError",t.PARSE_ERROR="parseError",t.PATTERN_SYNTAX_ERROR="patternSyntaxError",t.PLATFORM_API_FAILED="platformAPIFailed",t.TRUNCATED_CHAR_FOUND="truncatedCharFound",t.UNEXPECTED_TOKEN="unexpectedToken",t.UNSUPPORTED_ERROR="unsupportedError",t.USING_DEFAULT_WARNING="usingDefaultWarning",t.USING_FALLBACK_WARNING="usingFallbackWarning",t}(),sk=function(t){function e(e){var n=t.call(this)||this;return n._name=e,n.DEFAULT="i-default",n._lastOperationStatus=ak.USING_DEFAULT_WARNING,n}return o(e,t),Object.defineProperty(e.prototype,"lastOperationStatus",{get:function(){return this._lastOperationStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ctor",{get:function(){return e},enumerable:!1,configurable:!0}),e.determinePreferredLocales=function(t,e,n){return console.warn("[LocaleID] `determinePreferredLocales` not implemented"),new Nx},e.prototype.getLanguage=function(){return console.warn("[LocaleID] `getLanguage` not implemented, use default: en"),this._lastOperationStatus=ak.NO_ERROR,"en"},e.prototype.getRegion=function(){return console.warn("[LocaleID] `getRegion` not implemented, use default: UK"),this._lastOperationStatus=ak.NO_ERROR,"UK"},e.prototype.getScript=function(){return console.warn("[LocaleID] `getScript` not implemented, use default: ''"),this._lastOperationStatus=ak.USING_DEFAULT_WARNING,""},e.prototype.getVariant=function(){return console.warn("[LocaleID] `getVariant` not implemented, use default: ''"),this._lastOperationStatus=ak.USING_DEFAULT_WARNING,""},e.prototype.isRightToLeft=function(){return console.warn("[LocaleID] `isRightToLeft` not implemented, use default: true"),!0},e.prototype.getKeysAndValues=function(){return console.warn("[LocaleID] `isRightToLeft` not implemented, use default: null"),this._lastOperationStatus=ak.USING_DEFAULT_WARNING,null},e}(Hb),lk=function(t){function e(e,n,i,r,o,a,s){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0);var l=t.call(this,e,n,i)||this;return l.timestamp=+r,l.accelerationX=+o,l.accelerationY=+a,l.accelerationZ=+s,l}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.UPDATE="update",e}(UN),uk=function(t){function e(e,n,i,r){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=!1);var o=t.call(this,e,n,i)||this;return o.activating=!!r,o}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.ACTIVITY="activity",e}(UN),ck=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=""),void 0===o&&(o=null);var a=t.call(this,e,n,i,r)||this;return a.$Bgerror=o,a}return o(e,t),Object.defineProperty(e.prototype,"error",{get:function(){return this.$Bgerror},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this._type,this._bubbles,this._cancelable,this._text,this.$Bgerror)},e.prototype.toString=function(){return this.formatToString("AsyncErrorEvent","type","bubbles","cancelable","eventPhase","text","error")},e.ASYNC_ERROR="asyncError",e.classInitializer=null,e}(IF),hk=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=null),void 0===o&&(o=null);var a=t.call(this,e,n,i)||this;return a.mouseTarget=r,a.contextMenuOwner=o,a}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.MENU_ITEM_SELECT="menuItemSelect",e.MENU_SELECT="menuSelect",e}(UN),pk=function(t){function e(e,n,i,r){return void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=""),t.call(this,e,n,i,r)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.DATA="data",e.UPLOAD_COMPLETE_DATA="uploadCompleteData",e}(CF),dk=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,e}(Hb),fk=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===o&&(o=!1);var a=t.call(this,e,n,i)||this;return a.fullScreen=!!r,a.interactive=!!o,a}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.FULL_SCREEN="fullScreen",e.FULL_SCREEN_INTERACTIVE_ACCEPTED="fullScreenInteractiveAccepted",e}(uk),_k=function(t){function e(e,n,i,r){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=null);var o=t.call(this,e,n,i)||this;return o.device=r,o}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.DEVICE_ADDED="deviceAdded",e.DEVICE_REMOVED="deviceRemoved",e}(UN),gk=function(t){function e(e,n,i,r,o,a,s,l,u,c,h){return void 0===n&&(n=!1),void 0===i&&(i=!1),t.call(this,e,n,i)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.UPDATE="update",e}(UN),mk=function(t){function e(e,n,i,r,o,a,s,l,u){void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===r&&(r=null),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=!1),void 0===l&&(l=!1),void 0===u&&(u=!1);var c=t.call(this,e,n,i)||this;return c._phase=Xo(r),c._localX=+o,c._localY=+a,c._ctrlKey=!!s,c._altKey=!!l,c._shiftKey=!!u,c}return o(e,t),Object.defineProperty(e.prototype,"localX",{get:function(){return this._localX},set:function(t){this._localX=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localY",{get:function(){return this._localY},set:function(t){this._localY=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageX",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageY",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ctrlKey",{get:function(){return this._ctrlKey},set:function(t){this._ctrlKey=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"altKey",{get:function(){return this._altKey},set:function(t){this._altKey=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shiftKey",{get:function(){return this._shiftKey},set:function(t){this._shiftKey=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=Xo(t)},enumerable:!1,configurable:!0}),e.prototype.updateAfterEvent=function(){},e.prototype.NativeCtor=function(t,e,n,i,r,o){this._phase=Xo(t),this._localX=+e,this._localY=+n,this._ctrlKey=!!i,this._altKey=!!r,this._shiftKey=!!o},e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.phase,this.localX,this.localY,this.ctrlKey,this.altKey,this.shiftKey)},e.prototype.toString=function(){return this.formatToString("GestureEvent","type","bubbles","cancelable","eventPhase","localX","localY","ctrlKey","altKey","shiftKey")},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.GESTURE_TWO_FINGER_TAP="gestureTwoFingerTap",e}(UN),yk=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.BEGIN="begin",e.UPDATE="update",e.END="end",e.ALL="all",e}(Hb),Ak=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=0),void 0===o&&(o=!1);var a=t.call(this,e,n,i)||this;return a._status=r,a._redirected=o,a._responseURL="",a._responseHeaders=null,a}return o(e,t),e.prototype._setStatus=function(t){this._status=t},Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"redirected",{get:function(){return this._redirected},set:function(t){this._redirected=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseURL",{get:function(){return this._responseURL},set:function(t){this._responseURL=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseHeaders",{get:function(){return this._responseHeaders},set:function(t){this._responseHeaders=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this._status,this._redirected)},e.prototype.toString=function(){return this.formatToString("IOErrorEvent","type","bubbles","cancelable","text","errorID")},e.classInitializer=null,e.HTTP_RESPONSE_STATUS="httpResponseStatus",e.HTTP_STATUS="httpStatus",e}(UN),vk=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=""),void 0===o&&(o=null);var a=t.call(this,e,n,i,r)||this;return a.imeClient=o,a}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.IME_COMPOSITION="imeComposition",e.IME_START_COMPOSITION="imeStartComposition",e}(CF),bk=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=0),void 0===o&&(o=null);var a=t.call(this,e,n,i)||this;return a.timestamp=+r,a.info=o,a}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.MEDIA_TYPE_DATA="mediaTypeData",e}(UN),xk=function(t){function e(e,n,i,r){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=null);var o=t.call(this,e,n,i)||this;return o._info=r,o}return o(e,t),Object.defineProperty(e.prototype,"info",{get:function(){return this._info},set:function(t){this._info=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.info)},e.prototype.toString=function(){return this.formatToString("NetStatusEvent","type","bubbles","cancelable","eventPhase","info")},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.NET_STATUS="netStatus",e}(UN),Ck=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=0),void 0===o&&(o=0);var a=t.call(this,e,n,i)||this;return a.bytesPending=+r,a.bytesTotal=+o,a}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.OUTPUT_PROGRESS="outputProgress",e}(UN),Ik=function(t){function e(e,n,i,r,o,a,s,l,u,c,h){void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===r&&(r=null),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=!1),void 0===c&&(c=!1),void 0===h&&(h=!1);var p=t.call(this,e,n,i,r,o,a,u,c,h)||this;return p.tapLocalX=+s,p.tapLocalY=+l,p}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.GESTURE_PRESS_AND_TAP="gesturePressAndTap",e}(mk),Ek=function(t){function e(e,n,i,r,o){return void 0===n&&(n=!1),void 0===i&&(i=!1),t.call(this,e,n,i)||this}return o(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return console.log("data not implemented yet in flash/SampleDataEvent"),null},set:function(t){console.log("data not implemented yet in flash/SampleDataEvent")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return console.log("position not implemented yet in flash/SampleDataEvent"),0},set:function(t){console.log("position not implemented yet in flash/SampleDataEvent")},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return console.log("clone not implemented yet in flash/SampleDataEvent"),null},e.prototype.toString=function(){return console.log("toString not implemented yet in flash/SampleDataEvent"),""},e.SAMPLE_DATA="sampleData",e}(UN),wk=function(t){function e(e,n,i,r,o,a){return void 0===n&&(n=!1),void 0===i&&(i=!1),t.call(this,e,n,i)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.COMPLETE="complete",e}(UN),Sk=function(t){function e(e,n,i,r,o){return t.call(this,e,n,i)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.SOFT_KEYBOARD_ACTIVATE="softKeyboardActivate",e.SOFT_KEYBOARD_DEACTIVATE="softKeyboardDeactivate",e.SOFT_KEYBOARD_ACTIVATING="softKeyboardActivating",e}(UN),Dk=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.CONTENT_TRIGGERED="contentTriggered",e.USER_TRIGGERED="userTriggered",e}(Hb),Tk=function(t){function e(e,n,i,r){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=null);var o=t.call(this,e,n,i)||this;return o.availability=Xo(r),o}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.STAGE_VIDEO_AVAILABILITY="stageVideoAvailability",e}(UN),Pk=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=null),void 0===o&&(o=null);var a=t.call(this,e,n,i)||this;return a.status=Xo(r),a.colorSpace=Xo(o),a}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.RENDER_STATE="renderState",e.RENDER_STATUS_UNAVAILABLE="unavailable",e.RENDER_STATUS_SOFTWARE="software",e.RENDER_STATUS_ACCELERATED="accelerated",e}(UN),Bk=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=""),void 0===o&&(o="");var a=t.call(this,e,n,i)||this;return a._code=yb(r),a._level=yb(o),a}return o(e,t),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this._code},set:function(t){this._code=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this._type,this._bubbles,this._cancelable,this._code,this._level)},e.prototype.toString=function(){return this.formatToString("StatusEvent","type","bubbles","cancelable","eventPhase","code","level")},e.classInitializer=null,e.STATUS="status",e}(UN),Ok=function(t){function e(e,n,i,r){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=null);var o=t.call(this,e,n,i)||this;return o.changeList=r,o}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.SYNC="sync",e}(UN),Mk=function(t){function e(e,n,i,r,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=null),void 0===o&&(o=0);var a=t.call(this,e,n,i)||this;return a.state=Xo(r),a.targetFrameRate=+o,a}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.THROTTLE="throttle",e}(UN),Lk=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.THROTTLE="throttle",e.PAUSE="pause",e.RESUME="resume",e}(Hb),Rk=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.clone=function(){return new this.sec.flash.events.TimerEvent(this.type,this.bubbles,this.cancelable)},e.prototype.toString=function(){return this.formatToString("TimerEvent","type","bubbles","cancelable","eventPhase")},e.prototype.updateAfterEvent=function(){this.sec.player.requestRender()},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.TIMER="timer",e.TIMER_COMPLETE="timerComplete",e}(UN),Nk=function(t){function e(e,n,i,r,o,a,s,l,u,c,h,p,d,f){return void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===r&&(r=null),void 0===o&&(o=0),void 0===a&&(a=0),void 0===p&&(p=!1),void 0===d&&(d=!1),void 0===f&&(f=!1),t.call(this,e,n,i,r,o,a,p,d,f)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.GESTURE_ZOOM="gestureZoom",e.GESTURE_PAN="gesturePan",e.GESTURE_ROTATE="gestureRotate",e.GESTURE_SWIPE="gestureSwipe",e}(mk),Fk=function(t){function e(e,n,i,r){return void 0===e&&(e="uncaughtError"),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===r&&(r=null),t.call(this,e,n,i,r)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.UNCAUGHT_ERROR="uncaughtError",e}(IF),kk=function(t){function e(e,n,i,r){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=null);var o=t.call(this,e,n,i)||this;return o.status=yb(r),o}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.RENDER_STATE="renderState",e.RENDER_STATUS_UNAVAILABLE="unavailable",e.RENDER_STATUS_SOFTWARE="software",e.RENDER_STATUS_ACCELERATED="accelerated",e}(UN),Uk=function(t){function e(){return t.call(this)||this}return o(e,t),e.ensureInitialized=function(){this.available||this.sec.throwError("Error",kb.ExternalInterfaceNotAvailableError),this.initialized||(this.initialized=!0,Mf.initJS(this._callIn))},e.call=function(t){this.ensureInitialized();var e="";if(arguments.length>1){for(var n=[],i=1;i<arguments.length;i++)n.push(this.convertToJSString(arguments[i]));e=n.join(",")}var r=this.$BgmarshallExceptions?'"<exception>" + e + "</exception>";':'"<undefined/>";',o="try {"+Mf.interfaceID+".__flash__toXML("+t+"("+e+"));} catch (e) {"+r+"}",a=this._evalJS(o);return null==a?null:this.convertFromXML(this.convertToXML(a))},e.addCallback=function(t,e){var n=this;if(this.ensureInitialized(),e){var i=this;this._addCallback(t,(function(t,r){var o,a=!0;if(void 0!==r)if(Array.isArray(r)){for(var s=[],l=0;l<r.length;l++){var u=r[l];"object"==typeof u&&u?Array.isArray(u)?s.push(i.sec.createArray(u)):s.push(i.sec.createObjectFromJS(u,!0)):s.push(u)}r=s}else r=[r];else{var c=n.convertToXML(t),h=c.attribute("returntype");if(a=h&&"javascript"==h._value,r=[],c._children)for(l=0;l<c._children.length;l++){var p=c._children[l];r.push(n.convertFromXML(p))}}try{o=e.axApply(null,r)}catch(t){if(!n.$BgmarshallExceptions)throw t;o=t}return a?i.convertToJSString(o):i.convertToXMLString(o)}))}else this._removeCallback(t)},Object.defineProperty(e,"available",{get:function(){return Mf.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e,"objectID",{get:function(){return Mf.getId()},enumerable:!1,configurable:!0}),e._addCallback=function(t,n){Mf.registerCallback(t),e.registeredCallbacks[t]=n},e._removeCallback=function(t){Mf.unregisterCallback(t),delete e.registeredCallbacks[t]},e._evalJS=function(t){return t=yb(t),Mf.eval(t)},e._callIn=function(t,n){var i=e.registeredCallbacks[t];if(i)return i(t,n)},e._callOut=function(t){return t=yb(t),Mf.call(t)},e.convertToXML=function(t){var e=this.sec.system.getClass(vb.FromSimpleName("XML")),n=e.ignoreWhitespace;e.ignoreWhitespace=!1;var i=e.Create(t);return e.ignoreWhitespace=n,i},e.convertToXMLString=function(t){switch(typeof t){case"boolean":return t?"<true/>":"<false/>";case"number":return"<number>"+t+"</number>";case"string":return"<string>"+t.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")+"</string>";case"object":if(null===t)return"<null/>";if(this.sec.AXDate.axIsInstanceOf(t))return"<date>"+t.time+"</date>";if(this.sec.AXError.axIsInstanceOf(t))return this.$BgmarshallExceptions?"<exception>"+t+"</exception>":"<null/>";var e=[];if(t.hasOwnProperty("$Bglength")){for(var n=t.$Bglength,i=0;i<n;i++){var r=this.convertToXMLString(t.axGetNumericProperty(i));e.push('<property id="'+i+'">'+r+"</property>")}return"<array>"+e.join("")+"</array>"}var o=t.axGetEnumerableKeys();for(i=0;i<o.length;i++){var a=o[i];r=this.convertToXMLString(t.axGetPublicProperty(a));e.push('<property id="'+a+'">'+r+"</property>")}return"<object>"+e.join("")+"</object>";default:return"<undefined/>"}},e.convertFromXML=function(t){switch(t._name.name){case"true":return!0;case"false":return!1;case"number":return Number(String(t.children()));case"string":return String(t.children());case"null":return null;case"date":return this.sec.AXDate.axConstruct([Number(String(t.children()))]);case"exception":if(this.$BgmarshallExceptions)throw this.sec.AXError.axConstruct([String(t.children())]);return;case"array":case"object":for(var e="object"===t._name.name?this.sec.createObject():this.sec.createArrayUnsafe([]),n=0;n<t._children.length;n++){var i=t._children[n];e.axSetPublicProperty(Vk(i),this.convertFromXML(i._children[0]))}return e;case"class":var r=vb.FromFQNString(String(t.children()),0);return this.sec.application.getClass(r);default:return}},e.convertToJSString=function(t){if("string"==typeof t)return'"'+t.split("\r").join("\\r").split("\n").join("\\n").split('"').join('\\"')+'"';if(this.sec.AXArray.axIsInstanceOf(t)){for(var e=[],n=t.value,i=0;i<n.length;i++)e.push(this.convertToJSString(n[i]));return"["+e.join(",")+"]"}if(this.sec.AXDate.axIsInstanceOf(t))return"new Date("+t.value+")";if(this.$BgmarshallExceptions&&this.sec.AXError.axIsInstanceOf(t))return'throw "'+t+'"';if("object"==typeof t&&null!==t){e=[];var r=t.axGetEnumerableKeys();for(i=0;i<r.length;i++){var o=r[i];e.push(o+":"+this.convertToJSString(t.axGetPublicProperty(o)))}return"({"+e.join(",")+"})"}return String(t)},e.classInitializer=null,e.initialized=!1,e.registeredCallbacks={},e}(Hb);function Vk(t){for(var e=0;e<t._attributes.length;e++){var n=t._attributes[e];if("id"===n._name.name)return n._value}}var jk=function(t){function e(e,n,i,r,o,a,s,l,u){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s="wrap"),void 0===l&&(l=0),void 0===u&&(u=0);var c=t.call(this)||this;return c.mapBitmap=e,c.mapPoint=n,c.componentX=i,c.componentY=r,c.scaleX=o,c.scaleY=a,c.mode=s,c.color=l,c.alpha=u,c}return o(e,t),e.FromUntyped=function(t,e){return new e.flash.filters.DisplacementMapFilter(t.mapBitmap,t.mapPoint,t.componentX,t.componentY,t.scaleX,t.scaleY,t.mode,t.color,t.alpha)},Object.defineProperty(e.prototype,"mapBitmap",{get:function(){return this._mapBitmap},set:function(t){this._mapBitmap=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapPoint",{get:function(){return this._mapPoint},set:function(t){this._mapPoint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentX",{get:function(){return this._componentX},set:function(t){this._componentX=t>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentY",{get:function(){return this._componentY},set:function(t){this._componentY=t>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._scaleX=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._scaleY=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t>>>0&16777215},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=+t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new this.sec.flash.filters.DisplacementMapFilter(this._mapBitmap,this._mapPoint,this._componentX,this._componentY,this._scaleX,this._scaleY,this._mode,this._color,this._alpha)},e.prototype.toAwayObject=function(){return{filterName:"displacement",mapBitmap:this._mapBitmap.adaptee,mapPoint:this._mapPoint.adaptee,componentX:this._componentX,componentY:this._componentY,scaleX:this._scaleX,scaleY:this._scaleY,mode:this._mode,color:this._color,alpha:this._alpha}},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(KN),Gk=function(t){function e(e){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"actualLocaleIDName",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get actualLocaleIDName",""),""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decimalSeparator",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get decimalSeparator",""),""},set:function(t){Et.throwPIR("playerglobals/globalization/NumberFormatter","set decimalSeparator","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"digitsType",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get digitsType",""),0},set:function(t){Et.throwPIR("playerglobals/globalization/NumberFormatter","set digitsType","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fractionalDigits",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get fractionalDigits",""),0},set:function(t){Et.throwPIR("playerglobals/globalization/NumberFormatter","set fractionalDigits","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupingPattern",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get groupingPattern",""),""},set:function(t){Et.throwPIR("playerglobals/globalization/NumberFormatter","set groupingPattern","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupingSeparator",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get groupingSeparator",""),""},set:function(t){Et.throwPIR("playerglobals/globalization/NumberFormatter","set groupingSeparator","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastOperationStatus",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get lastOperationStatus",""),""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leadingZero",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get leadingZero",""),!1},set:function(t){Et.throwPIR("playerglobals/globalization/NumberFormatter","set leadingZero","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"negativeNumberFormat",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get negativeNumberFormat",""),0},set:function(t){Et.throwPIR("playerglobals/globalization/NumberFormatter","set negativeNumberFormat","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"negativeSymbol",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get negativeSymbol",""),""},set:function(t){Et.throwPIR("playerglobals/globalization/NumberFormatter","set negativeSymbol","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestedLocaleIDName",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get requestedLocaleIDName",""),""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trailingZeros",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get trailingZeros",""),!1},set:function(t){Et.throwPIR("playerglobals/globalization/NumberFormatter","set trailingZeros","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useGrouping",{get:function(){return Et.throwPIR("playerglobals/globalization/NumberFormatter","get useGrouping",""),!1},set:function(t){Et.throwPIR("playerglobals/globalization/NumberFormatter","set useGrouping","")},enumerable:!1,configurable:!0}),e.prototype.formatInt=function(t){return Et.throwPIR("playerglobals/globalization/NumberFormatter","formatInt",""),t.toString()},e.prototype.formatNumber=function(t){return Et.throwPIR("playerglobals/globalization/NumberFormatter","formatNumber",""),t.toString()},e.prototype.formatUint=function(t){return console.log("formatUint not implemented yet in flash/NumberFormatter"),""},e.getAvailableLocaleIDNames=function(){return console.log("getAvailableLocaleIDNames not implemented yet in flash/NumberFormatter"),[]},e.prototype.parse=function(t){return console.log("parse not implemented yet in flash/NumberFormatter"),null},e.prototype.parseNumber=function(t){return console.log("parseNumber not implemented yet in flash/NumberFormatter"),0},e.prototype.ctor=function(t){console.log("ctor not implemented yet in flash/NumberFormatter")},e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(Hb),Qk=function(t){function e(e,n){void 0===e&&(e=1),void 0===n&&(n=0);var i=t.call(this)||this;return i._vol=1,i._pan=0,i._vol=e,i._pan=n,i}return o(e,t),e.prototype.axCallPublicProperty=function(t,e){return console.log("axCallPublicProperty not implemented yet in flash/SoundTransform"),null},e.prototype.axGetPublicProperty=function(t){return console.log("axGetPublicProperty not implemented yet in flash/SoundTransform"),null},e.prototype.axSetPublicProperty=function(t,e){return console.log("axSetPublicProperty not implemented yet in flash/SoundTransform"),null},e.prototype.axHasPublicProperty=function(t){return console.log("axHasPublicProperty not implemented yet in flash/SoundTransform"),null},e.prototype.axDeletePublicProperty=function(t){return console.log("axDeletePublicProperty not implemented yet in flash/SoundTransform"),null},e.prototype.axGetEnumerableKeys=function(){return console.log("axGetEnumerableKeys not implemented yet in flash/SoundTransform"),[]},Object.defineProperty(e.prototype,"leftToLeft",{get:function(){return console.log("leftToLeft not implemented yet in flash/SoundTransform"),0},set:function(t){console.log("leftToLeft not implemented yet in flash/SoundTransform")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftToRight",{get:function(){return console.log("leftToRight not implemented yet in flash/SoundTransform"),0},set:function(t){console.log("leftToRight not implemented yet in flash/SoundTransform")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightToLeft",{get:function(){return console.log("rightToLeft not implemented yet in flash/SoundTransform"),0},set:function(t){console.log("rightToLeft not implemented yet in flash/SoundTransform")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightToRight",{get:function(){return console.log("rightToRight not implemented yet in flash/SoundTransform"),0},set:function(t){console.log("rightToRight not implemented yet in flash/SoundTransform")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._vol},set:function(t){this._vol=t>1?1:t<0?0:t},enumerable:!1,configurable:!0}),e}(Hb),zk=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e,"bufferTime",{get:function(){return e._bufferTime},set:function(t){e._bufferTime=0|t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"soundTransform",{get:function(){return ap(e._soundTransform)?new Qk:new Qk(e._soundTransform.volume,e._soundTransform.pan)},set:function(t){e._soundTransform=ap(t)?new Qk:t,e._updateAllSoundSources()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"audioPlaybackMode",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"useSpeakerphoneForVoice",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),e.stopAll=function(){e._registeredSoundSources.forEach((function(t){return t.stopSound()})),e._registeredSoundSources=[],yl.stopSounds()},e.computeSpectrum=function(t,e,n){for(var i=new Float32Array(1024),r=0;r<1024;r++)i[r]=Math.random();t.writeRawBytes(i),t.position=0},e.areSoundsInaccessible=function(){},e._getMasterVolume=function(){return e._masterVolume},e._setMasterVolume=function(t){t=+t,e._masterVolume=t,e._updateAllSoundSources()},e._registerSoundSource=function(t){e._registeredSoundSources.push(t)},e._unregisterSoundSource=function(t){var n=e._registeredSoundSources.indexOf(t);n>=0&&e._registeredSoundSources.splice(n,1)},e._updateAllSoundSources=function(){var t=e._getMasterVolume();e._soundTransform&&(t*=e._soundTransform.volume),E.setVolume(t,-1)},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e._masterVolume=1,e._registeredSoundSources=[],e._bufferTime=0,e}(Hb),Hk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.axCallPublicProperty=function(t,e){return null},e.prototype.axGetPublicProperty=function(t){return null},e.prototype.axSetPublicProperty=function(t,e){return null},e.prototype.axHasPublicProperty=function(t){return null},e.prototype.axDeletePublicProperty=function(t){return null},e.prototype.axGetEnumerableKeys=function(){return[]},e.prototype.init=function(t,e){this._channel=t,this._channel&&(this._channel.addEventListener(g.COMPLETE,this.soundCompleteInternal.bind(this)),this.soundTransform=e,zk._registerSoundSource(this))},Object.defineProperty(e.prototype,"leftPeak",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightPeak",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"soundTransform",{get:function(){return this._soundTransform||(this._soundTransform=new this.sec.flash.media.SoundTransform),this._soundTransform},set:function(t){this._channel&&(this._channel.volume=null==t.volume?0:t.volume,this._channel.pan=null==t.pan?0:t.pan),this._soundTransform=t},enumerable:!1,configurable:!0}),e.prototype.soundCompleteInternal=function(t){this._stopInternally();var e=new this.sec.flash.events.Event(UN.SOUND_COMPLETE);this.dispatchEvent(e)},e.prototype._stopInternally=function(){zk._unregisterSoundSource(this)},e.prototype.stop=function(){this._channel&&(this._stopInternally(),this._channel.stop())},e.prototype.stopSound=function(){this.stop()},e.prototype.updateSoundLevels=function(t){this._channel&&(this._soundTransform.volume=t,this._channel.volume=t)},e}(zN),Xk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extension",{get:function(){return this._extension},set:function(t){this._extension=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"macType",{get:function(){return this._macType},set:function(t){this._macType=t},enumerable:!1,configurable:!0}),e}(Hb),Yk=Tt.instance.addStore("playerglobal",{ENABLE_FILE_PICKER:!0}),qk="showSaveFilePicker"in self&&Yk.ENABLE_FILE_PICKER;qk&&console.debug("[FileReference] `showSaveFilePicker` used for save()");var Kk,Wk=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extension",{get:function(){return this._extension},set:function(t){this._extension=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"permissionStatus",{get:function(){return this._permissionStatus},set:function(t){this._permissionStatus=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"creator",{get:function(){return this._creator},set:function(t){this._creator=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modificationDate",{get:function(){return this._modificationDate},set:function(t){this._modificationDate=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"creationDate",{get:function(){return this._creationDate},set:function(t){this._creationDate=t},enumerable:!1,configurable:!0}),e.prototype.browse=function(t){var n,i=this,r=e.knownMimeTypes,o=window.showOpenFilePicker;if(!o)return console.warn("[flash/net/FileReference] FileSystem API not supported!"),!1;for(var a=[],s=0;s<t.length;s++){var l=t[s],u=l.extension.slice(l.extension.lastIndexOf(".")),c=u in r?r[u].mime:"application/unknown";a.push({description:l.description,accept:(n={},n[c]=u,n)})}return o({types:a}).then((function(t){return i._sendSelectEvent(),t[0].getFile()})).then((function(t){i.modificationDate=new Date(t.lastModified),i.name=t.name,i.size=t.size,i.type=t.type;var e=t.name.lastIndexOf(".");return i.extension=e>=0?t.name.slice(e+1):null,t.arrayBuffer()})).then((function(t){i.data=new x(t.byteLength),i.data.setArrayBuffer(t),i._sendCompleteEvent()})).catch((function(t){20!==t.code||"The user aborted a request."!==t.message?console.warn("[flash/net/FileReference] FileSystem API Reject `showOpenFilePicker` request:",t):i._sendCancelEvent()})),!0},e.prototype.upload=function(t){return console.log("upload not implemented yet in flash/FileReference"),!0},e.prototype.load=function(){console.log("load not implemented yet in flash/FileReference")},e.prototype.save=function(t,e){void 0===e&&(e=null),this._useFileSystemSave(t,e)},e.prototype._useFileSystemSave=function(t,n){var i,r=this;void 0===n&&(n="");var o=e.knownMimeTypes,a="string"==typeof t,s=void 0!==t.getBytes,l=n.slice(n.lastIndexOf("."));if(!qk)return!1;var u=window.showSaveFilePicker;if(!u)return console.warn("[flash/net/FileReference] FileSystem API not supported!"),!1;if(a||s){var c=[];if(l in o){var h=o[l].mime;c[0]={description:o[l].description,accept:(i={},i[h]=l,i)}}else c[0]={description:"",accept:{"application/unknown":l}};u({suggestedName:n||"",types:c}).then((function(t){return r._sendSelectEvent(),t.createWritable()})).then((function(e){return e.write(s?t.getBytes():t).then((function(){return e.close()}))})).then((function(t){r._sendCompleteEvent()})).catch((function(t){20!==t.code||"The user aborted a request."!==t.message?console.warn("[flash/net/FileReference] FileSystem API Reject `showSaveFilePicker` request:",t):r._sendCancelEvent()}))}else console.warn("[FileReference] Save is only supported for String and ByteArray")},e.prototype._sendCancelEvent=function(){var t=new this.sec.flash.events.Event(UN.CANCEL);t.currentTarget=this,t.target=this,this.dispatchEvent(t)},e.prototype._sendCompleteEvent=function(){var t=new this.sec.flash.events.Event(UN.COMPLETE);t.currentTarget=this,t.target=this,this.dispatchEvent(t)},e.prototype._sendSelectEvent=function(){var t=new this.sec.flash.events.Event(UN.SELECT);t.currentTarget=this,t.target=this,this.dispatchEvent(t)},e.prototype.requestPermission=function(){console.log("upload not implemented yet in flash/FileReference")},e.prototype.download=function(t,e){return console.log("download not implemented yet in flash/FileReference"),!0},e.prototype.cancel=function(){console.log("cancel not implemented yet in flash/FileReference")},e.forceNativeMethods=!0,e.knownMimeTypes={".jpeg":{mime:"image/jpeg",description:"JPEG images"},".jpg":{mime:"image/jpeg",description:"JPEG images"},".txt":{mime:"text/plain",description:"Text documents"}},e}(zN),Jk="AWAY",Zk=function(){function t(){this._values={},this._realStorage=null}return t.prototype.getItem=function(t){return this._realStorage&&(this._values[t]=this._realStorage.getItem(t)),this._values[t]},t.prototype.setItem=function(t,e){this._realStorage&&this._realStorage.setItem(t,e),this._values[t]=e},t.prototype.removeItem=function(t){this._realStorage&&this._realStorage.removeItem(t),delete this._values[t]},t}();function $k(){if(!Kk&&(Kk=new Zk,"undefined"!=typeof Storage))try{Kk._realStorage=window.localStorage}catch(t){console.warn("[Shared Storage] ",t)}return Kk}var tU=function(){function t(){}return t.decodedData=function(){if(!eU)throw"Can't decode without security context";var t=$k(),e={},n={};for(var i in t._values){null!==t._values[i]?(e[i]=nU.tryDecodeData(t._values[i]).data,n[i]=bO(eU,e[i],!0)):e[i]=n[i]=null}return this._lastDecodedData=n,this._lastRawData=e,n},t.encodeAndApplyData=function(){if(!this._lastRawData)throw"Need call decode before encode for detecting model";var t={};for(var e in this._lastRawData)void 0!==typeof this._lastDecodedData[e]?t[e]=vO(eU,this._lastDecodedData[e],!0):t[e]=this._lastRawData[e];var n=$k();for(var e in t)null!==t[e]&&n.setItem(e,nU.tryEncodeData(t[e]));return t},t._lastRawData=null,t._lastDecodedData=null,t}();window._AWAY_DEBUG_STORAGE=tU,window.addEventListener("unload",(function(){nU.closeAll()})),window.addEventListener("blur",(function(){nU.closeAll()}));var eU=void 0,nU=function(t){function e(){var e=t.call(this)||this;return e.awaySOVersion=1,e}return o(e,t),Object.defineProperty(e,"defaultObjectEncoding",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),e.deleteAll=function(t){},e.getDiskUsage=function(t){return 0},e.tryDecodeData=function(t){var e=1;t.indexOf(Jk)>-1&&(e=+t[4],t=t.substring(6));var n=qh.decodeRestrictedBase64ToBytes(t),i=new x(n.length);return i.sec=this.sec||eU,i.setArrayBuffer(n.buffer),{data:WO.read(i),version:e}},e.tryEncodeData=function(t){var e=new x;e.sec=this.sec||eU,WO.write(e,t);var n=new Uint8Array(e.arraybytes,0,e.length);return qh.base64EncodeBytes(n)},e.getLocal=function(t,n,i){eU=this.sec,t=yb(t);var r=((n=yb(n))||"")+"/"+t;if(e._sharedObjects[r])return e._sharedObjects[r];var o,a=$k().getItem(r),s=this._defaultObjectEncoding,l=3;if(a){try{var u=e.tryDecodeData(a);o=u.data,l=u.version}catch(t){}o&&"object"==typeof o||(o=this.sec.createObject())}else o=this.sec.createObject();var c=new this.sec.flash.net.SharedObject;return c._path=r,c._objectEncoding=s,c._data=o,c.awaySOVersion=l,e._sharedObjects[r]=c,c},e.getRemote=function(t,e,n,i){return new this.sec.flash.net.SharedObject},e.closeAll=function(){for(var t in e._sharedObjects)e._sharedObjects[t]&&e._sharedObjects[t].close()},e.prototype.flush=function(t){var n=!0;for(var i in this._data)if(this._data.hasOwnProperty(i)){n=!1;break}if(!n||$k().getItem(this._path)){eU=this.sec;var r=Jk+3..toFixed(0)+","+e.tryEncodeData(this._data);$k().setItem(this._path,r)}},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"objectEncoding",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"client",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.setDirty=function(t){},e.prototype.connect=function(t,e){},e.prototype.send=function(){},e.prototype.close=function(){this.flush(),delete e._sharedObjects[this._path]},e.prototype.clear=function(){this._data=this.sec.createObject(),$k().removeItem(this._path),delete e._sharedObjects[this._path]},Object.defineProperty(e.prototype,"size",{get:function(){var t;return(null===(t=$k().getItem(this._path))||void 0===t?void 0:t.length)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fps",{set:function(t){},enumerable:!1,configurable:!0}),e.prototype.setProperty=function(t,e){},e._sharedObjects={},e._defaultObjectEncoding=JO.DEFAULT,e}(Hb),iU=function(t){function e(){var e=t.call(this)||this;return e._dataIsNull=!0,e._adaptee=new lt,e._completeCallbackDelegate=function(t){return e.completeCallback(t)},e._progressCallbackDelegate=function(t){return e.progressCallback(t)},e._loadErrorDelegate=function(t){return e.loadErrorDelegate(t)},e.eventMapping[UN.COMPLETE]={adaptedType:X.LOAD_COMPLETE,addListener:e.initListener,removeListener:e.removeListener,callback:e._completeCallbackDelegate},e.eventMapping[PF.PROGRESS]={adaptedType:X.LOAD_PROGRESS,addListener:e.initListener,removeListener:e.removeListener,callback:e._progressCallbackDelegate},e.eventMapping[EF.IO_ERROR]={adaptedType:X.LOAD_ERROR,addListener:e.initListener,removeListener:e.removeListener,callback:e._loadErrorDelegate},Object.defineProperty(e,"$Bgdata",{get:e.getData.bind(e),set:e.setData.bind(e)}),e}return o(e,t),e.prototype.close=function(){console.log("not mimplemented: URLoader.close")},e.prototype.setData=function(t){this._dataIsNull=this._dataIsNull||null===t},e.prototype.getData=function(){if(this._dataIsNull)return null;var t=this._adaptee.data;switch(this.$BgdataFormat){case ot.VARIABLES:return new this.sec.flash.net.URLVariables(t);case ot.BINARY:return console.warn("[URLLoader] Binary not supported"),null;default:return t}},e.prototype.initListener=function(t,e){this._adaptee.addEventListener(t,e)},e.prototype.removeListener=function(t,e){this._adaptee.removeEventListener(t,e)},e.prototype.addEventListener=function(e,n){t.prototype.addEventListener.call(this,e,n)},e.prototype.loadErrorDelegate=function(t){this._dataIsNull=!1;var e=new this.sec.flash.events.IOErrorEvent(EF.IO_ERROR);e.currentTarget=this,this.dispatchEvent(e)},e.prototype.progressCallback=function(t){void 0===t&&(t=null),this._dataIsNull=!1;var e=new this.sec.flash.events.ProgressEvent(PF.PROGRESS,null,null,t.urlLoader.bytesLoaded,t.urlLoader.bytesTotal);e.currentTarget=this,this.dispatchEvent(e)},e.prototype.completeCallback=function(t){this._dataIsNull=!1;var e=new this.sec.flash.events.Event(UN.COMPLETE);e.currentTarget=this,e.target=this,this.dispatchEvent(e)},e.prototype.load=function(t){var n=t.url||"",i=bf(n,e.redirectRules);i?(console.log("[URL LOADER] Override loading url:",i.url),t.adaptee.url=i.url):console.log("[URL LOADER] start loading the url:",n),t.mapToJSData(),this._adaptee.load(t.adaptee)},e.redirectRules=[],e}(zN),rU=["send","connect","close","allowDomain","allowInsecureDomain","client","domain"];Object.freeze(rU);var oU=function(t){function e(){var e=t.call(this)||this;e._client=e,e._connectionName=null,e._allowedInsecureDomains=[],e._allowedSecureDomains=[];var n=new URL(document.baseURI);return e._domain=n.hostname,e._secure="https:"===n.protocol,e}return o(e,t),Object.defineProperty(e,"isSupported",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.close=function(){this._connectionName||this.sec.throwError("ArgumentError",kb.CloseNotConnectedError),this._connectionName=null,this._allowedInsecureDomains=[],this._allowedSecureDomains=[]},e.prototype.connect=function(t){},e.prototype.send=function(t,e){},Object.defineProperty(e.prototype,"client",{get:function(){return this._client},set:function(t){this.sec.AXObject.axIsType(t)||this.sec.throwError("ArgumentError",kb.InvalidParamError),this._client=t},enumerable:!1,configurable:!0}),e.prototype.allowDomain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._allowDomains(t,!0)},e.prototype.allowInsecureDomain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._allowDomains(t,!0),this._allowDomains(t,!1)},e.prototype._allowDomains=function(t,e){},e.prototype.handleMessage=function(t,e){var n,i=this._client;if(!i.axHasPublicProperty(t)||rU.indexOf(t)>-1)n=this.sec.createError("ReferenceError",kb.ReadSealedError,t,i.axClass.name.name);else{var r=i.axGetPublicProperty(t);if(!Px(r))return;var o=new $O(e).readObject();if(this.sec.AXArray.axIsType(o))try{r.apply(i,o.value)}catch(t){n=t}else n=this.sec.createError("TypeError",kb.CheckTypeFailedError,o,"Array")}if(n){var a=new IF("asyncError",!1,!1,"Error #2095: flash.net.LocalConnection was unable to invoke callback "+t+".",n.errorID);if(this.hasEventListener("asyncError"))try{this.dispatchEvent(a)}catch(t){console.warn("Exception encountered during asyncErrorEvent handling in LocalConnection sender.")}else console.warn("No handler for asyncError on LocalConnection sender, not sending event",a)}},Object.defineProperty(e.prototype,"domain",{get:function(){return this._domain},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPerUser",{get:function(){return!0},set:function(t){},enumerable:!1,configurable:!0}),e.classInitializer=null,e}(zN),aU=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"currentDomain",{get:function(){return null},enumerable:!1,configurable:!0}),e}(Hb),sU=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.FINGER="finger",e.STYLUS="stylus",e.NONE="none",e}(Hb),lU="en",uU="PlugIn",cU=96,hU=!1,pU=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e,"isEmbeddedInAcrobat",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasEmbeddedVideo",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasAudio",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"avHardwareDisable",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasAccessibility",{get:function(){return e._hasAccessibility},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasAudioEncoder",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasMP3",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasPrinting",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasScreenBroadcast",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasScreenPlayback",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasStreamingAudio",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasStreamingVideo",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasVideoEncoder",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isDebugger",{get:function(){return hU},enumerable:!1,configurable:!0}),Object.defineProperty(e,"localFileReadDisable",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"language",{get:function(){return e._language||lU},enumerable:!1,configurable:!0}),Object.defineProperty(e,"manufacturer",{get:function(){return e._manufacturer},enumerable:!1,configurable:!0}),Object.defineProperty(e,"os",{get:function(){if(null===e._os){var t=void 0,n=window.navigator.userAgent;if(n.indexOf("Macintosh")>0)if(-1===n.indexOf("Mac OS X "))t="Mac OS 10.6";else{var i=n.split("Mac OS X ")[1];t=i.substr(0,i.indexOf(";"))}else t=n.indexOf("Windows")>0?"Windows XP":n.indexOf("Linux")>0?"Linux":/(iPad|iPhone|iPod|Android)/.test(n)?"iPhone3,1":"Generic OS";e._os=t}return e._os},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cpuArchitecture",{get:function(){return"x86"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"playerType",{get:function(){return e._playerType||uU},enumerable:!1,configurable:!0}),Object.defineProperty(e,"serverString",{get:function(){var t=function(t){var e=Object.prototype.hasOwnProperty,n=[];for(var i in t)e.call(t,i)&&n.push([i,t[i]]);return n}({OS:e.os}).map((function(t){return t[0]+"="+encodeURIComponent(t[1])})).join("&");return t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return e._version},enumerable:!1,configurable:!0}),Object.defineProperty(e,"screenColor",{get:function(){return"color"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pixelAspectRatio",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"screenDPI",{get:function(){return e._screenDPI||cU},enumerable:!1,configurable:!0}),Object.defineProperty(e,"screenResolutionX",{get:function(){return window.screen.width},enumerable:!1,configurable:!0}),Object.defineProperty(e,"screenResolutionY",{get:function(){return window.screen.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"touchscreenType",{get:function(){return sU.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasIME",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasTLS",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"maxLevelIDC",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"supports32BitProcesses",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"supports64BitProcesses",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_internal",{get:function(){},enumerable:!1,configurable:!0}),e.hasMultiChannelAudio=function(t){return!1},e.classInitializer=null,e._hasAccessibility=!1,e._language=null,e._manufacturer="Mozilla Research",e._os=null,e._playerType=null,e._version="SHUMWAY 10,0,0,0",e._screenDPI=0,e}(Hb);function dU(t,e,n){e=yb(e),n=yb(n),console.log("FSCommand: "+e+"; "+n),"debugger"!==(e=e.toLowerCase())&&t.player.executeFSCommand(e,n)}var fU=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e,"exactSettings",{get:function(){return e._exactSettings},set:function(t){t=!!t,e._exactSettings=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"disableAVM1Loading",{get:function(){},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sandboxType",{get:function(){return e._sandboxType},enumerable:!1,configurable:!0}),Object.defineProperty(e,"pageDomain",{get:function(){var t=undefined.resolveUrl("/").split("/");return t.pop(),t.pop()},enumerable:!1,configurable:!0}),e.allowDomain=function(){},e.allowInsecureDomain=function(){},e.loadPolicyFile=function(t){},e.showSettings=function(t){},e.duplicateSandboxBridgeInputArguments=function(t,e){},e.duplicateSandboxBridgeOutputArgument=function(t,e){},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.REMOTE="remote",e.LOCAL_WITH_FILE="localWithFile",e.LOCAL_WITH_NETWORK="localWithNetwork",e.LOCAL_TRUSTED="localTrusted",e.APPLICATION="application",e._exactSettings=!1,e._sandboxType="remote",e}(Hb),_U=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e,"freeMemory",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ime",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e,"privateMemory",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"processCPUUsage",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"totalMemory",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"totalMemoryNumber",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"useCodePage",{get:function(){return!1},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"vmVersion",{get:function(){return""},enumerable:!1,configurable:!0}),e.disposeXML=function(t){},e.exit=function(t){},e.gc=function(){},e.pause=function(){},e.pauseForGCIfCollectionImminent=function(t){},e.resume=function(){},e.setClipboard=function(t){navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(t).then((function(t){console.log("[flash/System] Clipboard writed!")})).catch((function(t){console.warn("[flash/System] Clipboard write rejected!",t)}))},e}(Hb),gU=function(t){function e(){var e=t.call(this)||this;return e.isAVMFont=!0,e.isAVMFont=!0,"Font"!=e.axClassName&&(e._adaptee=jc.getFont(e.axClassName)),e}return o(e,t),Object.defineProperty(e.prototype,"fontName",{get:function(){var t;return null===(t=this._adaptee)||void 0===t?void 0:t.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return Et.throwPIR("playerglobals/text/Font","get fontStyle",""),"regular"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontType",{get:function(){return Et.throwPIR("playerglobals/text/Font","get fontType",""),"embedded"},enumerable:!1,configurable:!0}),e.enumerateFonts=function(t){return Et.throwPIR("playerglobals/text/Font","enumerateFonts",""),[]},e.registerFont=function(t){},e.prototype.hasGlyphs=function(t){return Et.throwPIR("playerglobals/text/Font","hasGlyphs",""),!1},e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(Hb),mU=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"styleNames",{get:function(){return Et.throwPIR("playerglobals/text/StyleSheet","get styleNames",""),[]},enumerable:!1,configurable:!0}),e.prototype.clear=function(){Et.throwPIR("playerglobals/text/StyleSheet","clear","")},e.prototype.getStyle=function(t){return Et.throwPIR("playerglobals/text/StyleSheet","getStyle",""),null},e.prototype.parseCSS=function(t){Et.throwPIR("playerglobals/text/StyleSheet","parseCSS","")},e.prototype.setStyle=function(t,e){Et.throwPIR("playerglobals/text/StyleSheet","setStyle","")},e.prototype.transform=function(t){return Et.throwPIR("playerglobals/text/StyleSheet","transform",""),null},e}(zN),yU=function(t){function e(){var e=t.call(this)||this;return e._textFieldChangeListener={},e.adaptee.autoSize=Sl.NONE,e.adaptee.mouseEnabled=e.adaptee.selectable,e.eventMappingDummys[CF.TEXT_INPUT]="TextField:TextEvent.TEXT_INPUT",e.eventMappingDummys[CF.LINK]="TextField:TextEvent.LINK",e.eventMappingDummys[UN.SCROLL]="TextField:Event.SCROLL",e.eventMappingDummys[UN.TEXT_INTERACTION_MODE_CHANGE]="TextField:Event.TEXT_INTERACTION_MODE_CHANGE",e._textChangeCallbackDelegate=function(t){return e.textChangeCallback(t)},e.adaptee.type==Dl.INPUT&&e.adaptee.addEventListener(Yc.CHANGED,e._textChangeCallbackDelegate),e}return o(e,t),e.getNewTextField=function(t){if(void 0===t&&(t=null),e._textFields.length){var n=e._textFields.pop();return n.adaptee=t||Ch.getNewTextField(),n}return new e},e.prototype.textChangeCallback=function(t){var e=new this.sec.flash.events.Event(UN.CHANGE);e.target=this,this.dispatchEvent(e,!1)},e.prototype.createAdaptee=function(){var t=Ch.getNewTextField();return t.reset(),t},e.prototype.initAdapter=function(){},e.prototype.dispatchKeyEvent=function(t,e,n,i){},e.prototype.selectTextField=function(){},e.prototype.clone=function(){var t=XM(this._symbol,this._symbol.symbolClass),e=new Ch;return this.adaptee.copyTo(e),t.adaptee=e,t._stage=this.activeStage,t.executeConstructor=function(){t.axInitializer()},t},e.prototype.dispose=function(){this.disposeValues(),e._textFields.push(this)},Object.defineProperty(e.prototype,"alwaysShowSelection",{get:function(){return this._adaptee.alwaysShowSelection},set:function(t){this._adaptee.alwaysShowSelection=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"antiAliasType",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get antiAliasType",""),""},set:function(t){Et.throwPIR("playerglobals/text/Textfield","set antiAliasType","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoSize",{get:function(){return this._adaptee.autoSize},set:function(t){this._adaptee.autoSize=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._adaptee.background},set:function(t){this._adaptee.background=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._adaptee.backgroundColor},set:function(t){this._adaptee.backgroundColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"border",{get:function(){return this._adaptee.border},set:function(t){this._adaptee.border=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._adaptee.borderColor},set:function(t){this._adaptee.borderColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomScrollV",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","set bottomScrollV",""),0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"caretIndex",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get caretIndex",""),0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"condenseWhite",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get condenseWhite",""),!1},set:function(t){Et.throwPIR("playerglobals/text/Textfield","set condenseWhite","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultTextFormat",{get:function(){var t=this._adaptee.newTextFormat;return(t.adapter||t.adapter===t.adaptee)&&(t.adapter=new this.sec.flash.text.TextFormat,t.adapter.adaptee=t),t.adapter},set:function(t){this._adaptee.newTextFormat=t.adaptee},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayAsPassword",{get:function(){return this._adaptee.displayAsPassword},set:function(t){this._adaptee.displayAsPassword=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"embedFonts",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get embedFonts",""),!1},set:function(t){Et.throwPIR("playerglobals/text/Textfield","set embedFonts","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gridFitType",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get gridFitType",""),""},set:function(t){Et.throwPIR("playerglobals/text/Textfield","set gridFitType","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"htmlText",{get:function(){return this.adaptee.htmlText},set:function(t){this.adaptee.htmlText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._adaptee.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxChars",{get:function(){return this.adaptee.maxChars},set:function(t){this.adaptee.maxChars=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollH",{get:function(){return this.adaptee.maxScrollH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollV",{get:function(){return this.adaptee.maxScrollV+1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mouseWheelEnabled",{get:function(){return this.adaptee.mouseWheelEnabled},set:function(t){this.adaptee.mouseWheelEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multiline",{get:function(){return this._adaptee.multiline},set:function(t){this._adaptee.multiline=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numLines",{get:function(){return this._adaptee.numLines},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"restrict",{get:function(){return this.adaptee.restrict},set:function(t){this.adaptee.restrict=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollH",{get:function(){return this.adaptee.scrollH},set:function(t){this.adaptee.scrollH=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollV",{get:function(){return this.adaptee.scrollV+1},set:function(t){this.adaptee.scrollV=t-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this.adaptee.selectable},set:function(t){this._adaptee.selectable=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedText",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get selectedText",""),""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionBeginIndex",{get:function(){return this.adaptee.selectionBeginIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionEndIndex",{get:function(){return this.adaptee.selectionEndIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sharpness",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get sharpness",""),0},set:function(t){Et.throwPIR("playerglobals/text/Textfield","set sharpness","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleSheet",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get styleSheet",""),null},set:function(t){Et.throwPIR("playerglobals/text/Textfield","set styleSheet","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._adaptee.text},set:function(t){this._adaptee.text=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._adaptee.textColor},set:function(t){this._adaptee.textColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this._adaptee.textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textInteractionMode",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get textInteractionMode",""),""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this._adaptee.textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get thickness",""),0},set:function(t){Et.throwPIR("playerglobals/text/Textfield","set thickness","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._adaptee.type},set:function(t){(t==Dl.INPUT&&this._adaptee.type!=Dl.INPUT||t!=Dl.INPUT&&this._adaptee.type==Dl.INPUT)&&this.adaptee.addEventListener(Yc.CHANGED,this._textChangeCallbackDelegate),this._adaptee.type=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useRichTextClipboard",{get:function(){return Et.throwPIR("playerglobals/text/Textfield","get useRichTextClipboard",""),!1},set:function(t){Et.throwPIR("playerglobals/text/Textfield","set useRichTextClipboard","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._adaptee.wordWrap},set:function(t){this._adaptee.wordWrap=t},enumerable:!1,configurable:!0}),e.prototype.appendText=function(t){this._adaptee.appendText(t)},e.prototype.copyRichText=function(){return Et.throwPIR("playerglobals/text/Textfield","copyRichText",""),""},e.prototype.getCharBoundaries=function(t){return Et.throwPIR("playerglobals/text/Textfield","getCharBoundaries",""),null},e.prototype.getCharIndexAtPoint=function(t,e){return this._adaptee.getCharIndexAtPoint(t,e)},e.prototype.getFirstCharInParagraph=function(t){return this._adaptee.getFirstCharInParagraph(t)},e.prototype.getImageReference=function(t){return Et.throwPIR("playerglobals/text/Textfield","getImageReference",""),null},e.prototype.getLineIndexAtPoint=function(t,e){return this._adaptee.getLineIndexAtPoint(t,e)},e.prototype.getLineIndexOfChar=function(t){return this._adaptee.getLineIndexOfChar(t)},e.prototype.getLineLength=function(t){return this._adaptee.getLineLength(t)},e.prototype.getLineMetrics=function(t){var e=this._adaptee.getLineMetrics(t),n=e.x,i=e.width,r=e.height,o=e.ascent,a=e.descent,s=e.leading;return new this.sec.flash.text.TextLineMetrics(n,i,r,o,a,s)},e.prototype.getLineOffset=function(t){return this._adaptee.getLineOffset(t)},e.prototype.getLineText=function(t){return this._adaptee.getLineText(t)},e.prototype.getParagraphLength=function(t){return this._adaptee.getParagraphLength(t)},e.prototype.getRawText=function(){return Et.throwPIR("playerglobals/text/Textfield","getRawText",""),""},e.prototype.getTextFormat=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=-1);var n=this._adaptee.getTextFormat(t,e);if(n){if(n.adaptee!==n.adapter)return n.adapter;var i=new this.sec.flash.text.TextFormat;return i.adaptee=n,n.adapter=i,i}console.warn("[playerglobal/Textfield] - getTextFormat - textformat should not be null")},e.prototype.getTextRuns=function(t,e){return Et.throwPIR("playerglobals/text/Textfield","getTextRuns",""),[]},e.prototype.getXMLText=function(t,e){return Et.throwPIR("playerglobals/text/Textfield","getXMLText",""),""},e.prototype.insertXMLText=function(t,e,n,i){Et.throwPIR("playerglobals/text/Textfield","insertXMLText","")},e.isFontCompatible=function(t,e){return Et.throwPIR("playerglobals/text/Textfield","isFontCompatible",""),!1},e.prototype.pasteRichText=function(t){return Et.throwPIR("playerglobals/text/Textfield","pasteRichText",""),!1},e.prototype.replaceSelectedText=function(t){return this._adaptee.replaceSelectedText(t)},e.prototype.replaceText=function(t,e,n){return this._adaptee.replaceText(t,e,n)},e.prototype.setSelection=function(t,e){return this._adaptee.setSelection(t,e)},e.prototype.setTextFormat=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=-1),this._adaptee.setTextFormat(t.adaptee,e,n)},e._textFields=new Array,e}(fF),AU=function(t){function e(e,n,i,r,o,a,s,l,u,c,h,p,d){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=null),void 0===u&&(u=null),void 0===c&&(c=null),void 0===h&&(h=null),void 0===p&&(p=null),void 0===d&&(d=null);var f=t.call(this)||this;return f.adaptee=new zc(e,n,i,r,o,a,s,l,u,c,h,p,d),f}return o(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return Et.throwPIR("playerglobals/text/TextFormat","get target",""),null},set:function(t){Et.throwPIR("playerglobals/text/TextFormat","set target","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabStops",{get:function(){return Et.throwPIR("playerglobals/text/TextFormat","get tabStops",""),null},set:function(t){Et.throwPIR("playerglobals/text/TextFormat","set tabStops","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return Et.throwPIR("playerglobals/text/TextFormat","get display",""),null},set:function(t){Et.throwPIR("playerglobals/text/TextFormat","set display","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bullet",{get:function(){return Et.throwPIR("playerglobals/text/TextFormat","get bullet",""),null},set:function(t){Et.throwPIR("playerglobals/text/TextFormat","set bullet","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return Et.throwPIR("playerglobals/text/TextFormat","get url",""),null},set:function(t){Et.throwPIR("playerglobals/text/TextFormat","set url","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"link_target",{get:function(){return Et.throwPIR("playerglobals/text/TextFormat","get target",""),null},set:function(t){Et.throwPIR("playerglobals/text/TextFormat","get target","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.adaptee.align},set:function(t){this.adaptee.align=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blockIndent",{get:function(){return this.adaptee.blockIndent},set:function(t){this.adaptee.blockIndent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftMargin",{get:function(){return this.adaptee.leftMargin},set:function(t){this.adaptee.leftMargin=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightMargin",{get:function(){return this.adaptee.rightMargin},set:function(t){this.adaptee.rightMargin=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indent",{get:function(){return this.adaptee.indent},set:function(t){this.adaptee.indent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.adaptee.color},set:function(t){this.adaptee.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kerning",{get:function(){return this.adaptee.kerning},set:function(t){this.adaptee.kerning=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this.adaptee.leading},set:function(t){this.adaptee.leading=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this.adaptee.letterSpacing},set:function(t){this.adaptee.letterSpacing=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.adaptee.size},set:function(t){this.adaptee.size=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bold",{get:function(){return this.adaptee.bold},set:function(t){this.adaptee.bold=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"italic",{get:function(){return this.adaptee.italic},set:function(t){this.adaptee.italic=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"underline",{get:function(){return this.adaptee.underline},set:function(t){this.adaptee.underline=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this.adaptee.font_name},set:function(t){this.adaptee.font_name=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){var t=new this.sec.flash.text.TextFormat;return t.adaptee=this.adaptee.clone(),t},e}(Hb),vU=function(t){function e(e,n,i){var r=t.call(this)||this;return r._beginIndex=0|e,r._endIndex=0|n,r._textFormat=i,r}return o(e,t),Object.defineProperty(e.prototype,"beginIndex",{get:function(){return this._beginIndex},set:function(t){this._beginIndex=0|t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endIndex",{get:function(){return this._endIndex},set:function(t){this._endIndex=0|t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){this._textFormat=t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.beginIndex,this.endIndex,this.textFormat.clone())},e.prototype.containsIndex=function(t){return t>=this._beginIndex&&t<this._endIndex},e.prototype.intersects=function(t,e){return Math.max(this._beginIndex,t)<Math.min(this._endIndex,e)},e.classInitializer=null,e}(Hb),bU=function(t){function e(){var e=t.call(this)||this;return Et.throwPIR("playerglobals/text/StaticText","constructor",""),e}return o(e,t),e.prototype.applySymbol=function(){Et.throwPIR("playerglobals/text/StaticText","applySymbol","")},e.prototype._canHaveTextContent=function(){return Et.throwPIR("playerglobals/text/StaticText","_canHaveTextContent",""),!0},e.prototype._getTextContent=function(){return Et.throwPIR("playerglobals/text/StaticText","_getTextContent",""),this._textContent},Object.defineProperty(e.prototype,"text",{get:function(){return Et.throwPIR("playerglobals/text/StaticText","text",""),this._textContent.plainText},enumerable:!1,configurable:!0}),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(cF),xU=function(t){function e(){var e=t.call(this)||this;return Et.throwPIR("playerglobals/text/TextRenderer","constructor",""),e}return o(e,t),Object.defineProperty(e.prototype,"antiAliasType",{get:function(){return Et.throwPIR("playerglobals/text/TextRenderer","get antiAliasType",""),null},set:function(t){Et.throwPIR("playerglobals/text/TextRenderer","set antiAliasType","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLevel",{get:function(){return Et.throwPIR("playerglobals/text/TextRenderer","get maxLevel",""),0},set:function(t){Et.throwPIR("playerglobals/text/TextRenderer","set maxLevel","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayMode",{get:function(){return Et.throwPIR("playerglobals/text/TextRenderer","get displayMode",""),null},set:function(t){Et.throwPIR("playerglobals/text/TextRenderer","set displayMode","")},enumerable:!1,configurable:!0}),e.setAdvancedAntiAliasingTable=function(t,e,n,i){Et.throwPIR("playerglobals/text/TextRenderer","setAdvancedAntiAliasingTable","")},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(Hb),CU=function(t){function e(){var e=t.call(this)||this;return Et.throwPIR("playerglobals/text/TextFormatDisplay","constructor",""),e}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.INLINE="inline",e.BLOCK="block",e}(Hb),IU=function(t){function e(e,n,i,r,o,a){var s=t.call(this)||this;return s.width=+e,s.height=+n,s.textFieldWidth=+i,s.textFieldHeight=+r,s.ascent=+o,s.descent=+a,Et.throwPIR("playerglobals/text/TextExtent","constructor",""),s}return o(e,t),e}(Hb),EU=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.LCD="lcd",e.CRT="crt",e.DEFAULT="default",e}(Hb),wU=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.DARK_COLOR="dark",e.LIGHT_COLOR="light",e}(Hb),SU=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.EMBEDDED="embedded",e.EMBEDDED_CFF="embeddedCFF",e.DEVICE="device",e}(Hb),DU=function(t){function e(e,n,i){var r=t.call(this)||this;return r.fontSize=+e,r.insideCutoff=+n,r.outsideCutoff=+i,Et.throwPIR("playerglobals/text/CSMSettings","constructor",""),r}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(Hb),TU=function(t){function e(e,n,i,r,o,a){var s=t.call(this)||this;return Et.throwPIR("playerglobals/text/TextLineMetrics","constructor",""),s}return o(e,t),e}(Hb),PU=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"charCount",{get:function(){return Et.throwPIR("playerglobals/text/TextSnapshot","get charCount",""),0},enumerable:!1,configurable:!0}),e.prototype.findText=function(t,e,n){return Et.throwPIR("playerglobals/text/TextSnapshot","findText",""),0},e.prototype.getSelected=function(t,e){return Et.throwPIR("playerglobals/text/TextSnapshot","getSelected",""),!1},e.prototype.getSelectedText=function(t){return Et.throwPIR("playerglobals/text/TextSnapshot","getSelectedText",""),""},e.prototype.getText=function(t,e,n){return Et.throwPIR("playerglobals/text/TextSnapshot","getText",""),""},e.prototype.getTextRunInfo=function(t,e){return Et.throwPIR("playerglobals/text/TextSnapshot","getTextRunInfo",""),null},e.prototype.hitTestTextNearPos=function(t,e,n){return Et.throwPIR("playerglobals/text/TextSnapshot","hitTestTextNearPos",""),0},e.prototype.setSelectColor=function(t){Et.throwPIR("playerglobals/text/TextSnapshot","setSelectColor","")},e.prototype.setSelected=function(t,e,n){Et.throwPIR("playerglobals/text/TextSnapshot","setSelected","")},e.classInitializer=null,e}(Hb),BU=function(t){function e(e,n,i,r){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(Hb),OU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.AUTO="auto",e.ANY="any",e.NONE="none",e.ALL="all",e}(Hb),MU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.NONE="none",e.HORIZONTAL_STEM="horizontalStem",e}(Hb),LU=0,RU=function(t){function e(e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i="rotate0");var r=t.call(this)||this;return r._id=LU++,r._elementFormat=e,r._eventMirror=n,r._textRotation=yb(i),r}return o(e,t),e.prototype.setTextBlock=function(t){this._textBlock=t},e.prototype.setGroupElement=function(t){this._groupElement=t},Object.defineProperty(e.prototype,"textBlock",{get:function(){return this._textBlock},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBlockBeginIndex",{get:function(){return this._textBlockBeginIndex},set:function(t){this._textBlockBeginIndex=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"elementFormat",{get:function(){return this._elementFormat},set:function(t){this._elementFormat=t,this._textBlock&&this._textBlock.setTextDataDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventMirror",{get:function(){return this._eventMirror},set:function(t){this._eventMirror=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupElement",{get:function(){return this._groupElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawText",{get:function(){return this._rawText},set:function(t){this._rawText=t,this._text=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textRotation",{get:function(){return this._textRotation},set:function(t){this._textRotation=yb(t)},enumerable:!1,configurable:!0}),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.GRAPHIC_ELEMENT=65007,e}(Hb),NU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.DEFAULT="default",e.LINING="lining",e.OLD_STYLE="oldStyle",e}(Hb),FU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.DEFAULT="default",e.PROPORTIONAL="proportional",e.TABULAR="tabular",e}(Hb),kU=function(t){function e(e,n){var i=t.call(this)||this;return i._locale=yb(e),i._lineJustification=yb(n),i}return o(e,t),e.getJustifierForLocale=function(t){return Et.throwPIR("playerglobals/text/engine/TextJustifier","getJustifierForLocale",""),null},e.prototype.clone=function(){return Et.throwPIR("playerglobals/text/engine/TextJustifier","clone",""),null},Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJustification",{get:function(){return this._lineJustification},set:function(t){this._lineJustification=yb(t)},enumerable:!1,configurable:!0}),e.prototype.setLocale=function(t){this._locale=yb(t)},e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(Hb),UU=function(t){function e(e,n,i){return t.call(this,void 0,void 0)||this}return o(e,t),Object.defineProperty(e.prototype,"justificationStyle",{get:function(){return Et.throwPIR("playerglobals/text/engine/EastAsianJustifier","get justificationStyle",""),null},set:function(t){Et.throwPIR("playerglobals/text/engine/EastAsianJustifier","set justificationStyle","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"composeTrailingIdeographicSpaces",{get:function(){return Et.throwPIR("playerglobals/text/engine/EastAsianJustifier","get composeTrailingIdeographicSpaces",""),null},set:function(t){Et.throwPIR("playerglobals/text/engine/EastAsianJustifier","set composeTrailingIdeographicSpaces","")},enumerable:!1,configurable:!0}),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(kU),VU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.ROMAN="roman",e.ASCENT="ascent",e.DESCENT="descent",e.IDEOGRAPHIC_TOP="ideographicTop",e.IDEOGRAPHIC_CENTER="ideographicCenter",e.IDEOGRAPHIC_BOTTOM="ideographicBottom",e.USE_DOMINANT_BASELINE="useDominantBaseline",e}(Hb),jU=0,GU=function(t){function e(e,n,i,r,o,a,s,l,u,c,h,p,d,f,_,g,m){void 0===e&&(e=null),void 0===n&&(n=12),void 0===i&&(i=0),void 0===r&&(r=1),void 0===o&&(o="auto"),void 0===a&&(a="roman"),void 0===s&&(s="useDominantBaseline"),void 0===l&&(l=0),void 0===u&&(u="on"),void 0===c&&(c=0),void 0===h&&(h=0),void 0===p&&(p="en"),void 0===d&&(d="auto"),void 0===f&&(f="default"),void 0===_&&(_="default"),void 0===g&&(g="common"),void 0===m&&(m="default");var y=t.call(this)||this;return y._id=jU++,y._fontDescription=e,y._fontSize=+n,y._color=i>>>0,y._alpha=+r,y._textRotation=yb(o),y._dominantBaseline=yb(a),y._alignmentBaseline=yb(s),y._baselineShift=+l,y._kerning=yb(u),y._trackingRight=+c,y._trackingLeft=+h,y._locale=yb(p),y._breakOpportunity=yb(d),y._digitCase=yb(f),y._digitWidth=yb(_),y._ligatureLevel=yb(g),y._typographicCase=yb(m),y}return o(e,t),e.prototype.createAwayTextformat=function(){var t,e,n,i=new zc;return i.size=this._fontSize,i.color=this._color,i.fontLookUpMode=this._fontDescription?this._fontDescription.fontLookup:Vc.DEVICE,i.font_name=null===(t=this._fontDescription)||void 0===t?void 0:t.fontName,i.italic="italic"==(null===(e=this._fontDescription)||void 0===e?void 0:e.fontPosture),i.bold="bold"==(null===(n=this._fontDescription)||void 0===n?void 0:n.fontWeight),i.align=Tl.LEFT,0!=this._baselineShift&&console.warn("baselineshift is not 0",this._baselineShift),this._alignmentBaseline!=VU.USE_DOMINANT_BASELINE&&console.warn("_alignmentBaseline is not USE_DOMINANT_BASELINE",this._alignmentBaseline),this._dominantBaseline!=VU.ROMAN&&console.warn("_dominantBaseline is not ROMAN",this._dominantBaseline),0!=this._trackingRight&&console.warn("_trackingRight is not 0",this._trackingRight),0!=this._trackingLeft&&console.warn("_trackingLeft is not 0",this._trackingLeft),1!=this._alpha&&console.warn("_alpha is not 1",this._alpha),"default"!=this._digitCase&&console.warn('_digitCase is not "default"',this._digitCase),"default"!=this._digitWidth&&console.warn('_digitWidth is not "default"',this._digitWidth),"default"!=this._typographicCase&&console.warn('_typographicCase is not "default"',this._typographicCase),"common"!=this._ligatureLevel&&console.warn('_ligatureLevel is not "common"',this._ligatureLevel),i},e.prototype.getBaseline=function(){return this._alignmentBaseline==VU.USE_DOMINANT_BASELINE?this._dominantBaseline:this._alignmentBaseline},Object.defineProperty(e.prototype,"alignmentBaseline",{get:function(){return this._alignmentBaseline},set:function(t){this._alignmentBaseline=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baselineShift",{get:function(){return this._baselineShift},set:function(t){this._baselineShift=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakOpportunity",{get:function(){return this._breakOpportunity},set:function(t){this._breakOpportunity=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dominantBaseline",{get:function(){return this._dominantBaseline},set:function(t){this._dominantBaseline=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontDescription",{get:function(){return this._fontDescription},set:function(t){this._fontDescription=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"digitCase",{get:function(){return this._digitCase},set:function(t){this._digitCase=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"digitWidth",{get:function(){return this._digitWidth},set:function(t){this._digitWidth=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ligatureLevel",{get:function(){return this._ligatureLevel},set:function(t){this._ligatureLevel=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kerning",{get:function(){return this._kerning},set:function(t){this._kerning=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textRotation",{get:function(){return this._textRotation},set:function(t){this._textRotation=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackingRight",{get:function(){return this._trackingRight},set:function(t){this._trackingRight=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackingLeft",{get:function(){return this._trackingLeft},set:function(t){this._trackingLeft=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typographicCase",{get:function(){return this._typographicCase},set:function(t){this._typographicCase=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locked",{get:function(){return this._locked},set:function(t){this._locked=t},enumerable:!1,configurable:!0}),e.prototype.getFontMetrics=function(){return Et.throwPIR("playerglobals/text/engine/ElementFormat","set getFontMetrics",""),null},e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(Hb),QU=function(t){function e(e,n,i,r,o,a){void 0===e&&(e="_serif"),void 0===n&&(n="normal"),void 0===i&&(i="normal"),void 0===r&&(r="device"),void 0===o&&(o="cff"),void 0===a&&(a="horizontalStem");var s=t.call(this)||this;return s._fontName=yb(e),s._fontWeight=yb(n),s._fontPosture=yb(i),s._fontLookup=yb(r),s._renderingMode=yb(o),s._cffHinting=yb(a),s}return o(e,t),e.isFontCompatible=function(t,e,n){return Et.throwPIR("playerglobals/text/engine/FontDescription","static isFontCompatible",""),null},e.isDeviceFontCompatible=function(t,e,n){return Et.throwPIR("playerglobals/text/engine/FontDescription","static isDeviceFontCompatible",""),null},Object.defineProperty(e.prototype,"renderingMode",{get:function(){return this._renderingMode},set:function(t){this._renderingMode=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontLookup",{get:function(){return this._fontLookup},set:function(t){this._fontLookup=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){this._fontName=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontPosture",{get:function(){return this._fontPosture},set:function(t){this._fontPosture=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cffHinting",{get:function(){return this._cffHinting},set:function(t){this._cffHinting=yb(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locked",{get:function(){return this._locked},set:function(t){this._locked=t},enumerable:!1,configurable:!0}),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(Hb),zU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.DEVICE="device",e.EMBEDDED_CFF="embeddedCFF",e}(Hb),HU=function(t){function e(e,n,i,r,o,a,s,l,u,c){void 0===c&&(c=0);var h=t.call(this)||this;return h.emBox=e,h.strikethroughOffset=+n,h.strikethroughThickness=+i,h.underlineOffset=+r,h.underlineThickness=+o,h.subscriptOffset=+a,h.subscriptScale=+s,h.superscriptOffset=+l,h.superscriptScale=+u,h.lineGap=+c,h}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(Hb),XU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.NORMAL="normal",e.ITALIC="italic",e}(Hb),YU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.NORMAL="normal",e.BOLD="bold",e}(Hb),qU=function(t){function e(e,n,i,r,o,a){void 0===e&&(e=null),void 0===n&&(n=15),void 0===i&&(i=15),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a="rotate0");var s=t.call(this,void 0,void 0,void 0)||this;return s.graphic=e,s.elementWidth=+n,s.elementHeight=+i,s.elementFormat=r,s.eventMirror=o,s.textRotation=yb(a),s}return o(e,t),Object.defineProperty(e.prototype,"graphic",{get:function(){return Et.throwPIR("playerglobals/text/engine/GraphicElement","get graphic",""),null},set:function(t){Et.throwPIR("playerglobals/text/engine/GraphicElement","set graphic","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"elementHeight",{get:function(){return Et.throwPIR("playerglobals/text/engine/GraphicElement","get elementHeight",""),null},set:function(t){Et.throwPIR("playerglobals/text/engine/GraphicElement","set elementHeight","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"elementWidth",{get:function(){return Et.throwPIR("playerglobals/text/engine/GraphicElement","get elementWidth",""),null},set:function(t){Et.throwPIR("playerglobals/text/engine/GraphicElement","set elementWidth","")},enumerable:!1,configurable:!0}),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(RU),KU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.PUSH_IN_KINSOKU="pushInKinsoku",e.PUSH_OUT_ONLY="pushOutOnly",e.PRIORITIZE_LEAST_ADJUSTMENT="prioritizeLeastAdjustment",e}(Hb),WU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.ON="on",e.OFF="off",e.AUTO="auto",e}(Hb),JU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.NONE="none",e.MINIMUM="minimum",e.COMMON="common",e.UNCOMMON="uncommon",e.EXOTIC="exotic",e}(Hb),ZU=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.UNJUSTIFIED="unjustified",e.ALL_BUT_LAST="allButLast",e.ALL_INCLUDING_LAST="allIncludingLast",e.ALL_BUT_MANDATORY_BREAK="allButMandatoryBreak",e}(Hb),$U=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.NORMAL="normal",e.CFF="cff",e}(Hb),tV=function(t){function e(e,n,i){void 0===e&&(e="en"),void 0===n&&(n="unjustified"),void 0===i&&(i=!1);var r=t.call(this,e,n)||this;return r._letterSpacing=!!i,r}return o(e,t),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minimumSpacing",{get:function(){return this._minimumSpacing},set:function(t){this._minimumSpacing=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optimumSpacing",{get:function(){return this._optimumSpacing},set:function(t){this._optimumSpacing=+t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maximumSpacing",{get:function(){return this._maximumSpacing},set:function(t){this._maximumSpacing=+t},enumerable:!1,configurable:!0}),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(kU),eV=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.START="start",e.CENTER="center",e.END="end",e.DECIMAL="decimal",e}(Hb),nV=function(t){function e(e,n,i){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"alignment",{get:function(){Et.throwPIR("playerglobals/text/engine/TabStop","get alignment","")},set:function(t){Et.throwPIR("playerglobals/text/engine/TabStop","set alignment","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){Et.throwPIR("playerglobals/text/engine/TabStop","get position","")},set:function(t){Et.throwPIR("playerglobals/text/engine/TabStop","set position","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decimalAlignmentToken",{get:function(){Et.throwPIR("playerglobals/text/engine/TabStop","get decimalAlignmentToken","")},set:function(t){Et.throwPIR("playerglobals/text/engine/TabStop","set decimalAlignmentToken","")},enumerable:!1,configurable:!0}),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(Hb),iV=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.SUCCESS="success",e.EMERGENCY="emergency",e.COMPLETE="complete",e.INSUFFICIENT_WIDTH="insufficientWidth",e}(Hb),rV=0,oV=[],aV=function(t){function e(e,n,i,r,o,a,s,l,u){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r="rotate0"),void 0===o&&(o="roman"),void 0===a&&(a=0),void 0===s&&(s=!0),void 0===l&&(l=null),void 0===u&&(u=12);var c=t.call(this)||this;return c._id=rV++,c._content=e,e&&c._content.setTextBlock(c),c._tabStops=n,c._textJustifier=i,c._lineRotation=r,c._baselineZero=o,c._bidiLevel=a,c._applyNonLinearFontScaling=s,c._baselineFontDescription=l,c._baselineFontSize=u,c._textLines=[],c._creationResult=null,c}return o(e,t),e.prototype.setTextDataDirty=function(){this._textData=null},e.prototype._convertContentToTextData=function(){if(this._textData)return this._textData;this._textData={text:"",formats:[],elementFormats:[],formatIndices:[],processedIdx:0,creationResult:null,spaces:{},lineBreaks:{},charWidths:[]},this.resolveGroupElements(this._content),this._textData.formatIndices[this._textData.formatIndices.length-1]!=this._textData.text.length&&this._textData.formatIndices.push(this._textData.text.length);var t=this._textData.formats,e=this._textData.formatIndices,n=this._textData.text;this._content.rawText=n;for(var i=this._textData.spaces,r=this._textData.lineBreaks,o=this._textData.charWidths,a=0,s=t.length,l=0;l<s;l++){var u=t[l];u.font_table.initFontSize(u.size);for(var c=e[l];a<=c;a++){var h=n.charCodeAt(a);if(10===h||8233===h)r[a]=1,o[o.length]=0;else o[o.length]=u.font_table.getCharWidth(h.toString()),(9==h||32==h)&&(i[a]=!0)}}},e.prototype.resolveGroupElements=function(t){if("flash.text.engine.TextElement"==t.axClassName){var e=t.text,n=t.elementFormat,i=void 0;i=n?n.createAwayTextformat():new zc,this._textData.text+=e||"",this._textData.formats.push(i),this._textData.elementFormats.push(n),this._textData.formatIndices.push(this._textData.text.length)}if("flash.text.engine.GroupElement"==t.axClassName)for(var r=t,o=0;o<r.elementCount;o++)this.resolveGroupElements(r.getElementAt(o))},e.prototype.createTextLine=function(t,e,n,i){this._textData||(this._textLines=[],this._convertContentToTextData()),this._tabStops&&this._tabStops.buffer.length>0&&console.warn("this._tabStops is not []",this._tabStops),this._textJustifier&&"unjustified"!=this._textJustifier.lineJustification&&console.warn("lineJustification is not unjustified",this._textJustifier.lineJustification),this._textJustifier&&0!=this._textJustifier.letterSpacing&&console.warn("letterSpacing is not 0",this._textJustifier.letterSpacing),this._baselineZero!=VU.ROMAN&&console.warn('_baselineZero is not "roman"',this._baselineZero);var r=this._textData.text,o=this._textData.processedIdx;if(o>r.length)return this._creationResult=iV.COMPLETE,null;var a,s,l,u=this._textData.formats,c=this._textData.elementFormats,h=this._textData.formatIndices,p=this._textData.spaces,d=this._textData.lineBreaks,f=this._textData.charWidths,_=u.length,g=o,m="",y="",A=0,v=[],b=[],x=[],C=iV.EMERGENCY,I=0;t:for(var E=0;E<_;E++)if(!(o>h[E])){var w=u[E];a=w,v[v.length]=w,b[b.length]=c[E],s=c[E],x[x.length]=0;for(var S=h[E];g<=S;g++){if(1===d[g]){m+=y,A+=y.length+1,C=iV.SUCCESS,this._textData.processedIdx=g,d[g]=2;break t}if(p[g]&&(C=iV.SUCCESS,m+=y,A+=y.length,y="",this._textData.processedIdx=g),1!=y.length||32!=y.charCodeAt(0)&&9!=y.charCodeAt(0)||(C=iV.SUCCESS,m+=y,A+=y.length,y="",this._textData.processedIdx=g),(I+=f[g])>e-2){if(C==iV.SUCCESS)break t;m+=y,A+=y.length,this._textData.processedIdx=g;break t}if(g==r.length){m+=y,A+=y.length,this._textData.processedIdx=g+1;break t}d[g]?(y+=r[g],o++):y+=r[g]}x[x.length-1]=m.length+y.length-1}x[x.length-1]=m.length,this._textData.processedIdx>=r.length&&(this._textData.processedIdx++,C=iV.COMPLETE),0==v.length&&(v[0]=a,b[0]=s);for(var D=0;D<oV.length;D++)if(!oV[D].parent&&oV[D].free){l=oV[D];break}return l?(l.setPreviousLine(null),l.setNextLine(null),l.$BguserData=null,l.free=!1,l.reUseTextLine(t,e,n,i,m,v,x,o,A,b)):l=new this.sec.flash.text.engine.TextLine(t,e,n,i,m,v,x,o,A,b),this._creationResult=C,l.setTextBlock(this),this._textLines.push(l),l},e.prototype.recreateTextLine=function(t,e,n,i,r){return Et.throwPIR("playerglobals/text/engine/TextBlock","recreateTextLine",""),new this.sec.flash.text.engine.TextLine},Object.defineProperty(e.prototype,"textLineCreationResult",{get:function(){return this._creationResult},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applyNonLinearFontScaling",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextBlock","get applyNonLinearFontScaling",""),this._applyNonLinearFontScaling},set:function(t){Et.throwPIR("playerglobals/text/engine/TextBlock","set applyNonLinearFontScaling",""),this._applyNonLinearFontScaling=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baselineFontDescription",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextBlock","get baselineFontDescription",""),this._baselineFontDescription},set:function(t){Et.throwPIR("playerglobals/text/engine/TextBlock","set baselineFontDescription",""),this._baselineFontDescription=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baselineFontSize",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextBlock","get baselineFontSize",""),this._baselineFontSize},set:function(t){Et.throwPIR("playerglobals/text/engine/TextBlock","set baselineFontSize",""),this._baselineFontSize=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baselineZero",{get:function(){return this._baselineZero},set:function(t){this._baselineZero=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._textData=null,this._content&&this._content.setTextBlock(null),this._content=t,this._content&&this._content.setTextBlock(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bidiLevel",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextBlock","get bidiLevel",""),this._bidiLevel},set:function(t){Et.throwPIR("playerglobals/text/engine/TextBlock","set bidiLevel",""),this._bidiLevel=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstInvalidLine",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextBlock","firstInvalidLine",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstLine",{get:function(){return this._textLines.length>0?this._textLines[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastLine",{get:function(){return this._textLines.length>0?this._textLines[this._textLines.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineRotation",{get:function(){return this._lineRotation},set:function(t){this._lineRotation=t},enumerable:!1,configurable:!0}),e.prototype.findNextAtomBoundary=function(t){return Et.throwPIR("playerglobals/text/engine/TextBlock","findNextAtomBoundary",""),null},e.prototype.findPreviousAtomBoundary=function(t){return Et.throwPIR("playerglobals/text/engine/TextBlock","findPreviousAtomBoundary",""),null},e.prototype.findNextWordBoundary=function(t){return Et.throwPIR("playerglobals/text/engine/TextBlock","findNextWordBoundary",""),null},e.prototype.findPreviousWordBoundary=function(t){return Et.throwPIR("playerglobals/text/engine/TextBlock","findPreviousWordBoundary",""),null},e.prototype.getTextLineAtCharIndex=function(t){return Et.throwPIR("playerglobals/text/engine/TextBlock","getTextLineAtCharIndex",""),null},e.prototype.releaseLineCreationData=function(){Et.throwPIR("playerglobals/text/engine/TextBlock","releaseLineCreationData","")},e.prototype.releaseLines=function(t,e){if(0!=this._textLines.length)if(t!=this._textLines[0]||e!=this._textLines[this._textLines.length-1])for(;t;){var n=this._textLines.indexOf(t);n>=0&&this._textLines.splice(n,1),t.free=!0,oV.indexOf(t)<=0&&oV.push(t),t=t!=e?t.nextLine:null}else{if(oV.length<100)for(var i=0;i<this._textLines.length;i++)this._textLines[i].free=!0,oV.indexOf(this._textLines[i])<=0&&oV.push(this._textLines[i]);this._textLines.length=0}},e.prototype.dump=function(){return Et.throwPIR("playerglobals/text/engine/TextBlock","dump",""),null},e.prototype.DoCreateTextLine=function(t,e,n,i,r){return Et.throwPIR("playerglobals/text/engine/TextBlock","DoCreateTextLine",""),null},e.prototype.getTabStops=function(){return this._tabStops},e.prototype.setTabStops=function(t){this._tabStops=t},e.prototype.getTextJustifier=function(){return this._textJustifier},e.prototype.setTextJustifier=function(t){this._textJustifier=t},Object.defineProperty(e.prototype,"userData",{get:function(){return this._userData},set:function(t){this._userData=t},enumerable:!1,configurable:!0}),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(Hb),sV=function(t){function e(e,n,i,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r="rotate0");var o=t.call(this,n,i,r)||this;return o._text=e,o._rawText=e,o}return o(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this._textBlock&&this._textBlock.setTextDataDirty()},enumerable:!1,configurable:!0}),e.prototype.replaceText=function(t,e,n){this._rawText=this._text.slice(0,t)+n+this._text.slice(e,this._text.length-1),this._text=this._rawText,this._textBlock&&this._textBlock.setTextDataDirty()},e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(RU),lV=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.VALID="valid",e.POSSIBLY_INVALID="possiblyInvalid",e.INVALID="invalid",e.STATIC="static",e}(Hb),uV=function(t){function e(e,n,i,r,o,a,s,l,u,c){var h=t.call(this)||this,p=new Js;return h.adaptee=p,h._previousLine=e,e&&e.setNextLine(h),h._width=n,h._textWidth=0,h._textHeight=0,h._lineOffset=i,h._fitSomething=r,h._rawText=o||"",h._textFormatsIndices=s,h._textFormats=a,h._textLength=u,h._textBlockBeginIndex=l,h._specifiedWidth=h._width,h._textfield=new Ch,h.initTextline(c),h}return o(e,t),e.prototype.initTextline=function(t){this._ascent=0,this._descent=Number.POSITIVE_INFINITY,this._textfield.multiline=!1,this._textfield.border=!1,this._textfield.wordWrap=!1;var e=this._textFormats[0],n=t[0].getBaseline();if(this.adaptee.addChild(this._textfield),""!==this._rawText){this._textfield.autoSize=Sl.LEFT,this._textfield.text=this._rawText;for(var i=0,r=0;r<this._textFormatsIndices.length;r++){var o=this._textFormats[r];n!=t[r].getBaseline()&&console.warn("[TextLine] - one Textline with different alignmentBaseline");var a=this._textFormatsIndices[r],s=o.font_table.ascent,l=o.font_table.descent;s=s/(u=o.font_table.get_font_em_size())*o.size,l=l/u*o.size,this._ascent<s&&(this._ascent=s),this._descent>l&&(this._descent=l),!this._textfield||this._textfield.setTextFormat(o,i,a),i=a,this._textfield.height=this._ascent-this._descent}}else{this._textfield.autoSize=Sl.NONE,this._ascent=e.font_table.ascent,this._descent=e.font_table.descent;var u=e.font_table.get_font_em_size();this._ascent=this._ascent/u*e.size,this._descent=this._descent/u*e.size,this._textfield.width=10,this._textfield.height=this._ascent-this._descent}this._textWidth=this._textfield?this._textfield.textWidth+4:10,this._unjustifiedTextWidth=this._textWidth,this._descent=Math.abs(this._descent),this._ascent+=1,n==VU.ROMAN?this._textfield.y=-this._ascent:n==VU.ASCENT?this._textfield.y=-(this._ascent-this._descent)-this._ascent-this._descent:(console.warn("[TextLine] - unsupported alignmentBaseline",n),this._textfield.y=-(this._ascent-this._descent)-this._ascent),this._textfield.x=0,this._ascent=this._ascent-this._descent,this._validity=lV.VALID},e.prototype.reUseTextLine=function(t,e,n,i,r,o,a,s,l,u){this.adaptee.x=0,this.adaptee.y=0,this._previousLine=t,t&&t.setNextLine(this),this._width=e,this._textWidth=0,this._textHeight=0,this._lineOffset=n,this._fitSomething=i,this._rawText=r||"",this._textFormatsIndices=a,this._textFormats=o,this._textLength=l,this._textBlockBeginIndex=s,this._specifiedWidth=this._width,this._textfield.reset(),this._textfield.text="",this.initTextline(u)},e.prototype.getBaselinePosition=function(t){switch(t){case VU.ROMAN:return-(this._ascent+this._descent);case VU.ASCENT:return-this._ascent}return 0},e.prototype.setNextLine=function(t){this._nextLine=t},e.prototype.setPreviousLine=function(t){this._previousLine=t},e.prototype.setTextBlock=function(t){this._textBlock=t},e.prototype.getMirrorRegion=function(t){return null},e.prototype.flushAtomData=function(){},Object.defineProperty(e.prototype,"textBlock",{get:function(){return this._textBlock},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasGraphicElement",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasTabs",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextLine",{get:function(){return this._nextLine},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousLine",{get:function(){return this._previousLine},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ascent",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"descent",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this._ascent+this._descent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalAscent",{get:function(){return this._ascent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalDescent",{get:function(){return this._descent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalHeight",{get:function(){return this._ascent+this._descent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBlockBeginIndex",{get:function(){return this._textBlockBeginIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawTextLength",{get:function(){return this._textLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specifiedWidth",{get:function(){return this._specifiedWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unjustifiedTextWidth",{get:function(){return this._unjustifiedTextWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"validity",{get:function(){return this._validity},set:function(t){this._validity=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"atomCount",{get:function(){return this._textLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mirrorRegions",{get:function(){return this._mirrorRegions},enumerable:!1,configurable:!0}),e.prototype.getAtomIndexAtPoint=function(t,e){return Et.throwPIR("playerglobals/text/engine/TextLine","getAtomIndexAtPoint",""),null},e.prototype.getAtomIndexAtCharIndex=function(t){return Et.throwPIR("playerglobals/text/engine/TextLine","getAtomIndexAtCharIndex",""),t},e.prototype.getAtomBounds=function(t){var e=this._textfield.getCharBoundaries(t);return this.sec.flash.geom.Rectangle(e.x,e.y,e.width,this._ascent+this.descent)},e.prototype.getAtomBidiLevel=function(t){return Et.throwPIR("playerglobals/text/engine/TextLine","getAtomBidiLevel",""),null},e.prototype.getAtomTextRotation=function(t){return Et.throwPIR("playerglobals/text/engine/TextLine","getAtomTextRotation",""),null},e.prototype.getAtomTextBlockBeginIndex=function(t){return Et.throwPIR("playerglobals/text/engine/TextLine","getAtomTextBlockBeginIndex",""),null},e.prototype.getAtomTextBlockEndIndex=function(t){return Et.throwPIR("playerglobals/text/engine/TextLine","getAtomTextBlockEndIndex",""),null},e.prototype.getAtomCenter=function(t){return Et.throwPIR("playerglobals/text/engine/TextLine","getAtomCenter",""),null},e.prototype.getAtomWordBoundaryOnLeft=function(t){return Et.throwPIR("playerglobals/text/engine/TextLine","getAtomWordBoundaryOnLeft",""),null},e.prototype.getAtomGraphic=function(t){return Et.throwPIR("playerglobals/text/engine/TextLine","getAtomGraphic",""),null},e.prototype.dump=function(){return Et.throwPIR("playerglobals/text/engine/TextLine","dump",""),null},e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.MAX_LINE_WIDTH=1e6,e}(_F),cV=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"textLine",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextLineMirrorRegion","get textLine",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextRegion",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextLineMirrorRegion","get nextRegion",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousRegion",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextLineMirrorRegion","get previousRegion",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mirror",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextLineMirrorRegion","get mirror",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextLineMirrorRegion","get element",""),null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return Et.throwPIR("playerglobals/text/engine/TextLineMirrorRegion","get textLine",""),null},enumerable:!1,configurable:!0}),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(Hb),hV=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.ROTATE_0="rotate0",e.ROTATE_90="rotate90",e.ROTATE_180="rotate180",e.ROTATE_270="rotate270",e.AUTO="auto",e}(Hb),pV=function(t){function e(){return t.call(this)||this}return o(e,t),e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e.DEFAULT="default",e.TITLE="title",e.CAPS="caps",e.SMALL_CAPS="smallCaps",e.UPPERCASE="uppercase",e.LOWERCASE="lowercase",e.CAPS_AND_SMALL_CAPS="capsAndSmallCaps",e}(Hb),dV=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e,"capsLock",{get:function(){return Et.throwPIR("playerglobals/ui/Keyboard","static get capsLock",""),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numLock",{get:function(){return Et.throwPIR("playerglobals/ui/Keyboard","static get numLock",""),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"hasVirtualKeyboard",{get:function(){return Et.throwPIR("playerglobals/ui/Keyboard","static get hasVirtualKeyboard",""),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"physicalKeyboardType",{get:function(){return Et.throwPIR("playerglobals/ui/Keyboard","static get physicalKeyboardType",""),""},enumerable:!1,configurable:!0}),e.isAccessible=function(){return Et.throwPIR("playerglobals/ui/Keyboard","static isAccessiblek",""),!0},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(Hb),fV=function(t){function e(){var e=t.call(this)||this;return e._builtInItems=new e.sec.flash.ui.ContextMenuBuiltInItems,e._customItems=[],e._clipboardItems=e.sec.flash.ui.ContextMenuClipboardItems(),e}return o(e,t),Object.defineProperty(e,"isSupported",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenu","isSupported",""),!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"builtInItems",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenu","get builtInItems",""),this._builtInItems},set:function(t){Et.throwPIR("playerglobals/ui/ContextMenu","set builtInItems",""),this._builtInItems=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customItems",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenu","get customItems",""),this.sec.createArrayUnsafe(this._customItems)},set:function(t){Et.throwPIR("playerglobals/ui/ContextMenu","set customItems",""),this._customItems=t.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"link",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenu","get link",""),this._link},set:function(t){Et.throwPIR("playerglobals/ui/ContextMenu","set link",""),this._link=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clipboardMenu",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenu","set clipboardMenu",""),this._clipboardMenu},set:function(t){t=!!t,Et.throwPIR("playerglobals/ui/ContextMenu","set clipboardMenu",""),this._clipboardMenu=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clipboardItems",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenu","get clipboardItems",""),this._clipboardItems},set:function(t){Et.throwPIR("playerglobals/ui/ContextMenu","set clipboardItems",""),this._clipboardItems=t},enumerable:!1,configurable:!0}),e.prototype.hideBuiltInItems=function(){var t=this.builtInItems;t&&(t.save=!1,t.zoom=!1,t.quality=!1,t.play=!1,t.loop=!1,t.rewind=!1,t.forwardAndBack=!1,t.print=!1)},e.prototype.clone=function(){var t=new this.sec.flash.ui.ContextMenu;t._builtInItems=this._builtInItems.clone(),this.cloneLinkAndClipboardProperties(t);for(var e=this._customItems,n=0;n<e.length;n++)t._customItems.push(e[n].clone());return t},e.prototype.cloneLinkAndClipboardProperties=function(t){Et.throwPIR("playerglobals/ui/ContextMenu","cloneLinkAndClipboardProperties","")},e.classInitializer=null,e}(function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(zN)),_V=function(t){function e(e,n,i,r){void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===r&&(r=!0);var o=t.call(this)||this;return e=yb(e),n=!!n,i=!!i,r=!!r,o._caption=e||"",o._separatorBefore=n,o._enabled=i,o._visible=r,o}return o(e,t),Object.defineProperty(e.prototype,"caption",{get:function(){return this._caption},set:function(t){t=yb(t),this._caption=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"separatorBefore",{get:function(){return this._separatorBefore},set:function(t){t=!!t,this._separatorBefore=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t=!!t,this._visible=t},enumerable:!1,configurable:!0}),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(jF),gV=function(t){function e(){var e=t.call(this)||this;return e._save=!0,e._zoom=!0,e._quality=!0,e._play=!0,e._loop=!0,e._rewind=!0,e._forwardAndBack=!0,e._print=!0,e}return o(e,t),Object.defineProperty(e.prototype,"save",{get:function(){return this._save},set:function(t){this._save=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},set:function(t){this._zoom=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"play",{get:function(){return this._play},set:function(t){this._play=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rewind",{get:function(){return this._rewind},set:function(t){this._rewind=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"forwardAndBack",{get:function(){return this._forwardAndBack},set:function(t){this._forwardAndBack=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"print",{get:function(){return this._print},set:function(t){this._print=!!t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){var t=new e;return t._save=this._save,t._zoom=this._zoom,t._quality=this._quality,t._play=this._play,t._loop=this._loop,t._rewind=this._rewind,t._forwardAndBack=this._forwardAndBack,t._print=this._print,t},e.classInitializer=null,e}(Hb),mV=function(t){function e(){var e=t.call(this)||this;return e._cut=!0,e._copy=!0,e._paste=!0,e._clear=!0,e._selectAll=!0,e}return o(e,t),Object.defineProperty(e.prototype,"cut",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenuClipboardItems","get cut",""),this._cut},set:function(t){Et.throwPIR("playerglobals/ui/ContextMenuClipboardItems","set cut",""),this._cut=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copy",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenuClipboardItems","get copy",""),this._copy},set:function(t){Et.throwPIR("playerglobals/ui/ContextMenuClipboardItems","set copy",""),this._copy=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paste",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenuClipboardItems","get paste",""),this._paste},set:function(t){Et.throwPIR("playerglobals/ui/ContextMenuClipboardItems","set paste",""),this._paste=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clear",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenuClipboardItems","get clear",""),this._clear},set:function(t){Et.throwPIR("playerglobals/ui/ContextMenuClipboardItems","set clear",""),this._clear=!!t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectAll",{get:function(){return Et.throwPIR("playerglobals/ui/ContextMenuClipboardItems","get selectAll",""),this._selectAll},set:function(t){Et.throwPIR("playerglobals/ui/ContextMenuClipboardItems","set selectAll",""),this._selectAll=!!t},enumerable:!1,configurable:!0}),e.prototype.clone=function(){var t=new e;return t._cut=this._cut,t._copy=this._copy,t._paste=this._paste,t._clear=this._clear,t._selectAll=this._selectAll,t},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(Hb),yV=function(t){function e(){return t.call(this,void 0)||this}return o(e,t),Object.defineProperty(e,"numDevices",{get:function(){return Et.throwPIR("playerglobals/ui/GameInput","static get numDevices",""),0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isSupported",{get:function(){return Et.throwPIR("playerglobals/ui/GameInput","static get isSupported",""),!1},enumerable:!1,configurable:!0}),e.getDeviceAt=function(t){return Et.throwPIR("playerglobals/ui/GameInput","static getDeviceAt",""),this.sec.throwError("RangeError",kb.ParamRangeError,"index"),null},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(zN),AV=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"numValues",{get:function(){return Et.throwPIR("playerglobals/ui/GameInputControl","get numValues",""),0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return Et.throwPIR("playerglobals/ui/GameInputControl","get index",""),0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relative",{get:function(){return Et.throwPIR("playerglobals/ui/GameInputControl","get relative",""),!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return Et.throwPIR("playerglobals/ui/GameInputControl","get type",""),""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hand",{get:function(){return Et.throwPIR("playerglobals/ui/GameInputControl","get hand",""),""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finger",{get:function(){return Et.throwPIR("playerglobals/ui/GameInputControl","get finger",""),""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device",{get:function(){return Et.throwPIR("playerglobals/ui/GameInputControl","get device",""),null},enumerable:!1,configurable:!0}),e.prototype.getValueAt=function(t){return Et.throwPIR("playerglobals/ui/GameInputControl","getValueAt",""),0},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e}(zN),vV=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.MOVEMENT="movement",e.ROTATION="rotation",e.DIRECTION="direction",e.ACCELERATION="acceleration",e.BUTTON="button",e.TRIGGER="trigger",e}(Hb),bV=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"numControls",{get:function(){return Et.throwPIR("playerglobals/ui/GameInputDevice","get numControls",""),0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sampleInterval",{get:function(){Et.throwPIR("playerglobals/ui/GameInputDevice","get sampleInterval","")},set:function(t){Et.throwPIR("playerglobals/ui/GameInputDevice","set sampleInterval","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return Et.throwPIR("playerglobals/ui/GameInputDevice","get enabled",""),!0},set:function(t){Et.throwPIR("playerglobals/ui/GameInputDevice","set enabled","")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Et.throwPIR("playerglobals/ui/GameInputDevice","get name",""),""},enumerable:!1,configurable:!0}),e.prototype.getControlAt=function(t){return Et.throwPIR("playerglobals/ui/GameInputDevice","getControlAt",""),null},e.prototype.startCachingSamples=function(t,e){Et.throwPIR("playerglobals/ui/GameInputDevice","startCachingSamples","")},e.prototype.stopCachingSamples=function(){Et.throwPIR("playerglobals/ui/GameInputDevice","stopCachingSamples","")},e.prototype.getCachedSamples=function(t,e){return Et.throwPIR("playerglobals/ui/GameInputDevice","getCachedSamples",""),0},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.MAX_BUFFER_SIZE=4800,e}(zN),xV=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.THUMB="thumb",e.INDEX="index",e.MIDDLE="middle",e.UNKNOWN="unknown",e}(Hb),CV=function(t){function e(){return t.call(this)||this}return o(e,t),e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.RIGHT="right",e.LEFT="left",e.UNKNOWN="unknown",e}(Hb),IV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"cursor",{get:function(){return e._cursor},set:function(t){e._cursor=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"supportsCursor",{get:function(){return Et.throwPIR("playerglobals/ui/Mouse","static get supportsCursor",""),!0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"supportsNativeCursor",{get:function(){return Et.throwPIR("playerglobals/ui/Mouse","static get supportsNativeCursor",""),!0},enumerable:!1,configurable:!0}),e.hide=function(){this.sec.player.mouseManager.showCursor=!1},e.show=function(){this.sec.player.mouseManager.showCursor=!0},e.registerCursor=function(t,e){Et.throwPIR("playerglobals/ui/Mouse","static registerCursor","")},e.unregisterCursor=function(t){Et.throwPIR("playerglobals/ui/Mouse","static unregisterCursor","")},e}(Hb),EV=function(){function t(){}return t.GESTURE="gesture",t.NONE="none",t.TOUCH_POINT="touchPoint",t}(),wV=function(){function t(){}return Object.defineProperty(t,"inputMode",{get:function(){return Et.throwPIR("playerglobals/ui/Multitouch","static get inputMode",""),""},set:function(t){Et.throwPIR("playerglobals/ui/Multitouch","static set inputMode","")},enumerable:!1,configurable:!0}),Object.defineProperty(t,"mapTouchToMouse",{get:function(){return Et.throwPIR("playerglobals/ui/Multitouch","static get mapTouchToMouse",""),!1},set:function(t){Et.throwPIR("playerglobals/ui/Multitouch","static set mapTouchToMouse","")},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxTouchPoints",{get:function(){return Et.throwPIR("playerglobals/ui/Multitouch","static get maxTouchPoints",""),0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"supportedGestures",{get:function(){return Et.throwPIR("playerglobals/ui/Multitouch","static get supportedGestures",""),[]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"supportsGestureEvents",{get:function(){return Et.throwPIR("playerglobals/ui/Multitouch","static get supportsGestureEvents",""),!1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"supportsTouchEvents",{get:function(){return Et.throwPIR("playerglobals/ui/Multitouch","static get supportsTouchEvents",""),!1},enumerable:!1,configurable:!0}),t}(),SV=function(t){function e(e,n){var i=t.call(this)||this;return i._delay=+e,i._repeatCount=0|n,i._iteration=0,i}return o(e,t),Object.defineProperty(e.prototype,"running",{get:function(){return this._running},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){((t=+t)<0||!isFinite(t))&&this.sec.throwError("RangeError",kb.DelayRangeError),this._delay=t,this._running&&(this.stop(),this.start())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(t){this._repeatCount=0|t,this._repeatCount&&this._running&&this._iteration>=this._repeatCount&&this.stop()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentCount",{get:function(){return this._iteration},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this._running&&this.stop(),this._iteration=0},e.prototype.stop=function(){this._running=!1,window.clearInterval(this._interval)},e.prototype.start=function(){this._running||(this._running=!0,this._interval=window.setInterval(this._tick.bind(this),this._delay))},e.prototype._tick=function(){if(this._iteration++,this._running){if(e.dispatchingEnabled)try{this.dispatchEvent(new this.sec.flash.events.TimerEvent("timer",!0,!1))}catch(t){}if(0!==this._repeatCount&&this._iteration>=this._repeatCount){this.stop();try{this.dispatchEvent(new this.sec.flash.events.TimerEvent(Rk.TIMER_COMPLETE,!1,!1))}catch(t){}}}},e.classInitializer=null,e.classSymbols=null,e.instanceSymbols=null,e.dispatchingEnabled=!0,e}(zN),DV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.$BgDEFLATE="deflate",e.$BgLZMA="lzma",e.$BgZLIB="zlib",e}(Hb),TV=function(t){function e(e,n,i,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r="rotate0");var o=t.call(this,n,i,r)||this;return o._elements=e?e._buffer:[],o}return o(e,t),e.prototype.setTextBlock=function(e){t.prototype.setTextBlock.call(this,e);for(var n=0;n<this._elements.length;n++)this._elements[n].setTextBlock(e),this._elements[n].setGroupElement(this)},Object.defineProperty(e.prototype,"elementCount",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.getElementAt=function(t){return this._elements[t]},e.prototype.setElements=function(t){this._elements=t._buffer;for(var e=0;e<this._elements.length;e++)this._elements[e].setTextBlock(this._textBlock),this._elements[e].setGroupElement(this);this._textBlock&&this._textBlock.setTextDataDirty()},e.prototype.groupElements=function(t,e){return Et.throwPIR("playerglobals/text/engine/GroupElement","groupElements",""),null},e.prototype.ungroupElements=function(t){Et.throwPIR("playerglobals/text/engine/GroupElement","ungroupElements","")},e.prototype.mergeTextElements=function(t,e){return Et.throwPIR("playerglobals/text/engine/GroupElement","mergeTextElements",""),null},e.prototype.splitTextElement=function(t,e){return Et.throwPIR("playerglobals/text/engine/GroupElement","groupElements",""),null},e.prototype.replaceElements=function(t,e,n){var i=0;e-t>n._buffer.length&&console.warn("[GroupElement] - replaceElements error with range and vector size");for(var r=t;r<=e;r++)this._elements[r]=n._buffer[i++];for(r=0;r<this._elements.length;r++)this._elements[r].setTextBlock(this._textBlock),this._elements[r].setGroupElement(this);return this._textBlock&&this._textBlock.setTextDataDirty(),n},e.prototype.getElementAtCharIndex=function(t){return null},e.forceNativeConstructor=!0,e.forceNativeMethods=!0,e}(RU),PV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createObjectWithPrototype=function(t){var e=t.sec.AXObject.axConstruct([]);for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},e.forceNativeConstructor=!1,e.forceNativeMethods=!0,e}(Hb),BV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.checkNamespace=function(t){var e=t.$Bgnamespace();if(this._textFlowNamespace){if(e.uri!=this._textFlowNamespace.uri)return!1}else{if(e.uri!=this.$Bgns.uri)return!1;this._textFlowNamespace=e}return!0},e.forceNativeConstructor=!1,e.forceNativeMethods=!0,e}(Hb);function OV(t,e){QM(t,e)}var MV=function(){return function(){}}(),LV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flash={display:{EventDispatcher:zN,DisplayObject:cF,DisplayObjectContainer:_F,Stage:MF,Loader:TF,LoaderInfo:OF,MovieClip:mF,Graphics:VF,Bitmap:yF,BitmapData:vF,SimpleButton:zF,Sprite:gF,Shape:QF,FrameLabel:UF},events:{EventDispatcher:zN,Event:UN,FocusEvent:dF,KeyboardEvent:pF,MouseEvent:QN,TouchEvent:hF,ProgressEvent:PF,IOErrorEvent:EF,TimerEvent:Rk},external:{ExternalInterface:Uk},filters:{BevelFilter:tF,BitmapFilter:KN,BlurFilter:iF,ColorMatrixFilter:oF,ConvolutionFilter:rF,DisplacementMapFilter:jk,DropShadowFilter:JN,GlowFilter:ZN,GradientBevelFilter:nF,GradientGlowFilter:eF},text:{TextField:yU,TextFormat:AU,TextSnapshot:PU,TextLineMetrics:TU},geom:{Point:nk,Rectangle:ik,Matrix:$F,ColorTransform:ZF,Transform:rk,Vector3D:ok,Matrix3D:ek},net:{URLRequest:RF,URLLoader:iU,URLVariables:LF,SharedObject:nU},system:{ApplicationDomain:SF,Capabilities:pU,LoaderContext:DF,Security:fU,fscommand:dU},ui:{ContextMenu:fV,ContextMenuItem:_V,ContextMenuBuiltInItems:gV,Mouse:MV},utils:{ByteArray:$O},media:{Sound:wF,SoundChannel:Hk,SoundTransform:Qk,SoundMixer:zk},xml:{XMLDocument:XMLDocument,XMLNode:NM}},e}return o(e,t),e}(IN);function RV(t,e){return fetch((n=t,i=n.indexOf("://"),r="/"===n[0]?"/":"",o=n.split(/[\\|/]/).filter(Boolean),i>-1&&(o[0]+="/"),r+o.join("/"))).then((function(t){if(!t.ok)throw"Ups: ".concat(t.statusText,"(").concat(t.status,")");return"json"===e?t.json():t.arrayBuffer()})).catch((function(e){throw new Error("Unable to load: "+t+": "+e)}));var n,i,r,o}var NV=function(){function t(){}return Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){console.log("dispose PlayerGlobal"),SF.currentDomain=null,nU._sharedObjects={}},t.prototype.createSecurityDomain=function(e,n,i){var r=this;this._avmStage=e,this._avmStage.avmTestHandler&&(HR.print=function(t,n){var i,r,o="";if(2==arguments.length)o=null===(i=arguments[1])||void 0===i?void 0:i.toString();else for(var a=1;a<arguments.length;a++)o+=null===(r=arguments[a])||void 0===r?void 0:r.toString(),a!==arguments.length-1&&(o+=" ");var s=o.split("\n");for(a=0;a<s.length;a++)console.log("%c Test-Trace from SWF:","color: DodgerBlue",s[a]),e.avmTestHandler.addMessage(s[a])}),OV("flashx.textLayout.conversion.BaseTextLayoutImporter",BV),OV("flashx.textLayout.property.Property",PV),OV("flash.desktop.Clipboard",NF),OV("flash.desktop.ClipboardFormats",FF),OV("flash.display.Bitmap",yF),OV("flash.display.BitmapData",vF),OV("flash.display.BitmapDataChannel",kF),OV("flash.display.BlendMode",ze),OV("flash.display.DisplayObject",cF),OV("flash.display.DisplayObjectContainer",_F),OV("flash.display.FrameLabel",UF),OV("flash.display.Graphics",VF),OV("flash.display.InteractiveObject",fF),OV("flash.display.Loader",TF),OV("flash.display.LoaderInfo",OF),OV("flash.display.MovieClip",mF),OV("flash.display.NativeMenuItem",jF),OV("flash.display.Scene",GF),OV("flash.display.Shape",QF),OV("flash.display.SimpleButton",zF),OV("flash.display.Sprite",gF),OV("flash.display.Stage",MF),OV("flash.errors.EOFError",XF),OV("flash.errors.IllegalOperationError",YF),OV("flash.errors.InvalidSWFError",qF),OV("flash.errors.IOError",HF),OV("flash.errors.MemoryError",KF),OV("flash.errors.ScriptTimeoutError",WF),OV("flash.errors.StackOverflowError",JF),OV("flash.events.AccelerometerEvent",lk),OV("flash.events.ActivityEvent",uk),OV("flash.events.AsyncErrorEvent",ck),OV("flash.events.ContextMenuEvent",hk),OV("flash.events.DataEvent",pk),OV("flash.events.ErrorEvent",IF),OV("flash.events.Event",UN),OV("flash.events.EventDispatcher",zN),OV("flash.events.EventPhase",dk),OV("flash.events.FocusEvent",dF),OV("flash.events.FullScreenEvent",fk),OV("flash.events.GameInputEvent",_k),OV("flash.events.GeolocationEvent",gk),OV("flash.events.GestureEvent",mk),OV("flash.events.GesturePhase",yk),OV("flash.events.HTTPStatusEvent",Ak),OV("flash.events.IMEEvent",vk),OV("flash.events.IOErrorEvent",EF),OV("flash.events.KeyboardEvent",pF),OV("flash.events.MouseEvent",QN),OV("flash.events.NetDataEvent",bk),OV("flash.events.NetStatusEvent",xk),OV("flash.events.OutputProgressEvent",Ck),OV("flash.events.PressAndTabGestureEvent",Ik),OV("flash.events.ProgressEvent",PF),OV("flash.events.SampleDataEvent",Ek),OV("flash.events.ShaderEvent",wk),OV("flash.events.SoftKeyboardEvent",Sk),OV("flash.events.SoftKeyboardTrigger",Dk),OV("flash.events.StageVideoAvailabilityEvent",Tk),OV("flash.events.StageVideoEvent",Pk),OV("flash.events.StatusEvent",Bk),OV("flash.events.SyncEvent",Ok),OV("flash.events.TextEvent",CF),OV("flash.events.ThrottleEvent",Mk),OV("flash.events.ThrottleType",Lk),OV("flash.events.TimerEvent",Rk),OV("flash.events.TouchEvent",hF),OV("flash.events.TransformGestureEvent",Nk),OV("flash.events.UncaughtErrorEvent",Fk),OV("flash.events.UncaughtErrorEvents",xF),OV("flash.events.VideoEvent",kk),OV("flash.external.ExternalInterface",Uk),OV("flash.filters.BevelFilter",tF),OV("flash.filters.BitmapFilter",KN),OV("flash.filters.BlurFilter",iF),OV("flash.filters.ColorMatrixFilter",oF),OV("flash.filters.ConvolutionFilter",rF),OV("flash.filters.DisplacementMapFilter",jk),OV("flash.filters.DropShadowFilter",JN),OV("flash.filters.GlowFilter",ZN),OV("flash.filters.GradientBevelFilter",nF),OV("flash.filters.GradientGlowFilter",eF),OV("flash.geom.ColorTransform",ZF),OV("flash.geom.Matrix",$F),OV("flash.geom.Matrix3D",ek),OV("flash.geom.Point",nk),OV("flash.geom.Rectangle",ik),OV("flash.geom.Transform",rk),OV("flash.geom.Vector3D",ok),OV("flash.globalization.LocaleID",sk),OV("flash.globalization.NumberFormatter",Gk),OV("flash.media.Sound",wF),OV("flash.media.SoundChannel",Hk),OV("flash.media.SoundMixer",zk),OV("flash.media.SoundTransform",Qk),OV("flash.net.FileFilter",Xk),OV("flash.net.FileReference",Wk),OV("flash.net.LocalConnection",oU),OV("flash.net.SharedObject",nU),OV("flash.net.URLLoader",iU),OV("flash.net.URLRequest",RF),OV("flash.net.URLVariables",LF),OV("flash.system.ApplicationDomain",SF),OV("flash.system.Capabilities",pU),OV("flash.system.LoaderContext",DF),OV("flash.system.Security",fU),OV("flash.system.SecurityDomain",aU),OV("flash.system.System",_U),OV("flash.text.CSMSettings",DU),OV("flash.text.Font",gU),OV("flash.text.FontType",SU),OV("flash.text.StaticText",bU),OV("flash.text.StyleSheet",mU),OV("flash.text.TextColorType",wU),OV("flash.text.TextDisplayMode",EU),OV("flash.text.TextField",yU),OV("flash.text.TextFormat",AU),OV("flash.text.TextLineMetrics",TU),OV("flash.text.TextRenderer",xU),OV("flash.text.TextSnapshot",PU),OV("flash.text.TextFormatDisplay",CU),OV("flash.text.TextExtent",IU),OV("flash.text.TextRun",vU),OV("flash.text.engine.BreakOpportunity",OU),OV("flash.text.engine.CFFHinting",MU),OV("flash.text.engine.ContentElement",RU),OV("flash.text.engine.DigitCase",NU),OV("flash.text.engine.DigitWidth",FU),OV("flash.text.engine.EastAsianJustifier",UU),OV("flash.text.engine.ElementFormat",GU),OV("flash.text.engine.FontDescription",QU),OV("flash.text.engine.FontLookup",zU),OV("flash.text.engine.FontMetrics",HU),OV("flash.text.engine.FontMetrics",HU),OV("flash.text.engine.FontPosture",XU),OV("flash.text.engine.FontWeight",YU),OV("flash.text.engine.GraphicElement",qU),OV("flash.text.engine.GroupElement",TV),OV("flash.text.engine.JustificationStyle",KU),OV("flash.text.engine.Kerning",WU),OV("flash.text.engine.LigatureLevel",JU),OV("flash.text.engine.LineJustification",ZU),OV("flash.text.engine.RenderingMode",$U),OV("flash.text.engine.SpaceJustifier",tV),OV("flash.text.engine.TabAlignment",eV),OV("flash.text.engine.TabStop",nV),OV("flash.text.engine.TextBaseline",VU),OV("flash.text.engine.TextBlock",aV),OV("flash.text.engine.TextElement",sV),OV("flash.text.engine.TextJustifier",kU),OV("flash.text.engine.TextLine",uV),OV("flash.text.engine.TextLineCreationResult",iV),OV("flash.text.engine.TextLineMirrorRegion",cV),OV("flash.text.engine.TextLineValidity",lV),OV("flash.text.engine.TextRotation",hV),OV("flash.text.engine.TypographicCase",pV),OV("flash.text.ime.CompositionAttributeRange",BU),OV("flash.ui.ContextMenu",fV),OV("flash.ui.ContextMenuBuiltInItems",gV),OV("flash.ui.ContextMenuClipboardItems",mV),OV("flash.ui.ContextMenuItem",_V),OV("flash.ui.GameInput",yV),OV("flash.ui.GameInputControl",AV),OV("flash.ui.GameInputControlType",vV),OV("flash.ui.GameInputDevice",bV),OV("flash.ui.GameInputFinger",xV),OV("flash.ui.GameInputHand",CV),OV("flash.ui.Keyboard",dV),OV("flash.ui.Mouse",IV),OV("flash.ui.Multitouch",wV),OV("flash.ui.MultitouchInputMode",EV),OV("flash.utils.ByteArray",$O),OV("flash.utils.CompressionAlgorithm",DV),OV("flash.utils.Timer",SV),OV("flash.xml.XMLDocument",FM),OV("flash.xml.XMLNode",NM),zM("flash.system.fscommand",dU),Uk.ensureInitialized();var o=t.builtinsBaseUrl,a=[RV("".concat(o,"/builtin.abc"),"arraybuffer")];return i&NN.Playerglobal&&a.push(RV("".concat(o,"/playerglobal.abcs"),"arraybuffer"),RV("".concat(o,"/playerglobal.json"),"json"),RV("".concat(o,"/avmplus.abc"),"arraybuffer")),Promise.all(a).then((function(t){var o=t[0],a=t[1],s=t[2],l=t[3],u=new LV,c=new RN({url:"builtin.abc",app:u.system},new Uint8Array(o));if(u.swfVersion=n.swfVersion,u.system.loadABC(c),u.initialize(),u.system.executeABC(c),u.player=e,!(i&NN.Playerglobal))return null;var h=new FN(u.system,new Uint8Array(a),s);u.addCatalog(h);var p=new RN({url:"avmplus.File",app:u.system},new Uint8Array(l));return u.system.loadAndExecuteABC(p),r._constructStage(u,n),new bF(u)}))},t.prototype._constructStage=function(t,e){this._contentLoaderInfo=new t.flash.display.LoaderInfo(this,this._avmStage.root),this._contentLoaderInfo.url=new URL(e.url,document.baseURI).href,this._applicationDomain=new t.flash.system.ApplicationDomain,this._contentLoaderInfo._setApplicationDomain(this._applicationDomain),oR.loaderContext=new t.flash.system.LoaderContext(!1,this._applicationDomain),this._stage=new t.flash.display.Stage,t.flash.display.DisplayObject.axClass._activeStage=this._stage,this._avmStage.root.adapter=this._stage,this._stage.adaptee=this._avmStage.root},t.prototype.enterFrame=function(){this._stage&&this._stage.enterFrame()},t.prototype.resizeStage=function(){this._stage&&this._stage.resizeCallback()},t.prototype.addAsset=function(t,e){switch(t.adapter.loaderInfo=this._contentLoaderInfo,t.assetType){case Ch.assetType:case Dh.assetType:case Le.assetType:this._applicationDomain.addDefinition(t.name,t);break;case w.assetType:this._applicationDomain.addAudioDefinition(t.name,t);break;case kc.assetType:this._applicationDomain.addFontDefinition(t.name,t);break;case Zs.assetType:this._applicationDomain.addDefinition(t.name,t);break;case yl.assetType:this._applicationDomain.addDefinition(t.name,t),e&&t.isAVMScene&&(this._content=t.adapter.clone(),this._content.loaderInfo=this._contentLoaderInfo,this._content.adaptee.reset(),this._content.adaptee.firstFrameOnSWFStart=!0,_l.invalidAS3Constructors=!0,this._stage.adaptee.addChild(this._content.adaptee),_l.execute_as3_constructors_recursiv(this._content.adaptee),this._content.dispatchStaticEvent("added",this._content),this._content.dispatch_ADDED_TO_STAGE(!0));break;case"[asset Generic]":this._applicationDomain.addDefinition(t.name,t);break;case zs.assetType:case nl.assetType:break;default:console.warn("Loaded unhandled asset-type",t.assetType)}},t.builtinsBaseUrl="./assets/builtins/",t}();function FV(t){var e=Object.assign({},t);return Object.keys(e).forEach((function(t){"object"==typeof e[t]?e[t]=FV(e[t]):"function"==typeof e[t]&&(e[t]=e[t].toString())})),e}console.debug("AwayFL - PlayerGlobal - 0.2.400");var kV=["id","visible","index","assetType:type","name"],UV=function(){function t(t){this.player=t,this._rafState="play",this._defaultRaf=self.requestAnimationFrame,this._requestedCallbacks=[],Dp(this._dirObjectByIds.bind(this),{name:"dirObjectByIds",description:"Export selected object to console",declaration:[{name:"ids",type:"object"}]}),Dp(this._applyPropsByIds.bind(this),{name:"applyPropsByIds",description:"Apply propertyes by node ids",declaration:[{name:"ids",type:"object"},{name:"object",type:"object"}]}),Dp(this._removeObjectByIds.bind(this),{name:"removeObjectByIds",description:"Remove object from sceen tree",declaration:[{name:"ids",type:"object"}]}),Dp(this._getInfo.bind(this),{name:"getInfo",description:"Get file info for app",declaration:[{name:"return",type:"object"}]}),Dp(this._getSceneTree.bind(this),{name:"getNodeTree",description:"Get sceen tree of app",declaration:[{name:"return",type:"object"},{name:"flat",type:"boolean"},{name:"from",type:"number"},{name:"rect",type:"object"}]}),Dp(this._getStageCanvas.bind(this),{name:"getStageCanvas",description:"Get canvas attahed to stage",declaration:[]}),Dp(this._setRAFState.bind(this),{name:"setRAFState",description:"Changed RAF state",declaration:[{name:"return",type:"string"},{name:"state",type:"string"}]}),Dp(this._getRAFState.bind(this),{name:"getRAFState",description:"Changed RAF state",declaration:[{name:"return",type:"string"},{name:"state",type:"string"}]}),this._mokedRaf=this._mokedRaf.bind(this),window._AWAY_DEBUG_PLAYER_=this}return t.prototype.onAvmInit=function(t){window._AWAY_DEBUG_STORAGE=1===t?_g:tU},t.prototype._mokedRaf=function(t){if(-1===this._requestedCallbacks.indexOf(t))return this._requestedCallbacks.push(t),0},t.prototype._setRAFState=function(t){if(!t)return this._rafState;if(t!==this._rafState){if("next"===t&&"stop"===this._rafState){var e=performance.now(),n=this._requestedCallbacks.slice();return this._rafState="next",this._requestedCallbacks.length=0,n.forEach((function(t){return t&&t(e)})),this._rafState="stop"}if("stop"===t)return this._requestedCallbacks.length=0,self.requestAnimationFrame=this._mokedRaf,this._rafState="stop";if("play"===t){var i=performance.now();n=this._requestedCallbacks.slice();this._rafState="play",this._requestedCallbacks.length=0,self.requestAnimationFrame=this._defaultRaf,n.forEach((function(t){return t&&t(i)}))}return this._rafState}},t.prototype._getRAFState=function(){return this._rafState},t.prototype._selectNode=function(t){for(var e=this.player.root,n=function(t){if(!(e=e._children.find((function(e){return e.id===t}))))return"break"},i=0,r=t;i<r.length;i++){if("break"===n(r[i]))break}if(!e)throw new Error("Node not found");return e},t.prototype._getStageCanvas=function(){return this.player.view.stage.container},t.prototype._dirObjectByIds=function(t){var e=this._selectNode(t),n=window._lastTempNode=window._lastTempNode||1;window._lastTempNode++,window["tempNode"+n]=e,console.log("tempNode"+n,"="),console.dir(e)},t.prototype._getNodeBounds=function(t){var e,n=this.player.view,i=Cf.instance&&Cf.instance().pool;if(i){var r=i.getNode(t).partition;e=Cr.getInstance().getBoundsPicker(r).getBoxBounds(i.getNode(this.player.root),!0,!0)}else e=Cr.getInstance().getBoundsPicker(t.partition).getBoxBounds(this.player.root);if(!e)return null;var o=n.width/this.player.stageWidth,a=n.height/this.player.stageHeight;return{x:e.x*o,y:e.y*a,width:e.width*o,height:e.height*a}},t.prototype._traverse=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!1);for(var r={parentId:t.parent?t.parent.id:-1,children:null,rect:null},o=0,a=kV;o<a.length;o++){var s=a[o],l=s.split(":");l.length>1?r[l[1]]=t[l[0]]:r[s]=t[s]}if(r.globalVisible=t.parent?t.parent.visible&&t.visible:t.visible,n&&(r.rect=this._getNodeBounds(t)),e){r.children=[];for(var u=0,c=t._children;u<c.length;u++){var h=c[u];(i&&h.visible||!i)&&r.children.push(this._traverse(h,e,n,i))}}return r},t.prototype._removeObjectByIds=function(t){var e=this._selectNode(t);e.parent.removeChild(e)},t.prototype._applyPropsByIds=function(t,e){var n=this._selectNode(t);Object.assign(n,e)},t.prototype._getSceneTree=function(t,e,n){"object"!=typeof t&&(t={flat:t||!1,from:e||0,rect:n||!1,visibleOnly:!1});var i=t.flat,r=void 0!==i&&i;t.from;for(var o=t.rect,a=void 0!==o&&o,s=t.visibleOnly,l=void 0!==s&&s,u=[],c=this.player.root._children.slice();;){var h=c.pop();if(!h)break;u.push(this._traverse(h,!r,a,l)),r&&c.push.apply(c,h._children.reverse().filter((function(t){return t.visible&&l||!l})))}return u},t.prototype._getInfo=function(){var t,e=this.player,n=e._avmHandler.avmVersion,i=e._swfFile,r=i.swfVersion,o=i.fpVersion,a=i.frameCount,s=i.frameRate,l=i.compression,u=i.bytesTotal,c=null===(t=e._gameConfig.binary.filter((function(t){return"GAME"===t.resourceType}))[0])||void 0===t?void 0:t.path;return c&&c.indexOf("?")>-1&&(c=c.substring(0,c.indexOf("?"))),{file:{name:e._gameConfig.title,path:c,size:u},runtime:{swfVersion:r,fpVersion:o,frameCount:a,frameRate:s,compression:l,avm:n},config:FV(e._gameConfig)}},t}(),VV=function(t){function e(e){var n=t.call(this,e)||this;return e.externalLib&&(EL.lib=e.externalLib),n.registerAVMStageHandler(new lb),n.registerAVMStageHandler(new kN(new NV)),n.addEventListener(Lh.AVM_COMPLETE,(function(t){return n.onAVMAvailable(t)})),n._debug=new UV(n),n}return o(e,t),e.prototype.onAVMAvailable=function(t){this._debug&&this._debug.onAvmInit(t.avmVersion===Oh.AVM1?1:2)},e}(Cf);console.debug("AwayFL-Player - 0.2.43"),he.registerDefaults((function(){return new Le(1,1,!0,0)}),null,null,null);var jV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,[],["$version#","_alpha#","getAwayJSID","attachAudio","attachBitmap","attachMovie","beginFill","beginBitmapFill","beginGradientFill","blendMode#","cacheAsBitmap#","_callFrame","clear","createEmptyMovieClip","createTextField","_currentframe#","curveTo","_droptarget#","duplicateMovieClip","enabled#","endFill","filters#","_framesloaded#","_focusrect#","forceSmoothing#","getBounds","getBytesLoaded","getBytesTotal","getDepth","getInstanceAtDepth","getNextHighestDepth","getRect","getSWFVersion","getTextSnapshot","getURL","globalToLocal","gotoAndPlay","gotoAndStop","_height#","_highquality#","hitArea#","hitTest","lineGradientStyle","lineStyle","lineTo","loadMovie","loadVariables","localToGlobal","_lockroot#","menu#","moveTo","_name#","nextFrame","opaqueBackground#","_parent#","play","prevFrame","_quality#","removeMovieClip","_root#","_rotation#","scale9Grid#","scrollRect#","setMask","_soundbuftime#","startDrag","stop","stopDrag","swapDepths","tabChildren#","tabEnabled#","tabIndex#","_target#","_totalframes#","trackAsMenu#","toString","unloadMovie","_url#","useHandCursor#","_visible#","_width#","_x#","_xmouse#","_xscale#","_y#","_ymouse#","_yscale#"])},e.prototype._mouseEventHandler=function(t){for(var n=this,i=this._actions,r=i.length,o=0;o<r;o++){var a=i[o];if(a.stateTransitionFlags===t){if(e.retryButtonIDS&&e.retryButtonAction&&e.retryButtonIDS[this.adaptee.symbolID])return E.setVolume(0),void e.retryButtonAction((function(){E.setVolume(1),n._runAction(a)}));e.buttonPokiSDKActions[this.adaptee.name]?(E.setVolume(0),e.buttonPokiSDKActions[this.adaptee.name]((function(){E.setVolume(1),n._runAction(a)}))):e.buttonPokiSDKActions.all?(E.setVolume(0),e.buttonPokiSDKActions.all((function(){E.setVolume(1),n._runAction(a)}))):this._runAction(a)}}},e}(ig),GV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.createAVM1Class=function(t){return Gm(t,!0,e,[],["$version#","_alpha#","getAwayJSID","attachAudio","attachBitmap","attachMovie","beginFill","beginBitmapFill","beginGradientFill","blendMode#","cacheAsBitmap#","_callFrame","clear","createEmptyMovieClip","createTextField","_currentframe#","curveTo","_droptarget#","duplicateMovieClip","enabled#","endFill","filters#","_framesloaded#","_focusrect#","forceSmoothing#","getBounds","getBytesLoaded","getBytesTotal","getDepth","getInstanceAtDepth","getNextHighestDepth","getRect","getSWFVersion","getTextSnapshot","getURL","globalToLocal","gotoAndPlay","gotoAndStop","_height#","_highquality#","hitArea#","hitTest","lineGradientStyle","lineStyle","lineTo","loadMovie","loadVariables","localToGlobal","_lockroot#","menu#","moveTo","_name#","nextFrame","opaqueBackground#","_parent#","play","prevFrame","_quality#","removeMovieClip","_root#","_rotation#","scale9Grid#","scrollRect#","setMask","_soundbuftime#","startDrag","stop","stopDrag","swapDepths","tabChildren#","tabEnabled#","tabIndex#","_target#","_totalframes#","trackAsMenu#","toString","unloadMovie","_url#","useHandCursor#","_visible#","_width#","_x#","_xmouse#","_xscale#","_y#","_ymouse#","_yscale#"])},e.prototype.findChildWithSymbolIDs=function(t){for(var n=t._children.length,i=0;i<n;i++){var r=t._children[i];if(r&&r.symbolID&&e.retryButtonIDS[r.symbolID])return!0;if(r&&r._children)if(this.findChildWithSymbolIDs(r))return!0}return!1},e.prototype.stop=function(){e.actionWhenRetryButtonEncountered&&e.retryButtonIDS&&(this.findChildWithSymbolIDs(this.adaptee)&&e.actionWhenRetryButtonEncountered());return e.pokiSDKonStopAction&&e.pokiSDKonStopAction.action&&e.pokiSDKonStopAction.childName&&this.adaptee.getChildByName(e.pokiSDKonStopAction.childName)||e.pokiSDKonStopAction&&e.pokiSDKonStopAction.action&&e.pokiSDKonStopAction.childName&&"all"==e.pokiSDKonStopAction.childName?e.pokiSDKonStopAction.action():e.pokiSDKonStopAction&&e.pokiSDKonStopAction.action&&e.pokiSDKonStopAction.mcName&&e.pokiSDKonStopAction.mcName==this.adaptee.name&&(e.pokiSDKonStopAction.ignoreFrames&&e.pokiSDKonStopAction.ignoreFrames.indexOf(this.adaptee.currentFrameIndex)>=0||e.pokiSDKonStopAction.action()),this.adaptee.stop()},e}(Y_),QV=eh((function(t,e){t.exports=function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){if(!s&&nh)return nh(a);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return r(e[a][1][t]||t)}),u,u.exports,t,e,n,i)}return n[a].exports}for(var o=nh,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){var i=t("./utils"),r=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,r,a,s,l,u,c=[],h=0,p=t.length,d=p,f="string"!==i.getTypeOf(t);h<t.length;)d=p-h,r=f?(e=t[h++],n=h<p?t[h++]:0,h<p?t[h++]:0):(e=t.charCodeAt(h++),n=h<p?t.charCodeAt(h++):0,h<p?t.charCodeAt(h++):0),a=e>>2,s=(3&e)<<4|n>>4,l=1<d?(15&n)<<2|r>>6:64,u=2<d?63&r:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(u));return c.join("")},n.decode=function(t){var e,n,i,a,s,l,u=0,c=0,h="data:";if(t.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var p,d=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&d--,t.charAt(t.length-2)===o.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=r.uint8array?new Uint8Array(0|d):new Array(0|d);u<t.length;)e=o.indexOf(t.charAt(u++))<<2|(a=o.indexOf(t.charAt(u++)))>>4,n=(15&a)<<4|(s=o.indexOf(t.charAt(u++)))>>2,i=(3&s)<<6|(l=o.indexOf(t.charAt(u++))),p[c++]=e,64!==s&&(p[c++]=n),64!==l&&(p[c++]=i);return p}},{"./support":30,"./utils":32}],2:[function(t,e,n){var i=t("./external"),r=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function s(t,e,n,i,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=i,this.compressedContent=r}s.prototype={getContentWorker:function(){var t=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,n){return t.pipe(new o).pipe(new a("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",e)},e.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){var i=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){var i=t("./utils"),r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return~t}(0|e,t,t.length,0):function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e.charCodeAt(s))];return~t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){var i=null;i="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako"),o=t("./utils"),a=t("./stream/GenericWorker"),s=i?"uint8array":"array";function l(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,t.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new l("Deflate",t)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){function i(t,e){var n,i="";for(n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i}function r(t,e,n,r,a,c){var h,p,d=t.file,f=t.compression,_=c!==s.utf8encode,g=o.transformTo("string",c(d.name)),m=o.transformTo("string",s.utf8encode(d.name)),y=d.comment,A=o.transformTo("string",c(y)),v=o.transformTo("string",s.utf8encode(y)),b=m.length!==d.name.length,x=v.length!==y.length,C="",I="",E="",w=d.dir,S=d.date,D={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(D.crc32=t.crc32,D.compressedSize=t.compressedSize,D.uncompressedSize=t.uncompressedSize);var T=0;e&&(T|=8),_||!b&&!x||(T|=2048);var P=0,B=0;w&&(P|=16),"UNIX"===a?(B=798,P|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(d.unixPermissions,w)):(B=20,P|=function(t){return 63&(t||0)}(d.dosPermissions)),h=S.getUTCHours(),h<<=6,h|=S.getUTCMinutes(),h<<=5,h|=S.getUTCSeconds()/2,p=S.getUTCFullYear()-1980,p<<=4,p|=S.getUTCMonth()+1,p<<=5,p|=S.getUTCDate(),b&&(I=i(1,1)+i(l(g),4)+m,C+="up"+i(I.length,2)+I),x&&(E=i(1,1)+i(l(A),4)+v,C+="uc"+i(E.length,2)+E);var O="";return O+="\n\0",O+=i(T,2),O+=f.magic,O+=i(h,2),O+=i(p,2),O+=i(D.crc32,4),O+=i(D.compressedSize,4),O+=i(D.uncompressedSize,4),O+=i(g.length,2),O+=i(C.length,2),{fileRecord:u.LOCAL_FILE_HEADER+O+g+C,dirRecord:u.CENTRAL_FILE_HEADER+i(B,2)+O+i(A.length,2)+"\0\0\0\0"+i(P,4)+i(r,4)+g+C+A}}var o=t("../utils"),a=t("../stream/GenericWorker"),s=t("../utf8"),l=t("../crc32"),u=t("../signature");function c(t,e,n,i){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,a),c.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,a.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-i-1))/n:100}}))},c.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=r(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=r(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return u.DATA_DESCRIPTOR+i(t.crc32,4)+i(t.compressedSize,4)+i(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,a){var s=o.transformTo("string",a(r));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(t,2)+i(t,2)+i(e,4)+i(n,4)+i(s.length,2)+s}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},c.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(t){var e=this._sources;if(!a.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},c.prototype.lock=function(){a.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){var i=t("../compressions"),r=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var o=new r(e.streamFiles,n,e.platform,e.encodeFileName),a=0;try{t.forEach((function(t,n){a++;var r=function(t,e){var n=t||e,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),s=n.options.compressionOptions||e.compressionOptions||{},l=n.dir,u=n.date;n._compressWorker(r,s).withStreamInfo("file",{name:t,dir:l,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t("./external"),e.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){var i=t("./utils"),r=t("./external"),o=t("./utf8"),a=t("./zipEntries"),s=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function u(t){return new r.Promise((function(e,n){var i=t.decompressed.getContentWorker().pipe(new s);i.on("error",(function(t){n(t)})).on("end",(function(){i.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=i.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new a(e);return n.load(t),n})).then((function(t){var n=[r.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var o=0;o<i.length;o++)n.push(u(i[o]));return r.Promise.all(n)})).then((function(t){for(var r=t.shift(),o=r.files,a=0;a<o.length;a++){var s=o[a],l=s.fileNameStr,u=i.resolve(s.fileNameStr);n.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders}),s.dir||(n.file(u).unsafeOriginalName=l)}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){var i=t("../utils"),r=t("../stream/GenericWorker");function o(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(o,r),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){var i=t("readable-stream").Readable;function r(t,e,n){i.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}t("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,e,n){e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){function i(t,e,n){var i,r=o.getTypeOf(e),s=o.extend(n||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=_(t)),s.createFolders&&(i=f(t))&&g.call(this,i,!0);var h="string"===r&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!h),(e instanceof u&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",r="string");var m=null;m=e instanceof u||e instanceof a?e:p.isNode&&p.isStream(e)?new d(t,e):o.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var y=new c(t,m,s);this.files[t]=y}var r=t("./utf8"),o=t("./utils"),a=t("./stream/GenericWorker"),s=t("./stream/StreamHelper"),l=t("./defaults"),u=t("./compressedObject"),c=t("./zipObject"),h=t("./generate"),p=t("./nodejsUtils"),d=t("./nodejs/NodejsStreamInputAdapter"),f=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},_=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},g=function(t,e){return e=void 0!==e?e:l.createFolders,t=_(t),this.files[t]||i.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function m(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,i;for(e in this.files)i=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,i)},filter:function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(i)})),e},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,i.call(this,t,e,n),this;if(m(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(m(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=g.call(this,e),i=this.clone();return i.root=n.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";e=h.generateWorker(this,n,i)}catch(t){(e=new a("error")).error(t)}return new s(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){var i=t("./DataReader");function r(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){var i=t("../utils");function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=r},{"../utils":32}],19:[function(t,e,n){var i=t("./Uint8ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){var i=t("./DataReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){var i=t("./ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){var i=t("../utils"),r=t("../support"),o=t("./ArrayReader"),a=t("./StringReader"),s=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new s(t):r.uint8array?new l(i.transformTo("uint8array",t)):new o(i.transformTo("array",t)):new a(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,n){var i=t("./GenericWorker"),r=t("../utils");function o(t){i.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(o,i),o.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){var i=t("./GenericWorker"),r=t("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,i),o.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(o,r),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}r.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=i},{}],29:[function(t,e,n){var i=t("../utils"),r=t("./ConvertWorker"),o=t("./GenericWorker"),a=t("../base64"),s=t("../support"),l=t("../external"),u=null;if(s.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function c(t,e){return new l.Promise((function(n,r){var o=[],s=t._internalType,l=t._outputType,u=t._mimeType;t.on("data",(function(t,n){o.push(t),e&&e(n)})).on("error",(function(t){o=[],r(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),n);case"base64":return a.encode(e);default:return i.transformTo(t,e)}}(l,function(t,e){var n,i=0,r=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(r=new Uint8Array(o),n=0;n<e.length;n++)r.set(e[n],i),i+=e[n].length;return r;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(s,o),u);n(t)}catch(t){r(t)}o=[]})).resume()}))}function h(t,e,n){var a=e;switch(e){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=e,this._mimeType=n,i.checkSupport(a),this._worker=t.pipe(new r(a)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}h.prototype={accumulate:function(t){return c(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){i.delay(e,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),n.blob=0===r.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(t){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){for(var i=t("./utils"),r=t("./support"),o=t("./nodejsUtils"),a=t("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function c(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(t){return r.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,i,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=r.uint8array?new Uint8Array(l):new Array(l),o=a=0;a<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[a++]=n:(n<2048?e[a++]=192|n>>>6:(n<65536?e[a++]=224|n>>>12:(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63),e[a++]=128|n>>>6&63),e[a++]=128|63&n);return e}(t)},n.utf8decode=function(t){return r.nodebuffer?i.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,r,o,a=t.length,l=new Array(2*a);for(e=n=0;e<a;)if((r=t[e++])<128)l[n++]=r;else if(4<(o=s[r]))l[n++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&e<a;)r=r<<6|63&t[e++],o--;1<o?l[n++]=65533:r<65536?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),i.applyFromCharCode(l)}(t=i.transformTo(r.uint8array?"uint8array":"array",t))},i.inherits(u,a),u.prototype.processChunk=function(t){var e=i.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var a=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}(e),l=e;a!==e.length&&(r.uint8array?(l=e.subarray(0,a),this.leftOver=e.subarray(a,e.length)):(l=e.slice(0,a),this.leftOver=e.slice(a,e.length))),this.push({data:n.utf8decode(l),meta:t.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,i.inherits(c,a),c.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){var i=t("./support"),r=t("./base64"),o=t("./nodejsUtils"),a=t("./external");function s(t){return t}function l(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}t("setimmediate"),n.newBlob=function(t,e){n.checkSupport("blob");try{return new Blob([t],{type:e})}catch(n){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(t,e,n){var i=[],r=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;r<o;)"array"===e||"nodebuffer"===e?i.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+n,o)))):i.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function c(t){var e=65536,i=n.getTypeOf(t),r=!0;if("uint8array"===i?r=u.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=u.applyCanBeUsed.nodebuffer),r)for(;1<e;)try{return u.stringifyByChunk(t,i,e)}catch(t){e=Math.floor(e/2)}return u.stringifyByChar(t)}function h(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.applyFromCharCode=c;var p={};p.string={string:s,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,o.allocBuffer(t.length))}},p.array={string:c,array:s,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},p.arraybuffer={string:function(t){return c(new Uint8Array(t))},array:function(t){return h(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:s,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},p.uint8array={string:c,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:s,nodebuffer:function(t){return o.newBufferFrom(t)}},p.nodebuffer={string:c,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:s},n.transformTo=function(t,e){if(e=e||"",!t)return e;n.checkSupport(t);var i=n.getTypeOf(e);return p[i][t](e)},n.resolve=function(t){for(var e=t.split("/"),n=[],i=0;i<e.length;i++){var r=e[i];"."===r||""===r&&0!==i&&i!==e.length-1||(".."===r?n.pop():n.push(r))}return n.join("/")},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":i.nodebuffer&&o.isBuffer(t)?"nodebuffer":i.uint8array&&t instanceof Uint8Array?"uint8array":i.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!i[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)i+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return i},n.delay=function(t,e,n){setImmediate((function(){t.apply(n||null,e||[])}))},n.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},n.prepareContent=function(t,e,o,s,u){return a.Promise.resolve(e).then((function(t){return i.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise((function(e,n){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){n(t.target.error)},i.readAsArrayBuffer(t)})):t})).then((function(e){var c=n.getTypeOf(e);return c?("arraybuffer"===c?e=n.transformTo("uint8array",e):"string"===c&&(u?e=r.decode(e):o&&!0!==s&&(e=function(t){return l(t,i.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,n){var i=t("./reader/readerFor"),r=t("./utils"),o=t("./signature"),a=t("./zipEntry"),s=t("./support");function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",n=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=e-n;if(0<i)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){var i=t("./reader/readerFor"),r=t("./utils"),o=t("./compressedObject"),a=t("./crc32"),s=t("./utf8"),l=t("./compressions"),u=t("./support");function c(t,e){this.options=t,this.loadOptions=e}c.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(Object.prototype.hasOwnProperty.call(l,e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,n,i,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<r;)e=t.readInt(2),n=t.readInt(2),i=t.readData(n),this.extraFields[e]={id:e,length:n,value:i};t.setIndex(r)},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=r.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var o=r.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)||a(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)||a(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},e.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){function i(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var r=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),a=t("./utf8"),s=t("./compressedObject"),l=t("./stream/GenericWorker");i.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(e=e.pipe(new a.Utf8EncodeWorker)),!o&&i&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new l("error")).error(t)}return new r(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof s&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)i.prototype[u[h]]=c;e.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(t){var n,i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,a=new r(c),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,n=function(){l.port2.postMessage(0)}}var u=[];function c(){var t,e;i=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}i=!1}e.exports=function(t){1!==u.push(t)||i||n()}}).call(this,void 0!==$c?$c:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){var i=t("immediate");function r(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==r&&d(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i((function(){var i;try{i=e(n)}catch(i){return o.reject(t,i)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)}))}function p(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var a=f((function(){e(r,i)}));"error"===a.status&&i(a.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=u).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(r);return this.state!==l?h(n,this.state===s?t:e,this.outcome):this.queue.push(new c(n,t,e)),n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=f(p,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)d(t,i);else{t.state=s,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},u.reject=function(t){var e=new this(r);return o.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,u=new this(r);++l<n;)c(t[l],l);return u;function c(t,r){e.resolve(t).then((function(t){a[r]=t,++s!==n||i||(i=!0,o.resolve(u,a))}),(function(t){i||(i=!0,o.reject(u,t))}))}},u.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var a,s=-1,l=new this(r);++s<n;)a=t[s],e.resolve(a).then((function(t){i||(i=!0,o.resolve(l,t))}),(function(t){i||(i=!0,o.reject(l,t))}));return l}},{immediate:36}],38:[function(t,e,n){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){var i=t("./zlib/deflate"),r=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/messages"),s=t("./zlib/zstream"),l=Object.prototype.toString,u=0,c=-1,h=0,p=8;function d(t){if(!(this instanceof d))return new d(t);this.options=r.assign({level:c,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==u)throw new Error(a[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var f;if(f="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=i.deflateSetDictionary(this.strm,f))!==u)throw new Error(a[n]);this._dict_set=!0}}function f(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}d.prototype.push=function(t,e){var n,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new r.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=i.deflate(s,a))&&n!==u)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(s.output,s.next_out))):this.onData(r.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==a||(this.onEnd(u),!(s.avail_out=0))},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=d,n.deflate=f,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,f(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){var i=t("./zlib/inflate"),r=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/constants"),s=t("./zlib/messages"),l=t("./zlib/zstream"),u=t("./zlib/gzheader"),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new u,i.inflateGetHeader(this.strm,this.header)}function p(t,e){var n=new h(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}h.prototype.push=function(t,e){var n,s,l,u,h,p,d=this.strm,f=this.options.chunkSize,_=this.options.dictionary,g=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?d.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new r.Buf8(f),d.next_out=0,d.avail_out=f),(n=i.inflate(d,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&_&&(p="string"==typeof _?o.string2buf(_):"[object ArrayBuffer]"===c.call(_)?new Uint8Array(_):_,n=i.inflateSetDictionary(this.strm,p)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&n!==a.Z_STREAM_END&&(0!==d.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(d.output,d.next_out),u=d.next_out-l,h=o.buf2string(d.output,l),d.next_out=u,d.avail_out=f-u,u&&r.arraySet(d.output,d.output,l,u,0),this.onData(h)):this.onData(r.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((0<d.avail_in||0===d.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(d.avail_out=0))},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=h,n.inflate=p,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},n.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,a;for(e=i=0,n=t.length;e<n;e++)i+=t[e].length;for(a=new Uint8Array(i),e=r=0,n=t.length;e<n;e++)o=t[e],a.set(o,r),r+=o.length;return a}},o={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],42:[function(t,e,n){var i=t("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new i.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,n.string2buf=function(t){var e,n,r,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(l),o=a=0;a<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[a++]=n:(n<2048?e[a++]=192|n>>>6:(n<65536?e[a++]=224|n>>>12:(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63),e[a++]=128|n>>>6&63),e[a++]=128|63&n);return e},n.buf2binstring=function(t){return l(t,t.length)},n.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,i,r,o,s=e||t.length,u=new Array(2*s);for(n=i=0;n<s;)if((r=t[n++])<128)u[i++]=r;else if(4<(o=a[r]))u[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&n<s;)r=r<<6|63&t[n++],o--;1<o?u[i++]=65533:r<65536?u[i++]=r:(r-=65536,u[i++]=55296|r>>10&1023,u[i++]=56320|1023&r)}return l(u,i)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){e.exports=function(t,e,n,i){for(var r=65535&t,o=t>>>16&65535,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(r=r+e[i++]|0)|0,--a;);r%=65521,o%=65521}return r|o<<16}},{}],44:[function(t,e,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,r){var o=i,a=r+n;t^=-1;for(var s=r;s<a;s++)t=t>>>8^o[255&(t^e[s])];return~t}},{}],46:[function(t,e,n){var i,r=t("../utils/common"),o=t("./trees"),a=t("./adler32"),s=t("./crc32"),l=t("./messages"),u=0,c=4,h=0,p=-2,d=-1,f=4,_=2,g=8,m=9,y=286,A=30,v=19,b=2*y+1,x=15,C=3,I=258,E=I+C+1,w=42,S=113,D=1,T=2,P=3,B=4;function O(t,e){return t.msg=l[e],e}function M(t){return(t<<1)-(4<t?9:0)}function L(t){for(var e=t.length;0<=--e;)t[e]=0}function R(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function N(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,R(t.strm)}function F(t,e){t.pending_buf[t.pending++]=e}function k(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function U(t,e){var n,i,r=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-E?t.strstart-(t.w_size-E):0,u=t.window,c=t.w_mask,h=t.prev,p=t.strstart+I,d=u[o+a-1],f=u[o+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(u[(n=e)+a]===f&&u[n+a-1]===d&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<p);if(i=I-(p-o),o=p-I,a<i){if(t.match_start=e,s<=(a=i))break;d=u[o+a-1],f=u[o+a]}}}while((e=h[e&c])>l&&0!=--r);return a<=t.lookahead?a:t.lookahead}function V(t){var e,n,i,o,l,u,c,h,p,d,f=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-E)){for(r.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=n=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--n;);for(e=n=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--n;);o+=f}if(0===t.strm.avail_in)break;if(u=t.strm,c=t.window,h=t.strstart+t.lookahead,d=void 0,(p=o)<(d=u.avail_in)&&(d=p),n=0===d?0:(u.avail_in-=d,r.arraySet(c,u.input,u.next_in,d,h),1===u.state.wrap?u.adler=a(u.adler,c,d,h):2===u.state.wrap&&(u.adler=s(u.adler,c,d,h)),u.next_in+=d,u.total_in+=d,d),t.lookahead+=n,t.lookahead+t.insert>=C)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+C-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<C)););}while(t.lookahead<E&&0!==t.strm.avail_in)}function j(t,e){for(var n,i;;){if(t.lookahead<E){if(V(t),t.lookahead<E&&e===u)return D;if(0===t.lookahead)break}if(n=0,t.lookahead>=C&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-E&&(t.match_length=U(t,n)),t.match_length>=C)if(i=o._tr_tally(t,t.strstart-t.match_start,t.match_length-C),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=C){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(N(t,!1),0===t.strm.avail_out))return D}return t.insert=t.strstart<C-1?t.strstart:C-1,e===c?(N(t,!0),0===t.strm.avail_out?P:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?D:T}function G(t,e){for(var n,i,r;;){if(t.lookahead<E){if(V(t),t.lookahead<E&&e===u)return D;if(0===t.lookahead)break}if(n=0,t.lookahead>=C&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=C-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-E&&(t.match_length=U(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===C&&4096<t.strstart-t.match_start)&&(t.match_length=C-1)),t.prev_length>=C&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-C,i=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-C),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=C-1,t.strstart++,i&&(N(t,!1),0===t.strm.avail_out))return D}else if(t.match_available){if((i=o._tr_tally(t,0,t.window[t.strstart-1]))&&N(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return D}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<C-1?t.strstart:C-1,e===c?(N(t,!0),0===t.strm.avail_out?P:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?D:T}function Q(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*b),this.dyn_dtree=new r.Buf16(2*(2*A+1)),this.bl_tree=new r.Buf16(2*(2*v+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(x+1),this.heap=new r.Buf16(2*y+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*y+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=_,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?w:S,t.adler=2===e.wrap?0:1,e.last_flush=u,o._tr_init(e),h):O(t,p)}function X(t){var e=H(t);return e===h&&function(t){t.window_size=2*t.w_size,L(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=C-1,t.match_available=0,t.ins_h=0}(t.state),e}function Y(t,e,n,i,o,a){if(!t)return p;var s=1;if(e===d&&(e=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),o<1||m<o||n!==g||i<8||15<i||e<0||9<e||a<0||f<a)return O(t,p);8===i&&(i=9);var l=new z;return(t.state=l).strm=t,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+C-1)/C),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,X(t)}i=[new Q(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(V(t),0===t.lookahead&&e===u)return D;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,N(t,!1),0===t.strm.avail_out))return D;if(t.strstart-t.block_start>=t.w_size-E&&(N(t,!1),0===t.strm.avail_out))return D}return t.insert=0,e===c?(N(t,!0),0===t.strm.avail_out?P:B):(t.strstart>t.block_start&&(N(t,!1),t.strm.avail_out),D)})),new Q(4,4,8,4,j),new Q(4,5,16,8,j),new Q(4,6,32,32,j),new Q(4,4,16,16,G),new Q(8,16,32,32,G),new Q(8,16,128,128,G),new Q(8,32,128,256,G),new Q(32,128,258,1024,G),new Q(32,258,258,4096,G)],n.deflateInit=function(t,e){return Y(t,e,g,15,8,0)},n.deflateInit2=Y,n.deflateReset=X,n.deflateResetKeep=H,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?p:(t.state.gzhead=e,h):p},n.deflate=function(t,e){var n,r,a,l;if(!t||!t.state||5<e||e<0)return t?O(t,p):p;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==c)return O(t,0===t.avail_out?-5:p);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===w)if(2===r.wrap)t.adler=0,F(r,31),F(r,139),F(r,8),r.gzhead?(F(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),F(r,255&r.gzhead.time),F(r,r.gzhead.time>>8&255),F(r,r.gzhead.time>>16&255),F(r,r.gzhead.time>>24&255),F(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),F(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(F(r,255&r.gzhead.extra.length),F(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=s(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(F(r,0),F(r,0),F(r,0),F(r,0),F(r,0),F(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),F(r,3),r.status=S);else{var d=g+(r.w_bits-8<<4)<<8;d|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(d|=32),d+=31-d%31,r.status=S,k(r,d),0!==r.strstart&&(k(r,t.adler>>>16),k(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),R(t),a=r.pending,r.pending!==r.pending_buf_size));)F(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),R(t),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,F(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),R(t),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,F(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&R(t),r.pending+2<=r.pending_buf_size&&(F(r,255&t.adler),F(r,t.adler>>8&255),t.adler=0,r.status=S)):r.status=S),0!==r.pending){if(R(t),0===t.avail_out)return r.last_flush=-1,h}else if(0===t.avail_in&&M(e)<=M(n)&&e!==c)return O(t,-5);if(666===r.status&&0!==t.avail_in)return O(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==u&&666!==r.status){var f=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(V(t),0===t.lookahead)){if(e===u)return D;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(N(t,!1),0===t.strm.avail_out))return D}return t.insert=0,e===c?(N(t,!0),0===t.strm.avail_out?P:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?D:T}(r,e):3===r.strategy?function(t,e){for(var n,i,r,a,s=t.window;;){if(t.lookahead<=I){if(V(t),t.lookahead<=I&&e===u)return D;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=C&&0<t.strstart&&(i=s[r=t.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){a=t.strstart+I;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a);t.match_length=I-(a-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=C?(n=o._tr_tally(t,1,t.match_length-C),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(N(t,!1),0===t.strm.avail_out))return D}return t.insert=0,e===c?(N(t,!0),0===t.strm.avail_out?P:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?D:T}(r,e):i[r.level].func(r,e);if(f!==P&&f!==B||(r.status=666),f===D||f===P)return 0===t.avail_out&&(r.last_flush=-1),h;if(f===T&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(L(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),R(t),0===t.avail_out))return r.last_flush=-1,h}return e!==c?h:r.wrap<=0?1:(2===r.wrap?(F(r,255&t.adler),F(r,t.adler>>8&255),F(r,t.adler>>16&255),F(r,t.adler>>24&255),F(r,255&t.total_in),F(r,t.total_in>>8&255),F(r,t.total_in>>16&255),F(r,t.total_in>>24&255)):(k(r,t.adler>>>16),k(r,65535&t.adler)),R(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?h:1)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==w&&69!==e&&73!==e&&91!==e&&103!==e&&e!==S&&666!==e?O(t,p):(t.state=null,e===S?O(t,-3):h):p},n.deflateSetDictionary=function(t,e){var n,i,o,s,l,u,c,d,f=e.length;if(!t||!t.state)return p;if(2===(s=(n=t.state).wrap)||1===s&&n.status!==w||n.lookahead)return p;for(1===s&&(t.adler=a(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(L(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new r.Buf8(n.w_size),r.arraySet(d,e,f-n.w_size,n.w_size,0),e=d,f=n.w_size),l=t.avail_in,u=t.next_in,c=t.input,t.avail_in=f,t.next_in=0,t.input=e,V(n);n.lookahead>=C;){for(i=n.strstart,o=n.lookahead-(C-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+C-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--o;);n.strstart=i,n.lookahead=C-1,V(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=C-1,n.match_available=0,t.next_in=u,t.input=c,t.avail_in=l,n.wrap=s,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){e.exports=function(t,e){var n,i,r,o,a,s,l,u,c,h,p,d,f,_,g,m,y,A,v,b,x,C,I,E,w;n=t.state,i=t.next_in,E=t.input,r=i+(t.avail_in-5),o=t.next_out,w=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,h=n.wnext,p=n.window,d=n.hold,f=n.bits,_=n.lencode,g=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{f<15&&(d+=E[i++]<<f,f+=8,d+=E[i++]<<f,f+=8),A=_[d&m];e:for(;;){if(d>>>=v=A>>>24,f-=v,0==(v=A>>>16&255))w[o++]=65535&A;else{if(!(16&v)){if(!(64&v)){A=_[(65535&A)+(d&(1<<v)-1)];continue e}if(32&v){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}b=65535&A,(v&=15)&&(f<v&&(d+=E[i++]<<f,f+=8),b+=d&(1<<v)-1,d>>>=v,f-=v),f<15&&(d+=E[i++]<<f,f+=8,d+=E[i++]<<f,f+=8),A=g[d&y];n:for(;;){if(d>>>=v=A>>>24,f-=v,!(16&(v=A>>>16&255))){if(!(64&v)){A=g[(65535&A)+(d&(1<<v)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&A,f<(v&=15)&&(d+=E[i++]<<f,(f+=8)<v&&(d+=E[i++]<<f,f+=8)),l<(x+=d&(1<<v)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=v,f-=v,(v=o-a)<x){if(c<(v=x-v)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(I=p,(C=0)===h){if(C+=u-v,v<b){for(b-=v;w[o++]=p[C++],--v;);C=o-x,I=w}}else if(h<v){if(C+=u+h-v,(v-=h)<b){for(b-=v;w[o++]=p[C++],--v;);if(C=0,h<b){for(b-=v=h;w[o++]=p[C++],--v;);C=o-x,I=w}}}else if(C+=h-v,v<b){for(b-=v;w[o++]=p[C++],--v;);C=o-x,I=w}for(;2<b;)w[o++]=I[C++],w[o++]=I[C++],w[o++]=I[C++],b-=3;b&&(w[o++]=I[C++],1<b&&(w[o++]=I[C++]))}else{for(C=o-x;w[o++]=w[C++],w[o++]=w[C++],w[o++]=w[C++],2<(b-=3););b&&(w[o++]=w[C++],1<b&&(w[o++]=w[C++]))}break}}break}}while(i<r&&o<s);i-=b=f>>3,d&=(1<<(f-=b<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=f}},{}],49:[function(t,e,n){var i=t("../utils/common"),r=t("./adler32"),o=t("./crc32"),a=t("./inffast"),s=t("./inftrees"),l=1,u=2,c=0,h=-2,p=1,d=852,f=592;function _(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=p,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(d),e.distcode=e.distdyn=new i.Buf32(f),e.sane=1,e.back=-1,c):h}function y(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,m(t)):h}function A(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?h:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,y(t))):h}function v(t,e){var n,i;return t?(i=new g,(t.state=i).window=null,(n=A(t,e))!==c&&(t.state=null),n):h}var b,x,C=!0;function I(t){if(C){var e;for(b=new i.Buf32(512),x=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(l,t.lens,0,288,b,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(u,t.lens,0,32,x,0,t.work,{bits:5}),C=!1}t.lencode=b,t.lenbits=9,t.distcode=x,t.distbits=5}function E(t,e,n,r){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),r>=a.wsize?(i.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(r<(o=a.wsize-a.wnext)&&(o=r),i.arraySet(a.window,e,n-r,o,a.wnext),(r-=o)?(i.arraySet(a.window,e,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=y,n.inflateReset2=A,n.inflateResetKeep=m,n.inflateInit=function(t){return v(t,15)},n.inflateInit2=v,n.inflate=function(t,e){var n,d,f,g,m,y,A,v,b,x,C,w,S,D,T,P,B,O,M,L,R,N,F,k,U=0,V=new i.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return h;12===(n=t.state).mode&&(n.mode=13),m=t.next_out,f=t.output,A=t.avail_out,g=t.next_in,d=t.input,y=t.avail_in,v=n.hold,b=n.bits,x=y,C=A,N=c;t:for(;;)switch(n.mode){case p:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}if(2&n.wrap&&35615===v){V[n.check=0]=255&v,V[1]=v>>>8&255,n.check=o(n.check,V,2,0),b=v=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&v)){t.msg="unknown compression method",n.mode=30;break}if(b-=4,R=8+(15&(v>>>=4)),0===n.wbits)n.wbits=R;else if(R>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<R,t.adler=n.check=1,n.mode=512&v?10:12,b=v=0;break;case 2:for(;b<16;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}if(n.flags=v,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(V[0]=255&v,V[1]=v>>>8&255,n.check=o(n.check,V,2,0)),b=v=0,n.mode=3;case 3:for(;b<32;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}n.head&&(n.head.time=v),512&n.flags&&(V[0]=255&v,V[1]=v>>>8&255,V[2]=v>>>16&255,V[3]=v>>>24&255,n.check=o(n.check,V,4,0)),b=v=0,n.mode=4;case 4:for(;b<16;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(V[0]=255&v,V[1]=v>>>8&255,n.check=o(n.check,V,2,0)),b=v=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(V[0]=255&v,V[1]=v>>>8&255,n.check=o(n.check,V,2,0)),b=v=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(w=n.length)&&(w=y),w&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,d,g,w,R)),512&n.flags&&(n.check=o(n.check,d,w,g)),y-=w,g+=w,n.length-=w),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break t;for(w=0;R=d[g+w++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R)),R&&w<y;);if(512&n.flags&&(n.check=o(n.check,d,w,g)),y-=w,g+=w,R)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break t;for(w=0;R=d[g+w++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R)),R&&w<y;);if(512&n.flags&&(n.check=o(n.check,d,w,g)),y-=w,g+=w,R)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}if(v!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}b=v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}t.adler=n.check=_(v),b=v=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=m,t.avail_out=A,t.next_in=g,t.avail_in=y,n.hold=v,n.bits=b,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){v>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}switch(n.last=1&v,b-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(I(n),n.mode=20,6!==e)break;v>>>=2,b-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}v>>>=2,b-=2;break;case 14:for(v>>>=7&b,b-=7&b;b<32;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,b=v=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(w=n.length){if(y<w&&(w=y),A<w&&(w=A),0===w)break t;i.arraySet(f,d,g,w,m),y-=w,g+=w,A-=w,m+=w,n.length-=w;break}n.mode=12;break;case 17:for(;b<14;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}if(n.nlen=257+(31&v),v>>>=5,b-=5,n.ndist=1+(31&v),v>>>=5,b-=5,n.ncode=4+(15&v),v>>>=4,b-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}n.lens[j[n.have++]]=7&v,v>>>=3,b-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},N=s(0,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,N){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;P=(U=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,B=65535&U,!((T=U>>>24)<=b);){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}if(B<16)v>>>=T,b-=T,n.lens[n.have++]=B;else{if(16===B){for(k=T+2;b<k;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}if(v>>>=T,b-=T,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}R=n.lens[n.have-1],w=3+(3&v),v>>>=2,b-=2}else if(17===B){for(k=T+3;b<k;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}b-=T,R=0,w=3+(7&(v>>>=T)),v>>>=3,b-=3}else{for(k=T+7;b<k;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}b-=T,R=0,w=11+(127&(v>>>=T)),v>>>=7,b-=7}if(n.have+w>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=R}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,F={bits:n.lenbits},N=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,N){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},N=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,N){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=y&&258<=A){t.next_out=m,t.avail_out=A,t.next_in=g,t.avail_in=y,n.hold=v,n.bits=b,a(t,C),m=t.next_out,f=t.output,A=t.avail_out,g=t.next_in,d=t.input,y=t.avail_in,v=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;P=(U=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,B=65535&U,!((T=U>>>24)<=b);){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}if(P&&!(240&P)){for(O=T,M=P,L=B;P=(U=n.lencode[L+((v&(1<<O+M)-1)>>O)])>>>16&255,B=65535&U,!(O+(T=U>>>24)<=b);){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}v>>>=O,b-=O,n.back+=O}if(v>>>=T,b-=T,n.back+=T,n.length=B,0===P){n.mode=26;break}if(32&P){n.back=-1,n.mode=12;break}if(64&P){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&P,n.mode=22;case 22:if(n.extra){for(k=n.extra;b<k;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;P=(U=n.distcode[v&(1<<n.distbits)-1])>>>16&255,B=65535&U,!((T=U>>>24)<=b);){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}if(!(240&P)){for(O=T,M=P,L=B;P=(U=n.distcode[L+((v&(1<<O+M)-1)>>O)])>>>16&255,B=65535&U,!(O+(T=U>>>24)<=b);){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}v>>>=O,b-=O,n.back+=O}if(v>>>=T,b-=T,n.back+=T,64&P){t.msg="invalid distance code",n.mode=30;break}n.offset=B,n.extra=15&P,n.mode=24;case 24:if(n.extra){for(k=n.extra;b<k;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===A)break t;if(w=C-A,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}S=w>n.wnext?(w-=n.wnext,n.wsize-w):n.wnext-w,w>n.length&&(w=n.length),D=n.window}else D=f,S=m-n.offset,w=n.length;for(A<w&&(w=A),A-=w,n.length-=w;f[m++]=D[S++],--w;);0===n.length&&(n.mode=21);break;case 26:if(0===A)break t;f[m++]=n.length,A--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===y)break t;y--,v|=d[g++]<<b,b+=8}if(C-=A,t.total_out+=C,n.total+=C,C&&(t.adler=n.check=n.flags?o(n.check,f,C,m-C):r(n.check,f,C,m-C)),C=A,(n.flags?v:_(v))!==n.check){t.msg="incorrect data check",n.mode=30;break}b=v=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===y)break t;y--,v+=d[g++]<<b,b+=8}if(v!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}b=v=0}n.mode=29;case 29:N=1;break t;case 30:N=-3;break t;case 31:return-4;default:return h}return t.next_out=m,t.avail_out=A,t.next_in=g,t.avail_in=y,n.hold=v,n.bits=b,(n.wsize||C!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&E(t,t.output,t.next_out,C-t.avail_out)?(n.mode=31,-4):(x-=t.avail_in,C-=t.avail_out,t.total_in+=x,t.total_out+=C,n.total+=C,n.wrap&&C&&(t.adler=n.check=n.flags?o(n.check,f,C,t.next_out-C):r(n.check,f,C,t.next_out-C)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==x&&0===C||4===e)&&N===c&&(N=-5),N)},n.inflateEnd=function(t){if(!t||!t.state)return h;var e=t.state;return e.window&&(e.window=null),t.state=null,c},n.inflateGetHeader=function(t,e){var n;return t&&t.state&&2&(n=t.state).wrap?((n.head=e).done=!1,c):h},n.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?h:11===n.mode&&r(1,e,i,0)!==n.check?-3:E(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,c):h},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){var i=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,l,u,c,h,p){var d,f,_,g,m,y,A,v,b,x=p.bits,C=0,I=0,E=0,w=0,S=0,D=0,T=0,P=0,B=0,O=0,M=null,L=0,R=new i.Buf16(16),N=new i.Buf16(16),F=null,k=0;for(C=0;C<=15;C++)R[C]=0;for(I=0;I<l;I++)R[e[n+I]]++;for(S=x,w=15;1<=w&&0===R[w];w--);if(w<S&&(S=w),0===w)return u[c++]=20971520,u[c++]=20971520,p.bits=1,0;for(E=1;E<w&&0===R[E];E++);for(S<E&&(S=E),C=P=1;C<=15;C++)if(P<<=1,(P-=R[C])<0)return-1;if(0<P&&(0===t||1!==w))return-1;for(N[1]=0,C=1;C<15;C++)N[C+1]=N[C]+R[C];for(I=0;I<l;I++)0!==e[n+I]&&(h[N[e[n+I]]++]=I);if(y=0===t?(M=F=h,19):1===t?(M=r,L-=257,F=o,k-=257,256):(M=a,F=s,-1),C=E,m=c,T=I=O=0,_=-1,g=(B=1<<(D=S))-1,1===t&&852<B||2===t&&592<B)return 1;for(;;){for(A=C-T,b=h[I]<y?(v=0,h[I]):h[I]>y?(v=F[k+h[I]],M[L+h[I]]):(v=96,0),d=1<<C-T,E=f=1<<D;u[m+(O>>T)+(f-=d)]=A<<24|v<<16|b,0!==f;);for(d=1<<C-1;O&d;)d>>=1;if(0!==d?(O&=d-1,O+=d):O=0,I++,0==--R[C]){if(C===w)break;C=e[n+h[I]]}if(S<C&&(O&g)!==_){for(0===T&&(T=S),m+=E,P=1<<(D=C-T);D+T<w&&!((P-=R[D+T])<=0);)D++,P<<=1;if(B+=1<<D,1===t&&852<B||2===t&&592<B)return 1;u[_=O&g]=S<<24|D<<16|m-c}}return 0!==O&&(u[m+O]=C-T<<24|64<<16),p.bits=S,0}},{"../utils/common":41}],51:[function(t,e,n){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){var i=t("../utils/common"),r=0,o=1;function a(t){for(var e=t.length;0<=--e;)t[e]=0}var s=0,l=29,u=256,c=u+1+l,h=30,p=19,d=2*c+1,f=15,_=16,g=7,m=256,y=16,A=17,v=18,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(c+2));a(E);var w=new Array(2*h);a(w);var S=new Array(512);a(S);var D=new Array(256);a(D);var T=new Array(l);a(T);var P,B,O,M=new Array(h);function L(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function R(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function N(t){return t<256?S[t]:S[256+(t>>>7)]}function F(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function k(t,e,n){t.bi_valid>_-n?(t.bi_buf|=e<<t.bi_valid&65535,F(t,t.bi_buf),t.bi_buf=e>>_-t.bi_valid,t.bi_valid+=n-_):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function U(t,e,n){k(t,n[2*e],n[2*e+1])}function V(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function j(t,e,n){var i,r,o=new Array(f+1),a=0;for(i=1;i<=f;i++)o[i]=a=a+n[i-1]<<1;for(r=0;r<=e;r++){var s=t[2*r+1];0!==s&&(t[2*r]=V(o[s]++,s))}}function G(t){var e;for(e=0;e<c;e++)t.dyn_ltree[2*e]=0;for(e=0;e<h;e++)t.dyn_dtree[2*e]=0;for(e=0;e<p;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Q(t){8<t.bi_valid?F(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function z(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function H(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&z(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!z(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function X(t,e,n){var i,r,o,a,s=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],r=t.pending_buf[t.l_buf+s],s++,0===i?U(t,r,e):(U(t,(o=D[r])+u+1,e),0!==(a=b[o])&&k(t,r-=T[o],a),U(t,o=N(--i),n),0!==(a=x[o])&&k(t,i-=M[o],a)),s<t.last_lit;);U(t,m,e)}function Y(t,e){var n,i,r,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=d,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[r]=0,t.opt_len--,s&&(t.static_len-=a[2*r+1]);for(e.max_code=u,n=t.heap_len>>1;1<=n;n--)H(t,o,n);for(r=l;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,H(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,a,s,l=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,_=e.stat_desc.extra_base,g=e.stat_desc.max_length,m=0;for(o=0;o<=f;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<d;n++)g<(o=l[2*l[2*(i=t.heap[n])+1]+1]+1)&&(o=g,m++),l[2*i+1]=o,u<i||(t.bl_count[o]++,a=0,_<=i&&(a=p[i-_]),s=l[2*i],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(c[2*i+1]+a)));if(0!==m){do{for(o=g-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[g]--,m-=2}while(0<m);for(o=g;0!==o;o--)for(i=t.bl_count[o];0!==i;)u<(r=t.heap[--n])||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(t,e),j(o,u,t.bl_count)}function q(t,e,n){var i,r,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=e[2*(i+1)+1],++s<l&&r===a||(s<u?t.bl_tree[2*r]+=s:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*y]++):s<=10?t.bl_tree[2*A]++:t.bl_tree[2*v]++,o=r,u=(s=0)===a?(l=138,3):r===a?(l=6,3):(l=7,4))}function K(t,e,n){var i,r,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),i=0;i<=n;i++)if(r=a,a=e[2*(i+1)+1],!(++s<l&&r===a)){if(s<u)for(;U(t,r,t.bl_tree),0!=--s;);else 0!==r?(r!==o&&(U(t,r,t.bl_tree),s--),U(t,y,t.bl_tree),k(t,s-3,2)):s<=10?(U(t,A,t.bl_tree),k(t,s-3,3)):(U(t,v,t.bl_tree),k(t,s-11,7));o=r,u=(s=0)===a?(l=138,3):r===a?(l=6,3):(l=7,4)}}a(M);var W=!1;function J(t,e,n,r){k(t,(s<<1)+(r?1:0),3),function(t,e,n,r){Q(t),r&&(F(t,n),F(t,~n)),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}n._tr_init=function(t){W||(function(){var t,e,n,i,r,o=new Array(f+1);for(i=n=0;i<l-1;i++)for(T[i]=n,t=0;t<1<<b[i];t++)D[n++]=i;for(D[n-1]=i,i=r=0;i<16;i++)for(M[i]=r,t=0;t<1<<x[i];t++)S[r++]=i;for(r>>=7;i<h;i++)for(M[i]=r<<7,t=0;t<1<<x[i]-7;t++)S[256+r++]=i;for(e=0;e<=f;e++)o[e]=0;for(t=0;t<=143;)E[2*t+1]=8,t++,o[8]++;for(;t<=255;)E[2*t+1]=9,t++,o[9]++;for(;t<=279;)E[2*t+1]=7,t++,o[7]++;for(;t<=287;)E[2*t+1]=8,t++,o[8]++;for(j(E,c+1,o),t=0;t<h;t++)w[2*t+1]=5,w[2*t]=V(t,5);P=new L(E,b,u+1,c,f),B=new L(w,x,0,h,f),O=new L(new Array(0),C,0,p,g)}(),W=!0),t.l_desc=new R(t.dyn_ltree,P),t.d_desc=new R(t.dyn_dtree,B),t.bl_desc=new R(t.bl_tree,O),t.bi_buf=0,t.bi_valid=0,G(t)},n._tr_stored_block=J,n._tr_flush_block=function(t,e,n,i){var a,s,l=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return r;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return o;for(e=32;e<u;e++)if(0!==t.dyn_ltree[2*e])return o;return r}(t)),Y(t,t.l_desc),Y(t,t.d_desc),l=function(t){var e;for(q(t,t.dyn_ltree,t.l_desc.max_code),q(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=p-1;3<=e&&0===t.bl_tree[2*I[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),a=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==e?J(t,e,n,i):4===t.strategy||s===a?(k(t,2+(i?1:0),3),X(t,E,w)):(k(t,4+(i?1:0),3),function(t,e,n,i){var r;for(k(t,e-257,5),k(t,n-1,5),k(t,i-4,4),r=0;r<i;r++)k(t,t.bl_tree[2*I[r]+1],3);K(t,t.dyn_ltree,e-1),K(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,l+1),X(t,t.dyn_ltree,t.dyn_dtree)),G(t),i&&Q(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(D[n]+u+1)]++,t.dyn_dtree[2*N(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){k(t,2,3),U(t,m,E),function(t){16===t.bi_valid?(F(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,n){(function(t){!function(t,e){if(!t.setImmediate){var n,i,r,o,a=1,s={},l=!1,u=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,n="[object process]"==={}.toString.call(t.process)?function(t){process.nextTick((function(){p(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(o="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",d,!1):t.attachEvent("onmessage",d),function(e){t.postMessage(o+e,"*")}):t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){p(t.data)},function(t){r.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(i=u.documentElement,function(t){var e=u.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):function(t){setTimeout(p,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return s[a]=r,n(a),a++},c.clearImmediate=h}function h(t){delete s[t]}function p(t){if(l)setTimeout(p,0,t);else{var n=s[t];if(n){l=!0;try{!function(t){var n=t.callback,i=t.args;switch(i.length){case 0:n();break;case 1:n(i[0]);break;case 2:n(i[0],i[1]);break;case 3:n(i[0],i[1],i[2]);break;default:n.apply(e,i)}}(n)}finally{h(t),l=!1}}}}function d(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&p(+e.data.slice(o.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==$c?$c:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)})),zV={MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_RENDERBUFFER_SIZE:34024,MAX_ELEMENTS_INDICES:33001,MAX_DRAW_BUFFERS:34852,MAX_COLOR_ATTACHMENTS:36063},HV={log:console.log,warn:console.warn,debug:console.debug,error:console.error,info:console.info},XV=function(){function t(){this.logs=[],this.glInfo={},this.lastCrash=null,this.roodtEl=null,this._attachReporters(),this._attachUI(),this._webGlInfo(),window.REPORTER=this}return t.init=function(){t.instance=new t},t.bind=function(e){t.instance&&t.instance.bind(e)},t.prototype.bind=function(t){this.player=t},t.prototype._attachUI=function(){var t=this,e=this.roodtEl=document.createElement("div");e.setAttribute("id","report__root"),e.innerHTML="\n<div id='report__snap' class = 'report__btn'>\n\t<span>SNAP</span>\n</div>\n<div id='report__poppup'>\n\t<h1>Report!</h1>\n\t<textarea readonly = \"true\" id=\"report__text\" rows='10'>error</textarea>\n\t<div id = 'report__save' class = 'report__btn'>\n\t\tSAVE REPORT\n\t</div>\n</div>\n\n",document.body.appendChild(e);var n=document.createElement("style");n.innerHTML="\n\t#report__root {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tposition: absolute;\n\t\tz-index: 1000;\n\t\tuser-select: none;\n\t\tpointer-events: none;\n\t}\n\t.report__btn {\n\t\tpadding: 4px;\n\t\theight: 1.5em;\n\t\tbackground: #222;\n\t\tcolor: #eee;\n\t\ttext-align: center;\n\t\tfont-size: 1.5em;\n\t\tline-height: 1.5em;\n\t\tborder-radius: 1.5em;\n\t\tpointer-events: all;\n\t\tbox-shadow: 1px 3px 5px 2px black;\n\t\ttransition: background-color 0.5s;\n\t}\n\t.report__btn:hover {\n\t\tcursor: pointer;\n\t\tbackground: #444;\n\t}\n\n\t#report__snap:hover {\n\t\tright: -15px;\n\t\tcolor: #ffc;\n\t}\n\n\t#report__snap {\n\t\tposition: absolute;\n\t\ttop: 0.5em;\n\t\tright: -30px;\n\t\twidth: 100px;\n\t\tpadding: 4px 16px 4px 4px;\n\t\ttransition: right 0.5s;\n\t\tdisplay: none;\n\t}\n\n\t#report__poppup {\n\t\tposition: absolute;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\twidth: max(60%, 300px);\n\t\tmin-height: 40%;\n\t\tmax-height: 80%;\n\t\theight: auto;\n\t\tdisplay: none;\n\t\tflex-direction: column;\n\t\tbackground: #fcc;\n\t\tbox-shadow: 1px 3px 5px 2px black;\n\t\tborder-radius: 4px;\n\t\tjustify-content: space-around;\n\t\talign-items: center;\n\t\tcolor: #222;\n\t\tpadding: 10px;\n\t}\n\n\t#report__poppup.show{\n\t\tdisplay: flex;\n\t}\n\n\t#report__text {\n\t\twidth: 100%;\n\t\tmin-height: 30%;\n\t\theight: auto;\n\t\tbackground: rgba(255,255,255, 0.5);\n\t\tpointer-events: all;\n\t}\n",document.head.appendChild(n),e.querySelector("#report__snap").addEventListener("click",(function(){return t._requsetSnap()}))},t.prototype._requsetSnap=function(){var t=this;console.log("[AVMCrashReporter] Generate report...");var e=this.roodtEl.querySelector("#report__poppup"),n=e.querySelector("#report__text"),i=e.querySelector("#report__save");if(!e)return null;n.textContent=this.logs.join("\n"),e.classList.toggle("show",!0),i.addEventListener("click",(function(){e.classList.toggle("show",!1);var n=t.generateReport(),i="report_".concat(t.player.config.title,"_").concat((new Date).toISOString());t._saveFile(n,i)}),{once:!0})},t.prototype._saveFile=function(t,e){var n=this;if(QV){var i=t.snap;i&&(t.snap=e+".png");var r=new QV;r.file("".concat(e,".json"),JSON.stringify(t,null,2)),i&&r.file(t.snap,i.toDataURL().replace("data:image/png;base64,",""),{base64:!0}),r.generateAsync({type:"blob"}).then((function(t){n._trigLoad(t,e+".zip")}))}else t.snap=null,this._trigLoad(new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),e+".jzon")},t.prototype._trigLoad=function(t,e){var n=URL.createObjectURL(t),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download",e);var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(r)},t.prototype._attachReporters=function(){window.addEventListener("error",this._catchUnhandled.bind(this));var e=this;if(t.collectLogs){var n=function(t){console[t]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];e._trackLogs.apply(e,function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}([t],n,!1)),HV[t].apply(console,n)}};for(var i in HV)n(i)}},t.prototype._trackLogs=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];0===(e=e.filter((function(t){return!!Object.getPrototypeOf(t)}))).length&&Math.pow(e[0].mode,e[0].stack)&&(e[0]=JSON.stringify(e[0])),this.logs.push("["+t.toUpperCase()+"]: "+e.join(" "))},t.prototype._catchUnhandled=function(t){t.filename.indexOf("http://jit/")<0||(this._trackLogs("exception",t.message,t.filename,t.lineno,t.error.stack),this.lastCrash={error:t.error,line:t.lineno,message:t.message,filename:t.filename,source:null},this._requsetSnap())},t.prototype.generateReport=function(){return{date:new Date,game:this._gameInfo(),device:this._deviceInfo(),context:this.glInfo,config:this.player.config,logs:this.logs,crash:this.lastCrash,snap:null}},t.prototype._gameInfo=function(){var t,e,n=this.player,i=n._avmHandler.avmVersion,r=n._swfFile,o=r.swfVersion,a=r.fpVersion,s=r.frameCount,l=r.frameRate,u=r.compression,c=r.bytesTotal,h=null===(t=n._gameConfig.binary.filter((function(t){return"GAME"===t.resourceType}))[0])||void 0===t?void 0:t.path;return h&&h.indexOf("?")>-1&&(h=h.substring(0,h.indexOf("?"))),{file:{name:null===(e=n._gameConfig)||void 0===e?void 0:e.title,path:h,size:c},runtime:{swfVersion:o,fpVersion:a,frameCount:s,frameRate:l,compression:u,avm:i}}},t.prototype._webGlInfo=function(){var t=document.createElement("canvas"),e=2,n=t.getContext("webgl2");n||(n=t.getContext("webgl"),e=1);var i=Object.create(null);for(var r in zV)i[r]=n.getParameter(zV[r]);var o=n.getExtension("WEBGL_debug_renderer_info");this.glInfo={version:e,params:i,vendor:n.getParameter(o.UNMASKED_VENDOR_WEBGL),renderer:n.getParameter(o.UNMASKED_RENDERER_WEBGL)}},t.prototype._deviceInfo=function(){var t=Object.create(null);if(self._AWAY_DEBUG_STORAGE)try{t=self._AWAY_DEBUG_STORAGE.decodedData()}catch(t){}else try{for(var e=localStorage.length,n=0;n<e;n++){var i=localStorage.key(n);t[i]=localStorage.getItem(i)}}catch(t){}return{agent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight,dpi:window.devicePixelRatio},store:t,memory:performance.memory}},t.collectLogs=!0,t.instance=null,t}();vf.push({test:/x.mochiads.com/,supressErrors:!0},{test:/AGI.swf/,resolve:"./assets/ads/AGI.swf"},{test:"http://cdn.nitrome.com/components/NitromeAPI.pkg",resolve:"./assets/NitromeAPI.pkg"},{test:/http:/,resolve:function(t){return t.replace("http://","https://")}}),XV.init();var YV=function(t){function e(e){var n=t.call(this,e)||this;if(XV.bind(n),!e.files||!e.files.length)throw"AVMPlayerPoki: gameConfig.files must have positive length";return window.AVMPlayerPoki=n,n._gameConfig.showFPS&&(n.showFrameRate=!0),n._gameConfig.redirects&&vf.push.apply(vf,n._gameConfig.redirects),n._gameConfig.externalLib&&(EL.lib=e.externalLib),!1===n._gameConfig.multisample&&(qi.PREF_MULTISAMPLE=!1),n._gameConfig.useWebGL1&&(qi.PREF_VERSION=1),n.addEventListener(Q.LOADER_COMPLETE,(function(t){if(!n._gameConfig.start)return window.pokiGameParseComplete&&window.pokiGameParseComplete(),void n.play(e.skipFramesOfScene);window.pokiGameParseComplete&&window.pokiGameParseComplete((function(){return n.play(e.skipFramesOfScene)}))})),e.preventLoad||n.load(),n}return o(e,t),e.prototype.onAVMAvailable=function(e){e.avmVersion==Oh.AVM2?new hb(this._gameConfig.pokiSDK):e.avmVersion==Oh.AVM1&&(cb.usePokiSDK=this._gameConfig.pokiSDK,Ng.registerCustomClass("PokiSDK2",cb.createAVM1Class(this._avmHandler.factory.avm1Context)),this._gameConfig.retryButtonIDS&&(this._gameConfig.retryButtonIDS=this._gameConfig.retryButtonIDS.reduce((function(t,e){return t[e]=!0,t}),{})),(this._gameConfig.buttonPokiSDKActions||this._gameConfig.retryButtonIDS||this._gameConfig.retryButtonAction)&&(Ng.instance.Button=jV.createAVM1Class(Ng.instance.context),this._gameConfig.buttonPokiSDKActions&&(jV.buttonPokiSDKActions=this._gameConfig.buttonPokiSDKActions),this._gameConfig.retryButtonIDS&&(jV.retryButtonIDS=this._gameConfig.retryButtonIDS),this._gameConfig.retryButtonAction&&(jV.retryButtonAction=this._gameConfig.retryButtonAction)),(this._gameConfig.actionOnStop||this._gameConfig.retryButtonIDS||this._gameConfig.actionWhenRetryButtonEncountered)&&(Ng.instance.MovieClip=GV.createAVM1Class(Ng.instance.context),this._gameConfig.actionOnStop&&(GV.pokiSDKonStopAction=this._gameConfig.actionOnStop),this._gameConfig.retryButtonIDS&&(GV.retryButtonIDS=this._gameConfig.retryButtonIDS),this._gameConfig.actionWhenRetryButtonEncountered&&(GV.actionWhenRetryButtonEncountered=this._gameConfig.actionWhenRetryButtonEncountered))),t.prototype.onAVMAvailable.call(this,e)},e}(VV),qV=function(){return function(){this.__fast__=!0}}(),KV=function(){function t(){}return t.b2MixFriction=function(t,e){return Math.sqrt(t*e)},t.b2MixRestitution=function(t,e){return t>e?t:e},t.b2Assert=function(t){if(!t)throw"Assertion Failed"},t.VERSION="2.1alpha",t.USHRT_MAX=65535,t.b2_pi=Math.PI,t.b2_maxManifoldPoints=2,t.b2_aabbExtension=.1,t.b2_aabbMultiplier=2,t.b2_linearSlop=.005,t.b2_polygonRadius=2*t.b2_linearSlop,t.b2_angularSlop=2/180*t.b2_pi,t.b2_toiSlop=8*t.b2_linearSlop,t.b2_maxTOIContactsPerIsland=32,t.b2_maxTOIJointsPerIsland=32,t.b2_velocityThreshold=1,t.b2_maxLinearCorrection=.2,t.b2_maxAngularCorrection=8/180*t.b2_pi,t.b2_maxTranslation=2,t.b2_maxTranslationSquared=t.b2_maxTranslation*t.b2_maxTranslation,t.b2_maxRotation=.5*t.b2_pi,t.b2_maxRotationSquared=t.b2_maxRotation*t.b2_maxRotation,t.b2_contactBaumgarte=.2,t.b2_timeToSleep=.5,t.b2_linearSleepTolerance=.01,t.b2_angularSleepTolerance=2/180*t.b2_pi,t}(),WV=function(){function t(){this.__fast__=!0}return t.prototype.Set=function(t){switch(t.GetType()){case uj.e_circleShape:var e=t;this.m_vertices=new Array(1),this.m_vertices[0]=e.m_p,this.m_count=1,this.m_radius=e.m_radius;break;case uj.e_polygonShape:var n=t;this.m_vertices=n.m_vertices,this.m_count=n.m_vertexCount,this.m_radius=n.m_radius;break;default:KV.b2Assert(!1)}},t.prototype.GetSupport=function(t){for(var e=0,n=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,i=1;i<this.m_count;++i){var r=this.m_vertices[i].x*t.x+this.m_vertices[i].y*t.y;r>n&&(e=i,n=r)}return e},t.prototype.GetSupportVertex=function(t){for(var e=0,n=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,i=1;i<this.m_count;++i){var r=this.m_vertices[i].x*t.x+this.m_vertices[i].y*t.y;r>n&&(e=i,n=r)}return this.m_vertices[e]},t.prototype.GetVertexCount=function(){return this.m_count},t.prototype.GetVertex=function(t){return KV.b2Assert(0<=t&&t<this.m_count),this.m_vertices[t]},t}(),JV=function(){return function(){this.__fast__=!0,this.indexA=new Array(3),this.indexB=new Array(3)}}(),ZV=function(){function t(){this.__fast__=!0,this.col1=new nj,this.col2=new nj,this.col1.x=this.col2.y=1}return t.FromAngle=function(e){var n=new t;return n.Set(e),n},t.FromVV=function(e,n){var i=new t;return i.SetVV(e,n),i},t.prototype.Set=function(t){var e=Math.cos(t),n=Math.sin(t);this.col1.x=e,this.col2.x=-n,this.col1.y=n,this.col2.y=e},t.prototype.SetVV=function(t,e){this.col1.SetV(t),this.col2.SetV(e)},t.prototype.Copy=function(){var e=new t;return e.SetM(this),e},t.prototype.SetM=function(t){this.col1.SetV(t.col1||t.$Bgcol1),this.col2.SetV(t.col2||t.$Bgcol2)},t.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y},t.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},t.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},t.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},t.prototype.GetInverse=function(t){var e=this.col1.x,n=this.col2.x,i=this.col1.y,r=this.col2.y,o=e*r-n*i;return 0!=o&&(o=1/o),t.col1.x=o*r,t.col2.x=-o*n,t.col1.y=-o*i,t.col2.y=o*e,t},t.prototype.Solve=function(t,e,n){var i=this.col1.x,r=this.col2.x,o=this.col1.y,a=this.col2.y,s=i*a-r*o;return 0!=s&&(s=1/s),t.x=s*(a*e-r*n),t.y=s*(i*n-o*e),t},t.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},t}(),$V=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),this.col1=new ij,this.col2=new ij,this.col3=new ij,t||e||n?(this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(n)):(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero())}return t.prototype.SetVVV=function(t,e,n){this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(n)},t.prototype.Copy=function(){return new t(this.col1,this.col2,this.col3)},t.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2),this.col3.SetV(t.col3)},t.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col1.z+=t.col1.z,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y,this.col2.z+=t.col2.z,this.col3.x+=t.col3.x,this.col3.y+=t.col3.y,this.col3.z+=t.col3.z},t.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},t.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},t.prototype.Solve22=function(t,e,n){var i=this.col1.x,r=this.col2.x,o=this.col1.y,a=this.col2.y,s=i*a-r*o;return 0!=s&&(s=1/s),t.x=s*(a*e-r*n),t.y=s*(i*n-o*e),t},t.prototype.Solve33=function(t,e,n,i){var r=this.col1.x,o=this.col1.y,a=this.col1.z,s=this.col2.x,l=this.col2.y,u=this.col2.z,c=this.col3.x,h=this.col3.y,p=this.col3.z,d=r*(l*p-u*h)+o*(u*c-s*p)+a*(s*h-l*c);return 0!=d&&(d=1/d),t.x=d*(e*(l*p-u*h)+n*(u*c-s*p)+i*(s*h-l*c)),t.y=d*(r*(n*p-i*h)+o*(i*c-e*p)+a*(e*h-n*c)),t.z=d*(r*(l*i-u*n)+o*(u*e-s*i)+a*(s*n-l*e)),t},t}(),tj=function(){function t(){this.localCenter=new nj,this.c0=new nj,this.c=new nj}return t.prototype.Set=function(t){this.localCenter.SetV(t.localCenter),this.c0.SetV(t.c0),this.c.SetV(t.c),this.a0=t.a0,this.a=t.a,this.t0=t.t0},t.prototype.Copy=function(){var e=new t;return e.localCenter.SetV(this.localCenter),e.c0.SetV(this.c0),e.c.SetV(this.c),e.a0=this.a0,e.a=this.a,e.t0=this.t0,e},t.prototype.GetTransform=function(t,e){t.position.x=(1-e)*this.c0.x+e*this.c.x,t.position.y=(1-e)*this.c0.y+e*this.c.y;var n=(1-e)*this.a0+e*this.a;t.R.Set(n);var i=t.R;t.position.x-=i.col1.x*this.localCenter.x+i.col2.x*this.localCenter.y,t.position.y-=i.col1.y*this.localCenter.x+i.col2.y*this.localCenter.y},t.prototype.Advance=function(t){if(this.t0<t&&1-this.t0>Number.MIN_VALUE){var e=(t-this.t0)/(1-this.t0);this.c0.x=(1-e)*this.c0.x+e*this.c.x,this.c0.y=(1-e)*this.c0.y+e*this.c.y,this.a0=(1-e)*this.a0+e*this.a,this.t0=t}},t}(),ej=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.__fast__=!0,this.position=new nj,this.R=new ZV,t&&(this.position.SetV(t),this.R.SetM(e))}return t.prototype.Initialize=function(t,e){this.position.SetV(t),this.R.SetM(e)},t.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},t.prototype.Set=function(t){this.position.SetV(t.position),this.R.SetM(t.R)},t.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},t}(),nj=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.__fast__=!0,this.x=t,this.y=e}return t.prototype.SetZero=function(){this.x=0,this.y=0},t.prototype.Set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},t.prototype.SetV=function(t){this.x=t.x,this.y=t.y},t.prototype.GetNegative=function(){return new t(-this.x,-this.y)},t.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},t.Make=function(e,n){return new t(e,n)},t.prototype.Copy=function(){return new t(this.x,this.y)},t.prototype.Add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y},t.prototype.Multiply=function(t){this.x*=t,this.y*=t},t.prototype.MulM=function(t){var e=this.x;this.x=t.col1.x*e+t.col2.x*this.y,this.y=t.col1.y*e+t.col2.y*this.y},t.prototype.MulTM=function(t){var e=rj.Dot(this,t.col1);this.y=rj.Dot(this,t.col2),this.x=e},t.prototype.CrossVF=function(t){var e=this.x;this.x=t*this.y,this.y=-t*e},t.prototype.CrossFV=function(t){var e=this.x;this.x=-t*this.y,this.y=t*e},t.prototype.MinV=function(t){this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y},t.prototype.MaxV=function(t){this.x=this.x>t.x?this.x:t.x,this.y=this.y>t.y?this.y:t.y},t.prototype.Abs=function(){this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y)},t.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},t.prototype.Normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t<Number.MIN_VALUE)return 0;var e=1/t;return this.x*=e,this.y*=e,t},t.prototype.IsValid=function(){return rj.IsValid(this.x)&&rj.IsValid(this.y)},t}(),ij=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.__fast__=!0,this.x=t,this.y=e,this.z=n}return t.prototype.SetZero=function(){this.x=this.y=this.z=0},t.prototype.Set=function(t,e,n){this.x=t,this.y=e,this.z=n},t.prototype.SetV=function(t){this.x=t.x,this.y=t.y,this.z=t.z},t.prototype.GetNegative=function(){return new t(-this.x,-this.y,-this.z)},t.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},t.prototype.Copy=function(){return new t(this.x,this.y,this.z)},t.prototype.Add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},t.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},t.prototype.Multiply=function(t){this.x*=t,this.y*=t,this.z*=t},t}(),rj=function(){function t(){}return t.IsValid=function(t){return isFinite(t)},t.Dot=function(t,e){return t.x*e.x+t.y*e.y},t.CrossVV=function(t,e){return t.x*e.y-t.y*e.x},t.CrossVF=function(t,e){return new nj(e*t.y,-e*t.x)},t.CrossFV=function(t,e){return new nj(-t*e.y,t*e.x)},t.MulMV=function(t,e){return new nj(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y)},t.MulTMV=function(t,e){return new nj(this.Dot(e,t.col1),this.Dot(e,t.col2))},t.MulX=function(t,e){var n=this.MulMV(t.R,e);return n.x+=t.position.x,n.y+=t.position.y,n},t.MulXT=function(t,e){var n=this.SubtractVV(e,t.position),i=n.x*t.R.col1.x+n.y*t.R.col1.y;return n.y=n.x*t.R.col2.x+n.y*t.R.col2.y,n.x=i,n},t.AddVV=function(t,e){return new nj(t.x+e.x,t.y+e.y)},t.SubtractVV=function(t,e){return new nj(t.x-e.x,t.y-e.y)},t.Distance=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},t.DistanceSquared=function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},t.MulFV=function(t,e){return new nj(t*e.x,t*e.y)},t.AddMM=function(t,e){return ZV.FromVV(this.AddVV(t.col1,e.col1),this.AddVV(t.col2,e.col2))},t.MulMM=function(t,e){return ZV.FromVV(this.MulMV(t,e.col1),this.MulMV(t,e.col2))},t.MulTMM=function(t,e){var n=new nj(this.Dot(t.col1,e.col1),this.Dot(t.col2,e.col1)),i=new nj(this.Dot(t.col1,e.col2),this.Dot(t.col2,e.col2));return ZV.FromVV(n,i)},t.Abs=function(t){return t>0?t:-t},t.AbsV=function(t){return new nj(this.Abs(t.x),this.Abs(t.y))},t.AbsM=function(t){return ZV.FromVV(this.AbsV(t.col1),this.AbsV(t.col2))},t.Min=function(t,e){return t<e?t:e},t.MinV=function(t,e){return new nj(this.Min(t.x,e.x),this.Min(t.y,e.y))},t.Max=function(t,e){return t>e?t:e},t.MaxV=function(t,e){return new nj(this.Max(t.x,e.x),this.Max(t.y,e.y))},t.Clamp=function(t,e,n){return t<e?e:t>n?n:t},t.ClampV=function(t,e,n){return this.MaxV(e,this.MinV(t,n))},t.Swap=function(t,e){var n=t[0];t[0]=e[0],e[0]=n},t.Random=function(){return 2*Math.random()-1},t.RandomRange=function(t,e){var n=Math.random();return n=(e-t)*n+t},t.NextPowerOfTwo=function(t){return t|=t>>1&2147483647,t|=t>>2&1073741823,t|=t>>4&268435455,t|=t>>8&16777215,(t|=t>>16&65535)+1},t.IsPowerOfTwo=function(t){return t>0&&!(t&t-1)},t.b2Vec2_zero=new nj(0,0),t.b2Mat22_identity=ZV.FromVV(new nj(1,0),new nj(0,1)),t.b2Transform_identity=new ej(t.b2Vec2_zero,t.b2Mat22_identity),t}(),oj=function(){return function(){this.__fast__=!0,this.pointA=new nj,this.pointB=new nj}}(),aj=function(){function t(){this.__fast__=!0}return t.prototype.Set=function(t){this.wA.SetV(t.wA),this.wB.SetV(t.wB),this.w.SetV(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB},t}(),sj=function(){function t(){this.__fast__=!0,this.m_v1=new aj,this.m_v2=new aj,this.m_v3=new aj,this.m_vertices=new Array(3),this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3}return t.prototype.ReadCache=function(t,e,n,i,r){var o,a;KV.b2Assert(0<=t.count&&t.count<=3),this.m_count=t.count;for(var s=this.m_vertices,l=0;l<this.m_count;l++){var u=s[l];u.indexA=t.indexA[l],u.indexB=t.indexB[l],o=e.GetVertex(u.indexA),a=i.GetVertex(u.indexB),u.wA=rj.MulX(n,o),u.wB=rj.MulX(r,a),u.w=rj.SubtractVV(u.wB,u.wA),u.a=0}if(this.m_count>1){var c=t.metric,h=this.GetMetric();(h<.5*c||2*c<h||h<Number.MIN_VALUE)&&(this.m_count=0)}0==this.m_count&&((u=s[0]).indexA=0,u.indexB=0,o=e.GetVertex(0),a=i.GetVertex(0),u.wA=rj.MulX(n,o),u.wB=rj.MulX(r,a),u.w=rj.SubtractVV(u.wB,u.wA),this.m_count=1)},t.prototype.WriteCache=function(t){t.metric=this.GetMetric(),t.count=this.m_count>>>0;for(var e=this.m_vertices,n=0;n<this.m_count;n++)t.indexA[n]=e[n].indexA,t.indexB[n]=e[n].indexB},t.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var t=rj.SubtractVV(this.m_v2.w,this.m_v1.w);return rj.CrossVV(t,this.m_v1.w.GetNegative())>0?rj.CrossFV(1,t):rj.CrossVF(t,1);default:return KV.b2Assert(!1),new nj}},t.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:default:return KV.b2Assert(!1),new nj;case 1:return this.m_v1.w;case 2:return new nj(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y)}},t.prototype.GetWitnessPoints=function(t,e){switch(this.m_count){case 0:default:KV.b2Assert(!1);break;case 1:t.SetV(this.m_v1.wA),e.SetV(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}},t.prototype.GetMetric=function(){switch(this.m_count){case 0:default:return KV.b2Assert(!1),0;case 1:return 0;case 2:return rj.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return rj.CrossVV(rj.SubtractVV(this.m_v2.w,this.m_v1.w),rj.SubtractVV(this.m_v3.w,this.m_v1.w))}},t.prototype.Solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,n=rj.SubtractVV(e,t),i=-(t.x*n.x+t.y*n.y);if(i<=0)return this.m_v1.a=1,void(this.m_count=1);var r=e.x*n.x+e.y*n.y;if(r<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Set(this.m_v2);var o=1/(r+i);this.m_v1.a=r*o,this.m_v2.a=i*o,this.m_count=2},t.prototype.Solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,n=this.m_v3.w,i=rj.SubtractVV(e,t),r=rj.Dot(t,i),o=rj.Dot(e,i),a=-r,s=rj.SubtractVV(n,t),l=rj.Dot(t,s),u=rj.Dot(n,s),c=-l,h=rj.SubtractVV(n,e),p=rj.Dot(e,h),d=rj.Dot(n,h),f=-p,_=rj.CrossVV(i,s),g=_*rj.CrossVV(e,n),m=_*rj.CrossVV(n,t),y=_*rj.CrossVV(t,e);if(a<=0&&c<=0)return this.m_v1.a=1,void(this.m_count=1);if(o>0&&a>0&&y<=0){var A=1/(o+a);return this.m_v1.a=o*A,this.m_v2.a=a*A,void(this.m_count=2)}if(u>0&&c>0&&m<=0){var v=1/(u+c);return this.m_v1.a=u*v,this.m_v3.a=c*v,this.m_count=2,void this.m_v2.Set(this.m_v3)}if(o<=0&&f<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Set(this.m_v2);if(u<=0&&d<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Set(this.m_v3);if(d>0&&f>0&&g<=0){var b=1/(d+f);return this.m_v2.a=d*b,this.m_v3.a=f*b,this.m_count=2,void this.m_v1.Set(this.m_v3)}var x=1/(g+m+y);this.m_v1.a=g*x,this.m_v2.a=m*x,this.m_v3.a=y*x,this.m_count=3},t}(),lj=function(){function t(){this.__fast__=!0}return t.Distance=function(t,e,n){++this.b2_gjkCalls;var i=n.proxyA,r=n.proxyB,o=n.transformA,a=n.transformB,s=this.s_simplex;s.ReadCache(e,i,o,r,a);var l,u,c=s.m_vertices,h=this.s_saveA,p=this.s_saveB,d=0;s.GetClosestPoint().LengthSquared();for(var f=0;f<20;){for(d=s.m_count,l=0;l<d;l++)h[l]=c[l].indexA,p[l]=c[l].indexB;switch(s.m_count){case 1:break;case 2:s.Solve2();break;case 3:s.Solve3();break;default:KV.b2Assert(!1)}if(3==s.m_count)break;(u=s.GetClosestPoint()).LengthSquared();var _=s.GetSearchDirection();if(_.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;var g=c[s.m_count];g.indexA=i.GetSupport(rj.MulTMV(o.R,_.GetNegative())),g.wA=rj.MulX(o,i.GetVertex(g.indexA)),g.indexB=r.GetSupport(rj.MulTMV(a.R,_)),g.wB=rj.MulX(a,r.GetVertex(g.indexB)),g.w=rj.SubtractVV(g.wB,g.wA),++f,++this.b2_gjkIters;var m=!1;for(l=0;l<d;l++)if(g.indexA==h[l]&&g.indexB==p[l]){m=!0;break}if(m)break;++s.m_count}if(this.b2_gjkMaxIters=rj.Max(this.b2_gjkMaxIters,f),s.GetWitnessPoints(t.pointA,t.pointB),t.distance=rj.SubtractVV(t.pointA,t.pointB).Length(),t.iterations=f,s.WriteCache(e),n.useRadii){var y=i.m_radius,A=r.m_radius;if(t.distance>y+A&&t.distance>Number.MIN_VALUE){t.distance-=y+A;var v=rj.SubtractVV(t.pointB,t.pointA);v.Normalize(),t.pointA.x+=y*v.x,t.pointA.y+=y*v.y,t.pointB.x-=A*v.x,t.pointB.y-=A*v.y}else(u=new nj).x=.5*(t.pointA.x+t.pointB.x),u.y=.5*(t.pointA.y+t.pointB.y),t.pointA.x=t.pointB.x=u.x,t.pointA.y=t.pointB.y=u.y,t.distance=0}},t.s_simplex=new sj,t.s_saveA=new Array(3),t.s_saveB=new Array(3),t}(),uj=function(){function t(){this.__fast__=!0,this.m_type=t.e_unknownShape,this.m_radius=KV.b2_linearSlop}return t.prototype.Copy=function(){return null},t.prototype.Set=function(t){this.m_radius=t.m_radius},t.prototype.GetType=function(){return this.m_type},t.prototype.TestPoint=function(t,e){return!1},t.prototype.RayCast=function(t,e,n){return!1},t.prototype.ComputeAABB=function(t,e){},t.prototype.ComputeMass=function(t,e){},t.prototype.ComputeSubmergedArea=function(t,e,n,i){return 0},t.TestOverlap=function(t,e,n,i){var r=new qV;r.proxyA=new WV,r.proxyA.Set(t),r.proxyB=new WV,r.proxyB.Set(n),r.transformA=e,r.transformB=i,r.useRadii=!0;var o=new JV;o.count=0;var a=new oj;return lj.Distance(a,o,r),a.distance<10*Number.MIN_VALUE},t.e_unknownShape=-1,t.e_circleShape=0,t.e_polygonShape=1,t.e_edgeShape=2,t.e_shapeTypeCount=3,t.e_hitCollide=1,t.e_missCollide=0,t.e_startsInsideCollide=-1,t}(),cj=function(t){function e(e){void 0===e&&(e=0);var n=t.call(this)||this;return n.__fast__=!0,n.m_p=new nj,n.m_type=uj.e_circleShape,n.m_radius=e,n}return o(e,t),e.prototype.Copy=function(){var t=new e;return t.Set(this),t},e.prototype.Set=function(n){if(t.prototype.Set.call(this,n),n instanceof e){var i=n;this.m_p.SetV(i.m_p)}},e.prototype.TestPoint=function(t,e){var n=t.R,i=t.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),r=t.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y);return(i=e.x-i)*i+(r=e.y-r)*r<=this.m_radius*this.m_radius},e.prototype.RayCast=function(t,e,n){var i=n.R,r=n.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),o=n.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y),a=e.p1.x-r,s=e.p1.y-o,l=a*a+s*s-this.m_radius*this.m_radius,u=e.p2.x-e.p1.x,c=e.p2.y-e.p1.y,h=a*u+s*c,p=u*u+c*c,d=h*h-p*l;if(d<0||p<Number.MIN_VALUE)return!1;var f=-(h+Math.sqrt(d));return 0<=f&&f<=e.maxFraction*p&&(f/=p,t.fraction=f,t.normal.x=a+f*u,t.normal.y=s+f*c,t.normal.Normalize(),!0)},e.prototype.ComputeAABB=function(t,e){var n=e.R,i=e.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),r=e.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y);t.lowerBound.Set(i-this.m_radius,r-this.m_radius),t.upperBound.Set(i+this.m_radius,r+this.m_radius)},e.prototype.ComputeMass=function(t,e){t.mass=e*KV.b2_pi*this.m_radius*this.m_radius,t.center.SetV(this.m_p),t.I=t.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},e.prototype.ComputeSubmergedArea=function(t,e,n,i){var r=rj.MulX(n,this.m_p),o=-(rj.Dot(t,r)-e);if(o<-this.m_radius+Number.MIN_VALUE)return 0;if(o>this.m_radius)return i.SetV(r),Math.PI*this.m_radius*this.m_radius;var a=this.m_radius*this.m_radius,s=o*o,l=a*(Math.asin(o/this.m_radius)+Math.PI/2)+o*Math.sqrt(a-s),u=-2/3*Math.pow(a-s,1.5)/l;return i.x=r.x+t.x*u,i.y=r.y+t.y*u,l},e.prototype.GetLocalPosition=function(){return this.m_p},e.prototype.SetLocalPosition=function(t){this.m_p.SetV(t)},e.prototype.GetRadius=function(){return this.m_radius},e.prototype.SetRadius=function(t){this.m_radius=t},e}(uj),hj=function(t){function e(e,n){var i=t.call(this)||this;return i.__fast__=!0,i.s_supportVec=new nj,i.m_v1=new nj,i.m_v2=new nj,i.m_coreV1=new nj,i.m_coreV2=new nj,i.m_normal=new nj,i.m_direction=new nj,i.m_cornerDir1=new nj,i.m_cornerDir2=new nj,i.m_type=uj.e_edgeShape,i.m_prevEdge=null,i.m_nextEdge=null,i.m_v1=e,i.m_v2=n,i.m_direction.Set(i.m_v2.x-i.m_v1.x,i.m_v2.y-i.m_v1.y),i.m_length=i.m_direction.Normalize(),i.m_normal.Set(i.m_direction.y,-i.m_direction.x),i.m_coreV1.Set(-KV.b2_toiSlop*(i.m_normal.x-i.m_direction.x)+i.m_v1.x,-KV.b2_toiSlop*(i.m_normal.y-i.m_direction.y)+i.m_v1.y),i.m_coreV2.Set(-KV.b2_toiSlop*(i.m_normal.x+i.m_direction.x)+i.m_v2.x,-KV.b2_toiSlop*(i.m_normal.y+i.m_direction.y)+i.m_v2.y),i.m_cornerDir1=i.m_normal,i.m_cornerDir2.Set(-i.m_normal.x,-i.m_normal.y),i}return o(e,t),e.prototype.TestPoint=function(t,e){return!1},e.prototype.RayCast=function(t,e,n){var i,r=e.p2.x-e.p1.x,o=e.p2.y-e.p1.y;i=n.R;var a=n.position.x+(i.col1.x*this.m_v1.x+i.col2.x*this.m_v1.y),s=n.position.y+(i.col1.y*this.m_v1.x+i.col2.y*this.m_v1.y),l=n.position.y+(i.col1.y*this.m_v2.x+i.col2.y*this.m_v2.y)-s,u=-(n.position.x+(i.col1.x*this.m_v2.x+i.col2.x*this.m_v2.y)-a),c=100*Number.MIN_VALUE,h=-(r*l+o*u);if(h>c){var p=e.p1.x-a,d=e.p1.y-s,f=p*l+d*u;if(0<=f&&f<=e.maxFraction*h){var _=-r*d+o*p;if(-c*h<=_&&_<=h*(1+c)){f/=h,t.fraction=f;var g=Math.sqrt(l*l+u*u);return t.normal.x=l/g,t.normal.y=u/g,!0}}}return!1},e.prototype.ComputeAABB=function(t,e){var n=e.R,i=e.position.x+(n.col1.x*this.m_v1.x+n.col2.x*this.m_v1.y),r=e.position.y+(n.col1.y*this.m_v1.x+n.col2.y*this.m_v1.y),o=e.position.x+(n.col1.x*this.m_v2.x+n.col2.x*this.m_v2.y),a=e.position.y+(n.col1.y*this.m_v2.x+n.col2.y*this.m_v2.y);i<o?(t.lowerBound.x=i,t.upperBound.x=o):(t.lowerBound.x=o,t.upperBound.x=i),r<a?(t.lowerBound.y=r,t.upperBound.y=a):(t.lowerBound.y=a,t.upperBound.y=r)},e.prototype.ComputeMass=function(t,e){t.mass=0,t.center.SetV(this.m_v1),t.I=0},e.prototype.ComputeSubmergedArea=function(t,e,n,i){var r=new nj(t.x*e,t.y*e),o=rj.MulX(n,this.m_v1),a=rj.MulX(n,this.m_v2),s=rj.Dot(t,o)-e,l=rj.Dot(t,a)-e;if(s>0){if(l>0)return 0;o.x=-l/(s-l)*o.x+s/(s-l)*a.x,o.y=-l/(s-l)*o.y+s/(s-l)*a.y}else l>0&&(a.x=-l/(s-l)*o.x+s/(s-l)*a.x,a.y=-l/(s-l)*o.y+s/(s-l)*a.y);return i.x=(r.x+o.x+a.x)/3,i.y=(r.y+o.y+a.y)/3,.5*((o.x-r.x)*(a.y-r.y)-(o.y-r.y)*(a.x-r.x))},e.prototype.GetLength=function(){return this.m_length},e.prototype.GetVertex1=function(){return this.m_v1},e.prototype.GetVertex2=function(){return this.m_v2},e.prototype.GetCoreVertex1=function(){return this.m_coreV1},e.prototype.GetCoreVertex2=function(){return this.m_coreV2},e.prototype.GetNormalVector=function(){return this.m_normal},e.prototype.GetDirectionVector=function(){return this.m_direction},e.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},e.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},e.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},e.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},e.prototype.GetFirstVertex=function(t){var e=t.R;return new nj(t.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y),t.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y))},e.prototype.GetNextEdge=function(){return this.m_nextEdge},e.prototype.GetPrevEdge=function(){return this.m_prevEdge},e.prototype.Support=function(t,e,n){var i=t.R,r=t.position.x+(i.col1.x*this.m_coreV1.x+i.col2.x*this.m_coreV1.y),o=t.position.y+(i.col1.y*this.m_coreV1.x+i.col2.y*this.m_coreV1.y),a=t.position.x+(i.col1.x*this.m_coreV2.x+i.col2.x*this.m_coreV2.y),s=t.position.y+(i.col1.y*this.m_coreV2.x+i.col2.y*this.m_coreV2.y);return r*e+o*n>a*e+s*n?(this.s_supportVec.x=r,this.s_supportVec.y=o):(this.s_supportVec.x=a,this.s_supportVec.y=s),this.s_supportVec},e.prototype.SetPrevEdge=function(t,e,n,i){this.m_prevEdge=t,this.m_coreV1=e,this.m_cornerDir1=n,this.m_cornerConvex1=i},e.prototype.SetNextEdge=function(t,e,n,i){this.m_nextEdge=t,this.m_coreV2=e,this.m_cornerDir2=n,this.m_cornerConvex2=i},e}(uj),pj=function(){return function(){this.mass=0,this.center=new nj(0,0),this.I=0}}(),dj=function(t){function e(){var e=t.call(this)||this;return e.__fast__=!0,e.m_type=uj.e_polygonShape,e.m_centroid=new nj,e.m_vertices=new Array,e.m_normals=new Array,e}return o(e,t),e.prototype.Copy=function(){var t=new e;return t.Set(this),t},e.prototype.Set=function(n){if(t.prototype.Set.call(this,n),n instanceof e){var i=n;this.m_centroid.SetV(i.m_centroid),this.m_vertexCount=i.m_vertexCount,this.Reserve(this.m_vertexCount);for(var r=0;r<this.m_vertexCount;r++)this.m_vertices[r].SetV(i.m_vertices[r]),this.m_normals[r].SetV(i.m_normals[r])}},e.prototype.SetAsArray=function(t,e){void 0===e&&(e=0);var n=t;"function"==typeof n.axInitializer&&(n=t.value);var i=n.slice();this.SetAsVector(i,e)},e.AsArray=function(t,n){var i=new e;return i.SetAsArray(t,n),i},e.prototype.SetAsVector=function(t,n){var i;for(void 0===n&&(n=0),0==n&&(n=t.length),KV.b2Assert(2<=n),this.m_vertexCount=n,this.Reserve(n),i=0;i<this.m_vertexCount;i++)this.m_vertices[i].SetV(t[i]);for(i=0;i<this.m_vertexCount;++i){var r=i,o=i+1<this.m_vertexCount?i+1:0,a=rj.SubtractVV(this.m_vertices[o],this.m_vertices[r]);KV.b2Assert(a.LengthSquared()>Number.MIN_VALUE),this.m_normals[i].SetV(rj.CrossVF(a,1)),this.m_normals[i].Normalize()}this.m_centroid=e.ComputeCentroid(this.m_vertices,this.m_vertexCount)},e.AsVector=function(t,n){var i=new e;return i.SetAsVector(t,n),i},e.prototype.SetAsBox=function(t,e){this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},e.AsBox=function(t,n){var i=new e;return i.SetAsBox(t,n),i},e.prototype.SetAsOrientedBox=function(t,e,n,i){void 0===n&&(n=null),void 0===i&&(i=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=n;var r=new ej;r.position=n,r.R.Set(i);for(var o=0;o<this.m_vertexCount;++o)this.m_vertices[o]=rj.MulX(r,this.m_vertices[o]),this.m_normals[o]=rj.MulMV(r.R,this.m_normals[o])},e.AsOrientedBox=function(t,n,i,r){void 0===i&&(i=null),void 0===r&&(r=0);var o=new e;return o.SetAsOrientedBox(t,n,i,r),o},e.prototype.SetAsEdge=function(t,e){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(t),this.m_vertices[1].SetV(e),this.m_centroid.x=.5*(t.x+e.x),this.m_centroid.y=.5*(t.y+e.y),this.m_normals[0]=rj.CrossVF(rj.SubtractVV(e,t),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},e.AsEdge=function(t,n){var i=new e;return i.SetAsEdge(t,n),i},e.prototype.TestPoint=function(t,e){for(var n,i=t.R,r=e.x-t.position.x,o=e.y-t.position.y,a=r*i.col1.x+o*i.col1.y,s=r*i.col2.x+o*i.col2.y,l=0;l<this.m_vertexCount;++l){if(r=a-(n=this.m_vertices[l]).x,o=s-n.y,(n=this.m_normals[l]).x*r+n.y*o>0)return!1}return!0},e.prototype.RayCast=function(t,e,n){var i,r,o,a,s=0,l=e.maxFraction;i=e.p1.x-n.position.x,r=e.p1.y-n.position.y;var u=i*(o=n.R).col1.x+r*o.col1.y,c=i*o.col2.x+r*o.col2.y;i=e.p2.x-n.position.x,r=e.p2.y-n.position.y;for(var h=i*(o=n.R).col1.x+r*o.col1.y-u,p=i*o.col2.x+r*o.col2.y-c,d=-1,f=0;f<this.m_vertexCount;++f){i=(a=this.m_vertices[f]).x-u,r=a.y-c;var _=(a=this.m_normals[f]).x*i+a.y*r,g=a.x*h+a.y*p;if(0==g){if(_<0)return!1}else g<0&&_<s*g?(s=_/g,d=f):g>0&&_<l*g&&(l=_/g);if(l<s-Number.MIN_VALUE)return!1}return d>=0&&(t.fraction=s,o=n.R,a=this.m_normals[d],t.normal.x=o.col1.x*a.x+o.col2.x*a.y,t.normal.y=o.col1.y*a.x+o.col2.y*a.y,!0)},e.prototype.ComputeAABB=function(t,e){for(var n=e.R,i=this.m_vertices[0],r=e.position.x+(n.col1.x*i.x+n.col2.x*i.y),o=e.position.y+(n.col1.y*i.x+n.col2.y*i.y),a=r,s=o,l=1;l<this.m_vertexCount;++l){i=this.m_vertices[l];var u=e.position.x+(n.col1.x*i.x+n.col2.x*i.y),c=e.position.y+(n.col1.y*i.x+n.col2.y*i.y);r=r<u?r:u,o=o<c?o:c,a=a>u?a:u,s=s>c?s:c}t.lowerBound.x=r-this.m_radius,t.lowerBound.y=o-this.m_radius,t.upperBound.x=a+this.m_radius,t.upperBound.y=s+this.m_radius},e.prototype.ComputeMass=function(t,e){if(2==this.m_vertexCount)return t.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),t.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),t.mass=0,void(t.I=0);for(var n=0,i=0,r=0,o=0,a=1/3,s=0;s<this.m_vertexCount;++s){var l=this.m_vertices[s],u=s+1<this.m_vertexCount?this.m_vertices[s+1]:this.m_vertices[0],c=l.x-0,h=l.y-0,p=u.x-0,d=u.y-0,f=c*d-h*p,_=.5*f;r+=_,n+=_*a*(0+l.x+u.x),i+=_*a*(0+l.y+u.y);o+=f*(a*(.25*(c*c+p*c+p*p)+(0*c+0*p))+0+(a*(.25*(h*h+d*h+d*d)+(0*h+0*d))+0))}t.mass=e*r,n*=1/r,i*=1/r,t.center.Set(n,i),t.I=e*o},e.prototype.ComputeSubmergedArea=function(t,e,n,i){var r,o=rj.MulTMV(n.R,t),a=e-rj.Dot(t,n.position),s=new Array,l=0,u=-1,c=-1,h=!1;for(r=0;r<this.m_vertexCount;++r){s[r]=rj.Dot(o,this.m_vertices[r])-a;var p=s[r]<-Number.MIN_VALUE;r>0&&(p?h||(u=r-1,l++):h&&(c=r-1,l++)),h=p}switch(l){case 0:if(h){var d=new pj;return this.ComputeMass(d,1),i.SetV(rj.MulX(n,d.center)),d.mass}return 0;case 1:-1==u?u=this.m_vertexCount-1:c=this.m_vertexCount-1}var f,_=(u+1)%this.m_vertexCount,g=(c+1)%this.m_vertexCount,m=(0-s[u])/(s[_]-s[u]),y=(0-s[c])/(s[g]-s[c]),A=new nj(this.m_vertices[u].x*(1-m)+this.m_vertices[_].x*m,this.m_vertices[u].y*(1-m)+this.m_vertices[_].y*m),v=new nj(this.m_vertices[c].x*(1-y)+this.m_vertices[g].x*y,this.m_vertices[c].y*(1-y)+this.m_vertices[g].y*y),b=0,x=new nj,C=this.m_vertices[_];for(r=_;r!=g;){f=(r=(r+1)%this.m_vertexCount)==g?v:this.m_vertices[r];var I=.5*((C.x-A.x)*(f.y-A.y)-(C.y-A.y)*(f.x-A.x));b+=I,x.x+=I*(A.x+C.x+f.x)/3,x.y+=I*(A.y+C.y+f.y)/3,C=f}return x.Multiply(1/b),i.SetV(rj.MulX(n,x)),b},e.prototype.GetVertexCount=function(){return this.m_vertexCount},e.prototype.GetVertices=function(){return this.m_vertices},e.prototype.GetNormals=function(){return this.m_normals},e.prototype.GetSupport=function(t){for(var e=0,n=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,i=1;i<this.m_vertexCount;++i){var r=this.m_vertices[i].x*t.x+this.m_vertices[i].y*t.y;r>n&&(e=i,n=r)}return e},e.prototype.GetSupportVertex=function(t){for(var e=0,n=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,i=1;i<this.m_vertexCount;++i){var r=this.m_vertices[i].x*t.x+this.m_vertices[i].y*t.y;r>n&&(e=i,n=r)}return this.m_vertices[e]},e.prototype.Validate=function(){return!1},e.prototype.Reserve=function(t){for(var e=this.m_vertices.length;e<t;e++)this.m_vertices[e]=new nj,this.m_normals[e]=new nj},e.ComputeCentroid=function(t,e){for(var n=new nj,i=0,r=1/3,o=0;o<e;++o){var a=t[o],s=o+1<e?t[o+1]:t[0],l=a.x-0,u=a.y-0,c=s.x-0,h=.5*(l*(s.y-0)-u*c);i+=h,n.x+=h*r*(0+a.x+s.x),n.y+=h*r*(0+a.y+s.y)}return n.x*=1/i,n.y*=1/i,n},e.ComputeOBB=function(t,e,n){var i,r=new Array(n+1);for(i=0;i<n;++i)r[i]=e[i];r[n]=r[0];var o=Number.MAX_VALUE;for(i=1;i<=n;++i){for(var a=r[i-1],s=r[i].x-a.x,l=r[i].y-a.y,u=Math.sqrt(s*s+l*l),c=-(l/=u),h=s/=u,p=Number.MAX_VALUE,d=Number.MAX_VALUE,f=-Number.MAX_VALUE,_=-Number.MAX_VALUE,g=0;g<n;++g){var m=r[g].x-a.x,y=r[g].y-a.y,A=s*m+l*y,v=c*m+h*y;A<p&&(p=A),v<d&&(d=v),A>f&&(f=A),v>_&&(_=v)}var b=(f-p)*(_-d);if(b<.95*o){o=b,t.R.col1.x=s,t.R.col1.y=l,t.R.col2.x=c,t.R.col2.y=h;var x=.5*(p+f),C=.5*(d+_),I=t.R;t.center.x=a.x+(I.col1.x*x+I.col2.x*C),t.center.y=a.y+(I.col1.y*x+I.col2.y*C),t.extents.x=.5*(f-p),t.extents.y=.5*(_-d)}}},e.s_mat=new ZV,e}(uj),fj=function(){function t(){this.__fast__=!0,this.lowerBound=new nj,this.upperBound=new nj}return t.prototype.IsValid=function(){var t=this.upperBound.x-this.lowerBound.x,e=this.upperBound.y-this.lowerBound.y,n=t>=0&&e>=0;return n=n&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},t.prototype.GetCenter=function(){return new nj((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},t.prototype.GetExtents=function(){return new nj((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},t.prototype.Contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},t.prototype.RayCast=function(t,e){var n,i,r,o,a,s=-Number.MAX_VALUE,l=Number.MAX_VALUE,u=e.p1.x,c=e.p1.y,h=e.p2.x-e.p1.x,p=e.p2.y-e.p1.y,d=Math.abs(h),f=Math.abs(p),_=t.normal;if(d<Number.MIN_VALUE){if(u<this.lowerBound.x||this.upperBound.x<u)return!1}else if(n=1/h,a=-1,(i=(this.lowerBound.x-u)*n)>(r=(this.upperBound.x-u)*n)&&(o=i,i=r,r=o,a=1),i>s&&(_.x=a,_.y=0,s=i),s>(l=Math.min(l,r)))return!1;if(f<Number.MIN_VALUE){if(c<this.lowerBound.y||this.upperBound.y<c)return!1}else if(n=1/p,a=-1,(i=(this.lowerBound.y-c)*n)>(r=(this.upperBound.y-c)*n)&&(o=i,i=r,r=o,a=1),i>s&&(_.y=a,_.x=0,s=i),s>(l=Math.min(l,r)))return!1;return t.fraction=s,!0},t.prototype.TestOverlap=function(t){var e=t.lowerBound.x-this.upperBound.x,n=t.lowerBound.y-this.upperBound.y,i=this.lowerBound.x-t.upperBound.x,r=this.lowerBound.y-t.upperBound.y;return!(e>0||n>0)&&!(i>0||r>0)},t.Combine=function(e,n){var i=new t;return i.Combine(e,n),i},t.prototype.Combine=function(t,e){this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y)},t}(),_j=function(){function t(){this.__fast__=!0}return Object.defineProperty(t.prototype,"referenceEdge",{get:function(){return this._referenceEdge},set:function(t){this._referenceEdge=t,this._m_id._key=4294967040&this._m_id._key|255&this._referenceEdge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"incidentEdge",{get:function(){return this._incidentEdge},set:function(t){this._incidentEdge=t,this._m_id._key=4294902015&this._m_id._key|this._incidentEdge<<8&65280},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"incidentVertex",{get:function(){return this._incidentVertex},set:function(t){this._incidentVertex=t,this._m_id._key=4278255615&this._m_id._key|this._incidentVertex<<16&16711680},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flip",{get:function(){return this._flip},set:function(t){this._flip=t,this._m_id._key=16777215&this._m_id._key|this._flip<<24&4278190080},enumerable:!1,configurable:!0}),t}(),gj=function(){function t(){this.__fast__=!0,this.features=new _j,this.features._m_id=this}return t.prototype.Set=function(t){this.key=t._key},t.prototype.Copy=function(){var e=new t;return e.key=this.key,e},Object.defineProperty(t.prototype,"key",{get:function(){return this._key},set:function(t){this._key=t,this.features._referenceEdge=255&this._key,this.features._incidentEdge=(65280&this._key)>>8&255,this.features._incidentVertex=(16711680&this._key)>>16&255,this.features._flip=(4278190080&this._key)>>24&255},enumerable:!1,configurable:!0}),t}(),mj=function(){function t(){this.v=new nj,this.id=new gj}return t.prototype.Set=function(t){this.v.SetV(t.v),this.id.Set(t.id)},t}(),yj=function(){function t(){this.__fast__=!0,this.m_localPoint=new nj,this.m_id=new gj,this.Reset()}return t.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_normalImpulse=0,this.m_tangentImpulse=0,this.m_id.key=0},t.prototype.Set=function(t){this.m_localPoint.SetV(t.m_localPoint),this.m_normalImpulse=t.m_normalImpulse,this.m_tangentImpulse=t.m_tangentImpulse,this.m_id.Set(t.m_id)},t}(),Aj=function(){function t(){this.__fast__=!0,this.m_pointCount=0,this.m_points=new Array(KV.b2_maxManifoldPoints);for(var t=0;t<KV.b2_maxManifoldPoints;t++)this.m_points[t]=new yj;this.m_localPlaneNormal=new nj,this.m_localPoint=new nj}return t.prototype.Reset=function(){for(var t=0;t<KV.b2_maxManifoldPoints;t++)this.m_points[t].Reset();this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_type=0,this.m_pointCount=0},t.prototype.Set=function(t){this.m_pointCount=t.m_pointCount;for(var e=0;e<KV.b2_maxManifoldPoints;e++)this.m_points[e].Set(t.m_points[e]);this.m_localPlaneNormal.SetV(t.m_localPlaneNormal),this.m_localPoint.SetV(t.m_localPoint),this.m_type=t.m_type},t.prototype.Copy=function(){var e=new t;return e.Set(this),e},t.e_circles=1,t.e_faceA=2,t.e_faceB=4,t}(),vj=function(){function t(){}return t.ClipSegmentToLine=function(t,e,n,i){var r,o=0,a=(r=e[0]).v,s=(r=e[1]).v,l=n.x*a.x+n.y*a.y-i,u=n.x*s.x+n.y*s.y-i;if(l<=0&&t[o++].Set(e[0]),u<=0&&t[o++].Set(e[1]),l*u<0){var c=l/(l-u),h=(r=t[o]).v;h.x=a.x+c*(s.x-a.x),h.y=a.y+c*(s.y-a.y),r=t[o];var p=void 0;l>0?(p=e[0],r.id=p.id):(p=e[1],r.id=p.id),++o}return o},t.EdgeSeparation=function(t,e,n,i,r){t.m_vertexCount;var o,a,s=t.m_vertices,l=t.m_normals,u=i.m_vertexCount,c=i.m_vertices;o=e.R,a=l[n];for(var h=o.col1.x*a.x+o.col2.x*a.y,p=o.col1.y*a.x+o.col2.y*a.y,d=(o=r.R).col1.x*h+o.col1.y*p,f=o.col2.x*h+o.col2.y*p,_=0,g=Number.MAX_VALUE,m=0;m<u;++m){var y=(a=c[m]).x*d+a.y*f;y<g&&(g=y,_=m)}a=s[n],o=e.R;var A=e.position.x+(o.col1.x*a.x+o.col2.x*a.y),v=e.position.y+(o.col1.y*a.x+o.col2.y*a.y);a=c[_],o=r.R;var b=r.position.x+(o.col1.x*a.x+o.col2.x*a.y),x=r.position.y+(o.col1.y*a.x+o.col2.y*a.y);return(b-=A)*h+(x-=v)*p},t.FindMaxSeparation=function(t,e,n,i,r){var o,a,s=e.m_vertexCount,l=e.m_normals;a=r.R,o=i.m_centroid;var u=r.position.x+(a.col1.x*o.x+a.col2.x*o.y),c=r.position.y+(a.col1.y*o.x+a.col2.y*o.y);a=n.R,o=e.m_centroid,u-=n.position.x+(a.col1.x*o.x+a.col2.x*o.y),c-=n.position.y+(a.col1.y*o.x+a.col2.y*o.y);for(var h=u*n.R.col1.x+c*n.R.col1.y,p=u*n.R.col2.x+c*n.R.col2.y,d=0,f=-Number.MAX_VALUE,_=0;_<s;++_){var g=(o=l[_]).x*h+o.y*p;g>f&&(f=g,d=_)}var m,y,A,v=this.EdgeSeparation(e,n,d,i,r),b=d-1>=0?d-1:s-1,x=this.EdgeSeparation(e,n,b,i,r),C=d+1<s?d+1:0,I=this.EdgeSeparation(e,n,C,i,r);if(x>v&&x>I)A=-1,m=b,y=x;else{if(!(I>v))return t[0]=d,v;A=1,m=C,y=I}for(;d=-1==A?m-1>=0?m-1:s-1:m+1<s?m+1:0,(v=this.EdgeSeparation(e,n,d,i,r))>y;)m=d,y=v;return t[0]=m,y},t.FindIncidentEdge=function(t,e,n,i,r,o){e.m_vertexCount;var a,s,l=e.m_normals,u=r.m_vertexCount,c=r.m_vertices,h=r.m_normals;a=n.R,s=l[i];var p=a.col1.x*s.x+a.col2.x*s.y,d=a.col1.y*s.x+a.col2.y*s.y,f=(a=o.R).col1.x*p+a.col1.y*d;d=a.col2.x*p+a.col2.y*d,p=f;for(var _,g=0,m=Number.MAX_VALUE,y=0;y<u;++y){var A=p*(s=h[y]).x+d*s.y;A<m&&(m=A,g=y)}var v=g,b=v+1<u?v+1:0;_=t[0],s=c[v],a=o.R,_.v.x=o.position.x+(a.col1.x*s.x+a.col2.x*s.y),_.v.y=o.position.y+(a.col1.y*s.x+a.col2.y*s.y),_.id.features.referenceEdge=i,_.id.features.incidentEdge=v,_.id.features.incidentVertex=0,_=t[1],s=c[b],a=o.R,_.v.x=o.position.x+(a.col1.x*s.x+a.col2.x*s.y),_.v.y=o.position.y+(a.col1.y*s.x+a.col2.y*s.y),_.id.features.referenceEdge=i,_.id.features.incidentEdge=b,_.id.features.incidentVertex=1},t.MakeClipPointVector=function(){var t=new Array(2);return t[0]=new mj,t[1]=new mj,t},t.CollidePolygons=function(e,n,i,r,o){var a;e.m_pointCount=0;var s=n.m_radius+r.m_radius,l=0;t.s_edgeAO[0]=l;var u=this.FindMaxSeparation(t.s_edgeAO,n,i,r,o);if(l=t.s_edgeAO[0],!(u>s)){var c=0;t.s_edgeBO[0]=c;var h=this.FindMaxSeparation(t.s_edgeBO,r,o,n,i);if(c=t.s_edgeBO[0],!(h>s)){var p,d,f,_,g,m,y;h>.98*u+.001?(p=r,d=n,f=o,_=i,g=c,e.m_type=Aj.e_faceB,m=1):(p=n,d=r,f=i,_=o,g=l,e.m_type=Aj.e_faceA,m=0);var A=t.s_incidentEdge;this.FindIncidentEdge(A,p,f,g,d,_);var v,b=p.m_vertexCount,x=p.m_vertices,C=x[g];v=g+1<b?x[g+1]:x[0];var I=t.s_localTangent;I.Set(v.x-C.x,v.y-C.y),I.Normalize();var E=t.s_localNormal;E.x=I.y,E.y=-I.x;var w=t.s_planePoint;w.Set(.5*(C.x+v.x),.5*(C.y+v.y));var S=t.s_tangent;y=f.R,S.x=y.col1.x*I.x+y.col2.x*I.y,S.y=y.col1.y*I.x+y.col2.y*I.y;var D=t.s_tangent2;D.x=-S.x,D.y=-S.y;var T=t.s_normal;T.x=S.y,T.y=-S.x;var P=t.s_v11,B=t.s_v12;P.x=f.position.x+(y.col1.x*C.x+y.col2.x*C.y),P.y=f.position.y+(y.col1.y*C.x+y.col2.y*C.y),B.x=f.position.x+(y.col1.x*v.x+y.col2.x*v.y),B.y=f.position.y+(y.col1.y*v.x+y.col2.y*v.y);var O=T.x*P.x+T.y*P.y,M=-S.x*P.x-S.y*P.y+s,L=S.x*B.x+S.y*B.y+s,R=t.s_clipPoints1,N=t.s_clipPoints2;if(!(this.ClipSegmentToLine(R,A,D,M)<2||this.ClipSegmentToLine(N,R,S,L)<2)){e.m_localPlaneNormal.SetV(E),e.m_localPoint.SetV(w);for(var F=0,k=0;k<KV.b2_maxManifoldPoints;++k){if(a=N[k],T.x*a.v.x+T.y*a.v.y-O<=s){var U=e.m_points[F];y=_.R;var V=a.v.x-_.position.x,j=a.v.y-_.position.y;U.m_localPoint.x=V*y.col1.x+j*y.col1.y,U.m_localPoint.y=V*y.col2.x+j*y.col2.y,U.m_id.Set(a.id),U.m_id.features.flip=m,++F}}e.m_pointCount=F}}}},t.CollideCircles=function(t,e,n,i,r){var o,a;t.m_pointCount=0,o=n.R,a=e.m_p;var s=n.position.x+(o.col1.x*a.x+o.col2.x*a.y),l=n.position.y+(o.col1.y*a.x+o.col2.y*a.y);o=r.R,a=i.m_p;var u=r.position.x+(o.col1.x*a.x+o.col2.x*a.y)-s,c=r.position.y+(o.col1.y*a.x+o.col2.y*a.y)-l,h=u*u+c*c,p=e.m_radius+i.m_radius;h>p*p||(t.m_type=Aj.e_circles,t.m_localPoint.SetV(e.m_p),t.m_localPlaneNormal.SetZero(),t.m_pointCount=1,t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0)},t.CollidePolygonAndCircle=function(t,e,n,i,r){var o,a,s,l;t.m_pointCount=0,l=r.R,s=i.m_p;var u=r.position.x+(l.col1.x*s.x+l.col2.x*s.y),c=r.position.y+(l.col1.y*s.x+l.col2.y*s.y);o=u-n.position.x,a=c-n.position.y;for(var h=o*(l=n.R).col1.x+a*l.col1.y,p=o*l.col2.x+a*l.col2.y,d=0,f=-Number.MAX_VALUE,_=e.m_radius+i.m_radius,g=e.m_vertexCount,m=e.m_vertices,y=e.m_normals,A=0;A<g;++A){o=h-(s=m[A]).x,a=p-s.y;var v=(s=y[A]).x*o+s.y*a;if(v>_)return;v>f&&(f=v,d=A)}var b=d,x=b+1<g?b+1:0,C=m[b],I=m[x];if(f<Number.MIN_VALUE)return t.m_pointCount=1,t.m_type=Aj.e_faceA,t.m_localPlaneNormal.SetV(y[d]),t.m_localPoint.x=.5*(C.x+I.x),t.m_localPoint.y=.5*(C.y+I.y),t.m_points[0].m_localPoint.SetV(i.m_p),void(t.m_points[0].m_id.key=0);var E=(h-C.x)*(I.x-C.x)+(p-C.y)*(I.y-C.y),w=(h-I.x)*(C.x-I.x)+(p-I.y)*(C.y-I.y);if(E<=0){if((h-C.x)*(h-C.x)+(p-C.y)*(p-C.y)>_*_)return;t.m_pointCount=1,t.m_type=Aj.e_faceA,t.m_localPlaneNormal.x=h-C.x,t.m_localPlaneNormal.y=p-C.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(C),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0}else if(w<=0){if((h-I.x)*(h-I.x)+(p-I.y)*(p-I.y)>_*_)return;t.m_pointCount=1,t.m_type=Aj.e_faceA,t.m_localPlaneNormal.x=h-I.x,t.m_localPlaneNormal.y=p-I.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(I),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0}else{var S=.5*(C.x+I.x),D=.5*(C.y+I.y);if((f=(h-S)*y[b].x+(p-D)*y[b].y)>_)return;t.m_pointCount=1,t.m_type=Aj.e_faceA,t.m_localPlaneNormal.x=y[b].x,t.m_localPlaneNormal.y=y[b].y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.Set(S,D),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0}},t.TestOverlap=function(t,e){var n=e.lowerBound,i=t.upperBound,r=n.x-i.x,o=n.y-i.y;n=t.lowerBound,i=e.upperBound;var a=n.x-i.x,s=n.y-i.y;return!(r>0||o>0)&&!(a>0||s>0)},t.b2_nullFeature=255,t.s_incidentEdge=t.MakeClipPointVector(),t.s_clipPoints1=t.MakeClipPointVector(),t.s_clipPoints2=t.MakeClipPointVector(),t.s_edgeAO=new Array(1),t.s_edgeBO=new Array(1),t.s_localTangent=new nj,t.s_localNormal=new nj,t.s_planePoint=new nj,t.s_normal=new nj,t.s_tangent=new nj,t.s_tangent2=new nj,t.s_v11=new nj,t.s_v12=new nj,t.b2CollidePolyTempVec=new nj,t}(),bj=function(){return function(){this.__fast__=!0,this.position=new nj,this.velocity=new nj,this.normal=new nj,this.id=new gj}}(),xj=function(){function t(){this.aabb=new fj}return t.prototype.IsLeaf=function(){return null==this.child1},t}(),Cj=function(){return function(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=1),this.__fast__=!0,this.p1=new nj,this.p2=new nj,t&&this.p1.SetV(t),e&&this.p2.SetV(e),this.maxFraction=n}}(),Ij=function(){function t(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0}return t.prototype.CreateProxy=function(t,e){var n=this.AllocateNode(),i=KV.b2_aabbExtension,r=KV.b2_aabbExtension;return n.aabb.lowerBound.x=t.lowerBound.x-i,n.aabb.lowerBound.y=t.lowerBound.y-r,n.aabb.upperBound.x=t.upperBound.x+i,n.aabb.upperBound.y=t.upperBound.y+r,n.userData=e,this.InsertLeaf(n),n},t.prototype.DestroyProxy=function(t){this.RemoveLeaf(t),this.FreeNode(t)},t.prototype.MoveProxy=function(t,e,n){if(KV.b2Assert(t.IsLeaf()),t.aabb.Contains(e))return!1;this.RemoveLeaf(t);var i=KV.b2_aabbExtension+KV.b2_aabbMultiplier*(n.x>0?n.x:-n.x),r=KV.b2_aabbExtension+KV.b2_aabbMultiplier*(n.y>0?n.y:-n.y);return t.aabb.lowerBound.x=e.lowerBound.x-i,t.aabb.lowerBound.y=e.lowerBound.y-r,t.aabb.upperBound.x=e.upperBound.x+i,t.aabb.upperBound.y=e.upperBound.y+r,this.InsertLeaf(t),!0},t.prototype.Rebalance=function(t){if(null!=this.m_root)for(var e=0;e<t;e++){for(var n=this.m_root,i=0;0==n.IsLeaf();)n=this.m_path>>i&1?n.child2:n.child1,i=i+1&31;++this.m_path,this.RemoveLeaf(n),this.InsertLeaf(n)}},t.prototype.GetFatAABB=function(t){return t.aabb},t.prototype.GetUserData=function(t){return t.userData},t.prototype.Query=function(t,e){if(null!=this.m_root){var n=new Array,i=0;for(n[i++]=this.m_root;i>0;){var r=n[--i];if(r.aabb.TestOverlap(e))if(r.IsLeaf()){if(!t(r))return}else n[i++]=r.child1,n[i++]=r.child2}}},t.prototype.RayCast=function(t,e){if(null!=this.m_root){var n=e.p1,i=e.p2,r=rj.SubtractVV(n,i);r.Normalize();var o,a,s=rj.CrossFV(1,r),l=rj.AbsV(s),u=e.maxFraction,c=new fj;o=n.x+u*(i.x-n.x),a=n.y+u*(i.y-n.y),c.lowerBound.x=Math.min(n.x,o),c.lowerBound.y=Math.min(n.y,a),c.upperBound.x=Math.max(n.x,o),c.upperBound.y=Math.max(n.y,a);var h=new Array,p=0;for(h[p++]=this.m_root;p>0;){var d=h[--p];if(0!=d.aabb.TestOverlap(c)){var f=d.aabb.GetCenter(),_=d.aabb.GetExtents();if(!(Math.abs(s.x*(n.x-f.x)+s.y*(n.y-f.y))-l.x*_.x-l.y*_.y>0))if(d.IsLeaf()){var g=new Cj;if(g.p1=e.p1,g.p2=e.p2,g.maxFraction=e.maxFraction,0==(u=t(g,d)))return;o=n.x+u*(i.x-n.x),a=n.y+u*(i.y-n.y),c.lowerBound.x=Math.min(n.x,o),c.lowerBound.y=Math.min(n.y,a),c.upperBound.x=Math.max(n.x,o),c.upperBound.y=Math.max(n.y,a)}else h[p++]=d.child1,h[p++]=d.child2}}}},t.prototype.AllocateNode=function(){if(this.m_freeList){var t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t}return new xj},t.prototype.FreeNode=function(t){t.parent=this.m_freeList,this.m_freeList=t},t.prototype.InsertLeaf=function(t){if(++this.m_insertionCount,null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);var e=t.aabb.GetCenter(),n=this.m_root;if(0==n.IsLeaf())do{var i=n.child1,r=n.child2;n=Math.abs((i.aabb.lowerBound.x+i.aabb.upperBound.x)/2-e.x)+Math.abs((i.aabb.lowerBound.y+i.aabb.upperBound.y)/2-e.y)<Math.abs((r.aabb.lowerBound.x+r.aabb.upperBound.x)/2-e.x)+Math.abs((r.aabb.lowerBound.y+r.aabb.upperBound.y)/2-e.y)?i:r}while(0==n.IsLeaf());var o=n.parent,a=this.AllocateNode();if(a.parent=o,a.userData=null,a.aabb.Combine(t.aabb,n.aabb),o){n.parent.child1==n?o.child1=a:o.child2=a,a.child1=n,a.child2=t,n.parent=a,t.parent=a;do{if(o.aabb.Contains(a.aabb))break;o.aabb.Combine(o.child1.aabb,o.child2.aabb),a=o,o=o.parent}while(o)}else a.child1=n,a.child2=t,n.parent=a,t.parent=a,this.m_root=a},t.prototype.RemoveLeaf=function(t){if(t!=this.m_root){var e,n=t.parent,i=n.parent;if(e=n.child1==t?n.child2:n.child1,i)for(i.child1==n?i.child1=e:i.child2=e,e.parent=i,this.FreeNode(n);i;){var r=i.aabb;if(i.aabb=fj.Combine(i.child1.aabb,i.child2.aabb),r.Contains(i.aabb))break;i=i.parent}else this.m_root=e,e.parent=null,this.FreeNode(n)}else this.m_root=null},t}(),Ej=function(){return function(){}}(),wj=function(){function t(){this.m_tree=new Ij,this.m_moveBuffer=new Array,this.m_pairBuffer=new Array,this.m_pairCount=0}return t.prototype.CreateProxy=function(t,e){var n=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(n),n},t.prototype.DestroyProxy=function(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)},t.prototype.MoveProxy=function(t,e,n){this.m_tree.MoveProxy(t,e,n)&&this.BufferMove(t)},t.prototype.TestOverlap=function(t,e){var n=this.m_tree.GetFatAABB(t),i=this.m_tree.GetFatAABB(e);return n.TestOverlap(i)},t.prototype.GetUserData=function(t){return this.m_tree.GetUserData(t)},t.prototype.GetFatAABB=function(t){return this.m_tree.GetFatAABB(t)},t.prototype.GetProxyCount=function(){return this.m_proxyCount},t.prototype.UpdatePairs=function(t){var e=this;this.m_pairCount=0;for(var n=0,i=this.m_moveBuffer;n<i.length;n++){var r=i[n],o=this.m_tree.GetFatAABB(r);this.m_tree.Query((function(t){if(t==r)return!0;e.m_pairCount==e.m_pairBuffer.length&&(e.m_pairBuffer[e.m_pairCount]=new Ej);var n=e.m_pairBuffer[e.m_pairCount];return n.proxyA=t<r?t:r,n.proxyB=t>=r?t:r,++e.m_pairCount,!0}),o)}this.m_moveBuffer.length=0;for(var a=0;a<this.m_pairCount;){var s=this.m_pairBuffer[a];for(t(this.m_tree.GetUserData(s.proxyA),this.m_tree.GetUserData(s.proxyB)),++a;a<this.m_pairCount;){var l=this.m_pairBuffer[a];if(l.proxyA!=s.proxyA||l.proxyB!=s.proxyB)break;++a}}},t.prototype.Query=function(t,e){this.m_tree.Query(t,e)},t.prototype.RayCast=function(t,e){this.m_tree.RayCast(t,e)},t.prototype.Validate=function(){},t.prototype.Rebalance=function(t){this.m_tree.Rebalance(t)},t.prototype.BufferMove=function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t},t.prototype.UnBufferMove=function(t){var e=this.m_moveBuffer.indexOf(t);this.m_moveBuffer.splice(e,1)},t.prototype.ComparePairs=function(t,e){return 0},t}(),Sj=function(){return function(){this.__fast__=!0,this.R=new ZV,this.center=new nj,this.extents=new nj}}(),Dj=function(){return function(){this.__fast__=!0,this.normal=new nj}}(),Tj=function(){function t(){this.m_localPoint=new nj,this.m_axis=new nj}return t.prototype.Initialize=function(e,n,i,r,o){this.m_proxyA=n,this.m_proxyB=r;var a,s,l,u,c,h,p,d,f,_,g,m,y,A,v,b=e.count;if(KV.b2Assert(0<b&&b<3),1==b)this.m_type=t.e_points,a=this.m_proxyA.GetVertex(e.indexA[0]),u=this.m_proxyB.GetVertex(e.indexB[0]),A=a,y=i.R,p=i.position.x+(y.col1.x*A.x+y.col2.x*A.y),d=i.position.y+(y.col1.y*A.x+y.col2.y*A.y),A=u,y=o.R,f=o.position.x+(y.col1.x*A.x+y.col2.x*A.y),_=o.position.y+(y.col1.y*A.x+y.col2.y*A.y),this.m_axis.x=f-p,this.m_axis.y=_-d,this.m_axis.Normalize();else if(e.indexB[0]==e.indexB[1])this.m_type=t.e_faceA,s=this.m_proxyA.GetVertex(e.indexA[0]),l=this.m_proxyA.GetVertex(e.indexA[1]),u=this.m_proxyB.GetVertex(e.indexB[0]),this.m_localPoint.x=.5*(s.x+l.x),this.m_localPoint.y=.5*(s.y+l.y),this.m_axis=rj.CrossVF(rj.SubtractVV(l,s),1),this.m_axis.Normalize(),A=this.m_axis,g=(y=i.R).col1.x*A.x+y.col2.x*A.y,m=y.col1.y*A.x+y.col2.y*A.y,A=this.m_localPoint,y=i.R,p=i.position.x+(y.col1.x*A.x+y.col2.x*A.y),d=i.position.y+(y.col1.y*A.x+y.col2.y*A.y),A=u,y=o.R,(v=((f=o.position.x+(y.col1.x*A.x+y.col2.x*A.y))-p)*g+((_=o.position.y+(y.col1.y*A.x+y.col2.y*A.y))-d)*m)<0&&this.m_axis.NegativeSelf();else if(e.indexA[0]==e.indexA[0])this.m_type=t.e_faceB,c=this.m_proxyB.GetVertex(e.indexB[0]),h=this.m_proxyB.GetVertex(e.indexB[1]),a=this.m_proxyA.GetVertex(e.indexA[0]),this.m_localPoint.x=.5*(c.x+h.x),this.m_localPoint.y=.5*(c.y+h.y),this.m_axis=rj.CrossVF(rj.SubtractVV(h,c),1),this.m_axis.Normalize(),A=this.m_axis,g=(y=o.R).col1.x*A.x+y.col2.x*A.y,m=y.col1.y*A.x+y.col2.y*A.y,A=this.m_localPoint,y=o.R,f=o.position.x+(y.col1.x*A.x+y.col2.x*A.y),_=o.position.y+(y.col1.y*A.x+y.col2.y*A.y),A=a,y=i.R,(v=((p=i.position.x+(y.col1.x*A.x+y.col2.x*A.y))-f)*g+((d=i.position.y+(y.col1.y*A.x+y.col2.y*A.y))-_)*m)<0&&this.m_axis.NegativeSelf();else{s=this.m_proxyA.GetVertex(e.indexA[0]),l=this.m_proxyA.GetVertex(e.indexA[1]),c=this.m_proxyB.GetVertex(e.indexB[0]),h=this.m_proxyB.GetVertex(e.indexB[1]),rj.MulX(i,a);var x=rj.MulMV(i.R,rj.SubtractVV(l,s));rj.MulX(o,u);var C=rj.MulMV(o.R,rj.SubtractVV(h,c)),I=x.x*x.x+x.y*x.y,E=C.x*C.x+C.y*C.y,w=rj.SubtractVV(C,x),S=x.x*w.x+x.y*w.y,D=C.x*w.x+C.y*w.y,T=x.x*C.x+x.y*C.y,P=I*E-T*T;v=0,0!=P&&(v=rj.Clamp((T*D-S*E)/P,0,1));var B=(T*v+D)/E;B<0&&(B=0,v=rj.Clamp((T-S)/I,0,1)),(a=new nj).x=s.x+v*(l.x-s.x),a.y=s.y+v*(l.y-s.y),(u=new nj).x=c.x+v*(h.x-c.x),u.y=c.y+v*(h.y-c.y),0==v||1==v?(this.m_type=t.e_faceB,this.m_axis=rj.CrossVF(rj.SubtractVV(h,c),1),this.m_axis.Normalize(),this.m_localPoint=u,A=this.m_axis,g=(y=o.R).col1.x*A.x+y.col2.x*A.y,m=y.col1.y*A.x+y.col2.y*A.y,A=this.m_localPoint,y=o.R,f=o.position.x+(y.col1.x*A.x+y.col2.x*A.y),_=o.position.y+(y.col1.y*A.x+y.col2.y*A.y),A=a,y=i.R,p=i.position.x+(y.col1.x*A.x+y.col2.x*A.y),d=i.position.y+(y.col1.y*A.x+y.col2.y*A.y),v<0&&this.m_axis.NegativeSelf()):(this.m_type=t.e_faceA,this.m_axis=rj.CrossVF(rj.SubtractVV(l,s),1),this.m_localPoint=a,A=this.m_axis,g=(y=i.R).col1.x*A.x+y.col2.x*A.y,m=y.col1.y*A.x+y.col2.y*A.y,A=this.m_localPoint,y=i.R,p=i.position.x+(y.col1.x*A.x+y.col2.x*A.y),d=i.position.y+(y.col1.y*A.x+y.col2.y*A.y),A=u,y=o.R,f=o.position.x+(y.col1.x*A.x+y.col2.x*A.y),_=o.position.y+(y.col1.y*A.x+y.col2.y*A.y),v<0&&this.m_axis.NegativeSelf())}},t.prototype.Evaluate=function(e,n){var i,r,o,a,s,l,u;switch(this.m_type){case t.e_points:return i=rj.MulTMV(e.R,this.m_axis),r=rj.MulTMV(n.R,this.m_axis.GetNegative()),o=this.m_proxyA.GetSupportVertex(i),a=this.m_proxyB.GetSupportVertex(r),s=rj.MulX(e,o),((l=rj.MulX(n,a)).x-s.x)*this.m_axis.x+(l.y-s.y)*this.m_axis.y;case t.e_faceA:return u=rj.MulMV(e.R,this.m_axis),s=rj.MulX(e,this.m_localPoint),r=rj.MulTMV(n.R,u.GetNegative()),a=this.m_proxyB.GetSupportVertex(r),((l=rj.MulX(n,a)).x-s.x)*u.x+(l.y-s.y)*u.y;case t.e_faceB:return u=rj.MulMV(n.R,this.m_axis),l=rj.MulX(n,this.m_localPoint),i=rj.MulTMV(e.R,u.GetNegative()),o=this.m_proxyA.GetSupportVertex(i),((s=rj.MulX(e,o)).x-l.x)*u.x+(s.y-l.y)*u.y;default:return KV.b2Assert(!1),0}},t.e_points=1,t.e_faceA=2,t.e_faceB=4,t}(),Pj=function(){function t(){}return t.TimeOfImpact=function(t){++this.b2_toiCalls;var e=t.proxyA,n=t.proxyB,i=t.sweepA,r=t.sweepB;KV.b2Assert(i.t0==r.t0),KV.b2Assert(1-i.t0>Number.MIN_VALUE);var o=e.m_radius+n.m_radius,a=t.tolerance,s=0,l=0,u=0;for(this.s_cache.count=0,this.s_distanceInput.useRadii=!1;;){if(i.GetTransform(this.s_xfA,s),r.GetTransform(this.s_xfB,s),this.s_distanceInput.proxyA=e,this.s_distanceInput.proxyB=n,this.s_distanceInput.transformA=this.s_xfA,this.s_distanceInput.transformB=this.s_xfB,lj.Distance(this.s_distanceOutput,this.s_cache,this.s_distanceInput),this.s_distanceOutput.distance<=0){s=1;break}this.s_fcn.Initialize(this.s_cache,e,this.s_xfA,n,this.s_xfB);var c=this.s_fcn.Evaluate(this.s_xfA,this.s_xfB);if(c<=0){s=1;break}if(0==l&&(u=c>o?rj.Max(o-a,.75*o):rj.Max(c-a,.02*o)),c-u<.5*a){if(0==l){s=1;break}break}var h=s,p=s,d=1,f=c;i.GetTransform(this.s_xfA,d),r.GetTransform(this.s_xfB,d);var _=this.s_fcn.Evaluate(this.s_xfA,this.s_xfB);if(_>=u){s=1;break}for(var g=0;;){var m;m=1&g?p+(u-f)*(d-p)/(_-f):.5*(p+d),i.GetTransform(this.s_xfA,m),r.GetTransform(this.s_xfB,m);var y=this.s_fcn.Evaluate(this.s_xfA,this.s_xfB);if(rj.Abs(y-u)<.025*a){h=m;break}if(y>u?(p=m,f=y):(d=m,_=y),++g,++this.b2_toiRootIters,50==g)break}if(this.b2_toiMaxRootIters=rj.Max(this.b2_toiMaxRootIters,g),h<(1+100*Number.MIN_VALUE)*s)break;if(s=h,l++,++this.b2_toiIters,1e3==l)break}return this.b2_toiMaxIters=rj.Max(this.b2_toiMaxIters,l),s},t.b2_toiCalls=0,t.b2_toiIters=0,t.b2_toiMaxIters=0,t.b2_toiRootIters=0,t.b2_toiMaxRootIters=0,t.s_cache=new JV,t.s_distanceInput=new qV,t.s_xfA=new ej,t.s_xfB=new ej,t.s_fcn=new Tj,t.s_distanceOutput=new oj,t}(),Bj=function(){return function(){this.proxyA=new WV,this.proxyB=new WV,this.sweepA=new tj,this.sweepB=new tj}}(),Oj=function(){function t(){this.m_normal=new nj,this.m_points=new Array(KV.b2_maxManifoldPoints);for(var t=0;t<KV.b2_maxManifoldPoints;t++)this.m_points[t]=new nj}return t.prototype.Initialize=function(t,e,n,i,r){var o,a,s,l,u,c,h,p,d;if(0!=t.m_pointCount)switch(t.m_type){case Aj.e_circles:s=e.R,a=t.m_localPoint;var f=e.position.x+s.col1.x*a.x+s.col2.x*a.y,_=e.position.y+s.col1.y*a.x+s.col2.y*a.y;s=i.R,a=t.m_points[0].m_localPoint;var g=i.position.x+s.col1.x*a.x+s.col2.x*a.y,m=i.position.y+s.col1.y*a.x+s.col2.y*a.y,y=g-f,A=m-_,v=y*y+A*A;if(v>Number.MIN_VALUE*Number.MIN_VALUE){var b=Math.sqrt(v);this.m_normal.x=y/b,this.m_normal.y=A/b}else this.m_normal.x=1,this.m_normal.y=0;var x=f+n*this.m_normal.x,C=_+n*this.m_normal.y,I=g-r*this.m_normal.x,E=m-r*this.m_normal.y;this.m_points[0].x=.5*(x+I),this.m_points[0].y=.5*(C+E);break;case Aj.e_faceA:for(s=e.R,a=t.m_localPlaneNormal,l=s.col1.x*a.x+s.col2.x*a.y,u=s.col1.y*a.x+s.col2.y*a.y,s=e.R,a=t.m_localPoint,c=e.position.x+s.col1.x*a.x+s.col2.x*a.y,h=e.position.y+s.col1.y*a.x+s.col2.y*a.y,this.m_normal.x=l,this.m_normal.y=u,o=0;o<t.m_pointCount;o++)s=i.R,a=t.m_points[o].m_localPoint,p=i.position.x+s.col1.x*a.x+s.col2.x*a.y,d=i.position.y+s.col1.y*a.x+s.col2.y*a.y,this.m_points[o].x=p+.5*(n-(p-c)*l-(d-h)*u-r)*l,this.m_points[o].y=d+.5*(n-(p-c)*l-(d-h)*u-r)*u;break;case Aj.e_faceB:for(s=i.R,a=t.m_localPlaneNormal,l=s.col1.x*a.x+s.col2.x*a.y,u=s.col1.y*a.x+s.col2.y*a.y,s=i.R,a=t.m_localPoint,c=i.position.x+s.col1.x*a.x+s.col2.x*a.y,h=i.position.y+s.col1.y*a.x+s.col2.y*a.y,this.m_normal.x=-l,this.m_normal.y=-u,o=0;o<t.m_pointCount;o++)s=e.R,a=t.m_points[o].m_localPoint,p=e.position.x+s.col1.x*a.x+s.col2.x*a.y,d=e.position.y+s.col1.y*a.x+s.col2.y*a.y,this.m_points[o].x=p+.5*(r-(p-c)*l-(d-h)*u-n)*l,this.m_points[o].y=d+.5*(r-(p-c)*l-(d-h)*u-n)*u}},t}(),Mj=function(){function t(t,e,n){this._r=0,this._g=0,this._b=0,this._r=255*rj.Clamp(t,0,1)>>>0,this._g=255*rj.Clamp(e,0,1)>>>0,this._b=255*rj.Clamp(n,0,1)>>>0}return t.prototype.Set=function(t,e,n){this._r=255*rj.Clamp(t,0,1)>>>0,this._g=255*rj.Clamp(e,0,1)>>>0,this._b=255*rj.Clamp(n,0,1)>>>0},Object.defineProperty(t.prototype,"r",{set:function(t){this._r=255*rj.Clamp(t,0,1)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g",{set:function(t){this._g=255*rj.Clamp(t,0,1)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{set:function(t){this._b=255*rj.Clamp(t,0,1)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._r<<16|this._g<<8|this._b},enumerable:!1,configurable:!0}),t}(),Lj=function(){function t(){this.m_normal=new nj,this.m_separations=new Array(KV.b2_maxManifoldPoints),this.m_points=new Array(KV.b2_maxManifoldPoints);for(var t=0;t<KV.b2_maxManifoldPoints;t++)this.m_points[t]=new nj}return t.prototype.Initialize=function(t){var e,n,i,r,o,a,s;switch(KV.b2Assert(t.pointCount>0),t.type){case Aj.e_circles:r=t.bodyA.m_xf.R,o=t.localPoint;var l=t.bodyA.m_xf.position.x+(r.col1.x*o.x+r.col2.x*o.y),u=t.bodyA.m_xf.position.y+(r.col1.y*o.x+r.col2.y*o.y);r=t.bodyB.m_xf.R,o=t.points[0].localPoint;var c=t.bodyB.m_xf.position.x+(r.col1.x*o.x+r.col2.x*o.y),h=t.bodyB.m_xf.position.y+(r.col1.y*o.x+r.col2.y*o.y),p=c-l,d=h-u,f=p*p+d*d;if(f>Number.MIN_VALUE*Number.MIN_VALUE){var _=Math.sqrt(f);this.m_normal.x=p/_,this.m_normal.y=d/_}else this.m_normal.x=1,this.m_normal.y=0;this.m_points[0].x=.5*(l+c),this.m_points[0].y=.5*(u+h),this.m_separations[0]=p*this.m_normal.x+d*this.m_normal.y-t.radius;break;case Aj.e_faceA:for(r=t.bodyA.m_xf.R,o=t.localPlaneNormal,this.m_normal.x=r.col1.x*o.x+r.col2.x*o.y,this.m_normal.y=r.col1.y*o.x+r.col2.y*o.y,r=t.bodyA.m_xf.R,o=t.localPoint,a=t.bodyA.m_xf.position.x+(r.col1.x*o.x+r.col2.x*o.y),s=t.bodyA.m_xf.position.y+(r.col1.y*o.x+r.col2.y*o.y),r=t.bodyB.m_xf.R,e=0;e<t.pointCount;++e)o=t.points[e].localPoint,n=t.bodyB.m_xf.position.x+(r.col1.x*o.x+r.col2.x*o.y),i=t.bodyB.m_xf.position.y+(r.col1.y*o.x+r.col2.y*o.y),this.m_separations[e]=(n-a)*this.m_normal.x+(i-s)*this.m_normal.y-t.radius,this.m_points[e].x=n,this.m_points[e].y=i;break;case Aj.e_faceB:for(r=t.bodyB.m_xf.R,o=t.localPlaneNormal,this.m_normal.x=r.col1.x*o.x+r.col2.x*o.y,this.m_normal.y=r.col1.y*o.x+r.col2.y*o.y,r=t.bodyB.m_xf.R,o=t.localPoint,a=t.bodyB.m_xf.position.x+(r.col1.x*o.x+r.col2.x*o.y),s=t.bodyB.m_xf.position.y+(r.col1.y*o.x+r.col2.y*o.y),r=t.bodyA.m_xf.R,e=0;e<t.pointCount;++e)o=t.points[e].localPoint,n=t.bodyA.m_xf.position.x+(r.col1.x*o.x+r.col2.x*o.y),i=t.bodyA.m_xf.position.y+(r.col1.y*o.x+r.col2.y*o.y),this.m_separations[e]=(n-a)*this.m_normal.x+(i-s)*this.m_normal.y-t.radius,this.m_points[e].Set(n,i);this.m_normal.x*=-1,this.m_normal.y*=-1}},t.circlePointA=new nj,t.circlePointB=new nj,t}(),Rj=function(){return function(){this.__fast__=!0,this.position=new nj,this.linearVelocity=new nj,this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.Set(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.type=mG.b2_staticBody,this.active=!0,this.inertiaScale=1}}(),Nj=function(){function t(){this.__fast__=!0,this.categoryBits=1,this.maskBits=65535,this.groupIndex=0}return t.prototype.Copy=function(){var e=new t;return e.categoryBits=this.categoryBits,e.maskBits=this.maskBits,e.groupIndex=this.groupIndex,e},t}(),Fj=function(){function t(){this.__fast__=!0,this.m_filter=new Nj,this.m_aabb=new fj,this.m_userData=null,this.m_body=null,this.m_next=null,this.m_shape=null,this.m_density=0,this.m_friction=0,this.m_restitution=0}return t.prototype.GetType=function(){return this.m_shape.GetType()},t.prototype.GetShape=function(){return this.m_shape},t.prototype.SetSensor=function(t){if(this.m_isSensor!=t&&(this.m_isSensor=t,null!=this.m_body))for(var e=this.m_body.GetContactList();e;){var n=e.contact,i=n.GetFixtureA(),r=n.GetFixtureB();i!=this&&r!=this||n.SetSensor(i.IsSensor()||r.IsSensor()),e=e.next}},t.prototype.IsSensor=function(){return this.m_isSensor},t.prototype.SetFilterData=function(t){if(this.m_filter=t.Copy(),!this.m_body)for(var e=this.m_body.GetContactList();e;){var n=e.contact,i=n.GetFixtureA(),r=n.GetFixtureB();i!=this&&r!=this||n.FlagForFiltering(),e=e.next}},t.prototype.GetFilterData=function(){return this.m_filter.Copy()},t.prototype.GetBody=function(){return this.m_body},t.prototype.GetNext=function(){return this.m_next},t.prototype.GetUserData=function(){return this.m_userData},t.prototype.SetUserData=function(t){this.m_userData=t},t.prototype.TestPoint=function(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)},t.prototype.RayCast=function(t,e){return this.m_shape.RayCast(t,e,this.m_body.GetTransform())},t.prototype.GetMassData=function(t){return void 0===t&&(t=null),null==t&&(t=new pj),this.m_shape.ComputeMass(t,this.m_density),t},t.prototype.SetDensity=function(t){this.m_density=t},t.prototype.GetDensity=function(){return this.m_density},t.prototype.GetFriction=function(){return this.m_friction},t.prototype.SetFriction=function(t){this.m_friction=t},t.prototype.GetRestitution=function(){return this.m_restitution},t.prototype.SetRestitution=function(t){this.m_restitution=t},t.prototype.GetAABB=function(){return this.m_aabb},t.prototype.Create=function(t,e,n){this.m_userData=n.userData,this.m_friction=n.friction,this.m_restitution=n.restitution,this.m_body=t,this.m_next=null,this.m_filter=n.filter.Copy(),this.m_isSensor=n.isSensor,this.m_shape=n.shape.Copy(),this.m_density=n.density},t.prototype.Destroy=function(){this.m_shape=null},t.prototype.CreateProxy=function(t,e){this.m_shape.ComputeAABB(this.m_aabb,e),this.m_proxy=t.CreateProxy(this.m_aabb,this)},t.prototype.DestroyProxy=function(t){null!=this.m_proxy&&(t.DestroyProxy(this.m_proxy),this.m_proxy=null)},t.prototype.Synchronize=function(t,e,n){if(this.m_proxy){var i=new fj,r=new fj;this.m_shape.ComputeAABB(i,e),this.m_shape.ComputeAABB(r,n),this.m_aabb.Combine(i,r);var o=rj.SubtractVV(n.position,e.position);t.MoveProxy(this.m_proxy,this.m_aabb,o)}},t}(),kj=function(){return function(){this.__fast__=!0,this.filter=new Nj,this.shape=null,this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1}}(),Uj=function(){return function(){this.__fast__=!0,this.normalImpulses=new Array(KV.b2_maxManifoldPoints),this.tangentImpulses=new Array(KV.b2_maxManifoldPoints)}}(),Vj=function(){function t(){this.__fast__=!0,this.m_bodies=Array(),this.m_contacts=Array(),this.m_joints=Array()}return t.prototype.Initialize=function(t,e,n,i,r,o){var a;for(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=n,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=i,this.m_listener=r,this.m_contactSolver=o,a=this.m_bodies.length;a<t;a++)this.m_bodies[a]=null;for(a=this.m_contacts.length;a<e;a++)this.m_contacts[a]=null;for(a=this.m_joints.length;a<n;a++)this.m_joints[a]=null},t.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},t.prototype.Solve=function(t,e,n){var i,r,o;for(i=0;i<this.m_bodyCount;++i)(o=this.m_bodies[i]).GetType()==mG.b2_dynamicBody&&(o.m_linearVelocity.x+=t.dt*(e.x+o.m_invMass*o.m_force.x),o.m_linearVelocity.y+=t.dt*(e.y+o.m_invMass*o.m_force.y),o.m_angularVelocity+=t.dt*o.m_invI*o.m_torque,o.m_linearVelocity.Multiply(rj.Clamp(1-t.dt*o.m_linearDamping,0,1)),o.m_angularVelocity*=rj.Clamp(1-t.dt*o.m_angularDamping,0,1));this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var a=this.m_contactSolver;for(a.InitVelocityConstraints(t),i=0;i<this.m_jointCount;++i)this.m_joints[i].InitVelocityConstraints(t);for(i=0;i<t.velocityIterations;++i){for(r=0;r<this.m_jointCount;++r)this.m_joints[r].SolveVelocityConstraints(t);a.SolveVelocityConstraints()}for(i=0;i<this.m_jointCount;++i)this.m_joints[i].FinalizeVelocityConstraints();for(a.FinalizeVelocityConstraints(),i=0;i<this.m_bodyCount;++i)if((o=this.m_bodies[i]).GetType()!=mG.b2_staticBody){var s=t.dt*o.m_linearVelocity.x,l=t.dt*o.m_linearVelocity.y;s*s+l*l>KV.b2_maxTranslationSquared&&(o.m_linearVelocity.Normalize(),o.m_linearVelocity.x*=KV.b2_maxTranslation*t.inv_dt,o.m_linearVelocity.y*=KV.b2_maxTranslation*t.inv_dt);var u=t.dt*o.m_angularVelocity;u*u>KV.b2_maxRotationSquared&&(o.m_angularVelocity<0?o.m_angularVelocity=-KV.b2_maxRotation*t.inv_dt:o.m_angularVelocity=KV.b2_maxRotation*t.inv_dt),o.m_sweep.c0.SetV(o.m_sweep.c),o.m_sweep.a0=o.m_sweep.a,o.m_sweep.c.x+=t.dt*o.m_linearVelocity.x,o.m_sweep.c.y+=t.dt*o.m_linearVelocity.y,o.m_sweep.a+=t.dt*o.m_angularVelocity,o.SynchronizeTransform()}for(i=0;i<t.positionIterations;++i){var c=a.SolvePositionConstraints(KV.b2_contactBaumgarte),h=!0;for(r=0;r<this.m_jointCount;++r){var p=this.m_joints[r].SolvePositionConstraints(KV.b2_contactBaumgarte);h=h&&p}if(c&&h)break}if(this.Report(a.m_constraints),n){var d=Number.MAX_VALUE,f=KV.b2_linearSleepTolerance*KV.b2_linearSleepTolerance,_=KV.b2_angularSleepTolerance*KV.b2_angularSleepTolerance;for(i=0;i<this.m_bodyCount;++i)(o=this.m_bodies[i]).GetType()!=mG.b2_staticBody&&(o.m_flags&mG.e_allowSleepFlag||(o.m_sleepTime=0,d=0),!(o.m_flags&mG.e_allowSleepFlag)||o.m_angularVelocity*o.m_angularVelocity>_||rj.Dot(o.m_linearVelocity,o.m_linearVelocity)>f?(o.m_sleepTime=0,d=0):(o.m_sleepTime+=t.dt,d=rj.Min(d,o.m_sleepTime)));if(d>=KV.b2_timeToSleep)for(i=0;i<this.m_bodyCount;++i)(o=this.m_bodies[i]).SetAwake(!1)}},t.prototype.SolveTOI=function(t){var e,n;this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var i=this.m_contactSolver;for(e=0;e<this.m_jointCount;++e)this.m_joints[e].InitVelocityConstraints(t);for(e=0;e<t.velocityIterations;++e)for(i.SolveVelocityConstraints(),n=0;n<this.m_jointCount;++n)this.m_joints[n].SolveVelocityConstraints(t);for(e=0;e<this.m_bodyCount;++e){var r=this.m_bodies[e];if(r.GetType()!=mG.b2_staticBody){var o=t.dt*r.m_linearVelocity.x,a=t.dt*r.m_linearVelocity.y;o*o+a*a>KV.b2_maxTranslationSquared&&(r.m_linearVelocity.Normalize(),r.m_linearVelocity.x*=KV.b2_maxTranslation*t.inv_dt,r.m_linearVelocity.y*=KV.b2_maxTranslation*t.inv_dt);var s=t.dt*r.m_angularVelocity;s*s>KV.b2_maxRotationSquared&&(r.m_angularVelocity<0?r.m_angularVelocity=-KV.b2_maxRotation*t.inv_dt:r.m_angularVelocity=KV.b2_maxRotation*t.inv_dt),r.m_sweep.c0.SetV(r.m_sweep.c),r.m_sweep.a0=r.m_sweep.a,r.m_sweep.c.x+=t.dt*r.m_linearVelocity.x,r.m_sweep.c.y+=t.dt*r.m_linearVelocity.y,r.m_sweep.a+=t.dt*r.m_angularVelocity,r.SynchronizeTransform()}}for(e=0;e<t.positionIterations;++e){var l=i.SolvePositionConstraints(.75),u=!0;for(n=0;n<this.m_jointCount;++n){var c=this.m_joints[n].SolvePositionConstraints(KV.b2_contactBaumgarte);u=u&&c}if(l&&u)break}this.Report(i.m_constraints)},t.prototype.Report=function(e){if(null!=this.m_listener)for(var n=0;n<this.m_contactCount;++n){for(var i=this.m_contacts[n],r=e[n],o=0;o<r.pointCount;++o)t.s_impulse.normalImpulses[o]=r.points[o].normalImpulse,t.s_impulse.tangentImpulses[o]=r.points[o].tangentImpulse;this.m_listener.PostSolve(i,t.s_impulse)}},t.prototype.AddBody=function(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},t.prototype.AddContact=function(t){this.m_contacts[this.m_contactCount++]=t},t.prototype.AddJoint=function(t){this.m_joints[this.m_jointCount++]=t},t.s_impulse=new Uj,t}(),jj=function(){function t(t){this.m_edgeA=new Wj,this.m_edgeB=new Wj,this.m_localCenterA=new nj,this.m_localCenterB=new nj,KV.b2Assert(t.bodyA!=t.bodyB),this.m_type=t.type,this.m_prev=null,this.m_next=null,this.m_bodyA=t.bodyA,this.m_bodyB=t.bodyB,this.m_collideConnected=t.collideConnected,this.m_islandFlag=!1,this.m_userData=t.userData}return t.prototype.GetType=function(){return this.m_type},t.prototype.GetAnchorA=function(){return null},t.prototype.GetAnchorB=function(){return null},t.prototype.GetReactionForce=function(t){return null},t.prototype.GetReactionTorque=function(t){return 0},t.prototype.GetBodyA=function(){return this.m_bodyA},t.prototype.GetBodyB=function(){return this.m_bodyB},t.prototype.GetNext=function(){return this.m_next},t.prototype.GetUserData=function(){return this.m_userData},t.prototype.SetUserData=function(t){this.m_userData=t},t.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},t.Create=function(e,n){var i=null;switch(e.type){case t.e_distanceJoint:i=new Qj(e);break;case t.e_mouseJoint:i=new $j(e);break;case t.e_prismaticJoint:i=new eG(e);break;case t.e_revoluteJoint:i=new oG(e);break;case t.e_pulleyJoint:i=new iG(e);break;case t.e_gearJoint:i=new Yj(e);break;case t.e_lineJoint:i=new Jj(e);break;case t.e_weldJoint:i=new sG(e);break;case t.e_frictionJoint:i=new Hj(e)}return i},t.Destroy=function(t,e){},t.prototype.InitVelocityConstraints=function(t){},t.prototype.SolveVelocityConstraints=function(t){},t.prototype.FinalizeVelocityConstraints=function(){},t.prototype.SolvePositionConstraints=function(t){return!1},t.e_unknownJoint=0,t.e_revoluteJoint=1,t.e_prismaticJoint=2,t.e_distanceJoint=3,t.e_pulleyJoint=4,t.e_mouseJoint=5,t.e_gearJoint=6,t.e_lineJoint=7,t.e_weldJoint=8,t.e_frictionJoint=9,t.e_inactiveLimit=0,t.e_atLowerLimit=1,t.e_atUpperLimit=2,t.e_equalLimits=3,t}(),Gj=function(){return function(){this.type=jj.e_unknownJoint,this.userData=null,this.bodyA=null,this.bodyB=null,this.collideConnected=!1}}(),Qj=function(t){function e(e){var n=t.call(this,e)||this;return n.m_localAnchor1=new nj,n.m_localAnchor2=new nj,n.m_u=new nj,n.m_localAnchor1.SetV(e.localAnchorA),n.m_localAnchor2.SetV(e.localAnchorB),n.m_length=e.length,n.m_frequencyHz=e.frequencyHz,n.m_dampingRatio=e.dampingRatio,n.m_impulse=0,n.m_gamma=0,n.m_bias=0,n}return o(e,t),e.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},e.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},e.prototype.GetReactionForce=function(t){return new nj(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)},e.prototype.GetReactionTorque=function(t){return 0},e.prototype.GetLength=function(){return this.m_length},e.prototype.SetLength=function(t){this.m_length=t},e.prototype.GetFrequency=function(){return this.m_frequencyHz},e.prototype.SetFrequency=function(t){this.m_frequencyHz=t},e.prototype.GetDampingRatio=function(){return this.m_dampingRatio},e.prototype.SetDampingRatio=function(t){this.m_dampingRatio=t},e.prototype.InitVelocityConstraints=function(t){var e,n,i=this.m_bodyA,r=this.m_bodyB;e=i.m_xf.R;var o=this.m_localAnchor1.x-i.m_sweep.localCenter.x,a=this.m_localAnchor1.y-i.m_sweep.localCenter.y;n=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=n,e=r.m_xf.R;var s=this.m_localAnchor2.x-r.m_sweep.localCenter.x,l=this.m_localAnchor2.y-r.m_sweep.localCenter.y;n=e.col1.x*s+e.col2.x*l,l=e.col1.y*s+e.col2.y*l,s=n,this.m_u.x=r.m_sweep.c.x+s-i.m_sweep.c.x-o,this.m_u.y=r.m_sweep.c.y+l-i.m_sweep.c.y-a;var u=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);u>KV.b2_linearSlop?this.m_u.Multiply(1/u):this.m_u.SetZero();var c=o*this.m_u.y-a*this.m_u.x,h=s*this.m_u.y-l*this.m_u.x,p=i.m_invMass+i.m_invI*c*c+r.m_invMass+r.m_invI*h*h;if(this.m_mass=0!=p?1/p:0,this.m_frequencyHz>0){var d=u-this.m_length,f=2*Math.PI*this.m_frequencyHz,_=2*this.m_mass*this.m_dampingRatio*f,g=this.m_mass*f*f;this.m_gamma=t.dt*(_+t.dt*g),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=d*t.dt*g*this.m_gamma,this.m_mass=p+this.m_gamma,this.m_mass=0!=this.m_mass?1/this.m_mass:0}if(t.warmStarting){this.m_impulse*=t.dtRatio;var m=this.m_impulse*this.m_u.x,y=this.m_impulse*this.m_u.y;i.m_linearVelocity.x-=i.m_invMass*m,i.m_linearVelocity.y-=i.m_invMass*y,i.m_angularVelocity-=i.m_invI*(o*y-a*m),r.m_linearVelocity.x+=r.m_invMass*m,r.m_linearVelocity.y+=r.m_invMass*y,r.m_angularVelocity+=r.m_invI*(s*y-l*m)}else this.m_impulse=0},e.prototype.SolveVelocityConstraints=function(t){var e,n=this.m_bodyA,i=this.m_bodyB;e=n.m_xf.R;var r=this.m_localAnchor1.x-n.m_sweep.localCenter.x,o=this.m_localAnchor1.y-n.m_sweep.localCenter.y,a=e.col1.x*r+e.col2.x*o;o=e.col1.y*r+e.col2.y*o,r=a,e=i.m_xf.R;var s=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y;a=e.col1.x*s+e.col2.x*l,l=e.col1.y*s+e.col2.y*l,s=a;var u=n.m_linearVelocity.x+-n.m_angularVelocity*o,c=n.m_linearVelocity.y+n.m_angularVelocity*r,h=i.m_linearVelocity.x+-i.m_angularVelocity*l,p=i.m_linearVelocity.y+i.m_angularVelocity*s,d=this.m_u.x*(h-u)+this.m_u.y*(p-c),f=-this.m_mass*(d+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=f;var _=f*this.m_u.x,g=f*this.m_u.y;n.m_linearVelocity.x-=n.m_invMass*_,n.m_linearVelocity.y-=n.m_invMass*g,n.m_angularVelocity-=n.m_invI*(r*g-o*_),i.m_linearVelocity.x+=i.m_invMass*_,i.m_linearVelocity.y+=i.m_invMass*g,i.m_angularVelocity+=i.m_invI*(s*g-l*_)},e.prototype.SolvePositionConstraints=function(t){var e;if(this.m_frequencyHz>0)return!0;var n=this.m_bodyA,i=this.m_bodyB;e=n.m_xf.R;var r=this.m_localAnchor1.x-n.m_sweep.localCenter.x,o=this.m_localAnchor1.y-n.m_sweep.localCenter.y,a=e.col1.x*r+e.col2.x*o;o=e.col1.y*r+e.col2.y*o,r=a,e=i.m_xf.R;var s=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y;a=e.col1.x*s+e.col2.x*l,l=e.col1.y*s+e.col2.y*l,s=a;var u=i.m_sweep.c.x+s-n.m_sweep.c.x-r,c=i.m_sweep.c.y+l-n.m_sweep.c.y-o,h=Math.sqrt(u*u+c*c);u/=h,c/=h;var p=h-this.m_length;p=rj.Clamp(p,-KV.b2_maxLinearCorrection,KV.b2_maxLinearCorrection);var d=-this.m_mass*p;this.m_u.Set(u,c);var f=d*this.m_u.x,_=d*this.m_u.y;return n.m_sweep.c.x-=n.m_invMass*f,n.m_sweep.c.y-=n.m_invMass*_,n.m_sweep.a-=n.m_invI*(r*_-o*f),i.m_sweep.c.x+=i.m_invMass*f,i.m_sweep.c.y+=i.m_invMass*_,i.m_sweep.a+=i.m_invI*(s*_-l*f),n.SynchronizeTransform(),i.SynchronizeTransform(),rj.Abs(p)<KV.b2_linearSlop},e}(jj),zj=function(t){function e(){var e=t.call(this)||this;return e.localAnchorA=new nj,e.localAnchorB=new nj,e.type=jj.e_distanceJoint,e.length=1,e.frequencyHz=0,e.dampingRatio=0,e}return o(e,t),e.prototype.Initialize=function(t,e,n,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i));var r=i.x-n.x,o=i.y-n.y;length=Math.sqrt(r*r+o*o),this.frequencyHz=0,this.dampingRatio=0},e}(Gj),Hj=function(t){function e(e){var n=t.call(this,e)||this;return n.m_localAnchorA=new nj,n.m_localAnchorB=new nj,n.m_linearMass=new ZV,n.m_linearImpulse=new nj,n.m_localAnchorA.SetV(e.localAnchorA),n.m_localAnchorB.SetV(e.localAnchorB),n.m_linearMass.SetZero(),n.m_angularMass=0,n.m_linearImpulse.SetZero(),n.m_angularImpulse=0,n.m_maxForce=e.maxForce,n.m_maxTorque=e.maxTorque,n}return o(e,t),e.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},e.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},e.prototype.GetReactionForce=function(t){return new nj(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)},e.prototype.GetReactionTorque=function(t){return t*this.m_angularImpulse},e.prototype.SetMaxForce=function(t){this.m_maxForce=t},e.prototype.GetMaxForce=function(){return this.m_maxForce},e.prototype.SetMaxTorque=function(t){this.m_maxTorque=t},e.prototype.GetMaxTorque=function(){return this.m_maxTorque},e.prototype.InitVelocityConstraints=function(t){var e,n,i=this.m_bodyA,r=this.m_bodyB;e=i.m_xf.R;var o=this.m_localAnchorA.x-i.m_sweep.localCenter.x,a=this.m_localAnchorA.y-i.m_sweep.localCenter.y;n=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=n,e=r.m_xf.R;var s=this.m_localAnchorB.x-r.m_sweep.localCenter.x,l=this.m_localAnchorB.y-r.m_sweep.localCenter.y;n=e.col1.x*s+e.col2.x*l,l=e.col1.y*s+e.col2.y*l,s=n;var u=i.m_invMass,c=r.m_invMass,h=i.m_invI,p=r.m_invI,d=new ZV;if(d.col1.x=u+c,d.col2.x=0,d.col1.y=0,d.col2.y=u+c,d.col1.x+=h*a*a,d.col2.x+=-h*o*a,d.col1.y+=-h*o*a,d.col2.y+=h*o*o,d.col1.x+=p*l*l,d.col2.x+=-p*s*l,d.col1.y+=-p*s*l,d.col2.y+=p*s*s,d.GetInverse(this.m_linearMass),this.m_angularMass=h+p,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.x*=t.dtRatio,this.m_linearImpulse.y*=t.dtRatio,this.m_angularImpulse*=t.dtRatio;var f=this.m_linearImpulse;i.m_linearVelocity.x-=u*f.x,i.m_linearVelocity.y-=u*f.y,i.m_angularVelocity-=h*(o*f.y-a*f.x+this.m_angularImpulse),r.m_linearVelocity.x+=c*f.x,r.m_linearVelocity.y+=c*f.y,r.m_angularVelocity+=p*(s*f.y-l*f.x+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0},e.prototype.SolveVelocityConstraints=function(t){var e,n,i=this.m_bodyA,r=this.m_bodyB,o=i.m_linearVelocity,a=i.m_angularVelocity,s=r.m_linearVelocity,l=r.m_angularVelocity,u=i.m_invMass,c=r.m_invMass,h=i.m_invI,p=r.m_invI;e=i.m_xf.R;var d=this.m_localAnchorA.x-i.m_sweep.localCenter.x,f=this.m_localAnchorA.y-i.m_sweep.localCenter.y;n=e.col1.x*d+e.col2.x*f,f=e.col1.y*d+e.col2.y*f,d=n,e=r.m_xf.R;var _,g=this.m_localAnchorB.x-r.m_sweep.localCenter.x,m=this.m_localAnchorB.y-r.m_sweep.localCenter.y;n=e.col1.x*g+e.col2.x*m,m=e.col1.y*g+e.col2.y*m,g=n;var y=l-a,A=-this.m_angularMass*y,v=this.m_angularImpulse;_=t.dt*this.m_maxTorque,this.m_angularImpulse=rj.Clamp(this.m_angularImpulse+A,-_,_),a-=h*(A=this.m_angularImpulse-v),l+=p*A;var b=s.x-l*m-o.x+a*f,x=s.y+l*g-o.y-a*d,C=rj.MulMV(this.m_linearMass,new nj(-b,-x)),I=this.m_linearImpulse.Copy();this.m_linearImpulse.Add(C),_=t.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>_*_&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(_)),C=rj.SubtractVV(this.m_linearImpulse,I),o.x-=u*C.x,o.y-=u*C.y,a-=h*(d*C.y-f*C.x),s.x+=c*C.x,s.y+=c*C.y,l+=p*(g*C.y-m*C.x),i.m_angularVelocity=a,r.m_angularVelocity=l},e.prototype.SolvePositionConstraints=function(t){return!0},e}(jj),Xj=function(t){function e(){var e=t.call(this)||this;return e.localAnchorA=new nj,e.localAnchorB=new nj,e.type=jj.e_frictionJoint,e.maxForce=0,e.maxTorque=0,e}return o(e,t),e.prototype.Initialize=function(t,e,n){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n))},e}(Gj),Yj=function(t){function e(e){var n=t.call(this,e)||this;n.m_groundAnchor1=new nj,n.m_groundAnchor2=new nj,n.m_localAnchor1=new nj,n.m_localAnchor2=new nj,n.m_J=new Kj;var i,r,o=e.joint1.m_type,a=e.joint2.m_type;return n.m_revolute1=null,n.m_prismatic1=null,n.m_revolute2=null,n.m_prismatic2=null,n.m_ground1=e.joint1.GetBodyA(),n.m_bodyA=e.joint1.GetBodyB(),o==jj.e_revoluteJoint?(n.m_revolute1=e.joint1,n.m_groundAnchor1.SetV(n.m_revolute1.m_localAnchor1),n.m_localAnchor1.SetV(n.m_revolute1.m_localAnchor2),i=n.m_revolute1.GetJointAngle()):(n.m_prismatic1=e.joint1,n.m_groundAnchor1.SetV(n.m_prismatic1.m_localAnchor1),n.m_localAnchor1.SetV(n.m_prismatic1.m_localAnchor2),i=n.m_prismatic1.GetJointTranslation()),n.m_ground2=e.joint2.GetBodyA(),n.m_bodyB=e.joint2.GetBodyB(),a==jj.e_revoluteJoint?(n.m_revolute2=e.joint2,n.m_groundAnchor2.SetV(n.m_revolute2.m_localAnchor1),n.m_localAnchor2.SetV(n.m_revolute2.m_localAnchor2),r=n.m_revolute2.GetJointAngle()):(n.m_prismatic2=e.joint2,n.m_groundAnchor2.SetV(n.m_prismatic2.m_localAnchor1),n.m_localAnchor2.SetV(n.m_prismatic2.m_localAnchor2),r=n.m_prismatic2.GetJointTranslation()),n.m_ratio=e.ratio,n.m_constant=i+n.m_ratio*r,n.m_impulse=0,n}return o(e,t),e.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},e.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},e.prototype.GetReactionForce=function(t){return new nj(t*this.m_impulse*this.m_J.linearB.x,t*this.m_impulse*this.m_J.linearB.y)},e.prototype.GetReactionTorque=function(t){var e=this.m_bodyB.m_xf.R,n=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,i=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,r=e.col1.x*n+e.col2.x*i;i=e.col1.y*n+e.col2.y*i,n=r;var o=this.m_impulse*this.m_J.linearB.x,a=this.m_impulse*this.m_J.linearB.y;return t*(this.m_impulse*this.m_J.angularB-n*a+i*o)},e.prototype.GetRatio=function(){return this.m_ratio},e.prototype.SetRatio=function(t){this.m_ratio=t},e.prototype.InitVelocityConstraints=function(t){var e,n,i,r,o,a,s,l,u=this.m_ground1,c=this.m_ground2,h=this.m_bodyA,p=this.m_bodyB,d=0;this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,d+=h.m_invI):(o=u.m_xf.R,a=this.m_prismatic1.m_localXAxis1,e=o.col1.x*a.x+o.col2.x*a.y,n=o.col1.y*a.x+o.col2.y*a.y,o=h.m_xf.R,i=this.m_localAnchor1.x-h.m_sweep.localCenter.x,r=this.m_localAnchor1.y-h.m_sweep.localCenter.y,l=o.col1.x*i+o.col2.x*r,r=o.col1.y*i+o.col2.y*r,s=(i=l)*n-r*e,this.m_J.linearA.Set(-e,-n),this.m_J.angularA=-s,d+=h.m_invMass+h.m_invI*s*s),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,d+=this.m_ratio*this.m_ratio*p.m_invI):(o=c.m_xf.R,a=this.m_prismatic2.m_localXAxis1,e=o.col1.x*a.x+o.col2.x*a.y,n=o.col1.y*a.x+o.col2.y*a.y,o=p.m_xf.R,i=this.m_localAnchor2.x-p.m_sweep.localCenter.x,r=this.m_localAnchor2.y-p.m_sweep.localCenter.y,l=o.col1.x*i+o.col2.x*r,r=o.col1.y*i+o.col2.y*r,s=(i=l)*n-r*e,this.m_J.linearB.Set(-this.m_ratio*e,-this.m_ratio*n),this.m_J.angularB=-this.m_ratio*s,d+=this.m_ratio*this.m_ratio*(p.m_invMass+p.m_invI*s*s)),this.m_mass=d>0?1/d:0,t.warmStarting?(h.m_linearVelocity.x+=h.m_invMass*this.m_impulse*this.m_J.linearA.x,h.m_linearVelocity.y+=h.m_invMass*this.m_impulse*this.m_J.linearA.y,h.m_angularVelocity+=h.m_invI*this.m_impulse*this.m_J.angularA,p.m_linearVelocity.x+=p.m_invMass*this.m_impulse*this.m_J.linearB.x,p.m_linearVelocity.y+=p.m_invMass*this.m_impulse*this.m_J.linearB.y,p.m_angularVelocity+=p.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},e.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,n=this.m_bodyB,i=this.m_J.Compute(e.m_linearVelocity,e.m_angularVelocity,n.m_linearVelocity,n.m_angularVelocity),r=-this.m_mass*i;this.m_impulse+=r,e.m_linearVelocity.x+=e.m_invMass*r*this.m_J.linearA.x,e.m_linearVelocity.y+=e.m_invMass*r*this.m_J.linearA.y,e.m_angularVelocity+=e.m_invI*r*this.m_J.angularA,n.m_linearVelocity.x+=n.m_invMass*r*this.m_J.linearB.x,n.m_linearVelocity.y+=n.m_invMass*r*this.m_J.linearB.y,n.m_angularVelocity+=n.m_invI*r*this.m_J.angularB},e.prototype.SolvePositionConstraints=function(t){var e,n,i=this.m_bodyA,r=this.m_bodyB;e=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation(),n=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation();var o=this.m_constant-(e+this.m_ratio*n),a=-this.m_mass*o;return i.m_sweep.c.x+=i.m_invMass*a*this.m_J.linearA.x,i.m_sweep.c.y+=i.m_invMass*a*this.m_J.linearA.y,i.m_sweep.a+=i.m_invI*a*this.m_J.angularA,r.m_sweep.c.x+=r.m_invMass*a*this.m_J.linearB.x,r.m_sweep.c.y+=r.m_invMass*a*this.m_J.linearB.y,r.m_sweep.a+=r.m_invI*a*this.m_J.angularB,i.SynchronizeTransform(),r.SynchronizeTransform(),0<KV.b2_linearSlop},e}(jj),qj=function(t){function e(){var e=t.call(this)||this;return e.type=jj.e_gearJoint,e.joint1=null,e.joint2=null,e.ratio=1,e}return o(e,t),e}(Gj),Kj=function(){function t(){this.linearA=new nj,this.linearB=new nj}return t.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},t.prototype.Set=function(t,e,n,i){this.linearA.SetV(t),this.angularA=e,this.linearB.SetV(n),this.angularB=i},t.prototype.Compute=function(t,e,n,i){return this.linearA.x*t.x+this.linearA.y*t.y+this.angularA*e+(this.linearB.x*n.x+this.linearB.y*n.y)+this.angularB*i},t}(),Wj=function(){return function(){}}(),Jj=function(t){function e(e){var n=t.call(this,e)||this;return n.m_localAnchor1=new nj,n.m_localAnchor2=new nj,n.m_localXAxis1=new nj,n.m_localYAxis1=new nj,n.m_axis=new nj,n.m_perp=new nj,n.m_K=new ZV,n.m_impulse=new nj,n.m_localAnchor1.SetV(e.localAnchorA),n.m_localAnchor2.SetV(e.localAnchorB),n.m_localXAxis1.SetV(e.localAxisA),n.m_localYAxis1.x=-n.m_localXAxis1.y,n.m_localYAxis1.y=n.m_localXAxis1.x,n.m_impulse.SetZero(),n.m_motorMass=0,n.m_motorImpulse=0,n.m_lowerTranslation=e.lowerTranslation,n.m_upperTranslation=e.upperTranslation,n.m_maxMotorForce=e.maxMotorForce,n.m_motorSpeed=e.motorSpeed,n.m_enableLimit=e.enableLimit,n.m_enableMotor=e.enableMotor,n.m_limitState=jj.e_inactiveLimit,n.m_axis.SetZero(),n.m_perp.SetZero(),n}return o(e,t),e.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},e.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},e.prototype.GetReactionForce=function(t){return new nj(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},e.prototype.GetReactionTorque=function(t){return t*this.m_impulse.y},e.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,n=t.GetWorldPoint(this.m_localAnchor1),i=e.GetWorldPoint(this.m_localAnchor2),r=i.x-n.x,o=i.y-n.y,a=t.GetWorldVector(this.m_localXAxis1);return a.x*r+a.y*o},e.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,n=this.m_bodyB;t=e.m_xf.R;var i=this.m_localAnchor1.x-e.m_sweep.localCenter.x,r=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*i+t.col2.x*r;r=t.col1.y*i+t.col2.y*r,i=o,t=n.m_xf.R;var a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,s=this.m_localAnchor2.y-n.m_sweep.localCenter.y;o=t.col1.x*a+t.col2.x*s,s=t.col1.y*a+t.col2.y*s,a=o;var l=e.m_sweep.c.x+i,u=e.m_sweep.c.y+r,c=n.m_sweep.c.x+a-l,h=n.m_sweep.c.y+s-u,p=e.GetWorldVector(this.m_localXAxis1),d=e.m_linearVelocity,f=n.m_linearVelocity,_=e.m_angularVelocity,g=n.m_angularVelocity;return c*(-_*p.y)+h*(_*p.x)+(p.x*(f.x+-g*s-d.x- -_*r)+p.y*(f.y+g*a-d.y-_*i))},e.prototype.IsLimitEnabled=function(){return this.m_enableLimit},e.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},e.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},e.prototype.GetUpperLimit=function(){return this.m_upperTranslation},e.prototype.SetLimits=function(t,e){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},e.prototype.IsMotorEnabled=function(){return this.m_enableMotor},e.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},e.prototype.SetMotorSpeed=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},e.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},e.prototype.SetMaxMotorForce=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},e.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},e.prototype.GetMotorForce=function(){return this.m_motorImpulse},e.prototype.InitVelocityConstraints=function(t){var e,n,i=this.m_bodyA,r=this.m_bodyB;this.m_localCenterA.SetV(i.GetLocalCenter()),this.m_localCenterB.SetV(r.GetLocalCenter());var o=i.GetTransform();r.GetTransform(),e=i.m_xf.R;var a=this.m_localAnchor1.x-this.m_localCenterA.x,s=this.m_localAnchor1.y-this.m_localCenterA.y;n=e.col1.x*a+e.col2.x*s,s=e.col1.y*a+e.col2.y*s,a=n,e=r.m_xf.R;var l=this.m_localAnchor2.x-this.m_localCenterB.x,u=this.m_localAnchor2.y-this.m_localCenterB.y;n=e.col1.x*l+e.col2.x*u,u=e.col1.y*l+e.col2.y*u,l=n;var c=r.m_sweep.c.x+l-i.m_sweep.c.x-a,h=r.m_sweep.c.y+u-i.m_sweep.c.y-s;this.m_invMassA=i.m_invMass,this.m_invMassB=r.m_invMass,this.m_invIA=i.m_invI,this.m_invIB=r.m_invI,this.m_axis.SetV(rj.MulMV(o.R,this.m_localXAxis1)),this.m_a1=(c+a)*this.m_axis.y-(h+s)*this.m_axis.x,this.m_a2=l*this.m_axis.y-u*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.SetV(rj.MulMV(o.R,this.m_localYAxis1)),this.m_s1=(c+a)*this.m_perp.y-(h+s)*this.m_perp.x,this.m_s2=l*this.m_perp.y-u*this.m_perp.x;var p=this.m_invMassA,d=this.m_invMassB,f=this.m_invIA,_=this.m_invIB;if(this.m_K.col1.x=p+d+f*this.m_s1*this.m_s1+_*this.m_s2*this.m_s2,this.m_K.col1.y=f*this.m_s1*this.m_a1+_*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=p+d+f*this.m_a1*this.m_a1+_*this.m_a2*this.m_a2,this.m_enableLimit){var g=this.m_axis.x*c+this.m_axis.y*h;rj.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*KV.b2_linearSlop?this.m_limitState=jj.e_equalLimits:g<=this.m_lowerTranslation?this.m_limitState!=jj.e_atLowerLimit&&(this.m_limitState=jj.e_atLowerLimit,this.m_impulse.y=0):g>=this.m_upperTranslation?this.m_limitState!=jj.e_atUpperLimit&&(this.m_limitState=jj.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=jj.e_inactiveLimit,this.m_impulse.y=0)}else this.m_limitState=jj.e_inactiveLimit;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var m=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,y=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,A=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,v=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2;i.m_linearVelocity.x-=this.m_invMassA*m,i.m_linearVelocity.y-=this.m_invMassA*y,i.m_angularVelocity-=this.m_invIA*A,r.m_linearVelocity.x+=this.m_invMassB*m,r.m_linearVelocity.y+=this.m_invMassB*y,r.m_angularVelocity+=this.m_invIB*v}else this.m_impulse.SetZero(),this.m_motorImpulse=0},e.prototype.SolveVelocityConstraints=function(t){var e,n,i,r,o=this.m_bodyA,a=this.m_bodyB,s=o.m_linearVelocity,l=o.m_angularVelocity,u=a.m_linearVelocity,c=a.m_angularVelocity;if(this.m_enableMotor&&this.m_limitState!=jj.e_equalLimits){var h=this.m_axis.x*(u.x-s.x)+this.m_axis.y*(u.y-s.y)+this.m_a2*c-this.m_a1*l,p=this.m_motorMass*(this.m_motorSpeed-h),d=this.m_motorImpulse,f=t.dt*this.m_maxMotorForce;this.m_motorImpulse=rj.Clamp(this.m_motorImpulse+p,-f,f),e=(p=this.m_motorImpulse-d)*this.m_axis.x,n=p*this.m_axis.y,i=p*this.m_a1,r=p*this.m_a2,s.x-=this.m_invMassA*e,s.y-=this.m_invMassA*n,l-=this.m_invIA*i,u.x+=this.m_invMassB*e,u.y+=this.m_invMassB*n,c+=this.m_invIB*r}var _=this.m_perp.x*(u.x-s.x)+this.m_perp.y*(u.y-s.y)+this.m_s2*c-this.m_s1*l;if(this.m_enableLimit&&this.m_limitState!=jj.e_inactiveLimit){var g=this.m_axis.x*(u.x-s.x)+this.m_axis.y*(u.y-s.y)+this.m_a2*c-this.m_a1*l,m=this.m_impulse.Copy(),y=this.m_K.Solve(new nj,-_,-g);this.m_impulse.Add(y),this.m_limitState==jj.e_atLowerLimit?this.m_impulse.y=rj.Max(this.m_impulse.y,0):this.m_limitState==jj.e_atUpperLimit&&(this.m_impulse.y=rj.Min(this.m_impulse.y,0));var A=-_-(this.m_impulse.y-m.y)*this.m_K.col2.x,v=void 0;v=0!=this.m_K.col1.x?A/this.m_K.col1.x+m.x:m.x,this.m_impulse.x=v,y.x=this.m_impulse.x-m.x,y.y=this.m_impulse.y-m.y,e=y.x*this.m_perp.x+y.y*this.m_axis.x,n=y.x*this.m_perp.y+y.y*this.m_axis.y,i=y.x*this.m_s1+y.y*this.m_a1,r=y.x*this.m_s2+y.y*this.m_a2,s.x-=this.m_invMassA*e,s.y-=this.m_invMassA*n,l-=this.m_invIA*i,u.x+=this.m_invMassB*e,u.y+=this.m_invMassB*n,c+=this.m_invIB*r}else{var b=void 0;b=0!=this.m_K.col1.x?-_/this.m_K.col1.x:0,this.m_impulse.x+=b,e=b*this.m_perp.x,n=b*this.m_perp.y,i=b*this.m_s1,r=b*this.m_s2,s.x-=this.m_invMassA*e,s.y-=this.m_invMassA*n,l-=this.m_invIA*i,u.x+=this.m_invMassB*e,u.y+=this.m_invMassB*n,c+=this.m_invIB*r}o.m_linearVelocity.SetV(s),o.m_angularVelocity=l,a.m_linearVelocity.SetV(u),a.m_angularVelocity=c},e.prototype.SolvePositionConstraints=function(t){var e,n,i,r,o,a,s=this.m_bodyA,l=this.m_bodyB,u=s.m_sweep.c,c=s.m_sweep.a,h=l.m_sweep.c,p=l.m_sweep.a,d=0,f=!1,_=0,g=ZV.FromAngle(c),m=ZV.FromAngle(p);e=g;var y=this.m_localAnchor1.x-this.m_localCenterA.x,A=this.m_localAnchor1.y-this.m_localCenterA.y;n=e.col1.x*y+e.col2.x*A,A=e.col1.y*y+e.col2.y*A,y=n,e=m;var v=this.m_localAnchor2.x-this.m_localCenterB.x,b=this.m_localAnchor2.y-this.m_localCenterB.y;n=e.col1.x*v+e.col2.x*b,b=e.col1.y*v+e.col2.y*b,v=n;var x=h.x+v-u.x-y,C=h.y+b-u.y-A;if(this.m_enableLimit){this.m_axis=rj.MulMV(g,this.m_localXAxis1),this.m_a1=(x+y)*this.m_axis.y-(C+A)*this.m_axis.x,this.m_a2=v*this.m_axis.y-b*this.m_axis.x;var I=this.m_axis.x*x+this.m_axis.y*C;rj.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*KV.b2_linearSlop?(_=rj.Clamp(I,-KV.b2_maxLinearCorrection,KV.b2_maxLinearCorrection),d=rj.Abs(I),f=!0):I<=this.m_lowerTranslation?(_=rj.Clamp(I-this.m_lowerTranslation+KV.b2_linearSlop,-KV.b2_maxLinearCorrection,0),d=this.m_lowerTranslation-I,f=!0):I>=this.m_upperTranslation&&(_=rj.Clamp(I-this.m_upperTranslation+KV.b2_linearSlop,0,KV.b2_maxLinearCorrection),d=I-this.m_upperTranslation,f=!0)}this.m_perp=rj.MulMV(g,this.m_localYAxis1),this.m_s1=(x+y)*this.m_perp.y-(C+A)*this.m_perp.x,this.m_s2=v*this.m_perp.y-b*this.m_perp.x;var E=new nj,w=this.m_perp.x*x+this.m_perp.y*C;if(d=rj.Max(d,rj.Abs(w)),0,f)i=this.m_invMassA,r=this.m_invMassB,o=this.m_invIA,a=this.m_invIB,this.m_K.col1.x=i+r+o*this.m_s1*this.m_s1+a*this.m_s2*this.m_s2,this.m_K.col1.y=o*this.m_s1*this.m_a1+a*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=i+r+o*this.m_a1*this.m_a1+a*this.m_a2*this.m_a2,this.m_K.Solve(E,-w,-_);else{i=this.m_invMassA,r=this.m_invMassB,o=this.m_invIA,a=this.m_invIB;var S=i+r+o*this.m_s1*this.m_s1+a*this.m_s2*this.m_s2,D=void 0;D=0!=S?-w/S:0,E.x=D,E.y=0}var T=E.x*this.m_perp.x+E.y*this.m_axis.x,P=E.x*this.m_perp.y+E.y*this.m_axis.y,B=E.x*this.m_s1+E.y*this.m_a1,O=E.x*this.m_s2+E.y*this.m_a2;return u.x-=this.m_invMassA*T,u.y-=this.m_invMassA*P,c-=this.m_invIA*B,h.x+=this.m_invMassB*T,h.y+=this.m_invMassB*P,p+=this.m_invIB*O,s.m_sweep.a=c,l.m_sweep.a=p,s.SynchronizeTransform(),l.SynchronizeTransform(),d<=KV.b2_linearSlop&&0<=KV.b2_angularSlop},e}(jj),Zj=function(t){function e(){var e=t.call(this)||this;return e.localAnchorA=new nj,e.localAnchorB=new nj,e.localAxisA=new nj,e.type=jj.e_lineJoint,e.localAxisA.Set(1,0),e.enableLimit=!1,e.lowerTranslation=0,e.upperTranslation=0,e.enableMotor=!1,e.maxMotorForce=0,e.motorSpeed=0,e}return o(e,t),e.prototype.Initialize=function(t,e,n,i){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.localAxisA=this.bodyA.GetLocalVector(i)},e}(Gj),$j=function(t){function e(e){var n=t.call(this,e)||this;n.K=new ZV,n.K1=new ZV,n.K2=new ZV,n.m_localAnchor=new nj,n.m_target=new nj,n.m_impulse=new nj,n.m_mass=new ZV,n.m_C=new nj,n.m_target.SetV(e.target);var i=n.m_target.x-n.m_bodyB.m_xf.position.x,r=n.m_target.y-n.m_bodyB.m_xf.position.y,o=n.m_bodyB.m_xf.R;return n.m_localAnchor.x=i*o.col1.x+r*o.col1.y,n.m_localAnchor.y=i*o.col2.x+r*o.col2.y,n.m_maxForce=e.maxForce,n.m_impulse.SetZero(),n.m_frequencyHz=e.frequencyHz,n.m_dampingRatio=e.dampingRatio,n.m_beta=0,n.m_gamma=0,n}return o(e,t),e.prototype.GetAnchorA=function(){return this.m_target},e.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},e.prototype.GetReactionForce=function(t){return new nj(t*this.m_impulse.x,t*this.m_impulse.y)},e.prototype.GetReactionTorque=function(t){return 0},e.prototype.GetTarget=function(){return this.m_target},e.prototype.SetTarget=function(t){0==this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0),this.m_target=t},e.prototype.GetMaxForce=function(){return this.m_maxForce},e.prototype.SetMaxForce=function(t){this.m_maxForce=t},e.prototype.GetFrequency=function(){return this.m_frequencyHz},e.prototype.SetFrequency=function(t){this.m_frequencyHz=t},e.prototype.GetDampingRatio=function(){return this.m_dampingRatio},e.prototype.SetDampingRatio=function(t){this.m_dampingRatio=t},e.prototype.InitVelocityConstraints=function(t){var e,n=this.m_bodyB,i=n.GetMass(),r=2*Math.PI*this.m_frequencyHz,o=2*i*this.m_dampingRatio*r,a=i*r*r;this.m_gamma=t.dt*(o+t.dt*a),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_beta=t.dt*a*this.m_gamma,e=n.m_xf.R;var s=this.m_localAnchor.x-n.m_sweep.localCenter.x,l=this.m_localAnchor.y-n.m_sweep.localCenter.y,u=e.col1.x*s+e.col2.x*l;l=e.col1.y*s+e.col2.y*l,s=u;var c=n.m_invMass,h=n.m_invI;this.K1.col1.x=c,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=c,this.K2.col1.x=h*l*l,this.K2.col2.x=-h*s*l,this.K2.col1.y=-h*s*l,this.K2.col2.y=h*s*s,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=n.m_sweep.c.x+s-this.m_target.x,this.m_C.y=n.m_sweep.c.y+l-this.m_target.y,n.m_angularVelocity*=.98,this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,n.m_linearVelocity.x+=c*this.m_impulse.x,n.m_linearVelocity.y+=c*this.m_impulse.y,n.m_angularVelocity+=h*(s*this.m_impulse.y-l*this.m_impulse.x)},e.prototype.SolveVelocityConstraints=function(t){var e,n,i,r=this.m_bodyB;e=r.m_xf.R;var o=this.m_localAnchor.x-r.m_sweep.localCenter.x,a=this.m_localAnchor.y-r.m_sweep.localCenter.y;n=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=n;var s=r.m_linearVelocity.x+-r.m_angularVelocity*a,l=r.m_linearVelocity.y+r.m_angularVelocity*o;e=this.m_mass,n=s+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,i=l+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y;var u=-(e.col1.x*n+e.col2.x*i),c=-(e.col1.y*n+e.col2.y*i),h=this.m_impulse.x,p=this.m_impulse.y;this.m_impulse.x+=u,this.m_impulse.y+=c;var d=t.dt*this.m_maxForce;this.m_impulse.LengthSquared()>d*d&&this.m_impulse.Multiply(d/this.m_impulse.Length()),u=this.m_impulse.x-h,c=this.m_impulse.y-p,r.m_linearVelocity.x+=r.m_invMass*u,r.m_linearVelocity.y+=r.m_invMass*c,r.m_angularVelocity+=r.m_invI*(o*c-a*u)},e.prototype.SolvePositionConstraints=function(t){return!0},e}(jj),tG=function(t){function e(){var e=t.call(this)||this;return e.target=new nj,e.type=jj.e_mouseJoint,e.maxForce=0,e.frequencyHz=5,e.dampingRatio=.7,e}return o(e,t),e}(Gj),eG=function(t){function e(e){var n=t.call(this,e)||this;return n.m_localAnchor1=new nj,n.m_localAnchor2=new nj,n.m_localXAxis1=new nj,n.m_localYAxis1=new nj,n.m_axis=new nj,n.m_perp=new nj,n.m_K=new $V,n.m_impulse=new ij,n.m_localAnchor1.SetV(e.localAnchorA),n.m_localAnchor2.SetV(e.localAnchorB),n.m_localXAxis1.SetV(e.localAxisA),n.m_localYAxis1.x=-n.m_localXAxis1.y,n.m_localYAxis1.y=n.m_localXAxis1.x,n.m_refAngle=e.referenceAngle,n.m_impulse.SetZero(),n.m_motorMass=0,n.m_motorImpulse=0,n.m_lowerTranslation=e.lowerTranslation,n.m_upperTranslation=e.upperTranslation,n.m_maxMotorForce=e.maxMotorForce,n.m_motorSpeed=e.motorSpeed,n.m_enableLimit=e.enableLimit,n.m_enableMotor=e.enableMotor,n.m_limitState=jj.e_inactiveLimit,n.m_axis.SetZero(),n.m_perp.SetZero(),n}return o(e,t),e.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},e.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},e.prototype.GetReactionForce=function(t){return new nj(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},e.prototype.GetReactionTorque=function(t){return t*this.m_impulse.y},e.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,n=t.GetWorldPoint(this.m_localAnchor1),i=e.GetWorldPoint(this.m_localAnchor2),r=i.x-n.x,o=i.y-n.y,a=t.GetWorldVector(this.m_localXAxis1);return a.x*r+a.y*o},e.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,n=this.m_bodyB;t=e.m_xf.R;var i=this.m_localAnchor1.x-e.m_sweep.localCenter.x,r=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*i+t.col2.x*r;r=t.col1.y*i+t.col2.y*r,i=o,t=n.m_xf.R;var a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,s=this.m_localAnchor2.y-n.m_sweep.localCenter.y;o=t.col1.x*a+t.col2.x*s,s=t.col1.y*a+t.col2.y*s,a=o;var l=e.m_sweep.c.x+i,u=e.m_sweep.c.y+r,c=n.m_sweep.c.x+a-l,h=n.m_sweep.c.y+s-u,p=e.GetWorldVector(this.m_localXAxis1),d=e.m_linearVelocity,f=n.m_linearVelocity,_=e.m_angularVelocity,g=n.m_angularVelocity;return c*(-_*p.y)+h*(_*p.x)+(p.x*(f.x+-g*s-d.x- -_*r)+p.y*(f.y+g*a-d.y-_*i))},e.prototype.IsLimitEnabled=function(){return this.m_enableLimit},e.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},e.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},e.prototype.GetUpperLimit=function(){return this.m_upperTranslation},e.prototype.SetLimits=function(t,e){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},e.prototype.IsMotorEnabled=function(){return this.m_enableMotor},e.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},e.prototype.SetMotorSpeed=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},e.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},e.prototype.SetMaxMotorForce=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},e.prototype.GetMotorForce=function(){return this.m_motorImpulse},e.prototype.InitVelocityConstraints=function(t){var e,n,i=this.m_bodyA,r=this.m_bodyB;this.m_localCenterA.SetV(i.GetLocalCenter()),this.m_localCenterB.SetV(r.GetLocalCenter());var o=i.GetTransform();r.GetTransform(),e=i.m_xf.R;var a=this.m_localAnchor1.x-this.m_localCenterA.x,s=this.m_localAnchor1.y-this.m_localCenterA.y;n=e.col1.x*a+e.col2.x*s,s=e.col1.y*a+e.col2.y*s,a=n,e=r.m_xf.R;var l=this.m_localAnchor2.x-this.m_localCenterB.x,u=this.m_localAnchor2.y-this.m_localCenterB.y;n=e.col1.x*l+e.col2.x*u,u=e.col1.y*l+e.col2.y*u,l=n;var c=r.m_sweep.c.x+l-i.m_sweep.c.x-a,h=r.m_sweep.c.y+u-i.m_sweep.c.y-s;this.m_invMassA=i.m_invMass,this.m_invMassB=r.m_invMass,this.m_invIA=i.m_invI,this.m_invIB=r.m_invI,this.m_axis.SetV(rj.MulMV(o.R,this.m_localXAxis1)),this.m_a1=(c+a)*this.m_axis.y-(h+s)*this.m_axis.x,this.m_a2=l*this.m_axis.y-u*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(rj.MulMV(o.R,this.m_localYAxis1)),this.m_s1=(c+a)*this.m_perp.y-(h+s)*this.m_perp.x,this.m_s2=l*this.m_perp.y-u*this.m_perp.x;var p=this.m_invMassA,d=this.m_invMassB,f=this.m_invIA,_=this.m_invIB;if(this.m_K.col1.x=p+d+f*this.m_s1*this.m_s1+_*this.m_s2*this.m_s2,this.m_K.col1.y=f*this.m_s1+_*this.m_s2,this.m_K.col1.z=f*this.m_s1*this.m_a1+_*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=f+_,this.m_K.col2.z=f*this.m_a1+_*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=p+d+f*this.m_a1*this.m_a1+_*this.m_a2*this.m_a2,this.m_enableLimit){var g=this.m_axis.x*c+this.m_axis.y*h;rj.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*KV.b2_linearSlop?this.m_limitState=jj.e_equalLimits:g<=this.m_lowerTranslation?this.m_limitState!=jj.e_atLowerLimit&&(this.m_limitState=jj.e_atLowerLimit,this.m_impulse.z=0):g>=this.m_upperTranslation?this.m_limitState!=jj.e_atUpperLimit&&(this.m_limitState=jj.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=jj.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=jj.e_inactiveLimit;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var m=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,y=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,A=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,v=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;i.m_linearVelocity.x-=this.m_invMassA*m,i.m_linearVelocity.y-=this.m_invMassA*y,i.m_angularVelocity-=this.m_invIA*A,r.m_linearVelocity.x+=this.m_invMassB*m,r.m_linearVelocity.y+=this.m_invMassB*y,r.m_angularVelocity+=this.m_invIB*v}else this.m_impulse.SetZero(),this.m_motorImpulse=0},e.prototype.SolveVelocityConstraints=function(t){var e,n,i,r,o=this.m_bodyA,a=this.m_bodyB,s=o.m_linearVelocity,l=o.m_angularVelocity,u=a.m_linearVelocity,c=a.m_angularVelocity;if(this.m_enableMotor&&this.m_limitState!=jj.e_equalLimits){var h=this.m_axis.x*(u.x-s.x)+this.m_axis.y*(u.y-s.y)+this.m_a2*c-this.m_a1*l,p=this.m_motorMass*(this.m_motorSpeed-h),d=this.m_motorImpulse,f=t.dt*this.m_maxMotorForce;this.m_motorImpulse=rj.Clamp(this.m_motorImpulse+p,-f,f),e=(p=this.m_motorImpulse-d)*this.m_axis.x,n=p*this.m_axis.y,i=p*this.m_a1,r=p*this.m_a2,s.x-=this.m_invMassA*e,s.y-=this.m_invMassA*n,l-=this.m_invIA*i,u.x+=this.m_invMassB*e,u.y+=this.m_invMassB*n,c+=this.m_invIB*r}var _=this.m_perp.x*(u.x-s.x)+this.m_perp.y*(u.y-s.y)+this.m_s2*c-this.m_s1*l,g=c-l;if(this.m_enableLimit&&this.m_limitState!=jj.e_inactiveLimit){var m=this.m_axis.x*(u.x-s.x)+this.m_axis.y*(u.y-s.y)+this.m_a2*c-this.m_a1*l,y=this.m_impulse.Copy(),A=this.m_K.Solve33(new ij,-_,-g,-m);this.m_impulse.Add(A),this.m_limitState==jj.e_atLowerLimit?this.m_impulse.z=rj.Max(this.m_impulse.z,0):this.m_limitState==jj.e_atUpperLimit&&(this.m_impulse.z=rj.Min(this.m_impulse.z,0));var v=-_-(this.m_impulse.z-y.z)*this.m_K.col3.x,b=-g-(this.m_impulse.z-y.z)*this.m_K.col3.y,x=this.m_K.Solve22(new nj,v,b);x.x+=y.x,x.y+=y.y,this.m_impulse.x=x.x,this.m_impulse.y=x.y,A.x=this.m_impulse.x-y.x,A.y=this.m_impulse.y-y.y,A.z=this.m_impulse.z-y.z,e=A.x*this.m_perp.x+A.z*this.m_axis.x,n=A.x*this.m_perp.y+A.z*this.m_axis.y,i=A.x*this.m_s1+A.y+A.z*this.m_a1,r=A.x*this.m_s2+A.y+A.z*this.m_a2,s.x-=this.m_invMassA*e,s.y-=this.m_invMassA*n,l-=this.m_invIA*i,u.x+=this.m_invMassB*e,u.y+=this.m_invMassB*n,c+=this.m_invIB*r}else{var C=this.m_K.Solve22(new nj,-_,-g);this.m_impulse.x+=C.x,this.m_impulse.y+=C.y,e=C.x*this.m_perp.x,n=C.x*this.m_perp.y,i=C.x*this.m_s1+C.y,r=C.x*this.m_s2+C.y,s.x-=this.m_invMassA*e,s.y-=this.m_invMassA*n,l-=this.m_invIA*i,u.x+=this.m_invMassB*e,u.y+=this.m_invMassB*n,c+=this.m_invIB*r}o.m_linearVelocity.SetV(s),o.m_angularVelocity=l,a.m_linearVelocity.SetV(u),a.m_angularVelocity=c},e.prototype.SolvePositionConstraints=function(t){var e,n,i,r,o,a,s,l=this.m_bodyA,u=this.m_bodyB,c=l.m_sweep.c,h=l.m_sweep.a,p=u.m_sweep.c,d=u.m_sweep.a,f=0,_=!1,g=0,m=ZV.FromAngle(h),y=ZV.FromAngle(d);e=m;var A=this.m_localAnchor1.x-this.m_localCenterA.x,v=this.m_localAnchor1.y-this.m_localCenterA.y;n=e.col1.x*A+e.col2.x*v,v=e.col1.y*A+e.col2.y*v,A=n,e=y;var b=this.m_localAnchor2.x-this.m_localCenterB.x,x=this.m_localAnchor2.y-this.m_localCenterB.y;n=e.col1.x*b+e.col2.x*x,x=e.col1.y*b+e.col2.y*x,b=n;var C=p.x+b-c.x-A,I=p.y+x-c.y-v;if(this.m_enableLimit){this.m_axis=rj.MulMV(m,this.m_localXAxis1),this.m_a1=(C+A)*this.m_axis.y-(I+v)*this.m_axis.x,this.m_a2=b*this.m_axis.y-x*this.m_axis.x;var E=this.m_axis.x*C+this.m_axis.y*I;rj.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*KV.b2_linearSlop?(g=rj.Clamp(E,-KV.b2_maxLinearCorrection,KV.b2_maxLinearCorrection),f=rj.Abs(E),_=!0):E<=this.m_lowerTranslation?(g=rj.Clamp(E-this.m_lowerTranslation+KV.b2_linearSlop,-KV.b2_maxLinearCorrection,0),f=this.m_lowerTranslation-E,_=!0):E>=this.m_upperTranslation&&(g=rj.Clamp(E-this.m_upperTranslation+KV.b2_linearSlop,0,KV.b2_maxLinearCorrection),f=E-this.m_upperTranslation,_=!0)}this.m_perp=rj.MulMV(m,this.m_localYAxis1),this.m_s1=(C+A)*this.m_perp.y-(I+v)*this.m_perp.x,this.m_s2=b*this.m_perp.y-x*this.m_perp.x;var w=new ij,S=this.m_perp.x*C+this.m_perp.y*I,D=d-h-this.m_refAngle;if(f=rj.Max(f,rj.Abs(S)),s=rj.Abs(D),_)i=this.m_invMassA,r=this.m_invMassB,o=this.m_invIA,a=this.m_invIB,this.m_K.col1.x=i+r+o*this.m_s1*this.m_s1+a*this.m_s2*this.m_s2,this.m_K.col1.y=o*this.m_s1+a*this.m_s2,this.m_K.col1.z=o*this.m_s1*this.m_a1+a*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=o+a,this.m_K.col2.z=o*this.m_a1+a*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=i+r+o*this.m_a1*this.m_a1+a*this.m_a2*this.m_a2,this.m_K.Solve33(w,-S,-D,-g);else{i=this.m_invMassA,r=this.m_invMassB,o=this.m_invIA,a=this.m_invIB;var T=i+r+o*this.m_s1*this.m_s1+a*this.m_s2*this.m_s2,P=o*this.m_s1+a*this.m_s2,B=o+a;this.m_K.col1.Set(T,P,0),this.m_K.col2.Set(P,B,0);var O=this.m_K.Solve22(new nj,-S,-D);w.x=O.x,w.y=O.y,w.z=0}var M=w.x*this.m_perp.x+w.z*this.m_axis.x,L=w.x*this.m_perp.y+w.z*this.m_axis.y,R=w.x*this.m_s1+w.y+w.z*this.m_a1,N=w.x*this.m_s2+w.y+w.z*this.m_a2;return c.x-=this.m_invMassA*M,c.y-=this.m_invMassA*L,h-=this.m_invIA*R,p.x+=this.m_invMassB*M,p.y+=this.m_invMassB*L,d+=this.m_invIB*N,l.m_sweep.a=h,u.m_sweep.a=d,l.SynchronizeTransform(),u.SynchronizeTransform(),f<=KV.b2_linearSlop&&s<=KV.b2_angularSlop},e}(jj),nG=function(t){function e(){var e=t.call(this)||this;return e.localAnchorA=new nj,e.localAnchorB=new nj,e.localAxisA=new nj,e.type=jj.e_prismaticJoint,e.localAxisA.Set(1,0),e.referenceAngle=0,e.enableLimit=!1,e.lowerTranslation=0,e.upperTranslation=0,e.enableMotor=!1,e.maxMotorForce=0,e.motorSpeed=0,e}return o(e,t),e.prototype.Initialize=function(t,e,n,i){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.localAxisA=this.bodyA.GetLocalVector(i),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},e}(Gj),iG=function(t){function e(n){var i=t.call(this,n)||this;return i.m_groundAnchor1=new nj,i.m_groundAnchor2=new nj,i.m_localAnchor1=new nj,i.m_localAnchor2=new nj,i.m_u1=new nj,i.m_u2=new nj,i.m_ground=i.m_bodyA.m_world.m_groundBody,i.m_groundAnchor1.x=n.groundAnchorA.x-i.m_ground.m_xf.position.x,i.m_groundAnchor1.y=n.groundAnchorA.y-i.m_ground.m_xf.position.y,i.m_groundAnchor2.x=n.groundAnchorB.x-i.m_ground.m_xf.position.x,i.m_groundAnchor2.y=n.groundAnchorB.y-i.m_ground.m_xf.position.y,i.m_localAnchor1.SetV(n.localAnchorA),i.m_localAnchor2.SetV(n.localAnchorB),i.m_ratio=n.ratio,i.m_constant=n.lengthA+i.m_ratio*n.lengthB,i.m_maxLength1=rj.Min(n.maxLengthA,i.m_constant-i.m_ratio*e.b2_minPulleyLength),i.m_maxLength2=rj.Min(n.maxLengthB,(i.m_constant-e.b2_minPulleyLength)/i.m_ratio),i.m_impulse=0,i.m_limitImpulse1=0,i.m_limitImpulse2=0,i}return o(e,t),e.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},e.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},e.prototype.GetReactionForce=function(t){return new nj(t*this.m_impulse*this.m_u2.x,t*this.m_impulse*this.m_u2.y)},e.prototype.GetReactionTorque=function(t){return 0},e.prototype.GetGroundAnchorA=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor1),t},e.prototype.GetGroundAnchorB=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor2),t},e.prototype.GetLength1=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),e=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,n=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,i=t.x-e,r=t.y-n;return Math.sqrt(i*i+r*r)},e.prototype.GetLength2=function(){var t=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),e=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,n=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,i=t.x-e,r=t.y-n;return Math.sqrt(i*i+r*r)},e.prototype.GetRatio=function(){return this.m_ratio},e.prototype.InitVelocityConstraints=function(t){var e,n=this.m_bodyA,i=this.m_bodyB;e=n.m_xf.R;var r=this.m_localAnchor1.x-n.m_sweep.localCenter.x,o=this.m_localAnchor1.y-n.m_sweep.localCenter.y,a=e.col1.x*r+e.col2.x*o;o=e.col1.y*r+e.col2.y*o,r=a,e=i.m_xf.R;var s=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y;a=e.col1.x*s+e.col2.x*l,l=e.col1.y*s+e.col2.y*l,s=a;var u=n.m_sweep.c.x+r,c=n.m_sweep.c.y+o,h=i.m_sweep.c.x+s,p=i.m_sweep.c.y+l,d=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,f=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,_=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,g=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(u-d,c-f),this.m_u2.Set(h-_,p-g);var m=this.m_u1.Length(),y=this.m_u2.Length();m>KV.b2_linearSlop?this.m_u1.Multiply(1/m):this.m_u1.SetZero(),y>KV.b2_linearSlop?this.m_u2.Multiply(1/y):this.m_u2.SetZero(),this.m_constant-m-this.m_ratio*y>0?(this.m_state=jj.e_inactiveLimit,this.m_impulse=0):this.m_state=jj.e_atUpperLimit,m<this.m_maxLength1?(this.m_limitState1=jj.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=jj.e_atUpperLimit,y<this.m_maxLength2?(this.m_limitState2=jj.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=jj.e_atUpperLimit;var A=r*this.m_u1.y-o*this.m_u1.x,v=s*this.m_u2.y-l*this.m_u2.x;if(this.m_limitMass1=n.m_invMass+n.m_invI*A*A,this.m_limitMass2=i.m_invMass+i.m_invI*v*v,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass,t.warmStarting){this.m_impulse*=t.dtRatio,this.m_limitImpulse1*=t.dtRatio,this.m_limitImpulse2*=t.dtRatio;var b=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,x=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,C=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,I=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y;n.m_linearVelocity.x+=n.m_invMass*b,n.m_linearVelocity.y+=n.m_invMass*x,n.m_angularVelocity+=n.m_invI*(r*x-o*b),i.m_linearVelocity.x+=i.m_invMass*C,i.m_linearVelocity.y+=i.m_invMass*I,i.m_angularVelocity+=i.m_invI*(s*I-l*C)}else this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},e.prototype.SolveVelocityConstraints=function(t){var e,n=this.m_bodyA,i=this.m_bodyB;e=n.m_xf.R;var r=this.m_localAnchor1.x-n.m_sweep.localCenter.x,o=this.m_localAnchor1.y-n.m_sweep.localCenter.y,a=e.col1.x*r+e.col2.x*o;o=e.col1.y*r+e.col2.y*o,r=a,e=i.m_xf.R;var s,l,u,c,h,p,d,f,_,g,m,y=this.m_localAnchor2.x-i.m_sweep.localCenter.x,A=this.m_localAnchor2.y-i.m_sweep.localCenter.y;a=e.col1.x*y+e.col2.x*A,A=e.col1.y*y+e.col2.y*A,y=a,this.m_state==jj.e_atUpperLimit&&(s=n.m_linearVelocity.x+-n.m_angularVelocity*o,l=n.m_linearVelocity.y+n.m_angularVelocity*r,u=i.m_linearVelocity.x+-i.m_angularVelocity*A,c=i.m_linearVelocity.y+i.m_angularVelocity*y,_=-(this.m_u1.x*s+this.m_u1.y*l)-this.m_ratio*(this.m_u2.x*u+this.m_u2.y*c),g=this.m_pulleyMass*-_,m=this.m_impulse,this.m_impulse=rj.Max(0,this.m_impulse+g),h=-(g=this.m_impulse-m)*this.m_u1.x,p=-g*this.m_u1.y,d=-this.m_ratio*g*this.m_u2.x,f=-this.m_ratio*g*this.m_u2.y,n.m_linearVelocity.x+=n.m_invMass*h,n.m_linearVelocity.y+=n.m_invMass*p,n.m_angularVelocity+=n.m_invI*(r*p-o*h),i.m_linearVelocity.x+=i.m_invMass*d,i.m_linearVelocity.y+=i.m_invMass*f,i.m_angularVelocity+=i.m_invI*(y*f-A*d)),this.m_limitState1==jj.e_atUpperLimit&&(s=n.m_linearVelocity.x+-n.m_angularVelocity*o,l=n.m_linearVelocity.y+n.m_angularVelocity*r,_=-(this.m_u1.x*s+this.m_u1.y*l),g=-this.m_limitMass1*_,m=this.m_limitImpulse1,this.m_limitImpulse1=rj.Max(0,this.m_limitImpulse1+g),h=-(g=this.m_limitImpulse1-m)*this.m_u1.x,p=-g*this.m_u1.y,n.m_linearVelocity.x+=n.m_invMass*h,n.m_linearVelocity.y+=n.m_invMass*p,n.m_angularVelocity+=n.m_invI*(r*p-o*h)),this.m_limitState2==jj.e_atUpperLimit&&(u=i.m_linearVelocity.x+-i.m_angularVelocity*A,c=i.m_linearVelocity.y+i.m_angularVelocity*y,_=-(this.m_u2.x*u+this.m_u2.y*c),g=-this.m_limitMass2*_,m=this.m_limitImpulse2,this.m_limitImpulse2=rj.Max(0,this.m_limitImpulse2+g),d=-(g=this.m_limitImpulse2-m)*this.m_u2.x,f=-g*this.m_u2.y,i.m_linearVelocity.x+=i.m_invMass*d,i.m_linearVelocity.y+=i.m_invMass*f,i.m_angularVelocity+=i.m_invI*(y*f-A*d))},e.prototype.SolvePositionConstraints=function(t){var e,n,i,r,o,a,s,l,u,c,h,p,d,f,_=this.m_bodyA,g=this.m_bodyB,m=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,y=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,A=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,v=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,b=0;return this.m_state==jj.e_atUpperLimit&&(e=_.m_xf.R,n=this.m_localAnchor1.x-_.m_sweep.localCenter.x,i=this.m_localAnchor1.y-_.m_sweep.localCenter.y,f=e.col1.x*n+e.col2.x*i,i=e.col1.y*n+e.col2.y*i,n=f,e=g.m_xf.R,r=this.m_localAnchor2.x-g.m_sweep.localCenter.x,o=this.m_localAnchor2.y-g.m_sweep.localCenter.y,f=e.col1.x*r+e.col2.x*o,o=e.col1.y*r+e.col2.y*o,r=f,a=_.m_sweep.c.x+n,s=_.m_sweep.c.y+i,l=g.m_sweep.c.x+r,u=g.m_sweep.c.y+o,this.m_u1.Set(a-m,s-y),this.m_u2.Set(l-A,u-v),c=this.m_u1.Length(),h=this.m_u2.Length(),c>KV.b2_linearSlop?this.m_u1.Multiply(1/c):this.m_u1.SetZero(),h>KV.b2_linearSlop?this.m_u2.Multiply(1/h):this.m_u2.SetZero(),p=this.m_constant-c-this.m_ratio*h,b=rj.Max(b,-p),p=rj.Clamp(p+KV.b2_linearSlop,-KV.b2_maxLinearCorrection,0),a=-(d=-this.m_pulleyMass*p)*this.m_u1.x,s=-d*this.m_u1.y,l=-this.m_ratio*d*this.m_u2.x,u=-this.m_ratio*d*this.m_u2.y,_.m_sweep.c.x+=_.m_invMass*a,_.m_sweep.c.y+=_.m_invMass*s,_.m_sweep.a+=_.m_invI*(n*s-i*a),g.m_sweep.c.x+=g.m_invMass*l,g.m_sweep.c.y+=g.m_invMass*u,g.m_sweep.a+=g.m_invI*(r*u-o*l),_.SynchronizeTransform(),g.SynchronizeTransform()),this.m_limitState1==jj.e_atUpperLimit&&(e=_.m_xf.R,n=this.m_localAnchor1.x-_.m_sweep.localCenter.x,i=this.m_localAnchor1.y-_.m_sweep.localCenter.y,f=e.col1.x*n+e.col2.x*i,i=e.col1.y*n+e.col2.y*i,n=f,a=_.m_sweep.c.x+n,s=_.m_sweep.c.y+i,this.m_u1.Set(a-m,s-y),(c=this.m_u1.Length())>KV.b2_linearSlop?(this.m_u1.x*=1/c,this.m_u1.y*=1/c):this.m_u1.SetZero(),p=this.m_maxLength1-c,b=rj.Max(b,-p),p=rj.Clamp(p+KV.b2_linearSlop,-KV.b2_maxLinearCorrection,0),a=-(d=-this.m_limitMass1*p)*this.m_u1.x,s=-d*this.m_u1.y,_.m_sweep.c.x+=_.m_invMass*a,_.m_sweep.c.y+=_.m_invMass*s,_.m_sweep.a+=_.m_invI*(n*s-i*a),_.SynchronizeTransform()),this.m_limitState2==jj.e_atUpperLimit&&(e=g.m_xf.R,r=this.m_localAnchor2.x-g.m_sweep.localCenter.x,o=this.m_localAnchor2.y-g.m_sweep.localCenter.y,f=e.col1.x*r+e.col2.x*o,o=e.col1.y*r+e.col2.y*o,r=f,l=g.m_sweep.c.x+r,u=g.m_sweep.c.y+o,this.m_u2.Set(l-A,u-v),(h=this.m_u2.Length())>KV.b2_linearSlop?(this.m_u2.x*=1/h,this.m_u2.y*=1/h):this.m_u2.SetZero(),p=this.m_maxLength2-h,b=rj.Max(b,-p),p=rj.Clamp(p+KV.b2_linearSlop,-KV.b2_maxLinearCorrection,0),l=-(d=-this.m_limitMass2*p)*this.m_u2.x,u=-d*this.m_u2.y,g.m_sweep.c.x+=g.m_invMass*l,g.m_sweep.c.y+=g.m_invMass*u,g.m_sweep.a+=g.m_invI*(r*u-o*l),g.SynchronizeTransform()),b<KV.b2_linearSlop},e.b2_minPulleyLength=2,e}(jj),rG=function(t){function e(){var e=t.call(this)||this;return e.groundAnchorA=new nj,e.groundAnchorB=new nj,e.localAnchorA=new nj,e.localAnchorB=new nj,e.type=jj.e_pulleyJoint,e.groundAnchorA.Set(-1,1),e.groundAnchorB.Set(1,1),e.localAnchorA.Set(-1,0),e.localAnchorB.Set(1,0),e.lengthA=0,e.maxLengthA=0,e.lengthB=0,e.maxLengthB=0,e.ratio=1,e.collideConnected=!0,e}return o(e,t),e.prototype.Initialize=function(t,e,n,i,r,o,a){this.bodyA=t,this.bodyB=e,this.groundAnchorA.SetV(n),this.groundAnchorB.SetV(i),this.localAnchorA=this.bodyA.GetLocalPoint(r),this.localAnchorB=this.bodyB.GetLocalPoint(o);var s=r.x-n.x,l=r.y-n.y;this.lengthA=Math.sqrt(s*s+l*l);var u=o.x-i.x,c=o.y-i.y;this.lengthB=Math.sqrt(u*u+c*c),this.ratio=a;var h=this.lengthA+this.ratio*this.lengthB;this.maxLengthA=h-this.ratio*iG.b2_minPulleyLength,this.maxLengthB=(h-iG.b2_minPulleyLength)/this.ratio},e}(Gj),oG=function(t){function e(e){var n=t.call(this,e)||this;return n.K=new ZV,n.K1=new ZV,n.K2=new ZV,n.K3=new ZV,n.impulse3=new ij,n.impulse2=new nj,n.reduced=new nj,n.m_localAnchor1=new nj,n.m_localAnchor2=new nj,n.m_impulse=new ij,n.m_mass=new $V,n.m_localAnchor1.SetV(e.localAnchorA),n.m_localAnchor2.SetV(e.localAnchorB),n.m_referenceAngle=e.referenceAngle,n.m_impulse.SetZero(),n.m_motorImpulse=0,n.m_lowerAngle=e.lowerAngle,n.m_upperAngle=e.upperAngle,n.m_maxMotorTorque=e.maxMotorTorque,n.m_motorSpeed=e.motorSpeed,n.m_enableLimit=e.enableLimit,n.m_enableMotor=e.enableMotor,n.m_limitState=jj.e_inactiveLimit,n}return o(e,t),e.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},e.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},e.prototype.GetReactionForce=function(t){return new nj(t*this.m_impulse.x,t*this.m_impulse.y)},e.prototype.GetReactionTorque=function(t){return t*this.m_impulse.z},e.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},e.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},e.prototype.IsLimitEnabled=function(){return this.m_enableLimit},e.prototype.EnableLimit=function(t){this.m_enableLimit=t},e.prototype.GetLowerLimit=function(){return this.m_lowerAngle},e.prototype.GetUpperLimit=function(){return this.m_upperAngle},e.prototype.SetLimits=function(t,e){this.m_lowerAngle=t,this.m_upperAngle=e},e.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},e.prototype.EnableMotor=function(t){this.m_enableMotor=t},e.prototype.SetMotorSpeed=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},e.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},e.prototype.SetMaxMotorTorque=function(t){this.m_maxMotorTorque=t},e.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},e.prototype.InitVelocityConstraints=function(t){var e,n,i=this.m_bodyA,r=this.m_bodyB;this.m_enableMotor||this.m_enableLimit,e=i.m_xf.R;var o=this.m_localAnchor1.x-i.m_sweep.localCenter.x,a=this.m_localAnchor1.y-i.m_sweep.localCenter.y;n=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=n,e=r.m_xf.R;var s=this.m_localAnchor2.x-r.m_sweep.localCenter.x,l=this.m_localAnchor2.y-r.m_sweep.localCenter.y;n=e.col1.x*s+e.col2.x*l,l=e.col1.y*s+e.col2.y*l,s=n;var u=i.m_invMass,c=r.m_invMass,h=i.m_invI,p=r.m_invI;if(this.m_mass.col1.x=u+c+a*a*h+l*l*p,this.m_mass.col2.x=-a*o*h-l*s*p,this.m_mass.col3.x=-a*h-l*p,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=u+c+o*o*h+s*s*p,this.m_mass.col3.y=o*h+s*p,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=h+p,this.m_motorMass=1/(h+p),0==this.m_enableMotor&&(this.m_motorImpulse=0),this.m_enableLimit){var d=r.m_sweep.a-i.m_sweep.a-this.m_referenceAngle;rj.Abs(this.m_upperAngle-this.m_lowerAngle)<2*KV.b2_angularSlop?this.m_limitState=jj.e_equalLimits:d<=this.m_lowerAngle?(this.m_limitState!=jj.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=jj.e_atLowerLimit):d>=this.m_upperAngle?(this.m_limitState!=jj.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=jj.e_atUpperLimit):(this.m_limitState=jj.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=jj.e_inactiveLimit;if(t.warmStarting){this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var f=this.m_impulse.x,_=this.m_impulse.y;i.m_linearVelocity.x-=u*f,i.m_linearVelocity.y-=u*_,i.m_angularVelocity-=h*(o*_-a*f+this.m_motorImpulse+this.m_impulse.z),r.m_linearVelocity.x+=c*f,r.m_linearVelocity.y+=c*_,r.m_angularVelocity+=p*(s*_-l*f+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0},e.prototype.SolveVelocityConstraints=function(t){var e,n,i,r,o,a,s=this.m_bodyA,l=this.m_bodyB,u=s.m_linearVelocity,c=s.m_angularVelocity,h=l.m_linearVelocity,p=l.m_angularVelocity,d=s.m_invMass,f=l.m_invMass,_=s.m_invI,g=l.m_invI;if(this.m_enableMotor&&this.m_limitState!=jj.e_equalLimits){var m=p-c-this.m_motorSpeed,y=this.m_motorMass*-m,A=this.m_motorImpulse,v=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=rj.Clamp(this.m_motorImpulse+y,-v,v),c-=_*(y=this.m_motorImpulse-A),p+=g*y}if(this.m_enableLimit&&this.m_limitState!=jj.e_inactiveLimit){e=s.m_xf.R,i=this.m_localAnchor1.x-s.m_sweep.localCenter.x,r=this.m_localAnchor1.y-s.m_sweep.localCenter.y,n=e.col1.x*i+e.col2.x*r,r=e.col1.y*i+e.col2.y*r,i=n,e=l.m_xf.R,o=this.m_localAnchor2.x-l.m_sweep.localCenter.x,a=this.m_localAnchor2.y-l.m_sweep.localCenter.y,n=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=n;var b=h.x+-p*a-u.x- -c*r,x=h.y+p*o-u.y-c*i,C=p-c;this.m_mass.Solve33(this.impulse3,-b,-x,-C),this.m_limitState==jj.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState==jj.e_atLowerLimit?this.m_impulse.z+this.impulse3.z<0&&(this.m_mass.Solve22(this.reduced,-b,-x),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0):this.m_limitState==jj.e_atUpperLimit&&this.m_impulse.z+this.impulse3.z>0&&(this.m_mass.Solve22(this.reduced,-b,-x),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0),u.x-=d*this.impulse3.x,u.y-=d*this.impulse3.y,c-=_*(i*this.impulse3.y-r*this.impulse3.x+this.impulse3.z),h.x+=f*this.impulse3.x,h.y+=f*this.impulse3.y,p+=g*(o*this.impulse3.y-a*this.impulse3.x+this.impulse3.z)}else{e=s.m_xf.R,i=this.m_localAnchor1.x-s.m_sweep.localCenter.x,r=this.m_localAnchor1.y-s.m_sweep.localCenter.y,n=e.col1.x*i+e.col2.x*r,r=e.col1.y*i+e.col2.y*r,i=n,e=l.m_xf.R,o=this.m_localAnchor2.x-l.m_sweep.localCenter.x,a=this.m_localAnchor2.y-l.m_sweep.localCenter.y,n=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=n;var I=h.x+-p*a-u.x- -c*r,E=h.y+p*o-u.y-c*i;this.m_mass.Solve22(this.impulse2,-I,-E),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,u.x-=d*this.impulse2.x,u.y-=d*this.impulse2.y,c-=_*(i*this.impulse2.y-r*this.impulse2.x),h.x+=f*this.impulse2.x,h.y+=f*this.impulse2.y,p+=g*(o*this.impulse2.y-a*this.impulse2.x)}s.m_linearVelocity.SetV(u),s.m_angularVelocity=c,l.m_linearVelocity.SetV(h),l.m_angularVelocity=p},e.prototype.SolvePositionConstraints=function(t){var n,i,r,o,a,s,l=this.m_bodyA,u=this.m_bodyB,c=0;if(this.m_enableLimit&&this.m_limitState!=jj.e_inactiveLimit){var h=u.m_sweep.a-l.m_sweep.a-this.m_referenceAngle,p=0;this.m_limitState==jj.e_equalLimits?(n=rj.Clamp(h-this.m_lowerAngle,-KV.b2_maxAngularCorrection,KV.b2_maxAngularCorrection),p=-this.m_motorMass*n,c=rj.Abs(n)):this.m_limitState==jj.e_atLowerLimit?(c=-(n=h-this.m_lowerAngle),n=rj.Clamp(n+KV.b2_angularSlop,-KV.b2_maxAngularCorrection,0),p=-this.m_motorMass*n):this.m_limitState==jj.e_atUpperLimit&&(c=n=h-this.m_upperAngle,n=rj.Clamp(n-KV.b2_angularSlop,0,KV.b2_maxAngularCorrection),p=-this.m_motorMass*n),l.m_sweep.a-=l.m_invI*p,u.m_sweep.a+=u.m_invI*p,l.SynchronizeTransform(),u.SynchronizeTransform()}i=l.m_xf.R;var d=this.m_localAnchor1.x-l.m_sweep.localCenter.x,f=this.m_localAnchor1.y-l.m_sweep.localCenter.y;o=i.col1.x*d+i.col2.x*f,f=i.col1.y*d+i.col2.y*f,d=o,i=u.m_xf.R;var _=this.m_localAnchor2.x-u.m_sweep.localCenter.x,g=this.m_localAnchor2.y-u.m_sweep.localCenter.y;o=i.col1.x*_+i.col2.x*g,g=i.col1.y*_+i.col2.y*g,_=o;var m=u.m_sweep.c.x+_-l.m_sweep.c.x-d,y=u.m_sweep.c.y+g-l.m_sweep.c.y-f,A=m*m+y*y;r=Math.sqrt(A);var v=l.m_invMass,b=u.m_invMass,x=l.m_invI,C=u.m_invI,I=10*KV.b2_linearSlop;if(A>I*I){var E=1/(v+b);a=E*-m,s=E*-y;var w=.5;l.m_sweep.c.x-=w*v*a,l.m_sweep.c.y-=w*v*s,u.m_sweep.c.x+=w*b*a,u.m_sweep.c.y+=w*b*s,m=u.m_sweep.c.x+_-l.m_sweep.c.x-d,y=u.m_sweep.c.y+g-l.m_sweep.c.y-f}return this.K1.col1.x=v+b,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=v+b,this.K2.col1.x=x*f*f,this.K2.col2.x=-x*d*f,this.K2.col1.y=-x*d*f,this.K2.col2.y=x*d*d,this.K3.col1.x=C*g*g,this.K3.col2.x=-C*_*g,this.K3.col1.y=-C*_*g,this.K3.col2.y=C*_*_,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(e.tImpulse,-m,-y),a=e.tImpulse.x,s=e.tImpulse.y,l.m_sweep.c.x-=l.m_invMass*a,l.m_sweep.c.y-=l.m_invMass*s,l.m_sweep.a-=l.m_invI*(d*s-f*a),u.m_sweep.c.x+=u.m_invMass*a,u.m_sweep.c.y+=u.m_invMass*s,u.m_sweep.a+=u.m_invI*(_*s-g*a),l.SynchronizeTransform(),u.SynchronizeTransform(),r<=KV.b2_linearSlop&&c<=KV.b2_angularSlop},e.tImpulse=new nj,e}(jj),aG=function(t){function e(){var e=t.call(this)||this;return e.localAnchorA=new nj,e.localAnchorB=new nj,e.type=jj.e_revoluteJoint,e.localAnchorA.Set(0,0),e.localAnchorB.Set(0,0),e.referenceAngle=0,e.lowerAngle=0,e.upperAngle=0,e.maxMotorTorque=0,e.motorSpeed=0,e.enableLimit=!1,e.enableMotor=!1,e}return o(e,t),e.prototype.Initialize=function(t,e,n){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},e}(Gj),sG=function(t){function e(e){var n=t.call(this,e)||this;return n.m_localAnchorA=new nj,n.m_localAnchorB=new nj,n.m_impulse=new ij,n.m_mass=new $V,n.m_localAnchorA.SetV(e.localAnchorA),n.m_localAnchorB.SetV(e.localAnchorB),n.m_referenceAngle=e.referenceAngle,n.m_impulse.SetZero(),n.m_mass=new $V,n}return o(e,t),e.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},e.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},e.prototype.GetReactionForce=function(t){return new nj(t*this.m_impulse.x,t*this.m_impulse.y)},e.prototype.GetReactionTorque=function(t){return t*this.m_impulse.z},e.prototype.InitVelocityConstraints=function(t){var e,n,i=this.m_bodyA,r=this.m_bodyB;e=i.m_xf.R;var o=this.m_localAnchorA.x-i.m_sweep.localCenter.x,a=this.m_localAnchorA.y-i.m_sweep.localCenter.y;n=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=n,e=r.m_xf.R;var s=this.m_localAnchorB.x-r.m_sweep.localCenter.x,l=this.m_localAnchorB.y-r.m_sweep.localCenter.y;n=e.col1.x*s+e.col2.x*l,l=e.col1.y*s+e.col2.y*l,s=n;var u=i.m_invMass,c=r.m_invMass,h=i.m_invI,p=r.m_invI;this.m_mass.col1.x=u+c+a*a*h+l*l*p,this.m_mass.col2.x=-a*o*h-l*s*p,this.m_mass.col3.x=-a*h-l*p,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=u+c+o*o*h+s*s*p,this.m_mass.col3.y=o*h+s*p,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=h+p,t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_impulse.z*=t.dtRatio,i.m_linearVelocity.x-=u*this.m_impulse.x,i.m_linearVelocity.y-=u*this.m_impulse.y,i.m_angularVelocity-=h*(o*this.m_impulse.y-a*this.m_impulse.x+this.m_impulse.z),r.m_linearVelocity.x+=c*this.m_impulse.x,r.m_linearVelocity.y+=c*this.m_impulse.y,r.m_angularVelocity+=p*(s*this.m_impulse.y-l*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},e.prototype.SolveVelocityConstraints=function(t){var e,n,i=this.m_bodyA,r=this.m_bodyB,o=i.m_linearVelocity,a=i.m_angularVelocity,s=r.m_linearVelocity,l=r.m_angularVelocity,u=i.m_invMass,c=r.m_invMass,h=i.m_invI,p=r.m_invI;e=i.m_xf.R;var d=this.m_localAnchorA.x-i.m_sweep.localCenter.x,f=this.m_localAnchorA.y-i.m_sweep.localCenter.y;n=e.col1.x*d+e.col2.x*f,f=e.col1.y*d+e.col2.y*f,d=n,e=r.m_xf.R;var _=this.m_localAnchorB.x-r.m_sweep.localCenter.x,g=this.m_localAnchorB.y-r.m_sweep.localCenter.y;n=e.col1.x*_+e.col2.x*g,g=e.col1.y*_+e.col2.y*g,_=n;var m=s.x-l*g-o.x+a*f,y=s.y+l*_-o.y-a*d,A=l-a,v=new ij;this.m_mass.Solve33(v,-m,-y,-A),this.m_impulse.Add(v),o.x-=u*v.x,o.y-=u*v.y,a-=h*(d*v.y-f*v.x+v.z),s.x+=c*v.x,s.y+=c*v.y,l+=p*(_*v.y-g*v.x+v.z),i.m_angularVelocity=a,r.m_angularVelocity=l},e.prototype.SolvePositionConstraints=function(t){var e,n,i=this.m_bodyA,r=this.m_bodyB;e=i.m_xf.R;var o=this.m_localAnchorA.x-i.m_sweep.localCenter.x,a=this.m_localAnchorA.y-i.m_sweep.localCenter.y;n=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=n,e=r.m_xf.R;var s=this.m_localAnchorB.x-r.m_sweep.localCenter.x,l=this.m_localAnchorB.y-r.m_sweep.localCenter.y;n=e.col1.x*s+e.col2.x*l,l=e.col1.y*s+e.col2.y*l,s=n;var u=i.m_invMass,c=r.m_invMass,h=i.m_invI,p=r.m_invI,d=r.m_sweep.c.x+s-i.m_sweep.c.x-o,f=r.m_sweep.c.y+l-i.m_sweep.c.y-a,_=r.m_sweep.a-i.m_sweep.a-this.m_referenceAngle,g=10*KV.b2_linearSlop,m=Math.sqrt(d*d+f*f),y=rj.Abs(_);m>g&&(h*=1,p*=1),this.m_mass.col1.x=u+c+a*a*h+l*l*p,this.m_mass.col2.x=-a*o*h-l*s*p,this.m_mass.col3.x=-a*h-l*p,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=u+c+o*o*h+s*s*p,this.m_mass.col3.y=o*h+s*p,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=h+p;var A=new ij;return this.m_mass.Solve33(A,-d,-f,-_),i.m_sweep.c.x-=u*A.x,i.m_sweep.c.y-=u*A.y,i.m_sweep.a-=h*(o*A.y-a*A.x+A.z),r.m_sweep.c.x+=c*A.x,r.m_sweep.c.y+=c*A.y,r.m_sweep.a+=p*(s*A.y-l*A.x+A.z),i.SynchronizeTransform(),r.SynchronizeTransform(),m<=KV.b2_linearSlop&&y<=KV.b2_angularSlop},e}(jj),lG=function(t){function e(){var e=t.call(this)||this;return e.localAnchorA=new nj,e.localAnchorB=new nj,e.type=jj.e_weldJoint,e.referenceAngle=0,e}return o(e,t),e.prototype.Initialize=function(t,e,n){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},e}(Gj),uG=function(){function t(){this.__fast__=!0}return t.prototype.Set=function(t){this.dt=t.dt,this.inv_dt=t.inv_dt,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting},t}(),cG=function(){function t(){this.__fast__=!0,this.m_drawScale=1,this.m_lineThickness=1,this.m_alpha=1,this.m_fillAlpha=1,this.m_xformScale=1,this.m_drawFlags=0}return t.prototype.SetFlags=function(t){this.m_drawFlags=t},t.prototype.GetFlags=function(){return this.m_drawFlags},t.prototype.AppendFlags=function(t){this.m_drawFlags|=t},t.prototype.ClearFlags=function(t){this.m_drawFlags&=~t},t.prototype.SetSprite=function(t){this.m_sprite=t},t.prototype.GetSprite=function(){return this.m_sprite},t.prototype.SetDrawScale=function(t){this.m_drawScale=t},t.prototype.GetDrawScale=function(){return this.m_drawScale},t.prototype.SetLineThickness=function(t){this.m_lineThickness=t},t.prototype.GetLineThickness=function(){return this.m_lineThickness},t.prototype.SetAlpha=function(t){this.m_alpha=t},t.prototype.GetAlpha=function(){return this.m_alpha},t.prototype.SetFillAlpha=function(t){this.m_fillAlpha=t},t.prototype.GetFillAlpha=function(){return this.m_fillAlpha},t.prototype.SetXFormScale=function(t){this.m_xformScale=t},t.prototype.GetXFormScale=function(){return this.m_xformScale},t.prototype.DrawPolygon=function(t,e,n){this.m_sprite.graphics.lineStyle(this.m_lineThickness,n.color,this.m_alpha),this.m_sprite.graphics.moveTo(t[0].x*this.m_drawScale,t[0].y*this.m_drawScale);for(var i=1;i<e;i++)this.m_sprite.graphics.lineTo(t[i].x*this.m_drawScale,t[i].y*this.m_drawScale);this.m_sprite.graphics.lineTo(t[0].x*this.m_drawScale,t[0].y*this.m_drawScale)},t.prototype.DrawSolidPolygon=function(t,e,n){this.m_sprite.graphics.lineStyle(this.m_lineThickness,n.color,this.m_alpha),this.m_sprite.graphics.moveTo(t[0].x*this.m_drawScale,t[0].y*this.m_drawScale),this.m_sprite.graphics.beginFill(n.color,this.m_fillAlpha);for(var i=1;i<e;i++)this.m_sprite.graphics.lineTo(t[i].x*this.m_drawScale,t[i].y*this.m_drawScale);this.m_sprite.graphics.lineTo(t[0].x*this.m_drawScale,t[0].y*this.m_drawScale),this.m_sprite.graphics.endFill()},t.prototype.DrawCircle=function(t,e,n){this.m_sprite.graphics.lineStyle(this.m_lineThickness,n.color,this.m_alpha),this.m_sprite.graphics.drawCircle(t.x*this.m_drawScale,t.y*this.m_drawScale,e*this.m_drawScale)},t.prototype.DrawSolidCircle=function(t,e,n,i){this.m_sprite.graphics.lineStyle(this.m_lineThickness,i.color,this.m_alpha),this.m_sprite.graphics.moveTo(0,0),this.m_sprite.graphics.beginFill(i.color,this.m_fillAlpha),this.m_sprite.graphics.drawCircle(t.x*this.m_drawScale,t.y*this.m_drawScale,e*this.m_drawScale),this.m_sprite.graphics.endFill(),this.m_sprite.graphics.moveTo(t.x*this.m_drawScale,t.y*this.m_drawScale),this.m_sprite.graphics.lineTo((t.x+n.x*e)*this.m_drawScale,(t.y+n.y*e)*this.m_drawScale)},t.prototype.DrawSegment=function(t,e,n){this.m_sprite.graphics.lineStyle(this.m_lineThickness,n.color,this.m_alpha),this.m_sprite.graphics.moveTo(t.x*this.m_drawScale,t.y*this.m_drawScale),this.m_sprite.graphics.lineTo(e.x*this.m_drawScale,e.y*this.m_drawScale)},t.prototype.DrawTransform=function(t){this.m_sprite.graphics.lineStyle(this.m_lineThickness,16711680,this.m_alpha),this.m_sprite.graphics.moveTo(t.position.x*this.m_drawScale,t.position.y*this.m_drawScale),this.m_sprite.graphics.lineTo((t.position.x+this.m_xformScale*t.R.col1.x)*this.m_drawScale,(t.position.y+this.m_xformScale*t.R.col1.y)*this.m_drawScale),this.m_sprite.graphics.lineStyle(this.m_lineThickness,65280,this.m_alpha),this.m_sprite.graphics.moveTo(t.position.x*this.m_drawScale,t.position.y*this.m_drawScale),this.m_sprite.graphics.lineTo((t.position.x+this.m_xformScale*t.R.col2.x)*this.m_drawScale,(t.position.y+this.m_xformScale*t.R.col2.y)*this.m_drawScale)},t.e_shapeBit=1,t.e_jointBit=2,t.e_aabbBit=4,t.e_pairBit=8,t.e_centerOfMassBit=16,t.e_controllerBit=32,t}(),hG=function(){function t(){this.__fast__=!0}return t.prototype.SayGoodbyeJoint=function(t){},t.prototype.SayGoodbyeFixture=function(t){},t}(),pG=function(){function t(){this.__fast__=!0}return t.prototype.BeginContact=function(t){},t.prototype.EndContact=function(t){},t.prototype.PreSolve=function(t,e){},t.prototype.PostSolve=function(t,e){},t.b2_defaultListener=new t,t}(),dG=function(){function t(){this.__fast__=!0}return t.prototype.ShouldCollide=function(t,e){var n=t.GetFilterData(),i=e.GetFilterData();return n.groupIndex==i.groupIndex&&0!=n.groupIndex?n.groupIndex>0:!!(n.maskBits&i.categoryBits)&&!!(n.categoryBits&i.maskBits)},t.prototype.RayCollide=function(t,e){return!t||this.ShouldCollide(t,e)},t.b2_defaultFilter=new t,t}(),fG=function(){function t(){var t=this;this.__fast__=!0,this.m_world=null,this.m_contactCount=0,this.m_contactFilter=dG.b2_defaultFilter,this.m_contactListener=pG.b2_defaultListener,this.m_contactFactory=new xG(this.m_allocator),this.m_broadPhase=new wj,this.AddPairDelegate=function(e,n){return t.AddPair(e,n)}}return t.prototype.AddPair=function(t,e){var n=t,i=e,r=n.GetBody(),o=i.GetBody();if(r!=o){for(var a=o.GetContactList();a;){if(a.other==r){var s=a.contact.GetFixtureA(),l=a.contact.GetFixtureB();if(s==n&&l==i)return;if(s==i&&l==n)return}a=a.next}if(0!=o.ShouldCollide(r)&&0!=this.m_contactFilter.ShouldCollide(n,i)){var u=this.m_contactFactory.Create(n,i);n=u.GetFixtureA(),i=u.GetFixtureB(),r=n.m_body,o=i.m_body,u.m_prev=null,u.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=u),this.m_world.m_contactList=u,u.m_nodeA.contact=u,u.m_nodeA.other=o,u.m_nodeA.prev=null,u.m_nodeA.next=r.m_contactList,null!=r.m_contactList&&(r.m_contactList.prev=u.m_nodeA),r.m_contactList=u.m_nodeA,u.m_nodeB.contact=u,u.m_nodeB.other=r,u.m_nodeB.prev=null,u.m_nodeB.next=o.m_contactList,null!=o.m_contactList&&(o.m_contactList.prev=u.m_nodeB),o.m_contactList=u.m_nodeB,++this.m_world.m_contactCount}}},t.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(this.AddPairDelegate)},t.prototype.Destroy=function(t){var e=t.GetFixtureA(),n=t.GetFixtureB(),i=e.GetBody(),r=n.GetBody();t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_world.m_contactList&&(this.m_world.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==i.m_contactList&&(i.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==r.m_contactList&&(r.m_contactList=t.m_nodeB.next),this.m_contactFactory.Destroy(t),--this.m_contactCount},t.prototype.Collide=function(){for(var t=this.m_world.m_contactList;t;){var e=t.GetFixtureA(),n=t.GetFixtureB(),i=e.GetBody(),r=n.GetBody();if(0!=i.IsAwake()||0!=r.IsAwake()){if(t.m_flags&AG.e_filterFlag){if(0==r.ShouldCollide(i)){var o=t;t=o.GetNext(),this.Destroy(o);continue}if(0==this.m_contactFilter.ShouldCollide(e,n)){t=(o=t).GetNext(),this.Destroy(o);continue}t.m_flags&=~AG.e_filterFlag}var a=e.m_proxy,s=n.m_proxy;0!=this.m_broadPhase.TestOverlap(a,s)?(t.Update(this.m_contactListener),t=t.GetNext()):(t=(o=t).GetNext(),this.Destroy(o))}else t=t.GetNext()}},t.s_evalCP=new bj,t}();function _G(t,e){if(!t||void 0===t.traits)return t;for(var n=0,i=Object.getOwnPropertyNames(e);n<i.length;n++){var r=i[n];!t[r]&&t["$Bg"+r]&&(t[r]=t["$Bg"+r])}return t}var gG=function(){function t(e,n){this.__fast__=!0,this.s_stack=new Array,this.m_contactManager=new fG,this.m_contactSolver=new IG,this.m_island=new Vj,this.m_destructionListener=null,this.m_debugDraw=null,this.m_bodyList=null,this.m_contactList=null,this.m_jointList=null,this.m_controllerList=null,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_controllerCount=0,t.m_warmStarting=!0,t.m_continuousPhysics=!0,this.m_allowSleep=n,this.m_gravity=e,this.m_inv_dt0=0,this.m_contactManager.m_world=this;var i=new Rj;this.m_groundBody=this.CreateBody(i)}return t.prototype.SetDestructionListener=function(t){this.m_destructionListener=_G(t,hG.prototype)},t.prototype.SetContactFilter=function(t){this.m_contactManager.m_contactFilter=_G(t,dG.prototype)},t.prototype.SetContactListener=function(t){this.m_contactManager.m_contactListener=_G(t,pG.prototype)},t.prototype.SetDebugDraw=function(t){this.m_debugDraw=t},t.prototype.SetBroadPhase=function(t){var e=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var n=this.m_bodyList;n;n=n.m_next)for(var i=n.m_fixtureList;i;i=i.m_next)i.m_proxy=t.CreateProxy(e.GetFatAABB(i.m_proxy),i)},t.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},t.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},t.prototype.CreateBody=function(t){if(1==this.IsLocked())return null;var e=new mG(t,this);return e.m_prev=null,e.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount,e},t.prototype.DestroyBody=function(t){if(1!=this.IsLocked()){for(var e=t.m_jointList;e;){var n=e;e=e.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(n.joint),this.DestroyJoint(n.joint)}for(var i=t.m_controllerList;i;){var r=i;i=i.nextController,r.controller.RemoveBody(t)}for(var o=t.m_contactList;o;){var a=o;o=o.next,this.m_contactManager.Destroy(a.contact)}t.m_contactList=null;for(var s=t.m_fixtureList;s;){var l=s;s=s.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(l),l.DestroyProxy(this.m_contactManager.m_broadPhase),l.Destroy()}t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}},t.prototype.CreateJoint=function(t){var e=jj.Create(t,null);e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.joint=e,e.m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.joint=e,e.m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;var n=t.bodyA,i=t.bodyB;if(0==t.collideConnected)for(var r=i.GetContactList();r;)r.other==n&&r.contact.FlagForFiltering(),r=r.next;return e},t.prototype.DestroyJoint=function(t){var e=t.m_collideConnected;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var n=t.m_bodyA,i=t.m_bodyB;if(n.SetAwake(!0),i.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==n.m_jointList&&(n.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==i.m_jointList&&(i.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,jj.Destroy(t,null),--this.m_jointCount,0==e)for(var r=i.GetContactList();r;)r.other==n&&r.contact.FlagForFiltering(),r=r.next},t.prototype.AddController=function(t){return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList=t,t.m_world=this,this.m_controllerCount++,t},t.prototype.RemoveController=function(t){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList==t&&(this.m_controllerList=t.m_next),this.m_controllerCount--},t.prototype.CreateController=function(t){if(t.m_world!=this)throw new Error("Controller can only be a member of one world");return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t.m_world=this,t},t.prototype.DestroyController=function(t){t.Clear(),t.m_next&&(t.m_next.m_prev=t.m_prev),t.m_prev&&(t.m_prev.m_next=t.m_next),t==this.m_controllerList&&(this.m_controllerList=t.m_next),--this.m_controllerCount},t.prototype.SetWarmStarting=function(e){t.m_warmStarting=e},t.prototype.SetContinuousPhysics=function(e){t.m_continuousPhysics=e},t.prototype.GetBodyCount=function(){return this.m_bodyCount},t.prototype.GetJointCount=function(){return this.m_jointCount},t.prototype.GetContactCount=function(){return this.m_contactCount},t.prototype.SetGravity=function(t){this.m_gravity=t},t.prototype.GetGravity=function(){return this.m_gravity},t.prototype.GetGroundBody=function(){return this.m_groundBody},t.prototype.Step=function(e,n,i){this.m_flags&t.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~t.e_newFixture),this.m_flags|=t.e_locked;var r=t.s_timestep2;r.dt=e,r.velocityIterations=n,r.positionIterations=i,r.inv_dt=e>0?1/e:0,r.dtRatio=this.m_inv_dt0*e,r.warmStarting=t.m_warmStarting,this.m_contactManager.Collide(),r.dt>0&&this.Solve(r),t.m_continuousPhysics&&r.dt>0&&this.SolveTOI(r),r.dt>0&&(this.m_inv_dt0=r.inv_dt),this.m_flags&=~t.e_locked},t.prototype.ClearForces=function(){for(var t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0},t.prototype.DrawDebugData=function(){if(null!=this.m_debugDraw){this.m_debugDraw.m_sprite.graphics.clear();var e,n,i,r,o,a,s=this.m_debugDraw.GetFlags();new nj,new nj,new nj,new fj,new fj;var l=[new nj,new nj,new nj,new nj],u=new Mj(0,0,0);if(s&cG.e_shapeBit)for(e=this.m_bodyList;e;e=e.m_next)for(a=e.m_xf,n=e.GetFixtureList();n;n=n.m_next)i=n.GetShape(),0==e.IsActive()?(u.Set(.5,.5,.3),this.DrawShape(i,a,u)):e.GetType()==mG.b2_staticBody?(u.Set(.5,.9,.5),this.DrawShape(i,a,u)):e.GetType()==mG.b2_kinematicBody?(u.Set(.5,.5,.9),this.DrawShape(i,a,u)):0==e.IsAwake()?(u.Set(.6,.6,.6),this.DrawShape(i,a,u)):(u.Set(.9,.7,.7),this.DrawShape(i,a,u));if(s&cG.e_jointBit)for(r=this.m_jointList;r;r=r.m_next)this.DrawJoint(r);if(s&cG.e_controllerBit)for(var c=this.m_controllerList;c;c=c.m_next)c.Draw(this.m_debugDraw);if(s&cG.e_pairBit){u.Set(.3,.9,.9);for(var h=this.m_contactManager.m_contactList;h;h=h.GetNext()){var p=h.GetFixtureA(),d=h.GetFixtureB(),f=p.GetAABB().GetCenter(),_=d.GetAABB().GetCenter();this.m_debugDraw.DrawSegment(f,_,u)}}if(s&cG.e_aabbBit)for(o=this.m_contactManager.m_broadPhase,l=[new nj,new nj,new nj,new nj],e=this.m_bodyList;e;e=e.GetNext())if(0!=e.IsActive())for(n=e.GetFixtureList();n;n=n.GetNext()){var g=o.GetFatAABB(n.m_proxy);l[0].Set(g.lowerBound.x,g.lowerBound.y),l[1].Set(g.upperBound.x,g.lowerBound.y),l[2].Set(g.upperBound.x,g.upperBound.y),l[3].Set(g.lowerBound.x,g.upperBound.y),this.m_debugDraw.DrawPolygon(l,4,u)}if(s&cG.e_centerOfMassBit)for(e=this.m_bodyList;e;e=e.m_next)(a=t.s_xf).R=e.m_xf.R,a.position=e.GetWorldCenter(),this.m_debugDraw.DrawTransform(a)}},t.prototype.QueryAABB=function(t,e){var n=this.m_contactManager.m_broadPhase;n.Query((function(e){return"function"==typeof t?t(n.GetUserData(e)):t.axApply(null,[n.GetUserData(e)])}),e)},t.prototype.QueryShape=function(t,e,n){void 0===n&&(n=null),null==n&&(n=new ej).SetIdentity();var i=this.m_contactManager.m_broadPhase;var r=new fj;e.ComputeAABB(r,n),i.Query((function(r){var o=i.GetUserData(r);return!uj.TestOverlap(e,n,o.GetShape(),o.GetBody().GetTransform())||t(o)}),r)},t.prototype.QueryPoint=function(t,e){var n=this.m_contactManager.m_broadPhase;var i=new fj;i.lowerBound.Set(e.x-KV.b2_linearSlop,e.y-KV.b2_linearSlop),i.upperBound.Set(e.x+KV.b2_linearSlop,e.y+KV.b2_linearSlop),n.Query((function(i){var r=n.GetUserData(i);return!r.TestPoint(e)||t(r)}),i)},t.prototype.RayCast=function(t,e,n){var i=this.m_contactManager.m_broadPhase,r=new Dj;var o=new Cj(e,n);i.RayCast((function(o,a){var s=i.GetUserData(a);if(s.RayCast(r,o)){var l=r.fraction,u=new nj((1-l)*e.x+l*n.x,(1-l)*e.y+l*n.y);return t(s,u,r.normal,l)}return o.maxFraction}),o)},t.prototype.RayCastOne=function(t,e){var n;return this.RayCast((function(t,e,i,r){return n=t,r}),t,e),n},t.prototype.RayCastAll=function(t,e){var n=new Array;return this.RayCast((function(t,e,i,r){return n[n.length]=t,1}),t,e),n},t.prototype.GetBodyList=function(){return this.m_bodyList},t.prototype.GetJointList=function(){return this.m_jointList},t.prototype.GetContactList=function(){return this.m_contactList},t.prototype.IsLocked=function(){return(this.m_flags&t.e_locked)>0},t.prototype.Solve=function(t){for(var e,n=this.m_controllerList;n;n=n.m_next)n.Step(t);var i=this.m_island;for(i.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver),e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~mG.e_islandFlag;for(var r=this.m_contactList;r;r=r.m_next)r.m_flags&=~AG.e_islandFlag;for(var o=this.m_jointList;o;o=o.m_next)o.m_islandFlag=!1;this.m_bodyCount;for(var a=this.s_stack,s=this.m_bodyList;s;s=s.m_next)if(!(s.m_flags&mG.e_islandFlag)&&0!=s.IsAwake()&&0!=s.IsActive()&&s.GetType()!=mG.b2_staticBody){i.Clear();var l=0;for(a[l++]=s,s.m_flags|=mG.e_islandFlag;l>0;)if(e=a[--l],i.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()!=mG.b2_staticBody){for(var u,c=e.m_contactList;c;c=c.next)c.contact.m_flags&AG.e_islandFlag||1!=c.contact.IsSensor()&&0!=c.contact.IsEnabled()&&0!=c.contact.IsTouching()&&(i.AddContact(c.contact),c.contact.m_flags|=AG.e_islandFlag,(u=c.other).m_flags&mG.e_islandFlag||(a[l++]=u,u.m_flags|=mG.e_islandFlag));for(var h=e.m_jointList;h;h=h.next)1!=h.joint.m_islandFlag&&0!=(u=h.other).IsActive()&&(i.AddJoint(h.joint),h.joint.m_islandFlag=!0,u.m_flags&mG.e_islandFlag||(a[l++]=u,u.m_flags|=mG.e_islandFlag))}i.Solve(t,this.m_gravity,this.m_allowSleep);for(var p=0;p<i.m_bodyCount;++p)(e=i.m_bodies[p]).GetType()==mG.b2_staticBody&&(e.m_flags&=~mG.e_islandFlag)}for(p=0;p<a.length&&a[p];++p)a[p]=null;for(e=this.m_bodyList;e;e=e.m_next)0!=e.IsAwake()&&0!=e.IsActive()&&e.GetType()!=mG.b2_staticBody&&e.SynchronizeFixtures();this.m_contactManager.FindNewContacts()},t.prototype.SolveTOI=function(e){var n,i,r,o,a,s,l,u=this.m_island;u.Initialize(this.m_bodyCount,KV.b2_maxTOIContactsPerIsland,KV.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var c,h=t.s_queue;for(n=this.m_bodyList;n;n=n.m_next)n.m_flags&=~mG.e_islandFlag,n.m_sweep.t0=0;for(c=this.m_contactList;c;c=c.m_next)c.m_flags&=~(AG.e_toiFlag|AG.e_islandFlag);for(l=this.m_jointList;l;l=l.m_next)l.m_islandFlag=!1;for(;;){var p=null,d=1;for(c=this.m_contactList;c;c=c.m_next)if(1!=c.IsSensor()&&0!=c.IsEnabled()&&0!=c.IsContinuous()){var f=1;if(c.m_flags&AG.e_toiFlag)f=c.m_toi;else{if(i=c.m_fixtureA,r=c.m_fixtureB,o=i.m_body,a=r.m_body,!(o.GetType()==mG.b2_dynamicBody&&0!=o.IsAwake()||a.GetType()==mG.b2_dynamicBody&&0!=a.IsAwake()))continue;var _=o.m_sweep.t0;o.m_sweep.t0<a.m_sweep.t0?(_=a.m_sweep.t0,o.m_sweep.Advance(_)):a.m_sweep.t0<o.m_sweep.t0&&(_=o.m_sweep.t0,a.m_sweep.Advance(_)),f=c.ComputeTOI(o.m_sweep,a.m_sweep),KV.b2Assert(0<=f&&f<=1),f>0&&f<1&&(f=(1-f)*_+f)>1&&(f=1),c.m_toi=f,c.m_flags|=AG.e_toiFlag}Number.MIN_VALUE<f&&f<d&&(p=c,d=f)}if(null==p||1-100*Number.MIN_VALUE<d)break;if(i=p.m_fixtureA,r=p.m_fixtureB,o=i.m_body,a=r.m_body,t.s_backupA.Set(o.m_sweep),t.s_backupB.Set(a.m_sweep),o.Advance(d),a.Advance(d),p.Update(this.m_contactManager.m_contactListener),p.m_flags&=~AG.e_toiFlag,1!=p.IsSensor()&&0!=p.IsEnabled()){if(0!=p.IsTouching()){var g=o;g.GetType()!=mG.b2_dynamicBody&&(g=a),u.Clear();var m=0,y=0;for(h[m+y++]=g,g.m_flags|=mG.e_islandFlag;y>0;)if(n=h[m++],--y,u.AddBody(n),0==n.IsAwake()&&n.SetAwake(!0),n.GetType()==mG.b2_dynamicBody){for(s=n.m_contactList;s&&u.m_contactCount!=u.m_contactCapacity;s=s.next)if(!(s.contact.m_flags&AG.e_islandFlag)&&1!=s.contact.IsSensor()&&0!=s.contact.IsEnabled()&&0!=s.contact.IsTouching()){u.AddContact(s.contact),s.contact.m_flags|=AG.e_islandFlag;var A=s.other;A.m_flags&mG.e_islandFlag||(A.GetType()!=mG.b2_staticBody&&(A.Advance(d),A.SetAwake(!0)),h[m+y]=A,++y,A.m_flags|=mG.e_islandFlag)}for(var v=n.m_jointList;v;v=v.next)u.m_jointCount!=u.m_jointCapacity&&1!=v.joint.m_islandFlag&&0!=(A=v.other).IsActive()&&(u.AddJoint(v.joint),v.joint.m_islandFlag=!0,A.m_flags&mG.e_islandFlag||(A.GetType()!=mG.b2_staticBody&&(A.Advance(d),A.SetAwake(!0)),h[m+y]=A,++y,A.m_flags|=mG.e_islandFlag))}var b,x=t.s_timestep;for(x.warmStarting=!1,x.dt=(1-d)*e.dt,x.inv_dt=1/x.dt,x.dtRatio=0,x.velocityIterations=e.velocityIterations,x.positionIterations=e.positionIterations,u.SolveTOI(x),b=0;b<u.m_bodyCount;++b)if((n=u.m_bodies[b]).m_flags&=~mG.e_islandFlag,0!=n.IsAwake()&&n.GetType()==mG.b2_dynamicBody)for(n.SynchronizeFixtures(),s=n.m_contactList;s;s=s.next)s.contact.m_flags&=~AG.e_toiFlag;for(b=0;b<u.m_contactCount;++b)(c=u.m_contacts[b]).m_flags&=~(AG.e_toiFlag|AG.e_islandFlag);for(b=0;b<u.m_jointCount;++b)(l=u.m_joints[b]).m_islandFlag=!1;this.m_contactManager.FindNewContacts()}}else o.m_sweep.Set(t.s_backupA),a.m_sweep.Set(t.s_backupB),o.SynchronizeTransform(),a.SynchronizeTransform()}},t.prototype.DrawJoint=function(e){var n=e.GetBodyA(),i=e.GetBodyB(),r=n.m_xf,o=i.m_xf,a=r.position,s=o.position,l=e.GetAnchorA(),u=e.GetAnchorB(),c=t.s_jointColor;switch(e.m_type){case jj.e_distanceJoint:this.m_debugDraw.DrawSegment(l,u,c);break;case jj.e_pulleyJoint:var h=e,p=h.GetGroundAnchorA(),d=h.GetGroundAnchorB();this.m_debugDraw.DrawSegment(p,l,c),this.m_debugDraw.DrawSegment(d,u,c),this.m_debugDraw.DrawSegment(p,d,c);break;case jj.e_mouseJoint:this.m_debugDraw.DrawSegment(l,u,c);break;default:n!=this.m_groundBody&&this.m_debugDraw.DrawSegment(a,l,c),this.m_debugDraw.DrawSegment(l,u,c),i!=this.m_groundBody&&this.m_debugDraw.DrawSegment(s,u,c)}},t.prototype.DrawShape=function(t,e,n){switch(t.m_type){case uj.e_circleShape:var i=t,r=rj.MulX(e,i.m_p),o=i.m_radius,a=e.R.col1;this.m_debugDraw.DrawSolidCircle(r,o,a,n);break;case uj.e_polygonShape:var s=void 0,l=t,u=l.GetVertexCount(),c=l.GetVertices(),h=new Array(u);for(s=0;s<u;++s)h[s]=rj.MulX(e,c[s]);this.m_debugDraw.DrawSolidPolygon(h,u,n);break;case uj.e_edgeShape:var p=t;this.m_debugDraw.DrawSegment(rj.MulX(e,p.GetVertex1()),rj.MulX(e,p.GetVertex2()),n)}},t.s_timestep2=new uG,t.s_xf=new ej,t.s_backupA=new tj,t.s_backupB=new tj,t.s_timestep=new uG,t.s_queue=new Array,t.s_jointColor=new Mj(.5,.8,.8),t.e_newFixture=1,t.e_locked=2,t}(),mG=function(){function t(e,n){this.__fast__=!0,this.m_xf=new ej,this.m_sweep=new tj,this.m_linearVelocity=new nj,this.m_force=new nj,this.m_flags=0,e.bullet&&(this.m_flags|=t.e_bulletFlag),e.fixedRotation&&(this.m_flags|=t.e_fixedRotationFlag),e.allowSleep&&(this.m_flags|=t.e_allowSleepFlag),e.awake&&(this.m_flags|=t.e_awakeFlag),e.active&&(this.m_flags|=t.e_activeFlag),this.m_world=n,this.m_xf.position.SetV(e.position),this.m_xf.R.Set(e.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=e.angle;var i=this.m_xf.R,r=this.m_sweep.localCenter;this.m_sweep.c.x=i.col1.x*r.x+i.col2.x*r.y,this.m_sweep.c.y=i.col1.y*r.x+i.col2.y*r.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_jointList=null,this.m_controllerList=null,this.m_contactList=null,this.m_controllerCount=0,this.m_prev=null,this.m_next=null,this.m_linearVelocity.SetV(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_force.Set(0,0),this.m_torque=0,this.m_sleepTime=0,this.m_type=e.type,this.m_type==t.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_inertiaScale=e.inertiaScale,this.m_userData=e.userData,this.m_fixtureList=null,this.m_fixtureCount=0}return t.prototype.connectEdges=function(t,e,n){var i=Math.atan2(e.GetDirectionVector().y,e.GetDirectionVector().x),r=Math.tan(.5*(i-n)),o=rj.MulFV(r,e.GetDirectionVector());o=rj.SubtractVV(o,e.GetNormalVector()),o=rj.MulFV(KV.b2_toiSlop,o),o=rj.AddVV(o,e.GetVertex1());var a=rj.AddVV(t.GetDirectionVector(),e.GetDirectionVector());a.Normalize();var s=rj.Dot(t.GetDirectionVector(),e.GetNormalVector())>0;return t.SetNextEdge(e,o,a,s),e.SetPrevEdge(t,o,a,s),i},t.prototype.CreateFixture=function(e){if(1==this.m_world.IsLocked())return null;var n=new Fj;if(n.Create(this,this.m_xf,e),this.m_flags&t.e_activeFlag){var i=this.m_world.m_contactManager.m_broadPhase;n.CreateProxy(i,this.m_xf)}return n.m_next=this.m_fixtureList,this.m_fixtureList=n,++this.m_fixtureCount,n.m_body=this,n.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=gG.e_newFixture,n},t.prototype.CreateFixture2=function(t,e){void 0===e&&(e=0);var n=new kj;return n.shape=t,n.density=e,this.CreateFixture(n)},t.prototype.DestroyFixture=function(e){if(1!=this.m_world.IsLocked()){for(var n=this.m_fixtureList,i=null;null!=n;){if(n==e){i?i.m_next=e.m_next:this.m_fixtureList=e.m_next;break}i=n,n=n.m_next}for(var r=this.m_contactList;r;){var o=r.contact;r=r.next;var a=o.GetFixtureA(),s=o.GetFixtureB();e!=a&&e!=s||this.m_world.m_contactManager.Destroy(o)}if(this.m_flags&t.e_activeFlag){var l=this.m_world.m_contactManager.m_broadPhase;e.DestroyProxy(l)}e.Destroy(),e.m_body=null,e.m_next=null,--this.m_fixtureCount,this.ResetMassData()}},t.prototype.SetPositionAndAngle=function(t,e){var n;if(1!=this.m_world.IsLocked()){this.m_xf.R.Set(e),this.m_xf.position.SetV(t);var i=this.m_xf.R,r=this.m_sweep.localCenter;this.m_sweep.c.x=i.col1.x*r.x+i.col2.x*r.y,this.m_sweep.c.y=i.col1.y*r.x+i.col2.y*r.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=e;var o=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.Synchronize(o,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}},t.prototype.SetTransform=function(t){this.SetPositionAndAngle(t.position,t.GetAngle())},t.prototype.GetTransform=function(){return this.m_xf},t.prototype.GetPosition=function(){return this.m_xf.position},t.prototype.SetPosition=function(t){this.SetPositionAndAngle(t,this.GetAngle())},t.prototype.GetAngle=function(){return this.m_sweep.a},t.prototype.SetAngle=function(t){this.SetPositionAndAngle(this.GetPosition(),t)},t.prototype.GetWorldCenter=function(){return this.m_sweep.c},t.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},t.prototype.SetLinearVelocity=function(e){this.m_type!=t.b2_staticBody&&this.m_linearVelocity.SetV(e)},t.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},t.prototype.SetAngularVelocity=function(e){this.m_type!=t.b2_staticBody&&(this.m_angularVelocity=e)},t.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},t.prototype.GetDefinition=function(){var e=new Rj;return e.type=this.GetType(),e.allowSleep=(this.m_flags&t.e_allowSleepFlag)==t.e_allowSleepFlag,e.angle=this.GetAngle(),e.angularDamping=this.m_angularDamping,e.angularVelocity=this.m_angularVelocity,e.fixedRotation=(this.m_flags&t.e_fixedRotationFlag)==t.e_fixedRotationFlag,e.bullet=(this.m_flags&t.e_bulletFlag)==t.e_bulletFlag,e.awake=(this.m_flags&t.e_awakeFlag)==t.e_awakeFlag,e.linearDamping=this.m_linearDamping,e.linearVelocity.SetV(this.GetLinearVelocity()),e.position=this.GetPosition(),e.userData=this.GetUserData(),e},t.prototype.ApplyForce=function(e,n){this.m_type==t.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_force.x+=e.x,this.m_force.y+=e.y,this.m_torque+=(n.x-this.m_sweep.c.x)*e.y-(n.y-this.m_sweep.c.y)*e.x)},t.prototype.ApplyTorque=function(e){this.m_type==t.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_torque+=e)},t.prototype.ApplyImpulse=function(e,n){this.m_type==t.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*e.x,this.m_linearVelocity.y+=this.m_invMass*e.y,this.m_angularVelocity+=this.m_invI*((n.x-this.m_sweep.c.x)*e.y-(n.y-this.m_sweep.c.y)*e.x))},t.prototype.Split=function(t){for(var e,n=this.GetLinearVelocity().Copy(),i=this.GetAngularVelocity(),r=this.GetWorldCenter(),o=this,a=this.m_world.CreateBody(this.GetDefinition()),s=o.m_fixtureList;s;)if(t(s)){var l=s.m_next;e?e.m_next=l:o.m_fixtureList=l,o.m_fixtureCount--,s.m_next=a.m_fixtureList,a.m_fixtureList=s,a.m_fixtureCount++,s.m_body=a,s=l}else e=s,s=s.m_next;o.ResetMassData(),a.ResetMassData();var u=o.GetWorldCenter(),c=a.GetWorldCenter(),h=rj.AddVV(n,rj.CrossFV(i,rj.SubtractVV(u,r))),p=rj.AddVV(n,rj.CrossFV(i,rj.SubtractVV(c,r)));return o.SetLinearVelocity(h),a.SetLinearVelocity(p),o.SetAngularVelocity(i),a.SetAngularVelocity(i),o.SynchronizeFixtures(),a.SynchronizeFixtures(),a},t.prototype.Merge=function(t){var e;for(e=t.m_fixtureList;e;){var n=e.m_next;t.m_fixtureCount--,e.m_next=this.m_fixtureList,this.m_fixtureList=e,this.m_fixtureCount++,e.m_body=r,e=n}i.m_fixtureCount=0;var i=this,r=t;i.GetWorldCenter(),r.GetWorldCenter(),i.GetLinearVelocity().Copy(),r.GetLinearVelocity().Copy(),i.GetAngularVelocity(),r.GetAngularVelocity(),i.ResetMassData(),this.SynchronizeFixtures()},t.prototype.GetMass=function(){return this.m_mass},t.prototype.GetInertia=function(){return this.m_I},t.prototype.GetMassData=function(t){t.mass=this.m_mass,t.I=this.m_I,t.center.SetV(this.m_sweep.localCenter)},t.prototype.SetMassData=function(e){if(KV.b2Assert(0==this.m_world.IsLocked()),1!=this.m_world.IsLocked()&&this.m_type==t.b2_dynamicBody){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&!(this.m_flags&t.e_fixedRotationFlag)&&(this.m_I=e.I-this.m_mass*(e.center.x*e.center.x+e.center.y*e.center.y),this.m_invI=1/this.m_I);var n=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e.center),this.m_sweep.c0.SetV(rj.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-n.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-n.x)}},t.prototype.ResetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type!=t.b2_staticBody&&this.m_type!=t.b2_kinematicBody){for(var e=nj.Make(0,0),n=this.m_fixtureList;n;n=n.m_next)if(0!=n.m_density){var i=n.GetMassData();this.m_mass+=i.mass,e.x+=i.center.x*i.mass,e.y+=i.center.y*i.mass,this.m_I+=i.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&!(this.m_flags&t.e_fixedRotationFlag)?(this.m_I-=this.m_mass*(e.x*e.x+e.y*e.y),this.m_I*=this.m_inertiaScale,KV.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var r=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e),this.m_sweep.c0.SetV(rj.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-r.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-r.x)}},t.prototype.GetWorldPoint=function(t){var e=this.m_xf.R,n=new nj(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return n.x+=this.m_xf.position.x,n.y+=this.m_xf.position.y,n},t.prototype.GetWorldVector=function(t){return rj.MulMV(this.m_xf.R,t)},t.prototype.GetLocalPoint=function(t){return rj.MulXT(this.m_xf,t)},t.prototype.GetLocalVector=function(t){return rj.MulTMV(this.m_xf.R,t)},t.prototype.GetLinearVelocityFromWorldPoint=function(t){return new nj(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},t.prototype.GetLinearVelocityFromLocalPoint=function(t){var e=this.m_xf.R,n=new nj(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return n.x+=this.m_xf.position.x,n.y+=this.m_xf.position.y,new nj(this.m_linearVelocity.x-this.m_angularVelocity*(n.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(n.x-this.m_sweep.c.x))},t.prototype.GetLinearDamping=function(){return this.m_linearDamping},t.prototype.SetLinearDamping=function(t){this.m_linearDamping=t},t.prototype.GetAngularDamping=function(){return this.m_angularDamping},t.prototype.SetAngularDamping=function(t){this.m_angularDamping=t},t.prototype.SetType=function(e){if(this.m_type!=e){this.m_type=e,this.ResetMassData(),this.m_type==t.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var n=this.m_contactList;n;n=n.next)n.contact.FlagForFiltering()}},t.prototype.GetType=function(){return this.m_type},t.prototype.SetBullet=function(e){e?this.m_flags|=t.e_bulletFlag:this.m_flags&=~t.e_bulletFlag},t.prototype.IsBullet=function(){return(this.m_flags&t.e_bulletFlag)==t.e_bulletFlag},t.prototype.SetSleepingAllowed=function(e){e?this.m_flags|=t.e_allowSleepFlag:(this.m_flags&=~t.e_allowSleepFlag,this.SetAwake(!0))},t.prototype.SetAwake=function(e){e?(this.m_flags|=t.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~t.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},t.prototype.IsAwake=function(){return(this.m_flags&t.e_awakeFlag)==t.e_awakeFlag},t.prototype.SetFixedRotation=function(e){e?this.m_flags|=t.e_fixedRotationFlag:this.m_flags&=~t.e_fixedRotationFlag,this.ResetMassData()},t.prototype.IsFixedRotation=function(){return(this.m_flags&t.e_fixedRotationFlag)==t.e_fixedRotationFlag},t.prototype.SetActive=function(e){var n,i;if(e!=this.IsActive())if(e)for(this.m_flags|=t.e_activeFlag,n=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.CreateProxy(n,this.m_xf);else{for(this.m_flags&=~t.e_activeFlag,n=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.DestroyProxy(n);for(var r=this.m_contactList;r;){var o=r;r=r.next,this.m_world.m_contactManager.Destroy(o.contact)}this.m_contactList=null}},t.prototype.IsActive=function(){return(this.m_flags&t.e_activeFlag)==t.e_activeFlag},t.prototype.IsSleepingAllowed=function(){return(this.m_flags&t.e_allowSleepFlag)==t.e_allowSleepFlag},t.prototype.GetFixtureList=function(){return this.m_fixtureList},t.prototype.GetJointList=function(){return this.m_jointList},t.prototype.GetControllerList=function(){return this.m_controllerList},t.prototype.GetContactList=function(){return this.m_contactList},t.prototype.GetNext=function(){return this.m_next},t.prototype.GetUserData=function(){return this.m_userData},t.prototype.SetUserData=function(t){this.m_userData=t},t.prototype.GetWorld=function(){return this.m_world},t.prototype.SynchronizeFixtures=function(){var e=t.s_xf1;e.R.Set(this.m_sweep.a0);var n,i=e.R,r=this.m_sweep.localCenter;e.position.x=this.m_sweep.c0.x-(i.col1.x*r.x+i.col2.x*r.y),e.position.y=this.m_sweep.c0.y-(i.col1.y*r.x+i.col2.y*r.y);var o=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.Synchronize(o,e,this.m_xf)},t.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var t=this.m_xf.R,e=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(t.col1.x*e.x+t.col2.x*e.y),this.m_xf.position.y=this.m_sweep.c.y-(t.col1.y*e.x+t.col2.y*e.y)},t.prototype.ShouldCollide=function(e){if(this.m_type!=t.b2_dynamicBody&&e.m_type!=t.b2_dynamicBody)return!1;for(var n=this.m_jointList;n;n=n.next)if(n.other==e&&0==n.joint.m_collideConnected)return!1;return!0},t.prototype.Advance=function(t){this.m_sweep.Advance(t),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},t.s_xf1=new ej,t.e_islandFlag=1,t.e_awakeFlag=2,t.e_allowSleepFlag=4,t.e_bulletFlag=8,t.e_fixedRotationFlag=16,t.e_activeFlag=32,t.b2_staticBody=0,t.b2_kinematicBody=1,t.b2_dynamicBody=2,t}(),yG=function(){return function(){}}(),AG=function(){function t(){this.__fast__=!0,this.m_nodeA=new yG,this.m_nodeB=new yG,this.m_manifold=new Aj,this.m_oldManifold=new Aj}return t.prototype.GetManifold=function(){return this.m_manifold},t.prototype.GetWorldManifold=function(t){var e=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody(),i=this.m_fixtureA.GetShape(),r=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,e.GetTransform(),i.m_radius,n.GetTransform(),r.m_radius)},t.prototype.IsTouching=function(){return(this.m_flags&t.e_touchingFlag)==t.e_touchingFlag},t.prototype.IsContinuous=function(){return(this.m_flags&t.e_continuousFlag)==t.e_continuousFlag},t.prototype.SetSensor=function(e){e?this.m_flags|=t.e_sensorFlag:this.m_flags&=~t.e_sensorFlag},t.prototype.IsSensor=function(){return(this.m_flags&t.e_sensorFlag)==t.e_sensorFlag},t.prototype.SetEnabled=function(e){e?this.m_flags|=t.e_enabledFlag:this.m_flags&=~t.e_enabledFlag},t.prototype.IsEnabled=function(){return(this.m_flags&t.e_enabledFlag)==t.e_enabledFlag},t.prototype.GetNext=function(){return this.m_next},t.prototype.GetFixtureA=function(){return this.m_fixtureA},t.prototype.GetFixtureB=function(){return this.m_fixtureB},t.prototype.FlagForFiltering=function(){this.m_flags|=t.e_filterFlag},t.prototype.Reset=function(e,n){if(this.m_flags=t.e_enabledFlag,!e||!n)return this.m_fixtureA=null,void(this.m_fixtureB=null);(e.IsSensor()||n.IsSensor())&&(this.m_flags|=t.e_sensorFlag);var i=e.GetBody(),r=n.GetBody();(i.GetType()!=mG.b2_dynamicBody||i.IsBullet()||r.GetType()!=mG.b2_dynamicBody||r.IsBullet())&&(this.m_flags|=t.e_continuousFlag),this.m_fixtureA=e,this.m_fixtureB=n,this.m_manifold.m_pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null},t.prototype.Update=function(e){var n=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=n,this.m_flags|=t.e_enabledFlag;var i=!1,r=(this.m_flags&t.e_touchingFlag)==t.e_touchingFlag,o=this.m_fixtureA.m_body,a=this.m_fixtureB.m_body,s=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&t.e_sensorFlag){if(s){var l=this.m_fixtureA.GetShape(),u=this.m_fixtureB.GetShape(),c=o.GetTransform(),h=a.GetTransform();i=uj.TestOverlap(l,c,u,h)}this.m_manifold.m_pointCount=0}else{if(o.GetType()!=mG.b2_dynamicBody||o.IsBullet()||a.GetType()!=mG.b2_dynamicBody||a.IsBullet()?this.m_flags|=t.e_continuousFlag:this.m_flags&=~t.e_continuousFlag,s){this.Evaluate(),i=this.m_manifold.m_pointCount>0;for(var p=0;p<this.m_manifold.m_pointCount;++p){var d=this.m_manifold.m_points[p];d.m_normalImpulse=0,d.m_tangentImpulse=0;for(var f=d.m_id,_=0;_<this.m_oldManifold.m_pointCount;++_){var g=this.m_oldManifold.m_points[_];if(g.m_id.key==f.key){d.m_normalImpulse=g.m_normalImpulse,d.m_tangentImpulse=g.m_tangentImpulse;break}}}}else this.m_manifold.m_pointCount=0;i!=r&&(o.SetAwake(!0),a.SetAwake(!0))}i?this.m_flags|=t.e_touchingFlag:this.m_flags&=~t.e_touchingFlag,0==r&&1==i&&e.BeginContact(this),1==r&&0==i&&e.EndContact(this),this.m_flags&t.e_sensorFlag||e.PreSolve(this,this.m_oldManifold)},t.prototype.Evaluate=function(){},t.prototype.ComputeTOI=function(e,n){return t.s_input.proxyA.Set(this.m_fixtureA.GetShape()),t.s_input.proxyB.Set(this.m_fixtureB.GetShape()),t.s_input.sweepA=e,t.s_input.sweepB=n,t.s_input.tolerance=KV.b2_linearSlop,Pj.TimeOfImpact(t.s_input)},t.e_sensorFlag=1,t.e_continuousFlag=2,t.e_islandFlag=4,t.e_toiFlag=8,t.e_touchingFlag=16,t.e_enabledFlag=32,t.e_filterFlag=64,t.s_input=new Bj,t}(),vG=function(){return function(){this.localPlaneNormal=new nj,this.localPoint=new nj,this.normal=new nj,this.normalMass=new ZV,this.K=new ZV,this.points=new Array(KV.b2_maxManifoldPoints);for(var t=0;t<KV.b2_maxManifoldPoints;t++)this.points[t]=new bG}}(),bG=function(){return function(){this.localPoint=new nj,this.rA=new nj,this.rB=new nj}}(),xG=function(){function t(t){this.m_allocator=t,this.InitializeRegisters()}return t.prototype.AddType=function(t,e,n,i){this.m_registers[n][i].createFcn=t,this.m_registers[n][i].destroyFcn=e,this.m_registers[n][i].primary=!0,n!=i&&(this.m_registers[i][n].createFcn=t,this.m_registers[i][n].destroyFcn=e,this.m_registers[i][n].primary=!1)},t.prototype.InitializeRegisters=function(){this.m_registers=new Array(uj.e_shapeTypeCount);for(var t=0;t<uj.e_shapeTypeCount;t++){this.m_registers[t]=new Array(uj.e_shapeTypeCount);for(var e=0;e<uj.e_shapeTypeCount;e++)this.m_registers[t][e]=new CG}this.AddType(TG.Create,TG.Destroy,uj.e_circleShape,uj.e_circleShape),this.AddType(wG.Create,wG.Destroy,uj.e_polygonShape,uj.e_circleShape),this.AddType(DG.Create,DG.Destroy,uj.e_polygonShape,uj.e_polygonShape),this.AddType(EG.Create,EG.Destroy,uj.e_edgeShape,uj.e_circleShape),this.AddType(SG.Create,SG.Destroy,uj.e_polygonShape,uj.e_edgeShape)},t.prototype.Create=function(t,e){var n,i=t.GetType(),r=e.GetType(),o=this.m_registers[i][r];if(o.pool)return n=o.pool,o.pool=n.m_next,o.poolCount--,n.Reset(t,e),n;var a=o.createFcn;return null!=a?o.primary?((n=a(this.m_allocator)).Reset(t,e),n):((n=a(this.m_allocator)).Reset(e,t),n):null},t.prototype.Destroy=function(t){t.m_manifold.m_pointCount>0&&(t.m_fixtureA.m_body.SetAwake(!0),t.m_fixtureB.m_body.SetAwake(!0));var e=t.m_fixtureA.GetType(),n=t.m_fixtureB.GetType(),i=this.m_registers[e][n];i.poolCount++,t.m_next=i.pool,i.pool=t,(0,i.destroyFcn)(t,this.m_allocator)},t}(),CG=function(){return function(){}}(),IG=function(){function t(){this.m_step=new uG,this.m_constraints=new Array}return t.prototype.Initialize=function(e,n,i,r){var o,a;for(this.m_step.Set(e),this.m_allocator=r,this.m_constraintCount=i;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new vG;for(a=0;a<i;++a){var s=(o=n[a]).m_fixtureA,l=o.m_fixtureB,u=s.m_shape,c=l.m_shape,h=u.m_radius,p=c.m_radius,d=s.m_body,f=l.m_body,_=o.GetManifold(),g=KV.b2MixFriction(s.GetFriction(),l.GetFriction()),m=KV.b2MixRestitution(s.GetRestitution(),l.GetRestitution()),y=d.m_linearVelocity.x,A=d.m_linearVelocity.y,v=f.m_linearVelocity.x,b=f.m_linearVelocity.y,x=d.m_angularVelocity,C=f.m_angularVelocity;KV.b2Assert(_.m_pointCount>0),t.s_worldManifold.Initialize(_,d.m_xf,h,f.m_xf,p);var I=t.s_worldManifold.m_normal.x,E=t.s_worldManifold.m_normal.y,w=this.m_constraints[a];w.bodyA=d,w.bodyB=f,w.manifold=_,w.normal.x=I,w.normal.y=E,w.pointCount=_.m_pointCount,w.friction=g,w.restitution=m,w.localPlaneNormal.x=_.m_localPlaneNormal.x,w.localPlaneNormal.y=_.m_localPlaneNormal.y,w.localPoint.x=_.m_localPoint.x,w.localPoint.y=_.m_localPoint.y,w.radius=h+p,w.type=_.m_type;for(var S=0;S<w.pointCount;++S){var D=_.m_points[S],T=w.points[S];T.normalImpulse=D.m_normalImpulse,T.tangentImpulse=D.m_tangentImpulse,T.localPoint.SetV(D.m_localPoint);var P=T.rA.x=t.s_worldManifold.m_points[S].x-d.m_sweep.c.x,B=T.rA.y=t.s_worldManifold.m_points[S].y-d.m_sweep.c.y,O=T.rB.x=t.s_worldManifold.m_points[S].x-f.m_sweep.c.x,M=T.rB.y=t.s_worldManifold.m_points[S].y-f.m_sweep.c.y,L=P*E-B*I,R=O*E-M*I;L*=L,R*=R;var N=d.m_invMass+f.m_invMass+d.m_invI*L+f.m_invI*R;T.normalMass=1/N;var F=d.m_mass*d.m_invMass+f.m_mass*f.m_invMass;F+=d.m_mass*d.m_invI*L+f.m_mass*f.m_invI*R,T.equalizedMass=1/F;var k=-I,U=P*k-B*E,V=O*k-M*E;U*=U,V*=V;var j=d.m_invMass+f.m_invMass+d.m_invI*U+f.m_invI*V;T.tangentMass=1/j,T.velocityBias=0;var G=v+-C*M-y- -x*B,Q=b+C*O-A-x*P,z=w.normal.x*G+w.normal.y*Q;z<-KV.b2_velocityThreshold&&(T.velocityBias+=-w.restitution*z)}if(2==w.pointCount){var H=w.points[0],X=w.points[1],Y=d.m_invMass,q=d.m_invI,K=f.m_invMass,W=f.m_invI,J=H.rA.x*E-H.rA.y*I,Z=H.rB.x*E-H.rB.y*I,$=X.rA.x*E-X.rA.y*I,tt=X.rB.x*E-X.rB.y*I,et=Y+K+q*J*J+W*Z*Z,nt=Y+K+q*$*$+W*tt*tt,it=Y+K+q*J*$+W*Z*tt;et*et<100*(et*nt-it*it)?(w.K.col1.Set(et,it),w.K.col2.Set(it,nt),w.K.GetInverse(w.normalMass)):w.pointCount=1}}},t.prototype.InitVelocityConstraints=function(t){for(var e=0;e<this.m_constraintCount;++e){var n,i,r=this.m_constraints[e],o=r.bodyA,a=r.bodyB,s=o.m_invMass,l=o.m_invI,u=a.m_invMass,c=a.m_invI,h=r.normal.x,p=r.normal.y,d=p,f=-h;if(t.warmStarting)for(i=r.pointCount,n=0;n<i;++n){var _=r.points[n];_.normalImpulse*=t.dtRatio,_.tangentImpulse*=t.dtRatio;var g=_.normalImpulse*h+_.tangentImpulse*d,m=_.normalImpulse*p+_.tangentImpulse*f;o.m_angularVelocity-=l*(_.rA.x*m-_.rA.y*g),o.m_linearVelocity.x-=s*g,o.m_linearVelocity.y-=s*m,a.m_angularVelocity+=c*(_.rB.x*m-_.rB.y*g),a.m_linearVelocity.x+=u*g,a.m_linearVelocity.y+=u*m}else for(i=r.pointCount,n=0;n<i;++n){var y=r.points[n];y.normalImpulse=0,y.tangentImpulse=0}}},t.prototype.SolveVelocityConstraints=function(){for(var t,e,n,i,r,o,a,s,l,u,c,h,p,d,f,_,g=0;g<this.m_constraintCount;++g){var m=this.m_constraints[g],y=m.bodyA,A=m.bodyB,v=y.m_angularVelocity,b=A.m_angularVelocity,x=y.m_linearVelocity,C=A.m_linearVelocity,I=y.m_invMass,E=y.m_invI,w=A.m_invMass,S=A.m_invI,D=m.normal.x,T=m.normal.y,P=T,B=-D,O=m.friction;for(t=0;t<m.pointCount;t++)e=m.points[t],i=(C.x-b*e.rB.y-x.x+v*e.rA.y)*P+(C.y+b*e.rB.x-x.y-v*e.rA.x)*B,r=e.tangentMass*-i,o=O*e.normalImpulse,s=(r=(a=rj.Clamp(e.tangentImpulse+r,-o,o))-e.tangentImpulse)*P,l=r*B,x.x-=I*s,x.y-=I*l,v-=E*(e.rA.x*l-e.rA.y*s),C.x+=w*s,C.y+=w*l,b+=S*(e.rB.x*l-e.rB.y*s),e.tangentImpulse=a;if(m.pointCount,1==m.pointCount)e=m.points[0],n=(C.x+-b*e.rB.y-x.x- -v*e.rA.y)*D+(C.y+b*e.rB.x-x.y-v*e.rA.x)*T,r=-e.normalMass*(n-e.velocityBias),s=(r=(a=(a=e.normalImpulse+r)>0?a:0)-e.normalImpulse)*D,l=r*T,x.x-=I*s,x.y-=I*l,v-=E*(e.rA.x*l-e.rA.y*s),C.x+=w*s,C.y+=w*l,b+=S*(e.rB.x*l-e.rB.y*s),e.normalImpulse=a;else{var M=m.points[0],L=m.points[1],R=M.normalImpulse,N=L.normalImpulse,F=(C.x-b*M.rB.y-x.x+v*M.rA.y)*D+(C.y+b*M.rB.x-x.y-v*M.rA.x)*T,k=(C.x-b*L.rB.y-x.x+v*L.rA.y)*D+(C.y+b*L.rB.x-x.y-v*L.rA.x)*T,U=F-M.velocityBias,V=k-L.velocityBias;for(U-=(_=m.K).col1.x*R+_.col2.x*N,V-=_.col1.y*R+_.col2.y*N;;){var j=-((_=m.normalMass).col1.x*U+_.col2.x*V),G=-(_.col1.y*U+_.col2.y*V);if(j>=0&&G>=0){h=(u=j-R)*D,p=u*T,d=(c=G-N)*D,f=c*T,x.x-=I*(h+d),x.y-=I*(p+f),v-=E*(M.rA.x*p-M.rA.y*h+L.rA.x*f-L.rA.y*d),C.x+=w*(h+d),C.y+=w*(p+f),b+=S*(M.rB.x*p-M.rB.y*h+L.rB.x*f-L.rB.y*d),M.normalImpulse=j,L.normalImpulse=G;break}if(j=-M.normalMass*U,G=0,F=0,k=m.K.col1.y*j+V,j>=0&&k>=0){h=(u=j-R)*D,p=u*T,d=(c=G-N)*D,f=c*T,x.x-=I*(h+d),x.y-=I*(p+f),v-=E*(M.rA.x*p-M.rA.y*h+L.rA.x*f-L.rA.y*d),C.x+=w*(h+d),C.y+=w*(p+f),b+=S*(M.rB.x*p-M.rB.y*h+L.rB.x*f-L.rB.y*d),M.normalImpulse=j,L.normalImpulse=G;break}if(j=0,G=-L.normalMass*V,F=m.K.col2.x*G+U,k=0,G>=0&&F>=0){h=(u=j-R)*D,p=u*T,d=(c=G-N)*D,f=c*T,x.x-=I*(h+d),x.y-=I*(p+f),v-=E*(M.rA.x*p-M.rA.y*h+L.rA.x*f-L.rA.y*d),C.x+=w*(h+d),C.y+=w*(p+f),b+=S*(M.rB.x*p-M.rB.y*h+L.rB.x*f-L.rB.y*d),M.normalImpulse=j,L.normalImpulse=G;break}if(j=0,G=0,k=V,(F=U)>=0&&k>=0){h=(u=j-R)*D,p=u*T,d=(c=G-N)*D,f=c*T,x.x-=I*(h+d),x.y-=I*(p+f),v-=E*(M.rA.x*p-M.rA.y*h+L.rA.x*f-L.rA.y*d),C.x+=w*(h+d),C.y+=w*(p+f),b+=S*(M.rB.x*p-M.rB.y*h+L.rB.x*f-L.rB.y*d),M.normalImpulse=j,L.normalImpulse=G;break}break}}y.m_angularVelocity=v,A.m_angularVelocity=b}},t.prototype.FinalizeVelocityConstraints=function(){for(var t=0;t<this.m_constraintCount;++t)for(var e=this.m_constraints[t],n=e.manifold,i=0;i<e.pointCount;++i){var r=n.m_points[i],o=e.points[i];r.m_normalImpulse=o.normalImpulse,r.m_tangentImpulse=o.tangentImpulse}},t.prototype.SolvePositionConstraints=function(e){for(var n=0,i=0;i<this.m_constraintCount;i++){var r=this.m_constraints[i],o=r.bodyA,a=r.bodyB,s=o.m_mass*o.m_invMass,l=o.m_mass*o.m_invI,u=a.m_mass*a.m_invMass,c=a.m_mass*a.m_invI;t.s_psm.Initialize(r);for(var h=t.s_psm.m_normal,p=0;p<r.pointCount;p++){var d=r.points[p],f=t.s_psm.m_points[p],_=t.s_psm.m_separations[p],g=f.x-o.m_sweep.c.x,m=f.y-o.m_sweep.c.y,y=f.x-a.m_sweep.c.x,A=f.y-a.m_sweep.c.y;n=n<_?n:_;var v=rj.Clamp(e*(_+KV.b2_linearSlop),-KV.b2_maxLinearCorrection,0),b=-d.equalizedMass*v,x=b*h.x,C=b*h.y;o.m_sweep.c.x-=s*x,o.m_sweep.c.y-=s*C,o.m_sweep.a-=l*(g*C-m*x),o.SynchronizeTransform(),a.m_sweep.c.x+=u*x,a.m_sweep.c.y+=u*C,a.m_sweep.a+=c*(y*C-A*x),a.SynchronizeTransform()}}return n>-1.5*KV.b2_linearSlop},t.s_worldManifold=new Oj,t.s_psm=new Lj,t}(),EG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.Create=function(t){return new e},e.Destroy=function(t,e){},e.prototype.Reset=function(e,n){t.prototype.Reset.call(this,e,n)},e.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape(),t.m_xf,this.m_fixtureB.GetShape(),e.m_xf)},e.prototype.b2CollideEdgeAndCircle=function(t,e,n,i,r){},e}(AG),wG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.Create=function(t){return new e},e.Destroy=function(t,e){},e.prototype.Reset=function(e,n){t.prototype.Reset.call(this,e,n),KV.b2Assert(e.GetType()==uj.e_polygonShape),KV.b2Assert(n.GetType()==uj.e_circleShape)},e.prototype.Evaluate=function(){var t=this.m_fixtureA.m_body,e=this.m_fixtureB.m_body;vj.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape(),t.m_xf,this.m_fixtureB.GetShape(),e.m_xf)},e}(AG),SG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.Create=function(t){return new e},e.Destroy=function(t,e){},e.prototype.Reset=function(e,n){t.prototype.Reset.call(this,e,n),KV.b2Assert(e.GetType()==uj.e_polygonShape),KV.b2Assert(n.GetType()==uj.e_edgeShape)},e.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape(),t.m_xf,this.m_fixtureB.GetShape(),e.m_xf)},e.prototype.b2CollidePolyAndEdge=function(t,e,n,i,r){},e}(AG),DG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.Create=function(t){return new e},e.Destroy=function(t,e){},e.prototype.Reset=function(e,n){t.prototype.Reset.call(this,e,n)},e.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();vj.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape(),t.m_xf,this.m_fixtureB.GetShape(),e.m_xf)},e}(AG),TG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.Create=function(t){return new e},e.Destroy=function(t,e){},e.prototype.Reset=function(e,n){t.prototype.Reset.call(this,e,n)},e.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();vj.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape(),t.m_xf,this.m_fixtureB.GetShape(),e.m_xf)},e}(AG),PG=function(){return function(){}}(),BG=function(){function t(){}return t.prototype.Step=function(t){},t.prototype.Draw=function(t){},t.prototype.AddBody=function(t){var e=new PG;e.controller=this,e.body=t,e.nextBody=this.m_bodyList,e.prevBody=null,this.m_bodyList=e,e.nextBody&&(e.nextBody.prevBody=e),this.m_bodyCount++,e.nextController=t.m_controllerList,e.prevController=null,t.m_controllerList=e,e.nextController&&(e.nextController.prevController=e),t.m_controllerCount++},t.prototype.RemoveBody=function(t){for(var e=t.m_controllerList;e&&e.controller!=this;)e=e.nextController;e.prevBody&&(e.prevBody.nextBody=e.nextBody),e.nextBody&&(e.nextBody.prevBody=e.prevBody),e.nextController&&(e.nextController.prevController=e.prevController),e.prevController&&(e.prevController.nextController=e.nextController),this.m_bodyList==e&&(this.m_bodyList=e.nextBody),t.m_controllerList==e&&(t.m_controllerList=e.nextController),t.m_controllerCount--,this.m_bodyCount--},t.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body)},t.prototype.GetNext=function(){return this.m_next},t.prototype.GetWorld=function(){return this.m_world},t.prototype.GetBodyList=function(){return this.m_bodyList},t}(),OG=Object.freeze({__proto__:null,b2CircleShape:cj,b2EdgeShape:hj,b2MassData:pj,b2PolygonShape:dj,b2Shape:uj,b2AABB:fj,b2Collision:vj,b2ContactID:gj,b2ContactPoint:bj,b2Distance:lj,b2DistanceInput:qV,b2DistanceOutput:oj,b2DistanceProxy:WV,b2DynamicTree:Ij,b2DynamicTreeBroadPhase:wj,b2DynamicTreeNode:xj,b2DynamicTreePair:Ej,b2Manifold:Aj,b2ManifoldPoint:yj,b2OBB:Sj,b2RayCastInput:Cj,b2RayCastOutput:Dj,b2SeparationFunction:Tj,b2Simplex:sj,b2SimplexCache:JV,b2SimplexVertex:aj,b2TimeOfImpact:Pj,b2TOIInput:Bj,b2WorldManifold:Oj,ClipVertex:mj,Features:_j,b2Mat22:ZV,b2Mat33:$V,b2Math:rj,b2Sweep:tj,b2Transform:ej,b2Vec2:nj,b2Vec3:ij,b2Color:Mj,b2Settings:KV,b2CircleContact:TG,b2Contact:AG,b2ContactConstraint:vG,b2ContactConstraintPoint:bG,b2ContactEdge:yG,b2ContactFactory:xG,b2ContactRegister:CG,b2ContactSolver:IG,b2EdgeAndCircleContact:EG,b2PolyAndCircleContact:wG,b2PolyAndEdgeContact:SG,b2PolygonContact:DG,b2PositionSolverManifold:Lj,b2Controller:BG,b2ControllerEdge:PG,b2DistanceJoint:Qj,b2DistanceJointDef:zj,b2FrictionJoint:Hj,b2FrictionJointDef:Xj,b2GearJoint:Yj,b2GearJointDef:qj,b2Jacobian:Kj,b2Joint:jj,b2JointDef:Gj,b2JointEdge:Wj,b2LineJoint:Jj,b2LineJointDef:Zj,b2MouseJoint:$j,b2MouseJointDef:tG,b2PrismaticJoint:eG,b2PrismaticJointDef:nG,b2PulleyJoint:iG,b2PulleyJointDef:rG,b2RevoluteJoint:oG,b2RevoluteJointDef:aG,b2WeldJoint:sG,b2WeldJointDef:lG,b2Body:mG,b2BodyDef:Rj,b2ContactFilter:dG,b2ContactImpulse:Uj,b2ContactListener:pG,b2ContactManager:fG,b2DebugDraw:cG,b2DestructionListener:hG,b2FilterData:Nj,b2Fixture:Fj,b2FixtureDef:kj,b2Island:Vj,b2TimeStep:uG,b2World:gG});console.debug("Poki-Player - 0.1.10"),console.debug("Neutronized - 0.0.109"),Uc.deviceFontMap.sans.push("Arcadepix");var MG=["bG9jYWxob3N0","LnBva2kuY29t","LnBva2ktZ2RuLmNvbQ==","YXdheXN0dWRpb3MuY29t","hostname","location","length","indexOf","aHR0cHM6Ly9wb2tpLmNvbS9zaXRlbG9jaw==","href","top"];!function(){for(var t=[MG[0],MG[1],MG[2],MG[3]],e=!1,n=window[MG[5]][MG[4]],i=0;i<t[MG[6]];i++){var r=atob(t[i]);if(-1!==n[MG[7]](r,n[MG[6]]-r[MG[6]])){e=!0;break}}if(!e){var o=atob(MG[8]);window[MG[5]][MG[9]]=o,window[MG[10]][MG[5]]!==window[MG[5]]&&(window[MG[10]][MG[5]]=window[MG[5]])}}(),window.startPokiGame=function(t){return oe.ENABLE_UNLOAD_BITMAP=!1,Ks.USE_UNSAFE_FILTERS=!0,t.externalLib=OG,t.redirects=[{test:/\/media\//,resolve:function(t){return"./assets/".concat(t.replace(/\/\//g,""))}}],new YV(t)}}();
